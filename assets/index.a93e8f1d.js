(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerpolicy&&(u.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?u.credentials="include":a.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();function L3(r,e){const n=Object.create(null),s=r.split(",");for(let a=0;a<s.length;a++)n[s[a]]=!0;return e?a=>!!n[a.toLowerCase()]:a=>!!n[a]}function Qs(r){if(Ci(r)){const e={};for(let n=0;n<r.length;n++){const s=r[n],a=ls(s)?Nue(s):Qs(s);if(a)for(const u in a)e[u]=a[u]}return e}else{if(ls(r))return r;if(ts(r))return r}}const Pue=/;(?![^(]*\))/g,Iue=/:([^]+)/,Due=/\/\*.*?\*\//gs;function Nue(r){const e={};return r.replace(Due,"").split(Pue).forEach(n=>{if(n){const s=n.split(Iue);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function er(r){let e="";if(ls(r))e=r;else if(Ci(r))for(let n=0;n<r.length;n++){const s=er(r[n]);s&&(e+=s+" ")}else if(ts(r))for(const n in r)r[n]&&(e+=n+" ");return e.trim()}function jr(r){if(!r)return null;let{class:e,style:n}=r;return e&&!ls(e)&&(r.class=er(e)),n&&(r.style=Qs(n)),r}const Oue="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Fue=L3(Oue),Bue="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Vue=L3(Bue);function TF(r){return!!r||r===""}const Js=r=>ls(r)?r:r==null?"":Ci(r)||ts(r)&&(r.toString===LF||!zi(r.toString))?JSON.stringify(r,MF,2):String(r),MF=(r,e)=>e&&e.__v_isRef?MF(r,e.value):ag(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,a])=>(n[`${s} =>`]=a,n),{})}:AF(e)?{[`Set(${e.size})`]:[...e.values()]}:ts(e)&&!Ci(e)&&!RF(e)?String(e):e,es={},og=[],vc=()=>{},Wue=()=>!1,zue=/^on[^a-z]/,R3=r=>zue.test(r),bM=r=>r.startsWith("onUpdate:"),Eo=Object.assign,xM=(r,e)=>{const n=r.indexOf(e);n>-1&&r.splice(n,1)},Uue=Object.prototype.hasOwnProperty,dr=(r,e)=>Uue.call(r,e),Ci=Array.isArray,ag=r=>f_(r)==="[object Map]",AF=r=>f_(r)==="[object Set]",Gue=r=>f_(r)==="[object RegExp]",zi=r=>typeof r=="function",ls=r=>typeof r=="string",wM=r=>typeof r=="symbol",ts=r=>r!==null&&typeof r=="object",kM=r=>ts(r)&&zi(r.then)&&zi(r.catch),LF=Object.prototype.toString,f_=r=>LF.call(r),Hue=r=>f_(r).slice(8,-1),RF=r=>f_(r)==="[object Object]",CM=r=>ls(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Uw=L3(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P3=r=>{const e=Object.create(null);return n=>e[n]||(e[n]=r(n))},Yue=/-(\w)/g,uu=P3(r=>r.replace(Yue,(e,n)=>n?n.toUpperCase():"")),jue=/\B([A-Z])/g,qp=P3(r=>r.replace(jue,"-$1").toLowerCase()),I3=P3(r=>r.charAt(0).toUpperCase()+r.slice(1)),SS=P3(r=>r?`on${I3(r)}`:""),Iy=(r,e)=>!Object.is(r,e),lg=(r,e)=>{for(let n=0;n<r.length;n++)r[n](e)},o3=(r,e,n)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:n})},zE=r=>{const e=parseFloat(r);return isNaN(e)?r:e},PF=r=>{const e=ls(r)?Number(r):NaN;return isNaN(e)?r:e};let AD;const $ue=()=>AD||(AD=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Ka;class IF{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ka,!e&&Ka&&(this.index=(Ka.scopes||(Ka.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Ka;try{return Ka=this,e()}finally{Ka=n}}}on(){Ka=this}off(){Ka=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function que(r){return new IF(r)}function Xue(r,e=Ka){e&&e.active&&e.effects.push(r)}function SM(){return Ka}function DF(r){Ka&&Ka.cleanups.push(r)}const EM=r=>{const e=new Set(r);return e.w=0,e.n=0,e},NF=r=>(r.w&Hd)>0,OF=r=>(r.n&Hd)>0,Zue=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=Hd},Kue=r=>{const{deps:e}=r;if(e.length){let n=0;for(let s=0;s<e.length;s++){const a=e[s];NF(a)&&!OF(a)?a.delete(r):e[n++]=a,a.w&=~Hd,a.n&=~Hd}e.length=n}},a3=new WeakMap;let uy=0,Hd=1;const UE=30;let pc;const Np=Symbol(""),GE=Symbol("");class TM{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Xue(this,s)}run(){if(!this.active)return this.fn();let e=pc,n=Od;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=pc,pc=this,Od=!0,Hd=1<<++uy,uy<=UE?Zue(this):LD(this),this.fn()}finally{uy<=UE&&Kue(this),Hd=1<<--uy,pc=this.parent,Od=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){pc===this?this.deferStop=!0:this.active&&(LD(this),this.onStop&&this.onStop(),this.active=!1)}}function LD(r){const{deps:e}=r;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(r);e.length=0}}let Od=!0;const FF=[];function Tg(){FF.push(Od),Od=!1}function Mg(){const r=FF.pop();Od=r===void 0?!0:r}function Ta(r,e,n){if(Od&&pc){let s=a3.get(r);s||a3.set(r,s=new Map);let a=s.get(n);a||s.set(n,a=EM()),BF(a)}}function BF(r,e){let n=!1;uy<=UE?OF(r)||(r.n|=Hd,n=!NF(r)):n=!r.has(pc),n&&(r.add(pc),pc.deps.push(r))}function wh(r,e,n,s,a,u){const d=a3.get(r);if(!d)return;let f=[];if(e==="clear")f=[...d.values()];else if(n==="length"&&Ci(r)){const g=Number(s);d.forEach((_,y)=>{(y==="length"||y>=g)&&f.push(_)})}else switch(n!==void 0&&f.push(d.get(n)),e){case"add":Ci(r)?CM(n)&&f.push(d.get("length")):(f.push(d.get(Np)),ag(r)&&f.push(d.get(GE)));break;case"delete":Ci(r)||(f.push(d.get(Np)),ag(r)&&f.push(d.get(GE)));break;case"set":ag(r)&&f.push(d.get(Np));break}if(f.length===1)f[0]&&HE(f[0]);else{const g=[];for(const _ of f)_&&g.push(..._);HE(EM(g))}}function HE(r,e){const n=Ci(r)?r:[...r];for(const s of n)s.computed&&RD(s);for(const s of n)s.computed||RD(s)}function RD(r,e){(r!==pc||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}function Jue(r,e){var n;return(n=a3.get(r))===null||n===void 0?void 0:n.get(e)}const Que=L3("__proto__,__v_isRef,__isVue"),VF=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(wM)),ehe=MM(),the=MM(!1,!0),nhe=MM(!0),PD=ihe();function ihe(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...n){const s=ur(this);for(let u=0,d=this.length;u<d;u++)Ta(s,"get",u+"");const a=s[e](...n);return a===-1||a===!1?s[e](...n.map(ur)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...n){Tg();const s=ur(this)[e].apply(this,n);return Mg(),s}}),r}function rhe(r){const e=ur(this);return Ta(e,"has",r),e.hasOwnProperty(r)}function MM(r=!1,e=!1){return function(s,a,u){if(a==="__v_isReactive")return!r;if(a==="__v_isReadonly")return r;if(a==="__v_isShallow")return e;if(a==="__v_raw"&&u===(r?e?bhe:HF:e?GF:UF).get(s))return s;const d=Ci(s);if(!r){if(d&&dr(PD,a))return Reflect.get(PD,a,u);if(a==="hasOwnProperty")return rhe}const f=Reflect.get(s,a,u);return(wM(a)?VF.has(a):Que(a))||(r||Ta(s,"get",a),e)?f:Lr(f)?d&&CM(a)?f:f.value:ts(f)?r?su(f):Yr(f):f}}const she=WF(),ohe=WF(!0);function WF(r=!1){return function(n,s,a,u){let d=n[s];if(yg(d)&&Lr(d)&&!Lr(a))return!1;if(!r&&(!l3(a)&&!yg(a)&&(d=ur(d),a=ur(a)),!Ci(n)&&Lr(d)&&!Lr(a)))return d.value=a,!0;const f=Ci(n)&&CM(s)?Number(s)<n.length:dr(n,s),g=Reflect.set(n,s,a,u);return n===ur(u)&&(f?Iy(a,d)&&wh(n,"set",s,a):wh(n,"add",s,a)),g}}function ahe(r,e){const n=dr(r,e);r[e];const s=Reflect.deleteProperty(r,e);return s&&n&&wh(r,"delete",e,void 0),s}function lhe(r,e){const n=Reflect.has(r,e);return(!wM(e)||!VF.has(e))&&Ta(r,"has",e),n}function che(r){return Ta(r,"iterate",Ci(r)?"length":Np),Reflect.ownKeys(r)}const zF={get:ehe,set:she,deleteProperty:ahe,has:lhe,ownKeys:che},uhe={get:nhe,set(r,e){return!0},deleteProperty(r,e){return!0}},hhe=Eo({},zF,{get:the,set:ohe}),AM=r=>r,D3=r=>Reflect.getPrototypeOf(r);function Wx(r,e,n=!1,s=!1){r=r.__v_raw;const a=ur(r),u=ur(e);n||(e!==u&&Ta(a,"get",e),Ta(a,"get",u));const{has:d}=D3(a),f=s?AM:n?PM:Dy;if(d.call(a,e))return f(r.get(e));if(d.call(a,u))return f(r.get(u));r!==a&&r.get(e)}function zx(r,e=!1){const n=this.__v_raw,s=ur(n),a=ur(r);return e||(r!==a&&Ta(s,"has",r),Ta(s,"has",a)),r===a?n.has(r):n.has(r)||n.has(a)}function Ux(r,e=!1){return r=r.__v_raw,!e&&Ta(ur(r),"iterate",Np),Reflect.get(r,"size",r)}function ID(r){r=ur(r);const e=ur(this);return D3(e).has.call(e,r)||(e.add(r),wh(e,"add",r,r)),this}function DD(r,e){e=ur(e);const n=ur(this),{has:s,get:a}=D3(n);let u=s.call(n,r);u||(r=ur(r),u=s.call(n,r));const d=a.call(n,r);return n.set(r,e),u?Iy(e,d)&&wh(n,"set",r,e):wh(n,"add",r,e),this}function ND(r){const e=ur(this),{has:n,get:s}=D3(e);let a=n.call(e,r);a||(r=ur(r),a=n.call(e,r)),s&&s.call(e,r);const u=e.delete(r);return a&&wh(e,"delete",r,void 0),u}function OD(){const r=ur(this),e=r.size!==0,n=r.clear();return e&&wh(r,"clear",void 0,void 0),n}function Gx(r,e){return function(s,a){const u=this,d=u.__v_raw,f=ur(d),g=e?AM:r?PM:Dy;return!r&&Ta(f,"iterate",Np),d.forEach((_,y)=>s.call(a,g(_),g(y),u))}}function Hx(r,e,n){return function(...s){const a=this.__v_raw,u=ur(a),d=ag(u),f=r==="entries"||r===Symbol.iterator&&d,g=r==="keys"&&d,_=a[r](...s),y=n?AM:e?PM:Dy;return!e&&Ta(u,"iterate",g?GE:Np),{next(){const{value:w,done:k}=_.next();return k?{value:w,done:k}:{value:f?[y(w[0]),y(w[1])]:y(w),done:k}},[Symbol.iterator](){return this}}}}function yd(r){return function(...e){return r==="delete"?!1:this}}function dhe(){const r={get(u){return Wx(this,u)},get size(){return Ux(this)},has:zx,add:ID,set:DD,delete:ND,clear:OD,forEach:Gx(!1,!1)},e={get(u){return Wx(this,u,!1,!0)},get size(){return Ux(this)},has:zx,add:ID,set:DD,delete:ND,clear:OD,forEach:Gx(!1,!0)},n={get(u){return Wx(this,u,!0)},get size(){return Ux(this,!0)},has(u){return zx.call(this,u,!0)},add:yd("add"),set:yd("set"),delete:yd("delete"),clear:yd("clear"),forEach:Gx(!0,!1)},s={get(u){return Wx(this,u,!0,!0)},get size(){return Ux(this,!0)},has(u){return zx.call(this,u,!0)},add:yd("add"),set:yd("set"),delete:yd("delete"),clear:yd("clear"),forEach:Gx(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(u=>{r[u]=Hx(u,!1,!1),n[u]=Hx(u,!0,!1),e[u]=Hx(u,!1,!0),s[u]=Hx(u,!0,!0)}),[r,n,e,s]}const[fhe,phe,mhe,ghe]=dhe();function LM(r,e){const n=e?r?ghe:mhe:r?phe:fhe;return(s,a,u)=>a==="__v_isReactive"?!r:a==="__v_isReadonly"?r:a==="__v_raw"?s:Reflect.get(dr(n,a)&&a in s?n:s,a,u)}const vhe={get:LM(!1,!1)},yhe={get:LM(!1,!0)},_he={get:LM(!0,!1)},UF=new WeakMap,GF=new WeakMap,HF=new WeakMap,bhe=new WeakMap;function xhe(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function whe(r){return r.__v_skip||!Object.isExtensible(r)?0:xhe(Hue(r))}function Yr(r){return yg(r)?r:RM(r,!1,zF,vhe,UF)}function khe(r){return RM(r,!1,hhe,yhe,GF)}function su(r){return RM(r,!0,uhe,_he,HF)}function RM(r,e,n,s,a){if(!ts(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const u=a.get(r);if(u)return u;const d=whe(r);if(d===0)return r;const f=new Proxy(r,d===2?s:n);return a.set(r,f),f}function cg(r){return yg(r)?cg(r.__v_raw):!!(r&&r.__v_isReactive)}function yg(r){return!!(r&&r.__v_isReadonly)}function l3(r){return!!(r&&r.__v_isShallow)}function YF(r){return cg(r)||yg(r)}function ur(r){const e=r&&r.__v_raw;return e?ur(e):r}function N3(r){return o3(r,"__v_skip",!0),r}const Dy=r=>ts(r)?Yr(r):r,PM=r=>ts(r)?su(r):r;function IM(r){Od&&pc&&(r=ur(r),BF(r.dep||(r.dep=EM())))}function DM(r,e){r=ur(r);const n=r.dep;n&&HE(n)}function Lr(r){return!!(r&&r.__v_isRef===!0)}function Tn(r){return jF(r,!1)}function hu(r){return jF(r,!0)}function jF(r,e){return Lr(r)?r:new Che(r,e)}class Che{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:ur(e),this._value=n?e:Dy(e)}get value(){return IM(this),this._value}set value(e){const n=this.__v_isShallow||l3(e)||yg(e);e=n?e:ur(e),Iy(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Dy(e),DM(this))}}function ft(r){return Lr(r)?r.value:r}const She={get:(r,e,n)=>ft(Reflect.get(r,e,n)),set:(r,e,n,s)=>{const a=r[e];return Lr(a)&&!Lr(n)?(a.value=n,!0):Reflect.set(r,e,n,s)}};function $F(r){return cg(r)?r:new Proxy(r,She)}class Ehe{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:s}=e(()=>IM(this),()=>DM(this));this._get=n,this._set=s}get value(){return this._get()}set value(e){this._set(e)}}function qF(r){return new Ehe(r)}function XF(r){const e=Ci(r)?new Array(r.length):{};for(const n in r)e[n]=Mhe(r,n);return e}class The{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Jue(ur(this._object),this._key)}}function Mhe(r,e,n){const s=r[e];return Lr(s)?s:new The(r,e,n)}var ZF;class Ahe{constructor(e,n,s,a){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[ZF]=!1,this._dirty=!0,this.effect=new TM(e,()=>{this._dirty||(this._dirty=!0,DM(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=s}get value(){const e=ur(this);return IM(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}ZF="__v_isReadonly";function Lhe(r,e,n=!1){let s,a;const u=zi(r);return u?(s=r,a=vc):(s=r.get,a=r.set),new Ahe(s,a,u||!a,n)}function Fd(r,e,n,s){let a;try{a=s?r(...s):r()}catch(u){p_(u,e,n)}return a}function El(r,e,n,s){if(zi(r)){const u=Fd(r,e,n,s);return u&&kM(u)&&u.catch(d=>{p_(d,e,n)}),u}const a=[];for(let u=0;u<r.length;u++)a.push(El(r[u],e,n,s));return a}function p_(r,e,n,s=!0){const a=e?e.vnode:null;if(e){let u=e.parent;const d=e.proxy,f=n;for(;u;){const _=u.ec;if(_){for(let y=0;y<_.length;y++)if(_[y](r,d,f)===!1)return}u=u.parent}const g=e.appContext.config.errorHandler;if(g){Fd(g,null,10,[r,d,f]);return}}Rhe(r,n,a,s)}function Rhe(r,e,n,s=!0){console.error(r)}let Ny=!1,YE=!1;const zo=[];let iu=0;const ug=[];let fh=null,xp=0;const KF=Promise.resolve();let NM=null;function ko(r){const e=NM||KF;return r?e.then(this?r.bind(this):r):e}function Phe(r){let e=iu+1,n=zo.length;for(;e<n;){const s=e+n>>>1;Oy(zo[s])<r?e=s+1:n=s}return e}function OM(r){(!zo.length||!zo.includes(r,Ny&&r.allowRecurse?iu+1:iu))&&(r.id==null?zo.push(r):zo.splice(Phe(r.id),0,r),JF())}function JF(){!Ny&&!YE&&(YE=!0,NM=KF.then(tB))}function Ihe(r){const e=zo.indexOf(r);e>iu&&zo.splice(e,1)}function QF(r){Ci(r)?ug.push(...r):(!fh||!fh.includes(r,r.allowRecurse?xp+1:xp))&&ug.push(r),JF()}function FD(r,e=Ny?iu+1:0){for(;e<zo.length;e++){const n=zo[e];n&&n.pre&&(zo.splice(e,1),e--,n())}}function eB(r){if(ug.length){const e=[...new Set(ug)];if(ug.length=0,fh){fh.push(...e);return}for(fh=e,fh.sort((n,s)=>Oy(n)-Oy(s)),xp=0;xp<fh.length;xp++)fh[xp]();fh=null,xp=0}}const Oy=r=>r.id==null?1/0:r.id,Dhe=(r,e)=>{const n=Oy(r)-Oy(e);if(n===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return n};function tB(r){YE=!1,Ny=!0,zo.sort(Dhe);const e=vc;try{for(iu=0;iu<zo.length;iu++){const n=zo[iu];n&&n.active!==!1&&Fd(n,null,14)}}finally{iu=0,zo.length=0,eB(),Ny=!1,NM=null,(zo.length||ug.length)&&tB()}}function Nhe(r,e,...n){if(r.isUnmounted)return;const s=r.vnode.props||es;let a=n;const u=e.startsWith("update:"),d=u&&e.slice(7);if(d&&d in s){const y=`${d==="modelValue"?"model":d}Modifiers`,{number:w,trim:k}=s[y]||es;k&&(a=n.map(S=>ls(S)?S.trim():S)),w&&(a=n.map(zE))}let f,g=s[f=SS(e)]||s[f=SS(uu(e))];!g&&u&&(g=s[f=SS(qp(e))]),g&&El(g,r,6,a);const _=s[f+"Once"];if(_){if(!r.emitted)r.emitted={};else if(r.emitted[f])return;r.emitted[f]=!0,El(_,r,6,a)}}function nB(r,e,n=!1){const s=e.emitsCache,a=s.get(r);if(a!==void 0)return a;const u=r.emits;let d={},f=!1;if(!zi(r)){const g=_=>{const y=nB(_,e,!0);y&&(f=!0,Eo(d,y))};!n&&e.mixins.length&&e.mixins.forEach(g),r.extends&&g(r.extends),r.mixins&&r.mixins.forEach(g)}return!u&&!f?(ts(r)&&s.set(r,null),null):(Ci(u)?u.forEach(g=>d[g]=null):Eo(d,u),ts(r)&&s.set(r,d),d)}function O3(r,e){return!r||!R3(e)?!1:(e=e.slice(2).replace(/Once$/,""),dr(r,e[0].toLowerCase()+e.slice(1))||dr(r,qp(e))||dr(r,e))}let Co=null,F3=null;function c3(r){const e=Co;return Co=r,F3=r&&r.type.__scopeId||null,e}function uDe(r){F3=r}function hDe(){F3=null}function Xn(r,e=Co,n){if(!e||r._n)return r;const s=(...a)=>{s._d&&XD(-1);const u=c3(e);let d;try{d=r(...a)}finally{c3(u),s._d&&XD(1)}return d};return s._n=!0,s._c=!0,s._d=!0,s}function ES(r){const{type:e,vnode:n,proxy:s,withProxy:a,props:u,propsOptions:[d],slots:f,attrs:g,emit:_,render:y,renderCache:w,data:k,setupState:S,ctx:A,inheritAttrs:P}=r;let R,O;const B=c3(r);try{if(n.shapeFlag&4){const V=a||s;R=dc(y.call(V,V,w,u,S,k,A)),O=g}else{const V=e;R=dc(V.length>1?V(u,{attrs:g,slots:f,emit:_}):V(u,null)),O=e.props?g:Fhe(g)}}catch(V){vy.length=0,p_(V,r,1),R=Bt(Sa)}let N=R;if(O&&P!==!1){const V=Object.keys(O),{shapeFlag:U}=N;V.length&&U&7&&(d&&V.some(bM)&&(O=Bhe(O,d)),N=Eh(N,O))}return n.dirs&&(N=Eh(N),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&(N.transition=n.transition),R=N,c3(B),R}function Ohe(r){let e;for(let n=0;n<r.length;n++){const s=r[n];if(Yd(s)){if(s.type!==Sa||s.children==="v-if"){if(e)return;e=s}}else return}return e}const Fhe=r=>{let e;for(const n in r)(n==="class"||n==="style"||R3(n))&&((e||(e={}))[n]=r[n]);return e},Bhe=(r,e)=>{const n={};for(const s in r)(!bM(s)||!(s.slice(9)in e))&&(n[s]=r[s]);return n};function Vhe(r,e,n){const{props:s,children:a,component:u}=r,{props:d,children:f,patchFlag:g}=e,_=u.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&g>=0){if(g&1024)return!0;if(g&16)return s?BD(s,d,_):!!d;if(g&8){const y=e.dynamicProps;for(let w=0;w<y.length;w++){const k=y[w];if(d[k]!==s[k]&&!O3(_,k))return!0}}}else return(a||f)&&(!f||!f.$stable)?!0:s===d?!1:s?d?BD(s,d,_):!0:!!d;return!1}function BD(r,e,n){const s=Object.keys(e);if(s.length!==Object.keys(r).length)return!0;for(let a=0;a<s.length;a++){const u=s[a];if(e[u]!==r[u]&&!O3(n,u))return!0}return!1}function FM({vnode:r,parent:e},n){for(;e&&e.subTree===r;)(r=e.vnode).el=n,e=e.parent}const iB=r=>r.__isSuspense,Whe={name:"Suspense",__isSuspense:!0,process(r,e,n,s,a,u,d,f,g,_){r==null?Uhe(e,n,s,a,u,d,f,g,_):Ghe(r,e,n,s,a,d,f,g,_)},hydrate:Hhe,create:BM,normalize:Yhe},zhe=Whe;function Fy(r,e){const n=r.props&&r.props[e];zi(n)&&n()}function Uhe(r,e,n,s,a,u,d,f,g){const{p:_,o:{createElement:y}}=g,w=y("div"),k=r.suspense=BM(r,a,s,e,w,n,u,d,f,g);_(null,k.pendingBranch=r.ssContent,w,null,s,k,u,d),k.deps>0?(Fy(r,"onPending"),Fy(r,"onFallback"),_(null,r.ssFallback,e,n,s,null,u,d),hg(k,r.ssFallback)):k.resolve()}function Ghe(r,e,n,s,a,u,d,f,{p:g,um:_,o:{createElement:y}}){const w=e.suspense=r.suspense;w.vnode=e,e.el=r.el;const k=e.ssContent,S=e.ssFallback,{activeBranch:A,pendingBranch:P,isInFallback:R,isHydrating:O}=w;if(P)w.pendingBranch=k,mc(k,P)?(g(P,k,w.hiddenContainer,null,a,w,u,d,f),w.deps<=0?w.resolve():R&&(g(A,S,n,s,a,null,u,d,f),hg(w,S))):(w.pendingId++,O?(w.isHydrating=!1,w.activeBranch=P):_(P,a,w),w.deps=0,w.effects.length=0,w.hiddenContainer=y("div"),R?(g(null,k,w.hiddenContainer,null,a,w,u,d,f),w.deps<=0?w.resolve():(g(A,S,n,s,a,null,u,d,f),hg(w,S))):A&&mc(k,A)?(g(A,k,n,s,a,w,u,d,f),w.resolve(!0)):(g(null,k,w.hiddenContainer,null,a,w,u,d,f),w.deps<=0&&w.resolve()));else if(A&&mc(k,A))g(A,k,n,s,a,w,u,d,f),hg(w,k);else if(Fy(e,"onPending"),w.pendingBranch=k,w.pendingId++,g(null,k,w.hiddenContainer,null,a,w,u,d,f),w.deps<=0)w.resolve();else{const{timeout:B,pendingId:N}=w;B>0?setTimeout(()=>{w.pendingId===N&&w.fallback(S)},B):B===0&&w.fallback(S)}}function BM(r,e,n,s,a,u,d,f,g,_,y=!1){const{p:w,m:k,um:S,n:A,o:{parentNode:P,remove:R}}=_,O=r.props?PF(r.props.timeout):void 0,B={vnode:r,parent:e,parentComponent:n,isSVG:d,container:s,hiddenContainer:a,anchor:u,deps:0,pendingId:0,timeout:typeof O=="number"?O:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:y,isUnmounted:!1,effects:[],resolve(N=!1){const{vnode:V,activeBranch:U,pendingBranch:Y,pendingId:X,effects:$,parentComponent:ee,container:ue}=B;if(B.isHydrating)B.isHydrating=!1;else if(!N){const $e=U&&Y.transition&&Y.transition.mode==="out-in";$e&&(U.transition.afterLeave=()=>{X===B.pendingId&&k(Y,ue,Ue,0)});let{anchor:Ue}=B;U&&(Ue=A(U),S(U,ee,B,!0)),$e||k(Y,ue,Ue,0)}hg(B,Y),B.pendingBranch=null,B.isInFallback=!1;let Te=B.parent,De=!1;for(;Te;){if(Te.pendingBranch){Te.effects.push(...$),De=!0;break}Te=Te.parent}De||QF($),B.effects=[],Fy(V,"onResolve")},fallback(N){if(!B.pendingBranch)return;const{vnode:V,activeBranch:U,parentComponent:Y,container:X,isSVG:$}=B;Fy(V,"onFallback");const ee=A(U),ue=()=>{!B.isInFallback||(w(null,N,X,ee,Y,null,$,f,g),hg(B,N))},Te=N.transition&&N.transition.mode==="out-in";Te&&(U.transition.afterLeave=ue),B.isInFallback=!0,S(U,Y,null,!0),Te||ue()},move(N,V,U){B.activeBranch&&k(B.activeBranch,N,V,U),B.container=N},next(){return B.activeBranch&&A(B.activeBranch)},registerDep(N,V){const U=!!B.pendingBranch;U&&B.deps++;const Y=N.vnode.el;N.asyncDep.catch(X=>{p_(X,N,0)}).then(X=>{if(N.isUnmounted||B.isUnmounted||B.pendingId!==N.suspenseId)return;N.asyncResolved=!0;const{vnode:$}=N;QE(N,X,!1),Y&&($.el=Y);const ee=!Y&&N.subTree.el;V(N,$,P(Y||N.subTree.el),Y?null:A(N.subTree),B,d,g),ee&&R(ee),FM(N,$.el),U&&--B.deps===0&&B.resolve()})},unmount(N,V){B.isUnmounted=!0,B.activeBranch&&S(B.activeBranch,n,N,V),B.pendingBranch&&S(B.pendingBranch,n,N,V)}};return B}function Hhe(r,e,n,s,a,u,d,f,g){const _=e.suspense=BM(e,s,n,r.parentNode,document.createElement("div"),null,a,u,d,f,!0),y=g(r,_.pendingBranch=e.ssContent,n,_,u,d);return _.deps===0&&_.resolve(),y}function Yhe(r){const{shapeFlag:e,children:n}=r,s=e&32;r.ssContent=VD(s?n.default:n),r.ssFallback=s?VD(n.fallback):Bt(Sa)}function VD(r){let e;if(zi(r)){const n=_g&&r._c;n&&(r._d=!1,Ge()),r=r(),n&&(r._d=!0,e=Sl,xB())}return Ci(r)&&(r=Ohe(r)),r=dc(r),e&&!r.dynamicChildren&&(r.dynamicChildren=e.filter(n=>n!==r)),r}function jhe(r,e){e&&e.pendingBranch?Ci(r)?e.effects.push(...r):e.effects.push(r):QF(r)}function hg(r,e){r.activeBranch=e;const{vnode:n,parentComponent:s}=r,a=n.el=e.el;s&&s.subTree===n&&(s.vnode.el=a,FM(s,a))}function wa(r,e){if(Ms){let n=Ms.provides;const s=Ms.parent&&Ms.parent.provides;s===n&&(n=Ms.provides=Object.create(s)),n[r]=e}}function Dn(r,e,n=!1){const s=Ms||Co;if(s){const a=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(a&&r in a)return a[r];if(arguments.length>1)return n&&zi(e)?e.call(s.proxy):e}}function kh(r,e){return VM(r,null,e)}const Yx={};function Ni(r,e,n){return VM(r,e,n)}function VM(r,e,{immediate:n,deep:s,flush:a,onTrack:u,onTrigger:d}=es){const f=SM()===(Ms==null?void 0:Ms.scope)?Ms:null;let g,_=!1,y=!1;if(Lr(r)?(g=()=>r.value,_=l3(r)):cg(r)?(g=()=>r,s=!0):Ci(r)?(y=!0,_=r.some(N=>cg(N)||l3(N)),g=()=>r.map(N=>{if(Lr(N))return N.value;if(cg(N))return Tp(N);if(zi(N))return Fd(N,f,2)})):zi(r)?e?g=()=>Fd(r,f,2):g=()=>{if(!(f&&f.isUnmounted))return w&&w(),El(r,f,3,[k])}:g=vc,e&&s){const N=g;g=()=>Tp(N())}let w,k=N=>{w=O.onStop=()=>{Fd(N,f,4)}},S;if(By)if(k=vc,e?n&&El(e,f,3,[g(),y?[]:void 0,k]):g(),a==="sync"){const N=Fde();S=N.__watcherHandles||(N.__watcherHandles=[])}else return vc;let A=y?new Array(r.length).fill(Yx):Yx;const P=()=>{if(!!O.active)if(e){const N=O.run();(s||_||(y?N.some((V,U)=>Iy(V,A[U])):Iy(N,A)))&&(w&&w(),El(e,f,3,[N,A===Yx?void 0:y&&A[0]===Yx?[]:A,k]),A=N)}else O.run()};P.allowRecurse=!!e;let R;a==="sync"?R=P:a==="post"?R=()=>wo(P,f&&f.suspense):(P.pre=!0,f&&(P.id=f.uid),R=()=>OM(P));const O=new TM(g,R);e?n?P():A=O.run():a==="post"?wo(O.run.bind(O),f&&f.suspense):O.run();const B=()=>{O.stop(),f&&f.scope&&xM(f.scope.effects,O)};return S&&S.push(B),B}function $he(r,e,n){const s=this.proxy,a=ls(r)?r.includes(".")?rB(s,r):()=>s[r]:r.bind(s,s);let u;zi(e)?u=e:(u=e.handler,n=e);const d=Ms;jd(this);const f=VM(a,u.bind(s),n);return d?jd(d):Bd(),f}function rB(r,e){const n=e.split(".");return()=>{let s=r;for(let a=0;a<n.length&&s;a++)s=s[n[a]];return s}}function Tp(r,e){if(!ts(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),Lr(r))Tp(r.value,e);else if(Ci(r))for(let n=0;n<r.length;n++)Tp(r[n],e);else if(AF(r)||ag(r))r.forEach(n=>{Tp(n,e)});else if(RF(r))for(const n in r)Tp(r[n],e);return r}function qhe(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jd(()=>{r.isMounted=!0}),Ag(()=>{r.isUnmounting=!0}),r}const yl=[Function,Array],Xhe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:yl,onEnter:yl,onAfterEnter:yl,onEnterCancelled:yl,onBeforeLeave:yl,onLeave:yl,onAfterLeave:yl,onLeaveCancelled:yl,onBeforeAppear:yl,onAppear:yl,onAfterAppear:yl,onAppearCancelled:yl},setup(r,{slots:e}){const n=pu(),s=qhe();let a;return()=>{const u=e.default&&aB(e.default(),!0);if(!u||!u.length)return;let d=u[0];if(u.length>1){for(const P of u)if(P.type!==Sa){d=P;break}}const f=ur(r),{mode:g}=f;if(s.isLeaving)return TS(d);const _=WD(d);if(!_)return TS(d);const y=jE(_,f,s,n);u3(_,y);const w=n.subTree,k=w&&WD(w);let S=!1;const{getTransitionKey:A}=_.type;if(A){const P=A();a===void 0?a=P:P!==a&&(a=P,S=!0)}if(k&&k.type!==Sa&&(!mc(_,k)||S)){const P=jE(k,f,s,n);if(u3(k,P),g==="out-in")return s.isLeaving=!0,P.afterLeave=()=>{s.isLeaving=!1,n.update.active!==!1&&n.update()},TS(d);g==="in-out"&&_.type!==Sa&&(P.delayLeave=(R,O,B)=>{const N=oB(s,k);N[String(k.key)]=k,R._leaveCb=()=>{O(),R._leaveCb=void 0,delete y.delayedLeave},y.delayedLeave=B})}return d}}},sB=Xhe;function oB(r,e){const{leavingVNodes:n}=r;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function jE(r,e,n,s){const{appear:a,mode:u,persisted:d=!1,onBeforeEnter:f,onEnter:g,onAfterEnter:_,onEnterCancelled:y,onBeforeLeave:w,onLeave:k,onAfterLeave:S,onLeaveCancelled:A,onBeforeAppear:P,onAppear:R,onAfterAppear:O,onAppearCancelled:B}=e,N=String(r.key),V=oB(n,r),U=($,ee)=>{$&&El($,s,9,ee)},Y=($,ee)=>{const ue=ee[1];U($,ee),Ci($)?$.every(Te=>Te.length<=1)&&ue():$.length<=1&&ue()},X={mode:u,persisted:d,beforeEnter($){let ee=f;if(!n.isMounted)if(a)ee=P||f;else return;$._leaveCb&&$._leaveCb(!0);const ue=V[N];ue&&mc(r,ue)&&ue.el._leaveCb&&ue.el._leaveCb(),U(ee,[$])},enter($){let ee=g,ue=_,Te=y;if(!n.isMounted)if(a)ee=R||g,ue=O||_,Te=B||y;else return;let De=!1;const $e=$._enterCb=Ue=>{De||(De=!0,Ue?U(Te,[$]):U(ue,[$]),X.delayedLeave&&X.delayedLeave(),$._enterCb=void 0)};ee?Y(ee,[$,$e]):$e()},leave($,ee){const ue=String(r.key);if($._enterCb&&$._enterCb(!0),n.isUnmounting)return ee();U(w,[$]);let Te=!1;const De=$._leaveCb=$e=>{Te||(Te=!0,ee(),$e?U(A,[$]):U(S,[$]),$._leaveCb=void 0,V[ue]===r&&delete V[ue])};V[ue]=r,k?Y(k,[$,De]):De()},clone($){return jE($,e,n,s)}};return X}function TS(r){if(B3(r))return r=Eh(r),r.children=null,r}function WD(r){return B3(r)?r.children?r.children[0]:void 0:r}function u3(r,e){r.shapeFlag&6&&r.component?u3(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function aB(r,e=!1,n){let s=[],a=0;for(let u=0;u<r.length;u++){let d=r[u];const f=n==null?d.key:String(n)+String(d.key!=null?d.key:u);d.type===ai?(d.patchFlag&128&&a++,s=s.concat(aB(d.children,e,f))):(e||d.type!==Sa)&&s.push(f!=null?Eh(d,{key:f}):d)}if(a>1)for(let u=0;u<s.length;u++)s[u].patchFlag=-2;return s}function yi(r){return zi(r)?{setup:r,name:r.name}:r}const dg=r=>!!r.type.__asyncLoader,B3=r=>r.type.__isKeepAlive,Zhe={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(r,{slots:e}){const n=pu(),s=n.ctx;if(!s.renderer)return()=>{const B=e.default&&e.default();return B&&B.length===1?B[0]:B};const a=new Map,u=new Set;let d=null;const f=n.suspense,{renderer:{p:g,m:_,um:y,o:{createElement:w}}}=s,k=w("div");s.activate=(B,N,V,U,Y)=>{const X=B.component;_(B,N,V,0,f),g(X.vnode,B,N,V,X,f,U,B.slotScopeIds,Y),wo(()=>{X.isDeactivated=!1,X.a&&lg(X.a);const $=B.props&&B.props.onVnodeMounted;$&&xl($,X.parent,B)},f)},s.deactivate=B=>{const N=B.component;_(B,k,null,1,f),wo(()=>{N.da&&lg(N.da);const V=B.props&&B.props.onVnodeUnmounted;V&&xl(V,N.parent,B),N.isDeactivated=!0},f)};function S(B){MS(B),y(B,n,f,!0)}function A(B){a.forEach((N,V)=>{const U=eT(N.type);U&&(!B||!B(U))&&P(V)})}function P(B){const N=a.get(B);!d||!mc(N,d)?S(N):d&&MS(d),a.delete(B),u.delete(B)}Ni(()=>[r.include,r.exclude],([B,N])=>{B&&A(V=>hy(B,V)),N&&A(V=>!hy(N,V))},{flush:"post",deep:!0});let R=null;const O=()=>{R!=null&&a.set(R,AS(n.subTree))};return Jd(O),WM(O),Ag(()=>{a.forEach(B=>{const{subTree:N,suspense:V}=n,U=AS(N);if(B.type===U.type&&B.key===U.key){MS(U);const Y=U.component.da;Y&&wo(Y,V);return}S(B)})}),()=>{if(R=null,!e.default)return null;const B=e.default(),N=B[0];if(B.length>1)return d=null,B;if(!Yd(N)||!(N.shapeFlag&4)&&!(N.shapeFlag&128))return d=null,N;let V=AS(N);const U=V.type,Y=eT(dg(V)?V.type.__asyncResolved||{}:U),{include:X,exclude:$,max:ee}=r;if(X&&(!Y||!hy(X,Y))||$&&Y&&hy($,Y))return d=V,N;const ue=V.key==null?U:V.key,Te=a.get(ue);return V.el&&(V=Eh(V),N.shapeFlag&128&&(N.ssContent=V)),R=ue,Te?(V.el=Te.el,V.component=Te.component,V.transition&&u3(V,V.transition),V.shapeFlag|=512,u.delete(ue),u.add(ue)):(u.add(ue),ee&&u.size>parseInt(ee,10)&&P(u.values().next().value)),V.shapeFlag|=256,d=V,iB(N.type)?N:V}}},lB=Zhe;function hy(r,e){return Ci(r)?r.some(n=>hy(n,e)):ls(r)?r.split(",").includes(e):Gue(r)?r.test(e):!1}function Khe(r,e){cB(r,"a",e)}function Jhe(r,e){cB(r,"da",e)}function cB(r,e,n=Ms){const s=r.__wdc||(r.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return r()});if(V3(e,s,n),n){let a=n.parent;for(;a&&a.parent;)B3(a.parent.vnode)&&Qhe(s,e,n,a),a=a.parent}}function Qhe(r,e,n,s){const a=V3(e,r,s,!0);W3(()=>{xM(s[e],a)},n)}function MS(r){r.shapeFlag&=-257,r.shapeFlag&=-513}function AS(r){return r.shapeFlag&128?r.ssContent:r}function V3(r,e,n=Ms,s=!1){if(n){const a=n[r]||(n[r]=[]),u=e.__weh||(e.__weh=(...d)=>{if(n.isUnmounted)return;Tg(),jd(n);const f=El(e,n,r,d);return Bd(),Mg(),f});return s?a.unshift(u):a.push(u),u}}const Mh=r=>(e,n=Ms)=>(!By||r==="sp")&&V3(r,(...s)=>e(...s),n),ede=Mh("bm"),Jd=Mh("m"),tde=Mh("bu"),WM=Mh("u"),Ag=Mh("bum"),W3=Mh("um"),nde=Mh("sp"),ide=Mh("rtg"),rde=Mh("rtc");function sde(r,e=Ms){V3("ec",r,e)}function cr(r,e){const n=Co;if(n===null)return r;const s=H3(n)||n.proxy,a=r.dirs||(r.dirs=[]);for(let u=0;u<e.length;u++){let[d,f,g,_=es]=e[u];d&&(zi(d)&&(d={mounted:d,updated:d}),d.deep&&Tp(f),a.push({dir:d,instance:s,value:f,oldValue:void 0,arg:g,modifiers:_}))}return r}function tp(r,e,n,s){const a=r.dirs,u=e&&e.dirs;for(let d=0;d<a.length;d++){const f=a[d];u&&(f.oldValue=u[d].value);let g=f.dir[s];g&&(Tg(),El(g,n,8,[r.el,f,r,e]),Mg())}}const zM="components",ode="directives";function Ch(r,e){return UM(zM,r,!0,e)||r}const uB=Symbol();function hB(r){return ls(r)?UM(zM,r,!1)||r:r||uB}function Sh(r){return UM(ode,r)}function UM(r,e,n=!0,s=!1){const a=Co||Ms;if(a){const u=a.type;if(r===zM){const f=eT(u,!1);if(f&&(f===e||f===uu(e)||f===I3(uu(e))))return u}const d=zD(a[r]||u[r],e)||zD(a.appContext[r],e);return!d&&s?u:d}}function zD(r,e){return r&&(r[e]||r[uu(e)]||r[I3(uu(e))])}function Xp(r,e,n,s){let a;const u=n&&n[s];if(Ci(r)||ls(r)){a=new Array(r.length);for(let d=0,f=r.length;d<f;d++)a[d]=e(r[d],d,void 0,u&&u[d])}else if(typeof r=="number"){a=new Array(r);for(let d=0;d<r;d++)a[d]=e(d+1,d,void 0,u&&u[d])}else if(ts(r))if(r[Symbol.iterator])a=Array.from(r,(d,f)=>e(d,f,void 0,u&&u[f]));else{const d=Object.keys(r);a=new Array(d.length);for(let f=0,g=d.length;f<g;f++){const _=d[f];a[f]=e(r[_],_,f,u&&u[f])}}else a=[];return n&&(n[s]=a),a}function yr(r,e,n={},s,a){if(Co.isCE||Co.parent&&dg(Co.parent)&&Co.parent.isCE)return e!=="default"&&(n.name=e),Bt("slot",n,s&&s());let u=r[e];u&&u._c&&(u._d=!1),Ge();const d=u&&dB(u(n)),f=Jn(ai,{key:n.key||d&&d.key||`_${e}`},d||(s?s():[]),d&&r._===1?64:-2);return!a&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),u&&u._c&&(u._d=!0),f}function dB(r){return r.some(e=>Yd(e)?!(e.type===Sa||e.type===ai&&!dB(e.children)):!0)?r:null}const $E=r=>r?CB(r)?H3(r)||r.proxy:$E(r.parent):null,my=Eo(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>$E(r.parent),$root:r=>$E(r.root),$emit:r=>r.emit,$options:r=>GM(r),$forceUpdate:r=>r.f||(r.f=()=>OM(r.update)),$nextTick:r=>r.n||(r.n=ko.bind(r.proxy)),$watch:r=>$he.bind(r)}),LS=(r,e)=>r!==es&&!r.__isScriptSetup&&dr(r,e),ade={get({_:r},e){const{ctx:n,setupState:s,data:a,props:u,accessCache:d,type:f,appContext:g}=r;let _;if(e[0]!=="$"){const S=d[e];if(S!==void 0)switch(S){case 1:return s[e];case 2:return a[e];case 4:return n[e];case 3:return u[e]}else{if(LS(s,e))return d[e]=1,s[e];if(a!==es&&dr(a,e))return d[e]=2,a[e];if((_=r.propsOptions[0])&&dr(_,e))return d[e]=3,u[e];if(n!==es&&dr(n,e))return d[e]=4,n[e];qE&&(d[e]=0)}}const y=my[e];let w,k;if(y)return e==="$attrs"&&Ta(r,"get",e),y(r);if((w=f.__cssModules)&&(w=w[e]))return w;if(n!==es&&dr(n,e))return d[e]=4,n[e];if(k=g.config.globalProperties,dr(k,e))return k[e]},set({_:r},e,n){const{data:s,setupState:a,ctx:u}=r;return LS(a,e)?(a[e]=n,!0):s!==es&&dr(s,e)?(s[e]=n,!0):dr(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(u[e]=n,!0)},has({_:{data:r,setupState:e,accessCache:n,ctx:s,appContext:a,propsOptions:u}},d){let f;return!!n[d]||r!==es&&dr(r,d)||LS(e,d)||(f=u[0])&&dr(f,d)||dr(s,d)||dr(my,d)||dr(a.config.globalProperties,d)},defineProperty(r,e,n){return n.get!=null?r._.accessCache[e]=0:dr(n,"value")&&this.set(r,e,n.value,null),Reflect.defineProperty(r,e,n)}};let qE=!0;function lde(r){const e=GM(r),n=r.proxy,s=r.ctx;qE=!1,e.beforeCreate&&UD(e.beforeCreate,r,"bc");const{data:a,computed:u,methods:d,watch:f,provide:g,inject:_,created:y,beforeMount:w,mounted:k,beforeUpdate:S,updated:A,activated:P,deactivated:R,beforeDestroy:O,beforeUnmount:B,destroyed:N,unmounted:V,render:U,renderTracked:Y,renderTriggered:X,errorCaptured:$,serverPrefetch:ee,expose:ue,inheritAttrs:Te,components:De,directives:$e,filters:Ue}=e;if(_&&cde(_,s,null,r.appContext.config.unwrapInjectedRef),d)for(const St in d){const ve=d[St];zi(ve)&&(s[St]=ve.bind(n))}if(a){const St=a.call(n,n);ts(St)&&(r.data=Yr(St))}if(qE=!0,u)for(const St in u){const ve=u[St],ne=zi(ve)?ve.bind(n,n):zi(ve.get)?ve.get.bind(n,n):vc,me=!zi(ve)&&zi(ve.set)?ve.set.bind(n):vc,qe=Ht({get:ne,set:me});Object.defineProperty(s,St,{enumerable:!0,configurable:!0,get:()=>qe.value,set:Se=>qe.value=Se})}if(f)for(const St in f)fB(f[St],s,n,St);if(g){const St=zi(g)?g.call(n):g;Reflect.ownKeys(St).forEach(ve=>{wa(ve,St[ve])})}y&&UD(y,r,"c");function tt(St,ve){Ci(ve)?ve.forEach(ne=>St(ne.bind(n))):ve&&St(ve.bind(n))}if(tt(ede,w),tt(Jd,k),tt(tde,S),tt(WM,A),tt(Khe,P),tt(Jhe,R),tt(sde,$),tt(rde,Y),tt(ide,X),tt(Ag,B),tt(W3,V),tt(nde,ee),Ci(ue))if(ue.length){const St=r.exposed||(r.exposed={});ue.forEach(ve=>{Object.defineProperty(St,ve,{get:()=>n[ve],set:ne=>n[ve]=ne})})}else r.exposed||(r.exposed={});U&&r.render===vc&&(r.render=U),Te!=null&&(r.inheritAttrs=Te),De&&(r.components=De),$e&&(r.directives=$e)}function cde(r,e,n=vc,s=!1){Ci(r)&&(r=XE(r));for(const a in r){const u=r[a];let d;ts(u)?"default"in u?d=Dn(u.from||a,u.default,!0):d=Dn(u.from||a):d=Dn(u),Lr(d)&&s?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>d.value,set:f=>d.value=f}):e[a]=d}}function UD(r,e,n){El(Ci(r)?r.map(s=>s.bind(e.proxy)):r.bind(e.proxy),e,n)}function fB(r,e,n,s){const a=s.includes(".")?rB(n,s):()=>n[s];if(ls(r)){const u=e[r];zi(u)&&Ni(a,u)}else if(zi(r))Ni(a,r.bind(n));else if(ts(r))if(Ci(r))r.forEach(u=>fB(u,e,n,s));else{const u=zi(r.handler)?r.handler.bind(n):e[r.handler];zi(u)&&Ni(a,u,r)}}function GM(r){const e=r.type,{mixins:n,extends:s}=e,{mixins:a,optionsCache:u,config:{optionMergeStrategies:d}}=r.appContext,f=u.get(e);let g;return f?g=f:!a.length&&!n&&!s?g=e:(g={},a.length&&a.forEach(_=>h3(g,_,d,!0)),h3(g,e,d)),ts(e)&&u.set(e,g),g}function h3(r,e,n,s=!1){const{mixins:a,extends:u}=e;u&&h3(r,u,n,!0),a&&a.forEach(d=>h3(r,d,n,!0));for(const d in e)if(!(s&&d==="expose")){const f=ude[d]||n&&n[d];r[d]=f?f(r[d],e[d]):e[d]}return r}const ude={data:GD,props:gp,emits:gp,methods:gp,computed:gp,beforeCreate:ra,created:ra,beforeMount:ra,mounted:ra,beforeUpdate:ra,updated:ra,beforeDestroy:ra,beforeUnmount:ra,destroyed:ra,unmounted:ra,activated:ra,deactivated:ra,errorCaptured:ra,serverPrefetch:ra,components:gp,directives:gp,watch:dde,provide:GD,inject:hde};function GD(r,e){return e?r?function(){return Eo(zi(r)?r.call(this,this):r,zi(e)?e.call(this,this):e)}:e:r}function hde(r,e){return gp(XE(r),XE(e))}function XE(r){if(Ci(r)){const e={};for(let n=0;n<r.length;n++)e[r[n]]=r[n];return e}return r}function ra(r,e){return r?[...new Set([].concat(r,e))]:e}function gp(r,e){return r?Eo(Eo(Object.create(null),r),e):e}function dde(r,e){if(!r)return e;if(!e)return r;const n=Eo(Object.create(null),r);for(const s in e)n[s]=ra(r[s],e[s]);return n}function fde(r,e,n,s=!1){const a={},u={};o3(u,U3,1),r.propsDefaults=Object.create(null),pB(r,e,a,u);for(const d in r.propsOptions[0])d in a||(a[d]=void 0);n?r.props=s?a:khe(a):r.type.props?r.props=a:r.props=u,r.attrs=u}function pde(r,e,n,s){const{props:a,attrs:u,vnode:{patchFlag:d}}=r,f=ur(a),[g]=r.propsOptions;let _=!1;if((s||d>0)&&!(d&16)){if(d&8){const y=r.vnode.dynamicProps;for(let w=0;w<y.length;w++){let k=y[w];if(O3(r.emitsOptions,k))continue;const S=e[k];if(g)if(dr(u,k))S!==u[k]&&(u[k]=S,_=!0);else{const A=uu(k);a[A]=ZE(g,f,A,S,r,!1)}else S!==u[k]&&(u[k]=S,_=!0)}}}else{pB(r,e,a,u)&&(_=!0);let y;for(const w in f)(!e||!dr(e,w)&&((y=qp(w))===w||!dr(e,y)))&&(g?n&&(n[w]!==void 0||n[y]!==void 0)&&(a[w]=ZE(g,f,w,void 0,r,!0)):delete a[w]);if(u!==f)for(const w in u)(!e||!dr(e,w)&&!0)&&(delete u[w],_=!0)}_&&wh(r,"set","$attrs")}function pB(r,e,n,s){const[a,u]=r.propsOptions;let d=!1,f;if(e)for(let g in e){if(Uw(g))continue;const _=e[g];let y;a&&dr(a,y=uu(g))?!u||!u.includes(y)?n[y]=_:(f||(f={}))[y]=_:O3(r.emitsOptions,g)||(!(g in s)||_!==s[g])&&(s[g]=_,d=!0)}if(u){const g=ur(n),_=f||es;for(let y=0;y<u.length;y++){const w=u[y];n[w]=ZE(a,g,w,_[w],r,!dr(_,w))}}return d}function ZE(r,e,n,s,a,u){const d=r[n];if(d!=null){const f=dr(d,"default");if(f&&s===void 0){const g=d.default;if(d.type!==Function&&zi(g)){const{propsDefaults:_}=a;n in _?s=_[n]:(jd(a),s=_[n]=g.call(null,e),Bd())}else s=g}d[0]&&(u&&!f?s=!1:d[1]&&(s===""||s===qp(n))&&(s=!0))}return s}function mB(r,e,n=!1){const s=e.propsCache,a=s.get(r);if(a)return a;const u=r.props,d={},f=[];let g=!1;if(!zi(r)){const y=w=>{g=!0;const[k,S]=mB(w,e,!0);Eo(d,k),S&&f.push(...S)};!n&&e.mixins.length&&e.mixins.forEach(y),r.extends&&y(r.extends),r.mixins&&r.mixins.forEach(y)}if(!u&&!g)return ts(r)&&s.set(r,og),og;if(Ci(u))for(let y=0;y<u.length;y++){const w=uu(u[y]);HD(w)&&(d[w]=es)}else if(u)for(const y in u){const w=uu(y);if(HD(w)){const k=u[y],S=d[w]=Ci(k)||zi(k)?{type:k}:Object.assign({},k);if(S){const A=$D(Boolean,S.type),P=$D(String,S.type);S[0]=A>-1,S[1]=P<0||A<P,(A>-1||dr(S,"default"))&&f.push(w)}}}const _=[d,f];return ts(r)&&s.set(r,_),_}function HD(r){return r[0]!=="$"}function YD(r){const e=r&&r.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:r===null?"null":""}function jD(r,e){return YD(r)===YD(e)}function $D(r,e){return Ci(e)?e.findIndex(n=>jD(n,r)):zi(e)&&jD(e,r)?0:-1}const gB=r=>r[0]==="_"||r==="$stable",HM=r=>Ci(r)?r.map(dc):[dc(r)],mde=(r,e,n)=>{if(e._n)return e;const s=Xn((...a)=>HM(e(...a)),n);return s._c=!1,s},vB=(r,e,n)=>{const s=r._ctx;for(const a in r){if(gB(a))continue;const u=r[a];if(zi(u))e[a]=mde(a,u,s);else if(u!=null){const d=HM(u);e[a]=()=>d}}},yB=(r,e)=>{const n=HM(e);r.slots.default=()=>n},gde=(r,e)=>{if(r.vnode.shapeFlag&32){const n=e._;n?(r.slots=ur(e),o3(e,"_",n)):vB(e,r.slots={})}else r.slots={},e&&yB(r,e);o3(r.slots,U3,1)},vde=(r,e,n)=>{const{vnode:s,slots:a}=r;let u=!0,d=es;if(s.shapeFlag&32){const f=e._;f?n&&f===1?u=!1:(Eo(a,e),!n&&f===1&&delete a._):(u=!e.$stable,vB(e,a)),d=e}else e&&(yB(r,e),d={default:1});if(u)for(const f in a)!gB(f)&&!(f in d)&&delete a[f]};function _B(){return{app:null,config:{isNativeTag:Wue,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yde=0;function _de(r,e){return function(s,a=null){zi(s)||(s=Object.assign({},s)),a!=null&&!ts(a)&&(a=null);const u=_B(),d=new Set;let f=!1;const g=u.app={_uid:yde++,_component:s,_props:a,_container:null,_context:u,_instance:null,version:Bde,get config(){return u.config},set config(_){},use(_,...y){return d.has(_)||(_&&zi(_.install)?(d.add(_),_.install(g,...y)):zi(_)&&(d.add(_),_(g,...y))),g},mixin(_){return u.mixins.includes(_)||u.mixins.push(_),g},component(_,y){return y?(u.components[_]=y,g):u.components[_]},directive(_,y){return y?(u.directives[_]=y,g):u.directives[_]},mount(_,y,w){if(!f){const k=Bt(s,a);return k.appContext=u,y&&e?e(k,_):r(k,_,w),f=!0,g._container=_,_.__vue_app__=g,H3(k.component)||k.component.proxy}},unmount(){f&&(r(null,g._container),delete g._container.__vue_app__)},provide(_,y){return u.provides[_]=y,g}};return g}}function KE(r,e,n,s,a=!1){if(Ci(r)){r.forEach((k,S)=>KE(k,e&&(Ci(e)?e[S]:e),n,s,a));return}if(dg(s)&&!a)return;const u=s.shapeFlag&4?H3(s.component)||s.component.proxy:s.el,d=a?null:u,{i:f,r:g}=r,_=e&&e.r,y=f.refs===es?f.refs={}:f.refs,w=f.setupState;if(_!=null&&_!==g&&(ls(_)?(y[_]=null,dr(w,_)&&(w[_]=null)):Lr(_)&&(_.value=null)),zi(g))Fd(g,f,12,[d,y]);else{const k=ls(g),S=Lr(g);if(k||S){const A=()=>{if(r.f){const P=k?dr(w,g)?w[g]:y[g]:g.value;a?Ci(P)&&xM(P,u):Ci(P)?P.includes(u)||P.push(u):k?(y[g]=[u],dr(w,g)&&(w[g]=y[g])):(g.value=[u],r.k&&(y[r.k]=g.value))}else k?(y[g]=d,dr(w,g)&&(w[g]=d)):S&&(g.value=d,r.k&&(y[r.k]=d))};d?(A.id=-1,wo(A,n)):A()}}}const wo=jhe;function bde(r){return xde(r)}function xde(r,e){const n=$ue();n.__VUE__=!0;const{insert:s,remove:a,patchProp:u,createElement:d,createText:f,createComment:g,setText:_,setElementText:y,parentNode:w,nextSibling:k,setScopeId:S=vc,insertStaticContent:A}=r,P=(oe,ye,We,at=null,st=null,It=null,At=!1,Tt=null,Ut=!!ye.dynamicChildren)=>{if(oe===ye)return;oe&&!mc(oe,ye)&&(at=pt(oe),Se(oe,st,It,!0),oe=null),ye.patchFlag===-2&&(Ut=!1,ye.dynamicChildren=null);const{type:Wt,ref:we,shapeFlag:fe}=ye;switch(Wt){case z3:R(oe,ye,We,at);break;case Sa:O(oe,ye,We,at);break;case Gw:oe==null&&B(ye,We,at,At);break;case ai:De(oe,ye,We,at,st,It,At,Tt,Ut);break;default:fe&1?U(oe,ye,We,at,st,It,At,Tt,Ut):fe&6?$e(oe,ye,We,at,st,It,At,Tt,Ut):(fe&64||fe&128)&&Wt.process(oe,ye,We,at,st,It,At,Tt,Ut,Vt)}we!=null&&st&&KE(we,oe&&oe.ref,It,ye||oe,!ye)},R=(oe,ye,We,at)=>{if(oe==null)s(ye.el=f(ye.children),We,at);else{const st=ye.el=oe.el;ye.children!==oe.children&&_(st,ye.children)}},O=(oe,ye,We,at)=>{oe==null?s(ye.el=g(ye.children||""),We,at):ye.el=oe.el},B=(oe,ye,We,at)=>{[oe.el,oe.anchor]=A(oe.children,ye,We,at,oe.el,oe.anchor)},N=({el:oe,anchor:ye},We,at)=>{let st;for(;oe&&oe!==ye;)st=k(oe),s(oe,We,at),oe=st;s(ye,We,at)},V=({el:oe,anchor:ye})=>{let We;for(;oe&&oe!==ye;)We=k(oe),a(oe),oe=We;a(ye)},U=(oe,ye,We,at,st,It,At,Tt,Ut)=>{At=At||ye.type==="svg",oe==null?Y(ye,We,at,st,It,At,Tt,Ut):ee(oe,ye,st,It,At,Tt,Ut)},Y=(oe,ye,We,at,st,It,At,Tt)=>{let Ut,Wt;const{type:we,props:fe,shapeFlag:lt,transition:Nt,dirs:Gt}=oe;if(Ut=oe.el=d(oe.type,It,fe&&fe.is,fe),lt&8?y(Ut,oe.children):lt&16&&$(oe.children,Ut,null,at,st,It&&we!=="foreignObject",At,Tt),Gt&&tp(oe,null,at,"created"),X(Ut,oe,oe.scopeId,At,at),fe){for(const wn in fe)wn!=="value"&&!Uw(wn)&&u(Ut,wn,null,fe[wn],It,oe.children,at,st,Fe);"value"in fe&&u(Ut,"value",null,fe.value),(Wt=fe.onVnodeBeforeMount)&&xl(Wt,at,oe)}Gt&&tp(oe,null,at,"beforeMount");const fn=(!st||st&&!st.pendingBranch)&&Nt&&!Nt.persisted;fn&&Nt.beforeEnter(Ut),s(Ut,ye,We),((Wt=fe&&fe.onVnodeMounted)||fn||Gt)&&wo(()=>{Wt&&xl(Wt,at,oe),fn&&Nt.enter(Ut),Gt&&tp(oe,null,at,"mounted")},st)},X=(oe,ye,We,at,st)=>{if(We&&S(oe,We),at)for(let It=0;It<at.length;It++)S(oe,at[It]);if(st){let It=st.subTree;if(ye===It){const At=st.vnode;X(oe,At,At.scopeId,At.slotScopeIds,st.parent)}}},$=(oe,ye,We,at,st,It,At,Tt,Ut=0)=>{for(let Wt=Ut;Wt<oe.length;Wt++){const we=oe[Wt]=Tt?Ld(oe[Wt]):dc(oe[Wt]);P(null,we,ye,We,at,st,It,At,Tt)}},ee=(oe,ye,We,at,st,It,At)=>{const Tt=ye.el=oe.el;let{patchFlag:Ut,dynamicChildren:Wt,dirs:we}=ye;Ut|=oe.patchFlag&16;const fe=oe.props||es,lt=ye.props||es;let Nt;We&&np(We,!1),(Nt=lt.onVnodeBeforeUpdate)&&xl(Nt,We,ye,oe),we&&tp(ye,oe,We,"beforeUpdate"),We&&np(We,!0);const Gt=st&&ye.type!=="foreignObject";if(Wt?ue(oe.dynamicChildren,Wt,Tt,We,at,Gt,It):At||ve(oe,ye,Tt,null,We,at,Gt,It,!1),Ut>0){if(Ut&16)Te(Tt,ye,fe,lt,We,at,st);else if(Ut&2&&fe.class!==lt.class&&u(Tt,"class",null,lt.class,st),Ut&4&&u(Tt,"style",fe.style,lt.style,st),Ut&8){const fn=ye.dynamicProps;for(let wn=0;wn<fn.length;wn++){const vn=fn[wn],Xe=fe[vn],nn=lt[vn];(nn!==Xe||vn==="value")&&u(Tt,vn,Xe,nn,st,oe.children,We,at,Fe)}}Ut&1&&oe.children!==ye.children&&y(Tt,ye.children)}else!At&&Wt==null&&Te(Tt,ye,fe,lt,We,at,st);((Nt=lt.onVnodeUpdated)||we)&&wo(()=>{Nt&&xl(Nt,We,ye,oe),we&&tp(ye,oe,We,"updated")},at)},ue=(oe,ye,We,at,st,It,At)=>{for(let Tt=0;Tt<ye.length;Tt++){const Ut=oe[Tt],Wt=ye[Tt],we=Ut.el&&(Ut.type===ai||!mc(Ut,Wt)||Ut.shapeFlag&70)?w(Ut.el):We;P(Ut,Wt,we,null,at,st,It,At,!0)}},Te=(oe,ye,We,at,st,It,At)=>{if(We!==at){if(We!==es)for(const Tt in We)!Uw(Tt)&&!(Tt in at)&&u(oe,Tt,We[Tt],null,At,ye.children,st,It,Fe);for(const Tt in at){if(Uw(Tt))continue;const Ut=at[Tt],Wt=We[Tt];Ut!==Wt&&Tt!=="value"&&u(oe,Tt,Wt,Ut,At,ye.children,st,It,Fe)}"value"in at&&u(oe,"value",We.value,at.value)}},De=(oe,ye,We,at,st,It,At,Tt,Ut)=>{const Wt=ye.el=oe?oe.el:f(""),we=ye.anchor=oe?oe.anchor:f("");let{patchFlag:fe,dynamicChildren:lt,slotScopeIds:Nt}=ye;Nt&&(Tt=Tt?Tt.concat(Nt):Nt),oe==null?(s(Wt,We,at),s(we,We,at),$(ye.children,We,we,st,It,At,Tt,Ut)):fe>0&&fe&64&&lt&&oe.dynamicChildren?(ue(oe.dynamicChildren,lt,We,st,It,At,Tt),(ye.key!=null||st&&ye===st.subTree)&&YM(oe,ye,!0)):ve(oe,ye,We,we,st,It,At,Tt,Ut)},$e=(oe,ye,We,at,st,It,At,Tt,Ut)=>{ye.slotScopeIds=Tt,oe==null?ye.shapeFlag&512?st.ctx.activate(ye,We,at,At,Ut):Ue(ye,We,at,st,It,At,Ut):it(oe,ye,Ut)},Ue=(oe,ye,We,at,st,It,At)=>{const Tt=oe.component=Lde(oe,at,st);if(B3(oe)&&(Tt.ctx.renderer=Vt),Rde(Tt),Tt.asyncDep){if(st&&st.registerDep(Tt,tt),!oe.el){const Ut=Tt.subTree=Bt(Sa);O(null,Ut,ye,We)}return}tt(Tt,oe,ye,We,st,It,At)},it=(oe,ye,We)=>{const at=ye.component=oe.component;if(Vhe(oe,ye,We))if(at.asyncDep&&!at.asyncResolved){St(at,ye,We);return}else at.next=ye,Ihe(at.update),at.update();else ye.el=oe.el,at.vnode=ye},tt=(oe,ye,We,at,st,It,At)=>{const Tt=()=>{if(oe.isMounted){let{next:we,bu:fe,u:lt,parent:Nt,vnode:Gt}=oe,fn=we,wn;np(oe,!1),we?(we.el=Gt.el,St(oe,we,At)):we=Gt,fe&&lg(fe),(wn=we.props&&we.props.onVnodeBeforeUpdate)&&xl(wn,Nt,we,Gt),np(oe,!0);const vn=ES(oe),Xe=oe.subTree;oe.subTree=vn,P(Xe,vn,w(Xe.el),pt(Xe),oe,st,It),we.el=vn.el,fn===null&&FM(oe,vn.el),lt&&wo(lt,st),(wn=we.props&&we.props.onVnodeUpdated)&&wo(()=>xl(wn,Nt,we,Gt),st)}else{let we;const{el:fe,props:lt}=ye,{bm:Nt,m:Gt,parent:fn}=oe,wn=dg(ye);if(np(oe,!1),Nt&&lg(Nt),!wn&&(we=lt&&lt.onVnodeBeforeMount)&&xl(we,fn,ye),np(oe,!0),fe&&Ot){const vn=()=>{oe.subTree=ES(oe),Ot(fe,oe.subTree,oe,st,null)};wn?ye.type.__asyncLoader().then(()=>!oe.isUnmounted&&vn()):vn()}else{const vn=oe.subTree=ES(oe);P(null,vn,We,at,oe,st,It),ye.el=vn.el}if(Gt&&wo(Gt,st),!wn&&(we=lt&&lt.onVnodeMounted)){const vn=ye;wo(()=>xl(we,fn,vn),st)}(ye.shapeFlag&256||fn&&dg(fn.vnode)&&fn.vnode.shapeFlag&256)&&oe.a&&wo(oe.a,st),oe.isMounted=!0,ye=We=at=null}},Ut=oe.effect=new TM(Tt,()=>OM(Wt),oe.scope),Wt=oe.update=()=>Ut.run();Wt.id=oe.uid,np(oe,!0),Wt()},St=(oe,ye,We)=>{ye.component=oe;const at=oe.vnode.props;oe.vnode=ye,oe.next=null,pde(oe,ye.props,at,We),vde(oe,ye.children,We),Tg(),FD(),Mg()},ve=(oe,ye,We,at,st,It,At,Tt,Ut=!1)=>{const Wt=oe&&oe.children,we=oe?oe.shapeFlag:0,fe=ye.children,{patchFlag:lt,shapeFlag:Nt}=ye;if(lt>0){if(lt&128){me(Wt,fe,We,at,st,It,At,Tt,Ut);return}else if(lt&256){ne(Wt,fe,We,at,st,It,At,Tt,Ut);return}}Nt&8?(we&16&&Fe(Wt,st,It),fe!==Wt&&y(We,fe)):we&16?Nt&16?me(Wt,fe,We,at,st,It,At,Tt,Ut):Fe(Wt,st,It,!0):(we&8&&y(We,""),Nt&16&&$(fe,We,at,st,It,At,Tt,Ut))},ne=(oe,ye,We,at,st,It,At,Tt,Ut)=>{oe=oe||og,ye=ye||og;const Wt=oe.length,we=ye.length,fe=Math.min(Wt,we);let lt;for(lt=0;lt<fe;lt++){const Nt=ye[lt]=Ut?Ld(ye[lt]):dc(ye[lt]);P(oe[lt],Nt,We,null,st,It,At,Tt,Ut)}Wt>we?Fe(oe,st,It,!0,!1,fe):$(ye,We,at,st,It,At,Tt,Ut,fe)},me=(oe,ye,We,at,st,It,At,Tt,Ut)=>{let Wt=0;const we=ye.length;let fe=oe.length-1,lt=we-1;for(;Wt<=fe&&Wt<=lt;){const Nt=oe[Wt],Gt=ye[Wt]=Ut?Ld(ye[Wt]):dc(ye[Wt]);if(mc(Nt,Gt))P(Nt,Gt,We,null,st,It,At,Tt,Ut);else break;Wt++}for(;Wt<=fe&&Wt<=lt;){const Nt=oe[fe],Gt=ye[lt]=Ut?Ld(ye[lt]):dc(ye[lt]);if(mc(Nt,Gt))P(Nt,Gt,We,null,st,It,At,Tt,Ut);else break;fe--,lt--}if(Wt>fe){if(Wt<=lt){const Nt=lt+1,Gt=Nt<we?ye[Nt].el:at;for(;Wt<=lt;)P(null,ye[Wt]=Ut?Ld(ye[Wt]):dc(ye[Wt]),We,Gt,st,It,At,Tt,Ut),Wt++}}else if(Wt>lt)for(;Wt<=fe;)Se(oe[Wt],st,It,!0),Wt++;else{const Nt=Wt,Gt=Wt,fn=new Map;for(Wt=Gt;Wt<=lt;Wt++){const kn=ye[Wt]=Ut?Ld(ye[Wt]):dc(ye[Wt]);kn.key!=null&&fn.set(kn.key,Wt)}let wn,vn=0;const Xe=lt-Gt+1;let nn=!1,Nn=0;const Rn=new Array(Xe);for(Wt=0;Wt<Xe;Wt++)Rn[Wt]=0;for(Wt=Nt;Wt<=fe;Wt++){const kn=oe[Wt];if(vn>=Xe){Se(kn,st,It,!0);continue}let Qn;if(kn.key!=null)Qn=fn.get(kn.key);else for(wn=Gt;wn<=lt;wn++)if(Rn[wn-Gt]===0&&mc(kn,ye[wn])){Qn=wn;break}Qn===void 0?Se(kn,st,It,!0):(Rn[Qn-Gt]=Wt+1,Qn>=Nn?Nn=Qn:nn=!0,P(kn,ye[Qn],We,null,st,It,At,Tt,Ut),vn++)}const An=nn?wde(Rn):og;for(wn=An.length-1,Wt=Xe-1;Wt>=0;Wt--){const kn=Gt+Wt,Qn=ye[kn],ji=kn+1<we?ye[kn+1].el:at;Rn[Wt]===0?P(null,Qn,We,ji,st,It,At,Tt,Ut):nn&&(wn<0||Wt!==An[wn]?qe(Qn,We,ji,2):wn--)}}},qe=(oe,ye,We,at,st=null)=>{const{el:It,type:At,transition:Tt,children:Ut,shapeFlag:Wt}=oe;if(Wt&6){qe(oe.component.subTree,ye,We,at);return}if(Wt&128){oe.suspense.move(ye,We,at);return}if(Wt&64){At.move(oe,ye,We,Vt);return}if(At===ai){s(It,ye,We);for(let fe=0;fe<Ut.length;fe++)qe(Ut[fe],ye,We,at);s(oe.anchor,ye,We);return}if(At===Gw){N(oe,ye,We);return}if(at!==2&&Wt&1&&Tt)if(at===0)Tt.beforeEnter(It),s(It,ye,We),wo(()=>Tt.enter(It),st);else{const{leave:fe,delayLeave:lt,afterLeave:Nt}=Tt,Gt=()=>s(It,ye,We),fn=()=>{fe(It,()=>{Gt(),Nt&&Nt()})};lt?lt(It,Gt,fn):fn()}else s(It,ye,We)},Se=(oe,ye,We,at=!1,st=!1)=>{const{type:It,props:At,ref:Tt,children:Ut,dynamicChildren:Wt,shapeFlag:we,patchFlag:fe,dirs:lt}=oe;if(Tt!=null&&KE(Tt,null,We,oe,!0),we&256){ye.ctx.deactivate(oe);return}const Nt=we&1&&lt,Gt=!dg(oe);let fn;if(Gt&&(fn=At&&At.onVnodeBeforeUnmount)&&xl(fn,ye,oe),we&6)He(oe.component,We,at);else{if(we&128){oe.suspense.unmount(We,at);return}Nt&&tp(oe,null,ye,"beforeUnmount"),we&64?oe.type.remove(oe,ye,We,st,Vt,at):Wt&&(It!==ai||fe>0&&fe&64)?Fe(Wt,ye,We,!1,!0):(It===ai&&fe&384||!st&&we&16)&&Fe(Ut,ye,We),at&&gt(oe)}(Gt&&(fn=At&&At.onVnodeUnmounted)||Nt)&&wo(()=>{fn&&xl(fn,ye,oe),Nt&&tp(oe,null,ye,"unmounted")},We)},gt=oe=>{const{type:ye,el:We,anchor:at,transition:st}=oe;if(ye===ai){Xt(We,at);return}if(ye===Gw){V(oe);return}const It=()=>{a(We),st&&!st.persisted&&st.afterLeave&&st.afterLeave()};if(oe.shapeFlag&1&&st&&!st.persisted){const{leave:At,delayLeave:Tt}=st,Ut=()=>At(We,It);Tt?Tt(oe.el,It,Ut):Ut()}else It()},Xt=(oe,ye)=>{let We;for(;oe!==ye;)We=k(oe),a(oe),oe=We;a(ye)},He=(oe,ye,We)=>{const{bum:at,scope:st,update:It,subTree:At,um:Tt}=oe;at&&lg(at),st.stop(),It&&(It.active=!1,Se(At,oe,ye,We)),Tt&&wo(Tt,ye),wo(()=>{oe.isUnmounted=!0},ye),ye&&ye.pendingBranch&&!ye.isUnmounted&&oe.asyncDep&&!oe.asyncResolved&&oe.suspenseId===ye.pendingId&&(ye.deps--,ye.deps===0&&ye.resolve())},Fe=(oe,ye,We,at=!1,st=!1,It=0)=>{for(let At=It;At<oe.length;At++)Se(oe[At],ye,We,at,st)},pt=oe=>oe.shapeFlag&6?pt(oe.component.subTree):oe.shapeFlag&128?oe.suspense.next():k(oe.anchor||oe.el),Rt=(oe,ye,We)=>{oe==null?ye._vnode&&Se(ye._vnode,null,null,!0):P(ye._vnode||null,oe,ye,null,null,null,We),FD(),eB(),ye._vnode=oe},Vt={p:P,um:Se,m:qe,r:gt,mt:Ue,mc:$,pc:ve,pbc:ue,n:pt,o:r};let Ke,Ot;return e&&([Ke,Ot]=e(Vt)),{render:Rt,hydrate:Ke,createApp:_de(Rt,Ke)}}function np({effect:r,update:e},n){r.allowRecurse=e.allowRecurse=n}function YM(r,e,n=!1){const s=r.children,a=e.children;if(Ci(s)&&Ci(a))for(let u=0;u<s.length;u++){const d=s[u];let f=a[u];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=a[u]=Ld(a[u]),f.el=d.el),n||YM(d,f)),f.type===z3&&(f.el=d.el)}}function wde(r){const e=r.slice(),n=[0];let s,a,u,d,f;const g=r.length;for(s=0;s<g;s++){const _=r[s];if(_!==0){if(a=n[n.length-1],r[a]<_){e[s]=a,n.push(s);continue}for(u=0,d=n.length-1;u<d;)f=u+d>>1,r[n[f]]<_?u=f+1:d=f;_<r[n[u]]&&(u>0&&(e[s]=n[u-1]),n[u]=s)}}for(u=n.length,d=n[u-1];u-- >0;)n[u]=d,d=e[d];return n}const kde=r=>r.__isTeleport,gy=r=>r&&(r.disabled||r.disabled===""),qD=r=>typeof SVGElement<"u"&&r instanceof SVGElement,JE=(r,e)=>{const n=r&&r.to;return ls(n)?e?e(n):null:n},Cde={__isTeleport:!0,process(r,e,n,s,a,u,d,f,g,_){const{mc:y,pc:w,pbc:k,o:{insert:S,querySelector:A,createText:P,createComment:R}}=_,O=gy(e.props);let{shapeFlag:B,children:N,dynamicChildren:V}=e;if(r==null){const U=e.el=P(""),Y=e.anchor=P("");S(U,n,s),S(Y,n,s);const X=e.target=JE(e.props,A),$=e.targetAnchor=P("");X&&(S($,X),d=d||qD(X));const ee=(ue,Te)=>{B&16&&y(N,ue,Te,a,u,d,f,g)};O?ee(n,Y):X&&ee(X,$)}else{e.el=r.el;const U=e.anchor=r.anchor,Y=e.target=r.target,X=e.targetAnchor=r.targetAnchor,$=gy(r.props),ee=$?n:Y,ue=$?U:X;if(d=d||qD(Y),V?(k(r.dynamicChildren,V,ee,a,u,d,f),YM(r,e,!0)):g||w(r,e,ee,ue,a,u,d,f,!1),O)$||jx(e,n,U,_,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const Te=e.target=JE(e.props,A);Te&&jx(e,Te,null,_,0)}else $&&jx(e,Y,X,_,1)}bB(e)},remove(r,e,n,s,{um:a,o:{remove:u}},d){const{shapeFlag:f,children:g,anchor:_,targetAnchor:y,target:w,props:k}=r;if(w&&u(y),(d||!gy(k))&&(u(_),f&16))for(let S=0;S<g.length;S++){const A=g[S];a(A,e,n,!0,!!A.dynamicChildren)}},move:jx,hydrate:Sde};function jx(r,e,n,{o:{insert:s},m:a},u=2){u===0&&s(r.targetAnchor,e,n);const{el:d,anchor:f,shapeFlag:g,children:_,props:y}=r,w=u===2;if(w&&s(d,e,n),(!w||gy(y))&&g&16)for(let k=0;k<_.length;k++)a(_[k],e,n,2);w&&s(f,e,n)}function Sde(r,e,n,s,a,u,{o:{nextSibling:d,parentNode:f,querySelector:g}},_){const y=e.target=JE(e.props,g);if(y){const w=y._lpa||y.firstChild;if(e.shapeFlag&16)if(gy(e.props))e.anchor=_(d(r),e,f(r),n,s,a,u),e.targetAnchor=w;else{e.anchor=d(r);let k=w;for(;k;)if(k=d(k),k&&k.nodeType===8&&k.data==="teleport anchor"){e.targetAnchor=k,y._lpa=e.targetAnchor&&d(e.targetAnchor);break}_(w,e,y,n,s,a,u)}bB(e)}return e.anchor&&d(e.anchor)}const Ede=Cde;function bB(r){const e=r.ctx;if(e&&e.ut){let n=r.children[0].el;for(;n!==r.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const ai=Symbol(void 0),z3=Symbol(void 0),Sa=Symbol(void 0),Gw=Symbol(void 0),vy=[];let Sl=null;function Ge(r=!1){vy.push(Sl=r?null:[])}function xB(){vy.pop(),Sl=vy[vy.length-1]||null}let _g=1;function XD(r){_g+=r}function wB(r){return r.dynamicChildren=_g>0?Sl||og:null,xB(),_g>0&&Sl&&Sl.push(r),r}function Ct(r,e,n,s,a,u){return wB(G(r,e,n,s,a,u,!0))}function Jn(r,e,n,s,a){return wB(Bt(r,e,n,s,a,!0))}function Yd(r){return r?r.__v_isVNode===!0:!1}function mc(r,e){return r.type===e.type&&r.key===e.key}const U3="__vInternal",kB=({key:r})=>r!=null?r:null,Hw=({ref:r,ref_key:e,ref_for:n})=>r!=null?ls(r)||Lr(r)||zi(r)?{i:Co,r,k:e,f:!!n}:r:null;function G(r,e=null,n=null,s=0,a=null,u=r===ai?0:1,d=!1,f=!1){const g={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&kB(e),ref:e&&Hw(e),scopeId:F3,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:s,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Co};return f?(jM(g,n),u&128&&r.normalize(g)):n&&(g.shapeFlag|=ls(n)?8:16),_g>0&&!d&&Sl&&(g.patchFlag>0||u&6)&&g.patchFlag!==32&&Sl.push(g),g}const Bt=Tde;function Tde(r,e=null,n=null,s=0,a=null,u=!1){if((!r||r===uB)&&(r=Sa),Yd(r)){const f=Eh(r,e,!0);return n&&jM(f,n),_g>0&&!u&&Sl&&(f.shapeFlag&6?Sl[Sl.indexOf(r)]=f:Sl.push(f)),f.patchFlag|=-2,f}if(Dde(r)&&(r=r.__vccOpts),e){e=zr(e);let{class:f,style:g}=e;f&&!ls(f)&&(e.class=er(f)),ts(g)&&(YF(g)&&!Ci(g)&&(g=Eo({},g)),e.style=Qs(g))}const d=ls(r)?1:iB(r)?128:kde(r)?64:ts(r)?4:zi(r)?2:0;return G(r,e,n,s,a,d,u,!0)}function zr(r){return r?YF(r)||U3 in r?Eo({},r):r:null}function Eh(r,e,n=!1){const{props:s,ref:a,patchFlag:u,children:d}=r,f=e?pr(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:f,key:f&&kB(f),ref:e&&e.ref?n&&a?Ci(a)?a.concat(Hw(e)):[a,Hw(e)]:Hw(e):a,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:d,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==ai?u===-1?16:u|16:u,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Eh(r.ssContent),ssFallback:r.ssFallback&&Eh(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function Yt(r=" ",e=0){return Bt(z3,null,r,e)}function G3(r,e){const n=Bt(Gw,null,r);return n.staticCount=e,n}function pi(r="",e=!1){return e?(Ge(),Jn(Sa,null,r)):Bt(Sa,null,r)}function dc(r){return r==null||typeof r=="boolean"?Bt(Sa):Ci(r)?Bt(ai,null,r.slice()):typeof r=="object"?Ld(r):Bt(z3,null,String(r))}function Ld(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:Eh(r)}function jM(r,e){let n=0;const{shapeFlag:s}=r;if(e==null)e=null;else if(Ci(e))n=16;else if(typeof e=="object")if(s&65){const a=e.default;a&&(a._c&&(a._d=!1),jM(r,a()),a._c&&(a._d=!0));return}else{n=32;const a=e._;!a&&!(U3 in e)?e._ctx=Co:a===3&&Co&&(Co.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else zi(e)?(e={default:e,_ctx:Co},n=32):(e=String(e),s&64?(n=16,e=[Yt(e)]):n=8);r.children=e,r.shapeFlag|=n}function pr(...r){const e={};for(let n=0;n<r.length;n++){const s=r[n];for(const a in s)if(a==="class")e.class!==s.class&&(e.class=er([e.class,s.class]));else if(a==="style")e.style=Qs([e.style,s.style]);else if(R3(a)){const u=e[a],d=s[a];d&&u!==d&&!(Ci(u)&&u.includes(d))&&(e[a]=u?[].concat(u,d):d)}else a!==""&&(e[a]=s[a])}return e}function xl(r,e,n,s=null){El(r,e,7,[n,s])}const Mde=_B();let Ade=0;function Lde(r,e,n){const s=r.type,a=(e?e.appContext:r.appContext)||Mde,u={uid:Ade++,vnode:r,type:s,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new IF(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mB(s,a),emitsOptions:nB(s,a),emit:null,emitted:null,propsDefaults:es,inheritAttrs:s.inheritAttrs,ctx:es,data:es,props:es,attrs:es,slots:es,refs:es,setupState:es,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=e?e.root:u,u.emit=Nhe.bind(null,u),r.ce&&r.ce(u),u}let Ms=null;const pu=()=>Ms||Co,jd=r=>{Ms=r,r.scope.on()},Bd=()=>{Ms&&Ms.scope.off(),Ms=null};function CB(r){return r.vnode.shapeFlag&4}let By=!1;function Rde(r,e=!1){By=e;const{props:n,children:s}=r.vnode,a=CB(r);fde(r,n,a,e),gde(r,s);const u=a?Pde(r,e):void 0;return By=!1,u}function Pde(r,e){const n=r.type;r.accessCache=Object.create(null),r.proxy=N3(new Proxy(r.ctx,ade));const{setup:s}=n;if(s){const a=r.setupContext=s.length>1?EB(r):null;jd(r),Tg();const u=Fd(s,r,0,[r.props,a]);if(Mg(),Bd(),kM(u)){if(u.then(Bd,Bd),e)return u.then(d=>{QE(r,d,e)}).catch(d=>{p_(d,r,0)});r.asyncDep=u}else QE(r,u,e)}else SB(r,e)}function QE(r,e,n){zi(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:ts(e)&&(r.setupState=$F(e)),SB(r,n)}let ZD;function SB(r,e,n){const s=r.type;if(!r.render){if(!e&&ZD&&!s.render){const a=s.template||GM(r).template;if(a){const{isCustomElement:u,compilerOptions:d}=r.appContext.config,{delimiters:f,compilerOptions:g}=s,_=Eo(Eo({isCustomElement:u,delimiters:f},d),g);s.render=ZD(a,_)}}r.render=s.render||vc}jd(r),Tg(),lde(r),Mg(),Bd()}function Ide(r){return new Proxy(r.attrs,{get(e,n){return Ta(r,"get","$attrs"),e[n]}})}function EB(r){const e=s=>{r.exposed=s||{}};let n;return{get attrs(){return n||(n=Ide(r))},slots:r.slots,emit:r.emit,expose:e}}function H3(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy($F(N3(r.exposed)),{get(e,n){if(n in e)return e[n];if(n in my)return my[n](r)},has(e,n){return n in e||n in my}}))}function eT(r,e=!0){return zi(r)?r.displayName||r.name:r.name||e&&r.__name}function Dde(r){return zi(r)&&"__vccOpts"in r}const Ht=(r,e)=>Lhe(r,e,By);function TB(){return AB().slots}function MB(){return AB().attrs}function AB(){const r=pu();return r.setupContext||(r.setupContext=EB(r))}function Nde(r){const e=pu();let n=r();return Bd(),kM(n)&&(n=n.catch(s=>{throw jd(e),s})),[n,()=>jd(e)]}function po(r,e,n){const s=arguments.length;return s===2?ts(e)&&!Ci(e)?Yd(e)?Bt(r,null,[e]):Bt(r,e):Bt(r,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Yd(n)&&(n=[n]),Bt(r,e,n))}const Ode=Symbol(""),Fde=()=>Dn(Ode),Bde="3.2.47",Vde="http://www.w3.org/2000/svg",wp=typeof document<"u"?document:null,KD=wp&&wp.createElement("template"),Wde={insert:(r,e,n)=>{e.insertBefore(r,n||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,n,s)=>{const a=e?wp.createElementNS(Vde,r):wp.createElement(r,n?{is:n}:void 0);return r==="select"&&s&&s.multiple!=null&&a.setAttribute("multiple",s.multiple),a},createText:r=>wp.createTextNode(r),createComment:r=>wp.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>wp.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,n,s,a,u){const d=n?n.previousSibling:e.lastChild;if(a&&(a===u||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),n),!(a===u||!(a=a.nextSibling)););else{KD.innerHTML=s?`<svg>${r}</svg>`:r;const f=KD.content;if(s){const g=f.firstChild;for(;g.firstChild;)f.appendChild(g.firstChild);f.removeChild(g)}e.insertBefore(f,n)}return[d?d.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function zde(r,e,n){const s=r._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?r.removeAttribute("class"):n?r.setAttribute("class",e):r.className=e}function Ude(r,e,n){const s=r.style,a=ls(n);if(n&&!a){if(e&&!ls(e))for(const u in e)n[u]==null&&tT(s,u,"");for(const u in n)tT(s,u,n[u])}else{const u=s.display;a?e!==n&&(s.cssText=n):e&&r.removeAttribute("style"),"_vod"in r&&(s.display=u)}}const JD=/\s*!important$/;function tT(r,e,n){if(Ci(n))n.forEach(s=>tT(r,e,s));else if(n==null&&(n=""),e.startsWith("--"))r.setProperty(e,n);else{const s=Gde(r,e);JD.test(n)?r.setProperty(qp(s),n.replace(JD,""),"important"):r[s]=n}}const QD=["Webkit","Moz","ms"],RS={};function Gde(r,e){const n=RS[e];if(n)return n;let s=uu(e);if(s!=="filter"&&s in r)return RS[e]=s;s=I3(s);for(let a=0;a<QD.length;a++){const u=QD[a]+s;if(u in r)return RS[e]=u}return e}const e9="http://www.w3.org/1999/xlink";function Hde(r,e,n,s,a){if(s&&e.startsWith("xlink:"))n==null?r.removeAttributeNS(e9,e.slice(6,e.length)):r.setAttributeNS(e9,e,n);else{const u=Vue(e);n==null||u&&!TF(n)?r.removeAttribute(e):r.setAttribute(e,u?"":n)}}function Yde(r,e,n,s,a,u,d){if(e==="innerHTML"||e==="textContent"){s&&d(s,a,u),r[e]=n==null?"":n;return}if(e==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=n;const g=n==null?"":n;(r.value!==g||r.tagName==="OPTION")&&(r.value=g),n==null&&r.removeAttribute(e);return}let f=!1;if(n===""||n==null){const g=typeof r[e];g==="boolean"?n=TF(n):n==null&&g==="string"?(n="",f=!0):g==="number"&&(n=0,f=!0)}try{r[e]=n}catch{}f&&r.removeAttribute(e)}function K0(r,e,n,s){r.addEventListener(e,n,s)}function jde(r,e,n,s){r.removeEventListener(e,n,s)}function $de(r,e,n,s,a=null){const u=r._vei||(r._vei={}),d=u[e];if(s&&d)d.value=s;else{const[f,g]=qde(e);if(s){const _=u[e]=Kde(s,a);K0(r,f,_,g)}else d&&(jde(r,f,d,g),u[e]=void 0)}}const t9=/(?:Once|Passive|Capture)$/;function qde(r){let e;if(t9.test(r)){e={};let s;for(;s=r.match(t9);)r=r.slice(0,r.length-s[0].length),e[s[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):qp(r.slice(2)),e]}let PS=0;const Xde=Promise.resolve(),Zde=()=>PS||(Xde.then(()=>PS=0),PS=Date.now());function Kde(r,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;El(Jde(s,n.value),e,5,[s])};return n.value=r,n.attached=Zde(),n}function Jde(r,e){if(Ci(e)){const n=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{n.call(r),r._stopped=!0},e.map(s=>a=>!a._stopped&&s&&s(a))}else return e}const n9=/^on[a-z]/,Qde=(r,e,n,s,a=!1,u,d,f,g)=>{e==="class"?zde(r,s,a):e==="style"?Ude(r,n,s):R3(e)?bM(e)||$de(r,e,n,s,d):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):efe(r,e,s,a))?Yde(r,e,s,u,d,f,g):(e==="true-value"?r._trueValue=s:e==="false-value"&&(r._falseValue=s),Hde(r,e,s,a))};function efe(r,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in r&&n9.test(e)&&zi(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||n9.test(e)&&ls(n)?!1:e in r}const _d="transition",Hv="animation",bg=(r,{slots:e})=>po(sB,tfe(r),e);bg.displayName="Transition";const LB={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};bg.props=Eo({},sB.props,LB);const ip=(r,e=[])=>{Ci(r)?r.forEach(n=>n(...e)):r&&r(...e)},i9=r=>r?Ci(r)?r.some(e=>e.length>1):r.length>1:!1;function tfe(r){const e={};for(const De in r)De in LB||(e[De]=r[De]);if(r.css===!1)return e;const{name:n="v",type:s,duration:a,enterFromClass:u=`${n}-enter-from`,enterActiveClass:d=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:g=u,appearActiveClass:_=d,appearToClass:y=f,leaveFromClass:w=`${n}-leave-from`,leaveActiveClass:k=`${n}-leave-active`,leaveToClass:S=`${n}-leave-to`}=r,A=nfe(a),P=A&&A[0],R=A&&A[1],{onBeforeEnter:O,onEnter:B,onEnterCancelled:N,onLeave:V,onLeaveCancelled:U,onBeforeAppear:Y=O,onAppear:X=B,onAppearCancelled:$=N}=e,ee=(De,$e,Ue)=>{rp(De,$e?y:f),rp(De,$e?_:d),Ue&&Ue()},ue=(De,$e)=>{De._isLeaving=!1,rp(De,w),rp(De,S),rp(De,k),$e&&$e()},Te=De=>($e,Ue)=>{const it=De?X:B,tt=()=>ee($e,De,Ue);ip(it,[$e,tt]),r9(()=>{rp($e,De?g:u),bd($e,De?y:f),i9(it)||s9($e,s,P,tt)})};return Eo(e,{onBeforeEnter(De){ip(O,[De]),bd(De,u),bd(De,d)},onBeforeAppear(De){ip(Y,[De]),bd(De,g),bd(De,_)},onEnter:Te(!1),onAppear:Te(!0),onLeave(De,$e){De._isLeaving=!0;const Ue=()=>ue(De,$e);bd(De,w),sfe(),bd(De,k),r9(()=>{!De._isLeaving||(rp(De,w),bd(De,S),i9(V)||s9(De,s,R,Ue))}),ip(V,[De,Ue])},onEnterCancelled(De){ee(De,!1),ip(N,[De])},onAppearCancelled(De){ee(De,!0),ip($,[De])},onLeaveCancelled(De){ue(De),ip(U,[De])}})}function nfe(r){if(r==null)return null;if(ts(r))return[IS(r.enter),IS(r.leave)];{const e=IS(r);return[e,e]}}function IS(r){return PF(r)}function bd(r,e){e.split(/\s+/).forEach(n=>n&&r.classList.add(n)),(r._vtc||(r._vtc=new Set)).add(e)}function rp(r,e){e.split(/\s+/).forEach(s=>s&&r.classList.remove(s));const{_vtc:n}=r;n&&(n.delete(e),n.size||(r._vtc=void 0))}function r9(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let ife=0;function s9(r,e,n,s){const a=r._endId=++ife,u=()=>{a===r._endId&&s()};if(n)return setTimeout(u,n);const{type:d,timeout:f,propCount:g}=rfe(r,e);if(!d)return s();const _=d+"end";let y=0;const w=()=>{r.removeEventListener(_,k),u()},k=S=>{S.target===r&&++y>=g&&w()};setTimeout(()=>{y<g&&w()},f+1),r.addEventListener(_,k)}function rfe(r,e){const n=window.getComputedStyle(r),s=A=>(n[A]||"").split(", "),a=s(`${_d}Delay`),u=s(`${_d}Duration`),d=o9(a,u),f=s(`${Hv}Delay`),g=s(`${Hv}Duration`),_=o9(f,g);let y=null,w=0,k=0;e===_d?d>0&&(y=_d,w=d,k=u.length):e===Hv?_>0&&(y=Hv,w=_,k=g.length):(w=Math.max(d,_),y=w>0?d>_?_d:Hv:null,k=y?y===_d?u.length:g.length:0);const S=y===_d&&/\b(transform|all)(,|$)/.test(s(`${_d}Property`).toString());return{type:y,timeout:w,propCount:k,hasTransform:S}}function o9(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((n,s)=>a9(n)+a9(r[s])))}function a9(r){return Number(r.slice(0,-1).replace(",","."))*1e3}function sfe(){return document.body.offsetHeight}const l9=r=>{const e=r.props["onUpdate:modelValue"]||!1;return Ci(e)?n=>lg(e,n):e};function ofe(r){r.target.composing=!0}function c9(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const afe={created(r,{modifiers:{lazy:e,trim:n,number:s}},a){r._assign=l9(a);const u=s||a.props&&a.props.type==="number";K0(r,e?"change":"input",d=>{if(d.target.composing)return;let f=r.value;n&&(f=f.trim()),u&&(f=zE(f)),r._assign(f)}),n&&K0(r,"change",()=>{r.value=r.value.trim()}),e||(K0(r,"compositionstart",ofe),K0(r,"compositionend",c9),K0(r,"change",c9))},mounted(r,{value:e}){r.value=e==null?"":e},beforeUpdate(r,{value:e,modifiers:{lazy:n,trim:s,number:a}},u){if(r._assign=l9(u),r.composing||document.activeElement===r&&r.type!=="range"&&(n||s&&r.value.trim()===e||(a||r.type==="number")&&zE(r.value)===e))return;const d=e==null?"":e;r.value!==d&&(r.value=d)}},lfe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},u9=(r,e)=>n=>{if(!("key"in n))return;const s=qp(n.key);if(e.some(a=>a===s||lfe[a]===s))return r(n)},Vy={beforeMount(r,{value:e},{transition:n}){r._vod=r.style.display==="none"?"":r.style.display,n&&e?n.beforeEnter(r):Yv(r,e)},mounted(r,{value:e},{transition:n}){n&&e&&n.enter(r)},updated(r,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(r),Yv(r,!0),s.enter(r)):s.leave(r,()=>{Yv(r,!1)}):Yv(r,e))},beforeUnmount(r,{value:e}){Yv(r,e)}};function Yv(r,e){r.style.display=e?r._vod:"none"}const cfe=Eo({patchProp:Qde},Wde);let h9;function ufe(){return h9||(h9=bde(cfe))}const hfe=(...r)=>{const e=ufe().createApp(...r),{mount:n}=e;return e.mount=s=>{const a=dfe(s);if(!a)return;const u=e._component;!zi(u)&&!u.render&&!u.template&&(u.template=a.innerHTML),a.innerHTML="";const d=n(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),d},e};function dfe(r){return ls(r)?document.querySelector(r):r}var d9;const _c=typeof window<"u",nT=r=>typeof r<"u",ffe=Object.prototype.toString,Wy=r=>typeof r=="function",pfe=r=>typeof r=="number",RB=r=>typeof r=="string",iT=r=>ffe.call(r)==="[object Object]",rT=()=>+Date.now(),yy=()=>{};_c&&((d9=window==null?void 0:window.navigator)==null?void 0:d9.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Wo(r){return typeof r=="function"?r():ft(r)}function mfe(r,e){function n(...s){return new Promise((a,u)=>{Promise.resolve(r(()=>e.apply(this,s),{fn:e,thisArg:this,args:s})).then(a).catch(u)})}return n}const PB=r=>r();function gfe(r=PB){const e=Tn(!0);function n(){e.value=!1}function s(){e.value=!0}const a=(...u)=>{e.value&&r(...u)};return{isActive:su(e),pause:n,resume:s,eventFilter:a}}function vfe(r){return r}function yfe(r,e){var n;if(typeof r=="number")return r+e;const s=((n=r.match(/^-?[0-9]+\.?[0-9]*/))==null?void 0:n[0])||"",a=r.slice(s.length),u=parseFloat(s)+e;return Number.isNaN(u)?r:u+a}function _fe(r,e){let n,s,a;const u=Tn(!0),d=()=>{u.value=!0,a()};Ni(r,d,{flush:"sync"});const f=Wy(e)?e:e.get,g=Wy(e)?void 0:e.set,_=qF((y,w)=>(s=y,a=w,{get(){return u.value&&(n=f(),u.value=!1),s(),n},set(k){g==null||g(k)}}));return Object.isExtensible(_)&&(_.trigger=d),_}function du(r){return SM()?(DF(r),!0):!1}function bfe(r){if(!Lr(r))return Yr(r);const e=new Proxy({},{get(n,s,a){return ft(Reflect.get(r.value,s,a))},set(n,s,a){return Lr(r.value[s])&&!Lr(a)?r.value[s].value=a:r.value[s]=a,!0},deleteProperty(n,s){return Reflect.deleteProperty(r.value,s)},has(n,s){return Reflect.has(r.value,s)},ownKeys(){return Object.keys(r.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return Yr(e)}function IB(r){return typeof r=="function"?Ht(r):Tn(r)}var xfe=Object.defineProperty,wfe=Object.defineProperties,kfe=Object.getOwnPropertyDescriptors,f9=Object.getOwnPropertySymbols,Cfe=Object.prototype.hasOwnProperty,Sfe=Object.prototype.propertyIsEnumerable,p9=(r,e,n)=>e in r?xfe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Efe=(r,e)=>{for(var n in e||(e={}))Cfe.call(e,n)&&p9(r,n,e[n]);if(f9)for(var n of f9(e))Sfe.call(e,n)&&p9(r,n,e[n]);return r},Tfe=(r,e)=>wfe(r,kfe(e));function Mfe(r){if(!Lr(r))return XF(r);const e=Array.isArray(r.value)?new Array(r.value.length):{};for(const n in r.value)e[n]=qF(()=>({get(){return r.value[n]},set(s){if(Array.isArray(r.value)){const a=[...r.value];a[n]=s,r.value=a}else{const a=Tfe(Efe({},r.value),{[n]:s});Object.setPrototypeOf(a,r.value),r.value=a}}}));return e}function Y3(r,e=!0){pu()?Jd(r):e?r():ko(r)}function Afe(r){pu()&&W3(r)}function Lfe(r,e=1e3,n={}){const{immediate:s=!0,immediateCallback:a=!1}=n;let u=null;const d=Tn(!1);function f(){u&&(clearInterval(u),u=null)}function g(){d.value=!1,f()}function _(){const y=Wo(e);y<=0||(d.value=!0,a&&r(),f(),u=setInterval(r,y))}if(s&&_c&&_(),Lr(e)||Wy(e)){const y=Ni(e,()=>{d.value&&_c&&_()});du(y)}return du(g),{isActive:d,pause:g,resume:_}}function Rfe(r,e,n={}){const{immediate:s=!0}=n,a=Tn(!1);let u=null;function d(){u&&(clearTimeout(u),u=null)}function f(){a.value=!1,d()}function g(..._){d(),a.value=!0,u=setTimeout(()=>{a.value=!1,u=null,r(..._)},Wo(e))}return s&&(a.value=!0,_c&&g()),du(f),{isPending:su(a),start:g,stop:f}}function $M(r=!1,e={}){const{truthyValue:n=!0,falsyValue:s=!1}=e,a=Lr(r),u=Tn(r);function d(f){if(arguments.length)return u.value=f,u.value;{const g=Wo(n);return u.value=u.value===g?Wo(s):g,u.value}}return a?d:[u,d]}var m9=Object.getOwnPropertySymbols,Pfe=Object.prototype.hasOwnProperty,Ife=Object.prototype.propertyIsEnumerable,Dfe=(r,e)=>{var n={};for(var s in r)Pfe.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&m9)for(var s of m9(r))e.indexOf(s)<0&&Ife.call(r,s)&&(n[s]=r[s]);return n};function Nfe(r,e,n={}){const s=n,{eventFilter:a=PB}=s,u=Dfe(s,["eventFilter"]);return Ni(r,mfe(a,e),u)}var Ofe=Object.defineProperty,Ffe=Object.defineProperties,Bfe=Object.getOwnPropertyDescriptors,d3=Object.getOwnPropertySymbols,DB=Object.prototype.hasOwnProperty,NB=Object.prototype.propertyIsEnumerable,g9=(r,e,n)=>e in r?Ofe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Vfe=(r,e)=>{for(var n in e||(e={}))DB.call(e,n)&&g9(r,n,e[n]);if(d3)for(var n of d3(e))NB.call(e,n)&&g9(r,n,e[n]);return r},Wfe=(r,e)=>Ffe(r,Bfe(e)),zfe=(r,e)=>{var n={};for(var s in r)DB.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&d3)for(var s of d3(r))e.indexOf(s)<0&&NB.call(r,s)&&(n[s]=r[s]);return n};function Ufe(r,e,n={}){const s=n,{eventFilter:a}=s,u=zfe(s,["eventFilter"]),{eventFilter:d,pause:f,resume:g,isActive:_}=gfe(a);return{stop:Nfe(r,e,Wfe(Vfe({},u),{eventFilter:d})),pause:f,resume:g,isActive:_}}var OB="usehead",v9="head:count",DS="data-head-attrs",FB="data-meta-body",Gfe=(r,e)=>{const n=s=>{if(s.props.renderPriority)return s.props.renderPriority;switch(s.tag){case"base":return-1;case"meta":return s.props.charset?-2:s.props["http-equiv"]==="content-security-policy"?0:10;default:return 10}};return n(r)-n(e)},Hfe=r=>{if(!["meta","base","script","link","title"].includes(r.tag))return!1;const{props:e,tag:n}=r;if(n==="base"||n==="title")return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";const s=["key","id","name","property","http-equiv"];for(const a of s){let u;if(typeof e.getAttribute=="function"&&e.hasAttribute(a)?u=e.getAttribute(a):u=e[a],u!==void 0)return`${n}-${a}-${u}`}return!1};function sT(r){const e=Wo(r);return!r||!e?e:Array.isArray(e)?e.map(sT):typeof e=="object"?Object.fromEntries(Object.entries(e).map(([n,s])=>n==="titleTemplate"?[n,ft(s)]:[n,sT(s)])):e}function Yfe(r){return{...r,input:sT(r.input)}}function y9(r,e){if(r instanceof HTMLElement&&e instanceof HTMLElement){const n=e.getAttribute("nonce");if(n&&!r.getAttribute("nonce")){const s=e.cloneNode(!0);return s.setAttribute("nonce",""),s.nonce=n,n===r.nonce&&r.isEqualNode(s)}}return r.isEqualNode(e)}var _9=(r,e)=>{const n=r.getAttribute(DS);if(n)for(const a of n.split(","))a in e||r.removeAttribute(a);const s=[];for(const a in e){const u=e[a];u!=null&&(u===!1?r.removeAttribute(a):r.setAttribute(a,u),s.push(a))}s.length?r.setAttribute(DS,s.join(",")):r.removeAttribute(DS)},jfe=(r,e,n)=>{const s=n.createElement(r);for(const a of Object.keys(e))if(a==="body"&&e.body===!0)s.setAttribute(FB,"true");else{const u=e[a];if(a==="renderPriority"||a==="key"||u===!1)continue;a==="children"||a==="textContent"?s.textContent=u:a==="innerHTML"?s.innerHTML=u:s.setAttribute(a,u)}return s},$fe=(r=window.document,e,n)=>{var s,a;const u=r.head,d=r.body;let f=u.querySelector(`meta[name="${v9}"]`);const g=d.querySelectorAll(`[${FB}]`),_=f?Number(f.getAttribute("content")):0,y=[],w=[];if(g)for(let S=0;S<g.length;S++)g[S]&&((s=g[S].tagName)==null?void 0:s.toLowerCase())===e&&w.push(g[S]);if(f)for(let S=0,A=f.previousElementSibling;S<_;S++,A=(A==null?void 0:A.previousElementSibling)||null)((a=A==null?void 0:A.tagName)==null?void 0:a.toLowerCase())===e&&y.push(A);else f=r.createElement("meta"),f.setAttribute("name",v9),f.setAttribute("content","0"),u.append(f);let k=n.map(S=>{var A;return{element:jfe(S.tag,S.props,r),body:(A=S.props.body)!=null?A:!1}});k=k.filter(S=>{for(let A=0;A<y.length;A++){const P=y[A];if(y9(P,S.element))return y.splice(A,1),!1}for(let A=0;A<w.length;A++){const P=w[A];if(y9(P,S.element))return w.splice(A,1),!1}return!0}),w.forEach(S=>{var A;return(A=S.parentNode)==null?void 0:A.removeChild(S)}),y.forEach(S=>{var A;return(A=S.parentNode)==null?void 0:A.removeChild(S)}),k.forEach(S=>{S.body===!0?d.insertAdjacentElement("beforeend",S.element):u.insertBefore(S.element,f)}),f.setAttribute("content",`${_-y.length+k.filter(S=>!S.body).length}`)},qfe=({domCtx:r,document:e,previousTags:n})=>{e||(e=window.document),r.title!==void 0&&(e.title=r.title),_9(e.documentElement,r.htmlAttrs),_9(e.body,r.bodyAttrs);const s=new Set([...Object.keys(r.actualTags),...n]);for(const a of s)$fe(e,a,r.actualTags[a]||[]);n.clear(),Object.keys(r.actualTags).forEach(a=>n.add(a))},Xfe=()=>{const r=Dn(OB);if(!r)throw new Error("You may forget to apply app.use(head)");return r},Zfe=["title","meta","link","base","style","script","noscript","htmlAttrs","bodyAttrs"],Kfe=(r,e)=>r==null?"":typeof r=="function"?r(e):r.replace("%s",e!=null?e:""),Jfe=r=>{const e=[],n=Object.keys(r),s=a=>(a.hid&&(a.key=a.hid,delete a.hid),a.vmid&&(a.key=a.vmid,delete a.vmid),a);for(const a of n)if(r[a]!=null)switch(a){case"title":e.push({tag:a,props:{textContent:r[a]}});break;case"titleTemplate":break;case"base":e.push({tag:a,props:{key:"default",...r[a]}});break;default:if(Zfe.includes(a)){const u=r[a];Array.isArray(u)?u.forEach(d=>{const f=s(d);e.push({tag:a,props:f})}):u&&e.push({tag:a,props:s(u)})}break}return e},Qfe=r=>{let e=[];const n=new Set;let s=0;const a=[],u=[];r&&e.push({input:r});let d=null,f;const g={install(_){_.config.globalProperties.$head=g,_.provide(OB,g)},hookBeforeDomUpdate:a,hookTagsResolved:u,get headTags(){const _=[],y={},w=e.map(Yfe),k=w.map(A=>A.input.titleTemplate).reverse().find(A=>A!=null);w.forEach((A,P)=>{Jfe(A.input).forEach((O,B)=>{var N;if(O._position=P*1e4+B,O._options&&delete O._options,A.options&&(O._options=A.options),k&&O.tag==="title"&&(O.props.textContent=Kfe(k,O.props.textContent)),!((N=O._options)!=null&&N.raw)){for(const U in O.props)U.startsWith("on")&&(console.warn("[@vueuse/head] Warning, you must use `useHeadRaw` to set event listeners. See https://github.com/vueuse/head/pull/118",O),delete O.props[U]);O.props.innerHTML&&(console.warn("[@vueuse/head] Warning, you must use `useHeadRaw` to use `innerHTML`",O),delete O.props.innerHTML)}const V=Hfe(O);V?y[V]=O:_.push(O)})}),_.push(...Object.values(y));const S=_.sort((A,P)=>A._position-P._position);return g.hookTagsResolved.forEach(A=>A(S)),S},addHeadObjs(_,y){const w={input:_,options:y,id:s++};return e.push(w),()=>{e=e.filter(k=>k.id!==w.id)}},removeHeadObjs(_){e=e.filter(y=>y.input!==_)},updateDOM:(_,y)=>{f={title:void 0,htmlAttrs:{},bodyAttrs:{},actualTags:{}};for(const k of g.headTags.sort(Gfe)){if(k.tag==="title"){f.title=k.props.textContent;continue}if(k.tag==="htmlAttrs"||k.tag==="bodyAttrs"){Object.assign(f[k.tag],k.props);continue}f.actualTags[k.tag]=f.actualTags[k.tag]||[],f.actualTags[k.tag].push(k)}const w=()=>{d=null;for(const k in g.hookBeforeDomUpdate)if(g.hookBeforeDomUpdate[k](f.actualTags)===!1)return;qfe({domCtx:f,document:_,previousTags:n})};if(y){w();return}d=d||ko(()=>w())}};return g},epe=typeof window<"u",tpe=(r,e={})=>{const n=Xfe(),s=n.addHeadObjs(r,e);epe&&(kh(()=>{n.updateDOM()}),Ag(()=>{s(),n.updateDOM()}))},npe=r=>{tpe(r)};const _y=Symbol("v-click-clicks"),kp=Symbol("v-click-clicks-elements"),oT=Symbol("v-click-clicks-order-map"),by=Symbol("v-click-clicks-disabled"),BB=Symbol("slidev-slide-scale"),Zn=Symbol("slidev-slidev-context"),ipe=Symbol("slidev-route"),rpe=Symbol("slidev-slide-context"),vp="slidev-vclick-target",NS="slidev-vclick-hidden",spe="slidev-vclick-fade",OS="slidev-vclick-hidden-explicitly",jv="slidev-vclick-current",$x="slidev-vclick-prior";function VB(r){return r=r!=null?r:[],Array.isArray(r)?r:[r]}function aT(r,e){if(!r)return!1;const n=r.indexOf(e);return n>=0?(r.splice(n,1),!0):!1}function ope(...r){let e,n,s;r.length===1?(e=0,s=1,[n]=r):[e,n,s=1]=r;const a=[];let u=e;for(;u<n;)a.push(u),u+=s||1;return a}function ape(r){return r!=null}function lpe(r,e){return Object.fromEntries(Object.entries(r).map(([n,s])=>e(n,s)).filter(ape))}function b9(r){return Object.keys(r).forEach(e=>r[e]===void 0?delete r[e]:{}),r}const dy={theme:"penguin",title:"Event Storming to Code",titleTemplate:"%s - Slidev",addons:[],remoteAssets:!1,monaco:"dev",download:!1,info:!1,highlighter:"shiki",lineNumbers:!1,colorSchema:"dark",routerMode:"history",aspectRatio:1.7777777777777777,canvasWidth:980,exportFilename:"",selectable:!1,themeConfig:{logoHeader:"https://jakubiec.github.io/event-storming-to-code/profile-photo-circle.png",eventUrl:"https://github.com/jakubiec/event-storming-to-code",eventLogo:"https://jakubiec.github.io/event-storming-to-code/github-mark.png"},fonts:{sans:["ui-sans-serif","system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"',"sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:["ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"],webfonts:[],provider:"google",local:[],italic:!1,weights:["200","400","600"]},favicon:"https://cdn.jsdelivr.net/gh/slidevjs/slidev/assets/favicon.png",drawings:{enabled:!0,persist:!1,presenterOnly:!1,syncAll:!0},plantUmlServer:"https://www.plantuml.com/plantuml",codeCopy:!0,record:"dev",css:"unocss",layout:"intro",class:"text-white",hideInToc:!0},wr=dy;var SF;const Vd=(SF=wr.aspectRatio)!=null?SF:16/9;var EF;const Wd=(EF=wr.canvasWidth)!=null?EF:980,qM=Math.ceil(Wd/Vd),WB=Ht(()=>lpe(wr.themeConfig||{},(r,e)=>[`--slidev-theme-${r}`,e]));function Ml(r,e,n){Object.defineProperty(r,e,{value:n,writable:!0,enumerable:!1})}const Zp=Yr({page:0,clicks:0});let cpe=[],upe=[];Ml(Zp,"$syncUp",!0);Ml(Zp,"$syncDown",!0);Ml(Zp,"$paused",!1);Ml(Zp,"$onSet",r=>cpe.push(r));Ml(Zp,"$onPatch",r=>upe.push(r));Ml(Zp,"$patch",async()=>!1);function zB(r,e,n=!1){const s=[];let a=!1,u=!1,d,f;const g=Yr(e);function _(S){s.push(S)}function y(S,A){clearTimeout(d),a=!0,g[S]=A,d=setTimeout(()=>a=!1,0)}function w(S){a||(clearTimeout(f),u=!0,Object.entries(S).forEach(([A,P])=>{g[A]=P}),f=setTimeout(()=>u=!1,0))}function k(S){let A;n?n&&window.addEventListener("storage",R=>{R&&R.key===S&&R.newValue&&w(JSON.parse(R.newValue))}):(A=new BroadcastChannel(S),A.addEventListener("message",R=>w(R.data)));function P(){!n&&A&&!u?A.postMessage(ur(g)):n&&!u&&window.localStorage.setItem(S,JSON.stringify(g)),a||s.forEach(R=>R(g))}if(Ni(g,P,{deep:!0}),n){const R=window.localStorage.getItem(S);R&&w(JSON.parse(R))}}return{init:k,onPatch:_,patch:y,state:g}}const{init:hpe,onPatch:dpe,patch:x9,state:FS}=zB(Zp,{page:1,clicks:0}),Kp=Yr({});let fpe=[],ppe=[];Ml(Kp,"$syncUp",!0);Ml(Kp,"$syncDown",!0);Ml(Kp,"$paused",!1);Ml(Kp,"$onSet",r=>fpe.push(r));Ml(Kp,"$onPatch",r=>ppe.push(r));Ml(Kp,"$patch",async()=>!1);const{init:mpe,onPatch:gpe,patch:UB,state:f3}=zB(Kp,{},!1),vpe="modulepreload",ype=function(r){return"/event-storming-to-code/"+r},w9={},Up=function(e,n,s){if(!n||n.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(n.map(u=>{if(u=ype(u),u in w9)return;w9[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!s)for(let y=a.length-1;y>=0;y--){const w=a[y];if(w.href===u&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const _=document.createElement("link");if(_.rel=d?"stylesheet":vpe,d||(_.as="script",_.crossOrigin=""),_.href=u,document.head.appendChild(_),d)return new Promise((y,w)=>{_.addEventListener("load",y),_.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})})).then(()=>e())};function ka(r){var e;const n=Wo(r);return(e=n==null?void 0:n.$el)!=null?e:n}const eo=_c?window:void 0,GB=_c?window.document:void 0,_pe=_c?window.navigator:void 0;function Qi(...r){let e,n,s,a;if(RB(r[0])||Array.isArray(r[0])?([n,s,a]=r,e=eo):[e,n,s,a]=r,!e)return yy;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const u=[],d=()=>{u.forEach(y=>y()),u.length=0},f=(y,w,k)=>(y.addEventListener(w,k,a),()=>y.removeEventListener(w,k,a)),g=Ni(()=>ka(e),y=>{d(),y&&u.push(...n.flatMap(w=>s.map(k=>f(y,w,k))))},{immediate:!0,flush:"post"}),_=()=>{g(),d()};return du(_),_}function HB(r,e,n={}){const{window:s=eo,ignore:a=[],capture:u=!0,detectIframe:d=!1}=n;if(!s)return;let f=!0,g;const _=S=>a.some(A=>{if(typeof A=="string")return Array.from(s.document.querySelectorAll(A)).some(P=>P===S.target||S.composedPath().includes(P));{const P=ka(A);return P&&(S.target===P||S.composedPath().includes(P))}}),y=S=>{s.clearTimeout(g);const A=ka(r);if(!(!A||A===S.target||S.composedPath().includes(A))){if(S.detail===0&&(f=!_(S)),!f){f=!0;return}e(S)}},w=[Qi(s,"click",y,{passive:!0,capture:u}),Qi(s,"pointerdown",S=>{const A=ka(r);A&&(f=!S.composedPath().includes(A)&&!_(S))},{passive:!0}),Qi(s,"pointerup",S=>{if(S.button===0){const A=S.composedPath();S.composedPath=()=>A,g=s.setTimeout(()=>y(S),50)}},{passive:!0}),d&&Qi(s,"blur",S=>{var A;const P=ka(r);((A=s.document.activeElement)==null?void 0:A.tagName)==="IFRAME"&&!(P!=null&&P.contains(s.document.activeElement))&&e(S)})].filter(Boolean);return()=>w.forEach(S=>S())}const bpe=r=>typeof r=="function"?r:typeof r=="string"?e=>e.key===r:Array.isArray(r)?e=>r.includes(e.key):()=>!0;function xpe(...r){let e,n,s={};r.length===3?(e=r[0],n=r[1],s=r[2]):r.length===2?typeof r[1]=="object"?(e=!0,n=r[0],s=r[1]):(e=r[0],n=r[1]):(e=!0,n=r[0]);const{target:a=eo,eventName:u="keydown",passive:d=!1}=s,f=bpe(e);return Qi(a,u,_=>{f(_)&&n(_)},d)}function YB(r={}){var e;const{window:n=eo}=r,s=(e=r.document)!=null?e:n==null?void 0:n.document,a=_fe(()=>null,()=>s==null?void 0:s.activeElement);return n&&(Qi(n,"blur",u=>{u.relatedTarget===null&&a.trigger()},!0),Qi(n,"focus",a.trigger,!0)),a}function m_(r,e=!1){const n=Tn(),s=()=>n.value=Boolean(r());return s(),Y3(s,e),n}function J0(r,e={}){const{window:n=eo}=e,s=m_(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let a;const u=Tn(!1),d=()=>{!a||("removeEventListener"in a?a.removeEventListener("change",f):a.removeListener(f))},f=()=>{!s.value||(d(),a=n.matchMedia(IB(r).value),u.value=a.matches,"addEventListener"in a?a.addEventListener("change",f):a.addListener(f))};return kh(f),du(()=>d()),u}const wpe={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};var kpe=Object.defineProperty,k9=Object.getOwnPropertySymbols,Cpe=Object.prototype.hasOwnProperty,Spe=Object.prototype.propertyIsEnumerable,C9=(r,e,n)=>e in r?kpe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Epe=(r,e)=>{for(var n in e||(e={}))Cpe.call(e,n)&&C9(r,n,e[n]);if(k9)for(var n of k9(e))Spe.call(e,n)&&C9(r,n,e[n]);return r};function Tpe(r,e={}){function n(f,g){let _=r[f];return g!=null&&(_=yfe(_,g)),typeof _=="number"&&(_=`${_}px`),_}const{window:s=eo}=e;function a(f){return s?s.matchMedia(f).matches:!1}const u=f=>J0(`(min-width: ${n(f)})`,e),d=Object.keys(r).reduce((f,g)=>(Object.defineProperty(f,g,{get:()=>u(g),enumerable:!0,configurable:!0}),f),{});return Epe({greater(f){return J0(`(min-width: ${n(f,.1)})`,e)},greaterOrEqual:u,smaller(f){return J0(`(max-width: ${n(f,-.1)})`,e)},smallerOrEqual(f){return J0(`(max-width: ${n(f)})`,e)},between(f,g){return J0(`(min-width: ${n(f)}) and (max-width: ${n(g,-.1)})`,e)},isGreater(f){return a(`(min-width: ${n(f,.1)})`)},isGreaterOrEqual(f){return a(`(min-width: ${n(f)})`)},isSmaller(f){return a(`(max-width: ${n(f,-.1)})`)},isSmallerOrEqual(f){return a(`(max-width: ${n(f)})`)},isInBetween(f,g){return a(`(min-width: ${n(f)}) and (max-width: ${n(g,-.1)})`)}},d)}function Mpe(r={}){const{navigator:e=_pe,read:n=!1,source:s,copiedDuring:a=1500,legacy:u=!1}=r,d=["copy","cut"],f=m_(()=>e&&"clipboard"in e),g=Ht(()=>f.value||u),_=Tn(""),y=Tn(!1),w=Rfe(()=>y.value=!1,a);function k(){f.value?e.clipboard.readText().then(R=>{_.value=R}):_.value=P()}if(g.value&&n)for(const R of d)Qi(R,k);async function S(R=Wo(s)){g.value&&R!=null&&(f.value?await e.clipboard.writeText(R):A(R),_.value=R,y.value=!0,w.start())}function A(R){const O=document.createElement("textarea");O.value=R!=null?R:"",O.style.position="absolute",O.style.opacity="0",document.body.appendChild(O),O.select(),document.execCommand("copy"),O.remove()}function P(){var R,O,B;return(B=(O=(R=document==null?void 0:document.getSelection)==null?void 0:R.call(document))==null?void 0:O.toString())!=null?B:""}return{isSupported:g,text:_,copied:y,copy:S}}function Ape(r){return JSON.parse(JSON.stringify(r))}const lT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cT="__vueuse_ssr_handlers__";lT[cT]=lT[cT]||{};const Lpe=lT[cT];function jB(r,e){return Lpe[r]||e}function Rpe(r){return r==null?"any":r instanceof Set?"set":r instanceof Map?"map":r instanceof Date?"date":typeof r=="boolean"?"boolean":typeof r=="string"?"string":typeof r=="object"?"object":Number.isNaN(r)?"any":"number"}var Ppe=Object.defineProperty,S9=Object.getOwnPropertySymbols,Ipe=Object.prototype.hasOwnProperty,Dpe=Object.prototype.propertyIsEnumerable,E9=(r,e,n)=>e in r?Ppe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,T9=(r,e)=>{for(var n in e||(e={}))Ipe.call(e,n)&&E9(r,n,e[n]);if(S9)for(var n of S9(e))Dpe.call(e,n)&&E9(r,n,e[n]);return r};const Npe={boolean:{read:r=>r==="true",write:r=>String(r)},object:{read:r=>JSON.parse(r),write:r=>JSON.stringify(r)},number:{read:r=>Number.parseFloat(r),write:r=>String(r)},any:{read:r=>r,write:r=>String(r)},string:{read:r=>r,write:r=>String(r)},map:{read:r=>new Map(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r.entries()))},set:{read:r=>new Set(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r))},date:{read:r=>new Date(r),write:r=>r.toISOString()}};function Al(r,e,n,s={}){var a;const{flush:u="pre",deep:d=!0,listenToStorageChanges:f=!0,writeDefaults:g=!0,mergeDefaults:_=!1,shallow:y,window:w=eo,eventFilter:k,onError:S=X=>{console.error(X)}}=s,A=(y?hu:Tn)(e);if(!n)try{n=jB("getDefaultStorage",()=>{var X;return(X=eo)==null?void 0:X.localStorage})()}catch(X){S(X)}if(!n)return A;const P=Wo(e),R=Rpe(P),O=(a=s.serializer)!=null?a:Npe[R],{pause:B,resume:N}=Ufe(A,()=>V(A.value),{flush:u,deep:d,eventFilter:k});return w&&f&&Qi(w,"storage",Y),Y(),A;function V(X){try{if(X==null)n.removeItem(r);else{const $=O.write(X),ee=n.getItem(r);ee!==$&&(n.setItem(r,$),w&&(w==null||w.dispatchEvent(new StorageEvent("storage",{key:r,oldValue:ee,newValue:$,storageArea:n}))))}}catch($){S($)}}function U(X){const $=X?X.newValue:n.getItem(r);if($==null)return g&&P!==null&&n.setItem(r,O.write(P)),P;if(!X&&_){const ee=O.read($);return Wy(_)?_(ee,P):R==="object"&&!Array.isArray(ee)?T9(T9({},P),ee):ee}else return typeof $!="string"?$:O.read($)}function Y(X){if(!(X&&X.storageArea!==n)){if(X&&X.key==null){A.value=P;return}if(!(X&&X.key!==r)){B();try{A.value=U(X)}catch($){S($)}finally{X?ko(N):N()}}}}}function XM(r){return J0("(prefers-color-scheme: dark)",r)}var Ope=Object.defineProperty,M9=Object.getOwnPropertySymbols,Fpe=Object.prototype.hasOwnProperty,Bpe=Object.prototype.propertyIsEnumerable,A9=(r,e,n)=>e in r?Ope(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Vpe=(r,e)=>{for(var n in e||(e={}))Fpe.call(e,n)&&A9(r,n,e[n]);if(M9)for(var n of M9(e))Bpe.call(e,n)&&A9(r,n,e[n]);return r};function Wpe(r={}){const{selector:e="html",attribute:n="class",initialValue:s="auto",window:a=eo,storage:u,storageKey:d="vueuse-color-scheme",listenToStorageChanges:f=!0,storageRef:g,emitAuto:_}=r,y=Vpe({auto:"",light:"light",dark:"dark"},r.modes||{}),w=XM({window:a}),k=Ht(()=>w.value?"dark":"light"),S=g||(d==null?Tn(s):Al(d,s,u,{window:a,listenToStorageChanges:f})),A=Ht({get(){return S.value==="auto"&&!_?k.value:S.value},set(B){S.value=B}}),P=jB("updateHTMLAttrs",(B,N,V)=>{const U=a==null?void 0:a.document.querySelector(B);if(!!U)if(N==="class"){const Y=V.split(/\s/g);Object.values(y).flatMap(X=>(X||"").split(/\s/g)).filter(Boolean).forEach(X=>{Y.includes(X)?U.classList.add(X):U.classList.remove(X)})}else U.setAttribute(N,V)});function R(B){var N;const V=B==="auto"?k.value:B;P(e,n,(N=y[V])!=null?N:V)}function O(B){r.onChanged?r.onChanged(B,R):R(B)}return Ni(A,O,{flush:"post",immediate:!0}),_&&Ni(k,()=>O(A.value),{flush:"post"}),Y3(()=>O(A.value)),A}var zpe=Object.defineProperty,Upe=Object.defineProperties,Gpe=Object.getOwnPropertyDescriptors,L9=Object.getOwnPropertySymbols,Hpe=Object.prototype.hasOwnProperty,Ype=Object.prototype.propertyIsEnumerable,R9=(r,e,n)=>e in r?zpe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,jpe=(r,e)=>{for(var n in e||(e={}))Hpe.call(e,n)&&R9(r,n,e[n]);if(L9)for(var n of L9(e))Ype.call(e,n)&&R9(r,n,e[n]);return r},$pe=(r,e)=>Upe(r,Gpe(e));function qpe(r={}){const{valueDark:e="dark",valueLight:n="",window:s=eo}=r,a=Wpe($pe(jpe({},r),{onChanged:(f,g)=>{var _;r.onChanged?(_=r.onChanged)==null||_.call(r,f==="dark"):g(f)},modes:{dark:e,light:n}})),u=XM({window:s});return Ht({get(){return a.value==="dark"},set(f){f===u.value?a.value="auto":a.value=f?"dark":"light"}})}var Xpe=Object.defineProperty,Zpe=Object.defineProperties,Kpe=Object.getOwnPropertyDescriptors,P9=Object.getOwnPropertySymbols,Jpe=Object.prototype.hasOwnProperty,Qpe=Object.prototype.propertyIsEnumerable,I9=(r,e,n)=>e in r?Xpe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,eme=(r,e)=>{for(var n in e||(e={}))Jpe.call(e,n)&&I9(r,n,e[n]);if(P9)for(var n of P9(e))Qpe.call(e,n)&&I9(r,n,e[n]);return r},tme=(r,e)=>Zpe(r,Kpe(e));function dDe(r,e={}){var n,s,a;const u=(n=e.draggingElement)!=null?n:eo,d=(s=e.handle)!=null?s:r,f=Tn((a=Wo(e.initialValue))!=null?a:{x:0,y:0}),g=Tn(),_=A=>e.pointerTypes?e.pointerTypes.includes(A.pointerType):!0,y=A=>{Wo(e.preventDefault)&&A.preventDefault(),Wo(e.stopPropagation)&&A.stopPropagation()},w=A=>{var P;if(!_(A)||Wo(e.exact)&&A.target!==Wo(r))return;const R=Wo(r).getBoundingClientRect(),O={x:A.clientX-R.left,y:A.clientY-R.top};((P=e.onStart)==null?void 0:P.call(e,O,A))!==!1&&(g.value=O,y(A))},k=A=>{var P;!_(A)||!g.value||(f.value={x:A.clientX-g.value.x,y:A.clientY-g.value.y},(P=e.onMove)==null||P.call(e,f.value,A),y(A))},S=A=>{var P;!_(A)||!g.value||(g.value=void 0,(P=e.onEnd)==null||P.call(e,f.value,A),y(A))};return _c&&(Qi(d,"pointerdown",w,!0),Qi(u,"pointermove",k,!0),Qi(u,"pointerup",S,!0)),tme(eme({},Mfe(f)),{position:f,isDragging:Ht(()=>!!g.value),style:Ht(()=>`left:${f.value.x}px;top:${f.value.y}px;`)})}var D9=Object.getOwnPropertySymbols,nme=Object.prototype.hasOwnProperty,ime=Object.prototype.propertyIsEnumerable,rme=(r,e)=>{var n={};for(var s in r)nme.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&D9)for(var s of D9(r))e.indexOf(s)<0&&ime.call(r,s)&&(n[s]=r[s]);return n};function sme(r,e,n={}){const s=n,{window:a=eo}=s,u=rme(s,["window"]);let d;const f=m_(()=>a&&"ResizeObserver"in a),g=()=>{d&&(d.disconnect(),d=void 0)},_=Ni(()=>ka(r),w=>{g(),f.value&&a&&w&&(d=new ResizeObserver(e),d.observe(w,u))},{immediate:!0,flush:"post"}),y=()=>{g(),_()};return du(y),{isSupported:f,stop:y}}function ome(r,e={}){const{immediate:n=!0,window:s=eo}=e,a=Tn(!1);let u=0,d=null;function f(y){if(!a.value||!s)return;const w=y-u;r({delta:w,timestamp:y}),u=y,d=s.requestAnimationFrame(f)}function g(){!a.value&&s&&(a.value=!0,d=s.requestAnimationFrame(f))}function _(){a.value=!1,d!=null&&s&&(s.cancelAnimationFrame(d),d=null)}return n&&g(),du(_),{isActive:su(a),pause:_,resume:g}}function ame(r,e={width:0,height:0},n={}){const{window:s=eo,box:a="content-box"}=n,u=Ht(()=>{var g,_;return(_=(g=ka(r))==null?void 0:g.namespaceURI)==null?void 0:_.includes("svg")}),d=Tn(e.width),f=Tn(e.height);return sme(r,([g])=>{const _=a==="border-box"?g.borderBoxSize:a==="content-box"?g.contentBoxSize:g.devicePixelContentBoxSize;if(s&&u.value){const y=ka(r);if(y){const w=s.getComputedStyle(y);d.value=parseFloat(w.width),f.value=parseFloat(w.height)}}else if(_){const y=Array.isArray(_)?_:[_];d.value=y.reduce((w,{inlineSize:k})=>w+k,0),f.value=y.reduce((w,{blockSize:k})=>w+k,0)}else d.value=g.contentRect.width,f.value=g.contentRect.height},n),Ni(()=>ka(r),g=>{d.value=g?e.width:0,f.value=g?e.height:0}),{width:d,height:f}}function lme(r,e={}){const{initialValue:n=!1}=e,s=YB(e),a=Ht(()=>ka(r)),u=Ht({get(){return nT(s.value)&&nT(a.value)&&s.value===a.value},set(d){var f,g;!d&&u.value&&((f=a.value)==null||f.blur()),d&&!u.value&&((g=a.value)==null||g.focus())}});return Ni(a,()=>{u.value=n},{immediate:!0,flush:"post"}),{focused:u}}const N9=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];function cme(r,e={}){const{document:n=GB,autoExit:s=!1}=e,a=r||(n==null?void 0:n.querySelector("html")),u=Tn(!1);let d=N9[0];const f=m_(()=>{if(n){for(const P of N9)if(P[1]in n)return d=P,!0}else return!1;return!1}),[g,_,y,,w]=d;async function k(){!f.value||(n!=null&&n[y]&&await n[_](),u.value=!1)}async function S(){if(!f.value)return;await k();const P=ka(a);P&&(await P[g](),u.value=!0)}async function A(){u.value?await k():await S()}return n&&Qi(n,w,()=>{u.value=!!(n!=null&&n[y])},!1),s&&du(k),{isSupported:f,isFullscreen:u,enter:S,exit:k,toggle:A}}function ume(r,e,n={}){const{root:s,rootMargin:a="0px",threshold:u=.1,window:d=eo}=n,f=m_(()=>d&&"IntersectionObserver"in d);let g=yy;const _=f.value?Ni(()=>({el:ka(r),root:ka(s)}),({el:w,root:k})=>{if(g(),!w)return;const S=new IntersectionObserver(e,{root:k,rootMargin:a,threshold:u});S.observe(w),g=()=>{S.disconnect(),g=yy}},{immediate:!0,flush:"post"}):yy,y=()=>{g(),_()};return du(y),{isSupported:f,stop:y}}const hme={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function dme(r={}){const{reactive:e=!1,target:n=eo,aliasMap:s=hme,passive:a=!0,onEventFired:u=yy}=r,d=Yr(new Set),f={toJSON(){return{}},current:d},g=e?Yr(f):f,_=new Set,y=new Set;function w(P,R){P in g&&(e?g[P]=R:g[P].value=R)}function k(){d.clear();for(const P of y)w(P,!1)}function S(P,R){var O,B;const N=(O=P.key)==null?void 0:O.toLowerCase(),U=[(B=P.code)==null?void 0:B.toLowerCase(),N].filter(Boolean);N&&(R?d.add(N):d.delete(N));for(const Y of U)y.add(Y),w(Y,R);N==="meta"&&!R?(_.forEach(Y=>{d.delete(Y),w(Y,!1)}),_.clear()):typeof P.getModifierState=="function"&&P.getModifierState("Meta")&&R&&[...d,...U].forEach(Y=>_.add(Y))}Qi(n,"keydown",P=>(S(P,!0),u(P)),{passive:a}),Qi(n,"keyup",P=>(S(P,!1),u(P)),{passive:a}),Qi("blur",k,{passive:!0}),Qi("focus",k,{passive:!0});const A=new Proxy(g,{get(P,R,O){if(typeof R!="string")return Reflect.get(P,R,O);if(R=R.toLowerCase(),R in s&&(R=s[R]),!(R in g))if(/[+_-]/.test(R)){const N=R.split(/[+_-]/g).map(V=>V.trim());g[R]=Ht(()=>N.every(V=>ft(A[V])))}else g[R]=Tn(!1);const B=Reflect.get(P,R,O);return e?ft(B):B}});return A}function fDe(r={}){const{type:e="page",touch:n=!0,resetOnTouchEnds:s=!1,initialValue:a={x:0,y:0},window:u=eo,eventFilter:d}=r,f=Tn(a.x),g=Tn(a.y),_=Tn(null),y=P=>{e==="page"?(f.value=P.pageX,g.value=P.pageY):e==="client"?(f.value=P.clientX,g.value=P.clientY):e==="movement"&&(f.value=P.movementX,g.value=P.movementY),_.value="mouse"},w=()=>{f.value=a.x,g.value=a.y},k=P=>{if(P.touches.length>0){const R=P.touches[0];e==="page"?(f.value=R.pageX,g.value=R.pageY):e==="client"&&(f.value=R.clientX,g.value=R.clientY),_.value="touch"}},S=P=>d===void 0?y(P):d(()=>y(P),{}),A=P=>d===void 0?k(P):d(()=>k(P),{});return u&&(Qi(u,"mousemove",S,{passive:!0}),Qi(u,"dragover",S,{passive:!0}),n&&e!=="movement"&&(Qi(u,"touchstart",A,{passive:!0}),Qi(u,"touchmove",A,{passive:!0}),s&&Qi(u,"touchend",w,{passive:!0}))),{x:f,y:g,sourceType:_}}var mh;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(mh||(mh={}));function fme(r,e={}){const n=IB(r),{threshold:s=50,onSwipe:a,onSwipeEnd:u,onSwipeStart:d}=e,f=Yr({x:0,y:0}),g=(Y,X)=>{f.x=Y,f.y=X},_=Yr({x:0,y:0}),y=(Y,X)=>{_.x=Y,_.y=X},w=Ht(()=>f.x-_.x),k=Ht(()=>f.y-_.y),{max:S,abs:A}=Math,P=Ht(()=>S(A(w.value),A(k.value))>=s),R=Tn(!1),O=Tn(!1),B=Ht(()=>P.value?A(w.value)>A(k.value)?w.value>0?mh.LEFT:mh.RIGHT:k.value>0?mh.UP:mh.DOWN:mh.NONE),N=Y=>{var X,$,ee;const ue=Y.buttons===0,Te=Y.buttons===1;return(ee=($=(X=e.pointerTypes)==null?void 0:X.includes(Y.pointerType))!=null?$:ue||Te)!=null?ee:!0},V=[Qi(r,"pointerdown",Y=>{var X,$;if(!N(Y))return;O.value=!0,($=(X=n.value)==null?void 0:X.style)==null||$.setProperty("touch-action","none");const ee=Y.target;ee==null||ee.setPointerCapture(Y.pointerId);const{clientX:ue,clientY:Te}=Y;g(ue,Te),y(ue,Te),d==null||d(Y)}),Qi(r,"pointermove",Y=>{if(!N(Y)||!O.value)return;const{clientX:X,clientY:$}=Y;y(X,$),!R.value&&P.value&&(R.value=!0),R.value&&(a==null||a(Y))}),Qi(r,"pointerup",Y=>{var X,$;!N(Y)||(R.value&&(u==null||u(Y,B.value)),O.value=!1,R.value=!1,($=(X=n.value)==null?void 0:X.style)==null||$.setProperty("touch-action","initial"))})],U=()=>V.forEach(Y=>Y());return{isSwiping:su(R),direction:su(B),posStart:su(f),posEnd:su(_),distanceX:w,distanceY:k,stop:U}}let pme=0;function pDe(r,e={}){const n=Tn(!1),{document:s=GB,immediate:a=!0,manual:u=!1,id:d=`vueuse_styletag_${++pme}`}=e,f=Tn(r);let g=()=>{};const _=()=>{if(!s)return;const w=s.getElementById(d)||s.createElement("style");w.isConnected||(w.type="text/css",w.id=d,e.media&&(w.media=e.media),s.head.appendChild(w)),!n.value&&(g=Ni(f,k=>{w.textContent=k},{immediate:!0}),n.value=!0)},y=()=>{!s||!n.value||(g(),s.head.removeChild(s.getElementById(d)),n.value=!1)};return a&&!u&&Y3(_),u||du(y),{id:d,css:f,unload:y,load:_,isLoaded:su(n)}}var mme=Object.defineProperty,O9=Object.getOwnPropertySymbols,gme=Object.prototype.hasOwnProperty,vme=Object.prototype.propertyIsEnumerable,F9=(r,e,n)=>e in r?mme(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,yme=(r,e)=>{for(var n in e||(e={}))gme.call(e,n)&&F9(r,n,e[n]);if(O9)for(var n of O9(e))vme.call(e,n)&&F9(r,n,e[n]);return r};function mDe(r={}){const{controls:e=!1,offset:n=0,immediate:s=!0,interval:a="requestAnimationFrame",callback:u}=r,d=Tn(rT()+n),f=()=>d.value=rT()+n,g=u?()=>{f(),u(d.value)}:f,_=a==="requestAnimationFrame"?ome(g,{immediate:s}):Lfe(g,a,{immediate:s});return e?yme({timestamp:d},_):d}var _me=Object.defineProperty,B9=Object.getOwnPropertySymbols,bme=Object.prototype.hasOwnProperty,xme=Object.prototype.propertyIsEnumerable,V9=(r,e,n)=>e in r?_me(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,wme=(r,e)=>{for(var n in e||(e={}))bme.call(e,n)&&V9(r,n,e[n]);if(B9)for(var n of B9(e))xme.call(e,n)&&V9(r,n,e[n]);return r};const kme={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};wme({linear:vfe},kme);function ou(r,e,n,s={}){var a,u,d;const{clone:f=!1,passive:g=!1,eventName:_,deep:y=!1,defaultValue:w}=s,k=pu(),S=n||(k==null?void 0:k.emit)||((a=k==null?void 0:k.$emit)==null?void 0:a.bind(k))||((d=(u=k==null?void 0:k.proxy)==null?void 0:u.$emit)==null?void 0:d.bind(k==null?void 0:k.proxy));let A=_;e||(e="modelValue"),A=_||A||`update:${e.toString()}`;const P=O=>f?Wy(f)?f(O):Ape(O):O,R=()=>nT(r[e])?P(r[e]):w;if(g){const O=R(),B=Tn(O);return Ni(()=>r[e],N=>B.value=P(N)),Ni(B,N=>{(N!==r[e]||y)&&S(A,N)},{deep:y}),B}else return Ht({get(){return R()},set(O){S(A,O)}})}function gDe({window:r=eo}={}){if(!r)return Tn(!1);const e=Tn(r.document.hasFocus());return Qi(r,"blur",()=>{e.value=!1}),Qi(r,"focus",()=>{e.value=!0}),e}function ZM(r={}){const{window:e=eo,initialWidth:n=1/0,initialHeight:s=1/0,listenOrientation:a=!0,includeScrollbar:u=!0}=r,d=Tn(n),f=Tn(s),g=()=>{e&&(u?(d.value=e.innerWidth,f.value=e.innerHeight):(d.value=e.document.documentElement.clientWidth,f.value=e.document.documentElement.clientHeight))};return g(),Y3(g),Qi("resize",g,{passive:!0}),a&&Qi("orientationchange",g,{passive:!0}),{width:d,height:f}}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Q0=typeof window<"u";function Cme(r){return r.__esModule||r[Symbol.toStringTag]==="Module"}const Mr=Object.assign;function BS(r,e){const n={};for(const s in e){const a=e[s];n[s]=bc(a)?a.map(r):r(a)}return n}const xy=()=>{},bc=Array.isArray,Sme=/\/$/,Eme=r=>r.replace(Sme,"");function VS(r,e,n="/"){let s,a={},u="",d="";const f=e.indexOf("#");let g=e.indexOf("?");return f<g&&f>=0&&(g=-1),g>-1&&(s=e.slice(0,g),u=e.slice(g+1,f>-1?f:e.length),a=r(u)),f>-1&&(s=s||e.slice(0,f),d=e.slice(f,e.length)),s=Lme(s!=null?s:e,n),{fullPath:s+(u&&"?")+u+d,path:s,query:a,hash:d}}function Tme(r,e){const n=e.query?r(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function W9(r,e){return!e||!r.toLowerCase().startsWith(e.toLowerCase())?r:r.slice(e.length)||"/"}function Mme(r,e,n){const s=e.matched.length-1,a=n.matched.length-1;return s>-1&&s===a&&xg(e.matched[s],n.matched[a])&&$B(e.params,n.params)&&r(e.query)===r(n.query)&&e.hash===n.hash}function xg(r,e){return(r.aliasOf||r)===(e.aliasOf||e)}function $B(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const n in r)if(!Ame(r[n],e[n]))return!1;return!0}function Ame(r,e){return bc(r)?z9(r,e):bc(e)?z9(e,r):r===e}function z9(r,e){return bc(e)?r.length===e.length&&r.every((n,s)=>n===e[s]):r.length===1&&r[0]===e}function Lme(r,e){if(r.startsWith("/"))return r;if(!r)return e;const n=e.split("/"),s=r.split("/");let a=n.length-1,u,d;for(u=0;u<s.length;u++)if(d=s[u],d!==".")if(d==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+s.slice(u-(u===s.length?1:0)).join("/")}var zy;(function(r){r.pop="pop",r.push="push"})(zy||(zy={}));var wy;(function(r){r.back="back",r.forward="forward",r.unknown=""})(wy||(wy={}));function Rme(r){if(!r)if(Q0){const e=document.querySelector("base");r=e&&e.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),Eme(r)}const Pme=/^[^#]+#/;function Ime(r,e){return r.replace(Pme,"#")+e}function Dme(r,e){const n=document.documentElement.getBoundingClientRect(),s=r.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const j3=()=>({left:window.pageXOffset,top:window.pageYOffset});function Nme(r){let e;if("el"in r){const n=r.el,s=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;e=Dme(a,r)}else e=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function U9(r,e){return(history.state?history.state.position-e:-1)+r}const uT=new Map;function Ome(r,e){uT.set(r,e)}function Fme(r){const e=uT.get(r);return uT.delete(r),e}let Bme=()=>location.protocol+"//"+location.host;function qB(r,e){const{pathname:n,search:s,hash:a}=e,u=r.indexOf("#");if(u>-1){let f=a.includes(r.slice(u))?r.slice(u).length:1,g=a.slice(f);return g[0]!=="/"&&(g="/"+g),W9(g,"")}return W9(n,r)+s+a}function Vme(r,e,n,s){let a=[],u=[],d=null;const f=({state:k})=>{const S=qB(r,location),A=n.value,P=e.value;let R=0;if(k){if(n.value=S,e.value=k,d&&d===A){d=null;return}R=P?k.position-P.position:0}else s(S);a.forEach(O=>{O(n.value,A,{delta:R,type:zy.pop,direction:R?R>0?wy.forward:wy.back:wy.unknown})})};function g(){d=n.value}function _(k){a.push(k);const S=()=>{const A=a.indexOf(k);A>-1&&a.splice(A,1)};return u.push(S),S}function y(){const{history:k}=window;!k.state||k.replaceState(Mr({},k.state,{scroll:j3()}),"")}function w(){for(const k of u)k();u=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",y)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",y),{pauseListeners:g,listen:_,destroy:w}}function G9(r,e,n,s=!1,a=!1){return{back:r,current:e,forward:n,replaced:s,position:window.history.length,scroll:a?j3():null}}function Wme(r){const{history:e,location:n}=window,s={value:qB(r,n)},a={value:e.state};a.value||u(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function u(g,_,y){const w=r.indexOf("#"),k=w>-1?(n.host&&document.querySelector("base")?r:r.slice(w))+g:Bme()+r+g;try{e[y?"replaceState":"pushState"](_,"",k),a.value=_}catch(S){console.error(S),n[y?"replace":"assign"](k)}}function d(g,_){const y=Mr({},e.state,G9(a.value.back,g,a.value.forward,!0),_,{position:a.value.position});u(g,y,!0),s.value=g}function f(g,_){const y=Mr({},a.value,e.state,{forward:g,scroll:j3()});u(y.current,y,!0);const w=Mr({},G9(s.value,g,null),{position:y.position+1},_);u(g,w,!1),s.value=g}return{location:s,state:a,push:f,replace:d}}function zme(r){r=Rme(r);const e=Wme(r),n=Vme(r,e.state,e.location,e.replace);function s(u,d=!0){d||n.pauseListeners(),history.go(u)}const a=Mr({location:"",base:r,go:s,createHref:Ime.bind(null,r)},e,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>e.state.value}),a}function Ume(r){return typeof r=="string"||r&&typeof r=="object"}function XB(r){return typeof r=="string"||typeof r=="symbol"}const xd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ZB=Symbol("");var H9;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(H9||(H9={}));function wg(r,e){return Mr(new Error,{type:r,[ZB]:!0},e)}function sh(r,e){return r instanceof Error&&ZB in r&&(e==null||!!(r.type&e))}const Y9="[^/]+?",Gme={sensitive:!1,strict:!1,start:!0,end:!0},Hme=/[.+*?^${}()[\]/\\]/g;function Yme(r,e){const n=Mr({},Gme,e),s=[];let a=n.start?"^":"";const u=[];for(const _ of r){const y=_.length?[]:[90];n.strict&&!_.length&&(a+="/");for(let w=0;w<_.length;w++){const k=_[w];let S=40+(n.sensitive?.25:0);if(k.type===0)w||(a+="/"),a+=k.value.replace(Hme,"\\$&"),S+=40;else if(k.type===1){const{value:A,repeatable:P,optional:R,regexp:O}=k;u.push({name:A,repeatable:P,optional:R});const B=O||Y9;if(B!==Y9){S+=10;try{new RegExp(`(${B})`)}catch(V){throw new Error(`Invalid custom RegExp for param "${A}" (${B}): `+V.message)}}let N=P?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;w||(N=R&&_.length<2?`(?:/${N})`:"/"+N),R&&(N+="?"),a+=N,S+=20,R&&(S+=-8),P&&(S+=-20),B===".*"&&(S+=-50)}y.push(S)}s.push(y)}if(n.strict&&n.end){const _=s.length-1;s[_][s[_].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&(a+="(?:/|$)");const d=new RegExp(a,n.sensitive?"":"i");function f(_){const y=_.match(d),w={};if(!y)return null;for(let k=1;k<y.length;k++){const S=y[k]||"",A=u[k-1];w[A.name]=S&&A.repeatable?S.split("/"):S}return w}function g(_){let y="",w=!1;for(const k of r){(!w||!y.endsWith("/"))&&(y+="/"),w=!1;for(const S of k)if(S.type===0)y+=S.value;else if(S.type===1){const{value:A,repeatable:P,optional:R}=S,O=A in _?_[A]:"";if(bc(O)&&!P)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const B=bc(O)?O.join("/"):O;if(!B)if(R)k.length<2&&(y.endsWith("/")?y=y.slice(0,-1):w=!0);else throw new Error(`Missing required param "${A}"`);y+=B}}return y||"/"}return{re:d,score:s,keys:u,parse:f,stringify:g}}function jme(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=e[n]-r[n];if(s)return s;n++}return r.length<e.length?r.length===1&&r[0]===40+40?-1:1:r.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function $me(r,e){let n=0;const s=r.score,a=e.score;for(;n<s.length&&n<a.length;){const u=jme(s[n],a[n]);if(u)return u;n++}if(Math.abs(a.length-s.length)===1){if(j9(s))return 1;if(j9(a))return-1}return a.length-s.length}function j9(r){const e=r[r.length-1];return r.length>0&&e[e.length-1]<0}const qme={type:0,value:""},Xme=/[a-zA-Z0-9_]/;function Zme(r){if(!r)return[[]];if(r==="/")return[[qme]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function e(S){throw new Error(`ERR (${n})/"${_}": ${S}`)}let n=0,s=n;const a=[];let u;function d(){u&&a.push(u),u=[]}let f=0,g,_="",y="";function w(){!_||(n===0?u.push({type:0,value:_}):n===1||n===2||n===3?(u.length>1&&(g==="*"||g==="+")&&e(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:_,regexp:y,repeatable:g==="*"||g==="+",optional:g==="*"||g==="?"})):e("Invalid state to consume buffer"),_="")}function k(){_+=g}for(;f<r.length;){if(g=r[f++],g==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:g==="/"?(_&&w(),d()):g===":"?(w(),n=1):k();break;case 4:k(),n=s;break;case 1:g==="("?n=2:Xme.test(g)?k():(w(),n=0,g!=="*"&&g!=="?"&&g!=="+"&&f--);break;case 2:g===")"?y[y.length-1]=="\\"?y=y.slice(0,-1)+g:n=3:y+=g;break;case 3:w(),n=0,g!=="*"&&g!=="?"&&g!=="+"&&f--,y="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${_}"`),w(),d(),a}function Kme(r,e,n){const s=Yme(Zme(r.path),n),a=Mr(s,{record:r,parent:e,children:[],alias:[]});return e&&!a.record.aliasOf==!e.record.aliasOf&&e.children.push(a),a}function Jme(r,e){const n=[],s=new Map;e=X9({strict:!1,end:!0,sensitive:!1},e);function a(y){return s.get(y)}function u(y,w,k){const S=!k,A=Qme(y);A.aliasOf=k&&k.record;const P=X9(e,y),R=[A];if("alias"in y){const N=typeof y.alias=="string"?[y.alias]:y.alias;for(const V of N)R.push(Mr({},A,{components:k?k.record.components:A.components,path:V,aliasOf:k?k.record:A}))}let O,B;for(const N of R){const{path:V}=N;if(w&&V[0]!=="/"){const U=w.record.path,Y=U[U.length-1]==="/"?"":"/";N.path=w.record.path+(V&&Y+V)}if(O=Kme(N,w,P),k?k.alias.push(O):(B=B||O,B!==O&&B.alias.push(O),S&&y.name&&!q9(O)&&d(y.name)),A.children){const U=A.children;for(let Y=0;Y<U.length;Y++)u(U[Y],O,k&&k.children[Y])}k=k||O,(O.record.components&&Object.keys(O.record.components).length||O.record.name||O.record.redirect)&&g(O)}return B?()=>{d(B)}:xy}function d(y){if(XB(y)){const w=s.get(y);w&&(s.delete(y),n.splice(n.indexOf(w),1),w.children.forEach(d),w.alias.forEach(d))}else{const w=n.indexOf(y);w>-1&&(n.splice(w,1),y.record.name&&s.delete(y.record.name),y.children.forEach(d),y.alias.forEach(d))}}function f(){return n}function g(y){let w=0;for(;w<n.length&&$me(y,n[w])>=0&&(y.record.path!==n[w].record.path||!KB(y,n[w]));)w++;n.splice(w,0,y),y.record.name&&!q9(y)&&s.set(y.record.name,y)}function _(y,w){let k,S={},A,P;if("name"in y&&y.name){if(k=s.get(y.name),!k)throw wg(1,{location:y});P=k.record.name,S=Mr($9(w.params,k.keys.filter(B=>!B.optional).map(B=>B.name)),y.params&&$9(y.params,k.keys.map(B=>B.name))),A=k.stringify(S)}else if("path"in y)A=y.path,k=n.find(B=>B.re.test(A)),k&&(S=k.parse(A),P=k.record.name);else{if(k=w.name?s.get(w.name):n.find(B=>B.re.test(w.path)),!k)throw wg(1,{location:y,currentLocation:w});P=k.record.name,S=Mr({},w.params,y.params),A=k.stringify(S)}const R=[];let O=k;for(;O;)R.unshift(O.record),O=O.parent;return{name:P,path:A,params:S,matched:R,meta:t0e(R)}}return r.forEach(y=>u(y)),{addRoute:u,resolve:_,removeRoute:d,getRoutes:f,getRecordMatcher:a}}function $9(r,e){const n={};for(const s of e)s in r&&(n[s]=r[s]);return n}function Qme(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:e0e(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}}}function e0e(r){const e={},n=r.props||!1;if("component"in r)e.default=n;else for(const s in r.components)e[s]=typeof n=="boolean"?n:n[s];return e}function q9(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function t0e(r){return r.reduce((e,n)=>Mr(e,n.meta),{})}function X9(r,e){const n={};for(const s in r)n[s]=s in e?e[s]:r[s];return n}function KB(r,e){return e.children.some(n=>n===r||KB(r,n))}const JB=/#/g,n0e=/&/g,i0e=/\//g,r0e=/=/g,s0e=/\?/g,QB=/\+/g,o0e=/%5B/g,a0e=/%5D/g,eV=/%5E/g,l0e=/%60/g,tV=/%7B/g,c0e=/%7C/g,nV=/%7D/g,u0e=/%20/g;function KM(r){return encodeURI(""+r).replace(c0e,"|").replace(o0e,"[").replace(a0e,"]")}function h0e(r){return KM(r).replace(tV,"{").replace(nV,"}").replace(eV,"^")}function hT(r){return KM(r).replace(QB,"%2B").replace(u0e,"+").replace(JB,"%23").replace(n0e,"%26").replace(l0e,"`").replace(tV,"{").replace(nV,"}").replace(eV,"^")}function d0e(r){return hT(r).replace(r0e,"%3D")}function f0e(r){return KM(r).replace(JB,"%23").replace(s0e,"%3F")}function p0e(r){return r==null?"":f0e(r).replace(i0e,"%2F")}function p3(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function m0e(r){const e={};if(r===""||r==="?")return e;const s=(r[0]==="?"?r.slice(1):r).split("&");for(let a=0;a<s.length;++a){const u=s[a].replace(QB," "),d=u.indexOf("="),f=p3(d<0?u:u.slice(0,d)),g=d<0?null:p3(u.slice(d+1));if(f in e){let _=e[f];bc(_)||(_=e[f]=[_]),_.push(g)}else e[f]=g}return e}function Z9(r){let e="";for(let n in r){const s=r[n];if(n=d0e(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(bc(s)?s.map(u=>u&&hT(u)):[s&&hT(s)]).forEach(u=>{u!==void 0&&(e+=(e.length?"&":"")+n,u!=null&&(e+="="+u))})}return e}function g0e(r){const e={};for(const n in r){const s=r[n];s!==void 0&&(e[n]=bc(s)?s.map(a=>a==null?null:""+a):s==null?s:""+s)}return e}const v0e=Symbol(""),K9=Symbol(""),JM=Symbol(""),iV=Symbol(""),dT=Symbol("");function $v(){let r=[];function e(s){return r.push(s),()=>{const a=r.indexOf(s);a>-1&&r.splice(a,1)}}function n(){r=[]}return{add:e,list:()=>r,reset:n}}function Rd(r,e,n,s,a){const u=s&&(s.enterCallbacks[a]=s.enterCallbacks[a]||[]);return()=>new Promise((d,f)=>{const g=w=>{w===!1?f(wg(4,{from:n,to:e})):w instanceof Error?f(w):Ume(w)?f(wg(2,{from:e,to:w})):(u&&s.enterCallbacks[a]===u&&typeof w=="function"&&u.push(w),d())},_=r.call(s&&s.instances[a],e,n,g);let y=Promise.resolve(_);r.length<3&&(y=y.then(g)),y.catch(w=>f(w))})}function WS(r,e,n,s){const a=[];for(const u of r)for(const d in u.components){let f=u.components[d];if(!(e!=="beforeRouteEnter"&&!u.instances[d]))if(y0e(f)){const _=(f.__vccOpts||f)[e];_&&a.push(Rd(_,n,s,u,d))}else{let g=f();a.push(()=>g.then(_=>{if(!_)return Promise.reject(new Error(`Couldn't resolve component "${d}" at "${u.path}"`));const y=Cme(_)?_.default:_;u.components[d]=y;const k=(y.__vccOpts||y)[e];return k&&Rd(k,n,s,u,d)()}))}}return a}function y0e(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function J9(r){const e=Dn(JM),n=Dn(iV),s=Ht(()=>e.resolve(ft(r.to))),a=Ht(()=>{const{matched:g}=s.value,{length:_}=g,y=g[_-1],w=n.matched;if(!y||!w.length)return-1;const k=w.findIndex(xg.bind(null,y));if(k>-1)return k;const S=Q9(g[_-2]);return _>1&&Q9(y)===S&&w[w.length-1].path!==S?w.findIndex(xg.bind(null,g[_-2])):k}),u=Ht(()=>a.value>-1&&w0e(n.params,s.value.params)),d=Ht(()=>a.value>-1&&a.value===n.matched.length-1&&$B(n.params,s.value.params));function f(g={}){return x0e(g)?e[ft(r.replace)?"replace":"push"](ft(r.to)).catch(xy):Promise.resolve()}return{route:s,href:Ht(()=>s.value.href),isActive:u,isExactActive:d,navigate:f}}const _0e=yi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:J9,setup(r,{slots:e}){const n=Yr(J9(r)),{options:s}=Dn(JM),a=Ht(()=>({[eN(r.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[eN(r.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const u=e.default&&e.default(n);return r.custom?u:po("a",{"aria-current":n.isExactActive?r.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},u)}}}),b0e=_0e;function x0e(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const e=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return r.preventDefault&&r.preventDefault(),!0}}function w0e(r,e){for(const n in e){const s=e[n],a=r[n];if(typeof s=="string"){if(s!==a)return!1}else if(!bc(a)||a.length!==s.length||s.some((u,d)=>u!==a[d]))return!1}return!0}function Q9(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const eN=(r,e,n)=>r!=null?r:e!=null?e:n,k0e=yi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:e,slots:n}){const s=Dn(dT),a=Ht(()=>r.route||s.value),u=Dn(K9,0),d=Ht(()=>{let _=ft(u);const{matched:y}=a.value;let w;for(;(w=y[_])&&!w.components;)_++;return _}),f=Ht(()=>a.value.matched[d.value]);wa(K9,Ht(()=>d.value+1)),wa(v0e,f),wa(dT,a);const g=Tn();return Ni(()=>[g.value,f.value,r.name],([_,y,w],[k,S,A])=>{y&&(y.instances[w]=_,S&&S!==y&&_&&_===k&&(y.leaveGuards.size||(y.leaveGuards=S.leaveGuards),y.updateGuards.size||(y.updateGuards=S.updateGuards))),_&&y&&(!S||!xg(y,S)||!k)&&(y.enterCallbacks[w]||[]).forEach(P=>P(_))},{flush:"post"}),()=>{const _=a.value,y=r.name,w=f.value,k=w&&w.components[y];if(!k)return tN(n.default,{Component:k,route:_});const S=w.props[y],A=S?S===!0?_.params:typeof S=="function"?S(_):S:null,R=po(k,Mr({},A,e,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(w.instances[y]=null)},ref:g}));return tN(n.default,{Component:R,route:_})||R}}});function tN(r,e){if(!r)return null;const n=r(e);return n.length===1?n[0]:n}const C0e=k0e;function S0e(r){const e=Jme(r.routes,r),n=r.parseQuery||m0e,s=r.stringifyQuery||Z9,a=r.history,u=$v(),d=$v(),f=$v(),g=hu(xd);let _=xd;Q0&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const y=BS.bind(null,He=>""+He),w=BS.bind(null,p0e),k=BS.bind(null,p3);function S(He,Fe){let pt,Rt;return XB(He)?(pt=e.getRecordMatcher(He),Rt=Fe):Rt=He,e.addRoute(Rt,pt)}function A(He){const Fe=e.getRecordMatcher(He);Fe&&e.removeRoute(Fe)}function P(){return e.getRoutes().map(He=>He.record)}function R(He){return!!e.getRecordMatcher(He)}function O(He,Fe){if(Fe=Mr({},Fe||g.value),typeof He=="string"){const oe=VS(n,He,Fe.path),ye=e.resolve({path:oe.path},Fe),We=a.createHref(oe.fullPath);return Mr(oe,ye,{params:k(ye.params),hash:p3(oe.hash),redirectedFrom:void 0,href:We})}let pt;if("path"in He)pt=Mr({},He,{path:VS(n,He.path,Fe.path).path});else{const oe=Mr({},He.params);for(const ye in oe)oe[ye]==null&&delete oe[ye];pt=Mr({},He,{params:w(He.params)}),Fe.params=w(Fe.params)}const Rt=e.resolve(pt,Fe),Vt=He.hash||"";Rt.params=y(k(Rt.params));const Ke=Tme(s,Mr({},He,{hash:h0e(Vt),path:Rt.path})),Ot=a.createHref(Ke);return Mr({fullPath:Ke,hash:Vt,query:s===Z9?g0e(He.query):He.query||{}},Rt,{redirectedFrom:void 0,href:Ot})}function B(He){return typeof He=="string"?VS(n,He,g.value.path):Mr({},He)}function N(He,Fe){if(_!==He)return wg(8,{from:Fe,to:He})}function V(He){return X(He)}function U(He){return V(Mr(B(He),{replace:!0}))}function Y(He){const Fe=He.matched[He.matched.length-1];if(Fe&&Fe.redirect){const{redirect:pt}=Fe;let Rt=typeof pt=="function"?pt(He):pt;return typeof Rt=="string"&&(Rt=Rt.includes("?")||Rt.includes("#")?Rt=B(Rt):{path:Rt},Rt.params={}),Mr({query:He.query,hash:He.hash,params:"path"in Rt?{}:He.params},Rt)}}function X(He,Fe){const pt=_=O(He),Rt=g.value,Vt=He.state,Ke=He.force,Ot=He.replace===!0,oe=Y(pt);if(oe)return X(Mr(B(oe),{state:typeof oe=="object"?Mr({},Vt,oe.state):Vt,force:Ke,replace:Ot}),Fe||pt);const ye=pt;ye.redirectedFrom=Fe;let We;return!Ke&&Mme(s,Rt,pt)&&(We=wg(16,{to:ye,from:Rt}),me(Rt,Rt,!0,!1)),(We?Promise.resolve(We):ee(ye,Rt)).catch(at=>sh(at)?sh(at,2)?at:ne(at):St(at,ye,Rt)).then(at=>{if(at){if(sh(at,2))return X(Mr({replace:Ot},B(at.to),{state:typeof at.to=="object"?Mr({},Vt,at.to.state):Vt,force:Ke}),Fe||ye)}else at=Te(ye,Rt,!0,Ot,Vt);return ue(ye,Rt,at),at})}function $(He,Fe){const pt=N(He,Fe);return pt?Promise.reject(pt):Promise.resolve()}function ee(He,Fe){let pt;const[Rt,Vt,Ke]=E0e(He,Fe);pt=WS(Rt.reverse(),"beforeRouteLeave",He,Fe);for(const oe of Rt)oe.leaveGuards.forEach(ye=>{pt.push(Rd(ye,He,Fe))});const Ot=$.bind(null,He,Fe);return pt.push(Ot),T0(pt).then(()=>{pt=[];for(const oe of u.list())pt.push(Rd(oe,He,Fe));return pt.push(Ot),T0(pt)}).then(()=>{pt=WS(Vt,"beforeRouteUpdate",He,Fe);for(const oe of Vt)oe.updateGuards.forEach(ye=>{pt.push(Rd(ye,He,Fe))});return pt.push(Ot),T0(pt)}).then(()=>{pt=[];for(const oe of He.matched)if(oe.beforeEnter&&!Fe.matched.includes(oe))if(bc(oe.beforeEnter))for(const ye of oe.beforeEnter)pt.push(Rd(ye,He,Fe));else pt.push(Rd(oe.beforeEnter,He,Fe));return pt.push(Ot),T0(pt)}).then(()=>(He.matched.forEach(oe=>oe.enterCallbacks={}),pt=WS(Ke,"beforeRouteEnter",He,Fe),pt.push(Ot),T0(pt))).then(()=>{pt=[];for(const oe of d.list())pt.push(Rd(oe,He,Fe));return pt.push(Ot),T0(pt)}).catch(oe=>sh(oe,8)?oe:Promise.reject(oe))}function ue(He,Fe,pt){for(const Rt of f.list())Rt(He,Fe,pt)}function Te(He,Fe,pt,Rt,Vt){const Ke=N(He,Fe);if(Ke)return Ke;const Ot=Fe===xd,oe=Q0?history.state:{};pt&&(Rt||Ot?a.replace(He.fullPath,Mr({scroll:Ot&&oe&&oe.scroll},Vt)):a.push(He.fullPath,Vt)),g.value=He,me(He,Fe,pt,Ot),ne()}let De;function $e(){De||(De=a.listen((He,Fe,pt)=>{if(!Xt.listening)return;const Rt=O(He),Vt=Y(Rt);if(Vt){X(Mr(Vt,{replace:!0}),Rt).catch(xy);return}_=Rt;const Ke=g.value;Q0&&Ome(U9(Ke.fullPath,pt.delta),j3()),ee(Rt,Ke).catch(Ot=>sh(Ot,12)?Ot:sh(Ot,2)?(X(Ot.to,Rt).then(oe=>{sh(oe,20)&&!pt.delta&&pt.type===zy.pop&&a.go(-1,!1)}).catch(xy),Promise.reject()):(pt.delta&&a.go(-pt.delta,!1),St(Ot,Rt,Ke))).then(Ot=>{Ot=Ot||Te(Rt,Ke,!1),Ot&&(pt.delta&&!sh(Ot,8)?a.go(-pt.delta,!1):pt.type===zy.pop&&sh(Ot,20)&&a.go(-1,!1)),ue(Rt,Ke,Ot)}).catch(xy)}))}let Ue=$v(),it=$v(),tt;function St(He,Fe,pt){ne(He);const Rt=it.list();return Rt.length?Rt.forEach(Vt=>Vt(He,Fe,pt)):console.error(He),Promise.reject(He)}function ve(){return tt&&g.value!==xd?Promise.resolve():new Promise((He,Fe)=>{Ue.add([He,Fe])})}function ne(He){return tt||(tt=!He,$e(),Ue.list().forEach(([Fe,pt])=>He?pt(He):Fe()),Ue.reset()),He}function me(He,Fe,pt,Rt){const{scrollBehavior:Vt}=r;if(!Q0||!Vt)return Promise.resolve();const Ke=!pt&&Fme(U9(He.fullPath,0))||(Rt||!pt)&&history.state&&history.state.scroll||null;return ko().then(()=>Vt(He,Fe,Ke)).then(Ot=>Ot&&Nme(Ot)).catch(Ot=>St(Ot,He,Fe))}const qe=He=>a.go(He);let Se;const gt=new Set,Xt={currentRoute:g,listening:!0,addRoute:S,removeRoute:A,hasRoute:R,getRoutes:P,resolve:O,options:r,push:V,replace:U,go:qe,back:()=>qe(-1),forward:()=>qe(1),beforeEach:u.add,beforeResolve:d.add,afterEach:f.add,onError:it.add,isReady:ve,install(He){const Fe=this;He.component("RouterLink",b0e),He.component("RouterView",C0e),He.config.globalProperties.$router=Fe,Object.defineProperty(He.config.globalProperties,"$route",{enumerable:!0,get:()=>ft(g)}),Q0&&!Se&&g.value===xd&&(Se=!0,V(a.location).catch(Vt=>{}));const pt={};for(const Vt in xd)pt[Vt]=Ht(()=>g.value[Vt]);He.provide(JM,Fe),He.provide(iV,Yr(pt)),He.provide(dT,g);const Rt=He.unmount;gt.add(He),He.unmount=function(){gt.delete(He),gt.size<1&&(_=xd,De&&De(),De=null,g.value=xd,Se=!1,tt=!1),Rt()}}};return Xt}function T0(r){return r.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function E0e(r,e){const n=[],s=[],a=[],u=Math.max(e.matched.length,r.matched.length);for(let d=0;d<u;d++){const f=e.matched[d];f&&(r.matched.find(_=>xg(_,f))?s.push(f):n.push(f));const g=r.matched[d];g&&(e.matched.find(_=>xg(_,g))||a.push(g))}return[n,s,a]}const zS=Tn(!1),ky=Tn(!1),eg=Tn(!1),T0e=Tn(!0),fT=Tpe({xs:460,...wpe}),Op=ZM(),rV=dme(),M0e=Ht(()=>Op.height.value-Op.width.value/Vd>180),sV=cme(_c?document.body:null),fg=YB(),A0e=Ht(()=>{var r,e;return["INPUT","TEXTAREA"].includes(((r=fg.value)==null?void 0:r.tagName)||"")||((e=fg.value)==null?void 0:e.classList.contains("CodeMirror-code"))}),L0e=Ht(()=>{var r;return["BUTTON","A"].includes(((r=fg.value)==null?void 0:r.tagName)||"")});Al("slidev-camera","default");Al("slidev-mic","default");const Yw=Al("slidev-scale",0),oa=Al("slidev-show-overview",!1),US=Al("slidev-presenter-cursor",!0),nN=Al("slidev-show-editor",!1);Al("slidev-editor-width",_c?window.innerWidth*.4:100);const oV=$M(oa);function iN(r,e,n,s=a=>a){return r*s(.5-e*(.5-n))}function R0e(r){return[-r[0],-r[1]]}function hc(r,e){return[r[0]+e[0],r[1]+e[1]]}function wl(r,e){return[r[0]-e[0],r[1]-e[1]]}function cc(r,e){return[r[0]*e,r[1]*e]}function P0e(r,e){return[r[0]/e,r[1]/e]}function qv(r){return[r[1],-r[0]]}function rN(r,e){return r[0]*e[0]+r[1]*e[1]}function I0e(r,e){return r[0]===e[0]&&r[1]===e[1]}function D0e(r){return Math.hypot(r[0],r[1])}function N0e(r){return r[0]*r[0]+r[1]*r[1]}function sN(r,e){return N0e(wl(r,e))}function aV(r){return P0e(r,D0e(r))}function O0e(r,e){return Math.hypot(r[1]-e[1],r[0]-e[0])}function Xv(r,e,n){let s=Math.sin(n),a=Math.cos(n),u=r[0]-e[0],d=r[1]-e[1],f=u*a-d*s,g=u*s+d*a;return[f+e[0],g+e[1]]}function pT(r,e,n){return hc(r,cc(wl(e,r),n))}function oN(r,e,n){return hc(r,cc(e,n))}var{min:M0,PI:F0e}=Math,aN=.275,Zv=F0e+1e-4;function B0e(r,e={}){let{size:n=16,smoothing:s=.5,thinning:a=.5,simulatePressure:u=!0,easing:d=St=>St,start:f={},end:g={},last:_=!1}=e,{cap:y=!0,easing:w=St=>St*(2-St)}=f,{cap:k=!0,easing:S=St=>--St*St*St+1}=g;if(r.length===0||n<=0)return[];let A=r[r.length-1].runningLength,P=f.taper===!1?0:f.taper===!0?Math.max(n,A):f.taper,R=g.taper===!1?0:g.taper===!0?Math.max(n,A):g.taper,O=Math.pow(n*s,2),B=[],N=[],V=r.slice(0,10).reduce((St,ve)=>{let ne=ve.pressure;if(u){let me=M0(1,ve.distance/n),qe=M0(1,1-me);ne=M0(1,St+(qe-St)*(me*aN))}return(St+ne)/2},r[0].pressure),U=iN(n,a,r[r.length-1].pressure,d),Y,X=r[0].vector,$=r[0].point,ee=$,ue=$,Te=ee,De=!1;for(let St=0;St<r.length;St++){let{pressure:ve}=r[St],{point:ne,vector:me,distance:qe,runningLength:Se}=r[St];if(St<r.length-1&&A-Se<3)continue;if(a){if(u){let Ke=M0(1,qe/n),Ot=M0(1,1-Ke);ve=M0(1,V+(Ot-V)*(Ke*aN))}U=iN(n,a,ve,d)}else U=n/2;Y===void 0&&(Y=U);let gt=Se<P?w(Se/P):1,Xt=A-Se<R?S((A-Se)/R):1;U=Math.max(.01,U*Math.min(gt,Xt));let He=(St<r.length-1?r[St+1]:r[St]).vector,Fe=St<r.length-1?rN(me,He):1,pt=rN(me,X)<0&&!De,Rt=Fe!==null&&Fe<0;if(pt||Rt){let Ke=cc(qv(X),U);for(let Ot=1/13,oe=0;oe<=1;oe+=Ot)ue=Xv(wl(ne,Ke),ne,Zv*oe),B.push(ue),Te=Xv(hc(ne,Ke),ne,Zv*-oe),N.push(Te);$=ue,ee=Te,Rt&&(De=!0);continue}if(De=!1,St===r.length-1){let Ke=cc(qv(me),U);B.push(wl(ne,Ke)),N.push(hc(ne,Ke));continue}let Vt=cc(qv(pT(He,me,Fe)),U);ue=wl(ne,Vt),(St<=1||sN($,ue)>O)&&(B.push(ue),$=ue),Te=hc(ne,Vt),(St<=1||sN(ee,Te)>O)&&(N.push(Te),ee=Te),V=ve,X=me}let $e=r[0].point.slice(0,2),Ue=r.length>1?r[r.length-1].point.slice(0,2):hc(r[0].point,[1,1]),it=[],tt=[];if(r.length===1){if(!(P||R)||_){let St=oN($e,aV(qv(wl($e,Ue))),-(Y||U)),ve=[];for(let ne=1/13,me=ne;me<=1;me+=ne)ve.push(Xv(St,$e,Zv*2*me));return ve}}else{if(!(P||R&&r.length===1))if(y)for(let ve=1/13,ne=ve;ne<=1;ne+=ve){let me=Xv(N[0],$e,Zv*ne);it.push(me)}else{let ve=wl(B[0],N[0]),ne=cc(ve,.5),me=cc(ve,.51);it.push(wl($e,ne),wl($e,me),hc($e,me),hc($e,ne))}let St=qv(R0e(r[r.length-1].vector));if(R||P&&r.length===1)tt.push(Ue);else if(k){let ve=oN(Ue,St,U);for(let ne=1/29,me=ne;me<1;me+=ne)tt.push(Xv(ve,Ue,Zv*3*me))}else tt.push(hc(Ue,cc(St,U)),hc(Ue,cc(St,U*.99)),wl(Ue,cc(St,U*.99)),wl(Ue,cc(St,U)))}return B.concat(tt,N.reverse(),it)}function V0e(r,e={}){var n;let{streamline:s=.5,size:a=16,last:u=!1}=e;if(r.length===0)return[];let d=.15+(1-s)*.85,f=Array.isArray(r[0])?r:r.map(({x:S,y:A,pressure:P=.5})=>[S,A,P]);if(f.length===2){let S=f[1];f=f.slice(0,-1);for(let A=1;A<5;A++)f.push(pT(f[0],S,A/4))}f.length===1&&(f=[...f,[...hc(f[0],[1,1]),...f[0].slice(2)]]);let g=[{point:[f[0][0],f[0][1]],pressure:f[0][2]>=0?f[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],_=!1,y=0,w=g[0],k=f.length-1;for(let S=1;S<f.length;S++){let A=u&&S===k?f[S].slice(0,2):pT(w.point,f[S],d);if(I0e(w.point,A))continue;let P=O0e(A,w.point);if(y+=P,S<k&&!_){if(y<a)continue;_=!0}w={point:A,pressure:f[S][2]>=0?f[S][2]:.5,vector:aV(wl(w.point,A)),distance:P,runningLength:y},g.push(w)}return g[0].vector=((n=g[1])==null?void 0:n.vector)||[0,0],g}function W0e(r,e={}){return B0e(V0e(r,e),e)}var z0e=()=>({events:{},emit(r,...e){let n=this.events[r]||[];for(let s=0,a=n.length;s<a;s++)n[s](...e)},on(r,e){var n;return(n=this.events[r])!=null&&n.push(e)||(this.events[r]=[e]),()=>{var s;this.events[r]=(s=this.events[r])==null?void 0:s.filter(a=>e!==a)}}});function m3(r,e){return r-e}function U0e(r){return r<0?-1:1}function g3(r){return[Math.abs(r),U0e(r)]}function lV(){const r=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${r()+r()}-${r()}-${r()}-${r()}-${r()}${r()}${r()}`}var G0e=2,ph=G0e,Lg=class{constructor(r){this.drauu=r,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(r){}onUnselected(){}onStart(r){}onMove(r){return!1}onEnd(r){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(r){var a;var e;const n=this.drauu.el,s=(a=this.drauu.options.coordinateScale)!=null?a:1;if(this.drauu.options.coordinateTransform===!1){const u=this.drauu.el.getBoundingClientRect();return{x:(r.pageX-u.left)*s,y:(r.pageY-u.top)*s,pressure:r.pressure}}else{const u=this.drauu.svgPoint;u.x=r.clientX,u.y=r.clientY;const d=u.matrixTransform((e=n.getScreenCTM())==null?void 0:e.inverse());return{x:d.x*s,y:d.y*s,pressure:r.pressure}}}createElement(r,e){var a;const n=document.createElementNS("http://www.w3.org/2000/svg",r),s=e?{...this.brush,...e}:this.brush;return n.setAttribute("fill",(a=s.fill)!=null?a:"transparent"),n.setAttribute("stroke",s.color),n.setAttribute("stroke-width",s.size.toString()),n.setAttribute("stroke-linecap","round"),s.dasharray&&n.setAttribute("stroke-dasharray",s.dasharray),n}attr(r,e){this.el.setAttribute(r,typeof e=="string"?e:e.toFixed(ph))}_setEvent(r){this.event=r,this.point=this.getMousePosition(r)}_eventDown(r){return this._setEvent(r),this.start=this.point,this.onStart(this.point)}_eventMove(r){return this._setEvent(r),this.onMove(this.point)}_eventUp(r){return this._setEvent(r),this.onEnd(this.point)}},H0e=class extends Lg{constructor(){super(...arguments),this.points=[]}onStart(r){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[r],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(r){return this.el||this.onStart(r),this.points[this.points.length-1]!==r&&this.points.push(r),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const r=this.el;return this.el=null,!!r}getSvgData(r){const e=W0e(r,{size:this.brush.size*2,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5},...this.brush.stylusOptions});if(!e.length)return"";const n=e.reduce((s,[a,u],d,f)=>{const[g,_]=f[(d+1)%f.length];return s.push(a,u,(a+g)/2,(u+_)/2),s},["M",...e[0],"Q"]);return n.push("Z"),n.map(s=>typeof s=="number"?s.toFixed(2):s).join(" ")}},Y0e=class extends Lg{onStart(r){return this.el=this.createElement("ellipse"),this.attr("cx",r.x),this.attr("cy",r.y),this.el}onMove(r){if(!this.el||!this.start)return!1;let[e,n]=g3(r.x-this.start.x),[s,a]=g3(r.y-this.start.y);if(this.shiftPressed){const u=Math.min(e,s);e=u,s=u}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",e),this.attr("ry",s);else{const[u,d]=[this.start.x,this.start.x+e*n].sort(m3),[f,g]=[this.start.y,this.start.y+s*a].sort(m3);this.attr("cx",(u+d)/2),this.attr("cy",(f+g)/2),this.attr("rx",(d-u)/2),this.attr("ry",(g-f)/2)}return!0}onEnd(){const r=this.el;return this.el=null,!(!r||!r.getTotalLength())}};function cV(r,e){const n=document.createElementNS("http://www.w3.org/2000/svg","defs"),s=document.createElementNS("http://www.w3.org/2000/svg","marker"),a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("fill",e),s.setAttribute("id",r),s.setAttribute("viewBox","0 -5 10 10"),s.setAttribute("refX","5"),s.setAttribute("refY","0"),s.setAttribute("markerWidth","4"),s.setAttribute("markerHeight","4"),s.setAttribute("orient","auto"),a.setAttribute("d","M0,-5L10,0L0,5"),s.appendChild(a),n.appendChild(s),n}var j0e=class extends Lg{onStart(r){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",r.x),this.attr("y1",r.y),this.attr("x2",r.x),this.attr("y2",r.y),this.brush.arrowEnd){const e=lV(),n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.append(cV(e,this.brush.color)),n.append(this.el),this.attr("marker-end",`url(#${e})`),n}return this.el}onMove(r){if(!this.el)return!1;let{x:e,y:n}=r;if(this.shiftPressed){const s=r.x-this.start.x,a=r.y-this.start.y;if(a!==0){let u=s/a;u=Math.round(u),Math.abs(u)<=1?(e=this.start.x+a*u,n=this.start.y+a):(e=this.start.x+s,n=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-e),this.attr("y1",this.start.y*2-n),this.attr("x2",e),this.attr("y2",n)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",e),this.attr("y2",n)),!0}onEnd(){const r=this.el;return this.el=null,!(!r||r.getTotalLength()<5)}},$0e=class extends Lg{onStart(r){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",r.x),this.attr("y",r.y),this.el}onMove(r){if(!this.el||!this.start)return!1;let[e,n]=g3(r.x-this.start.x),[s,a]=g3(r.y-this.start.y);if(this.shiftPressed){const u=Math.min(e,s);e=u,s=u}if(this.altPressed)this.attr("x",this.start.x-e),this.attr("y",this.start.y-s),this.attr("width",e*2),this.attr("height",s*2);else{const[u,d]=[this.start.x,this.start.x+e*n].sort(m3),[f,g]=[this.start.y,this.start.y+s*a].sort(m3);this.attr("x",u),this.attr("y",f),this.attr("width",d-u),this.attr("height",g-f)}return!0}onEnd(){const r=this.el;return this.el=null,!(!r||!r.getTotalLength())}};function q0e(r,e){const n=r.x-e.x,s=r.y-e.y;return n*n+s*s}function X0e(r,e,n){let s=e.x,a=e.y,u=n.x-s,d=n.y-a;if(u!==0||d!==0){const f=((r.x-s)*u+(r.y-a)*d)/(u*u+d*d);f>1?(s=n.x,a=n.y):f>0&&(s+=u*f,a+=d*f)}return u=r.x-s,d=r.y-a,u*u+d*d}function Z0e(r,e){let n=r[0];const s=[n];let a;for(let u=1,d=r.length;u<d;u++)a=r[u],q0e(a,n)>e&&(s.push(a),n=a);return n!==a&&a&&s.push(a),s}function mT(r,e,n,s,a){let u=s,d=0;for(let f=e+1;f<n;f++){const g=X0e(r[f],r[e],r[n]);g>u&&(d=f,u=g)}u>s&&(d-e>1&&mT(r,e,d,s,a),a.push(r[d]),n-d>1&&mT(r,d,n,s,a))}function K0e(r,e){const n=r.length-1,s=[r[0]];return mT(r,0,n,e,s),s.push(r[n]),s}function lN(r,e,n=!1){if(r.length<=2)return r;const s=e!==void 0?e*e:1;return r=n?r:Z0e(r,s),r=K0e(r,s),r}var J0e=class extends Lg{constructor(){super(...arguments),this.points=[],this.count=0}onStart(r){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[r],this.brush.arrowEnd){this.arrowId=lV();const e=cV(this.arrowId,this.brush.color);this.el.appendChild(e)}return this.el}onMove(r){return this.el||this.onStart(r),this.points[this.points.length-1]!==r&&(this.points.push(r),this.count+=1),this.count>5&&(this.points=lN(this.points,1,!0),this.count=0),this.attr("d",uN(this.points)),!0}onEnd(){const r=this.el;return this.el=null,!(!r||(r.setAttribute("d",uN(lN(this.points,1,!0))),!r.getTotalLength()))}};function Q0e(r,e){const n=e.x-r.x,s=e.y-r.y;return{length:Math.sqrt(n**2+s**2),angle:Math.atan2(s,n)}}function cN(r,e,n,s){const a=e||r,u=n||r,d=.2,f=Q0e(a,u),g=f.angle+(s?Math.PI:0),_=f.length*d,y=r.x+Math.cos(g)*_,w=r.y+Math.sin(g)*_;return{x:y,y:w}}function ege(r,e,n){const s=cN(n[e-1],n[e-2],r),a=cN(r,n[e-1],n[e+1],!0);return`C ${s.x.toFixed(ph)},${s.y.toFixed(ph)} ${a.x.toFixed(ph)},${a.y.toFixed(ph)} ${r.x.toFixed(ph)},${r.y.toFixed(ph)}`}function uN(r){return r.reduce((e,n,s,a)=>s===0?`M ${n.x.toFixed(ph)},${n.y.toFixed(ph)}`:`${e} ${ege(n,s,a)}`,"")}var tge=class extends Lg{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[]}onSelected(r){const e=(n,s)=>{if(n&&n.length)for(let a=0;a<n.length;a++){const u=n[a];if(u.getTotalLength){const d=u.getTotalLength();for(let f=0;f<this.pathSubFactor;f++){const g=u.getPointAtLength(d*f/this.pathSubFactor),_=u.getPointAtLength(d*(f+1)/this.pathSubFactor);this.pathFragments.push({x1:g.x,x2:_.x,y1:g.y,y2:_.y,segment:f,element:s||u})}}else u.children&&e(u.children,u)}};r&&e(r.children)}onUnselected(){this.pathFragments=[]}onStart(r){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=r.x,this.svgPointPrevious.y=r.y}onMove(r){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=r.x,this.svgPointCurrent.y=r.y;const e=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,e}onEnd(){return this.svgPointPrevious=void 0,this.svgPointCurrent=void 0,!0}checkAndEraseElement(){const r=[];if(this.pathFragments.length)for(let e=0;e<this.pathFragments.length;e++){const n=this.pathFragments[e],s={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(n,s)&&(n.element.remove(),r.push(e))}return r.length&&(this.pathFragments=this.pathFragments.filter((e,n)=>!r.includes(n))),r.length>0}lineLineIntersect(r,e){const n=r.x1,s=r.x2,a=e.x1,u=e.x2,d=r.y1,f=r.y2,g=e.y1,_=e.y2,y=(n-s)*(g-_)-(d-f)*(a-u),w=(n*f-d*s)*(a-u)-(n-s)*(a*_-g*u),k=(n*f-d*s)*(g-_)-(d-f)*(a*_-g*u),S=(A,P,R)=>A>=P&&A<=R?!0:A>=R&&A<=P;if(y===0)return!1;{const A={x:w/y,y:k/y};return S(A.x,n,s)&&S(A.y,d,f)&&S(A.x,a,u)&&S(A.y,g,_)}}};function nge(r){return{draw:new J0e(r),stylus:new H0e(r),line:new j0e(r),rectangle:new $0e(r),ellipse:new Y0e(r),eraseLine:new tge(r)}}var ige=class{constructor(r={}){this.options=r,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=z0e(),this._models=nge(this),this._undoStack=[],this._disposables=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),r.el&&this.mount(r.el,r.eventTarget)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(r){this._models[this.mode].onUnselected(),this.options.brush.mode=r,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(r){this.options.brush=r}resolveSelector(r){return typeof r=="string"?document.querySelector(r):r||null}mount(r,e){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(r),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const n=this.resolveSelector(e)||this.el,s=this.eventStart.bind(this),a=this.eventMove.bind(this),u=this.eventEnd.bind(this),d=this.eventKeyboard.bind(this);n.addEventListener("pointerdown",s,{passive:!1}),window.addEventListener("pointermove",a,{passive:!1}),window.addEventListener("pointerup",u,{passive:!1}),window.addEventListener("pointercancel",u,{passive:!1}),window.addEventListener("keydown",d,!1),window.addEventListener("keyup",d,!1),this._disposables.push(()=>{n.removeEventListener("pointerdown",s),window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",u),window.removeEventListener("keydown",d,!1),window.removeEventListener("keyup",d,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(r=>r()),this._disposables.length=0,this.el=null,this._emitter.emit("unmounted")}on(r,e){return this._emitter.on(r,e)}undo(){const r=this.el;return r.lastElementChild?(this._undoStack.push(r.lastElementChild.cloneNode(!0)),r.lastElementChild.remove(),this._emitter.emit("changed"),!0):!1}redo(){return this._undoStack.length?(this.el.appendChild(this._undoStack.pop()),this._emitter.emit("changed"),!0):!1}canRedo(){return!!this._undoStack.length}canUndo(){var r;return!!((r=this.el)!=null&&r.lastElementChild)}eventMove(r){!this.acceptsInput(r)||!this.drawing||this.model._eventMove(r)&&(r.stopPropagation(),r.preventDefault(),this._emitter.emit("changed"))}eventStart(r){!this.acceptsInput(r)||(r.stopPropagation(),r.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._emitter.emit("start"),this._currentNode=this.model._eventDown(r),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(r){if(!this.acceptsInput(r)||!this.drawing)return;const e=this.model._eventUp(r);e?(e instanceof Element&&e!==this._currentNode&&(this._currentNode=e),this.commit()):this.cancel(),this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed")}acceptsInput(r){return!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(r.pointerType)}eventKeyboard(r){this.shiftPressed===r.shiftKey&&this.altPressed===r.altKey||(this.shiftPressed=r.shiftKey,this.altPressed=r.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(){this._undoStack.length=0;const r=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",r)}clear(){this._undoStack.length=0,this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(r){this.clear(),this.el.innerHTML=r}};function rge(r){return new ige(r)}const gT=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ffffff","#000000"],au=Al("slidev-drawing-enabled",!1),vDe=Al("slidev-drawing-pinned",!1),sge=Tn(!1),oge=Tn(!1),age=Tn(!1),Uy=Tn(!1),Mp=bfe(Al("slidev-drawing-brush",{color:gT[0],size:4,mode:"stylus"})),hN=Tn("stylus"),uV=Ht(()=>wr.drawings.syncAll||ru.value);let Gy=!1;const Kv=Ht({get(){return hN.value},set(r){hN.value=r,r==="arrow"?(Mp.mode="line",Mp.arrowEnd=!0):(Mp.mode=r,Mp.arrowEnd=!1)}}),lge=Yr({brush:Mp,acceptsInputTypes:Ht(()=>au.value?void 0:["pen"]),coordinateTransform:!1}),aa=N3(rge(lge));function cge(){aa.clear(),uV.value&&UB(Us.value,"")}function hV(){var r;oge.value=aa.canRedo(),sge.value=aa.canUndo(),age.value=!!((r=aa.el)!=null&&r.children.length)}function uge(r){Gy=!0;const e=f3[r||Us.value];e!=null?aa.load(e):aa.clear(),Gy=!1}aa.on("changed",()=>{if(hV(),!Gy){const r=aa.dump(),e=Us.value;(f3[e]||"")!==r&&uV.value&&UB(e,aa.dump())}});gpe(r=>{Gy=!0,r[Us.value]!=null&&aa.load(r[Us.value]||""),Gy=!1,hV()});ko(()=>{Ni(Us,()=>{!aa.mounted||uge()},{immediate:!0})});aa.on("start",()=>Uy.value=!0);aa.on("end",()=>Uy.value=!1);window.addEventListener("keydown",r=>{if(!au.value)return;const e=!r.ctrlKey&&!r.altKey&&!r.shiftKey&&!r.metaKey;let n=!0;r.code==="KeyZ"&&(r.ctrlKey||r.metaKey)?r.shiftKey?aa.redo():aa.undo():r.code==="Escape"?au.value=!1:r.code==="KeyL"&&e?Kv.value="line":r.code==="KeyA"&&e?Kv.value="arrow":r.code==="KeyS"&&e?Kv.value="stylus":r.code==="KeyR"&&e?Kv.value="rectangle":r.code==="KeyE"&&e?Kv.value="ellipse":r.code==="KeyC"&&e?cge():r.code.startsWith("Digit")&&e&&+r.code[5]<=gT.length?Mp.color=gT[+r.code[5]-1]:n=!1,n&&(r.preventDefault(),r.stopPropagation())},!1);function Zs(...r){return Ht(()=>r.every(e=>Wo(e)))}function Xa(r){return Ht(()=>!Wo(r))}const dN=XM(),GS=Al("slidev-color-schema","auto"),vT=Ht(()=>wr.colorSchema!=="auto"),$3=Ht({get(){return vT.value?wr.colorSchema==="dark":GS.value==="auto"?dN.value:GS.value==="dark"},set(r){vT.value||(GS.value=r===dN.value?"auto":r?"dark":"light")}}),dV=$M($3);_c&&Ni($3,r=>{const e=document.querySelector("html");e.classList.toggle("dark",r),e.classList.toggle("light",!r)},{immediate:!0});const jw=Tn(1),$w=Ht(()=>Ks.length-1),el=Tn(0),QM=Tn(0);function hge(){el.value>jw.value&&(el.value-=1)}function dge(){el.value<$w.value&&(el.value+=1)}function fge(){if(el.value>jw.value){let r=el.value-QM.value;r<jw.value&&(r=jw.value),el.value=r}}function pge(){if(el.value<$w.value){let r=el.value+QM.value;r>$w.value&&(r=$w.value),el.value=r}}function mge(){const{escape:r,space:e,shift:n,left:s,right:a,up:u,down:d,enter:f,d:g,g:_,o:y}=rV;let w=[{name:"next_space",key:Zs(e,Xa(n)),fn:zd,autoRepeat:!0},{name:"prev_space",key:Zs(e,n),fn:Ud,autoRepeat:!0},{name:"next_right",key:Zs(a,Xa(n),Xa(oa)),fn:zd,autoRepeat:!0},{name:"prev_left",key:Zs(s,Xa(n),Xa(oa)),fn:Ud,autoRepeat:!0},{name:"next_page_key",key:"pageDown",fn:zd,autoRepeat:!0},{name:"prev_page_key",key:"pageUp",fn:Ud,autoRepeat:!0},{name:"next_down",key:Zs(d,Xa(oa)),fn:Yy,autoRepeat:!0},{name:"prev_up",key:Zs(u,Xa(oa)),fn:()=>jy(!1),autoRepeat:!0},{name:"next_shift",key:Zs(a,n),fn:Yy,autoRepeat:!0},{name:"prev_shift",key:Zs(s,n),fn:()=>jy(!1),autoRepeat:!0},{name:"toggle_dark",key:Zs(g,Xa(au)),fn:dV},{name:"toggle_overview",key:Zs(y,Xa(au)),fn:oV},{name:"hide_overview",key:Zs(r,Xa(au)),fn:()=>oa.value=!1},{name:"goto",key:Zs(_,Xa(au)),fn:()=>eg.value=!eg.value},{name:"next_overview",key:Zs(a,oa),fn:dge},{name:"prev_overview",key:Zs(s,oa),fn:hge},{name:"up_overview",key:Zs(u,oa),fn:fge},{name:"down_overview",key:Zs(d,oa),fn:pge},{name:"goto_from_overview",key:Zs(f,oa),fn:()=>{kg(el.value),oa.value=!1}}];const k=new Set(w.map(A=>A.name));if(w.filter(A=>A.name&&k.has(A.name)).length===0){const A=["========== WARNING ==========","defineShortcutsSetup did not return any of the base shortcuts.","See https://sli.dev/custom/config-shortcuts.html for migration.",'If it is intentional, return at least one shortcut with one of the base names (e.g. name:"goto").'].join(`

`);alert(A),console.warn(A)}return w}const fV=Zs(Xa(A0e),Xa(L0e),T0e);function gge(r,e,n=!1){typeof r=="string"&&(r=rV[r]);const s=Zs(r,fV);let a=0,u;const d=()=>{if(clearTimeout(u),!s.value){a=0;return}n&&(u=setTimeout(d,Math.max(1e3-a*250,150)),a++),e()};return Ni(s,d,{flush:"sync"})}function vge(r,e){return xpe(r,n=>{!fV.value||n.repeat||e()})}function yge(){const r=mge();new Map(r.map(n=>[n.key,n])).forEach(n=>{n.fn&&gge(n.key,n.fn,n.autoRepeat)}),vge("f",()=>sV.toggle())}const _ge={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},bge=G("path",{fill:"currentColor",d:"M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z"},null,-1),xge=[bge];function wge(r,e){return Ge(),Ct("svg",_ge,xge)}const kge={name:"carbon-close",render:wge};function e6(r){var n,s;const e=(s=(n=r==null?void 0:r.meta)==null?void 0:n.slide)==null?void 0:s.no;return e!=null?`slidev-page-${e}`:""}const pV=yi({__name:"SlideContainer",props:{width:{type:Number},meta:{default:()=>({})},scale:{type:[Number,String]}},setup(r){const e=r;Dn(Zn);const n=Tn(),s=ame(n),a=Ht(()=>e.width?e.width:s.width.value),u=Ht(()=>e.width?e.width/Vd:s.height.value);e.width&&kh(()=>{n.value&&(n.value.style.width=`${a.value}px`,n.value.style.height=`${u.value}px`)});const d=Ht(()=>a.value/u.value),f=Ht(()=>e.scale?e.scale:d.value<Vd?a.value/Wd:u.value*Vd/Wd),g=Ht(()=>({height:`${qM}px`,width:`${Wd}px`,transform:`translate(-50%, -50%) scale(${f.value})`})),_=Ht(()=>({"select-none":!wr.selectable,"slidev-code-line-numbers":wr.lineNumbers}));return wa(BB,f),(y,w)=>(Ge(),Ct("div",{id:"slide-container",ref_key:"root",ref:n,class:er(ft(_))},[G("div",{id:"slide-content",style:Qs(ft(g))},[yr(y.$slots,"default")],4),yr(y.$slots,"controls")],2))}});const t6=yi({props:{clicks:{type:[Number,String],default:0},clicksElements:{type:Array,default:()=>[]},clicksOrderMap:{type:Map,default:()=>new Map},clicksDisabled:{type:Boolean,default:!1},context:{type:String,default:"main"},is:{type:Object,default:void 0},route:{type:Object,default:void 0}},setup(r,{emit:e}){const n=ou(r,"clicks",e),s=ou(r,"clicksElements",e),a=ou(r,"clicksDisabled",e),u=ou(r,"clicksOrderMap",e);s.value.length=0,wa(ipe,r.route),wa(rpe,r.context),wa(_y,n),wa(by,a),wa(kp,s),wa(oT,u)},render(){var r,e;return this.$props.is?po(this.$props.is):(e=(r=this.$slots)==null?void 0:r.default)==null?void 0:e.call(r)}}),Cge=["innerHTML"],Sge=yi({__name:"DrawingPreview",props:{page:null},setup(r){return Dn(Zn),(e,n)=>ft(f3)[r.page]?(Ge(),Ct("svg",{key:0,ref:"svg",class:"w-full h-full absolute top-0 pointer-events-none",innerHTML:ft(f3)[r.page]},null,8,Cge)):pi("v-if",!0)}}),Ege={class:"slides-overview bg-main !bg-opacity-75 p-16 overflow-y-auto"},Tge=["onClick"],Mge=yi({__name:"SlidesOverview",props:{modelValue:{type:Boolean}},emits:[],setup(r,{emit:e}){const n=r;Dn(Zn);const s=ou(n,"modelValue",e);function a(){s.value=!1}function u(S){kg(S),a()}function d(S){return S===el.value}const f=fT.smaller("xs"),g=fT.smaller("sm"),_=4*16*2,y=2*16,w=Ht(()=>f.value?Op.width.value-_:g.value?(Op.width.value-_-y)/2:300),k=Ht(()=>Math.floor((Op.width.value-_)/(w.value+y)));return kh(()=>{el.value=Us.value,QM.value=k.value}),(S,A)=>{const P=kge;return Ge(),Ct(ai,null,[cr(G("div",Ege,[G("div",{class:"grid gap-y-4 gap-x-8 w-full",style:Qs(`grid-template-columns: repeat(auto-fit,minmax(${ft(w)}px,1fr))`)},[(Ge(!0),Ct(ai,null,Xp(ft(Ks).slice(0,-1),(R,O)=>(Ge(),Ct("div",{key:R.path,class:"relative"},[G("div",{class:er(["inline-block border border-gray-400 rounded border-opacity-50 overflow-hidden bg-main hover:border-$slidev-theme-primary",{"border-$slidev-theme-primary":d(O+1)}]),onClick:B=>u(+R.path)},[(Ge(),Jn(pV,{key:R.path,width:ft(w),"clicks-disabled":!0,class:"pointer-events-none"},{default:Xn(()=>[Bt(ft(t6),{is:R==null?void 0:R.component,"clicks-disabled":!0,class:er(ft(e6)(R)),route:R,context:"overview"},null,8,["is","class","route"]),Bt(Sge,{page:+R.path},null,8,["page"])]),_:2},1032,["width"]))],10,Tge),G("div",{class:"absolute top-0 opacity-50",style:Qs(`left: ${ft(w)+5}px`)},Js(O+1),5)]))),128))],4)],512),[[Vy,ft(s)]]),ft(s)?(Ge(),Ct("button",{key:0,class:"fixed text-2xl top-4 right-4 icon-btn text-gray-400",onClick:a},[Bt(P)])):pi("v-if",!0)],64)}}});const Age="/event-storming-to-code/assets/logo.b72bde5d.png",Lge={key:0,class:"fixed top-0 bottom-0 left-0 right-0 grid z-20"},Rge=yi({__name:"Modal",props:{modelValue:{default:!1},class:{default:""}},emits:["modelValue"],setup(r,{emit:e}){const n=r;Dn(Zn);const s=ou(n,"modelValue",e);function a(){s.value=!1}return(u,d)=>(Ge(),Jn(lB,null,[ft(s)?(Ge(),Ct("div",Lge,[G("div",{bg:"black opacity-80",class:"absolute top-0 bottom-0 left-0 right-0 -z-1",onClick:d[0]||(d[0]=f=>a())}),G("div",{class:er(["m-auto rounded-md bg-main shadow",n.class]),"dark:border":"~ gray-400 opacity-10"},[yr(u.$slots,"default")],2)])):pi("v-if",!0)],1024))}}),Pge={class:"slidev-info-dialog slidev-layout flex flex-col gap-4 text-base"},Ige=["innerHTML"],Dge=G("a",{href:"https://github.com/slidevjs/slidev",target:"_blank",class:"!opacity-100 !border-none !text-current"},[G("div",{class:"flex gap-1 children:my-auto"},[G("div",{class:"opacity-50 text-sm mr-2"},"Powered by"),G("img",{class:"w-5 h-5",src:Age,alt:"Slidev"}),G("div",{style:{color:"#2082A6"}},[G("b",null,"Sli"),Yt("dev ")])])],-1),Nge=yi({__name:"InfoDialog",props:{modelValue:{default:!1}},emits:["modelValue"],setup(r,{emit:e}){const n=r;Dn(Zn);const s=ou(n,"modelValue",e),a=Ht(()=>typeof wr.info=="string");return(u,d)=>(Ge(),Jn(Rge,{modelValue:ft(s),"onUpdate:modelValue":d[0]||(d[0]=f=>Lr(s)?s.value=f:null),class:"px-6 py-4"},{default:Xn(()=>[G("div",Pge,[ft(a)?(Ge(),Ct("div",{key:0,class:"mb-4",innerHTML:ft(wr).info},null,8,Ige)):pi("v-if",!0),Dge])]),_:1},8,["modelValue"]))}});const Oge=["disabled","onKeydown"],Fge=yi({__name:"Goto",setup(r){Dn(Zn);const e=Tn(),n=Tn(""),s=Ht(()=>{if(n.value.startsWith("/"))return!!Ks.find(d=>d.path===n.value.substring(1));{const d=+n.value;return!isNaN(d)&&d>0&&d<=AV.value}});function a(){s.value&&(n.value.startsWith("/")?kg(n.value.substring(1)):kg(+n.value)),u()}function u(){eg.value=!1}return Ni(eg,async d=>{var f,g;d?(await ko(),n.value="",(f=e.value)==null||f.focus()):(g=e.value)==null||g.blur()}),Ni(n,d=>{d.match(/^[^0-9/]/)&&(n.value=n.value.substring(1))}),(d,f)=>(Ge(),Ct("div",{id:"slidev-goto-dialog",class:er(["fixed right-5 bg-main transform transition-all",ft(eg)?"top-5":"-top-20"]),shadow:"~",p:"x-4 y-2",border:"~ transparent rounded dark:gray-400 dark:opacity-25"},[cr(G("input",{ref_key:"input",ref:e,"onUpdate:modelValue":f[0]||(f[0]=g=>n.value=g),type:"text",disabled:!ft(eg),class:er(["outline-none bg-transparent",{"text-red-400":!ft(s)&&n.value}]),placeholder:"Goto...",onKeydown:[u9(a,["enter"]),u9(u,["escape"])],onBlur:u},null,42,Oge),[[afe,n.value]])],2))}}),Bge=yi({__name:"Controls",setup(r){Dn(Zn);const e=hu(),n=hu();return(s,a)=>(Ge(),Ct(ai,null,[Bt(Mge,{modelValue:ft(oa),"onUpdate:modelValue":a[0]||(a[0]=u=>Lr(oa)?oa.value=u:null)},null,8,["modelValue"]),Bt(Fge),ft(e)?(Ge(),Jn(ft(e),{key:0})):pi("v-if",!0),ft(n)?(Ge(),Jn(ft(n),{key:1,modelValue:ft(zS),"onUpdate:modelValue":a[1]||(a[1]=u=>Lr(zS)?zS.value=u:null)},null,8,["modelValue"])):pi("v-if",!0),ft(wr).info?(Ge(),Jn(Nge,{key:2,modelValue:ft(ky),"onUpdate:modelValue":a[2]||(a[2]=u=>Lr(ky)?ky.value=u:null)},null,8,["modelValue"])):pi("v-if",!0)],64))}}),Vge={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Wge=G("path",{fill:"currentColor",d:"M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30V8zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3s3 1.3 3 3s-1.3 3-3 3zM2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3s-3-1.3-3-3s1.3-3 3-3z"},null,-1),zge=[Wge];function Uge(r,e){return Ge(),Ct("svg",Vge,zge)}const Gge={name:"carbon-settings-adjust",render:Uge},Hge={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Yge=G("path",{fill:"currentColor",d:"M17 22v-8h-4v2h2v6h-3v2h8v-2h-3zM16 8a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 16 8z"},null,-1),jge=G("path",{fill:"currentColor",d:"M16 30a14 14 0 1 1 14-14a14 14 0 0 1-14 14Zm0-26a12 12 0 1 0 12 12A12 12 0 0 0 16 4Z"},null,-1),$ge=[Yge,jge];function qge(r,e){return Ge(),Ct("svg",Hge,$ge)}const Xge={name:"carbon-information",render:qge},Zge={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Kge=G("path",{fill:"currentColor",d:"M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"},null,-1),Jge=[Kge];function Qge(r,e){return Ge(),Ct("svg",Zge,Jge)}const e1e={name:"carbon-download",render:Qge},t1e={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},n1e=G("path",{fill:"currentColor",d:"M29.415 19L27.7 17.285A2.97 2.97 0 0 0 28 16a3 3 0 1 0-3 3a2.97 2.97 0 0 0 1.286-.3L28 20.414V28h-6v-3a7.008 7.008 0 0 0-7-7H9a7.008 7.008 0 0 0-7 7v5h28v-9.586A1.988 1.988 0 0 0 29.415 19ZM4 25a5.006 5.006 0 0 1 5-5h6a5.006 5.006 0 0 1 5 5v3H4Z"},null,-1),i1e=G("path",{fill:"currentColor",d:"M12 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7Z"},null,-1),r1e=[n1e,i1e];function s1e(r,e){return Ge(),Ct("svg",t1e,r1e)}const o1e={name:"carbon-user-speaker",render:s1e},a1e={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},l1e=G("path",{fill:"currentColor",d:"M15 10h2v8h-2zm5 4h2v4h-2zm-10-2h2v6h-2z"},null,-1),c1e=G("path",{fill:"currentColor",d:"M25 4h-8V2h-2v2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8v6h-4v2h10v-2h-4v-6h8a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 16H7V6h18Z"},null,-1),u1e=[l1e,c1e];function h1e(r,e){return Ge(),Ct("svg",a1e,u1e)}const d1e={name:"carbon-presentation-file",render:h1e},f1e={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},p1e=G("path",{fill:"currentColor",d:"M27.307 6.107L30 3.414L28.586 2l-2.693 2.693L24.8 3.6a1.933 1.933 0 0 0-2.8 0l-18 18V28h6.4l18-18a1.933 1.933 0 0 0 0-2.8ZM9.6 26H6v-3.6L23.4 5L27 8.6ZM9 11.586L16.586 4L18 5.414L10.414 13z"},null,-1),m1e=[p1e];function g1e(r,e){return Ge(),Ct("svg",f1e,m1e)}const v1e={name:"carbon-pen",render:g1e},y1e={class:"slidev-icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},_1e=G("path",{fill:"currentColor",d:"m38.2 48.5l58.2 155.2a8 8 0 0 0 15-.1l23.3-64.1a8.1 8.1 0 0 1 4.8-4.8l64.1-23.3a8 8 0 0 0 .1-15L48.5 38.2a8 8 0 0 0-10.3 10.3Z",opacity:".2"},null,-1),b1e=G("path",{fill:"currentColor",d:"m150.5 139.2l55.9-20.3a16 16 0 0 0 .1-30L51.3 30.7a16 16 0 0 0-20.6 20.6l58.2 155.2a15.9 15.9 0 0 0 15 10.4h.1a15.9 15.9 0 0 0 14.9-10.5l20.3-55.9l63.1 63.2a8.5 8.5 0 0 0 5.7 2.3a8.3 8.3 0 0 0 5.7-2.3a8.1 8.1 0 0 0 0-11.4Zm-46.6 61.7L45.7 45.7l155.2 58.2l-64.1 23.3a15.7 15.7 0 0 0-9.6 9.6Z"},null,-1),x1e=[_1e,b1e];function w1e(r,e){return Ge(),Ct("svg",y1e,x1e)}const k1e={name:"ph-cursor-duotone",render:w1e},C1e={class:"slidev-icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},S1e=G("path",{fill:"currentColor",d:"M213.7 202.3a8.1 8.1 0 0 1 0 11.4a8.3 8.3 0 0 1-5.7 2.3a8.5 8.5 0 0 1-5.7-2.3l-63.1-63.2l-20.3 55.9a15.9 15.9 0 0 1-14.9 10.5h-.1a15.9 15.9 0 0 1-15-10.4L30.7 51.3a16 16 0 0 1 20.6-20.6l155.2 58.2a16 16 0 0 1-.1 30l-55.9 20.3Z"},null,-1),E1e=[S1e];function T1e(r,e){return Ge(),Ct("svg",C1e,E1e)}const mV={name:"ph-cursor-fill",render:T1e},M1e={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},A1e=G("path",{fill:"currentColor",d:"M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6ZM5.394 6.813L6.81 5.399l3.505 3.506L8.9 10.319zM2 15.005h5v2H2zm3.394 10.193L8.9 21.692l1.414 1.414l-3.505 3.506zM15 25.005h2v5h-2zm6.687-1.9l1.414-1.414l3.506 3.506l-1.414 1.414zm3.313-8.1h5v2h-5zm-3.313-6.101l3.506-3.506l1.414 1.414l-3.506 3.506zM15 2.005h2v5h-2z"},null,-1),L1e=[A1e];function R1e(r,e){return Ge(),Ct("svg",M1e,L1e)}const P1e={name:"carbon-sun",render:R1e},I1e={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},D1e=G("path",{fill:"currentColor",d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3Z"},null,-1),N1e=[D1e];function O1e(r,e){return Ge(),Ct("svg",I1e,N1e)}const F1e={name:"carbon-moon",render:O1e},B1e={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},V1e=G("path",{fill:"currentColor",d:"M8 4v4H4V4Zm2-2H2v8h8Zm8 2v4h-4V4Zm2-2h-8v8h8Zm8 2v4h-4V4Zm2-2h-8v8h8ZM8 14v4H4v-4Zm2-2H2v8h8Zm8 2v4h-4v-4Zm2-2h-8v8h8Zm8 2v4h-4v-4Zm2-2h-8v8h8ZM8 24v4H4v-4Zm2-2H2v8h8Zm8 2v4h-4v-4Zm2-2h-8v8h8Zm8 2v4h-4v-4Zm2-2h-8v8h8Z"},null,-1),W1e=[V1e];function z1e(r,e){return Ge(),Ct("svg",B1e,W1e)}const U1e={name:"carbon-apps",render:z1e},G1e={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},H1e=G("path",{fill:"currentColor",d:"m18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z"},null,-1),Y1e=[H1e];function j1e(r,e){return Ge(),Ct("svg",G1e,Y1e)}const $1e={name:"carbon-arrow-right",render:j1e},q1e={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},X1e=G("path",{fill:"currentColor",d:"m14 26l1.41-1.41L7.83 17H28v-2H7.83l7.58-7.59L14 6L4 16l10 10z"},null,-1),Z1e=[X1e];function K1e(r,e){return Ge(),Ct("svg",q1e,Z1e)}const J1e={name:"carbon-arrow-left",render:K1e},Q1e={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},eve=G("path",{fill:"currentColor",d:"M20 2v2h6.586L18 12.582L19.414 14L28 5.414V12h2V2H20zm-6 17.416L12.592 18L4 26.586V20H2v10h10v-2H5.414L14 19.416z"},null,-1),tve=[eve];function nve(r,e){return Ge(),Ct("svg",Q1e,tve)}const ive={name:"carbon-maximize",render:nve},rve={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},sve=G("path",{fill:"currentColor",d:"M4 18v2h6.586L2 28.582L3.414 30L12 21.414V28h2V18H4zM30 3.416L28.592 2L20 10.586V4h-2v10h10v-2h-6.586L30 3.416z"},null,-1),ove=[sve];function ave(r,e){return Ge(),Ct("svg",rve,ove)}const lve={name:"carbon-minimize",render:ave},cve={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},uve=G("path",{fill:"currentColor",d:"m13 24l-9-9l1.414-1.414L13 21.171L26.586 7.586L28 9L13 24z"},null,-1),hve=[uve];function dve(r,e){return Ge(),Ct("svg",cve,hve)}const fve={name:"carbon-checkmark",render:dve},pve={class:"select-list"},mve={class:"title"},gve={class:"items"},vve=["onClick"],yve=yi({__name:"SelectList",props:{modelValue:{type:[Object,String,Number]},title:{type:String},items:{type:Array}},setup(r,{emit:e}){const n=r;Dn(Zn);const s=ou(n,"modelValue",e,{passive:!0});return(a,u)=>{const d=fve;return Ge(),Ct("div",pve,[G("div",mve,Js(r.title),1),G("div",gve,[(Ge(!0),Ct(ai,null,Xp(r.items,f=>(Ge(),Ct("div",{key:f.value,class:er(["item",{active:ft(s)===f.value}]),onClick:()=>{var g;s.value=f.value,(g=f.onClick)==null||g.call(f)}},[Bt(d,{class:er(["text-green-500",{"opacity-0":ft(s)!==f.value}])},null,8,["class"]),Yt(" "+Js(f.display||f.value),1)],10,vve))),128))])])}}});const gV=(r,e)=>{const n=r.__vccOpts||r;for(const[s,a]of e)n[s]=a;return n},_ve=gV(yve,[["__scopeId","data-v-7dd0eaca"]]),bve={class:"text-sm"},xve=yi({__name:"Settings",setup(r){Dn(Zn);const e=[{display:"Fit",value:0},{display:"1:1",value:1}];return(n,s)=>(Ge(),Ct("div",bve,[Bt(_ve,{modelValue:ft(Yw),"onUpdate:modelValue":s[0]||(s[0]=a=>Lr(Yw)?Yw.value=a:null),title:"Scale",items:e},null,8,["modelValue"])]))}}),wve={key:0,class:"rounded-md bg-main shadow absolute bottom-10 left-0 z-20","dark:border":"~ gray-400 opacity-10"},kve=yi({__name:"MenuButton",props:{modelValue:{default:!1},disabled:{default:!1}},setup(r,{emit:e}){const n=r;Dn(Zn);const s=ou(n,"modelValue",e,{passive:!0}),a=Tn();return HB(a,()=>{s.value=!1}),(u,d)=>(Ge(),Ct("div",{ref_key:"el",ref:a,class:"flex relative"},[G("button",{class:er({disabled:r.disabled}),onClick:d[0]||(d[0]=f=>s.value=!ft(s))},[yr(u.$slots,"button",{class:er({disabled:r.disabled})})],2),(Ge(),Jn(lB,null,[ft(s)?(Ge(),Ct("div",wve,[yr(u.$slots,"menu")])):pi("v-if",!0)],1024))],512))}}),Cve={class:"w-1px opacity-10 bg-current m-1 lg:m-2"},qx={__name:"VerticalDivider",setup(r){return Dn(Zn),(e,n)=>(Ge(),Ct("div",Cve))}},Sve={render(){return[]}},Eve={class:"icon-btn"},Tve={class:"h-40px flex",p:"l-1 t-0.5 r-2",text:"sm leading-2"},Mve={class:"my-auto"},Ave={class:"opacity-50"},Lve=yi({__name:"NavControls",props:{persist:{default:!1}},setup(r){const e=r;Dn(Zn);const n=fT.smaller("md"),{isFullscreen:s,toggle:a}=sV,u=Ht(()=>bT.value?`?password=${bT.value}`:""),d=Ht(()=>`/presenter/${Us.value}${u.value}`),f=Ht(()=>`/${Us.value}${u.value}`),g=Tn(),_=()=>{g.value&&fg.value&&g.value.contains(fg.value)&&fg.value.blur()},y=Ht(()=>e.persist?"text-$slidev-controls-foreground bg-transparent":"rounded-md bg-main shadow dark:border dark:border-gray-400 dark:border-opacity-10"),w=hu(),k=hu();return Up(()=>import("./DrawingControls.a933f129.js"),["assets/DrawingControls.a933f129.js","assets/DrawingControls.vue_vue_type_script_setup_true_lang.6a3cb5a1.js"]).then(S=>k.value=S.default),(S,A)=>{const P=lve,R=ive,O=J1e,B=$1e,N=U1e,V=F1e,U=P1e,Y=mV,X=k1e,$=v1e,ee=d1e,ue=Ch("RouterLink"),Te=o1e,De=e1e,$e=Xge,Ue=Gge;return Ge(),Ct("nav",{ref_key:"root",ref:g,class:"flex flex-col"},[G("div",{class:er(["flex flex-wrap-reverse text-xl gap-0.5 p-1 lg:gap-1 lg:p-2",ft(y)]),onMouseleave:_},[ft(dh)?pi("v-if",!0):(Ge(),Ct("button",{key:0,class:"icon-btn",onClick:A[0]||(A[0]=(...it)=>ft(a)&&ft(a)(...it))},[ft(s)?(Ge(),Jn(P,{key:0})):(Ge(),Jn(R,{key:1}))])),G("button",{class:er(["icon-btn",{disabled:!ft(Hwe)}]),onClick:A[1]||(A[1]=(...it)=>ft(Ud)&&ft(Ud)(...it))},[Bt(O)],2),G("button",{class:er(["icon-btn",{disabled:!ft(Gwe)}]),title:"Next",onClick:A[2]||(A[2]=(...it)=>ft(zd)&&ft(zd)(...it))},[Bt(B)],2),ft(dh)?pi("v-if",!0):(Ge(),Ct("button",{key:1,class:"icon-btn",title:"Slides overview",onClick:A[3]||(A[3]=it=>ft(oV)())},[Bt(N)])),ft(vT)?pi("v-if",!0):(Ge(),Ct("button",{key:2,class:"icon-btn",title:"Toggle dark mode",onClick:A[4]||(A[4]=it=>ft(dV)())},[ft($3)?(Ge(),Jn(V,{key:0})):(Ge(),Jn(U,{key:1}))])),Bt(qx),ft(dh)?pi("v-if",!0):(Ge(),Ct(ai,{key:3},[!ft(ru)&&!ft(n)&&ft(w)?(Ge(),Ct(ai,{key:0},[Bt(ft(w)),Bt(qx)],64)):pi("v-if",!0),ft(ru)?(Ge(),Ct("button",{key:1,class:"icon-btn",title:"Show presenter cursor",onClick:A[5]||(A[5]=it=>US.value=!ft(US))},[ft(US)?(Ge(),Jn(Y,{key:0})):(Ge(),Jn(X,{key:1,class:"opacity-50"}))])):pi("v-if",!0)],64)),!ft(wr).drawings.presenterOnly&&!ft(dh)?(Ge(),Ct(ai,{key:4},[G("button",{class:"icon-btn relative",title:"Drawing",onClick:A[6]||(A[6]=it=>au.value=!ft(au))},[Bt($),ft(au)?(Ge(),Ct("div",{key:0,class:"absolute left-1 right-1 bottom-0 h-0.7 rounded-full",style:Qs({background:ft(Mp).color})},null,4)):pi("v-if",!0)]),Bt(qx)],64)):pi("v-if",!0),ft(dh)?pi("v-if",!0):(Ge(),Ct(ai,{key:5},[ft(ru)?(Ge(),Jn(ue,{key:0,to:ft(f),class:"icon-btn",title:"Play Mode"},{default:Xn(()=>[Bt(ee)]),_:1},8,["to"])):pi("v-if",!0),ft(Wwe)?(Ge(),Jn(ue,{key:1,to:ft(d),class:"icon-btn",title:"Presenter Mode"},{default:Xn(()=>[Bt(Te)]),_:1},8,["to"])):pi("v-if",!0),pi("v-if",!0)],64)),(Ge(),Ct(ai,{key:6},[ft(wr).download?(Ge(),Ct("button",{key:0,class:"icon-btn",onClick:A[8]||(A[8]=(...it)=>ft(xT)&&ft(xT)(...it))},[Bt(De)])):pi("v-if",!0)],64)),!ft(ru)&&ft(wr).info&&!ft(dh)?(Ge(),Ct("button",{key:7,class:"icon-btn",onClick:A[9]||(A[9]=it=>ky.value=!ft(ky))},[Bt($e)])):pi("v-if",!0),!ft(ru)&&!ft(dh)?(Ge(),Jn(kve,{key:8},{button:Xn(()=>[G("button",Eve,[Bt(Ue)])]),menu:Xn(()=>[Bt(xve)]),_:1})):pi("v-if",!0),ft(dh)?pi("v-if",!0):(Ge(),Jn(qx,{key:9})),G("div",Tve,[G("div",Mve,[Yt(Js(ft(Us))+" ",1),G("span",Ave,"/ "+Js(ft(AV)),1)])]),Bt(ft(Sve))],34)],512)}}}),Rve={class:"slidev-icon",viewBox:"0 0 256 209",width:"1.2em",height:"1.2em"},Pve=G("path",{fill:"#55acee",d:"M256 25.45a105.04 105.04 0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.183 105.183 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52c0 4.117.465 8.125 1.36 11.97c-43.65-2.191-82.35-23.1-108.255-54.876c-4.52 7.757-7.11 16.78-7.11 26.404c0 18.222 9.273 34.297 23.365 43.716a52.312 52.312 0 0 1-23.79-6.57c-.003.22-.003.44-.003.661c0 25.447 18.104 46.675 42.13 51.5a52.592 52.592 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475c-17.975 14.086-40.622 22.483-65.228 22.483c-4.24 0-8.42-.249-12.529-.734c23.243 14.902 50.85 23.597 80.51 23.597c96.607 0 149.434-80.031 149.434-149.435c0-2.278-.05-4.543-.152-6.795A106.748 106.748 0 0 0 256 25.45"},null,-1),Ive=[Pve];function Dve(r,e){return Ge(),Ct("svg",Rve,Ive)}const Nve={name:"logos-twitter",render:Dve},Ove={key:0,class:"absolute bottom-0 p-4 mt-auto flex items-center w-full text-primary dark:text-white z-10"},Fve={class:"mb-0 flex items-center"},Bve=["href"],Vve=["src"],Wve=["href"],zve={__name:"global-top",setup(r){const e=Dn(Zn);return(n,s)=>{const a=Nve;return ft(e).themeConfigs.eventLogo||ft(e).themeConfigs.twitter?(Ge(),Ct("footer",Ove,[G("div",Fve,[G("a",{href:ft(e).themeConfigs.eventUrl,target:"_blank"},[G("img",{src:ft(e).themeConfigs.eventLogo,class:"h-8 mr-4",alt:"Event image"},null,8,Vve)],8,Bve)]),ft(e).themeConfigs.twitter?(Ge(),Ct("a",{key:0,href:ft(e).themeConfigs.twitterUrl,target:"_blank"},[Bt(a),Yt(Js(ft(e).themeConfigs.twitter),1)],8,Wve)):pi("v-if",!0)])):pi("v-if",!0)}}},vV={render(){return[po(zve)]}},yV={render(){return[]}},Uve={key:0,class:"absolute top-0 left-0 right-0 bottom-0 pointer-events-none text-xl"},Gve=yi({__name:"PresenterMouse",setup(r){return Dn(Zn),(e,n)=>{const s=mV;return ft(FS).cursor?(Ge(),Ct("div",Uve,[Bt(s,{class:"absolute",style:Qs({left:`${ft(FS).cursor.x}%`,top:`${ft(FS).cursor.y}%`})},null,8,["style"])])):pi("v-if",!0)}}}),Hve=yi({__name:"SlidesShow",props:{context:null},setup(r){Dn(Zn),Ni(Ja,()=>{var n,s;((n=Ja.value)==null?void 0:n.meta)&&Ja.value.meta.preload!==!1&&(Ja.value.meta.__preloaded=!0),((s=HS.value)==null?void 0:s.meta)&&HS.value.meta.preload!==!1&&(HS.value.meta.__preloaded=!0)},{immediate:!0});const e=hu();return Up(()=>import("./DrawingLayer.98004a8f.js"),[]).then(n=>e.value=n.default),(n,s)=>(Ge(),Ct(ai,null,[pi(" Global Bottom "),Bt(ft(yV)),pi(" Slides "),(Ge(!0),Ct(ai,null,Xp(ft(Ks),a=>{var u,d;return Ge(),Ct(ai,{key:a.path},[((u=a.meta)==null?void 0:u.__preloaded)||a===ft(Ja)?cr((Ge(),Jn(ft(t6),{key:0,is:a==null?void 0:a.component,clicks:a===ft(Ja)?ft(yc):0,"clicks-elements":((d=a.meta)==null?void 0:d.__clicksElements)||[],"clicks-disabled":!1,class:er(ft(e6)(a)),route:a,context:r.context},null,8,["is","clicks","clicks-elements","class","route","context"])),[[Vy,a===ft(Ja)]]):pi("v-if",!0)],64)}),128)),pi(" Global Top "),Bt(ft(vV)),ft(e)?(Ge(),Jn(ft(e),{key:0})):pi("v-if",!0),ft(ru)?pi("v-if",!0):(Ge(),Jn(Gve,{key:1}))],64))}}),Yve=yi({__name:"Play",setup(r){Dn(Zn),yge();const e=Tn();function n(u){var d;nN.value||((d=u.target)==null?void 0:d.id)==="slide-container"&&(u.screenX/window.innerWidth>.6?zd():Ud())}$we(e);const s=Ht(()=>M0e.value||nN.value);hu();const a=hu();return Up(()=>import("./DrawingControls.a933f129.js"),["assets/DrawingControls.a933f129.js","assets/DrawingControls.vue_vue_type_script_setup_true_lang.6a3cb5a1.js"]).then(u=>a.value=u.default),(u,d)=>(Ge(),Ct(ai,null,[G("div",{id:"page-root",ref_key:"root",ref:e,class:"grid grid-cols-[1fr_max-content]",style:Qs(ft(WB))},[Bt(pV,{class:"w-full h-full",style:Qs({background:"var(--slidev-slide-container-background, black)"}),width:ft(pg)?ft(Op).width.value:void 0,scale:ft(Yw),onPointerdown:n},{default:Xn(()=>[Bt(Hve,{context:"slide"})]),controls:Xn(()=>[G("div",{class:er(["absolute bottom-0 left-0 transition duration-300 opacity-0 hover:opacity-100",[ft(s)?"opacity-100 right-0":"opacity-0 p-2",ft(Uy)?"pointer-events-none":""]])},[Bt(Lve,{class:"m-auto",persist:ft(s)},null,8,["persist"])],2),!ft(wr).drawings.presenterOnly&&!ft(dh)&&ft(a)?(Ge(),Jn(ft(a),{key:0,class:"ml-0"})):pi("v-if",!0)]),_:1},8,["style","width","scale"]),pi("v-if",!0)],4),Bt(Bge)],64))}});function _V(r){const e=Ht(()=>r.value.path),n=Ht(()=>Ks.length-1),s=Ht(()=>parseInt(e.value.split(/\//g).slice(-1)[0])||1),a=Ht(()=>q3(s.value)),u=Ht(()=>Ks.find(k=>k.path===`${s.value}`)),d=Ht(()=>{var k,S,A;return(A=(S=(k=u.value)==null?void 0:k.meta)==null?void 0:S.slide)==null?void 0:A.id}),f=Ht(()=>{var k,S;return((S=(k=u.value)==null?void 0:k.meta)==null?void 0:S.layout)||(s.value===1?"cover":"default")}),g=Ht(()=>Ks.find(k=>k.path===`${Math.min(Ks.length,s.value+1)}`)),_=Ht(()=>Ks.filter(k=>{var S,A;return(A=(S=k.meta)==null?void 0:S.slide)==null?void 0:A.title}).reduce((k,S)=>(l6(k,S),k),[])),y=Ht(()=>c6(_.value,u.value)),w=Ht(()=>u6(y.value));return{route:r,path:e,total:n,currentPage:s,currentPath:a,currentRoute:u,currentSlideId:d,currentLayout:f,nextRoute:g,rawTree:_,treeWithActiveStatuses:y,tree:w}}function bV(r,e,n){const s=Tn(0);ko(()=>{tl.afterEach(async()=>{await ko(),s.value+=1})});const a=Ht(()=>{var g,_;return s.value,((_=(g=e.value)==null?void 0:g.meta)==null?void 0:_.__clicksElements)||[]}),u=Ht(()=>{var g,_,y;return+((y=(_=(g=e.value)==null?void 0:g.meta)==null?void 0:_.clicks)!=null?y:a.value.length)}),d=Ht(()=>n.value<Ks.length-1||r.value<u.value),f=Ht(()=>n.value>1||r.value>0);return{clicks:r,clicksElements:a,clicksTotal:u,hasNext:d,hasPrev:f}}const jve=["id"],fN=yi({__name:"PrintSlideClick",props:{clicks:null,clicksElements:null,nav:null,route:null},emits:["update:clicksElements"],setup(r,{emit:e}){const n=r,s=ou(n,"clicksElements",e),a=Ht(()=>({height:`${qM}px`,width:`${Wd}px`})),u=hu();Up(()=>import("./DrawingPreview.39eaed2b.js"),[]).then(_=>u.value=_.default);const d=Ht(()=>n.clicks),f=bV(d,n.nav.currentRoute,n.nav.currentPage),g=Ht(()=>`${n.route.path.toString().padStart(3,"0")}-${(d.value+1).toString().padStart(2,"0")}`);return wa(Zn,Yr({nav:{...n.nav,...f},configs:wr,themeConfigs:Ht(()=>wr.themeConfig)})),(_,y)=>{var w;return Ge(),Ct("div",{id:ft(g),class:"slide-container",style:Qs(ft(a))},[Bt(ft(yV)),Bt(ft(t6),{is:(w=r.route)==null?void 0:w.component,"clicks-elements":ft(s),"onUpdate:clicksElements":y[0]||(y[0]=k=>Lr(s)?s.value=k:null),clicks:ft(d),"clicks-disabled":!1,class:er(ft(e6)(r.route)),route:r.route},null,8,["is","clicks-elements","clicks","class","route"]),ft(u)?(Ge(),Jn(ft(u),{key:0,page:+r.route.path},null,8,["page"])):pi("v-if",!0),Bt(ft(vV))],12,jve)}}}),$ve=yi({__name:"PrintSlide",props:{route:null},setup(r){var u;const e=r;Dn(Zn);const n=Yr(((u=e.route.meta)==null?void 0:u.__clicksElements)||[]),s=Ht(()=>e.route),a=_V(s);return(d,f)=>(Ge(),Ct(ai,null,[Bt(fN,{"clicks-elements":n,"onUpdate:clicksElements":f[0]||(f[0]=g=>n=g),clicks:0,nav:ft(a),route:ft(s)},null,8,["clicks-elements","nav","route"]),ft(Cy)?pi("v-if",!0):(Ge(!0),Ct(ai,{key:0},Xp(n.length,g=>(Ge(),Jn(fN,{key:g,clicks:g,nav:ft(a),route:ft(s)},null,8,["clicks","nav","route"]))),128))],64))}}),qve={id:"print-content"},Xve=yi({__name:"PrintContainer",props:{width:null},setup(r){const e=r;Dn(Zn);const n=Ht(()=>e.width),s=Ht(()=>e.width/Vd),a=Ht(()=>n.value/s.value),u=Ht(()=>a.value<Vd?n.value/Wd:s.value*Vd/Wd),d=Ks.slice(0,-1),f=Ht(()=>({"select-none":!wr.selectable,"slidev-code-line-numbers":wr.lineNumbers}));return wa(BB,u),(g,_)=>(Ge(),Ct("div",{id:"print-container",class:er(ft(f))},[G("div",qve,[(Ge(!0),Ct(ai,null,Xp(ft(d),y=>(Ge(),Jn($ve,{key:y.path,route:y},null,8,["route"]))),128))]),yr(g.$slots,"controls")],2))}});const Zve=yi({__name:"Print",setup(r){Dn(Zn);function e(n,{slots:s}){if(s.default)return po("style",s.default())}return kh(()=>{pg?document.body.parentNode.classList.add("print"):document.body.parentNode.classList.remove("print")}),(n,s)=>(Ge(),Ct(ai,null,[Bt(e,null,{default:Xn(()=>[Yt(" @page { size: "+Js(ft(Wd))+"px "+Js(ft(qM))+"px; margin: 0px; } ",1)]),_:1}),G("div",{id:"page-root",class:"grid grid-cols-[1fr_max-content]",style:Qs(ft(WB))},[Bt(Xve,{class:"w-full h-full",style:Qs({background:"var(--slidev-slide-container-background, black)"}),width:ft(Op).width.value},null,8,["style","width"])],4)],64))}});const Kve={class:"slidev-layout end"},Jve={__name:"end",setup(r){return Dn(Zn),(e,n)=>(Ge(),Ct("div",Kve," END "))}},Qve=gV(Jve,[["__scopeId","data-v-ab32435f"]]),eye={width:"322",height:"279",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tye=G("path",{d:"M92.5 38C73.3 18.8 22.833 4.667 0 0v278.5h322c-5.167-9.333-23.6-30-56-38-40.5-10-78.5-26.5-90-38.5s-32-44-39-79-20.5-61-44.5-85Z",fill:"#6EE7B7","fill-opacity":".3"},null,-1),nye=[tye];function iye(r,e){return Ge(),Ct("svg",eye,nye)}const rye={render:iye},sye={width:"317",height:"83",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oye=G("path",{d:"M6.095 82.907c-2.434.194-4.475.175-6.095 0h6.095c16.096-1.282 49.361-11.864 91.405-48 60.5-52 137-53.5 219.5 48H6.095Z",fill:"#E3F9B4"},null,-1),aye=[oye];function lye(r,e){return Ge(),Ct("svg",sye,aye)}const cye={render:lye},uye={class:"relative"},n6=yi({__name:"CornerCurves",setup(r){return Dn(Zn),(e,n)=>(Ge(),Ct("div",null,[G("div",uye,[Bt(ft(rye),{class:"absolute bottom-0"}),Bt(ft(cye),{class:"absolute bottom-0 left-40 opacity-40"})])]))}}),hye={key:0,class:"absolute w-full px-16 py-8 top-0 h-10 z-10"},dye=["src"],fye={__name:"LayoutHeader",setup(r){const e=Dn(Zn);return(n,s)=>ft(e).themeConfigs.logoHeader&&ft(e).nav.currentLayout==="intro"?(Ge(),Ct("header",hye,[G("img",{src:ft(e).themeConfigs.logoHeader,class:"w-16 h-16 object-contain"},null,8,dye)])):pi("v-if",!0)}};const pye={class:"slidev-layout intro grid"},mye={class:"flex flex-col justify-center text-center"},gye={__name:"intro",setup(r){return Dn(Zn),(e,n)=>{const s=fye,a=n6,u=Ch("AsGraphic");return Ge(),Ct("div",pye,[Bt(s),Bt(a,{class:"absolute left-0 top-0 transform rotate-90"}),G("div",mye,[yr(e.$slots,"default")]),Bt(u,{type:"zigzag",class:"absolute top-20 -right-30"})])}}},vye=G("h1",null,"Event Storming to Code",-1),yye=G("h2",null,"Aggregates",-1),_ye={__name:"1",setup(r){const e={theme:"penguin",colorSchema:"dark",themeConfig:{logoHeader:"https://jakubiec.github.io/event-storming-to-code/profile-photo-circle.png",eventUrl:"https://github.com/jakubiec/event-storming-to-code",eventLogo:"https://jakubiec.github.io/event-storming-to-code/github-mark.png"},layout:"intro",css:"unocss",class:"text-white",hideInToc:!0};return Dn(Zn),(n,s)=>(Ge(),Jn(gye,jr(zr(e)),{default:Xn(()=>[vye,yye]),_:1},16))}},bye={class:"slidev-layout relative"},xye={class:"flex items-center"},wye={class:"w-1/2"},kye={class:"w-1/2 relative"},Cye=["src"],Sye={__name:"presenter",setup(r){return Dn(Zn),(e,n)=>{const s=Ch("AsGraphic");return Ge(),Ct("div",bye,[G("div",xye,[G("div",wye,[yr(e.$slots,"default")]),G("figure",kye,[Bt(s,{type:"donut",absolute:"","top-2":"","left-0":"","text-secondary-200":""}),Bt(s,{type:"zigzag",absolute:"","bottom-2":"","right-0":""}),G("img",{src:e.$attrs.presenterImage||"https://anonymous-animals.azurewebsites.net/animal/penguin",class:"bg-gray-400 relative rounded-full object-cover h-80 w-80 border border-8 border-secondary-400 z-10"},null,8,Cye)])]),Bt(s,{type:"curve-small",absolute:"","bottom-0":"","right-0":""})])}}},Eye=G("h1",null,"Konrad Jakubiec",-1),Tye=G("h2",null,"Tech lead at",-1),Mye=G("p",null,[G("img",{src:"https://www.iceservices.com/wp-content/themes/ice/assets/img/iceservices-logo.png",alt:"ice"})],-1),Aye=G("ul",null,[G("li",null,"10 years of backend experience on JVM"),G("li",null,"DDD practitioner"),G("li",null,[Yt("DDD speaker ("),G("a",{href:"https://www.youtube.com/watch?v=QhcPk5zNk_Q",target:"_blank",rel:"noopener"},"DDD Europe 2021 lighting talk"),Yt(")")]),G("li",null,"Lives in Gdynia since 2021"),G("li",null,[Yt("Drummer at "),G("a",{href:"https://www.facebook.com/nomansslave",target:"_blank",rel:"noopener"},"No Man\u2019s Slave"),Yt(" band")])],-1),Lye={__name:"2",setup(r){const e={layout:"presenter",presenterImage:"https://avatars.githubusercontent.com/u/5813175?v=4",themeConfig:{eventUrl:"https://github.com/jakubiec/event-storming-to-code",eventLogo:"https://jakubiec.github.io/event-storming-to-code/github-mark.png"},css:"unocss",class:"text-white",hideInToc:!0,srcSequence:"pages/presenter.md"};return Dn(Zn),(n,s)=>(Ge(),Jn(Sye,jr(zr(e)),{default:Xn(()=>[Eye,Tye,Mye,Aye]),_:1},16))}},Rye={__name:"SlidesTotal",setup(r){const e=Dn(Zn);return(n,s)=>(Ge(),Ct("span",null,Js(ft(e).nav.total),1))}},Pye={__name:"SlideCurrentNo",setup(r){const e=Dn(Zn);return(n,s)=>(Ge(),Ct("span",null,Js(ft(e).nav.currentPage),1))}},Iye={id:"pages"},ds=yi({__name:"CurrentPage",setup(r){return Dn(Zn),(e,n)=>{const s=Pye,a=Rye;return Ge(),Ct("div",Iye,[Bt(s),Yt(" / "),Bt(a)])}}});const Dye=["href","innerHTML"],Nye=["href"],Oye=yi({__name:"Link",props:{to:null,title:null},setup(r){return Dn(Zn),(e,n)=>{const s=Ch("RouterLink");return!ft(pg)&&r.title?(Ge(),Jn(s,{key:0,to:String(r.to),onClick:n[0]||(n[0]=a=>a.target.blur()),innerHTML:r.title},null,8,["to","innerHTML"])):!ft(pg)&&!r.title?(Ge(),Jn(s,{key:1,to:String(r.to),onClick:n[1]||(n[1]=a=>a.target.blur())},{default:Xn(()=>[yr(e.$slots,"default")]),_:3},8,["to"])):ft(pg)&&r.title?(Ge(),Ct("a",{key:2,href:`#${r.to}`,innerHTML:r.title},null,8,Dye)):(Ge(),Ct("a",{key:3,href:`#${r.to}`},[yr(e.$slots,"default")],8,Nye))}}}),Fye=yi({__name:"titles",props:{no:null},setup(r){return(e,n)=>(Ge(),Ct("div",null,[+r.no==1?(Ge(),Ct(ai,{key:0},[Yt("Event Storming to Code")],64)):+r.no==2?(Ge(),Ct(ai,{key:1},[Yt("Konrad Jakubiec")],64)):+r.no==3?(Ge(),Ct(ai,{key:2},[Yt("Agenda")],64)):+r.no==4?(Ge(),Ct(ai,{key:3},[Yt("Example Domain")],64)):+r.no==5?(Ge(),Ct(ai,{key:4},[Yt("Design Level Event Storming")],64)):+r.no==6?(Ge(),Ct(ai,{key:5},[Yt("Example Mapping")],64)):+r.no==7?(Ge(),Ct(ai,{key:6},[Yt("Coding rules")],64)):+r.no==8?(Ge(),Ct(ai,{key:7},[Yt("Design Level Event Storming")],64)):+r.no==9?(Ge(),Ct(ai,{key:8},[Yt("Coding rules")],64)):+r.no==10?(Ge(),Ct(ai,{key:9},[Yt("Example Mapping")],64)):+r.no==11?(Ge(),Ct(ai,{key:10},[Yt("Example Mapping")],64)):+r.no==12?(Ge(),Ct(ai,{key:11},[Yt("Coding rules")],64)):+r.no==13?(Ge(),Ct(ai,{key:12},[Yt("Coding rules")],64)):+r.no==14?(Ge(),Ct(ai,{key:13},[Yt("Coding rules")],64)):+r.no==15?(Ge(),Ct(ai,{key:14},[Yt("Design Level Event Storming")],64)):+r.no==16?(Ge(),Ct(ai,{key:15},[Yt("Example Mapping")],64)):+r.no==17?(Ge(),Ct(ai,{key:16},[Yt("Example Mapping")],64)):+r.no==18?(Ge(),Ct(ai,{key:17},[Yt("Coding rules")],64)):+r.no==19?(Ge(),Ct(ai,{key:18},[Yt("Coding rules")],64)):+r.no==20?(Ge(),Ct(ai,{key:19},[Yt("Design Level Event Storming")],64)):+r.no==21?(Ge(),Ct(ai,{key:20},[Yt("Example Mapping")],64)):+r.no==22?(Ge(),Ct(ai,{key:21},[Yt("Coding rules")],64)):+r.no==23?(Ge(),Ct(ai,{key:22},[Yt("Coding rules")],64)):+r.no==24?(Ge(),Ct(ai,{key:23},[Yt("Summary")],64)):+r.no==25?(Ge(),Ct(ai,{key:24},[Yt("Summary")],64)):+r.no==26?(Ge(),Ct(ai,{key:25},[Yt("End")],64)):pi("v-if",!0)]))}}),Bye=yi({__name:"TocList",props:{level:{default:1},list:null,listClass:null},setup(r){const e=r;Dn(Zn);const n=Ht(()=>[...VB(e.listClass||[]),"slidev-toc-list",`slidev-toc-list-level-${e.level}`]);return(s,a)=>{const u=Oye,d=Ch("TocList",!0);return r.list&&r.list.length>0?(Ge(),Ct("ol",{key:0,class:er(ft(n))},[(Ge(!0),Ct(ai,null,Xp(r.list,f=>(Ge(),Ct("li",{key:f.path,class:er(["slidev-toc-item",[{"slidev-toc-item-active":f.active},{"slidev-toc-item-parent-active":f.activeParent}]])},[Bt(u,{to:f.path},{default:Xn(()=>[Bt(ft(Fye),{no:f.path},null,8,["no"])]),_:2},1032,["to"]),f.children.length>0?(Ge(),Jn(d,{key:0,level:r.level+1,list:f.children,"list-class":r.listClass},null,8,["level","list","list-class"])):pi("v-if",!0)],2))),128))],2)):pi("v-if",!0)}}}),Vye=yi({__name:"Toc",props:{columns:{default:1},listClass:{default:""},maxDepth:{default:1/0},minDepth:{default:1},mode:{default:"all"}},setup(r){const e=r,n=Dn(Zn);function s(f,g=1){if(g>Number(e.maxDepth))return[];if(g<Number(e.minDepth)){const _=f.find(y=>y.active||y.activeParent);return _?s(_.children,g+1):[]}return f.map(_=>({..._,children:s(_.children,g+1)}))}function a(f){return f.filter(g=>g.active||g.activeParent||g.hasActiveParent).map(g=>({...g,children:a(g.children)}))}function u(f){const g=f.some(_=>_.active||_.activeParent||_.hasActiveParent);return f.filter(()=>g).map(_=>({..._,children:u(_.children)}))}const d=Ht(()=>{const f=n==null?void 0:n.nav.tree;if(!f)return[];let g=s(f);return e.mode==="onlyCurrentTree"?g=a(g):e.mode==="onlySiblings"&&(g=u(g)),g});return(f,g)=>{const _=Bye;return Ge(),Ct("div",{class:"slidev-toc",style:Qs(`column-count:${r.columns}`)},[Bt(_,{level:1,list:ft(d),"list-class":r.listClass},null,8,["list","list-class"])],4)}}}),Wye={class:"my-auto z-10 relative"},zye={__name:"default",setup(r){return Dn(Zn),(e,n)=>{const s=n6;return Ge(),Ct("div",{class:er(["slidev-layout",{grid:e.$attrs.center}])},[Bt(s,{class:"absolute bottom-0 right-0 transform scale-x--100"}),G("div",Wye,[yr(e.$slots,"default")])],2)}}},Uye=G("h1",null,"Agenda",-1),Gye={__name:"3",setup(r){const e={class:"text-white",hideInToc:!0,srcSequence:"pages/agenda.md"};return Dn(Zn),(n,s)=>{const a=Vye,u=ds;return Ge(),Jn(zye,jr(zr(e)),{default:Xn(()=>[Uye,Bt(a),Bt(u)]),_:1},16)}}},Hye={class:"slidev-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Yye=G("path",{fill:"currentColor",d:"M10.08 10.86c.05-.33.16-.62.3-.86c.3-.56.81-.85 1.5-.86c.45 0 .86.2 1.15.49c.28.31.47.74.47 1.17h1.8c-.02-.47-.11-.9-.3-1.3c-.15-.38-.38-.72-.68-1c-1.45-1.34-4.14-1.15-5.37.37c-1.29 1.67-1.32 4.59-.01 6.26c1.21 1.49 3.86 1.7 5.3.37c.31-.25.56-.56.76-.92c.16-.36.27-.74.28-1.15H13.5c0 .21-.07.4-.16.57c-.09.19-.21.34-.34.47c-.33.26-.72.4-1.14.4c-.36-.01-.66-.08-.89-.23a1.41 1.41 0 0 1-.59-.64c-.5-.9-.42-2.15-.3-3.14M12 2C6.5 2 2 6.5 2 12c.53 13.27 19.5 13.26 20 0c0-5.5-4.5-10-10-10m0 18c-4.41 0-8-3.59-8-8c.44-10.61 15.56-10.61 16 0c0 4.41-3.59 8-8 8Z"},null,-1),jye=[Yye];function $ye(r,e){return Ge(),Ct("svg",Hye,jye)}const qye={name:"mdi-copyright",render:$ye},Xye={class:"slidev-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Zye=G("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z"},null,-1),Kye=[Zye];function Jye(r,e){return Ge(),Ct("svg",Xye,Kye)}const Qye={name:"mdi-plus",render:Jye},e_e={class:"slidev-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},t_e=G("path",{fill:"currentColor",d:"M21 3v12.5a3.5 3.5 0 0 1-3.5 3.5a3.5 3.5 0 0 1-3.5-3.5a3.5 3.5 0 0 1 3.5-3.5c.54 0 1.05.12 1.5.34V6.47L9 8.6v8.9A3.5 3.5 0 0 1 5.5 21A3.5 3.5 0 0 1 2 17.5A3.5 3.5 0 0 1 5.5 14c.54 0 1.05.12 1.5.34V6l14-3Z"},null,-1),n_e=[t_e];function i_e(r,e){return Ge(),Ct("svg",e_e,n_e)}const xV={name:"mdi-music",render:i_e};const r_e={class:"bg-section slidev-layout new-section"},s_e={class:"flex flex-col justify-center text-center"},Ah={__name:"new-section",setup(r){return Dn(Zn),(e,n)=>{const s=n6,a=Ch("Zigzags");return Ge(),Ct("div",r_e,[Bt(s,{class:"absolute left-0 top-0 transform rotate-90"}),G("div",s_e,[yr(e.$slots,"default")]),Bt(a,{class:"absolute top-20 -right-30"})])}}},o_e=G("h1",null,"Music Registration",-1),a_e=G("br",null,null,-1),l_e=G("br",null,null,-1),c_e=G("br",null,null,-1),u_e=G("br",null,null,-1),h_e={__name:"4",setup(r){const e={class:"text-white",layout:"new-section",srcSequence:"pages/example-domain.md"};return Dn(Zn),(n,s)=>{const a=xV,u=Qye,d=qye,f=ds;return Ge(),Jn(Ah,jr(zr(e)),{default:Xn(()=>[o_e,G("div",null,[a_e,l_e,c_e,u_e,Bt(a,{class:"text-9xl"}),Yt(),Bt(u,{class:"text-9xl animate-ping"}),Yt(),Bt(d,{class:"text-9xl"})]),Bt(f)]),_:1},16)}}};var sp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function d_e(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var yT={exports:{}};(function(r,e){var n=Object.defineProperty,s=(u,d,f)=>d in u?n(u,d,{enumerable:!0,configurable:!0,writable:!0,value:f}):u[d]=f,a=(u,d,f)=>(s(u,typeof d!="symbol"?d+"":d,f),f);(function(u,d){r.exports=d()})(sp,function(){var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof sp<"u"?sp:typeof self<"u"?self:{};function d(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var f={exports:{}};(function(t,i){(function(o,l){t.exports=l()})(u,function(){var o;function l(){return o.apply(null,arguments)}function h(M){return M instanceof Array||Object.prototype.toString.call(M)==="[object Array]"}function p(M){return M!=null&&Object.prototype.toString.call(M)==="[object Object]"}function m(M,H){return Object.prototype.hasOwnProperty.call(M,H)}function b(M){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(M).length===0;for(var H in M)if(m(M,H))return;return 1}function x(M){return M===void 0}function E(M){return typeof M=="number"||Object.prototype.toString.call(M)==="[object Number]"}function L(M){return M instanceof Date||Object.prototype.toString.call(M)==="[object Date]"}function I(M,H){for(var Q=[],ce=M.length,Ee=0;Ee<ce;++Ee)Q.push(H(M[Ee],Ee));return Q}function F(M,H){for(var Q in H)m(H,Q)&&(M[Q]=H[Q]);return m(H,"toString")&&(M.toString=H.toString),m(H,"valueOf")&&(M.valueOf=H.valueOf),M}function W(M,H,Q,ce){return xo(M,H,Q,ce,!0).utc()}function K(M){return M._pf==null&&(M._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),M._pf}function re(M){if(M._isValid==null){var H=K(M),Q=pe.call(H.parsedDateParts,function(ce){return ce!=null}),Q=!isNaN(M._d.getTime())&&H.overflow<0&&!H.empty&&!H.invalidEra&&!H.invalidMonth&&!H.invalidWeekday&&!H.weekdayMismatch&&!H.nullInput&&!H.invalidFormat&&!H.userInvalidated&&(!H.meridiem||H.meridiem&&Q);if(M._strict&&(Q=Q&&H.charsLeftOver===0&&H.unusedTokens.length===0&&H.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(M))return Q;M._isValid=Q}return M._isValid}function se(M){var H=W(NaN);return M!=null?F(K(H),M):K(H).userInvalidated=!0,H}var pe=Array.prototype.some||function(M){for(var H=Object(this),Q=H.length>>>0,ce=0;ce<Q;ce++)if(ce in H&&M.call(this,H[ce],ce,H))return!0;return!1},he=l.momentProperties=[],Ce=!1;function Le(M,H){var Q,ce,Ee,yt=he.length;if(x(H._isAMomentObject)||(M._isAMomentObject=H._isAMomentObject),x(H._i)||(M._i=H._i),x(H._f)||(M._f=H._f),x(H._l)||(M._l=H._l),x(H._strict)||(M._strict=H._strict),x(H._tzm)||(M._tzm=H._tzm),x(H._isUTC)||(M._isUTC=H._isUTC),x(H._offset)||(M._offset=H._offset),x(H._pf)||(M._pf=K(H)),x(H._locale)||(M._locale=H._locale),0<yt)for(Q=0;Q<yt;Q++)x(Ee=H[ce=he[Q]])||(M[ce]=Ee);return M}function Ve(M){Le(this,M),this._d=new Date(M._d!=null?M._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Ce===!1&&(Ce=!0,l.updateOffset(this),Ce=!1)}function je(M){return M instanceof Ve||M!=null&&M._isAMomentObject!=null}function Pe(M){l.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+M)}function ze(M,H){var Q=!0;return F(function(){if(l.deprecationHandler!=null&&l.deprecationHandler(null,M),Q){for(var ce,Ee,yt=[],Qt=arguments.length,pn=0;pn<Qt;pn++){if(ce="",typeof arguments[pn]=="object"){for(Ee in ce+=`
[`+pn+"] ",arguments[0])m(arguments[0],Ee)&&(ce+=Ee+": "+arguments[0][Ee]+", ");ce=ce.slice(0,-2)}else ce=arguments[pn];yt.push(ce)}Pe(M+`
Arguments: `+Array.prototype.slice.call(yt).join("")+`
`+new Error().stack),Q=!1}return H.apply(this,arguments)},H)}var xe={};function _e(M,H){l.deprecationHandler!=null&&l.deprecationHandler(M,H),xe[M]||(Pe(H),xe[M]=!0)}function de(M){return typeof Function<"u"&&M instanceof Function||Object.prototype.toString.call(M)==="[object Function]"}function te(M,H){var Q,ce=F({},M);for(Q in H)m(H,Q)&&(p(M[Q])&&p(H[Q])?(ce[Q]={},F(ce[Q],M[Q]),F(ce[Q],H[Q])):H[Q]!=null?ce[Q]=H[Q]:delete ce[Q]);for(Q in M)m(M,Q)&&!m(H,Q)&&p(M[Q])&&(ce[Q]=F({},ce[Q]));return ce}function be(M){M!=null&&this.set(M)}l.suppressDeprecationWarnings=!1,l.deprecationHandler=null;var q=Object.keys||function(M){var H,Q=[];for(H in M)m(M,H)&&Q.push(H);return Q};function ot(M,H,Q){var ce=""+Math.abs(M);return(0<=M?Q?"+":"":"-")+Math.pow(10,Math.max(0,H-ce.length)).toString().substr(1)+ce}var Z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Dt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,xn={},ln={};function Je(M,H,Q,ce){var Ee=typeof ce=="string"?function(){return this[ce]()}:ce;M&&(ln[M]=Ee),H&&(ln[H[0]]=function(){return ot(Ee.apply(this,arguments),H[1],H[2])}),Q&&(ln[Q]=function(){return this.localeData().ordinal(Ee.apply(this,arguments),M)})}function kt(M,H){return M.isValid()?(H=mt(H,M.localeData()),xn[H]=xn[H]||function(Q){for(var ce,Ee=Q.match(Z),yt=0,Qt=Ee.length;yt<Qt;yt++)ln[Ee[yt]]?Ee[yt]=ln[Ee[yt]]:Ee[yt]=(ce=Ee[yt]).match(/\[[\s\S]/)?ce.replace(/^\[|\]$/g,""):ce.replace(/\\/g,"");return function(pn){for(var Vn="",Mn=0;Mn<Qt;Mn++)Vn+=de(Ee[Mn])?Ee[Mn].call(pn,Q):Ee[Mn];return Vn}}(H),xn[H](M)):M.localeData().invalidDate()}function mt(M,H){var Q=5;function ce(Ee){return H.longDateFormat(Ee)||Ee}for(Dt.lastIndex=0;0<=Q&&Dt.test(M);)M=M.replace(Dt,ce),Dt.lastIndex=0,--Q;return M}var vt={};function Pt(M,H){var Q=M.toLowerCase();vt[Q]=vt[Q+"s"]=vt[H]=M}function rn(M){return typeof M=="string"?vt[M]||vt[M.toLowerCase()]:void 0}function nt(M){var H,Q,ce={};for(Q in M)m(M,Q)&&(H=rn(Q))&&(ce[H]=M[Q]);return ce}var Ln={};function Ie(M,H){Ln[M]=H}function Be(M){return M%4==0&&M%100!=0||M%400==0}function et(M){return M<0?Math.ceil(M)||0:Math.floor(M)}function Me(H){var H=+H,Q=0;return Q=H!=0&&isFinite(H)?et(H):Q}function ke(M,H){return function(Q){return Q!=null?(ct(this,M,Q),l.updateOffset(this,H),this):ge(this,M)}}function ge(M,H){return M.isValid()?M._d["get"+(M._isUTC?"UTC":"")+H]():NaN}function ct(M,H,Q){M.isValid()&&!isNaN(Q)&&(H==="FullYear"&&Be(M.year())&&M.month()===1&&M.date()===29?(Q=Me(Q),M._d["set"+(M._isUTC?"UTC":"")+H](Q,M.month(),zt(Q,M.month()))):M._d["set"+(M._isUTC?"UTC":"")+H](Q))}var le=/\d/,Ei=/\d\d/,Ft=/\d{3}/,Qf=/\d{4}/,gd=/[+-]?\d{6}/,Oe=/\d\d?/,Wn=/\d\d\d\d?/,dt=/\d\d\d\d\d\d?/,Cn=/\d{1,3}/,vd=/\d{1,4}/,md=/[+-]?\d{1,6}/,un=/\d+/,Kt=/[+-]?\d+/,hn=/Z|[+-]\d\d:?\d\d/gi,cn=/Z|[+-]\d\d(?::?\d\d)?/gi,qt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function _t(M,H,Q){ei[M]=de(H)?H:function(ce,Ee){return ce&&Q?Q:H}}function Si(M,H){return m(ei,M)?ei[M](H._strict,H._locale):new RegExp(ni(M.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(Q,ce,Ee,yt,Qt){return ce||Ee||yt||Qt})))}function ni(M){return M.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ei={},ii={};function $n(M,H){var Q,ce,Ee=H;for(typeof M=="string"&&(M=[M]),E(H)&&(Ee=function(yt,Qt){Qt[H]=Me(yt)}),ce=M.length,Q=0;Q<ce;Q++)ii[M[Q]]=Ee}function ar(M,H){$n(M,function(Q,ce,Ee,yt){Ee._w=Ee._w||{},H(Q,Ee._w,Ee,yt)})}var Yn,zn=0,Bn=1,sn=2,jt=3,bn=4,tn=5,Un=6,bt=7,gi=8;function zt(M,H){if(isNaN(M)||isNaN(H))return NaN;var Q=(H%(Q=12)+Q)%Q;return M+=(H-Q)/12,Q==1?Be(M)?29:28:31-Q%7%2}Yn=Array.prototype.indexOf||function(M){for(var H=0;H<this.length;++H)if(this[H]===M)return H;return-1},Je("M",["MM",2],"Mo",function(){return this.month()+1}),Je("MMM",0,0,function(M){return this.localeData().monthsShort(this,M)}),Je("MMMM",0,0,function(M){return this.localeData().months(this,M)}),Pt("month","M"),Ie("month",8),_t("M",Oe),_t("MM",Oe,Ei),_t("MMM",function(M,H){return H.monthsShortRegex(M)}),_t("MMMM",function(M,H){return H.monthsRegex(M)}),$n(["M","MM"],function(M,H){H[Bn]=Me(M)-1}),$n(["MMM","MMMM"],function(M,H,Q,ce){ce=Q._locale.monthsParse(M,ce,Q._strict),ce!=null?H[Bn]=ce:K(Q).invalidMonth=M});var di="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ri="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Fi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Bi=qt,Hi=qt;function ti(M,H){var Q;if(M.isValid()){if(typeof H=="string"){if(/^\d+$/.test(H))H=Me(H);else if(!E(H=M.localeData().monthsParse(H)))return}Q=Math.min(M.date(),zt(M.year(),H)),M._d["set"+(M._isUTC?"UTC":"")+"Month"](H,Q)}}function vi(M){return M!=null?(ti(this,M),l.updateOffset(this,!0),this):ge(this,"Month")}function Di(){function M(Qt,pn){return pn.length-Qt.length}for(var H,Q=[],ce=[],Ee=[],yt=0;yt<12;yt++)H=W([2e3,yt]),Q.push(this.monthsShort(H,"")),ce.push(this.months(H,"")),Ee.push(this.months(H,"")),Ee.push(this.monthsShort(H,""));for(Q.sort(M),ce.sort(M),Ee.sort(M),yt=0;yt<12;yt++)Q[yt]=ni(Q[yt]),ce[yt]=ni(ce[yt]);for(yt=0;yt<24;yt++)Ee[yt]=ni(Ee[yt]);this._monthsRegex=new RegExp("^("+Ee.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+ce.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+Q.join("|")+")","i")}function ui(M){return Be(M)?366:365}Je("Y",0,0,function(){var M=this.year();return M<=9999?ot(M,4):"+"+M}),Je(0,["YY",2],0,function(){return this.year()%100}),Je(0,["YYYY",4],0,"year"),Je(0,["YYYYY",5],0,"year"),Je(0,["YYYYYY",6,!0],0,"year"),Pt("year","y"),Ie("year",1),_t("Y",Kt),_t("YY",Oe,Ei),_t("YYYY",vd,Qf),_t("YYYYY",md,gd),_t("YYYYYY",md,gd),$n(["YYYYY","YYYYYY"],zn),$n("YYYY",function(M,H){H[zn]=M.length===2?l.parseTwoDigitYear(M):Me(M)}),$n("YY",function(M,H){H[zn]=l.parseTwoDigitYear(M)}),$n("Y",function(M,H){H[zn]=parseInt(M,10)}),l.parseTwoDigitYear=function(M){return Me(M)+(68<Me(M)?1900:2e3)};var Bx=ke("FullYear",!0);function nc(M,H,Q,ce,Ee,yt,Qt){var pn;return M<100&&0<=M?(pn=new Date(M+400,H,Q,ce,Ee,yt,Qt),isFinite(pn.getFullYear())&&pn.setFullYear(M)):pn=new Date(M,H,Q,ce,Ee,yt,Qt),pn}function Ga(M){var H;return M<100&&0<=M?((H=Array.prototype.slice.call(arguments))[0]=M+400,H=new Date(Date.UTC.apply(null,H)),isFinite(H.getUTCFullYear())&&H.setUTCFullYear(M)):H=new Date(Date.UTC.apply(null,arguments)),H}function Er(M,H,Q){return Q=7+H-Q,Q-(7+Ga(M,0,Q).getUTCDay()-H)%7-1}function bi(M,Qt,pn,ce,Ee){var yt,Qt=1+7*(Qt-1)+(7+pn-ce)%7+Er(M,ce,Ee),pn=Qt<=0?ui(yt=M-1)+Qt:Qt>ui(M)?(yt=M+1,Qt-ui(M)):(yt=M,Qt);return{year:yt,dayOfYear:pn}}function Fr(M,H,Q){var ce,Ee,yt=Er(M.year(),H,Q),yt=Math.floor((M.dayOfYear()-yt-1)/7)+1;return yt<1?ce=yt+Hr(Ee=M.year()-1,H,Q):yt>Hr(M.year(),H,Q)?(ce=yt-Hr(M.year(),H,Q),Ee=M.year()+1):(Ee=M.year(),ce=yt),{week:ce,year:Ee}}function Hr(M,Ee,Q){var ce=Er(M,Ee,Q),Ee=Er(M+1,Ee,Q);return(ui(M)-ce+Ee)/7}Je("w",["ww",2],"wo","week"),Je("W",["WW",2],"Wo","isoWeek"),Pt("week","w"),Pt("isoWeek","W"),Ie("week",5),Ie("isoWeek",5),_t("w",Oe),_t("ww",Oe,Ei),_t("W",Oe),_t("WW",Oe,Ei),ar(["w","ww","W","WW"],function(M,H,Q,ce){H[ce.substr(0,1)]=Me(M)});function Kr(M,H){return M.slice(H,7).concat(M.slice(0,H))}Je("d",0,"do","day"),Je("dd",0,0,function(M){return this.localeData().weekdaysMin(this,M)}),Je("ddd",0,0,function(M){return this.localeData().weekdaysShort(this,M)}),Je("dddd",0,0,function(M){return this.localeData().weekdays(this,M)}),Je("e",0,0,"weekday"),Je("E",0,0,"isoWeekday"),Pt("day","d"),Pt("weekday","e"),Pt("isoWeekday","E"),Ie("day",11),Ie("weekday",11),Ie("isoWeekday",11),_t("d",Oe),_t("e",Oe),_t("E",Oe),_t("dd",function(M,H){return H.weekdaysMinRegex(M)}),_t("ddd",function(M,H){return H.weekdaysShortRegex(M)}),_t("dddd",function(M,H){return H.weekdaysRegex(M)}),ar(["dd","ddd","dddd"],function(M,H,Q,ce){ce=Q._locale.weekdaysParse(M,ce,Q._strict),ce!=null?H.d=ce:K(Q).invalidWeekday=M}),ar(["d","e","E"],function(M,H,Q,ce){H[ce]=Me(M)});var Jr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Br="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),vs="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Os=qt,Gn=qt,rt=qt;function gn(){function M(Mn,Ti){return Ti.length-Mn.length}for(var H,Q,ce,Ee=[],yt=[],Qt=[],pn=[],Vn=0;Vn<7;Vn++)ce=W([2e3,1]).day(Vn),H=ni(this.weekdaysMin(ce,"")),Q=ni(this.weekdaysShort(ce,"")),ce=ni(this.weekdays(ce,"")),Ee.push(H),yt.push(Q),Qt.push(ce),pn.push(H),pn.push(Q),pn.push(ce);Ee.sort(M),yt.sort(M),Qt.sort(M),pn.sort(M),this._weekdaysRegex=new RegExp("^("+pn.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+Qt.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+yt.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+Ee.join("|")+")","i")}function Sn(){return this.hours()%12||12}function Pi(M,H){Je(M,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),H)})}function Tr(M,H){return H._meridiemParse}Je("H",["HH",2],0,"hour"),Je("h",["hh",2],0,Sn),Je("k",["kk",2],0,function(){return this.hours()||24}),Je("hmm",0,0,function(){return""+Sn.apply(this)+ot(this.minutes(),2)}),Je("hmmss",0,0,function(){return""+Sn.apply(this)+ot(this.minutes(),2)+ot(this.seconds(),2)}),Je("Hmm",0,0,function(){return""+this.hours()+ot(this.minutes(),2)}),Je("Hmmss",0,0,function(){return""+this.hours()+ot(this.minutes(),2)+ot(this.seconds(),2)}),Pi("a",!0),Pi("A",!1),Pt("hour","h"),Ie("hour",13),_t("a",Tr),_t("A",Tr),_t("H",Oe),_t("h",Oe),_t("k",Oe),_t("HH",Oe,Ei),_t("hh",Oe,Ei),_t("kk",Oe,Ei),_t("hmm",Wn),_t("hmmss",dt),_t("Hmm",Wn),_t("Hmmss",dt),$n(["H","HH"],jt),$n(["k","kk"],function(M,H,Q){M=Me(M),H[jt]=M===24?0:M}),$n(["a","A"],function(M,H,Q){Q._isPm=Q._locale.isPM(M),Q._meridiem=M}),$n(["h","hh"],function(M,H,Q){H[jt]=Me(M),K(Q).bigHour=!0}),$n("hmm",function(M,H,Q){var ce=M.length-2;H[jt]=Me(M.substr(0,ce)),H[bn]=Me(M.substr(ce)),K(Q).bigHour=!0}),$n("hmmss",function(M,H,Q){var ce=M.length-4,Ee=M.length-2;H[jt]=Me(M.substr(0,ce)),H[bn]=Me(M.substr(ce,2)),H[tn]=Me(M.substr(Ee)),K(Q).bigHour=!0}),$n("Hmm",function(M,H,Q){var ce=M.length-2;H[jt]=Me(M.substr(0,ce)),H[bn]=Me(M.substr(ce))}),$n("Hmmss",function(M,H,Q){var ce=M.length-4,Ee=M.length-2;H[jt]=Me(M.substr(0,ce)),H[bn]=Me(M.substr(ce,2)),H[tn]=Me(M.substr(Ee))}),qt=ke("Hours",!0);var xr,cs={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:di,monthsShort:Ri,week:{dow:0,doy:6},weekdays:Jr,weekdaysMin:vs,weekdaysShort:Br,meridiemParse:/[ap]\.?m?\.?/i},Wi={},Ir={};function dd(M){return M&&M.toLowerCase().replace("_","-")}function fd(M){for(var H,Q,ce,Ee,yt=0;yt<M.length;){for(H=(Ee=dd(M[yt]).split("-")).length,Q=(Q=dd(M[yt+1]))?Q.split("-"):null;0<H;){if(ce=ba(Ee.slice(0,H).join("-")))return ce;if(Q&&Q.length>=H&&function(Qt,pn){for(var Vn=Math.min(Qt.length,pn.length),Mn=0;Mn<Vn;Mn+=1)if(Qt[Mn]!==pn[Mn])return Mn;return Vn}(Ee,Q)>=H-1)break;H--}yt++}return xr}function ba(M){var H;if(Wi[M]===void 0&&!0&&t&&t.exports&&M.match("^[^/\\\\]*$")!=null)try{H=xr._abbr,d("./locale/"+M),Kn(H)}catch{Wi[M]=null}return Wi[M]}function Kn(M,H){return M&&((H=x(H)?xi(M):hi(M,H))?xr=H:typeof console<"u"&&console.warn&&console.warn("Locale "+M+" not found. Did you forget to load it?")),xr._abbr}function hi(M,H){if(H===null)return delete Wi[M],null;var Q,ce=cs;if(H.abbr=M,Wi[M]!=null)_e("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),ce=Wi[M]._config;else if(H.parentLocale!=null)if(Wi[H.parentLocale]!=null)ce=Wi[H.parentLocale]._config;else{if((Q=ba(H.parentLocale))==null)return Ir[H.parentLocale]||(Ir[H.parentLocale]=[]),Ir[H.parentLocale].push({name:M,config:H}),null;ce=Q._config}return Wi[M]=new be(te(ce,H)),Ir[M]&&Ir[M].forEach(function(Ee){hi(Ee.name,Ee.config)}),Kn(M),Wi[M]}function xi(M){var H;if(!(M=M&&M._locale&&M._locale._abbr?M._locale._abbr:M))return xr;if(!h(M)){if(H=ba(M))return H;M=[M]}return fd(M)}function Pn(M){var H=M._a;return H&&K(M).overflow===-2&&(H=H[Bn]<0||11<H[Bn]?Bn:H[sn]<1||H[sn]>zt(H[zn],H[Bn])?sn:H[jt]<0||24<H[jt]||H[jt]===24&&(H[bn]!==0||H[tn]!==0||H[Un]!==0)?jt:H[bn]<0||59<H[bn]?bn:H[tn]<0||59<H[tn]?tn:H[Un]<0||999<H[Un]?Un:-1,K(M)._overflowDayOfYear&&(H<zn||sn<H)&&(H=sn),K(M)._overflowWeeks&&H===-1&&(H=bt),K(M)._overflowWeekday&&H===-1&&(H=gi),K(M).overflow=H),M}var Qr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ze=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Xf=/Z|[+-]\d\d(?::?\d\d)?/,ht=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Bo=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Rx=/^\/?Date\((-?\d+)/i,vS=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Px={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ix(M){var H,Q,ce,Ee,yt,Qt,Vn=M._i,pn=Qr.exec(Vn)||Ze.exec(Vn),Vn=ht.length,Mn=Bo.length;if(pn){for(K(M).iso=!0,H=0,Q=Vn;H<Q;H++)if(ht[H][1].exec(pn[1])){Ee=ht[H][0],ce=ht[H][2]!==!1;break}if(Ee==null)M._isValid=!1;else{if(pn[3]){for(H=0,Q=Mn;H<Q;H++)if(Bo[H][1].exec(pn[3])){yt=(pn[2]||" ")+Bo[H][0];break}if(yt==null)return void(M._isValid=!1)}if(ce||yt==null){if(pn[4]){if(!Xf.exec(pn[4]))return void(M._isValid=!1);Qt="Z"}M._f=Ee+(yt||"")+(Qt||""),Uv(M)}else M._isValid=!1}}else M._isValid=!1}function Fs(M,H,Q,ce,Ee,yt){return M=[function(Qt){Qt=parseInt(Qt,10);{if(Qt<=49)return 2e3+Qt;if(Qt<=999)return 1900+Qt}return Qt}(M),Ri.indexOf(H),parseInt(Q,10),parseInt(ce,10),parseInt(Ee,10)],yt&&M.push(parseInt(yt,10)),M}function Qc(M){var H,Q,ce,Ee,yt=vS.exec(M._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));yt?(H=Fs(yt[4],yt[3],yt[2],yt[5],yt[6],yt[7]),Q=yt[1],ce=H,Ee=M,Q&&Br.indexOf(Q)!==new Date(ce[0],ce[1],ce[2]).getDay()?(K(Ee).weekdayMismatch=!0,Ee._isValid=!1):(M._a=H,M._tzm=(Q=yt[8],ce=yt[9],Ee=yt[10],Q?Px[Q]:ce?0:60*(((Q=parseInt(Ee,10))-(ce=Q%100))/100)+ce),M._d=Ga.apply(null,M._a),M._d.setUTCMinutes(M._d.getUTCMinutes()-M._tzm),K(M).rfc2822=!0)):M._isValid=!1}function eu(M,H,Q){return M!=null?M:H!=null?H:Q}function Zf(M){var H,Q,ce,Ee,yt,Qt,pn,Vn,Mn,Ti,fi,us=[];if(!M._d){for(ce=M,Ee=new Date(l.now()),Q=ce._useUTC?[Ee.getUTCFullYear(),Ee.getUTCMonth(),Ee.getUTCDate()]:[Ee.getFullYear(),Ee.getMonth(),Ee.getDate()],M._w&&M._a[sn]==null&&M._a[Bn]==null&&((Ee=(ce=M)._w).GG!=null||Ee.W!=null||Ee.E!=null?(Vn=1,Mn=4,yt=eu(Ee.GG,ce._a[zn],Fr(hr(),1,4).year),Qt=eu(Ee.W,1),((pn=eu(Ee.E,1))<1||7<pn)&&(Ti=!0)):(Vn=ce._locale._week.dow,Mn=ce._locale._week.doy,fi=Fr(hr(),Vn,Mn),yt=eu(Ee.gg,ce._a[zn],fi.year),Qt=eu(Ee.w,fi.week),Ee.d!=null?((pn=Ee.d)<0||6<pn)&&(Ti=!0):Ee.e!=null?(pn=Ee.e+Vn,(Ee.e<0||6<Ee.e)&&(Ti=!0)):pn=Vn),Qt<1||Qt>Hr(yt,Vn,Mn)?K(ce)._overflowWeeks=!0:Ti!=null?K(ce)._overflowWeekday=!0:(fi=bi(yt,Qt,pn,Vn,Mn),ce._a[zn]=fi.year,ce._dayOfYear=fi.dayOfYear)),M._dayOfYear!=null&&(Ee=eu(M._a[zn],Q[zn]),(M._dayOfYear>ui(Ee)||M._dayOfYear===0)&&(K(M)._overflowDayOfYear=!0),Ti=Ga(Ee,0,M._dayOfYear),M._a[Bn]=Ti.getUTCMonth(),M._a[sn]=Ti.getUTCDate()),H=0;H<3&&M._a[H]==null;++H)M._a[H]=us[H]=Q[H];for(;H<7;H++)M._a[H]=us[H]=M._a[H]==null?H===2?1:0:M._a[H];M._a[jt]===24&&M._a[bn]===0&&M._a[tn]===0&&M._a[Un]===0&&(M._nextDay=!0,M._a[jt]=0),M._d=(M._useUTC?Ga:nc).apply(null,us),yt=M._useUTC?M._d.getUTCDay():M._d.getDay(),M._tzm!=null&&M._d.setUTCMinutes(M._d.getUTCMinutes()-M._tzm),M._nextDay&&(M._a[jt]=24),M._w&&M._w.d!==void 0&&M._w.d!==yt&&(K(M).weekdayMismatch=!0)}}function Uv(M){if(M._f===l.ISO_8601)Ix(M);else if(M._f===l.RFC_2822)Qc(M);else{M._a=[],K(M).empty=!0;for(var H,Q,ce,Ee,yt,Qt=""+M._i,pn=Qt.length,Vn=0,Mn=mt(M._f,M._locale).match(Z)||[],Ti=Mn.length,fi=0;fi<Ti;fi++)Q=Mn[fi],(H=(Qt.match(Si(Q,M))||[])[0])&&(0<(ce=Qt.substr(0,Qt.indexOf(H))).length&&K(M).unusedInput.push(ce),Qt=Qt.slice(Qt.indexOf(H)+H.length),Vn+=H.length),ln[Q]?(H?K(M).empty=!1:K(M).unusedTokens.push(Q),ce=Q,yt=M,(Ee=H)!=null&&m(ii,ce)&&ii[ce](Ee,yt._a,yt,ce)):M._strict&&!H&&K(M).unusedTokens.push(Q);K(M).charsLeftOver=pn-Vn,0<Qt.length&&K(M).unusedInput.push(Qt),M._a[jt]<=12&&K(M).bigHour===!0&&0<M._a[jt]&&(K(M).bigHour=void 0),K(M).parsedDateParts=M._a.slice(0),K(M).meridiem=M._meridiem,M._a[jt]=function(us,Bs,sc){return sc==null?Bs:us.meridiemHour!=null?us.meridiemHour(Bs,sc):us.isPM!=null?((us=us.isPM(sc))&&Bs<12&&(Bs+=12),Bs=us||Bs!==12?Bs:0):Bs}(M._locale,M._a[jt],M._meridiem),(pn=K(M).era)!==null&&(M._a[zn]=M._locale.erasConvertYear(pn,M._a[zn])),Zf(M),Pn(M)}}function Dx(M){var H,Q,ce,Ee=M._i,yt=M._f;return M._locale=M._locale||xi(M._l),Ee===null||yt===void 0&&Ee===""?se({nullInput:!0}):(typeof Ee=="string"&&(M._i=Ee=M._locale.preparse(Ee)),je(Ee)?new Ve(Pn(Ee)):(L(Ee)?M._d=Ee:h(yt)?function(Qt){var pn,Vn,Mn,Ti,fi,us,Bs=!1,sc=Qt._f.length;if(sc===0)return K(Qt).invalidFormat=!0,Qt._d=new Date(NaN);for(Ti=0;Ti<sc;Ti++)fi=0,us=!1,pn=Le({},Qt),Qt._useUTC!=null&&(pn._useUTC=Qt._useUTC),pn._f=Qt._f[Ti],Uv(pn),re(pn)&&(us=!0),fi=(fi+=K(pn).charsLeftOver)+10*K(pn).unusedTokens.length,K(pn).score=fi,Bs?fi<Mn&&(Mn=fi,Vn=pn):(Mn==null||fi<Mn||us)&&(Mn=fi,Vn=pn,us&&(Bs=!0));F(Qt,Vn||pn)}(M):yt?Uv(M):x(yt=(Ee=M)._i)?Ee._d=new Date(l.now()):L(yt)?Ee._d=new Date(yt.valueOf()):typeof yt=="string"?(Q=Ee,(H=Rx.exec(Q._i))!==null?Q._d=new Date(+H[1]):(Ix(Q),Q._isValid===!1&&(delete Q._isValid,Qc(Q),Q._isValid===!1&&(delete Q._isValid,Q._strict?Q._isValid=!1:l.createFromInputFallback(Q))))):h(yt)?(Ee._a=I(yt.slice(0),function(Qt){return parseInt(Qt,10)}),Zf(Ee)):p(yt)?(H=Ee)._d||(ce=(Q=nt(H._i)).day===void 0?Q.date:Q.day,H._a=I([Q.year,Q.month,ce,Q.hour,Q.minute,Q.second,Q.millisecond],function(Qt){return Qt&&parseInt(Qt,10)}),Zf(H)):E(yt)?Ee._d=new Date(yt):l.createFromInputFallback(Ee),re(M)||(M._d=null),M))}function xo(M,H,Q,ce,Ee){var yt={};return H!==!0&&H!==!1||(ce=H,H=void 0),Q!==!0&&Q!==!1||(ce=Q,Q=void 0),(p(M)&&b(M)||h(M)&&M.length===0)&&(M=void 0),yt._isAMomentObject=!0,yt._useUTC=yt._isUTC=Ee,yt._l=Q,yt._i=M,yt._f=H,yt._strict=ce,(Ee=new Ve(Pn(Dx(Ee=yt))))._nextDay&&(Ee.add(1,"d"),Ee._nextDay=void 0),Ee}function hr(M,H,Q,ce){return xo(M,H,Q,ce,!1)}l.createFromInputFallback=ze("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(M){M._d=new Date(M._i+(M._useUTC?" UTC":""))}),l.ISO_8601=function(){},l.RFC_2822=function(){},Wn=ze("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var M=hr.apply(null,arguments);return this.isValid()&&M.isValid()?M<this?this:M:se()}),dt=ze("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var M=hr.apply(null,arguments);return this.isValid()&&M.isValid()?this<M?this:M:se()});function na(M,H){var Q,ce;if(!(H=H.length===1&&h(H[0])?H[0]:H).length)return hr();for(Q=H[0],ce=1;ce<H.length;++ce)H[ce].isValid()&&!H[ce][M](Q)||(Q=H[ce]);return Q}var eh=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ic(H){var H=nt(H),Q=H.year||0,ce=H.quarter||0,Ee=H.month||0,yt=H.week||H.isoWeek||0,Qt=H.day||0,pn=H.hour||0,Vn=H.minute||0,Mn=H.second||0,Ti=H.millisecond||0;this._isValid=function(fi){var us,Bs,sc=!1,CS=eh.length;for(us in fi)if(m(fi,us)&&(Yn.call(eh,us)===-1||fi[us]!=null&&isNaN(fi[us])))return!1;for(Bs=0;Bs<CS;++Bs)if(fi[eh[Bs]]){if(sc)return!1;parseFloat(fi[eh[Bs]])!==Me(fi[eh[Bs]])&&(sc=!0)}return!0}(H),this._milliseconds=+Ti+1e3*Mn+6e4*Vn+1e3*pn*60*60,this._days=+Qt+7*yt,this._months=+Ee+3*ce+12*Q,this._data={},this._locale=xi(),this._bubble()}function th(M){return M instanceof ic}function Ha(M){return M<0?-1*Math.round(-1*M):Math.round(M)}function Gv(M,H){Je(M,0,0,function(){var Q=this.utcOffset(),ce="+";return Q<0&&(Q=-Q,ce="-"),ce+ot(~~(Q/60),2)+H+ot(~~Q%60,2)})}Gv("Z",":"),Gv("ZZ",""),_t("Z",cn),_t("ZZ",cn),$n(["Z","ZZ"],function(M,H,Q){Q._useUTC=!0,Q._tzm=Kf(cn,M)});var k0=/([\+\-]|\d\d)/gi;function Kf(M,Q){var Q=(Q||"").match(M);return Q===null?null:(Q=60*(M=((Q[Q.length-1]||[])+"").match(k0)||["-",0,0])[1]+Me(M[2]))===0?0:M[0]==="+"?Q:-Q}function Ya(M,H){var Q;return H._isUTC?(H=H.clone(),Q=(je(M)||L(M)?M:hr(M)).valueOf()-H.valueOf(),H._d.setTime(H._d.valueOf()+Q),l.updateOffset(H,!1),H):hr(M).local()}function yS(M){return-Math.round(M._d.getTimezoneOffset())}function fD(){return!!this.isValid()&&this._isUTC&&this._offset===0}l.updateOffset=function(){};var Cue=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Sue=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function rc(M,H){var Q,ce=M,Ee=null;return th(M)?ce={ms:M._milliseconds,d:M._days,M:M._months}:E(M)||!isNaN(+M)?(ce={},H?ce[H]=+M:ce.milliseconds=+M):(Ee=Cue.exec(M))?(Q=Ee[1]==="-"?-1:1,ce={y:0,d:Me(Ee[sn])*Q,h:Me(Ee[jt])*Q,m:Me(Ee[bn])*Q,s:Me(Ee[tn])*Q,ms:Me(Ha(1e3*Ee[Un]))*Q}):(Ee=Sue.exec(M))?(Q=Ee[1]==="-"?-1:1,ce={y:Jf(Ee[2],Q),M:Jf(Ee[3],Q),w:Jf(Ee[4],Q),d:Jf(Ee[5],Q),h:Jf(Ee[6],Q),m:Jf(Ee[7],Q),s:Jf(Ee[8],Q)}):ce==null?ce={}:typeof ce=="object"&&("from"in ce||"to"in ce)&&(H=function(yt,Qt){var pn;return!yt.isValid()||!Qt.isValid()?{milliseconds:0,months:0}:(Qt=Ya(Qt,yt),yt.isBefore(Qt)?pn=pD(yt,Qt):((pn=pD(Qt,yt)).milliseconds=-pn.milliseconds,pn.months=-pn.months),pn)}(hr(ce.from),hr(ce.to)),(ce={}).ms=H.milliseconds,ce.M=H.months),Ee=new ic(ce),th(M)&&m(M,"_locale")&&(Ee._locale=M._locale),th(M)&&m(M,"_isValid")&&(Ee._isValid=M._isValid),Ee}function Jf(M,H){return M=M&&parseFloat(M.replace(",",".")),(isNaN(M)?0:M)*H}function pD(M,H){var Q={};return Q.months=H.month()-M.month()+12*(H.year()-M.year()),M.clone().add(Q.months,"M").isAfter(H)&&--Q.months,Q.milliseconds=+H-+M.clone().add(Q.months,"M"),Q}function mD(M,H){return function(Q,ce){var Ee;return ce===null||isNaN(+ce)||(_e(H,"moment()."+H+"(period, number) is deprecated. Please use moment()."+H+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),Ee=Q,Q=ce,ce=Ee),gD(this,rc(Q,ce),M),this}}function gD(M,Qt,Q,ce){var Ee=Qt._milliseconds,yt=Ha(Qt._days),Qt=Ha(Qt._months);M.isValid()&&(ce=ce==null||ce,Qt&&ti(M,ge(M,"Month")+Qt*Q),yt&&ct(M,"Date",ge(M,"Date")+yt*Q),Ee&&M._d.setTime(M._d.valueOf()+Ee*Q),ce&&l.updateOffset(M,yt||Qt))}rc.fn=ic.prototype,rc.invalid=function(){return rc(NaN)},di=mD(1,"add"),Jr=mD(-1,"subtract");function vD(M){return typeof M=="string"||M instanceof String}function Eue(M){return je(M)||L(M)||vD(M)||E(M)||function(H){var Q=h(H),ce=!1;return Q&&(ce=H.filter(function(Ee){return!E(Ee)&&vD(H)}).length===0),Q&&ce}(M)||function(H){var Q,ce,Ee=p(H)&&!b(H),yt=!1,Qt=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],pn=Qt.length;for(Q=0;Q<pn;Q+=1)ce=Qt[Q],yt=yt||m(H,ce);return Ee&&yt}(M)||M==null}function Nx(M,Ee){if(M.date()<Ee.date())return-Nx(Ee,M);var Q=12*(Ee.year()-M.year())+(Ee.month()-M.month()),ce=M.clone().add(Q,"months"),Ee=Ee-ce<0?(Ee-ce)/(ce-M.clone().add(Q-1,"months")):(Ee-ce)/(M.clone().add(1+Q,"months")-ce);return-(Q+Ee)||0}function yD(M){return M===void 0?this._locale._abbr:((M=xi(M))!=null&&(this._locale=M),this)}l.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",l.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",vs=ze("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(M){return M===void 0?this.localeData():this.locale(M)});function _D(){return this._locale}var bD=126227808e5;function C0(M,H){return(M%H+H)%H}function xD(M,H,Q){return M<100&&0<=M?new Date(M+400,H,Q)-bD:new Date(M,H,Q).valueOf()}function wD(M,H,Q){return M<100&&0<=M?Date.UTC(M+400,H,Q)-bD:Date.UTC(M,H,Q)}function _S(M,H){return H.erasAbbrRegex(M)}function bS(){for(var M=[],H=[],Q=[],ce=[],Ee=this.eras(),yt=0,Qt=Ee.length;yt<Qt;++yt)H.push(ni(Ee[yt].name)),M.push(ni(Ee[yt].abbr)),Q.push(ni(Ee[yt].narrow)),ce.push(ni(Ee[yt].name)),ce.push(ni(Ee[yt].abbr)),ce.push(ni(Ee[yt].narrow));this._erasRegex=new RegExp("^("+ce.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+H.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+M.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+Q.join("|")+")","i")}function Ox(M,H){Je(0,[M,M.length],0,H)}function kD(M,H,Q,ce,Ee){var yt;return M==null?Fr(this,ce,Ee).year:(yt=Hr(M,ce,Ee),function(Qt,pn,Vn,Mn,Ti){return Qt=bi(Qt,pn,Vn,Mn,Ti),pn=Ga(Qt.year,0,Qt.dayOfYear),this.year(pn.getUTCFullYear()),this.month(pn.getUTCMonth()),this.date(pn.getUTCDate()),this}.call(this,M,H=yt<H?yt:H,Q,ce,Ee))}Je("N",0,0,"eraAbbr"),Je("NN",0,0,"eraAbbr"),Je("NNN",0,0,"eraAbbr"),Je("NNNN",0,0,"eraName"),Je("NNNNN",0,0,"eraNarrow"),Je("y",["y",1],"yo","eraYear"),Je("y",["yy",2],0,"eraYear"),Je("y",["yyy",3],0,"eraYear"),Je("y",["yyyy",4],0,"eraYear"),_t("N",_S),_t("NN",_S),_t("NNN",_S),_t("NNNN",function(M,H){return H.erasNameRegex(M)}),_t("NNNNN",function(M,H){return H.erasNarrowRegex(M)}),$n(["N","NN","NNN","NNNN","NNNNN"],function(M,H,Q,ce){ce=Q._locale.erasParse(M,ce,Q._strict),ce?K(Q).era=ce:K(Q).invalidEra=M}),_t("y",un),_t("yy",un),_t("yyy",un),_t("yyyy",un),_t("yo",function(M,H){return H._eraYearOrdinalRegex||un}),$n(["y","yy","yyy","yyyy"],zn),$n(["yo"],function(M,H,Q,ce){var Ee;Q._locale._eraYearOrdinalRegex&&(Ee=M.match(Q._locale._eraYearOrdinalRegex)),Q._locale.eraYearOrdinalParse?H[zn]=Q._locale.eraYearOrdinalParse(M,Ee):H[zn]=parseInt(M,10)}),Je(0,["gg",2],0,function(){return this.weekYear()%100}),Je(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ox("gggg","weekYear"),Ox("ggggg","weekYear"),Ox("GGGG","isoWeekYear"),Ox("GGGGG","isoWeekYear"),Pt("weekYear","gg"),Pt("isoWeekYear","GG"),Ie("weekYear",1),Ie("isoWeekYear",1),_t("G",Kt),_t("g",Kt),_t("GG",Oe,Ei),_t("gg",Oe,Ei),_t("GGGG",vd,Qf),_t("gggg",vd,Qf),_t("GGGGG",md,gd),_t("ggggg",md,gd),ar(["gggg","ggggg","GGGG","GGGGG"],function(M,H,Q,ce){H[ce.substr(0,2)]=Me(M)}),ar(["gg","GG"],function(M,H,Q,ce){H[ce]=l.parseTwoDigitYear(M)}),Je("Q",0,"Qo","quarter"),Pt("quarter","Q"),Ie("quarter",7),_t("Q",le),$n("Q",function(M,H){H[Bn]=3*(Me(M)-1)}),Je("D",["DD",2],"Do","date"),Pt("date","D"),Ie("date",9),_t("D",Oe),_t("DD",Oe,Ei),_t("Do",function(M,H){return M?H._dayOfMonthOrdinalParse||H._ordinalParse:H._dayOfMonthOrdinalParseLenient}),$n(["D","DD"],sn),$n("Do",function(M,H){H[sn]=Me(M.match(Oe)[0])}),vd=ke("Date",!0),Je("DDD",["DDDD",3],"DDDo","dayOfYear"),Pt("dayOfYear","DDD"),Ie("dayOfYear",4),_t("DDD",Cn),_t("DDDD",Ft),$n(["DDD","DDDD"],function(M,H,Q){Q._dayOfYear=Me(M)}),Je("m",["mm",2],0,"minute"),Pt("minute","m"),Ie("minute",14),_t("m",Oe),_t("mm",Oe,Ei),$n(["m","mm"],bn);var pd,Qf=ke("Minutes",!1),md=(Je("s",["ss",2],0,"second"),Pt("second","s"),Ie("second",15),_t("s",Oe),_t("ss",Oe,Ei),$n(["s","ss"],tn),ke("Seconds",!1));for(Je("S",0,0,function(){return~~(this.millisecond()/100)}),Je(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Je(0,["SSS",3],0,"millisecond"),Je(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Je(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Je(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Je(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Je(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Je(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Pt("millisecond","ms"),Ie("millisecond",16),_t("S",Cn,le),_t("SS",Cn,Ei),_t("SSS",Cn,Ft),pd="SSSS";pd.length<=9;pd+="S")_t(pd,un);function Tue(M,H){H[Un]=Me(1e3*("0."+M))}for(pd="S";pd.length<=9;pd+="S")$n(pd,Tue);gd=ke("Milliseconds",!1),Je("z",0,0,"zoneAbbr"),Je("zz",0,0,"zoneName"),le=Ve.prototype;function CD(M){return M}le.add=di,le.calendar=function(Q,Ee){arguments.length===1&&(arguments[0]?Eue(arguments[0])?(Q=arguments[0],Ee=void 0):function(yt){for(var Qt=p(yt)&&!b(yt),pn=!1,Vn=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],Mn=0;Mn<Vn.length;Mn+=1)pn=pn||m(yt,Vn[Mn]);return Qt&&pn}(arguments[0])&&(Ee=arguments[0],Q=void 0):Ee=Q=void 0);var Q=Q||hr(),ce=Ya(Q,this).startOf("day"),ce=l.calendarFormat(this,ce)||"sameElse",Ee=Ee&&(de(Ee[ce])?Ee[ce].call(this,Q):Ee[ce]);return this.format(Ee||this.localeData().calendar(ce,this,hr(Q)))},le.clone=function(){return new Ve(this)},le.diff=function(M,H,Q){var ce,Ee,yt;if(!this.isValid())return NaN;if(!(ce=Ya(M,this)).isValid())return NaN;switch(Ee=6e4*(ce.utcOffset()-this.utcOffset()),H=rn(H)){case"year":yt=Nx(this,ce)/12;break;case"month":yt=Nx(this,ce);break;case"quarter":yt=Nx(this,ce)/3;break;case"second":yt=(this-ce)/1e3;break;case"minute":yt=(this-ce)/6e4;break;case"hour":yt=(this-ce)/36e5;break;case"day":yt=(this-ce-Ee)/864e5;break;case"week":yt=(this-ce-Ee)/6048e5;break;default:yt=this-ce}return Q?yt:et(yt)},le.endOf=function(M){var H,Q;if((M=rn(M))===void 0||M==="millisecond"||!this.isValid())return this;switch(Q=this._isUTC?wD:xD,M){case"year":H=Q(this.year()+1,0,1)-1;break;case"quarter":H=Q(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":H=Q(this.year(),this.month()+1,1)-1;break;case"week":H=Q(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":H=Q(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":H=Q(this.year(),this.month(),this.date()+1)-1;break;case"hour":H=this._d.valueOf(),H+=36e5-C0(H+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":H=this._d.valueOf(),H+=6e4-C0(H,6e4)-1;break;case"second":H=this._d.valueOf(),H+=1e3-C0(H,1e3)-1;break}return this._d.setTime(H),l.updateOffset(this,!0),this},le.format=function(M){return M=M||(this.isUtc()?l.defaultFormatUtc:l.defaultFormat),M=kt(this,M),this.localeData().postformat(M)},le.from=function(M,H){return this.isValid()&&(je(M)&&M.isValid()||hr(M).isValid())?rc({to:this,from:M}).locale(this.locale()).humanize(!H):this.localeData().invalidDate()},le.fromNow=function(M){return this.from(hr(),M)},le.to=function(M,H){return this.isValid()&&(je(M)&&M.isValid()||hr(M).isValid())?rc({from:this,to:M}).locale(this.locale()).humanize(!H):this.localeData().invalidDate()},le.toNow=function(M){return this.to(hr(),M)},le.get=function(M){return de(this[M=rn(M)])?this[M]():this},le.invalidAt=function(){return K(this).overflow},le.isAfter=function(M,H){return M=je(M)?M:hr(M),!(!this.isValid()||!M.isValid())&&((H=rn(H)||"millisecond")==="millisecond"?this.valueOf()>M.valueOf():M.valueOf()<this.clone().startOf(H).valueOf())},le.isBefore=function(M,H){return M=je(M)?M:hr(M),!(!this.isValid()||!M.isValid())&&((H=rn(H)||"millisecond")==="millisecond"?this.valueOf()<M.valueOf():this.clone().endOf(H).valueOf()<M.valueOf())},le.isBetween=function(M,H,Q,ce){return M=je(M)?M:hr(M),H=je(H)?H:hr(H),!!(this.isValid()&&M.isValid()&&H.isValid())&&((ce=ce||"()")[0]==="("?this.isAfter(M,Q):!this.isBefore(M,Q))&&(ce[1]===")"?this.isBefore(H,Q):!this.isAfter(H,Q))},le.isSame=function(Q,H){var Q=je(Q)?Q:hr(Q);return!(!this.isValid()||!Q.isValid())&&((H=rn(H)||"millisecond")==="millisecond"?this.valueOf()===Q.valueOf():(Q=Q.valueOf(),this.clone().startOf(H).valueOf()<=Q&&Q<=this.clone().endOf(H).valueOf()))},le.isSameOrAfter=function(M,H){return this.isSame(M,H)||this.isAfter(M,H)},le.isSameOrBefore=function(M,H){return this.isSame(M,H)||this.isBefore(M,H)},le.isValid=function(){return re(this)},le.lang=vs,le.locale=yD,le.localeData=_D,le.max=dt,le.min=Wn,le.parsingFlags=function(){return F({},K(this))},le.set=function(M,H){if(typeof M=="object")for(var Q=function(yt){var Qt,pn=[];for(Qt in yt)m(yt,Qt)&&pn.push({unit:Qt,priority:Ln[Qt]});return pn.sort(function(Vn,Mn){return Vn.priority-Mn.priority}),pn}(M=nt(M)),ce=Q.length,Ee=0;Ee<ce;Ee++)this[Q[Ee].unit](M[Q[Ee].unit]);else if(de(this[M=rn(M)]))return this[M](H);return this},le.startOf=function(M){var H,Q;if((M=rn(M))===void 0||M==="millisecond"||!this.isValid())return this;switch(Q=this._isUTC?wD:xD,M){case"year":H=Q(this.year(),0,1);break;case"quarter":H=Q(this.year(),this.month()-this.month()%3,1);break;case"month":H=Q(this.year(),this.month(),1);break;case"week":H=Q(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":H=Q(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":H=Q(this.year(),this.month(),this.date());break;case"hour":H=this._d.valueOf(),H-=C0(H+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":H=this._d.valueOf(),H-=C0(H,6e4);break;case"second":H=this._d.valueOf(),H-=C0(H,1e3);break}return this._d.setTime(H),l.updateOffset(this,!0),this},le.subtract=Jr,le.toArray=function(){var M=this;return[M.year(),M.month(),M.date(),M.hour(),M.minute(),M.second(),M.millisecond()]},le.toObject=function(){var M=this;return{years:M.year(),months:M.month(),date:M.date(),hours:M.hours(),minutes:M.minutes(),seconds:M.seconds(),milliseconds:M.milliseconds()}},le.toDate=function(){return new Date(this.valueOf())},le.toISOString=function(M){if(!this.isValid())return null;var H=(M=M!==!0)?this.clone().utc():this;return H.year()<0||9999<H.year()?kt(H,M?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):de(Date.prototype.toISOString)?M?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",kt(H,"Z")):kt(H,M?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},le.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var M,H="moment",Q="";return this.isLocal()||(H=this.utcOffset()===0?"moment.utc":"moment.parseZone",Q="Z"),H="["+H+'("]',M=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(H+M+"-MM-DD[T]HH:mm:ss.SSS"+(Q+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(le[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),le.toJSON=function(){return this.isValid()?this.toISOString():null},le.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},le.unix=function(){return Math.floor(this.valueOf()/1e3)},le.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},le.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},le.eraName=function(){for(var M,H=this.localeData().eras(),Q=0,ce=H.length;Q<ce;++Q)if(M=this.clone().startOf("day").valueOf(),H[Q].since<=M&&M<=H[Q].until||H[Q].until<=M&&M<=H[Q].since)return H[Q].name;return""},le.eraNarrow=function(){for(var M,H=this.localeData().eras(),Q=0,ce=H.length;Q<ce;++Q)if(M=this.clone().startOf("day").valueOf(),H[Q].since<=M&&M<=H[Q].until||H[Q].until<=M&&M<=H[Q].since)return H[Q].narrow;return""},le.eraAbbr=function(){for(var M,H=this.localeData().eras(),Q=0,ce=H.length;Q<ce;++Q)if(M=this.clone().startOf("day").valueOf(),H[Q].since<=M&&M<=H[Q].until||H[Q].until<=M&&M<=H[Q].since)return H[Q].abbr;return""},le.eraYear=function(){for(var M,H,Q=this.localeData().eras(),ce=0,Ee=Q.length;ce<Ee;++ce)if(M=Q[ce].since<=Q[ce].until?1:-1,H=this.clone().startOf("day").valueOf(),Q[ce].since<=H&&H<=Q[ce].until||Q[ce].until<=H&&H<=Q[ce].since)return(this.year()-l(Q[ce].since).year())*M+Q[ce].offset;return this.year()},le.year=Bx,le.isLeapYear=function(){return Be(this.year())},le.weekYear=function(M){return kD.call(this,M,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},le.isoWeekYear=function(M){return kD.call(this,M,this.isoWeek(),this.isoWeekday(),1,4)},le.quarter=le.quarters=function(M){return M==null?Math.ceil((this.month()+1)/3):this.month(3*(M-1)+this.month()%3)},le.month=vi,le.daysInMonth=function(){return zt(this.year(),this.month())},le.week=le.weeks=function(M){var H=this.localeData().week(this);return M==null?H:this.add(7*(M-H),"d")},le.isoWeek=le.isoWeeks=function(M){var H=Fr(this,1,4).week;return M==null?H:this.add(7*(M-H),"d")},le.weeksInYear=function(){var M=this.localeData()._week;return Hr(this.year(),M.dow,M.doy)},le.weeksInWeekYear=function(){var M=this.localeData()._week;return Hr(this.weekYear(),M.dow,M.doy)},le.isoWeeksInYear=function(){return Hr(this.year(),1,4)},le.isoWeeksInISOWeekYear=function(){return Hr(this.isoWeekYear(),1,4)},le.date=vd,le.day=le.days=function(M){if(!this.isValid())return M!=null?this:NaN;var H,Q,ce=this._isUTC?this._d.getUTCDay():this._d.getDay();return M!=null?(H=M,Q=this.localeData(),M=typeof H!="string"?H:isNaN(H)?typeof(H=Q.weekdaysParse(H))=="number"?H:null:parseInt(H,10),this.add(M-ce,"d")):ce},le.weekday=function(M){if(!this.isValid())return M!=null?this:NaN;var H=(this.day()+7-this.localeData()._week.dow)%7;return M==null?H:this.add(M-H,"d")},le.isoWeekday=function(M){return this.isValid()?M!=null?(H=M,Q=this.localeData(),Q=typeof H=="string"?Q.weekdaysParse(H)%7||7:isNaN(H)?null:H,this.day(this.day()%7?Q:Q-7)):this.day()||7:M!=null?this:NaN;var H,Q},le.dayOfYear=function(M){var H=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return M==null?H:this.add(M-H,"d")},le.hour=le.hours=qt,le.minute=le.minutes=Qf,le.second=le.seconds=md,le.millisecond=le.milliseconds=gd,le.utcOffset=function(M,H,Q){var ce,Ee=this._offset||0;if(!this.isValid())return M!=null?this:NaN;if(M==null)return this._isUTC?Ee:yS(this);if(typeof M=="string"){if((M=Kf(cn,M))===null)return this}else Math.abs(M)<16&&!Q&&(M*=60);return!this._isUTC&&H&&(ce=yS(this)),this._offset=M,this._isUTC=!0,ce!=null&&this.add(ce,"m"),Ee!==M&&(!H||this._changeInProgress?gD(this,rc(M-Ee,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,l.updateOffset(this,!0),this._changeInProgress=null)),this},le.utc=function(M){return this.utcOffset(0,M)},le.local=function(M){return this._isUTC&&(this.utcOffset(0,M),this._isUTC=!1,M&&this.subtract(yS(this),"m")),this},le.parseZone=function(){var M;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((M=Kf(hn,this._i))!=null?this.utcOffset(M):this.utcOffset(0,!0)),this},le.hasAlignedHourOffset=function(M){return!!this.isValid()&&(M=M?hr(M).utcOffset():0,(this.utcOffset()-M)%60==0)},le.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},le.isLocal=function(){return!!this.isValid()&&!this._isUTC},le.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},le.isUtc=fD,le.isUTC=fD,le.zoneAbbr=function(){return this._isUTC?"UTC":""},le.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},le.dates=ze("dates accessor is deprecated. Use date instead.",vd),le.months=ze("months accessor is deprecated. Use month instead",vi),le.years=ze("years accessor is deprecated. Use year instead",Bx),le.zone=ze("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(M,H){return M!=null?(this.utcOffset(M=typeof M!="string"?-M:M,H),this):-this.utcOffset()}),le.isDSTShifted=ze("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!x(this._isDSTShifted))return this._isDSTShifted;var M,H={};return Le(H,this),(H=Dx(H))._a?(M=(H._isUTC?W:hr)(H._a),this._isDSTShifted=this.isValid()&&0<function(Q,ce,Ee){for(var yt=Math.min(Q.length,ce.length),Qt=Math.abs(Q.length-ce.length),pn=0,Vn=0;Vn<yt;Vn++)(Ee&&Q[Vn]!==ce[Vn]||!Ee&&Me(Q[Vn])!==Me(ce[Vn]))&&pn++;return pn+Qt}(H._a,M.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),Ei=be.prototype;function Fx(M,H,Q,yt){var Ee=xi(),yt=W().set(yt,H);return Ee[Q](yt,M)}function SD(M,H,Q){if(E(M)&&(H=M,M=void 0),M=M||"",H!=null)return Fx(M,H,Q,"month");for(var ce=[],Ee=0;Ee<12;Ee++)ce[Ee]=Fx(M,Ee,Q,"month");return ce}function xS(M,H,Q,ce){H=(typeof M=="boolean"?E(H)&&(Q=H,H=void 0):(H=M,M=!1,E(Q=H)&&(Q=H,H=void 0)),H||"");var Ee,yt=xi(),Qt=M?yt._week.dow:0,pn=[];if(Q!=null)return Fx(H,(Q+Qt)%7,ce,"day");for(Ee=0;Ee<7;Ee++)pn[Ee]=Fx(H,(Ee+Qt)%7,ce,"day");return pn}Ei.calendar=function(M,H,Q){return de(M=this._calendar[M]||this._calendar.sameElse)?M.call(H,Q):M},Ei.longDateFormat=function(M){var H=this._longDateFormat[M],Q=this._longDateFormat[M.toUpperCase()];return H||!Q?H:(this._longDateFormat[M]=Q.match(Z).map(function(ce){return ce==="MMMM"||ce==="MM"||ce==="DD"||ce==="dddd"?ce.slice(1):ce}).join(""),this._longDateFormat[M])},Ei.invalidDate=function(){return this._invalidDate},Ei.ordinal=function(M){return this._ordinal.replace("%d",M)},Ei.preparse=CD,Ei.postformat=CD,Ei.relativeTime=function(M,H,Q,ce){var Ee=this._relativeTime[Q];return de(Ee)?Ee(M,H,Q,ce):Ee.replace(/%d/i,M)},Ei.pastFuture=function(M,H){return de(M=this._relativeTime[0<M?"future":"past"])?M(H):M.replace(/%s/i,H)},Ei.set=function(M){var H,Q;for(Q in M)m(M,Q)&&(de(H=M[Q])?this[Q]=H:this["_"+Q]=H);this._config=M,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Ei.eras=function(M,H){for(var Q,ce=this._eras||xi("en")._eras,Ee=0,yt=ce.length;Ee<yt;++Ee){switch(typeof ce[Ee].since){case"string":Q=l(ce[Ee].since).startOf("day"),ce[Ee].since=Q.valueOf();break}switch(typeof ce[Ee].until){case"undefined":ce[Ee].until=1/0;break;case"string":Q=l(ce[Ee].until).startOf("day").valueOf(),ce[Ee].until=Q.valueOf();break}}return ce},Ei.erasParse=function(M,H,Q){var ce,Ee,yt,Qt,pn,Vn=this.eras();for(M=M.toUpperCase(),ce=0,Ee=Vn.length;ce<Ee;++ce)if(yt=Vn[ce].name.toUpperCase(),Qt=Vn[ce].abbr.toUpperCase(),pn=Vn[ce].narrow.toUpperCase(),Q)switch(H){case"N":case"NN":case"NNN":if(Qt===M)return Vn[ce];break;case"NNNN":if(yt===M)return Vn[ce];break;case"NNNNN":if(pn===M)return Vn[ce];break}else if(0<=[yt,Qt,pn].indexOf(M))return Vn[ce]},Ei.erasConvertYear=function(M,H){var Q=M.since<=M.until?1:-1;return H===void 0?l(M.since).year():l(M.since).year()+(H-M.offset)*Q},Ei.erasAbbrRegex=function(M){return m(this,"_erasAbbrRegex")||bS.call(this),M?this._erasAbbrRegex:this._erasRegex},Ei.erasNameRegex=function(M){return m(this,"_erasNameRegex")||bS.call(this),M?this._erasNameRegex:this._erasRegex},Ei.erasNarrowRegex=function(M){return m(this,"_erasNarrowRegex")||bS.call(this),M?this._erasNarrowRegex:this._erasRegex},Ei.months=function(M,H){return M?(h(this._months)?this._months:this._months[(this._months.isFormat||Fi).test(H)?"format":"standalone"])[M.month()]:h(this._months)?this._months:this._months.standalone},Ei.monthsShort=function(M,H){return M?(h(this._monthsShort)?this._monthsShort:this._monthsShort[Fi.test(H)?"format":"standalone"])[M.month()]:h(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Ei.monthsParse=function(M,H,Q){var ce,Ee;if(this._monthsParseExact)return function(fi,Qt,pn){var Vn,Mn,Ti,fi=fi.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],Vn=0;Vn<12;++Vn)Ti=W([2e3,Vn]),this._shortMonthsParse[Vn]=this.monthsShort(Ti,"").toLocaleLowerCase(),this._longMonthsParse[Vn]=this.months(Ti,"").toLocaleLowerCase();return pn?Qt==="MMM"?(Mn=Yn.call(this._shortMonthsParse,fi))!==-1?Mn:null:(Mn=Yn.call(this._longMonthsParse,fi))!==-1?Mn:null:Qt==="MMM"?(Mn=Yn.call(this._shortMonthsParse,fi))!==-1||(Mn=Yn.call(this._longMonthsParse,fi))!==-1?Mn:null:(Mn=Yn.call(this._longMonthsParse,fi))!==-1||(Mn=Yn.call(this._shortMonthsParse,fi))!==-1?Mn:null}.call(this,M,H,Q);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),ce=0;ce<12;ce++)if(Ee=W([2e3,ce]),Q&&!this._longMonthsParse[ce]&&(this._longMonthsParse[ce]=new RegExp("^"+this.months(Ee,"").replace(".","")+"$","i"),this._shortMonthsParse[ce]=new RegExp("^"+this.monthsShort(Ee,"").replace(".","")+"$","i")),Q||this._monthsParse[ce]||(Ee="^"+this.months(Ee,"")+"|^"+this.monthsShort(Ee,""),this._monthsParse[ce]=new RegExp(Ee.replace(".",""),"i")),Q&&H==="MMMM"&&this._longMonthsParse[ce].test(M)||Q&&H==="MMM"&&this._shortMonthsParse[ce].test(M)||!Q&&this._monthsParse[ce].test(M))return ce},Ei.monthsRegex=function(M){return this._monthsParseExact?(m(this,"_monthsRegex")||Di.call(this),M?this._monthsStrictRegex:this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=Hi),this._monthsStrictRegex&&M?this._monthsStrictRegex:this._monthsRegex)},Ei.monthsShortRegex=function(M){return this._monthsParseExact?(m(this,"_monthsRegex")||Di.call(this),M?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Bi),this._monthsShortStrictRegex&&M?this._monthsShortStrictRegex:this._monthsShortRegex)},Ei.week=function(M){return Fr(M,this._week.dow,this._week.doy).week},Ei.firstDayOfYear=function(){return this._week.doy},Ei.firstDayOfWeek=function(){return this._week.dow},Ei.weekdays=function(M,H){return H=h(this._weekdays)?this._weekdays:this._weekdays[M&&M!==!0&&this._weekdays.isFormat.test(H)?"format":"standalone"],M===!0?Kr(H,this._week.dow):M?H[M.day()]:H},Ei.weekdaysMin=function(M){return M===!0?Kr(this._weekdaysMin,this._week.dow):M?this._weekdaysMin[M.day()]:this._weekdaysMin},Ei.weekdaysShort=function(M){return M===!0?Kr(this._weekdaysShort,this._week.dow):M?this._weekdaysShort[M.day()]:this._weekdaysShort},Ei.weekdaysParse=function(M,H,Q){var ce,Ee;if(this._weekdaysParseExact)return function(fi,Qt,pn){var Vn,Mn,Ti,fi=fi.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],Vn=0;Vn<7;++Vn)Ti=W([2e3,1]).day(Vn),this._minWeekdaysParse[Vn]=this.weekdaysMin(Ti,"").toLocaleLowerCase(),this._shortWeekdaysParse[Vn]=this.weekdaysShort(Ti,"").toLocaleLowerCase(),this._weekdaysParse[Vn]=this.weekdays(Ti,"").toLocaleLowerCase();return pn?Qt==="dddd"?(Mn=Yn.call(this._weekdaysParse,fi))!==-1?Mn:null:Qt==="ddd"?(Mn=Yn.call(this._shortWeekdaysParse,fi))!==-1?Mn:null:(Mn=Yn.call(this._minWeekdaysParse,fi))!==-1?Mn:null:Qt==="dddd"?(Mn=Yn.call(this._weekdaysParse,fi))!==-1||(Mn=Yn.call(this._shortWeekdaysParse,fi))!==-1||(Mn=Yn.call(this._minWeekdaysParse,fi))!==-1?Mn:null:Qt==="ddd"?(Mn=Yn.call(this._shortWeekdaysParse,fi))!==-1||(Mn=Yn.call(this._weekdaysParse,fi))!==-1||(Mn=Yn.call(this._minWeekdaysParse,fi))!==-1?Mn:null:(Mn=Yn.call(this._minWeekdaysParse,fi))!==-1||(Mn=Yn.call(this._weekdaysParse,fi))!==-1||(Mn=Yn.call(this._shortWeekdaysParse,fi))!==-1?Mn:null}.call(this,M,H,Q);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),ce=0;ce<7;ce++)if(Ee=W([2e3,1]).day(ce),Q&&!this._fullWeekdaysParse[ce]&&(this._fullWeekdaysParse[ce]=new RegExp("^"+this.weekdays(Ee,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[ce]=new RegExp("^"+this.weekdaysShort(Ee,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[ce]=new RegExp("^"+this.weekdaysMin(Ee,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[ce]||(Ee="^"+this.weekdays(Ee,"")+"|^"+this.weekdaysShort(Ee,"")+"|^"+this.weekdaysMin(Ee,""),this._weekdaysParse[ce]=new RegExp(Ee.replace(".",""),"i")),Q&&H==="dddd"&&this._fullWeekdaysParse[ce].test(M)||Q&&H==="ddd"&&this._shortWeekdaysParse[ce].test(M)||Q&&H==="dd"&&this._minWeekdaysParse[ce].test(M)||!Q&&this._weekdaysParse[ce].test(M))return ce},Ei.weekdaysRegex=function(M){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||gn.call(this),M?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=Os),this._weekdaysStrictRegex&&M?this._weekdaysStrictRegex:this._weekdaysRegex)},Ei.weekdaysShortRegex=function(M){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||gn.call(this),M?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gn),this._weekdaysShortStrictRegex&&M?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Ei.weekdaysMinRegex=function(M){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||gn.call(this),M?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=rt),this._weekdaysMinStrictRegex&&M?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Ei.isPM=function(M){return(M+"").toLowerCase().charAt(0)==="p"},Ei.meridiem=function(M,H,Q){return 11<M?Q?"pm":"PM":Q?"am":"AM"},Kn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(M){var H=M%10;return M+(Me(M%100/10)===1?"th":H==1?"st":H==2?"nd":H==3?"rd":"th")}}),l.lang=ze("moment.lang is deprecated. Use moment.locale instead.",Kn),l.langData=ze("moment.langData is deprecated. Use moment.localeData instead.",xi);var nh=Math.abs;function ED(M,H,Q,ce){return H=rc(H,Q),M._milliseconds+=ce*H._milliseconds,M._days+=ce*H._days,M._months+=ce*H._months,M._bubble()}function TD(M){return M<0?Math.floor(M):Math.ceil(M)}function MD(M){return 4800*M/146097}function wS(M){return 146097*M/4800}function ih(M){return function(){return this.as(M)}}Cn=ih("ms"),Ft=ih("s"),di=ih("m"),dt=ih("h"),Wn=ih("d"),Jr=ih("w"),qt=ih("M"),Qf=ih("Q"),md=ih("y");function ep(M){return function(){return this.isValid()?this._data[M]:NaN}}var gd=ep("milliseconds"),vd=ep("seconds"),Bx=ep("minutes"),Ei=ep("hours"),Mue=ep("days"),Aue=ep("months"),Lue=ep("years"),rh=Math.round,S0={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Rue(M,H,Q,ce){var Mn=rc(M).abs(),Ti=rh(Mn.as("s")),Ee=rh(Mn.as("m")),yt=rh(Mn.as("h")),Qt=rh(Mn.as("d")),pn=rh(Mn.as("M")),Vn=rh(Mn.as("w")),Mn=rh(Mn.as("y")),Ti=(Ti<=Q.ss?["s",Ti]:Ti<Q.s&&["ss",Ti])||Ee<=1&&["m"]||Ee<Q.m&&["mm",Ee]||yt<=1&&["h"]||yt<Q.h&&["hh",yt]||Qt<=1&&["d"]||Qt<Q.d&&["dd",Qt];return(Ti=(Ti=Q.w!=null?Ti||Vn<=1&&["w"]||Vn<Q.w&&["ww",Vn]:Ti)||pn<=1&&["M"]||pn<Q.M&&["MM",pn]||Mn<=1&&["y"]||["yy",Mn])[2]=H,Ti[3]=0<+M,Ti[4]=ce,function(fi,us,Bs,sc,CS){return CS.relativeTime(us||1,!!Bs,fi,sc)}.apply(null,Ti)}var kS=Math.abs;function E0(M){return(0<M)-(M<0)||+M}function Vx(){if(!this.isValid())return this.localeData().invalidDate();var M,H,Q,ce,Ee,yt,Qt,pn=kS(this._milliseconds)/1e3,Vn=kS(this._days),Mn=kS(this._months),Ti=this.asSeconds();return Ti?(M=et(pn/60),H=et(M/60),pn%=60,M%=60,Q=et(Mn/12),Mn%=12,ce=pn?pn.toFixed(3).replace(/\.?0+$/,""):"",Ee=E0(this._months)!==E0(Ti)?"-":"",yt=E0(this._days)!==E0(Ti)?"-":"",Qt=E0(this._milliseconds)!==E0(Ti)?"-":"",(Ti<0?"-":"")+"P"+(Q?Ee+Q+"Y":"")+(Mn?Ee+Mn+"M":"")+(Vn?yt+Vn+"D":"")+(H||M||pn?"T":"")+(H?Qt+H+"H":"")+(M?Qt+M+"M":"")+(pn?Qt+ce+"S":"")):"P0D"}var lr=ic.prototype;return lr.isValid=function(){return this._isValid},lr.abs=function(){var M=this._data;return this._milliseconds=nh(this._milliseconds),this._days=nh(this._days),this._months=nh(this._months),M.milliseconds=nh(M.milliseconds),M.seconds=nh(M.seconds),M.minutes=nh(M.minutes),M.hours=nh(M.hours),M.months=nh(M.months),M.years=nh(M.years),this},lr.add=function(M,H){return ED(this,M,H,1)},lr.subtract=function(M,H){return ED(this,M,H,-1)},lr.as=function(M){if(!this.isValid())return NaN;var H,Q,ce=this._milliseconds;if((M=rn(M))==="month"||M==="quarter"||M==="year")switch(H=this._days+ce/864e5,Q=this._months+MD(H),M){case"month":return Q;case"quarter":return Q/3;case"year":return Q/12}else switch(H=this._days+Math.round(wS(this._months)),M){case"week":return H/7+ce/6048e5;case"day":return H+ce/864e5;case"hour":return 24*H+ce/36e5;case"minute":return 1440*H+ce/6e4;case"second":return 86400*H+ce/1e3;case"millisecond":return Math.floor(864e5*H)+ce;default:throw new Error("Unknown unit "+M)}},lr.asMilliseconds=Cn,lr.asSeconds=Ft,lr.asMinutes=di,lr.asHours=dt,lr.asDays=Wn,lr.asWeeks=Jr,lr.asMonths=qt,lr.asQuarters=Qf,lr.asYears=md,lr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Me(this._months/12):NaN},lr._bubble=function(){var M=this._milliseconds,H=this._days,Q=this._months,ce=this._data;return 0<=M&&0<=H&&0<=Q||M<=0&&H<=0&&Q<=0||(M+=864e5*TD(wS(Q)+H),Q=H=0),ce.milliseconds=M%1e3,M=et(M/1e3),ce.seconds=M%60,M=et(M/60),ce.minutes=M%60,M=et(M/60),ce.hours=M%24,H+=et(M/24),Q+=M=et(MD(H)),H-=TD(wS(M)),M=et(Q/12),Q%=12,ce.days=H,ce.months=Q,ce.years=M,this},lr.clone=function(){return rc(this)},lr.get=function(M){return M=rn(M),this.isValid()?this[M+"s"]():NaN},lr.milliseconds=gd,lr.seconds=vd,lr.minutes=Bx,lr.hours=Ei,lr.days=Mue,lr.weeks=function(){return et(this.days()/7)},lr.months=Aue,lr.years=Lue,lr.humanize=function(M,H){if(!this.isValid())return this.localeData().invalidDate();var Q=!1,ce=S0;return typeof M=="object"&&(H=M,M=!1),typeof M=="boolean"&&(Q=M),typeof H=="object"&&(ce=Object.assign({},S0,H),H.s!=null&&H.ss==null&&(ce.ss=H.s-1)),M=this.localeData(),H=Rue(this,!Q,ce,M),Q&&(H=M.pastFuture(+this,H)),M.postformat(H)},lr.toISOString=Vx,lr.toString=Vx,lr.toJSON=Vx,lr.locale=yD,lr.localeData=_D,lr.toIsoString=ze("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Vx),lr.lang=vs,Je("X",0,0,"unix"),Je("x",0,0,"valueOf"),_t("x",Kt),_t("X",/[+-]?\d+(\.\d{1,3})?/),$n("X",function(M,H,Q){Q._d=new Date(1e3*parseFloat(M))}),$n("x",function(M,H,Q){Q._d=new Date(Me(M))}),l.version="2.29.4",o=hr,l.fn=le,l.min=function(){return na("isBefore",[].slice.call(arguments,0))},l.max=function(){return na("isAfter",[].slice.call(arguments,0))},l.now=function(){return Date.now?Date.now():+new Date},l.utc=W,l.unix=function(M){return hr(1e3*M)},l.months=function(M,H){return SD(M,H,"months")},l.isDate=L,l.locale=Kn,l.invalid=se,l.duration=rc,l.isMoment=je,l.weekdays=function(M,H,Q){return xS(M,H,Q,"weekdays")},l.parseZone=function(){return hr.apply(null,arguments).parseZone()},l.localeData=xi,l.isDuration=th,l.monthsShort=function(M,H){return SD(M,H,"monthsShort")},l.weekdaysMin=function(M,H,Q){return xS(M,H,Q,"weekdaysMin")},l.defineLocale=hi,l.updateLocale=function(M,H){var Q,ce;return H!=null?(ce=cs,Wi[M]!=null&&Wi[M].parentLocale!=null?Wi[M].set(te(Wi[M]._config,H)):(H=te(ce=(Q=ba(M))!=null?Q._config:ce,H),Q==null&&(H.abbr=M),(ce=new be(H)).parentLocale=Wi[M],Wi[M]=ce),Kn(M)):Wi[M]!=null&&(Wi[M].parentLocale!=null?(Wi[M]=Wi[M].parentLocale,M===Kn()&&Kn(M)):Wi[M]!=null&&delete Wi[M]),Wi[M]},l.locales=function(){return q(Wi)},l.weekdaysShort=function(M,H,Q){return xS(M,H,Q,"weekdaysShort")},l.normalizeUnits=rn,l.relativeTimeRounding=function(M){return M===void 0?rh:typeof M=="function"&&(rh=M,!0)},l.relativeTimeThreshold=function(M,H){return S0[M]!==void 0&&(H===void 0?S0[M]:(S0[M]=H,M==="s"&&(S0.ss=H-1),!0))},l.calendarFormat=function(M,H){return(M=M.diff(H,"days",!0))<-6?"sameElse":M<-1?"lastWeek":M<0?"lastDay":M<1?"sameDay":M<2?"nextDay":M<7?"nextWeek":"sameElse"},l.prototype=le,l.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},l})})(f);const g=f.exports,_={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},y={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},w=function(t="fatal"){let i=_.fatal;typeof t=="string"?(t=t.toLowerCase(),t in _&&(i=_[t])):typeof t=="number"&&(i=t),y.trace=()=>{},y.debug=()=>{},y.info=()=>{},y.warn=()=>{},y.error=()=>{},y.fatal=()=>{},i<=_.fatal&&(y.fatal=console.error?console.error.bind(console,k("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",k("FATAL"))),i<=_.error&&(y.error=console.error?console.error.bind(console,k("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",k("ERROR"))),i<=_.warn&&(y.warn=console.warn?console.warn.bind(console,k("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",k("WARN"))),i<=_.info&&(y.info=console.info?console.info.bind(console,k("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",k("INFO"))),i<=_.debug&&(y.debug=console.debug?console.debug.bind(console,k("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",k("DEBUG"))),i<=_.trace&&(y.trace=console.debug?console.debug.bind(console,k("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",k("TRACE")))},k=t=>`%c${g().format("ss.SSS")} : ${t} : `;var S={};Object.defineProperty(S,"__esModule",{value:!0});var A=S.sanitizeUrl=void 0,P=/^([^\w]*)(javascript|data|vbscript)/im,R=/&#(\w+)(^\w|;)?/g,O=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,B=/^([^:]+):/gm,N=[".","/"];function V(t){return N.indexOf(t[0])>-1}function U(t){return t.replace(R,function(i,o){return String.fromCharCode(o)})}function Y(t){var i=U(t||"").replace(O,"").trim();if(!i)return"about:blank";if(V(i))return i;var o=i.match(B);if(!o)return i;var l=o[0];return P.test(l)?"about:blank":i}A=S.sanitizeUrl=Y;function X(t,i){return t==null||i==null?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function $(t,i){return t==null||i==null?NaN:i<t?-1:i>t?1:i>=t?0:NaN}function ee(t){let i,o,l;t.length!==2?(i=X,o=(b,x)=>X(t(b),x),l=(b,x)=>t(b)-x):(i=t===X||t===$?t:ue,o=t,l=t);function h(b,x,E=0,L=b.length){if(E<L){if(i(x,x)!==0)return L;do{const I=E+L>>>1;o(b[I],x)<0?E=I+1:L=I}while(E<L)}return E}function p(b,x,E=0,L=b.length){if(E<L){if(i(x,x)!==0)return L;do{const I=E+L>>>1;o(b[I],x)<=0?E=I+1:L=I}while(E<L)}return E}function m(b,x,E=0,L=b.length){const I=h(b,x,E,L-1);return I>E&&l(b[I-1],x)>-l(b[I],x)?I-1:I}return{left:h,center:m,right:p}}function ue(){return 0}function Te(t){return t===null?NaN:+t}const $e=ee(X).right;ee(Te).center;const Ue=$e;class it extends Map{constructor(i,o=ne){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:o}}),i!=null)for(const[l,h]of i)this.set(l,h)}get(i){return super.get(tt(this,i))}has(i){return super.has(tt(this,i))}set(i,o){return super.set(St(this,i),o)}delete(i){return super.delete(ve(this,i))}}function tt({_intern:t,_key:i},o){const l=i(o);return t.has(l)?t.get(l):o}function St({_intern:t,_key:i},o){const l=i(o);return t.has(l)?t.get(l):(t.set(l,o),o)}function ve({_intern:t,_key:i},o){const l=i(o);return t.has(l)&&(o=t.get(l),t.delete(l)),o}function ne(t){return t!==null&&typeof t=="object"?t.valueOf():t}var me=Math.sqrt(50),qe=Math.sqrt(10),Se=Math.sqrt(2);function gt(t,i,o){var l,h=-1,p,m,b;if(i=+i,t=+t,o=+o,t===i&&o>0)return[t];if((l=i<t)&&(p=t,t=i,i=p),(b=Xt(t,i,o))===0||!isFinite(b))return[];if(b>0){let x=Math.round(t/b),E=Math.round(i/b);for(x*b<t&&++x,E*b>i&&--E,m=new Array(p=E-x+1);++h<p;)m[h]=(x+h)*b}else{b=-b;let x=Math.round(t*b),E=Math.round(i*b);for(x/b<t&&++x,E/b>i&&--E,m=new Array(p=E-x+1);++h<p;)m[h]=(x+h)/b}return l&&m.reverse(),m}function Xt(t,i,o){var l=(i-t)/Math.max(0,o),h=Math.floor(Math.log(l)/Math.LN10),p=l/Math.pow(10,h);return h>=0?(p>=me?10:p>=qe?5:p>=Se?2:1)*Math.pow(10,h):-Math.pow(10,-h)/(p>=me?10:p>=qe?5:p>=Se?2:1)}function He(t,i,o){var l=Math.abs(i-t)/Math.max(0,o),h=Math.pow(10,Math.floor(Math.log(l)/Math.LN10)),p=l/h;return p>=me?h*=10:p>=qe?h*=5:p>=Se&&(h*=2),i<t?-h:h}function Fe(t,i){let o;if(i===void 0)for(const l of t)l!=null&&(o<l||o===void 0&&l>=l)&&(o=l);else{let l=-1;for(let h of t)(h=i(h,++l,t))!=null&&(o<h||o===void 0&&h>=h)&&(o=h)}return o}function pt(t,i){let o;if(i===void 0)for(const l of t)l!=null&&(o>l||o===void 0&&l>=l)&&(o=l);else{let l=-1;for(let h of t)(h=i(h,++l,t))!=null&&(o>h||o===void 0&&h>=h)&&(o=h)}return o}function Rt(t){return t}var Vt=1,Ke=2,Ot=3,oe=4,ye=1e-6;function We(t){return"translate("+t+",0)"}function at(t){return"translate(0,"+t+")"}function st(t){return i=>+t(i)}function It(t,i){return i=Math.max(0,t.bandwidth()-i*2)/2,t.round()&&(i=Math.round(i)),o=>+t(o)+i}function At(){return!this.__axis}function Tt(t,i){var o=[],l=null,h=null,p=6,m=6,b=3,x=typeof window<"u"&&window.devicePixelRatio>1?0:.5,E=t===Vt||t===oe?-1:1,L=t===oe||t===Ke?"x":"y",I=t===Vt||t===Ot?We:at;function F(W){var K=l==null?i.ticks?i.ticks.apply(i,o):i.domain():l,re=h==null?i.tickFormat?i.tickFormat.apply(i,o):Rt:h,se=Math.max(p,0)+b,pe=i.range(),he=+pe[0]+x,Ce=+pe[pe.length-1]+x,Le=(i.bandwidth?It:st)(i.copy(),x),Ve=W.selection?W.selection():W,je=Ve.selectAll(".domain").data([null]),Pe=Ve.selectAll(".tick").data(K,i).order(),ze=Pe.exit(),xe=Pe.enter().append("g").attr("class","tick"),_e=Pe.select("line"),de=Pe.select("text");je=je.merge(je.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Pe=Pe.merge(xe),_e=_e.merge(xe.append("line").attr("stroke","currentColor").attr(L+"2",E*p)),de=de.merge(xe.append("text").attr("fill","currentColor").attr(L,E*se).attr("dy",t===Vt?"0em":t===Ot?"0.71em":"0.32em")),W!==Ve&&(je=je.transition(W),Pe=Pe.transition(W),_e=_e.transition(W),de=de.transition(W),ze=ze.transition(W).attr("opacity",ye).attr("transform",function(te){return isFinite(te=Le(te))?I(te+x):this.getAttribute("transform")}),xe.attr("opacity",ye).attr("transform",function(te){var be=this.parentNode.__axis;return I((be&&isFinite(be=be(te))?be:Le(te))+x)})),ze.remove(),je.attr("d",t===oe||t===Ke?m?"M"+E*m+","+he+"H"+x+"V"+Ce+"H"+E*m:"M"+x+","+he+"V"+Ce:m?"M"+he+","+E*m+"V"+x+"H"+Ce+"V"+E*m:"M"+he+","+x+"H"+Ce),Pe.attr("opacity",1).attr("transform",function(te){return I(Le(te)+x)}),_e.attr(L+"2",E*p),de.attr(L,E*se).text(re),Ve.filter(At).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ke?"start":t===oe?"end":"middle"),Ve.each(function(){this.__axis=Le})}return F.scale=function(W){return arguments.length?(i=W,F):i},F.ticks=function(){return o=Array.from(arguments),F},F.tickArguments=function(W){return arguments.length?(o=W==null?[]:Array.from(W),F):o.slice()},F.tickValues=function(W){return arguments.length?(l=W==null?null:Array.from(W),F):l&&l.slice()},F.tickFormat=function(W){return arguments.length?(h=W,F):h},F.tickSize=function(W){return arguments.length?(p=m=+W,F):p},F.tickSizeInner=function(W){return arguments.length?(p=+W,F):p},F.tickSizeOuter=function(W){return arguments.length?(m=+W,F):m},F.tickPadding=function(W){return arguments.length?(b=+W,F):b},F.offset=function(W){return arguments.length?(x=+W,F):x},F}function Ut(t){return Tt(Vt,t)}function Wt(t){return Tt(Ot,t)}var we={value:()=>{}};function fe(){for(var t=0,i=arguments.length,o={},l;t<i;++t){if(!(l=arguments[t]+"")||l in o||/[\s.]/.test(l))throw new Error("illegal type: "+l);o[l]=[]}return new lt(o)}function lt(t){this._=t}function Nt(t,i){return t.trim().split(/^|\s+/).map(function(o){var l="",h=o.indexOf(".");if(h>=0&&(l=o.slice(h+1),o=o.slice(0,h)),o&&!i.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:l}})}lt.prototype=fe.prototype={constructor:lt,on:function(t,i){var o=this._,l=Nt(t+"",o),h,p=-1,m=l.length;if(arguments.length<2){for(;++p<m;)if((h=(t=l[p]).type)&&(h=Gt(o[h],t.name)))return h;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++p<m;)if(h=(t=l[p]).type)o[h]=fn(o[h],t.name,i);else if(i==null)for(h in o)o[h]=fn(o[h],t.name,null);return this},copy:function(){var t={},i=this._;for(var o in i)t[o]=i[o].slice();return new lt(t)},call:function(t,i){if((h=arguments.length-2)>0)for(var o=new Array(h),l=0,h,p;l<h;++l)o[l]=arguments[l+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(p=this._[t],l=0,h=p.length;l<h;++l)p[l].value.apply(i,o)},apply:function(t,i,o){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var l=this._[t],h=0,p=l.length;h<p;++h)l[h].value.apply(i,o)}};function Gt(t,i){for(var o=0,l=t.length,h;o<l;++o)if((h=t[o]).name===i)return h.value}function fn(t,i,o){for(var l=0,h=t.length;l<h;++l)if(t[l].name===i){t[l]=we,t=t.slice(0,l).concat(t.slice(l+1));break}return o!=null&&t.push({name:i,value:o}),t}var wn="http://www.w3.org/1999/xhtml";const vn={svg:"http://www.w3.org/2000/svg",xhtml:wn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xe(t){var i=t+="",o=i.indexOf(":");return o>=0&&(i=t.slice(0,o))!=="xmlns"&&(t=t.slice(o+1)),vn.hasOwnProperty(i)?{space:vn[i],local:t}:t}function nn(t){return function(){var i=this.ownerDocument,o=this.namespaceURI;return o===wn&&i.documentElement.namespaceURI===wn?i.createElement(t):i.createElementNS(o,t)}}function Nn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Rn(t){var i=Xe(t);return(i.local?Nn:nn)(i)}function An(){}function kn(t){return t==null?An:function(){return this.querySelector(t)}}function Qn(t){typeof t!="function"&&(t=kn(t));for(var i=this._groups,o=i.length,l=new Array(o),h=0;h<o;++h)for(var p=i[h],m=p.length,b=l[h]=new Array(m),x,E,L=0;L<m;++L)(x=p[L])&&(E=t.call(x,x.__data__,L,p))&&("__data__"in x&&(E.__data__=x.__data__),b[L]=E);return new qr(l,this._parents)}function ji(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function br(){return[]}function ut(t){return t==null?br:function(){return this.querySelectorAll(t)}}function en(t){return function(){return ji(t.apply(this,arguments))}}function mn(t){typeof t=="function"?t=en(t):t=ut(t);for(var i=this._groups,o=i.length,l=[],h=[],p=0;p<o;++p)for(var m=i[p],b=m.length,x,E=0;E<b;++E)(x=m[E])&&(l.push(t.call(x,x.__data__,E,m)),h.push(x));return new qr(l,h)}function On(t){return function(){return this.matches(t)}}function jn(t){return function(i){return i.matches(t)}}var Xi=Array.prototype.find;function Rr(t){return function(){return Xi.call(this.children,t)}}function $r(){return this.firstElementChild}function mo(t){return this.select(t==null?$r:Rr(typeof t=="function"?t:jn(t)))}var mr=Array.prototype.filter;function go(){return Array.from(this.children)}function ro(t){return function(){return mr.call(this.children,t)}}function Ih(t){return this.selectAll(t==null?go:ro(typeof t=="function"?t:jn(t)))}function of(t){typeof t!="function"&&(t=On(t));for(var i=this._groups,o=i.length,l=new Array(o),h=0;h<o;++h)for(var p=i[h],m=p.length,b=l[h]=[],x,E=0;E<m;++E)(x=p[E])&&t.call(x,x.__data__,E,p)&&b.push(x);return new qr(l,this._parents)}function Dh(t){return new Array(t.length)}function gu(){return new qr(this._enter||this._groups.map(Dh),this._parents)}function Ae(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}Ae.prototype={constructor:Ae,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Lt(t){return function(){return t}}function Zt(t,i,o,l,h,p){for(var m=0,b,x=i.length,E=p.length;m<E;++m)(b=i[m])?(b.__data__=p[m],l[m]=b):o[m]=new Ae(t,p[m]);for(;m<x;++m)(b=i[m])&&(h[m]=b)}function Mt(t,i,o,l,h,p,m){var b,x,E=new Map,L=i.length,I=p.length,F=new Array(L),W;for(b=0;b<L;++b)(x=i[b])&&(F[b]=W=m.call(x,x.__data__,b,i)+"",E.has(W)?h[b]=x:E.set(W,x));for(b=0;b<I;++b)W=m.call(t,p[b],b,p)+"",(x=E.get(W))?(l[b]=x,x.__data__=p[b],E.delete(W)):o[b]=new Ae(t,p[b]);for(b=0;b<L;++b)(x=i[b])&&E.get(F[b])===x&&(h[b]=x)}function on(t){return t.__data__}function oi(t,i){if(!arguments.length)return Array.from(this,on);var o=i?Mt:Zt,l=this._parents,h=this._groups;typeof t!="function"&&(t=Lt(t));for(var p=h.length,m=new Array(p),b=new Array(p),x=new Array(p),E=0;E<p;++E){var L=l[E],I=h[E],F=I.length,W=wi(t.call(L,L&&L.__data__,E,l)),K=W.length,re=b[E]=new Array(K),se=m[E]=new Array(K),pe=x[E]=new Array(F);o(L,I,re,se,pe,W,i);for(var he=0,Ce=0,Le,Ve;he<K;++he)if(Le=re[he]){for(he>=Ce&&(Ce=he+1);!(Ve=se[Ce])&&++Ce<K;);Le._next=Ve||null}}return m=new qr(m,l),m._enter=b,m._exit=x,m}function wi(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ki(){return new qr(this._exit||this._groups.map(Dh),this._parents)}function Mi(t,i,o){var l=this.enter(),h=this,p=this.exit();return typeof t=="function"?(l=t(l),l&&(l=l.selection())):l=l.append(t+""),i!=null&&(h=i(h),h&&(h=h.selection())),o==null?p.remove():o(p),l&&h?l.merge(h).order():h}function rr(t){for(var i=t.selection?t.selection():t,o=this._groups,l=i._groups,h=o.length,p=l.length,m=Math.min(h,p),b=new Array(h),x=0;x<m;++x)for(var E=o[x],L=l[x],I=E.length,F=b[x]=new Array(I),W,K=0;K<I;++K)(W=E[K]||L[K])&&(F[K]=W);for(;x<h;++x)b[x]=o[x];return new qr(b,this._parents)}function Ui(){for(var t=this._groups,i=-1,o=t.length;++i<o;)for(var l=t[i],h=l.length-1,p=l[h],m;--h>=0;)(m=l[h])&&(p&&m.compareDocumentPosition(p)^4&&p.parentNode.insertBefore(m,p),p=m);return this}function Zi(t){t||(t=kr);function i(I,F){return I&&F?t(I.__data__,F.__data__):!I-!F}for(var o=this._groups,l=o.length,h=new Array(l),p=0;p<l;++p){for(var m=o[p],b=m.length,x=h[p]=new Array(b),E,L=0;L<b;++L)(E=m[L])&&(x[L]=E);x.sort(i)}return new qr(h,this._parents).order()}function kr(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function Ma(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Mo(){return Array.from(this)}function Gs(){for(var t=this._groups,i=0,o=t.length;i<o;++i)for(var l=t[i],h=0,p=l.length;h<p;++h){var m=l[h];if(m)return m}return null}function Cr(){let t=0;for(const i of this)++t;return t}function or(){return!this.node()}function Aa(t){for(var i=this._groups,o=0,l=i.length;o<l;++o)for(var h=i[o],p=0,m=h.length,b;p<m;++p)(b=h[p])&&t.call(b,b.__data__,p,h);return this}function Dr(t){return function(){this.removeAttribute(t)}}function Hs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yo(t,i){return function(){this.setAttribute(t,i)}}function La(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function ca(t,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttribute(t):this.setAttribute(t,o)}}function Nr(t,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,o)}}function ua(t,i){var o=Xe(t);if(arguments.length<2){var l=this.node();return o.local?l.getAttributeNS(o.space,o.local):l.getAttribute(o)}return this.each((i==null?o.local?Hs:Dr:typeof i=="function"?o.local?Nr:ca:o.local?La:Yo)(o,i))}function Ll(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _s(t){return function(){this.style.removeProperty(t)}}function Rl(t,i,o){return function(){this.style.setProperty(t,i,o)}}function kc(t,i,o){return function(){var l=i.apply(this,arguments);l==null?this.style.removeProperty(t):this.style.setProperty(t,l,o)}}function Ur(t,i,o){return arguments.length>1?this.each((i==null?_s:typeof i=="function"?kc:Rl)(t,i,o==null?"":o)):jo(this.node(),t)}function jo(t,i){return t.style.getPropertyValue(i)||Ll(t).getComputedStyle(t,null).getPropertyValue(i)}function so(t){return function(){delete this[t]}}function As(t,i){return function(){this[t]=i}}function Cc(t,i){return function(){var o=i.apply(this,arguments);o==null?delete this[t]:this[t]=o}}function Nh(t,i){return arguments.length>1?this.each((i==null?so:typeof i=="function"?Cc:As)(t,i)):this.node()[t]}function Sc(t){return t.trim().split(/^|\s+/)}function af(t){return t.classList||new Ec(t)}function Ec(t){this._node=t,this._names=Sc(t.getAttribute("class")||"")}Ec.prototype={add:function(t){var i=this._names.indexOf(t);i<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Oh(t,i){for(var o=af(t),l=-1,h=i.length;++l<h;)o.add(i[l])}function rm(t,i){for(var o=af(t),l=-1,h=i.length;++l<h;)o.remove(i[l])}function lf(t){return function(){Oh(this,t)}}function sm(t){return function(){rm(this,t)}}function Wg(t,i){return function(){(i.apply(this,arguments)?Oh:rm)(this,t)}}function Fh(t,i){var o=Sc(t+"");if(arguments.length<2){for(var l=af(this.node()),h=-1,p=o.length;++h<p;)if(!l.contains(o[h]))return!1;return!0}return this.each((typeof i=="function"?Wg:i?lf:sm)(o,i))}function zg(){this.textContent=""}function om(t){return function(){this.textContent=t}}function am(t){return function(){var i=t.apply(this,arguments);this.textContent=i==null?"":i}}function Ug(t){return arguments.length?this.each(t==null?zg:(typeof t=="function"?am:om)(t)):this.node().textContent}function Gg(){this.innerHTML=""}function Hg(t){return function(){this.innerHTML=t}}function lm(t){return function(){var i=t.apply(this,arguments);this.innerHTML=i==null?"":i}}function Yg(t){return arguments.length?this.each(t==null?Gg:(typeof t=="function"?lm:Hg)(t)):this.node().innerHTML}function cf(){this.nextSibling&&this.parentNode.appendChild(this)}function Pl(){return this.each(cf)}function jg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vu(){return this.each(jg)}function $g(t){var i=typeof t=="function"?t:Rn(t);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function ha(){return null}function cm(t,i){var o=typeof t=="function"?t:Rn(t),l=i==null?ha:typeof i=="function"?i:kn(i);return this.select(function(){return this.insertBefore(o.apply(this,arguments),l.apply(this,arguments)||null)})}function qg(){var t=this.parentNode;t&&t.removeChild(this)}function Xg(){return this.each(qg)}function Zg(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function Kg(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function um(t){return this.select(t?Kg:Zg)}function Jg(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Qg(t){return function(i){t.call(this,i,this.__data__)}}function Ao(t){return t.trim().split(/^|\s+/).map(function(i){var o="",l=i.indexOf(".");return l>=0&&(o=i.slice(l+1),i=i.slice(0,l)),{type:i,name:o}})}function e1(t){return function(){var i=this.__on;if(!!i){for(var o=0,l=-1,h=i.length,p;o<h;++o)p=i[o],(!t.type||p.type===t.type)&&p.name===t.name?this.removeEventListener(p.type,p.listener,p.options):i[++l]=p;++l?i.length=l:delete this.__on}}}function t1(t,i,o){return function(){var l=this.__on,h,p=Qg(i);if(l){for(var m=0,b=l.length;m<b;++m)if((h=l[m]).type===t.type&&h.name===t.name){this.removeEventListener(h.type,h.listener,h.options),this.addEventListener(h.type,h.listener=p,h.options=o),h.value=i;return}}this.addEventListener(t.type,p,o),h={type:t.type,name:t.name,value:i,listener:p,options:o},l?l.push(h):this.__on=[h]}}function uf(t,i,o){var l=Ao(t+""),h,p=l.length,m;if(arguments.length<2){var b=this.node().__on;if(b){for(var x=0,E=b.length,L;x<E;++x)for(h=0,L=b[x];h<p;++h)if((m=l[h]).type===L.type&&m.name===L.name)return L.value}return}for(b=i?t1:e1,h=0;h<p;++h)this.each(b(l[h],i,o));return this}function hm(t,i,o){var l=Ll(t),h=l.CustomEvent;typeof h=="function"?h=new h(i,o):(h=l.document.createEvent("Event"),o?(h.initEvent(i,o.bubbles,o.cancelable),h.detail=o.detail):h.initEvent(i,!1,!1)),t.dispatchEvent(h)}function sl(t,i){return function(){return hm(this,t,i)}}function dm(t,i){return function(){return hm(this,t,i.apply(this,arguments))}}function n1(t,i){return this.each((typeof i=="function"?dm:sl)(t,i))}function*hf(){for(var t=this._groups,i=0,o=t.length;i<o;++i)for(var l=t[i],h=0,p=l.length,m;h<p;++h)(m=l[h])&&(yield m)}var df=[null];function qr(t,i){this._groups=t,this._parents=i}function yu(){return new qr([[document.documentElement]],df)}function Bh(){return this}qr.prototype=yu.prototype={constructor:qr,select:Qn,selectAll:mn,selectChild:mo,selectChildren:Ih,filter:of,data:oi,enter:gu,exit:ki,join:Mi,merge:rr,selection:Bh,order:Ui,sort:Zi,call:Ma,nodes:Mo,node:Gs,size:Cr,empty:or,each:Aa,attr:ua,style:Ur,property:Nh,classed:Fh,text:Ug,html:Yg,raise:Pl,lower:vu,append:$g,insert:cm,remove:Xg,clone:um,datum:Jg,on:uf,dispatch:n1,[Symbol.iterator]:hf};function dn(t){return typeof t=="string"?new qr([[document.querySelector(t)]],[document.documentElement]):new qr([[t]],df)}function Lo(t){return typeof t=="string"?new qr([document.querySelectorAll(t)],[document.documentElement]):new qr([ji(t)],df)}function vo(t,i,o){t.prototype=i.prototype=o,o.constructor=t}function Vh(t,i){var o=Object.create(t.prototype);for(var l in i)o[l]=i[l];return o}function Or(){}var Tc=.7,ol=1/Tc,al="\\s*([+-]?\\d+)\\s*",Ro="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ff=/^#([0-9a-f]{3,8})$/,i1=new RegExp(`^rgb\\(${al},${al},${al}\\)$`),r1=new RegExp(`^rgb\\(${$o},${$o},${$o}\\)$`),_u=new RegExp(`^rgba\\(${al},${al},${al},${Ro}\\)$`),Ys=new RegExp(`^rgba\\(${$o},${$o},${$o},${Ro}\\)$`),bu=new RegExp(`^hsl\\(${Ro},${$o},${$o}\\)$`),Ra=new RegExp(`^hsla\\(${Ro},${$o},${$o},${Ro}\\)$`),fm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vo(Or,Pa,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wh,formatHex:Wh,formatHex8:pf,formatHsl:qo,formatRgb:Sr,toString:Sr});function Wh(){return this.rgb().formatHex()}function pf(){return this.rgb().formatHex8()}function qo(){return wu(this).formatHsl()}function Sr(){return this.rgb().formatRgb()}function Pa(t){var i,o;return t=(t+"").trim().toLowerCase(),(i=ff.exec(t))?(o=i[1].length,i=parseInt(i[1],16),o===6?ns(i):o===3?new Xr(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):o===8?xu(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):o===4?xu(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=i1.exec(t))?new Xr(i[1],i[2],i[3],1):(i=r1.exec(t))?new Xr(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=_u.exec(t))?xu(i[1],i[2],i[3],i[4]):(i=Ys.exec(t))?xu(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=bu.exec(t))?Lc(i[1],i[2]/100,i[3]/100,1):(i=Ra.exec(t))?Lc(i[1],i[2]/100,i[3]/100,i[4]):fm.hasOwnProperty(t)?ns(fm[t]):t==="transparent"?new Xr(NaN,NaN,NaN,0):null}function ns(t){return new Xr(t>>16&255,t>>8&255,t&255,1)}function xu(t,i,o,l){return l<=0&&(t=i=o=NaN),new Xr(t,i,o,l)}function Pr(t){return t instanceof Or||(t=Pa(t)),t?(t=t.rgb(),new Xr(t.r,t.g,t.b,t.opacity)):new Xr}function zh(t,i,o,l){return arguments.length===1?Pr(t):new Xr(t,i,o,l==null?1:l)}function Xr(t,i,o,l){this.r=+t,this.g=+i,this.b=+o,this.opacity=+l}vo(Xr,zh,Vh(Or,{brighter(t){return t=t==null?ol:Math.pow(ol,t),new Xr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Tc:Math.pow(Tc,t),new Xr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xr(Il(this.r),Il(this.g),Il(this.b),Ac(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mc,formatHex:Mc,formatHex8:s1,formatRgb:ll,toString:ll}));function Mc(){return`#${Ia(this.r)}${Ia(this.g)}${Ia(this.b)}`}function s1(){return`#${Ia(this.r)}${Ia(this.g)}${Ia(this.b)}${Ia((isNaN(this.opacity)?1:this.opacity)*255)}`}function ll(){const t=Ac(this.opacity);return`${t===1?"rgb(":"rgba("}${Il(this.r)}, ${Il(this.g)}, ${Il(this.b)}${t===1?")":`, ${t})`}`}function Ac(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Il(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ia(t){return t=Il(t),(t<16?"0":"")+t.toString(16)}function Lc(t,i,o,l){return l<=0?t=i=o=NaN:o<=0||o>=1?t=i=NaN:i<=0&&(t=NaN),new fs(t,i,o,l)}function wu(t){if(t instanceof fs)return new fs(t.h,t.s,t.l,t.opacity);if(t instanceof Or||(t=Pa(t)),!t)return new fs;if(t instanceof fs)return t;t=t.rgb();var i=t.r/255,o=t.g/255,l=t.b/255,h=Math.min(i,o,l),p=Math.max(i,o,l),m=NaN,b=p-h,x=(p+h)/2;return b?(i===p?m=(o-l)/b+(o<l)*6:o===p?m=(l-i)/b+2:m=(i-o)/b+4,b/=x<.5?p+h:2-p-h,m*=60):b=x>0&&x<1?0:m,new fs(m,b,x,t.opacity)}function pm(t,i,o,l){return arguments.length===1?wu(t):new fs(t,i,o,l==null?1:l)}function fs(t,i,o,l){this.h=+t,this.s=+i,this.l=+o,this.opacity=+l}vo(fs,pm,Vh(Or,{brighter(t){return t=t==null?ol:Math.pow(ol,t),new fs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tc:Math.pow(Tc,t),new fs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,i=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,l=o+(o<.5?o:1-o)*i,h=2*o-l;return new Xr(ku(t>=240?t-240:t+120,h,l),ku(t,h,l),ku(t<120?t+240:t-120,h,l),this.opacity)},clamp(){return new fs(mf(this.h),Rc(this.s),Rc(this.l),Ac(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ac(this.opacity);return`${t===1?"hsl(":"hsla("}${mf(this.h)}, ${Rc(this.s)*100}%, ${Rc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function mf(t){return t=(t||0)%360,t<0?t+360:t}function Rc(t){return Math.max(0,Math.min(1,t||0))}function ku(t,i,o){return(t<60?i+(o-i)*t/60:t<180?o:t<240?i+(o-i)*(240-t)/60:i)*255}const Cu=Math.PI/180,Uh=180/Math.PI,Da=18,Na=.96422,Su=1,Gh=.82521,mm=4/29,Pc=6/29,gm=3*Pc*Pc,Dl=Pc*Pc*Pc;function J(t){if(t instanceof j)return new j(t.l,t.a,t.b,t.opacity);if(t instanceof is)return yo(t);t instanceof Xr||(t=Pr(t));var i=$t(t.r),o=$t(t.g),l=$t(t.b),h=ie((.2225045*i+.7168786*o+.0606169*l)/Su),p,m;return i===o&&o===l?p=m=h:(p=ie((.4360747*i+.3850649*o+.1430804*l)/Na),m=ie((.0139322*i+.0971045*o+.7141733*l)/Gh)),new j(116*h-16,500*(p-h),200*(h-m),t.opacity)}function D(t,i,o,l){return arguments.length===1?J(t):new j(t,i,o,l==null?1:l)}function j(t,i,o,l){this.l=+t,this.a=+i,this.b=+o,this.opacity=+l}vo(j,D,Vh(Or,{brighter(t){return new j(this.l+Da*(t==null?1:t),this.a,this.b,this.opacity)},darker(t){return new j(this.l-Da*(t==null?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,i=isNaN(this.a)?t:t+this.a/500,o=isNaN(this.b)?t:t-this.b/200;return i=Na*Ne(i),t=Su*Ne(t),o=Gh*Ne(o),new Xr(xt(3.1338561*i-1.6168667*t-.4906146*o),xt(-.9787684*i+1.9161415*t+.033454*o),xt(.0719453*i-.2289914*t+1.4052427*o),this.opacity)}}));function ie(t){return t>Dl?Math.pow(t,1/3):t/gm+mm}function Ne(t){return t>Pc?t*t*t:gm*(t-mm)}function xt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function $t(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function In(t){if(t instanceof is)return new is(t.h,t.c,t.l,t.opacity);if(t instanceof j||(t=J(t)),t.a===0&&t.b===0)return new is(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var i=Math.atan2(t.b,t.a)*Uh;return new is(i<0?i+360:i,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function gr(t,i,o,l){return arguments.length===1?In(t):new is(t,i,o,l==null?1:l)}function is(t,i,o,l){this.h=+t,this.c=+i,this.l=+o,this.opacity=+l}function yo(t){if(isNaN(t.h))return new j(t.l,0,0,t.opacity);var i=t.h*Cu;return new j(t.l,Math.cos(i)*t.c,Math.sin(i)*t.c,t.opacity)}vo(is,gr,Vh(Or,{brighter(t){return new is(this.h,this.c,this.l+Da*(t==null?1:t),this.opacity)},darker(t){return new is(this.h,this.c,this.l-Da*(t==null?1:t),this.opacity)},rgb(){return yo(this).rgb()}}));const Ic=t=>()=>t;function gf(t,i){return function(o){return t+o*i}}function o1(t,i,o){return t=Math.pow(t,o),i=Math.pow(i,o)-t,o=1/o,function(l){return Math.pow(t+l*i,o)}}function vm(t,i){var o=i-t;return o?gf(t,o>180||o<-180?o-360*Math.round(o/360):o):Ic(isNaN(t)?i:t)}function nr(t){return(t=+t)==1?da:function(i,o){return o-i?o1(i,o,t):Ic(isNaN(i)?o:i)}}function da(t,i){var o=i-t;return o?gf(t,o):Ic(isNaN(t)?i:t)}const ym=function t(i){var o=nr(i);function l(h,p){var m=o((h=zh(h)).r,(p=zh(p)).r),b=o(h.g,p.g),x=o(h.b,p.b),E=da(h.opacity,p.opacity);return function(L){return h.r=m(L),h.g=b(L),h.b=x(L),h.opacity=E(L),h+""}}return l.gamma=t,l}(1);function m5(t,i){i||(i=[]);var o=t?Math.min(i.length,t.length):0,l=i.slice(),h;return function(p){for(h=0;h<o;++h)l[h]=t[h]*(1-p)+i[h]*p;return l}}function a1(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Eu(t,i){var o=i?i.length:0,l=t?Math.min(o,t.length):0,h=new Array(l),p=new Array(o),m;for(m=0;m<l;++m)h[m]=bm(t[m],i[m]);for(;m<o;++m)p[m]=i[m];return function(b){for(m=0;m<l;++m)p[m]=h[m](b);return p}}function Tu(t,i){var o=new Date;return t=+t,i=+i,function(l){return o.setTime(t*(1-l)+i*l),o}}function Oa(t,i){return t=+t,i=+i,function(o){return t*(1-o)+i*o}}function fa(t,i){var o={},l={},h;(t===null||typeof t!="object")&&(t={}),(i===null||typeof i!="object")&&(i={});for(h in i)h in t?o[h]=bm(t[h],i[h]):l[h]=i[h];return function(p){for(h in o)l[h]=o[h](p);return l}}var l1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_m=new RegExp(l1.source,"g");function V_(t){return function(){return t}}function W_(t){return function(i){return t(i)+""}}function c1(t,i){var o=l1.lastIndex=_m.lastIndex=0,l,h,p,m=-1,b=[],x=[];for(t=t+"",i=i+"";(l=l1.exec(t))&&(h=_m.exec(i));)(p=h.index)>o&&(p=i.slice(o,p),b[m]?b[m]+=p:b[++m]=p),(l=l[0])===(h=h[0])?b[m]?b[m]+=h:b[++m]=h:(b[++m]=null,x.push({i:m,x:Oa(l,h)})),o=_m.lastIndex;return o<i.length&&(p=i.slice(o),b[m]?b[m]+=p:b[++m]=p),b.length<2?x[0]?W_(x[0].x):V_(i):(i=x.length,function(E){for(var L=0,I;L<i;++L)b[(I=x[L]).i]=I.x(E);return b.join("")})}function bm(t,i){var o=typeof i,l;return i==null||o==="boolean"?Ic(i):(o==="number"?Oa:o==="string"?(l=Pa(i))?(i=l,ym):c1:i instanceof Pa?ym:i instanceof Date?Tu:a1(i)?m5:Array.isArray(i)?Eu:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?fa:Oa)(t,i)}function z_(t,i){return t=+t,i=+i,function(o){return Math.round(t*(1-o)+i*o)}}var u1=180/Math.PI,xm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function h1(t,i,o,l,h,p){var m,b,x;return(m=Math.sqrt(t*t+i*i))&&(t/=m,i/=m),(x=t*o+i*l)&&(o-=t*x,l-=i*x),(b=Math.sqrt(o*o+l*l))&&(o/=b,l/=b,x/=b),t*l<i*o&&(t=-t,i=-i,x=-x,m=-m),{translateX:h,translateY:p,rotate:Math.atan2(i,t)*u1,skewX:Math.atan(x)*u1,scaleX:m,scaleY:b}}var vf;function g5(t){const i=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return i.isIdentity?xm:h1(i.a,i.b,i.c,i.d,i.e,i.f)}function U_(t){return t==null||(vf||(vf=document.createElementNS("http://www.w3.org/2000/svg","g")),vf.setAttribute("transform",t),!(t=vf.transform.baseVal.consolidate()))?xm:(t=t.matrix,h1(t.a,t.b,t.c,t.d,t.e,t.f))}function G_(t,i,o,l){function h(E){return E.length?E.pop()+" ":""}function p(E,L,I,F,W,K){if(E!==I||L!==F){var re=W.push("translate(",null,i,null,o);K.push({i:re-4,x:Oa(E,I)},{i:re-2,x:Oa(L,F)})}else(I||F)&&W.push("translate("+I+i+F+o)}function m(E,L,I,F){E!==L?(E-L>180?L+=360:L-E>180&&(E+=360),F.push({i:I.push(h(I)+"rotate(",null,l)-2,x:Oa(E,L)})):L&&I.push(h(I)+"rotate("+L+l)}function b(E,L,I,F){E!==L?F.push({i:I.push(h(I)+"skewX(",null,l)-2,x:Oa(E,L)}):L&&I.push(h(I)+"skewX("+L+l)}function x(E,L,I,F,W,K){if(E!==I||L!==F){var re=W.push(h(W)+"scale(",null,",",null,")");K.push({i:re-4,x:Oa(E,I)},{i:re-2,x:Oa(L,F)})}else(I!==1||F!==1)&&W.push(h(W)+"scale("+I+","+F+")")}return function(E,L){var I=[],F=[];return E=t(E),L=t(L),p(E.translateX,E.translateY,L.translateX,L.translateY,I,F),m(E.rotate,L.rotate,I,F),b(E.skewX,L.skewX,I,F),x(E.scaleX,E.scaleY,L.scaleX,L.scaleY,I,F),E=L=null,function(W){for(var K=-1,re=F.length,se;++K<re;)I[(se=F[K]).i]=se.x(W);return I.join("")}}}var H_=G_(g5,"px, ","px)","deg)"),Y_=G_(U_,", ",")",")");function j_(t){return function(i,o){var l=t((i=gr(i)).h,(o=gr(o)).h),h=da(i.c,o.c),p=da(i.l,o.l),m=da(i.opacity,o.opacity);return function(b){return i.h=l(b),i.c=h(b),i.l=p(b),i.opacity=m(b),i+""}}}const $_=j_(vm);var Hh=0,yf=0,Mu=0,d1=1e3,wm,Au,_f=0,Dc=0,Yh=0,jh=typeof performance=="object"&&performance.now?performance:Date,q_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $h(){return Dc||(q_(v5),Dc=jh.now()+Yh)}function v5(){Dc=0}function km(){this._call=this._time=this._next=null}km.prototype=X_.prototype={constructor:km,restart:function(t,i,o){if(typeof t!="function")throw new TypeError("callback is not a function");o=(o==null?$h():+o)+(i==null?0:+i),!this._next&&Au!==this&&(Au?Au._next=this:wm=this,Au=this),this._call=t,this._time=o,f1()},stop:function(){this._call&&(this._call=null,this._time=1/0,f1())}};function X_(t,i,o){var l=new km;return l.restart(t,i,o),l}function Z_(){$h(),++Hh;for(var t=wm,i;t;)(i=Dc-t._time)>=0&&t._call.call(void 0,i),t=t._next;--Hh}function K_(){Dc=(_f=jh.now())+Yh,Hh=yf=0;try{Z_()}finally{Hh=0,y5(),Dc=0}}function J_(){var t=jh.now(),i=t-_f;i>d1&&(Yh-=i,_f=t)}function y5(){for(var t,i=wm,o,l=1/0;i;)i._call?(l>i._time&&(l=i._time),t=i,i=i._next):(o=i._next,i._next=null,i=t?t._next=o:wm=o);Au=t,f1(l)}function f1(t){if(!Hh){yf&&(yf=clearTimeout(yf));var i=t-Dc;i>24?(t<1/0&&(yf=setTimeout(K_,t-jh.now()-Yh)),Mu&&(Mu=clearInterval(Mu))):(Mu||(_f=jh.now(),Mu=setInterval(J_,d1)),Hh=1,q_(K_))}}function Cm(t,i,o){var l=new km;return i=i==null?0:+i,l.restart(h=>{l.stop(),t(h+i)},i,o),l}var bf=fe("start","end","cancel","interrupt"),_5=[],Q_=0,Lu=1,p1=2,Sm=3,eb=4,m1=5,qh=6;function Em(t,i,o,l,h,p){var m=t.__transition;if(!m)t.__transition={};else if(o in m)return;g1(t,o,{name:i,index:l,group:h,on:bf,tween:_5,time:p.time,delay:p.delay,duration:p.duration,ease:p.ease,timer:null,state:Q_})}function xf(t,i){var o=Fa(t,i);if(o.state>Q_)throw new Error("too late; already scheduled");return o}function cl(t,i){var o=Fa(t,i);if(o.state>Sm)throw new Error("too late; already running");return o}function Fa(t,i){var o=t.__transition;if(!o||!(o=o[i]))throw new Error("transition not found");return o}function g1(t,i,o){var l=t.__transition,h;l[i]=o,o.timer=X_(p,0,o.time);function p(E){o.state=Lu,o.timer.restart(m,o.delay,o.time),o.delay<=E&&m(E-o.delay)}function m(E){var L,I,F,W;if(o.state!==Lu)return x();for(L in l)if(W=l[L],W.name===o.name){if(W.state===Sm)return Cm(m);W.state===eb?(W.state=qh,W.timer.stop(),W.on.call("interrupt",t,t.__data__,W.index,W.group),delete l[L]):+L<i&&(W.state=qh,W.timer.stop(),W.on.call("cancel",t,t.__data__,W.index,W.group),delete l[L])}if(Cm(function(){o.state===Sm&&(o.state=eb,o.timer.restart(b,o.delay,o.time),b(E))}),o.state=p1,o.on.call("start",t,t.__data__,o.index,o.group),o.state===p1){for(o.state=Sm,h=new Array(F=o.tween.length),L=0,I=-1;L<F;++L)(W=o.tween[L].value.call(t,t.__data__,o.index,o.group))&&(h[++I]=W);h.length=I+1}}function b(E){for(var L=E<o.duration?o.ease.call(null,E/o.duration):(o.timer.restart(x),o.state=m1,1),I=-1,F=h.length;++I<F;)h[I].call(t,L);o.state===m1&&(o.on.call("end",t,t.__data__,o.index,o.group),x())}function x(){o.state=qh,o.timer.stop(),delete l[i];for(var E in l)return;delete t.__transition}}function tb(t,i){var o=t.__transition,l,h,p=!0,m;if(!!o){i=i==null?null:i+"";for(m in o){if((l=o[m]).name!==i){p=!1;continue}h=l.state>p1&&l.state<m1,l.state=qh,l.timer.stop(),l.on.call(h?"interrupt":"cancel",t,t.__data__,l.index,l.group),delete o[m]}p&&delete t.__transition}}function b5(t){return this.each(function(){tb(this,t)})}function x5(t,i){var o,l;return function(){var h=cl(this,t),p=h.tween;if(p!==o){l=o=p;for(var m=0,b=l.length;m<b;++m)if(l[m].name===i){l=l.slice(),l.splice(m,1);break}}h.tween=l}}function w5(t,i,o){var l,h;if(typeof o!="function")throw new Error;return function(){var p=cl(this,t),m=p.tween;if(m!==l){h=(l=m).slice();for(var b={name:i,value:o},x=0,E=h.length;x<E;++x)if(h[x].name===i){h[x]=b;break}x===E&&h.push(b)}p.tween=h}}function v1(t,i){var o=this._id;if(t+="",arguments.length<2){for(var l=Fa(this.node(),o).tween,h=0,p=l.length,m;h<p;++h)if((m=l[h]).name===t)return m.value;return null}return this.each((i==null?x5:w5)(o,t,i))}function y1(t,i,o){var l=t._id;return t.each(function(){var h=cl(this,l);(h.value||(h.value={}))[i]=o.apply(this,arguments)}),function(h){return Fa(h,l).value[i]}}function nb(t,i){var o;return(typeof i=="number"?Oa:i instanceof Pa?ym:(o=Pa(i))?(i=o,ym):c1)(t,i)}function _1(t){return function(){this.removeAttribute(t)}}function k5(t){return function(){this.removeAttributeNS(t.space,t.local)}}function C5(t,i,o){var l,h=o+"",p;return function(){var m=this.getAttribute(t);return m===h?null:m===l?p:p=i(l=m,o)}}function S5(t,i,o){var l,h=o+"",p;return function(){var m=this.getAttributeNS(t.space,t.local);return m===h?null:m===l?p:p=i(l=m,o)}}function E5(t,i,o){var l,h,p;return function(){var m,b=o(this),x;return b==null?void this.removeAttribute(t):(m=this.getAttribute(t),x=b+"",m===x?null:m===l&&x===h?p:(h=x,p=i(l=m,b)))}}function T5(t,i,o){var l,h,p;return function(){var m,b=o(this),x;return b==null?void this.removeAttributeNS(t.space,t.local):(m=this.getAttributeNS(t.space,t.local),x=b+"",m===x?null:m===l&&x===h?p:(h=x,p=i(l=m,b)))}}function M5(t,i){var o=Xe(t),l=o==="transform"?Y_:nb;return this.attrTween(t,typeof i=="function"?(o.local?T5:E5)(o,l,y1(this,"attr."+t,i)):i==null?(o.local?k5:_1)(o):(o.local?S5:C5)(o,l,i))}function A5(t,i){return function(o){this.setAttribute(t,i.call(this,o))}}function L5(t,i){return function(o){this.setAttributeNS(t.space,t.local,i.call(this,o))}}function R5(t,i){var o,l;function h(){var p=i.apply(this,arguments);return p!==l&&(o=(l=p)&&L5(t,p)),o}return h._value=i,h}function P5(t,i){var o,l;function h(){var p=i.apply(this,arguments);return p!==l&&(o=(l=p)&&A5(t,p)),o}return h._value=i,h}function I5(t,i){var o="attr."+t;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(i==null)return this.tween(o,null);if(typeof i!="function")throw new Error;var l=Xe(t);return this.tween(o,(l.local?R5:P5)(l,i))}function D5(t,i){return function(){xf(this,t).delay=+i.apply(this,arguments)}}function b1(t,i){return i=+i,function(){xf(this,t).delay=i}}function N5(t){var i=this._id;return arguments.length?this.each((typeof t=="function"?D5:b1)(i,t)):Fa(this.node(),i).delay}function O5(t,i){return function(){cl(this,t).duration=+i.apply(this,arguments)}}function F5(t,i){return i=+i,function(){cl(this,t).duration=i}}function B5(t){var i=this._id;return arguments.length?this.each((typeof t=="function"?O5:F5)(i,t)):Fa(this.node(),i).duration}function V5(t,i){if(typeof i!="function")throw new Error;return function(){cl(this,t).ease=i}}function W5(t){var i=this._id;return arguments.length?this.each(V5(i,t)):Fa(this.node(),i).ease}function z5(t,i){return function(){var o=i.apply(this,arguments);if(typeof o!="function")throw new Error;cl(this,t).ease=o}}function U5(t){if(typeof t!="function")throw new Error;return this.each(z5(this._id,t))}function Nc(t){typeof t!="function"&&(t=On(t));for(var i=this._groups,o=i.length,l=new Array(o),h=0;h<o;++h)for(var p=i[h],m=p.length,b=l[h]=[],x,E=0;E<m;++E)(x=p[E])&&t.call(x,x.__data__,E,p)&&b.push(x);return new Po(l,this._parents,this._name,this._id)}function ib(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,o=t._groups,l=i.length,h=o.length,p=Math.min(l,h),m=new Array(l),b=0;b<p;++b)for(var x=i[b],E=o[b],L=x.length,I=m[b]=new Array(L),F,W=0;W<L;++W)(F=x[W]||E[W])&&(I[W]=F);for(;b<l;++b)m[b]=i[b];return new Po(m,this._parents,this._name,this._id)}function G5(t){return(t+"").trim().split(/^|\s+/).every(function(i){var o=i.indexOf(".");return o>=0&&(i=i.slice(0,o)),!i||i==="start"})}function H5(t,i,o){var l,h,p=G5(i)?xf:cl;return function(){var m=p(this,t),b=m.on;b!==l&&(h=(l=b).copy()).on(i,o),m.on=h}}function x1(t,i){var o=this._id;return arguments.length<2?Fa(this.node(),o).on.on(t):this.each(H5(o,t,i))}function rb(t){return function(){var i=this.parentNode;for(var o in this.__transition)if(+o!==t)return;i&&i.removeChild(this)}}function sb(){return this.on("end.remove",rb(this._id))}function Y5(t){var i=this._name,o=this._id;typeof t!="function"&&(t=kn(t));for(var l=this._groups,h=l.length,p=new Array(h),m=0;m<h;++m)for(var b=l[m],x=b.length,E=p[m]=new Array(x),L,I,F=0;F<x;++F)(L=b[F])&&(I=t.call(L,L.__data__,F,b))&&("__data__"in L&&(I.__data__=L.__data__),E[F]=I,Em(E[F],i,o,F,E,Fa(L,o)));return new Po(p,this._parents,i,o)}function j5(t){var i=this._name,o=this._id;typeof t!="function"&&(t=ut(t));for(var l=this._groups,h=l.length,p=[],m=[],b=0;b<h;++b)for(var x=l[b],E=x.length,L,I=0;I<E;++I)if(L=x[I]){for(var F=t.call(L,L.__data__,I,x),W,K=Fa(L,o),re=0,se=F.length;re<se;++re)(W=F[re])&&Em(W,i,o,re,F,K);p.push(F),m.push(L)}return new Po(p,m,i,o)}var $5=yu.prototype.constructor;function q5(){return new $5(this._groups,this._parents)}function Oc(t,i){var o,l,h;return function(){var p=jo(this,t),m=(this.style.removeProperty(t),jo(this,t));return p===m?null:p===o&&m===l?h:h=i(o=p,l=m)}}function w1(t){return function(){this.style.removeProperty(t)}}function Xh(t,i,o){var l,h=o+"",p;return function(){var m=jo(this,t);return m===h?null:m===l?p:p=i(l=m,o)}}function X5(t,i,o){var l,h,p;return function(){var m=jo(this,t),b=o(this),x=b+"";return b==null&&(x=b=(this.style.removeProperty(t),jo(this,t))),m===x?null:m===l&&x===h?p:(h=x,p=i(l=m,b))}}function Fc(t,i){var o,l,h,p="style."+i,m="end."+p,b;return function(){var x=cl(this,t),E=x.on,L=x.value[p]==null?b||(b=w1(i)):void 0;(E!==o||h!==L)&&(l=(o=E).copy()).on(m,h=L),x.on=l}}function Z5(t,i,o){var l=(t+="")=="transform"?H_:nb;return i==null?this.styleTween(t,Oc(t,l)).on("end.style."+t,w1(t)):typeof i=="function"?this.styleTween(t,X5(t,l,y1(this,"style."+t,i))).each(Fc(this._id,t)):this.styleTween(t,Xh(t,l,i),o).on("end.style."+t,null)}function ob(t,i,o){return function(l){this.style.setProperty(t,i.call(this,l),o)}}function K5(t,i,o){var l,h;function p(){var m=i.apply(this,arguments);return m!==h&&(l=(h=m)&&ob(t,m,o)),l}return p._value=i,p}function J5(t,i,o){var l="style."+(t+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(i==null)return this.tween(l,null);if(typeof i!="function")throw new Error;return this.tween(l,K5(t,i,o==null?"":o))}function Q5(t){return function(){this.textContent=t}}function ek(t){return function(){var i=t(this);this.textContent=i==null?"":i}}function Nl(t){return this.tween("text",typeof t=="function"?ek(y1(this,"text",t)):Q5(t==null?"":t+""))}function tk(t){return function(i){this.textContent=t.call(this,i)}}function ab(t){var i,o;function l(){var h=t.apply(this,arguments);return h!==o&&(i=(o=h)&&tk(h)),i}return l._value=t,l}function nk(t){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,ab(t))}function lb(){for(var t=this._name,i=this._id,o=k1(),l=this._groups,h=l.length,p=0;p<h;++p)for(var m=l[p],b=m.length,x,E=0;E<b;++E)if(x=m[E]){var L=Fa(x,i);Em(x,t,o,E,m,{time:L.time+L.delay+L.duration,delay:0,duration:L.duration,ease:L.ease})}return new Po(l,this._parents,t,o)}function ik(){var t,i,o=this,l=o._id,h=o.size();return new Promise(function(p,m){var b={value:m},x={value:function(){--h===0&&p()}};o.each(function(){var E=cl(this,l),L=E.on;L!==t&&(i=(t=L).copy(),i._.cancel.push(b),i._.interrupt.push(b),i._.end.push(x)),E.on=i}),h===0&&p()})}var rk=0;function Po(t,i,o,l){this._groups=t,this._parents=i,this._name=o,this._id=l}function k1(){return++rk}var Ol=yu.prototype;Po.prototype={constructor:Po,select:Y5,selectAll:j5,selectChild:Ol.selectChild,selectChildren:Ol.selectChildren,filter:Nc,merge:ib,selection:q5,transition:lb,call:Ol.call,nodes:Ol.nodes,node:Ol.node,size:Ol.size,empty:Ol.empty,each:Ol.each,on:x1,attr:M5,attrTween:I5,style:Z5,styleTween:J5,text:Nl,textTween:nk,remove:sb,tween:v1,delay:N5,duration:B5,ease:W5,easeVarying:U5,end:ik,[Symbol.iterator]:Ol[Symbol.iterator]};function sk(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ok={time:null,delay:0,duration:250,ease:sk};function C1(t,i){for(var o;!(o=t.__transition)||!(o=o[i]);)if(!(t=t.parentNode))throw new Error(`transition ${i} not found`);return o}function ak(t){var i,o;t instanceof Po?(i=t._id,t=t._name):(i=k1(),(o=ok).time=$h(),t=t==null?null:t+"");for(var l=this._groups,h=l.length,p=0;p<h;++p)for(var m=l[p],b=m.length,x,E=0;E<b;++E)(x=m[E])&&Em(x,t,i,E,m,o||C1(x,i));return new Po(l,this._parents,t,i)}yu.prototype.interrupt=b5,yu.prototype.transition=ak;const Bc=Math.PI,Tm=2*Bc,Ru=1e-6,lk=Tm-Ru;function S1(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function E1(){return new S1}S1.prototype=E1.prototype={constructor:S1,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,o,l){this._+="Q"+ +t+","+ +i+","+(this._x1=+o)+","+(this._y1=+l)},bezierCurveTo:function(t,i,o,l,h,p){this._+="C"+ +t+","+ +i+","+ +o+","+ +l+","+(this._x1=+h)+","+(this._y1=+p)},arcTo:function(t,i,o,l,h){t=+t,i=+i,o=+o,l=+l,h=+h;var p=this._x1,m=this._y1,b=o-t,x=l-i,E=p-t,L=m-i,I=E*E+L*L;if(h<0)throw new Error("negative radius: "+h);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(I>Ru)if(!(Math.abs(L*b-x*E)>Ru)||!h)this._+="L"+(this._x1=t)+","+(this._y1=i);else{var F=o-p,W=l-m,K=b*b+x*x,re=F*F+W*W,se=Math.sqrt(K),pe=Math.sqrt(I),he=h*Math.tan((Bc-Math.acos((K+I-re)/(2*se*pe)))/2),Ce=he/pe,Le=he/se;Math.abs(Ce-1)>Ru&&(this._+="L"+(t+Ce*E)+","+(i+Ce*L)),this._+="A"+h+","+h+",0,0,"+ +(L*F>E*W)+","+(this._x1=t+Le*b)+","+(this._y1=i+Le*x)}},arc:function(t,i,o,l,h,p){t=+t,i=+i,o=+o,p=!!p;var m=o*Math.cos(l),b=o*Math.sin(l),x=t+m,E=i+b,L=1^p,I=p?l-h:h-l;if(o<0)throw new Error("negative radius: "+o);this._x1===null?this._+="M"+x+","+E:(Math.abs(this._x1-x)>Ru||Math.abs(this._y1-E)>Ru)&&(this._+="L"+x+","+E),o&&(I<0&&(I=I%Tm+Tm),I>lk?this._+="A"+o+","+o+",0,1,"+L+","+(t-m)+","+(i-b)+"A"+o+","+o+",0,1,"+L+","+(this._x1=x)+","+(this._y1=E):I>Ru&&(this._+="A"+o+","+o+",0,"+ +(I>=Bc)+","+L+","+(this._x1=t+o*Math.cos(h))+","+(this._y1=i+o*Math.sin(h))))},rect:function(t,i,o,l){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +o+"v"+ +l+"h"+-o+"Z"},toString:function(){return this._}};function ck(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function uk(t,i){return fetch(t,i).then(ck)}function hk(t){return(i,o)=>uk(i,o).then(l=>new DOMParser().parseFromString(l,t))}var wf=hk("image/svg+xml");function cb(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Mm(t,i){if((o=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var o,l=t.slice(0,o);return[l.length>1?l[0]+l.slice(2):l,+t.slice(o+1)]}function Vc(t){return t=Mm(Math.abs(t)),t?t[1]:NaN}function ub(t,i){return function(o,l){for(var h=o.length,p=[],m=0,b=t[0],x=0;h>0&&b>0&&(x+b+1>l&&(b=Math.max(1,l-x)),p.push(o.substring(h-=b,h+b)),!((x+=b+1)>l));)b=t[m=(m+1)%t.length];return p.reverse().join(i)}}function dk(t){return function(i){return i.replace(/[0-9]/g,function(o){return t[+o]})}}var T1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Am(t){if(!(i=T1.exec(t)))throw new Error("invalid format: "+t);var i;return new ul({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}Am.prototype=ul.prototype;function ul(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ul.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fk(t){e:for(var i=t.length,o=1,l=-1,h;o<i;++o)switch(t[o]){case".":l=h=o;break;case"0":l===0&&(l=o),h=o;break;default:if(!+t[o])break e;l>0&&(l=0);break}return l>0?t.slice(0,l)+t.slice(h+1):t}var hb;function M1(t,i){var o=Mm(t,i);if(!o)return t+"";var l=o[0],h=o[1],p=h-(hb=Math.max(-8,Math.min(8,Math.floor(h/3)))*3)+1,m=l.length;return p===m?l:p>m?l+new Array(p-m+1).join("0"):p>0?l.slice(0,p)+"."+l.slice(p):"0."+new Array(1-p).join("0")+Mm(t,Math.max(0,i+p-1))[0]}function db(t,i){var o=Mm(t,i);if(!o)return t+"";var l=o[0],h=o[1];return h<0?"0."+new Array(-h).join("0")+l:l.length>h+1?l.slice(0,h+1)+"."+l.slice(h+1):l+new Array(h-l.length+2).join("0")}const fb={"%":(t,i)=>(t*100).toFixed(i),b:t=>Math.round(t).toString(2),c:t=>t+"",d:cb,e:(t,i)=>t.toExponential(i),f:(t,i)=>t.toFixed(i),g:(t,i)=>t.toPrecision(i),o:t=>Math.round(t).toString(8),p:(t,i)=>db(t*100,i),r:db,s:M1,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function A1(t){return t}var pb=Array.prototype.map,mb=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function pk(t){var i=t.grouping===void 0||t.thousands===void 0?A1:ub(pb.call(t.grouping,Number),t.thousands+""),o=t.currency===void 0?"":t.currency[0]+"",l=t.currency===void 0?"":t.currency[1]+"",h=t.decimal===void 0?".":t.decimal+"",p=t.numerals===void 0?A1:dk(pb.call(t.numerals,String)),m=t.percent===void 0?"%":t.percent+"",b=t.minus===void 0?"\u2212":t.minus+"",x=t.nan===void 0?"NaN":t.nan+"";function E(I){I=Am(I);var F=I.fill,W=I.align,K=I.sign,re=I.symbol,se=I.zero,pe=I.width,he=I.comma,Ce=I.precision,Le=I.trim,Ve=I.type;Ve==="n"?(he=!0,Ve="g"):fb[Ve]||(Ce===void 0&&(Ce=12),Le=!0,Ve="g"),(se||F==="0"&&W==="=")&&(se=!0,F="0",W="=");var je=re==="$"?o:re==="#"&&/[boxX]/.test(Ve)?"0"+Ve.toLowerCase():"",Pe=re==="$"?l:/[%p]/.test(Ve)?m:"",ze=fb[Ve],xe=/[defgprs%]/.test(Ve);Ce=Ce===void 0?6:/[gprs]/.test(Ve)?Math.max(1,Math.min(21,Ce)):Math.max(0,Math.min(20,Ce));function _e(de){var te=je,be=Pe,q,ot,Z;if(Ve==="c")be=ze(de)+be,de="";else{de=+de;var Dt=de<0||1/de<0;if(de=isNaN(de)?x:ze(Math.abs(de),Ce),Le&&(de=fk(de)),Dt&&+de==0&&K!=="+"&&(Dt=!1),te=(Dt?K==="("?K:b:K==="-"||K==="("?"":K)+te,be=(Ve==="s"?mb[8+hb/3]:"")+be+(Dt&&K==="("?")":""),xe){for(q=-1,ot=de.length;++q<ot;)if(Z=de.charCodeAt(q),48>Z||Z>57){be=(Z===46?h+de.slice(q+1):de.slice(q))+be,de=de.slice(0,q);break}}}he&&!se&&(de=i(de,1/0));var xn=te.length+de.length+be.length,ln=xn<pe?new Array(pe-xn+1).join(F):"";switch(he&&se&&(de=i(ln+de,ln.length?pe-be.length:1/0),ln=""),W){case"<":de=te+de+be+ln;break;case"=":de=te+ln+de+be;break;case"^":de=ln.slice(0,xn=ln.length>>1)+te+de+be+ln.slice(xn);break;default:de=ln+te+de+be;break}return p(de)}return _e.toString=function(){return I+""},_e}function L(I,F){var W=E((I=Am(I),I.type="f",I)),K=Math.max(-8,Math.min(8,Math.floor(Vc(F)/3)))*3,re=Math.pow(10,-K),se=mb[8+K/3];return function(pe){return W(re*pe)+se}}return{format:E,formatPrefix:L}}var Lm,gb,vb;mk({thousands:",",grouping:[3],currency:["$",""]});function mk(t){return Lm=pk(t),gb=Lm.format,vb=Lm.formatPrefix,Lm}function gk(t){return Math.max(0,-Vc(Math.abs(t)))}function vk(t,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vc(i)/3)))*3-Vc(Math.abs(t)))}function yb(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,Vc(i)-Vc(t))+1}function Rm(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t);break}return this}const L1=Symbol("implicit");function _b(){var t=new it,i=[],o=[],l=L1;function h(p){let m=t.get(p);if(m===void 0){if(l!==L1)return l;t.set(p,m=i.push(p)-1)}return o[m%o.length]}return h.domain=function(p){if(!arguments.length)return i.slice();i=[],t=new it;for(const m of p)t.has(m)||t.set(m,i.push(m)-1);return h},h.range=function(p){return arguments.length?(o=Array.from(p),h):o.slice()},h.unknown=function(p){return arguments.length?(l=p,h):l},h.copy=function(){return _b(i,o).unknown(l)},Rm.apply(h,arguments),h}function yk(t){return function(){return t}}function _k(t){return+t}var bb=[0,1];function Zh(t){return t}function R1(t,i){return(i-=t=+t)?function(o){return(o-t)/i}:yk(isNaN(i)?NaN:.5)}function bk(t,i){var o;return t>i&&(o=t,t=i,i=o),function(l){return Math.max(t,Math.min(i,l))}}function xk(t,i,o){var l=t[0],h=t[1],p=i[0],m=i[1];return h<l?(l=R1(h,l),p=o(m,p)):(l=R1(l,h),p=o(p,m)),function(b){return p(l(b))}}function xb(t,i,o){var l=Math.min(t.length,i.length)-1,h=new Array(l),p=new Array(l),m=-1;for(t[l]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++m<l;)h[m]=R1(t[m],t[m+1]),p[m]=o(i[m],i[m+1]);return function(b){var x=Ue(t,b,1,l)-1;return p[x](h[x](b))}}function wb(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wk(){var t=bb,i=bb,o=bm,l,h,p,m=Zh,b,x,E;function L(){var F=Math.min(t.length,i.length);return m!==Zh&&(m=bk(t[0],t[F-1])),b=F>2?xb:xk,x=E=null,I}function I(F){return F==null||isNaN(F=+F)?p:(x||(x=b(t.map(l),i,o)))(l(m(F)))}return I.invert=function(F){return m(h((E||(E=b(i,t.map(l),Oa)))(F)))},I.domain=function(F){return arguments.length?(t=Array.from(F,_k),L()):t.slice()},I.range=function(F){return arguments.length?(i=Array.from(F),L()):i.slice()},I.rangeRound=function(F){return i=Array.from(F),o=z_,L()},I.clamp=function(F){return arguments.length?(m=F?!0:Zh,L()):m!==Zh},I.interpolate=function(F){return arguments.length?(o=F,L()):o},I.unknown=function(F){return arguments.length?(p=F,I):p},function(F,W){return l=F,h=W,L()}}function T(){return wk()(Zh,Zh)}function v(t,i,o,l){var h=He(t,i,o),p;switch(l=Am(l==null?",f":l),l.type){case"s":{var m=Math.max(Math.abs(t),Math.abs(i));return l.precision==null&&!isNaN(p=vk(h,m))&&(l.precision=p),vb(l,m)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(p=yb(h,Math.max(Math.abs(t),Math.abs(i))))&&(l.precision=p-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(p=gk(h))&&(l.precision=p-(l.type==="%")*2);break}}return gb(l)}function C(t){var i=t.domain;return t.ticks=function(o){var l=i();return gt(l[0],l[l.length-1],o==null?10:o)},t.tickFormat=function(o,l){var h=i();return v(h[0],h[h.length-1],o==null?10:o,l)},t.nice=function(o){o==null&&(o=10);var l=i(),h=0,p=l.length-1,m=l[h],b=l[p],x,E,L=10;for(b<m&&(E=m,m=b,b=E,E=h,h=p,p=E);L-- >0;){if(E=Xt(m,b,o),E===x)return l[h]=m,l[p]=b,i(l);if(E>0)m=Math.floor(m/E)*E,b=Math.ceil(b/E)*E;else if(E<0)m=Math.ceil(m*E)/E,b=Math.floor(b*E)/E;else break;x=E}return t},t}function z(){var t=T();return t.copy=function(){return wb(t,z())},Rm.apply(t,arguments),C(t)}function ae(t,i){t=t.slice();var o=0,l=t.length-1,h=t[o],p=t[l],m;return p<h&&(m=o,o=l,l=m,m=h,h=p,p=m),t[o]=i.floor(h),t[l]=i.ceil(p),t}var Ye=new Date,wt=new Date;function yn(t,i,o,l){function h(p){return t(p=arguments.length===0?new Date:new Date(+p)),p}return h.floor=function(p){return t(p=new Date(+p)),p},h.ceil=function(p){return t(p=new Date(p-1)),i(p,1),t(p),p},h.round=function(p){var m=h(p),b=h.ceil(p);return p-m<b-p?m:b},h.offset=function(p,m){return i(p=new Date(+p),m==null?1:Math.floor(m)),p},h.range=function(p,m,b){var x=[],E;if(p=h.ceil(p),b=b==null?1:Math.floor(b),!(p<m)||!(b>0))return x;do x.push(E=new Date(+p)),i(p,b),t(p);while(E<p&&p<m);return x},h.filter=function(p){return yn(function(m){if(m>=m)for(;t(m),!p(m);)m.setTime(m-1)},function(m,b){if(m>=m)if(b<0)for(;++b<=0;)for(;i(m,-1),!p(m););else for(;--b>=0;)for(;i(m,1),!p(m););})},o&&(h.count=function(p,m){return Ye.setTime(+p),wt.setTime(+m),t(Ye),t(wt),Math.floor(o(Ye,wt))},h.every=function(p){return p=Math.floor(p),!isFinite(p)||!(p>0)?null:p>1?h.filter(l?function(m){return l(m)%p===0}:function(m){return h.count(0,m)%p===0}):h}),h}var li=yn(function(){},function(t,i){t.setTime(+t+i)},function(t,i){return i-t});li.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?yn(function(i){i.setTime(Math.floor(i/t)*t)},function(i,o){i.setTime(+i+o*t)},function(i,o){return(o-i)/t}):li};const _i=li;li.range;const Gi=1e3,$i=Gi*60,oo=$i*60,Xo=oo*24,Wc=Xo*7,kb=Xo*30,kk=Xo*365;var fA=yn(function(t){t.setTime(t-t.getMilliseconds())},function(t,i){t.setTime(+t+i*Gi)},function(t,i){return(i-t)/Gi},function(t){return t.getUTCSeconds()});const P1=fA;fA.range;var pA=yn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gi)},function(t,i){t.setTime(+t+i*$i)},function(t,i){return(i-t)/$i},function(t){return t.getMinutes()});const Cb=pA;pA.range;var mA=yn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gi-t.getMinutes()*$i)},function(t,i){t.setTime(+t+i*oo)},function(t,i){return(i-t)/oo},function(t){return t.getHours()});const Sb=mA;mA.range;var gA=yn(t=>t.setHours(0,0,0,0),(t,i)=>t.setDate(t.getDate()+i),(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*$i)/Xo,t=>t.getDate()-1);const Pm=gA;gA.range;function kf(t){return yn(function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)},function(i,o){i.setDate(i.getDate()+o*7)},function(i,o){return(o-i-(o.getTimezoneOffset()-i.getTimezoneOffset())*$i)/Wc})}var Im=kf(0),Eb=kf(1),DU=kf(2),NU=kf(3),Dm=kf(4),OU=kf(5),FU=kf(6);Im.range,Eb.range,DU.range,NU.range,Dm.range,OU.range,FU.range;var vA=yn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,i){t.setMonth(t.getMonth()+i)},function(t,i){return i.getMonth()-t.getMonth()+(i.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const Tb=vA;vA.range;var Ck=yn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,i){t.setFullYear(t.getFullYear()+i)},function(t,i){return i.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Ck.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:yn(function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,o){i.setFullYear(i.getFullYear()+o*t)})};const Cf=Ck;Ck.range;var BU=yn(function(t){t.setUTCSeconds(0,0)},function(t,i){t.setTime(+t+i*$i)},function(t,i){return(i-t)/$i},function(t){return t.getUTCMinutes()});BU.range;var VU=yn(function(t){t.setUTCMinutes(0,0,0)},function(t,i){t.setTime(+t+i*oo)},function(t,i){return(i-t)/oo},function(t){return t.getUTCHours()});VU.range;var yA=yn(function(t){t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCDate(t.getUTCDate()+i)},function(t,i){return(i-t)/Xo},function(t){return t.getUTCDate()-1});const _A=yA;yA.range;function Sf(t){return yn(function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-t)%7),i.setUTCHours(0,0,0,0)},function(i,o){i.setUTCDate(i.getUTCDate()+o*7)},function(i,o){return(o-i)/Wc})}var bA=Sf(0),Mb=Sf(1),WU=Sf(2),zU=Sf(3),Nm=Sf(4),UU=Sf(5),GU=Sf(6);bA.range,Mb.range,WU.range,zU.range,Nm.range,UU.range,GU.range;var HU=yn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCMonth(t.getUTCMonth()+i)},function(t,i){return i.getUTCMonth()-t.getUTCMonth()+(i.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});HU.range;var Sk=yn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i)},function(t,i){return i.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Sk.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:yn(function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/t)*t),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,o){i.setUTCFullYear(i.getUTCFullYear()+o*t)})};const I1=Sk;Sk.range;function YU(t,i,o,l,h,p){const m=[[P1,1,Gi],[P1,5,5*Gi],[P1,15,15*Gi],[P1,30,30*Gi],[p,1,$i],[p,5,5*$i],[p,15,15*$i],[p,30,30*$i],[h,1,oo],[h,3,3*oo],[h,6,6*oo],[h,12,12*oo],[l,1,Xo],[l,2,2*Xo],[o,1,Wc],[i,1,kb],[i,3,3*kb],[t,1,kk]];function b(E,L,I){const F=L<E;F&&([E,L]=[L,E]);const W=I&&typeof I.range=="function"?I:x(E,L,I),K=W?W.range(E,+L+1):[];return F?K.reverse():K}function x(E,L,I){const F=Math.abs(L-E)/I,W=ee(([,,se])=>se).right(m,F);if(W===m.length)return t.every(He(E/kk,L/kk,I));if(W===0)return _i.every(Math.max(He(E,L,I),1));const[K,re]=m[F/m[W-1][2]<m[W][2]/F?W-1:W];return K.every(re)}return[b,x]}const[jU,$U]=YU(Cf,Tb,Im,Pm,Sb,Cb);function Ek(t){if(0<=t.y&&t.y<100){var i=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return i.setFullYear(t.y),i}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Tk(t){if(0<=t.y&&t.y<100){var i=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return i.setUTCFullYear(t.y),i}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function D1(t,i,o){return{y:t,m:i,d:o,H:0,M:0,S:0,L:0}}function qU(t){var i=t.dateTime,o=t.date,l=t.time,h=t.periods,p=t.days,m=t.shortDays,b=t.months,x=t.shortMonths,E=N1(h),L=O1(h),I=N1(p),F=O1(p),W=N1(m),K=O1(m),re=N1(b),se=O1(b),pe=N1(x),he=O1(x),Ce={a:Dt,A:xn,b:ln,B:Je,c:null,d:EA,e:EA,f:vG,g:TG,G:AG,H:pG,I:mG,j:gG,L:TA,m:yG,M:_G,p:kt,q:mt,Q:IA,s:DA,S:bG,u:xG,U:wG,V:kG,w:CG,W:SG,x:null,X:null,y:EG,Y:MG,Z:LG,"%":PA},Le={a:vt,A:Pt,b:rn,B:nt,c:null,d:AA,e:AA,f:DG,g:HG,G:jG,H:RG,I:PG,j:IG,L:LA,m:NG,M:OG,p:Ln,q:Ie,Q:IA,s:DA,S:FG,u:BG,U:VG,V:WG,w:zG,W:UG,x:null,X:null,y:GG,Y:YG,Z:$G,"%":PA},Ve={a:_e,A:de,b:te,B:be,c:q,d:CA,e:CA,f:uG,g:kA,G:wA,H:SA,I:SA,j:oG,L:cG,m:sG,M:aG,p:xe,q:rG,Q:dG,s:fG,S:lG,u:QU,U:eG,V:tG,w:JU,W:nG,x:ot,X:Z,y:kA,Y:wA,Z:iG,"%":hG};Ce.x=je(o,Ce),Ce.X=je(l,Ce),Ce.c=je(i,Ce),Le.x=je(o,Le),Le.X=je(l,Le),Le.c=je(i,Le);function je(Be,et){return function(Me){var ke=[],ge=-1,ct=0,le=Be.length,Ft,Oe,Wn;for(Me instanceof Date||(Me=new Date(+Me));++ge<le;)Be.charCodeAt(ge)===37&&(ke.push(Be.slice(ct,ge)),(Oe=xA[Ft=Be.charAt(++ge)])!=null?Ft=Be.charAt(++ge):Oe=Ft==="e"?" ":"0",(Wn=et[Ft])&&(Ft=Wn(Me,Oe)),ke.push(Ft),ct=ge+1);return ke.push(Be.slice(ct,ge)),ke.join("")}}function Pe(Be,et){return function(Me){var ke=D1(1900,void 0,1),ge=ze(ke,Be,Me+="",0),ct,le;if(ge!=Me.length)return null;if("Q"in ke)return new Date(ke.Q);if("s"in ke)return new Date(ke.s*1e3+("L"in ke?ke.L:0));if(et&&!("Z"in ke)&&(ke.Z=0),"p"in ke&&(ke.H=ke.H%12+ke.p*12),ke.m===void 0&&(ke.m="q"in ke?ke.q:0),"V"in ke){if(ke.V<1||ke.V>53)return null;"w"in ke||(ke.w=1),"Z"in ke?(ct=Tk(D1(ke.y,0,1)),le=ct.getUTCDay(),ct=le>4||le===0?Mb.ceil(ct):Mb(ct),ct=_A.offset(ct,(ke.V-1)*7),ke.y=ct.getUTCFullYear(),ke.m=ct.getUTCMonth(),ke.d=ct.getUTCDate()+(ke.w+6)%7):(ct=Ek(D1(ke.y,0,1)),le=ct.getDay(),ct=le>4||le===0?Eb.ceil(ct):Eb(ct),ct=Pm.offset(ct,(ke.V-1)*7),ke.y=ct.getFullYear(),ke.m=ct.getMonth(),ke.d=ct.getDate()+(ke.w+6)%7)}else("W"in ke||"U"in ke)&&("w"in ke||(ke.w="u"in ke?ke.u%7:"W"in ke?1:0),le="Z"in ke?Tk(D1(ke.y,0,1)).getUTCDay():Ek(D1(ke.y,0,1)).getDay(),ke.m=0,ke.d="W"in ke?(ke.w+6)%7+ke.W*7-(le+5)%7:ke.w+ke.U*7-(le+6)%7);return"Z"in ke?(ke.H+=ke.Z/100|0,ke.M+=ke.Z%100,Tk(ke)):Ek(ke)}}function ze(Be,et,Me,ke){for(var ge=0,ct=et.length,le=Me.length,Ft,Oe;ge<ct;){if(ke>=le)return-1;if(Ft=et.charCodeAt(ge++),Ft===37){if(Ft=et.charAt(ge++),Oe=Ve[Ft in xA?et.charAt(ge++):Ft],!Oe||(ke=Oe(Be,Me,ke))<0)return-1}else if(Ft!=Me.charCodeAt(ke++))return-1}return ke}function xe(Be,et,Me){var ke=E.exec(et.slice(Me));return ke?(Be.p=L.get(ke[0].toLowerCase()),Me+ke[0].length):-1}function _e(Be,et,Me){var ke=W.exec(et.slice(Me));return ke?(Be.w=K.get(ke[0].toLowerCase()),Me+ke[0].length):-1}function de(Be,et,Me){var ke=I.exec(et.slice(Me));return ke?(Be.w=F.get(ke[0].toLowerCase()),Me+ke[0].length):-1}function te(Be,et,Me){var ke=pe.exec(et.slice(Me));return ke?(Be.m=he.get(ke[0].toLowerCase()),Me+ke[0].length):-1}function be(Be,et,Me){var ke=re.exec(et.slice(Me));return ke?(Be.m=se.get(ke[0].toLowerCase()),Me+ke[0].length):-1}function q(Be,et,Me){return ze(Be,i,et,Me)}function ot(Be,et,Me){return ze(Be,o,et,Me)}function Z(Be,et,Me){return ze(Be,l,et,Me)}function Dt(Be){return m[Be.getDay()]}function xn(Be){return p[Be.getDay()]}function ln(Be){return x[Be.getMonth()]}function Je(Be){return b[Be.getMonth()]}function kt(Be){return h[+(Be.getHours()>=12)]}function mt(Be){return 1+~~(Be.getMonth()/3)}function vt(Be){return m[Be.getUTCDay()]}function Pt(Be){return p[Be.getUTCDay()]}function rn(Be){return x[Be.getUTCMonth()]}function nt(Be){return b[Be.getUTCMonth()]}function Ln(Be){return h[+(Be.getUTCHours()>=12)]}function Ie(Be){return 1+~~(Be.getUTCMonth()/3)}return{format:function(Be){var et=je(Be+="",Ce);return et.toString=function(){return Be},et},parse:function(Be){var et=Pe(Be+="",!1);return et.toString=function(){return Be},et},utcFormat:function(Be){var et=je(Be+="",Le);return et.toString=function(){return Be},et},utcParse:function(Be){var et=Pe(Be+="",!0);return et.toString=function(){return Be},et}}}var xA={"-":"",_:" ",0:"0"},ao=/^\s*\d+/,XU=/^%/,ZU=/[\\^$*+?|[\]().{}]/g;function vr(t,i,o){var l=t<0?"-":"",h=(l?-t:t)+"",p=h.length;return l+(p<o?new Array(o-p+1).join(i)+h:h)}function KU(t){return t.replace(ZU,"\\$&")}function N1(t){return new RegExp("^(?:"+t.map(KU).join("|")+")","i")}function O1(t){return new Map(t.map((i,o)=>[i.toLowerCase(),o]))}function JU(t,i,o){var l=ao.exec(i.slice(o,o+1));return l?(t.w=+l[0],o+l[0].length):-1}function QU(t,i,o){var l=ao.exec(i.slice(o,o+1));return l?(t.u=+l[0],o+l[0].length):-1}function eG(t,i,o){var l=ao.exec(i.slice(o,o+2));return l?(t.U=+l[0],o+l[0].length):-1}function tG(t,i,o){var l=ao.exec(i.slice(o,o+2));return l?(t.V=+l[0],o+l[0].length):-1}function nG(t,i,o){var l=ao.exec(i.slice(o,o+2));return l?(t.W=+l[0],o+l[0].length):-1}function wA(t,i,o){var l=ao.exec(i.slice(o,o+4));return l?(t.y=+l[0],o+l[0].length):-1}function kA(t,i,o){var l=ao.exec(i.slice(o,o+2));return l?(t.y=+l[0]+(+l[0]>68?1900:2e3),o+l[0].length):-1}function iG(t,i,o){var l=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(o,o+6));return l?(t.Z=l[1]?0:-(l[2]+(l[3]||"00")),o+l[0].length):-1}function rG(t,i,o){var l=ao.exec(i.slice(o,o+1));return l?(t.q=l[0]*3-3,o+l[0].length):-1}function sG(t,i,o){var l=ao.exec(i.slice(o,o+2));return l?(t.m=l[0]-1,o+l[0].length):-1}function CA(t,i,o){var l=ao.exec(i.slice(o,o+2));return l?(t.d=+l[0],o+l[0].length):-1}function oG(t,i,o){var l=ao.exec(i.slice(o,o+3));return l?(t.m=0,t.d=+l[0],o+l[0].length):-1}function SA(t,i,o){var l=ao.exec(i.slice(o,o+2));return l?(t.H=+l[0],o+l[0].length):-1}function aG(t,i,o){var l=ao.exec(i.slice(o,o+2));return l?(t.M=+l[0],o+l[0].length):-1}function lG(t,i,o){var l=ao.exec(i.slice(o,o+2));return l?(t.S=+l[0],o+l[0].length):-1}function cG(t,i,o){var l=ao.exec(i.slice(o,o+3));return l?(t.L=+l[0],o+l[0].length):-1}function uG(t,i,o){var l=ao.exec(i.slice(o,o+6));return l?(t.L=Math.floor(l[0]/1e3),o+l[0].length):-1}function hG(t,i,o){var l=XU.exec(i.slice(o,o+1));return l?o+l[0].length:-1}function dG(t,i,o){var l=ao.exec(i.slice(o));return l?(t.Q=+l[0],o+l[0].length):-1}function fG(t,i,o){var l=ao.exec(i.slice(o));return l?(t.s=+l[0],o+l[0].length):-1}function EA(t,i){return vr(t.getDate(),i,2)}function pG(t,i){return vr(t.getHours(),i,2)}function mG(t,i){return vr(t.getHours()%12||12,i,2)}function gG(t,i){return vr(1+Pm.count(Cf(t),t),i,3)}function TA(t,i){return vr(t.getMilliseconds(),i,3)}function vG(t,i){return TA(t,i)+"000"}function yG(t,i){return vr(t.getMonth()+1,i,2)}function _G(t,i){return vr(t.getMinutes(),i,2)}function bG(t,i){return vr(t.getSeconds(),i,2)}function xG(t){var i=t.getDay();return i===0?7:i}function wG(t,i){return vr(Im.count(Cf(t)-1,t),i,2)}function MA(t){var i=t.getDay();return i>=4||i===0?Dm(t):Dm.ceil(t)}function kG(t,i){return t=MA(t),vr(Dm.count(Cf(t),t)+(Cf(t).getDay()===4),i,2)}function CG(t){return t.getDay()}function SG(t,i){return vr(Eb.count(Cf(t)-1,t),i,2)}function EG(t,i){return vr(t.getFullYear()%100,i,2)}function TG(t,i){return t=MA(t),vr(t.getFullYear()%100,i,2)}function MG(t,i){return vr(t.getFullYear()%1e4,i,4)}function AG(t,i){var o=t.getDay();return t=o>=4||o===0?Dm(t):Dm.ceil(t),vr(t.getFullYear()%1e4,i,4)}function LG(t){var i=t.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+vr(i/60|0,"0",2)+vr(i%60,"0",2)}function AA(t,i){return vr(t.getUTCDate(),i,2)}function RG(t,i){return vr(t.getUTCHours(),i,2)}function PG(t,i){return vr(t.getUTCHours()%12||12,i,2)}function IG(t,i){return vr(1+_A.count(I1(t),t),i,3)}function LA(t,i){return vr(t.getUTCMilliseconds(),i,3)}function DG(t,i){return LA(t,i)+"000"}function NG(t,i){return vr(t.getUTCMonth()+1,i,2)}function OG(t,i){return vr(t.getUTCMinutes(),i,2)}function FG(t,i){return vr(t.getUTCSeconds(),i,2)}function BG(t){var i=t.getUTCDay();return i===0?7:i}function VG(t,i){return vr(bA.count(I1(t)-1,t),i,2)}function RA(t){var i=t.getUTCDay();return i>=4||i===0?Nm(t):Nm.ceil(t)}function WG(t,i){return t=RA(t),vr(Nm.count(I1(t),t)+(I1(t).getUTCDay()===4),i,2)}function zG(t){return t.getUTCDay()}function UG(t,i){return vr(Mb.count(I1(t)-1,t),i,2)}function GG(t,i){return vr(t.getUTCFullYear()%100,i,2)}function HG(t,i){return t=RA(t),vr(t.getUTCFullYear()%100,i,2)}function YG(t,i){return vr(t.getUTCFullYear()%1e4,i,4)}function jG(t,i){var o=t.getUTCDay();return t=o>=4||o===0?Nm(t):Nm.ceil(t),vr(t.getUTCFullYear()%1e4,i,4)}function $G(){return"+0000"}function PA(){return"%"}function IA(t){return+t}function DA(t){return Math.floor(+t/1e3)}var Om,Ab;qG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function qG(t){return Om=qU(t),Ab=Om.format,Om.parse,Om.utcFormat,Om.utcParse,Om}function XG(t){return new Date(t)}function ZG(t){return t instanceof Date?+t:+new Date(+t)}function NA(t,i,o,l,h,p,m,b,x,E){var L=T(),I=L.invert,F=L.domain,W=E(".%L"),K=E(":%S"),re=E("%I:%M"),se=E("%I %p"),pe=E("%a %d"),he=E("%b %d"),Ce=E("%B"),Le=E("%Y");function Ve(je){return(x(je)<je?W:b(je)<je?K:m(je)<je?re:p(je)<je?se:l(je)<je?h(je)<je?pe:he:o(je)<je?Ce:Le)(je)}return L.invert=function(je){return new Date(I(je))},L.domain=function(je){return arguments.length?F(Array.from(je,ZG)):F().map(XG)},L.ticks=function(je){var Pe=F();return t(Pe[0],Pe[Pe.length-1],je==null?10:je)},L.tickFormat=function(je,Pe){return Pe==null?Ve:E(Pe)},L.nice=function(je){var Pe=F();return(!je||typeof je.range!="function")&&(je=i(Pe[0],Pe[Pe.length-1],je==null?10:je)),je?F(ae(Pe,je)):L},L.copy=function(){return wb(L,NA(t,i,o,l,h,p,m,b,x,E))},L}function KG(){return Rm.apply(NA(jU,$U,Cf,Tb,Im,Pm,Sb,Cb,P1,Ab).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bs(t){return function(){return t}}const OA=Math.abs,Io=Math.atan2,Ef=Math.cos,JG=Math.max,Mk=Math.min,zc=Math.sin,Fm=Math.sqrt,pa=1e-12,F1=Math.PI,Lb=F1/2,Rb=2*F1;function QG(t){return t>1?0:t<-1?F1:Math.acos(t)}function FA(t){return t>=1?Lb:t<=-1?-Lb:Math.asin(t)}function eH(t){return t.innerRadius}function tH(t){return t.outerRadius}function nH(t){return t.startAngle}function iH(t){return t.endAngle}function rH(t){return t&&t.padAngle}function sH(t,i,o,l,h,p,m,b){var x=o-t,E=l-i,L=m-h,I=b-p,F=I*x-L*E;if(!(F*F<pa))return F=(L*(i-p)-I*(t-h))/F,[t+F*x,i+F*E]}function Pb(t,i,o,l,h,p,m){var b=t-o,x=i-l,E=(m?p:-p)/Fm(b*b+x*x),L=E*x,I=-E*b,F=t+L,W=i+I,K=o+L,re=l+I,se=(F+K)/2,pe=(W+re)/2,he=K-F,Ce=re-W,Le=he*he+Ce*Ce,Ve=h-p,je=F*re-K*W,Pe=(Ce<0?-1:1)*Fm(JG(0,Ve*Ve*Le-je*je)),ze=(je*Ce-he*Pe)/Le,xe=(-je*he-Ce*Pe)/Le,_e=(je*Ce+he*Pe)/Le,de=(-je*he+Ce*Pe)/Le,te=ze-se,be=xe-pe,q=_e-se,ot=de-pe;return te*te+be*be>q*q+ot*ot&&(ze=_e,xe=de),{cx:ze,cy:xe,x01:-L,y01:-I,x11:ze*(h/Ve-1),y11:xe*(h/Ve-1)}}function Ak(){var t=eH,i=tH,o=bs(0),l=null,h=nH,p=iH,m=rH,b=null;function x(){var E,L,I=+t.apply(this,arguments),F=+i.apply(this,arguments),W=h.apply(this,arguments)-Lb,K=p.apply(this,arguments)-Lb,re=OA(K-W),se=K>W;if(b||(b=E=E1()),F<I&&(L=F,F=I,I=L),!(F>pa))b.moveTo(0,0);else if(re>Rb-pa)b.moveTo(F*Ef(W),F*zc(W)),b.arc(0,0,F,W,K,!se),I>pa&&(b.moveTo(I*Ef(K),I*zc(K)),b.arc(0,0,I,K,W,se));else{var pe=W,he=K,Ce=W,Le=K,Ve=re,je=re,Pe=m.apply(this,arguments)/2,ze=Pe>pa&&(l?+l.apply(this,arguments):Fm(I*I+F*F)),xe=Mk(OA(F-I)/2,+o.apply(this,arguments)),_e=xe,de=xe,te,be;if(ze>pa){var q=FA(ze/I*zc(Pe)),ot=FA(ze/F*zc(Pe));(Ve-=q*2)>pa?(q*=se?1:-1,Ce+=q,Le-=q):(Ve=0,Ce=Le=(W+K)/2),(je-=ot*2)>pa?(ot*=se?1:-1,pe+=ot,he-=ot):(je=0,pe=he=(W+K)/2)}var Z=F*Ef(pe),Dt=F*zc(pe),xn=I*Ef(Le),ln=I*zc(Le);if(xe>pa){var Je=F*Ef(he),kt=F*zc(he),mt=I*Ef(Ce),vt=I*zc(Ce),Pt;if(re<F1&&(Pt=sH(Z,Dt,mt,vt,Je,kt,xn,ln))){var rn=Z-Pt[0],nt=Dt-Pt[1],Ln=Je-Pt[0],Ie=kt-Pt[1],Be=1/zc(QG((rn*Ln+nt*Ie)/(Fm(rn*rn+nt*nt)*Fm(Ln*Ln+Ie*Ie)))/2),et=Fm(Pt[0]*Pt[0]+Pt[1]*Pt[1]);_e=Mk(xe,(I-et)/(Be-1)),de=Mk(xe,(F-et)/(Be+1))}}je>pa?de>pa?(te=Pb(mt,vt,Z,Dt,F,de,se),be=Pb(Je,kt,xn,ln,F,de,se),b.moveTo(te.cx+te.x01,te.cy+te.y01),de<xe?b.arc(te.cx,te.cy,de,Io(te.y01,te.x01),Io(be.y01,be.x01),!se):(b.arc(te.cx,te.cy,de,Io(te.y01,te.x01),Io(te.y11,te.x11),!se),b.arc(0,0,F,Io(te.cy+te.y11,te.cx+te.x11),Io(be.cy+be.y11,be.cx+be.x11),!se),b.arc(be.cx,be.cy,de,Io(be.y11,be.x11),Io(be.y01,be.x01),!se))):(b.moveTo(Z,Dt),b.arc(0,0,F,pe,he,!se)):b.moveTo(Z,Dt),!(I>pa)||!(Ve>pa)?b.lineTo(xn,ln):_e>pa?(te=Pb(xn,ln,Je,kt,I,-_e,se),be=Pb(Z,Dt,mt,vt,I,-_e,se),b.lineTo(te.cx+te.x01,te.cy+te.y01),_e<xe?b.arc(te.cx,te.cy,_e,Io(te.y01,te.x01),Io(be.y01,be.x01),!se):(b.arc(te.cx,te.cy,_e,Io(te.y01,te.x01),Io(te.y11,te.x11),!se),b.arc(0,0,I,Io(te.cy+te.y11,te.cx+te.x11),Io(be.cy+be.y11,be.cx+be.x11),se),b.arc(be.cx,be.cy,_e,Io(be.y11,be.x11),Io(be.y01,be.x01),!se))):b.arc(0,0,I,Le,Ce,se)}if(b.closePath(),E)return b=null,E+""||null}return x.centroid=function(){var E=(+t.apply(this,arguments)+ +i.apply(this,arguments))/2,L=(+h.apply(this,arguments)+ +p.apply(this,arguments))/2-F1/2;return[Ef(L)*E,zc(L)*E]},x.innerRadius=function(E){return arguments.length?(t=typeof E=="function"?E:bs(+E),x):t},x.outerRadius=function(E){return arguments.length?(i=typeof E=="function"?E:bs(+E),x):i},x.cornerRadius=function(E){return arguments.length?(o=typeof E=="function"?E:bs(+E),x):o},x.padRadius=function(E){return arguments.length?(l=E==null?null:typeof E=="function"?E:bs(+E),x):l},x.startAngle=function(E){return arguments.length?(h=typeof E=="function"?E:bs(+E),x):h},x.endAngle=function(E){return arguments.length?(p=typeof E=="function"?E:bs(+E),x):p},x.padAngle=function(E){return arguments.length?(m=typeof E=="function"?E:bs(+E),x):m},x.context=function(E){return arguments.length?(b=E==null?null:E,x):b},x}function BA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function VA(t){this._context=t}VA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i);break}}};function Ba(t){return new VA(t)}function oH(t){return t[0]}function aH(t){return t[1]}function Bm(t,i){var o=bs(!0),l=null,h=Ba,p=null;t=typeof t=="function"?t:t===void 0?oH:bs(t),i=typeof i=="function"?i:i===void 0?aH:bs(i);function m(b){var x,E=(b=BA(b)).length,L,I=!1,F;for(l==null&&(p=h(F=E1())),x=0;x<=E;++x)!(x<E&&o(L=b[x],x,b))===I&&((I=!I)?p.lineStart():p.lineEnd()),I&&p.point(+t(L,x,b),+i(L,x,b));if(F)return p=null,F+""||null}return m.x=function(b){return arguments.length?(t=typeof b=="function"?b:bs(+b),m):t},m.y=function(b){return arguments.length?(i=typeof b=="function"?b:bs(+b),m):i},m.defined=function(b){return arguments.length?(o=typeof b=="function"?b:bs(!!b),m):o},m.curve=function(b){return arguments.length?(h=b,l!=null&&(p=h(l)),m):h},m.context=function(b){return arguments.length?(b==null?l=p=null:p=h(l=b),m):l},m}function lH(t,i){return i<t?-1:i>t?1:i>=t?0:NaN}function cH(t){return t}function uH(){var t=cH,i=lH,o=null,l=bs(0),h=bs(Rb),p=bs(0);function m(b){var x,E=(b=BA(b)).length,L,I,F=0,W=new Array(E),K=new Array(E),re=+l.apply(this,arguments),se=Math.min(Rb,Math.max(-Rb,h.apply(this,arguments)-re)),pe,he=Math.min(Math.abs(se)/E,p.apply(this,arguments)),Ce=he*(se<0?-1:1),Le;for(x=0;x<E;++x)(Le=K[W[x]=x]=+t(b[x],x,b))>0&&(F+=Le);for(i!=null?W.sort(function(Ve,je){return i(K[Ve],K[je])}):o!=null&&W.sort(function(Ve,je){return o(b[Ve],b[je])}),x=0,I=F?(se-E*Ce)/F:0;x<E;++x,re=pe)L=W[x],Le=K[L],pe=re+(Le>0?Le*I:0)+Ce,K[L]={data:b[L],index:x,value:Le,startAngle:re,endAngle:pe,padAngle:he};return K}return m.value=function(b){return arguments.length?(t=typeof b=="function"?b:bs(+b),m):t},m.sortValues=function(b){return arguments.length?(i=b,o=null,m):i},m.sort=function(b){return arguments.length?(o=b,i=null,m):o},m.startAngle=function(b){return arguments.length?(l=typeof b=="function"?b:bs(+b),m):l},m.endAngle=function(b){return arguments.length?(h=typeof b=="function"?b:bs(+b),m):h},m.padAngle=function(b){return arguments.length?(p=typeof b=="function"?b:bs(+b),m):p},m}function Ib(){}function Db(t,i,o){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+o)/6)}function WA(t){this._context=t}WA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Db(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Db(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function Vm(t){return new WA(t)}function zA(t){this._context=t}zA.prototype={areaStart:Ib,areaEnd:Ib,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x2=t,this._y2=i;break;case 1:this._point=2,this._x3=t,this._y3=i;break;case 2:this._point=3,this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:Db(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function hH(t){return new zA(t)}function UA(t){this._context=t}UA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var o=(this._x0+4*this._x1+t)/6,l=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(o,l):this._context.moveTo(o,l);break;case 3:this._point=4;default:Db(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function dH(t){return new UA(t)}function GA(t){this._context=t}GA.prototype={areaStart:Ib,areaEnd:Ib,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,i){t=+t,i=+i,this._point?this._context.lineTo(t,i):(this._point=1,this._context.moveTo(t,i))}};function fH(t){return new GA(t)}function HA(t){return t<0?-1:1}function YA(t,i,o){var l=t._x1-t._x0,h=i-t._x1,p=(t._y1-t._y0)/(l||h<0&&-0),m=(o-t._y1)/(h||l<0&&-0),b=(p*h+m*l)/(l+h);return(HA(p)+HA(m))*Math.min(Math.abs(p),Math.abs(m),.5*Math.abs(b))||0}function jA(t,i){var o=t._x1-t._x0;return o?(3*(t._y1-t._y0)/o-i)/2:i}function Lk(t,i,o){var l=t._x0,h=t._y0,p=t._x1,m=t._y1,b=(p-l)/3;t._context.bezierCurveTo(l+b,h+b*i,p-b,m-b*o,p,m)}function Nb(t){this._context=t}Nb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lk(this,this._t0,jA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){var o=NaN;if(t=+t,i=+i,!(t===this._x1&&i===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,Lk(this,jA(this,o=YA(this,t,i)),o);break;default:Lk(this,this._t0,o=YA(this,t,i));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._t0=o}}};function $A(t){this._context=new qA(t)}($A.prototype=Object.create(Nb.prototype)).point=function(t,i){Nb.prototype.point.call(this,i,t)};function qA(t){this._context=t}qA.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,o,l,h,p){this._context.bezierCurveTo(i,t,l,o,p,h)}};function pH(t){return new Nb(t)}function mH(t){return new $A(t)}function XA(t){this._context=t}XA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,o=t.length;if(o)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),o===2)this._context.lineTo(t[1],i[1]);else for(var l=ZA(t),h=ZA(i),p=0,m=1;m<o;++p,++m)this._context.bezierCurveTo(l[0][p],h[0][p],l[1][p],h[1][p],t[m],i[m]);(this._line||this._line!==0&&o===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,i){this._x.push(+t),this._y.push(+i)}};function ZA(t){var i,o=t.length-1,l,h=new Array(o),p=new Array(o),m=new Array(o);for(h[0]=0,p[0]=2,m[0]=t[0]+2*t[1],i=1;i<o-1;++i)h[i]=1,p[i]=4,m[i]=4*t[i]+2*t[i+1];for(h[o-1]=2,p[o-1]=7,m[o-1]=8*t[o-1]+t[o],i=1;i<o;++i)l=h[i]/p[i-1],p[i]-=l,m[i]-=l*m[i-1];for(h[o-1]=m[o-1]/p[o-1],i=o-2;i>=0;--i)h[i]=(m[i]-h[i+1])/p[i];for(p[o-1]=(t[o]+h[o-1])/2,i=0;i<o-1;++i)p[i]=2*t[i+1]-h[i+1];return[h,p]}function gH(t){return new XA(t)}function Ob(t,i){this._context=t,this._t=i}Ob.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(t,i);else{var o=this._x*(1-this._t)+t*this._t;this._context.lineTo(o,this._y),this._context.lineTo(o,i)}break}}this._x=t,this._y=i}};function vH(t){return new Ob(t,.5)}function yH(t){return new Ob(t,0)}function _H(t){return new Ob(t,1)}function Wm(t,i,o){this.k=t,this.x=i,this.y=o}Wm.prototype={constructor:Wm,scale:function(t){return t===1?this:new Wm(this.k*t,this.x,this.y)},translate:function(t,i){return t===0&i===0?this:new Wm(this.k,this.x+this.k*t,this.y+this.k*i)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Wm(1,0,0),Wm.prototype;/*! @license DOMPurify 2.4.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.1/LICENSE */function Kh(t){return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Kh(t)}function Rk(t,i){return Rk=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},Rk(t,i)}function bH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fb(t,i,o){return bH()?Fb=Reflect.construct:Fb=function(h,p,m){var b=[null];b.push.apply(b,p);var x=Function.bind.apply(h,b),E=new x;return m&&Rk(E,m.prototype),E},Fb.apply(null,arguments)}function Fl(t){return xH(t)||wH(t)||kH(t)||CH()}function xH(t){if(Array.isArray(t))return Pk(t)}function wH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kH(t,i){if(!!t){if(typeof t=="string")return Pk(t,i);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Pk(t,i)}}function Pk(t,i){(i==null||i>t.length)&&(i=t.length);for(var o=0,l=new Array(i);o<i;o++)l[o]=t[o];return l}function CH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var SH=Object.hasOwnProperty,KA=Object.setPrototypeOf,EH=Object.isFrozen,TH=Object.getPrototypeOf,MH=Object.getOwnPropertyDescriptor,Zo=Object.freeze,Bl=Object.seal,AH=Object.create,JA=typeof Reflect<"u"&&Reflect,Bb=JA.apply,Ik=JA.construct;Bb||(Bb=function(i,o,l){return i.apply(o,l)}),Zo||(Zo=function(i){return i}),Bl||(Bl=function(i){return i}),Ik||(Ik=function(i,o){return Fb(i,Fl(o))});var LH=hl(Array.prototype.forEach),QA=hl(Array.prototype.pop),B1=hl(Array.prototype.push),Vb=hl(String.prototype.toLowerCase),Dk=hl(String.prototype.toString),RH=hl(String.prototype.match),Vl=hl(String.prototype.replace),PH=hl(String.prototype.indexOf),IH=hl(String.prototype.trim),Ko=hl(RegExp.prototype.test),Nk=DH(TypeError);function hl(t){return function(i){for(var o=arguments.length,l=new Array(o>1?o-1:0),h=1;h<o;h++)l[h-1]=arguments[h];return Bb(t,i,l)}}function DH(t){return function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return Ik(t,o)}}function Ki(t,i,o){o=o||Vb,KA&&KA(t,null);for(var l=i.length;l--;){var h=i[l];if(typeof h=="string"){var p=o(h);p!==h&&(EH(i)||(i[l]=p),h=p)}t[h]=!0}return t}function Tf(t){var i=AH(null),o;for(o in t)Bb(SH,t,[o])&&(i[o]=t[o]);return i}function Wb(t,i){for(;t!==null;){var o=MH(t,i);if(o){if(o.get)return hl(o.get);if(typeof o.value=="function")return hl(o.value)}t=TH(t)}function l(h){return console.warn("fallback value for",h),null}return l}var e8=Zo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ok=Zo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Fk=Zo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),NH=Zo(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Bk=Zo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),OH=Zo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),t8=Zo(["#text"]),n8=Zo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Vk=Zo(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),i8=Zo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),zb=Zo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),FH=Bl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),BH=Bl(/<%[\w\W]*|[\w\W]*%>/gm),VH=Bl(/\${[\w\W]*}/gm),WH=Bl(/^data-[\-\w.\u00B7-\uFFFF]/),zH=Bl(/^aria-[\-\w]+$/),UH=Bl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),GH=Bl(/^(?:\w+script|data):/i),HH=Bl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),YH=Bl(/^html$/i),jH=function(){return typeof window>"u"?null:window},$H=function(i,o){if(Kh(i)!=="object"||typeof i.createPolicy!="function")return null;var l=null,h="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(h)&&(l=o.currentScript.getAttribute(h));var p="dompurify"+(l?"#"+l:"");try{return i.createPolicy(p,{createHTML:function(b){return b},createScriptURL:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+p+" could not be created."),null}};function r8(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jH(),i=function(rt){return r8(rt)};if(i.version="2.4.1",i.removed=[],!t||!t.document||t.document.nodeType!==9)return i.isSupported=!1,i;var o=t.document,l=t.document,h=t.DocumentFragment,p=t.HTMLTemplateElement,m=t.Node,b=t.Element,x=t.NodeFilter,E=t.NamedNodeMap,L=E===void 0?t.NamedNodeMap||t.MozNamedAttrMap:E,I=t.HTMLFormElement,F=t.DOMParser,W=t.trustedTypes,K=b.prototype,re=Wb(K,"cloneNode"),se=Wb(K,"nextSibling"),pe=Wb(K,"childNodes"),he=Wb(K,"parentNode");if(typeof p=="function"){var Ce=l.createElement("template");Ce.content&&Ce.content.ownerDocument&&(l=Ce.content.ownerDocument)}var Le=$H(W,o),Ve=Le?Le.createHTML(""):"",je=l,Pe=je.implementation,ze=je.createNodeIterator,xe=je.createDocumentFragment,_e=je.getElementsByTagName,de=o.importNode,te={};try{te=Tf(l).documentMode?l.documentMode:{}}catch{}var be={};i.isSupported=typeof he=="function"&&Pe&&typeof Pe.createHTMLDocument<"u"&&te!==9;var q=FH,ot=BH,Z=VH,Dt=WH,xn=zH,ln=GH,Je=HH,kt=UH,mt=null,vt=Ki({},[].concat(Fl(e8),Fl(Ok),Fl(Fk),Fl(Bk),Fl(t8))),Pt=null,rn=Ki({},[].concat(Fl(n8),Fl(Vk),Fl(i8),Fl(zb))),nt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ln=null,Ie=null,Be=!0,et=!0,Me=!1,ke=!1,ge=!1,ct=!1,le=!1,Ft=!1,Oe=!1,Wn=!1,dt=!0,Cn=!1,un="user-content-",Kt=!0,hn=!1,cn={},qt=null,_t=Ki({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Si=null,ni=Ki({},["audio","video","img","source","image","track"]),ei=null,ii=Ki({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$n="http://www.w3.org/1998/Math/MathML",ar="http://www.w3.org/2000/svg",Yn="http://www.w3.org/1999/xhtml",zn=Yn,Bn=!1,sn=null,jt=Ki({},[$n,ar,Yn],Dk),bn,tn=["application/xhtml+xml","text/html"],Un="text/html",bt,gi=null,zt=l.createElement("form"),di=function(rt){return rt instanceof RegExp||rt instanceof Function},Ri=function(rt){gi&&gi===rt||((!rt||Kh(rt)!=="object")&&(rt={}),rt=Tf(rt),bn=tn.indexOf(rt.PARSER_MEDIA_TYPE)===-1?bn=Un:bn=rt.PARSER_MEDIA_TYPE,bt=bn==="application/xhtml+xml"?Dk:Vb,mt="ALLOWED_TAGS"in rt?Ki({},rt.ALLOWED_TAGS,bt):vt,Pt="ALLOWED_ATTR"in rt?Ki({},rt.ALLOWED_ATTR,bt):rn,sn="ALLOWED_NAMESPACES"in rt?Ki({},rt.ALLOWED_NAMESPACES,Dk):jt,ei="ADD_URI_SAFE_ATTR"in rt?Ki(Tf(ii),rt.ADD_URI_SAFE_ATTR,bt):ii,Si="ADD_DATA_URI_TAGS"in rt?Ki(Tf(ni),rt.ADD_DATA_URI_TAGS,bt):ni,qt="FORBID_CONTENTS"in rt?Ki({},rt.FORBID_CONTENTS,bt):_t,Ln="FORBID_TAGS"in rt?Ki({},rt.FORBID_TAGS,bt):{},Ie="FORBID_ATTR"in rt?Ki({},rt.FORBID_ATTR,bt):{},cn="USE_PROFILES"in rt?rt.USE_PROFILES:!1,Be=rt.ALLOW_ARIA_ATTR!==!1,et=rt.ALLOW_DATA_ATTR!==!1,Me=rt.ALLOW_UNKNOWN_PROTOCOLS||!1,ke=rt.SAFE_FOR_TEMPLATES||!1,ge=rt.WHOLE_DOCUMENT||!1,Ft=rt.RETURN_DOM||!1,Oe=rt.RETURN_DOM_FRAGMENT||!1,Wn=rt.RETURN_TRUSTED_TYPE||!1,le=rt.FORCE_BODY||!1,dt=rt.SANITIZE_DOM!==!1,Cn=rt.SANITIZE_NAMED_PROPS||!1,Kt=rt.KEEP_CONTENT!==!1,hn=rt.IN_PLACE||!1,kt=rt.ALLOWED_URI_REGEXP||kt,zn=rt.NAMESPACE||Yn,rt.CUSTOM_ELEMENT_HANDLING&&di(rt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(nt.tagNameCheck=rt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),rt.CUSTOM_ELEMENT_HANDLING&&di(rt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(nt.attributeNameCheck=rt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),rt.CUSTOM_ELEMENT_HANDLING&&typeof rt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(nt.allowCustomizedBuiltInElements=rt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ke&&(et=!1),Oe&&(Ft=!0),cn&&(mt=Ki({},Fl(t8)),Pt=[],cn.html===!0&&(Ki(mt,e8),Ki(Pt,n8)),cn.svg===!0&&(Ki(mt,Ok),Ki(Pt,Vk),Ki(Pt,zb)),cn.svgFilters===!0&&(Ki(mt,Fk),Ki(Pt,Vk),Ki(Pt,zb)),cn.mathMl===!0&&(Ki(mt,Bk),Ki(Pt,i8),Ki(Pt,zb))),rt.ADD_TAGS&&(mt===vt&&(mt=Tf(mt)),Ki(mt,rt.ADD_TAGS,bt)),rt.ADD_ATTR&&(Pt===rn&&(Pt=Tf(Pt)),Ki(Pt,rt.ADD_ATTR,bt)),rt.ADD_URI_SAFE_ATTR&&Ki(ei,rt.ADD_URI_SAFE_ATTR,bt),rt.FORBID_CONTENTS&&(qt===_t&&(qt=Tf(qt)),Ki(qt,rt.FORBID_CONTENTS,bt)),Kt&&(mt["#text"]=!0),ge&&Ki(mt,["html","head","body"]),mt.table&&(Ki(mt,["tbody"]),delete Ln.tbody),Zo&&Zo(rt),gi=rt)},Fi=Ki({},["mi","mo","mn","ms","mtext"]),Bi=Ki({},["foreignobject","desc","title","annotation-xml"]),Hi=Ki({},["title","style","font","a","script"]),ti=Ki({},Ok);Ki(ti,Fk),Ki(ti,NH);var vi=Ki({},Bk);Ki(vi,OH);var Di=function(rt){var gn=he(rt);(!gn||!gn.tagName)&&(gn={namespaceURI:zn,tagName:"template"});var Sn=Vb(rt.tagName),Pi=Vb(gn.tagName);return sn[rt.namespaceURI]?rt.namespaceURI===ar?gn.namespaceURI===Yn?Sn==="svg":gn.namespaceURI===$n?Sn==="svg"&&(Pi==="annotation-xml"||Fi[Pi]):Boolean(ti[Sn]):rt.namespaceURI===$n?gn.namespaceURI===Yn?Sn==="math":gn.namespaceURI===ar?Sn==="math"&&Bi[Pi]:Boolean(vi[Sn]):rt.namespaceURI===Yn?gn.namespaceURI===ar&&!Bi[Pi]||gn.namespaceURI===$n&&!Fi[Pi]?!1:!vi[Sn]&&(Hi[Sn]||!ti[Sn]):!!(bn==="application/xhtml+xml"&&sn[rt.namespaceURI]):!1},ui=function(rt){B1(i.removed,{element:rt});try{rt.parentNode.removeChild(rt)}catch{try{rt.outerHTML=Ve}catch{rt.remove()}}},nc=function(rt,gn){try{B1(i.removed,{attribute:gn.getAttributeNode(rt),from:gn})}catch{B1(i.removed,{attribute:null,from:gn})}if(gn.removeAttribute(rt),rt==="is"&&!Pt[rt])if(Ft||Oe)try{ui(gn)}catch{}else try{gn.setAttribute(rt,"")}catch{}},Ga=function(rt){var gn,Sn;if(le)rt="<remove></remove>"+rt;else{var Pi=RH(rt,/^[\r\n\t ]+/);Sn=Pi&&Pi[0]}bn==="application/xhtml+xml"&&zn===Yn&&(rt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+rt+"</body></html>");var Tr=Le?Le.createHTML(rt):rt;if(zn===Yn)try{gn=new F().parseFromString(Tr,bn)}catch{}if(!gn||!gn.documentElement){gn=Pe.createDocument(zn,"template",null);try{gn.documentElement.innerHTML=Bn?"":Tr}catch{}}var xr=gn.body||gn.documentElement;return rt&&Sn&&xr.insertBefore(l.createTextNode(Sn),xr.childNodes[0]||null),zn===Yn?_e.call(gn,ge?"html":"body")[0]:ge?gn.documentElement:xr},Er=function(rt){return ze.call(rt.ownerDocument||rt,rt,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,null,!1)},bi=function(rt){return rt instanceof I&&(typeof rt.nodeName!="string"||typeof rt.textContent!="string"||typeof rt.removeChild!="function"||!(rt.attributes instanceof L)||typeof rt.removeAttribute!="function"||typeof rt.setAttribute!="function"||typeof rt.namespaceURI!="string"||typeof rt.insertBefore!="function"||typeof rt.hasChildNodes!="function")},Fr=function(rt){return Kh(m)==="object"?rt instanceof m:rt&&Kh(rt)==="object"&&typeof rt.nodeType=="number"&&typeof rt.nodeName=="string"},Hr=function(rt,gn,Sn){!be[rt]||LH(be[rt],function(Pi){Pi.call(i,gn,Sn,gi)})},Kr=function(rt){var gn;if(Hr("beforeSanitizeElements",rt,null),bi(rt)||Ko(/[\u0080-\uFFFF]/,rt.nodeName))return ui(rt),!0;var Sn=bt(rt.nodeName);if(Hr("uponSanitizeElement",rt,{tagName:Sn,allowedTags:mt}),rt.hasChildNodes()&&!Fr(rt.firstElementChild)&&(!Fr(rt.content)||!Fr(rt.content.firstElementChild))&&Ko(/<[/\w]/g,rt.innerHTML)&&Ko(/<[/\w]/g,rt.textContent)||Sn==="select"&&Ko(/<template/i,rt.innerHTML))return ui(rt),!0;if(!mt[Sn]||Ln[Sn]){if(!Ln[Sn]&&Br(Sn)&&(nt.tagNameCheck instanceof RegExp&&Ko(nt.tagNameCheck,Sn)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(Sn)))return!1;if(Kt&&!qt[Sn]){var Pi=he(rt)||rt.parentNode,Tr=pe(rt)||rt.childNodes;if(Tr&&Pi)for(var xr=Tr.length,cs=xr-1;cs>=0;--cs)Pi.insertBefore(re(Tr[cs],!0),se(rt))}return ui(rt),!0}return rt instanceof b&&!Di(rt)||(Sn==="noscript"||Sn==="noembed")&&Ko(/<\/no(script|embed)/i,rt.innerHTML)?(ui(rt),!0):(ke&&rt.nodeType===3&&(gn=rt.textContent,gn=Vl(gn,q," "),gn=Vl(gn,ot," "),gn=Vl(gn,Z," "),rt.textContent!==gn&&(B1(i.removed,{element:rt.cloneNode()}),rt.textContent=gn)),Hr("afterSanitizeElements",rt,null),!1)},Jr=function(rt,gn,Sn){if(dt&&(gn==="id"||gn==="name")&&(Sn in l||Sn in zt))return!1;if(!(et&&!Ie[gn]&&Ko(Dt,gn))){if(!(Be&&Ko(xn,gn))){if(!Pt[gn]||Ie[gn]){if(!(Br(rt)&&(nt.tagNameCheck instanceof RegExp&&Ko(nt.tagNameCheck,rt)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(rt))&&(nt.attributeNameCheck instanceof RegExp&&Ko(nt.attributeNameCheck,gn)||nt.attributeNameCheck instanceof Function&&nt.attributeNameCheck(gn))||gn==="is"&&nt.allowCustomizedBuiltInElements&&(nt.tagNameCheck instanceof RegExp&&Ko(nt.tagNameCheck,Sn)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(Sn))))return!1}else if(!ei[gn]){if(!Ko(kt,Vl(Sn,Je,""))){if(!((gn==="src"||gn==="xlink:href"||gn==="href")&&rt!=="script"&&PH(Sn,"data:")===0&&Si[rt])){if(!(Me&&!Ko(ln,Vl(Sn,Je,"")))){if(Sn)return!1}}}}}}return!0},Br=function(rt){return rt.indexOf("-")>0},vs=function(rt){var gn,Sn,Pi,Tr;Hr("beforeSanitizeAttributes",rt,null);var xr=rt.attributes;if(!!xr){var cs={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Pt};for(Tr=xr.length;Tr--;){gn=xr[Tr];var Wi=gn,Ir=Wi.name,dd=Wi.namespaceURI;if(Sn=Ir==="value"?gn.value:IH(gn.value),Pi=bt(Ir),cs.attrName=Pi,cs.attrValue=Sn,cs.keepAttr=!0,cs.forceKeepAttr=void 0,Hr("uponSanitizeAttribute",rt,cs),Sn=cs.attrValue,!cs.forceKeepAttr&&(nc(Ir,rt),!!cs.keepAttr)){if(Ko(/\/>/i,Sn)){nc(Ir,rt);continue}ke&&(Sn=Vl(Sn,q," "),Sn=Vl(Sn,ot," "),Sn=Vl(Sn,Z," "));var fd=bt(rt.nodeName);if(!!Jr(fd,Pi,Sn)){if(Cn&&(Pi==="id"||Pi==="name")&&(nc(Ir,rt),Sn=un+Sn),Le&&Kh(W)==="object"&&typeof W.getAttributeType=="function"&&!dd)switch(W.getAttributeType(fd,Pi)){case"TrustedHTML":Sn=Le.createHTML(Sn);break;case"TrustedScriptURL":Sn=Le.createScriptURL(Sn);break}try{dd?rt.setAttributeNS(dd,Ir,Sn):rt.setAttribute(Ir,Sn),QA(i.removed)}catch{}}}}Hr("afterSanitizeAttributes",rt,null)}},Os=function Gn(rt){var gn,Sn=Er(rt);for(Hr("beforeSanitizeShadowDOM",rt,null);gn=Sn.nextNode();)Hr("uponSanitizeShadowNode",gn,null),!Kr(gn)&&(gn.content instanceof h&&Gn(gn.content),vs(gn));Hr("afterSanitizeShadowDOM",rt,null)};return i.sanitize=function(Gn){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},gn,Sn,Pi,Tr,xr;if(Bn=!Gn,Bn&&(Gn="<!-->"),typeof Gn!="string"&&!Fr(Gn)){if(typeof Gn.toString!="function")throw Nk("toString is not a function");if(Gn=Gn.toString(),typeof Gn!="string")throw Nk("dirty is not a string, aborting")}if(!i.isSupported){if(Kh(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Gn=="string")return t.toStaticHTML(Gn);if(Fr(Gn))return t.toStaticHTML(Gn.outerHTML)}return Gn}if(ct||Ri(rt),i.removed=[],typeof Gn=="string"&&(hn=!1),hn){if(Gn.nodeName){var cs=bt(Gn.nodeName);if(!mt[cs]||Ln[cs])throw Nk("root node is forbidden and cannot be sanitized in-place")}}else if(Gn instanceof m)gn=Ga("<!---->"),Sn=gn.ownerDocument.importNode(Gn,!0),Sn.nodeType===1&&Sn.nodeName==="BODY"||Sn.nodeName==="HTML"?gn=Sn:gn.appendChild(Sn);else{if(!Ft&&!ke&&!ge&&Gn.indexOf("<")===-1)return Le&&Wn?Le.createHTML(Gn):Gn;if(gn=Ga(Gn),!gn)return Ft?null:Wn?Ve:""}gn&&le&&ui(gn.firstChild);for(var Wi=Er(hn?Gn:gn);Pi=Wi.nextNode();)Pi.nodeType===3&&Pi===Tr||Kr(Pi)||(Pi.content instanceof h&&Os(Pi.content),vs(Pi),Tr=Pi);if(Tr=null,hn)return Gn;if(Ft){if(Oe)for(xr=xe.call(gn.ownerDocument);gn.firstChild;)xr.appendChild(gn.firstChild);else xr=gn;return Pt.shadowroot&&(xr=de.call(o,xr,!0)),xr}var Ir=ge?gn.outerHTML:gn.innerHTML;return ge&&mt["!doctype"]&&gn.ownerDocument&&gn.ownerDocument.doctype&&gn.ownerDocument.doctype.name&&Ko(YH,gn.ownerDocument.doctype.name)&&(Ir="<!DOCTYPE "+gn.ownerDocument.doctype.name+`>
`+Ir),ke&&(Ir=Vl(Ir,q," "),Ir=Vl(Ir,ot," "),Ir=Vl(Ir,Z," ")),Le&&Wn?Le.createHTML(Ir):Ir},i.setConfig=function(Gn){Ri(Gn),ct=!0},i.clearConfig=function(){gi=null,ct=!1},i.isValidAttribute=function(Gn,rt,gn){gi||Ri({});var Sn=bt(Gn),Pi=bt(rt);return Jr(Sn,Pi,gn)},i.addHook=function(Gn,rt){typeof rt=="function"&&(be[Gn]=be[Gn]||[],B1(be[Gn],rt))},i.removeHook=function(Gn){if(be[Gn])return QA(be[Gn])},i.removeHooks=function(Gn){be[Gn]&&(be[Gn]=[])},i.removeAllHooks=function(){be={}},i}var V1=r8();const qH=t=>t?a8(t).replace(/\\n/g,"#br#").split("#br#"):[""],s8=t=>V1.sanitize(t),o8=(t,i)=>{var o;if(((o=i.flowchart)==null?void 0:o.htmlLabels)!==!1){const l=i.securityLevel;l==="antiscript"||l==="strict"?t=s8(t):l!=="loose"&&(t=a8(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=JH(t))}return t},Wl=(t,i)=>t&&(i.dompurifyConfig?t=V1.sanitize(o8(t,i),i.dompurifyConfig).toString():t=V1.sanitize(o8(t,i),{FORBID_TAGS:["style"]}).toString(),t),XH=(t,i)=>typeof t=="string"?Wl(t,i):t.flat().map(o=>Wl(o,i)),Ub=/<br\s*\/?>/gi,ZH=t=>Ub.test(t),KH=t=>t.split(Ub),JH=t=>t.replace(/#br#/g,"<br/>"),a8=t=>t.replace(Ub,"#br#"),QH=t=>{let i="";return t&&(i=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,i=i.replaceAll(/\(/g,"\\("),i=i.replaceAll(/\)/g,"\\)")),i},lo=t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),Jh=function(t){let i=t;return t.includes("~")?(i=i.replace(/~([^~].*)/,"<$1"),i=i.replace(/~([^~]*)$/,">$1"),Jh(i)):i},Ai={getRows:qH,sanitizeText:Wl,sanitizeTextOrArray:XH,hasBreaks:ZH,splitBreaks:KH,lineBreakRegex:Ub,removeScript:s8,getUrl:QH,evaluate:lo},Gb={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const i=t/255;return t>.03928?Math.pow((i+.055)/1.055,2.4):i/12.92},hue2rgb:(t,i,o)=>(o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+(i-t)*6*o:o<1/2?i:o<2/3?t+(i-t)*(2/3-o)*6:t),hsl2rgb:({h:t,s:i,l:o},l)=>{if(!i)return o*2.55;t/=360,i/=100,o/=100;const h=o<.5?o*(1+i):o+i-o*i,p=2*o-h;switch(l){case"r":return Gb.hue2rgb(p,h,t+1/3)*255;case"g":return Gb.hue2rgb(p,h,t)*255;case"b":return Gb.hue2rgb(p,h,t-1/3)*255}},rgb2hsl:({r:t,g:i,b:o},l)=>{t/=255,i/=255,o/=255;const h=Math.max(t,i,o),p=Math.min(t,i,o),m=(h+p)/2;if(l==="l")return m*100;if(h===p)return 0;const b=h-p,x=m>.5?b/(2-h-p):b/(h+p);if(l==="s")return x*100;switch(h){case t:return((i-o)/b+(i<o?6:0))*60;case i:return((o-t)/b+2)*60;case o:return((t-i)/b+4)*60;default:return-1}}},Vi={channel:Gb,lang:{clamp:(t,i,o)=>i>o?Math.min(i,Math.max(o,t)):Math.min(o,Math.max(i,t)),round:t=>Math.round(t*1e10)/1e10},unit:{dec2hex:t=>{const i=Math.round(t).toString(16);return i.length>1?i:`0${i}`}}},Qh={};for(let t=0;t<=255;t++)Qh[t]=Vi.unit.dec2hex(t);const Do={ALL:0,RGB:1,HSL:2};class eY{constructor(){this.type=Do.ALL}get(){return this.type}set(i){if(this.type&&this.type!==i)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=i}reset(){this.type=Do.ALL}is(i){return this.type===i}}const tY=eY;class nY{constructor(i,o){this.color=o,this.changed=!1,this.data=i,this.type=new tY}set(i,o){return this.color=o,this.changed=!1,this.data=i,this.type.type=Do.ALL,this}_ensureHSL(){const i=this.data,{h:o,s:l,l:h}=i;o===void 0&&(i.h=Vi.channel.rgb2hsl(i,"h")),l===void 0&&(i.s=Vi.channel.rgb2hsl(i,"s")),h===void 0&&(i.l=Vi.channel.rgb2hsl(i,"l"))}_ensureRGB(){const i=this.data,{r:o,g:l,b:h}=i;o===void 0&&(i.r=Vi.channel.hsl2rgb(i,"r")),l===void 0&&(i.g=Vi.channel.hsl2rgb(i,"g")),h===void 0&&(i.b=Vi.channel.hsl2rgb(i,"b"))}get r(){const i=this.data,o=i.r;return!this.type.is(Do.HSL)&&o!==void 0?o:(this._ensureHSL(),Vi.channel.hsl2rgb(i,"r"))}get g(){const i=this.data,o=i.g;return!this.type.is(Do.HSL)&&o!==void 0?o:(this._ensureHSL(),Vi.channel.hsl2rgb(i,"g"))}get b(){const i=this.data,o=i.b;return!this.type.is(Do.HSL)&&o!==void 0?o:(this._ensureHSL(),Vi.channel.hsl2rgb(i,"b"))}get h(){const i=this.data,o=i.h;return!this.type.is(Do.RGB)&&o!==void 0?o:(this._ensureRGB(),Vi.channel.rgb2hsl(i,"h"))}get s(){const i=this.data,o=i.s;return!this.type.is(Do.RGB)&&o!==void 0?o:(this._ensureRGB(),Vi.channel.rgb2hsl(i,"s"))}get l(){const i=this.data,o=i.l;return!this.type.is(Do.RGB)&&o!==void 0?o:(this._ensureRGB(),Vi.channel.rgb2hsl(i,"l"))}get a(){return this.data.a}set r(i){this.type.set(Do.RGB),this.changed=!0,this.data.r=i}set g(i){this.type.set(Do.RGB),this.changed=!0,this.data.g=i}set b(i){this.type.set(Do.RGB),this.changed=!0,this.data.b=i}set h(i){this.type.set(Do.HSL),this.changed=!0,this.data.h=i}set s(i){this.type.set(Do.HSL),this.changed=!0,this.data.s=i}set l(i){this.type.set(Do.HSL),this.changed=!0,this.data.l=i}set a(i){this.changed=!0,this.data.a=i}}const iY=nY,Hb=new iY({r:0,g:0,b:0,a:0},"transparent"),l8={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const i=t.match(l8.re);if(!i)return;const o=i[1],l=parseInt(o,16),h=o.length,p=h%4===0,m=h>4,b=m?1:17,x=m?8:4,E=p?0:-1,L=m?255:15;return Hb.set({r:(l>>x*(E+3)&L)*b,g:(l>>x*(E+2)&L)*b,b:(l>>x*(E+1)&L)*b,a:p?(l&L)*b/255:1},t)},stringify:t=>{const{r:i,g:o,b:l,a:h}=t;return h<1?`#${Qh[Math.round(i)]}${Qh[Math.round(o)]}${Qh[Math.round(l)]}${Qh[Math.round(h*255)]}`:`#${Qh[Math.round(i)]}${Qh[Math.round(o)]}${Qh[Math.round(l)]}`}},W1=l8,Yb={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const i=t.match(Yb.hueRe);if(i){const[,o,l]=i;switch(l){case"grad":return Vi.channel.clamp.h(parseFloat(o)*.9);case"rad":return Vi.channel.clamp.h(parseFloat(o)*180/Math.PI);case"turn":return Vi.channel.clamp.h(parseFloat(o)*360)}}return Vi.channel.clamp.h(parseFloat(t))},parse:t=>{const i=t.charCodeAt(0);if(i!==104&&i!==72)return;const o=t.match(Yb.re);if(!o)return;const[,l,h,p,m,b]=o;return Hb.set({h:Yb._hue2deg(l),s:Vi.channel.clamp.s(parseFloat(h)),l:Vi.channel.clamp.l(parseFloat(p)),a:m?Vi.channel.clamp.a(b?parseFloat(m)/100:parseFloat(m)):1},t)},stringify:t=>{const{h:i,s:o,l,a:h}=t;return h<1?`hsla(${Vi.lang.round(i)}, ${Vi.lang.round(o)}%, ${Vi.lang.round(l)}%, ${h})`:`hsl(${Vi.lang.round(i)}, ${Vi.lang.round(o)}%, ${Vi.lang.round(l)}%)`}},jb=Yb,$b={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const i=$b.colors[t];if(!!i)return W1.parse(i)},stringify:t=>{const i=W1.stringify(t);for(const o in $b.colors)if($b.colors[o]===i)return o}},c8=$b,u8={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const i=t.charCodeAt(0);if(i!==114&&i!==82)return;const o=t.match(u8.re);if(!o)return;const[,l,h,p,m,b,x,E,L]=o;return Hb.set({r:Vi.channel.clamp.r(h?parseFloat(l)*2.55:parseFloat(l)),g:Vi.channel.clamp.g(m?parseFloat(p)*2.55:parseFloat(p)),b:Vi.channel.clamp.b(x?parseFloat(b)*2.55:parseFloat(b)),a:E?Vi.channel.clamp.a(L?parseFloat(E)/100:parseFloat(E)):1},t)},stringify:t=>{const{r:i,g:o,b:l,a:h}=t;return h<1?`rgba(${Vi.lang.round(i)}, ${Vi.lang.round(o)}, ${Vi.lang.round(l)}, ${Vi.lang.round(h)})`:`rgb(${Vi.lang.round(i)}, ${Vi.lang.round(o)}, ${Vi.lang.round(l)})`}},qb=u8,Pu={format:{keyword:c8,hex:W1,rgb:qb,rgba:qb,hsl:jb,hsla:jb},parse:t=>{if(typeof t!="string")return t;const i=W1.parse(t)||qb.parse(t)||jb.parse(t)||c8.parse(t);if(i)return i;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(Do.HSL)||t.data.r===void 0?jb.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?qb.stringify(t):W1.stringify(t)},h8=(t,i)=>{const o=Pu.parse(t);for(const l in i)o[l]=Vi.channel.clamp[l](i[l]);return Pu.stringify(o)},z1=(t,i,o=0,l=1)=>{if(typeof t!="number")return h8(t,{a:i});const h=Hb.set({r:Vi.channel.clamp.r(t),g:Vi.channel.clamp.g(i),b:Vi.channel.clamp.b(o),a:Vi.channel.clamp.a(l)});return Pu.stringify(h)},d8=(t,i,o)=>{const l=Pu.parse(t),h=l[i],p=Vi.channel.clamp[i](h+o);return h!==p&&(l[i]=p),Pu.stringify(l)},mi=(t,i)=>d8(t,"l",i),Li=(t,i)=>d8(t,"l",-i),Jt=(t,i)=>{const o=Pu.parse(t),l={};for(const h in i)!i[h]||(l[h]=o[h]+i[h]);return h8(t,l)},rY=(t,i,o=50)=>{const{r:l,g:h,b:p,a:m}=Pu.parse(t),{r:b,g:x,b:E,a:L}=Pu.parse(i),I=o/100,F=I*2-1,W=m-L,re=((F*W===-1?F:(F+W)/(1+F*W))+1)/2,se=1-re,pe=l*re+b*se,he=h*re+x*se,Ce=p*re+E*se,Le=m*I+L*(1-I);return z1(pe,he,Ce,Le)},Hn=(t,i=100)=>{const o=Pu.parse(t);return o.r=255-o.r,o.g=255-o.g,o.b=255-o.b,rY(o,t,i)},Jo=(t,i)=>i?Jt(t,{s:-40,l:10}):Jt(t,{s:-40,l:-10}),Xb="#ffffff",Zb="#f2f2f2";class sY{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Jt(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Jt(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Jo(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Jo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Jo(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Jo(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||Hn(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||Hn(this.tertiaryColor),this.lineColor=this.lineColor||Hn(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Li(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Li(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||Hn(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||mi(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Jt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Jt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Jt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Jt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Jt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Jt(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Jt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Jt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Jt(this.primaryColor,{h:330}),this.darkMode)for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScale"+i]=Li(this["cScale"+i],75);else for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScale"+i]=Li(this["cScale"+i],25);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleInv"+i]=this["cScaleInv"+i]||Hn(this["cScale"+i]);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this.darkMode?this["cScalePeer"+i]=this["cScalePeer"+i]||mi(this["cScale"+i],10):this["cScalePeer"+i]=this["cScalePeer"+i]||Li(this["cScale"+i],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleLabel"+i]=this["cScaleLabel"+i]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Jt(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Jt(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Jt(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Jt(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Jt(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Jt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Jt(this.primaryColor,{l:-10}),this.pie5=this.pie5||Jt(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Jt(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Jt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Jt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Jt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Jt(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Jt(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Jt(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Li(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Jt(this.primaryColor,{h:-30}),this.git4=this.git4||Jt(this.primaryColor,{h:-60}),this.git5=this.git5||Jt(this.primaryColor,{h:-90}),this.git6=this.git6||Jt(this.primaryColor,{h:60}),this.git7=this.git7||Jt(this.primaryColor,{h:120}),this.darkMode?(this.git0=mi(this.git0,25),this.git1=mi(this.git1,25),this.git2=mi(this.git2,25),this.git3=mi(this.git3,25),this.git4=mi(this.git4,25),this.git5=mi(this.git5,25),this.git6=mi(this.git6,25),this.git7=mi(this.git7,25)):(this.git0=Li(this.git0,25),this.git1=Li(this.git1,25),this.git2=Li(this.git2,25),this.git3=Li(this.git3,25),this.git4=Li(this.git4,25),this.git5=Li(this.git5,25),this.git6=Li(this.git6,25),this.git7=Li(this.git7,25)),this.gitInv0=this.gitInv0||Hn(this.git0),this.gitInv1=this.gitInv1||Hn(this.git1),this.gitInv2=this.gitInv2||Hn(this.git2),this.gitInv3=this.gitInv3||Hn(this.git3),this.gitInv4=this.gitInv4||Hn(this.git4),this.gitInv5=this.gitInv5||Hn(this.git5),this.gitInv6=this.gitInv6||Hn(this.git6),this.gitInv7=this.gitInv7||Hn(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Xb,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Zb}calculate(i){if(typeof i!="object"){this.updateColors();return}const o=Object.keys(i);o.forEach(l=>{this[l]=i[l]}),this.updateColors(),o.forEach(l=>{this[l]=i[l]})}}const oY=t=>{const i=new sY;return i.calculate(t),i};class aY{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=mi(this.primaryColor,16),this.tertiaryColor=Jt(this.primaryColor,{h:-160}),this.primaryBorderColor=Hn(this.background),this.secondaryBorderColor=Jo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Jo(this.tertiaryColor,this.darkMode),this.primaryTextColor=Hn(this.primaryColor),this.secondaryTextColor=Hn(this.secondaryColor),this.tertiaryTextColor=Hn(this.tertiaryColor),this.lineColor=Hn(this.background),this.textColor=Hn(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=mi(Hn("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=z1(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Li("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=z1(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=z1(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=mi(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=mi(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=mi(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Jt(this.primaryColor,{h:64}),this.fillType3=Jt(this.secondaryColor,{h:64}),this.fillType4=Jt(this.primaryColor,{h:-64}),this.fillType5=Jt(this.secondaryColor,{h:-64}),this.fillType6=Jt(this.primaryColor,{h:128}),this.fillType7=Jt(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Jt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Jt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Jt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Jt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Jt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Jt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Jt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Jt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Jt(this.primaryColor,{h:330});for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleInv"+i]=this["cScaleInv"+i]||Hn(this["cScale"+i]);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScalePeer"+i]=this["cScalePeer"+i]||mi(this["cScale"+i],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleLabel"+i]=this["cScaleLabel"+i]||this.scaleLabelColor;for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["pie"+i]=this["cScale"+i];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Li(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=mi(this.secondaryColor,20),this.git1=mi(this.pie2||this.secondaryColor,20),this.git2=mi(this.pie3||this.tertiaryColor,20),this.git3=mi(this.pie4||Jt(this.primaryColor,{h:-30}),20),this.git4=mi(this.pie5||Jt(this.primaryColor,{h:-60}),20),this.git5=mi(this.pie6||Jt(this.primaryColor,{h:-90}),10),this.git6=mi(this.pie7||Jt(this.primaryColor,{h:60}),10),this.git7=mi(this.pie8||Jt(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||Hn(this.git0),this.gitInv1=this.gitInv1||Hn(this.git1),this.gitInv2=this.gitInv2||Hn(this.git2),this.gitInv3=this.gitInv3||Hn(this.git3),this.gitInv4=this.gitInv4||Hn(this.git4),this.gitInv5=this.gitInv5||Hn(this.git5),this.gitInv6=this.gitInv6||Hn(this.git6),this.gitInv7=this.gitInv7||Hn(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||mi(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||mi(this.background,2)}calculate(i){if(typeof i!="object"){this.updateColors();return}const o=Object.keys(i);o.forEach(l=>{this[l]=i[l]}),this.updateColors(),o.forEach(l=>{this[l]=i[l]})}}const lY=t=>{const i=new aY;return i.calculate(t),i};class cY{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Jt(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Jt(this.primaryColor,{h:-160}),this.primaryBorderColor=Jo(this.primaryColor,this.darkMode),this.secondaryBorderColor=Jo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Jo(this.tertiaryColor,this.darkMode),this.primaryTextColor=Hn(this.primaryColor),this.secondaryTextColor=Hn(this.secondaryColor),this.tertiaryTextColor=Hn(this.tertiaryColor),this.lineColor=Hn(this.background),this.textColor=Hn(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=z1(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Jt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Jt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Jt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Jt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Jt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Jt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Jt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Jt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Jt(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||Li(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||Li(this.tertiaryColor,40);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScale"+i]=Li(this["cScale"+i],10),this["cScalePeer"+i]=this["cScalePeer"+i]||Li(this["cScale"+i],25);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleInv"+i]=this["cScaleInv"+i]||Jt(this["cScale"+i],{h:180});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||Hn(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||Hn(this.labelTextColor);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleLabel"+i]=this["cScaleLabel"+i]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=mi(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Jt(this.primaryColor,{h:64}),this.fillType3=Jt(this.secondaryColor,{h:64}),this.fillType4=Jt(this.primaryColor,{h:-64}),this.fillType5=Jt(this.secondaryColor,{h:-64}),this.fillType6=Jt(this.primaryColor,{h:128}),this.fillType7=Jt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Jt(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Jt(this.primaryColor,{l:-10}),this.pie5=this.pie5||Jt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Jt(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Jt(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Jt(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Jt(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Jt(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Jt(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Jt(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Jt(this.primaryColor,{h:-30}),this.git4=this.git4||Jt(this.primaryColor,{h:-60}),this.git5=this.git5||Jt(this.primaryColor,{h:-90}),this.git6=this.git6||Jt(this.primaryColor,{h:60}),this.git7=this.git7||Jt(this.primaryColor,{h:120}),this.darkMode?(this.git0=mi(this.git0,25),this.git1=mi(this.git1,25),this.git2=mi(this.git2,25),this.git3=mi(this.git3,25),this.git4=mi(this.git4,25),this.git5=mi(this.git5,25),this.git6=mi(this.git6,25),this.git7=mi(this.git7,25)):(this.git0=Li(this.git0,25),this.git1=Li(this.git1,25),this.git2=Li(this.git2,25),this.git3=Li(this.git3,25),this.git4=Li(this.git4,25),this.git5=Li(this.git5,25),this.git6=Li(this.git6,25),this.git7=Li(this.git7,25)),this.gitInv0=this.gitInv0||Li(Hn(this.git0),25),this.gitInv1=this.gitInv1||Hn(this.git1),this.gitInv2=this.gitInv2||Hn(this.git2),this.gitInv3=this.gitInv3||Hn(this.git3),this.gitInv4=this.gitInv4||Hn(this.git4),this.gitInv5=this.gitInv5||Hn(this.git5),this.gitInv6=this.gitInv6||Hn(this.git6),this.gitInv7=this.gitInv7||Hn(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Hn(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Hn(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Xb,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Zb}calculate(i){if(typeof i!="object"){this.updateColors();return}const o=Object.keys(i);o.forEach(l=>{this[l]=i[l]}),this.updateColors(),o.forEach(l=>{this[l]=i[l]})}}const uY=t=>{const i=new cY;return i.calculate(t),i};class hY{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=mi("#cde498",10),this.primaryBorderColor=Jo(this.primaryColor,this.darkMode),this.secondaryBorderColor=Jo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Jo(this.tertiaryColor,this.darkMode),this.primaryTextColor=Hn(this.primaryColor),this.secondaryTextColor=Hn(this.secondaryColor),this.tertiaryTextColor=Hn(this.primaryColor),this.lineColor=Hn(this.background),this.textColor=Hn(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Jt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Jt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Jt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Jt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Jt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Jt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Jt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Jt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Jt(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||Li(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||Li(this.tertiaryColor,40);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScale"+i]=Li(this["cScale"+i],10),this["cScalePeer"+i]=this["cScalePeer"+i]||Li(this["cScale"+i],25);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleInv"+i]=this["cScaleInv"+i]||Jt(this["cScale"+i],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleLabel"+i]=this["cScaleLabel"+i]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=Li(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Jt(this.primaryColor,{h:64}),this.fillType3=Jt(this.secondaryColor,{h:64}),this.fillType4=Jt(this.primaryColor,{h:-64}),this.fillType5=Jt(this.secondaryColor,{h:-64}),this.fillType6=Jt(this.primaryColor,{h:128}),this.fillType7=Jt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Jt(this.primaryColor,{l:-30}),this.pie5=this.pie5||Jt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Jt(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Jt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Jt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Jt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Jt(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Jt(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Jt(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Jt(this.primaryColor,{h:-30}),this.git4=this.git4||Jt(this.primaryColor,{h:-60}),this.git5=this.git5||Jt(this.primaryColor,{h:-90}),this.git6=this.git6||Jt(this.primaryColor,{h:60}),this.git7=this.git7||Jt(this.primaryColor,{h:120}),this.darkMode?(this.git0=mi(this.git0,25),this.git1=mi(this.git1,25),this.git2=mi(this.git2,25),this.git3=mi(this.git3,25),this.git4=mi(this.git4,25),this.git5=mi(this.git5,25),this.git6=mi(this.git6,25),this.git7=mi(this.git7,25)):(this.git0=Li(this.git0,25),this.git1=Li(this.git1,25),this.git2=Li(this.git2,25),this.git3=Li(this.git3,25),this.git4=Li(this.git4,25),this.git5=Li(this.git5,25),this.git6=Li(this.git6,25),this.git7=Li(this.git7,25)),this.gitInv0=this.gitInv0||Hn(this.git0),this.gitInv1=this.gitInv1||Hn(this.git1),this.gitInv2=this.gitInv2||Hn(this.git2),this.gitInv3=this.gitInv3||Hn(this.git3),this.gitInv4=this.gitInv4||Hn(this.git4),this.gitInv5=this.gitInv5||Hn(this.git5),this.gitInv6=this.gitInv6||Hn(this.git6),this.gitInv7=this.gitInv7||Hn(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Xb,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Zb}calculate(i){if(typeof i!="object"){this.updateColors();return}const o=Object.keys(i);o.forEach(l=>{this[l]=i[l]}),this.updateColors(),o.forEach(l=>{this[l]=i[l]})}}const dY=t=>{const i=new hY;return i.calculate(t),i};class fY{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=mi(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Jt(this.primaryColor,{h:-160}),this.primaryBorderColor=Jo(this.primaryColor,this.darkMode),this.secondaryBorderColor=Jo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Jo(this.tertiaryColor,this.darkMode),this.primaryTextColor=Hn(this.primaryColor),this.secondaryTextColor=Hn(this.secondaryColor),this.tertiaryTextColor=Hn(this.tertiaryColor),this.lineColor=Hn(this.background),this.textColor=Hn(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=mi(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleInv"+i]=this["cScaleInv"+i]||Hn(this["cScale"+i]);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this.darkMode?this["cScalePeer"+i]=this["cScalePeer"+i]||mi(this["cScale"+i],10):this["cScalePeer"+i]=this["cScalePeer"+i]||Li(this["cScale"+i],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleLabel"+i]=this["cScaleLabel"+i]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=mi(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=mi(this.contrast,30),this.sectionBkgColor2=mi(this.contrast,30),this.taskBorderColor=Li(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=mi(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Li(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Jt(this.primaryColor,{h:64}),this.fillType3=Jt(this.secondaryColor,{h:64}),this.fillType4=Jt(this.primaryColor,{h:-64}),this.fillType5=Jt(this.secondaryColor,{h:-64}),this.fillType6=Jt(this.primaryColor,{h:128}),this.fillType7=Jt(this.secondaryColor,{h:128});for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["pie"+i]=this["cScale"+i];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Li(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Jt(this.primaryColor,{h:-30}),this.git4=this.pie5||Jt(this.primaryColor,{h:-60}),this.git5=this.pie6||Jt(this.primaryColor,{h:-90}),this.git6=this.pie7||Jt(this.primaryColor,{h:60}),this.git7=this.pie8||Jt(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||Hn(this.git0),this.gitInv1=this.gitInv1||Hn(this.git1),this.gitInv2=this.gitInv2||Hn(this.git2),this.gitInv3=this.gitInv3||Hn(this.git3),this.gitInv4=this.gitInv4||Hn(this.git4),this.gitInv5=this.gitInv5||Hn(this.git5),this.gitInv6=this.gitInv6||Hn(this.git6),this.gitInv7=this.gitInv7||Hn(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Xb,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Zb}calculate(i){if(typeof i!="object"){this.updateColors();return}const o=Object.keys(i);o.forEach(l=>{this[l]=i[l]}),this.updateColors(),o.forEach(l=>{this[l]=i[l]})}}const Iu={base:{getThemeVariables:oY},dark:{getThemeVariables:lY},default:{getThemeVariables:uY},forest:{getThemeVariables:dY},neutral:{getThemeVariables:t=>{const i=new fY;return i.calculate(t),i}}},ed={theme:"default",themeVariables:Iu.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};ed.class&&(ed.class.arrowMarkerAbsolute=ed.arrowMarkerAbsolute),ed.gitGraph&&(ed.gitGraph.arrowMarkerAbsolute=ed.arrowMarkerAbsolute);const f8=(t,i="")=>Object.keys(t).reduce((o,l)=>Array.isArray(t[l])?o:typeof t[l]=="object"&&t[l]!==null?[...o,i+l,...f8(t[l],"")]:[...o,i+l],[]),pY=f8(ed,""),mY=ed;/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function p8(t){return typeof t>"u"||t===null}function gY(t){return typeof t=="object"&&t!==null}function vY(t){return Array.isArray(t)?t:p8(t)?[]:[t]}function yY(t,i){var o,l,h,p;if(i)for(p=Object.keys(i),o=0,l=p.length;o<l;o+=1)h=p[o],t[h]=i[h];return t}function _Y(t,i){var o="",l;for(l=0;l<i;l+=1)o+=t;return o}function bY(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var xY=p8,wY=gY,kY=vY,CY=_Y,SY=bY,EY=yY,Qo={isNothing:xY,isObject:wY,toArray:kY,repeat:CY,isNegativeZero:SY,extend:EY};function m8(t,i){var o="",l=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(o+='in "'+t.mark.name+'" '),o+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!i&&t.mark.snippet&&(o+=`

`+t.mark.snippet),l+" "+o):l}function U1(t,i){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=i,this.message=m8(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}U1.prototype=Object.create(Error.prototype),U1.prototype.constructor=U1,U1.prototype.toString=function(i){return this.name+": "+m8(this,i)};var Du=U1;function Wk(t,i,o,l,h){var p="",m="",b=Math.floor(h/2)-1;return l-i>b&&(p=" ... ",i=l-b+p.length),o-l>b&&(m=" ...",o=l+b-m.length),{str:p+t.slice(i,o).replace(/\t/g,"\u2192")+m,pos:l-i+p.length}}function zk(t,i){return Qo.repeat(" ",i-t.length)+t}function TY(t,i){if(i=Object.create(i||null),!t.buffer)return null;i.maxLength||(i.maxLength=79),typeof i.indent!="number"&&(i.indent=1),typeof i.linesBefore!="number"&&(i.linesBefore=3),typeof i.linesAfter!="number"&&(i.linesAfter=2);for(var o=/\r?\n|\r|\0/g,l=[0],h=[],p,m=-1;p=o.exec(t.buffer);)h.push(p.index),l.push(p.index+p[0].length),t.position<=p.index&&m<0&&(m=l.length-2);m<0&&(m=l.length-1);var b="",x,E,L=Math.min(t.line+i.linesAfter,h.length).toString().length,I=i.maxLength-(i.indent+L+3);for(x=1;x<=i.linesBefore&&!(m-x<0);x++)E=Wk(t.buffer,l[m-x],h[m-x],t.position-(l[m]-l[m-x]),I),b=Qo.repeat(" ",i.indent)+zk((t.line-x+1).toString(),L)+" | "+E.str+`
`+b;for(E=Wk(t.buffer,l[m],h[m],t.position,I),b+=Qo.repeat(" ",i.indent)+zk((t.line+1).toString(),L)+" | "+E.str+`
`,b+=Qo.repeat("-",i.indent+L+3+E.pos)+`^
`,x=1;x<=i.linesAfter&&!(m+x>=h.length);x++)E=Wk(t.buffer,l[m+x],h[m+x],t.position-(l[m]-l[m+x]),I),b+=Qo.repeat(" ",i.indent)+zk((t.line+x+1).toString(),L)+" | "+E.str+`
`;return b.replace(/\n$/,"")}var MY=TY,AY=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],LY=["scalar","sequence","mapping"];function RY(t){var i={};return t!==null&&Object.keys(t).forEach(function(o){t[o].forEach(function(l){i[String(l)]=o})}),i}function PY(t,i){if(i=i||{},Object.keys(i).forEach(function(o){if(AY.indexOf(o)===-1)throw new Du('Unknown option "'+o+'" is met in definition of "'+t+'" YAML type.')}),this.options=i,this.tag=t,this.kind=i.kind||null,this.resolve=i.resolve||function(){return!0},this.construct=i.construct||function(o){return o},this.instanceOf=i.instanceOf||null,this.predicate=i.predicate||null,this.represent=i.represent||null,this.representName=i.representName||null,this.defaultStyle=i.defaultStyle||null,this.multi=i.multi||!1,this.styleAliases=RY(i.styleAliases||null),LY.indexOf(this.kind)===-1)throw new Du('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var No=PY;function g8(t,i){var o=[];return t[i].forEach(function(l){var h=o.length;o.forEach(function(p,m){p.tag===l.tag&&p.kind===l.kind&&p.multi===l.multi&&(h=m)}),o[h]=l}),o}function IY(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},i,o;function l(h){h.multi?(t.multi[h.kind].push(h),t.multi.fallback.push(h)):t[h.kind][h.tag]=t.fallback[h.tag]=h}for(i=0,o=arguments.length;i<o;i+=1)arguments[i].forEach(l);return t}function Uk(t){return this.extend(t)}Uk.prototype.extend=function(i){var o=[],l=[];if(i instanceof No)l.push(i);else if(Array.isArray(i))l=l.concat(i);else if(i&&(Array.isArray(i.implicit)||Array.isArray(i.explicit)))i.implicit&&(o=o.concat(i.implicit)),i.explicit&&(l=l.concat(i.explicit));else throw new Du("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");o.forEach(function(p){if(!(p instanceof No))throw new Du("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(p.loadKind&&p.loadKind!=="scalar")throw new Du("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(p.multi)throw new Du("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),l.forEach(function(p){if(!(p instanceof No))throw new Du("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var h=Object.create(Uk.prototype);return h.implicit=(this.implicit||[]).concat(o),h.explicit=(this.explicit||[]).concat(l),h.compiledImplicit=g8(h,"implicit"),h.compiledExplicit=g8(h,"explicit"),h.compiledTypeMap=IY(h.compiledImplicit,h.compiledExplicit),h};var DY=Uk,NY=new No("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),OY=new No("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),FY=new No("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),v8=new DY({explicit:[NY,OY,FY]});function BY(t){if(t===null)return!0;var i=t.length;return i===1&&t==="~"||i===4&&(t==="null"||t==="Null"||t==="NULL")}function VY(){return null}function WY(t){return t===null}var zY=new No("tag:yaml.org,2002:null",{kind:"scalar",resolve:BY,construct:VY,predicate:WY,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function UY(t){if(t===null)return!1;var i=t.length;return i===4&&(t==="true"||t==="True"||t==="TRUE")||i===5&&(t==="false"||t==="False"||t==="FALSE")}function GY(t){return t==="true"||t==="True"||t==="TRUE"}function HY(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var YY=new No("tag:yaml.org,2002:bool",{kind:"scalar",resolve:UY,construct:GY,predicate:HY,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function jY(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function $Y(t){return 48<=t&&t<=55}function qY(t){return 48<=t&&t<=57}function XY(t){if(t===null)return!1;var i=t.length,o=0,l=!1,h;if(!i)return!1;if(h=t[o],(h==="-"||h==="+")&&(h=t[++o]),h==="0"){if(o+1===i)return!0;if(h=t[++o],h==="b"){for(o++;o<i;o++)if(h=t[o],h!=="_"){if(h!=="0"&&h!=="1")return!1;l=!0}return l&&h!=="_"}if(h==="x"){for(o++;o<i;o++)if(h=t[o],h!=="_"){if(!jY(t.charCodeAt(o)))return!1;l=!0}return l&&h!=="_"}if(h==="o"){for(o++;o<i;o++)if(h=t[o],h!=="_"){if(!$Y(t.charCodeAt(o)))return!1;l=!0}return l&&h!=="_"}}if(h==="_")return!1;for(;o<i;o++)if(h=t[o],h!=="_"){if(!qY(t.charCodeAt(o)))return!1;l=!0}return!(!l||h==="_")}function ZY(t){var i=t,o=1,l;if(i.indexOf("_")!==-1&&(i=i.replace(/_/g,"")),l=i[0],(l==="-"||l==="+")&&(l==="-"&&(o=-1),i=i.slice(1),l=i[0]),i==="0")return 0;if(l==="0"){if(i[1]==="b")return o*parseInt(i.slice(2),2);if(i[1]==="x")return o*parseInt(i.slice(2),16);if(i[1]==="o")return o*parseInt(i.slice(2),8)}return o*parseInt(i,10)}function KY(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Qo.isNegativeZero(t)}var JY=new No("tag:yaml.org,2002:int",{kind:"scalar",resolve:XY,construct:ZY,predicate:KY,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),QY=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function ej(t){return!(t===null||!QY.test(t)||t[t.length-1]==="_")}function tj(t){var i,o;return i=t.replace(/_/g,"").toLowerCase(),o=i[0]==="-"?-1:1,"+-".indexOf(i[0])>=0&&(i=i.slice(1)),i===".inf"?o===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:i===".nan"?NaN:o*parseFloat(i,10)}var nj=/^[-+]?[0-9]+e/;function ij(t,i){var o;if(isNaN(t))switch(i){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(i){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(i){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Qo.isNegativeZero(t))return"-0.0";return o=t.toString(10),nj.test(o)?o.replace("e",".e"):o}function rj(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Qo.isNegativeZero(t))}var sj=new No("tag:yaml.org,2002:float",{kind:"scalar",resolve:ej,construct:tj,predicate:rj,represent:ij,defaultStyle:"lowercase"}),oj=v8.extend({implicit:[zY,YY,JY,sj]}),aj=oj,y8=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_8=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function lj(t){return t===null?!1:y8.exec(t)!==null||_8.exec(t)!==null}function cj(t){var i,o,l,h,p,m,b,x=0,E=null,L,I,F;if(i=y8.exec(t),i===null&&(i=_8.exec(t)),i===null)throw new Error("Date resolve error");if(o=+i[1],l=+i[2]-1,h=+i[3],!i[4])return new Date(Date.UTC(o,l,h));if(p=+i[4],m=+i[5],b=+i[6],i[7]){for(x=i[7].slice(0,3);x.length<3;)x+="0";x=+x}return i[9]&&(L=+i[10],I=+(i[11]||0),E=(L*60+I)*6e4,i[9]==="-"&&(E=-E)),F=new Date(Date.UTC(o,l,h,p,m,b,x)),E&&F.setTime(F.getTime()-E),F}function uj(t){return t.toISOString()}var hj=new No("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:lj,construct:cj,instanceOf:Date,represent:uj});function dj(t){return t==="<<"||t===null}var fj=new No("tag:yaml.org,2002:merge",{kind:"scalar",resolve:dj}),Gk=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function pj(t){if(t===null)return!1;var i,o,l=0,h=t.length,p=Gk;for(o=0;o<h;o++)if(i=p.indexOf(t.charAt(o)),!(i>64)){if(i<0)return!1;l+=6}return l%8===0}function mj(t){var i,o,l=t.replace(/[\r\n=]/g,""),h=l.length,p=Gk,m=0,b=[];for(i=0;i<h;i++)i%4===0&&i&&(b.push(m>>16&255),b.push(m>>8&255),b.push(m&255)),m=m<<6|p.indexOf(l.charAt(i));return o=h%4*6,o===0?(b.push(m>>16&255),b.push(m>>8&255),b.push(m&255)):o===18?(b.push(m>>10&255),b.push(m>>2&255)):o===12&&b.push(m>>4&255),new Uint8Array(b)}function gj(t){var i="",o=0,l,h,p=t.length,m=Gk;for(l=0;l<p;l++)l%3===0&&l&&(i+=m[o>>18&63],i+=m[o>>12&63],i+=m[o>>6&63],i+=m[o&63]),o=(o<<8)+t[l];return h=p%3,h===0?(i+=m[o>>18&63],i+=m[o>>12&63],i+=m[o>>6&63],i+=m[o&63]):h===2?(i+=m[o>>10&63],i+=m[o>>4&63],i+=m[o<<2&63],i+=m[64]):h===1&&(i+=m[o>>2&63],i+=m[o<<4&63],i+=m[64],i+=m[64]),i}function vj(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var yj=new No("tag:yaml.org,2002:binary",{kind:"scalar",resolve:pj,construct:mj,predicate:vj,represent:gj}),_j=Object.prototype.hasOwnProperty,bj=Object.prototype.toString;function xj(t){if(t===null)return!0;var i=[],o,l,h,p,m,b=t;for(o=0,l=b.length;o<l;o+=1){if(h=b[o],m=!1,bj.call(h)!=="[object Object]")return!1;for(p in h)if(_j.call(h,p))if(!m)m=!0;else return!1;if(!m)return!1;if(i.indexOf(p)===-1)i.push(p);else return!1}return!0}function wj(t){return t!==null?t:[]}var kj=new No("tag:yaml.org,2002:omap",{kind:"sequence",resolve:xj,construct:wj}),Cj=Object.prototype.toString;function Sj(t){if(t===null)return!0;var i,o,l,h,p,m=t;for(p=new Array(m.length),i=0,o=m.length;i<o;i+=1){if(l=m[i],Cj.call(l)!=="[object Object]"||(h=Object.keys(l),h.length!==1))return!1;p[i]=[h[0],l[h[0]]]}return!0}function Ej(t){if(t===null)return[];var i,o,l,h,p,m=t;for(p=new Array(m.length),i=0,o=m.length;i<o;i+=1)l=m[i],h=Object.keys(l),p[i]=[h[0],l[h[0]]];return p}var Tj=new No("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Sj,construct:Ej}),Mj=Object.prototype.hasOwnProperty;function Aj(t){if(t===null)return!0;var i,o=t;for(i in o)if(Mj.call(o,i)&&o[i]!==null)return!1;return!0}function Lj(t){return t!==null?t:{}}var Rj=new No("tag:yaml.org,2002:set",{kind:"mapping",resolve:Aj,construct:Lj}),Pj=aj.extend({implicit:[hj,fj],explicit:[yj,kj,Tj,Rj]}),td=Object.prototype.hasOwnProperty,Kb=1,b8=2,x8=3,Jb=4,Hk=1,Ij=2,w8=3,Dj=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Nj=/[\x85\u2028\u2029]/,Oj=/[,\[\]\{\}]/,k8=/^(?:!|!!|![a-z\-]+!)$/i,C8=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function S8(t){return Object.prototype.toString.call(t)}function Uc(t){return t===10||t===13}function Mf(t){return t===9||t===32}function ma(t){return t===9||t===32||t===10||t===13}function zm(t){return t===44||t===91||t===93||t===123||t===125}function Fj(t){var i;return 48<=t&&t<=57?t-48:(i=t|32,97<=i&&i<=102?i-97+10:-1)}function Bj(t){return t===120?2:t===117?4:t===85?8:0}function Vj(t){return 48<=t&&t<=57?t-48:-1}function E8(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Wj(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}for(var T8=new Array(256),M8=new Array(256),Um=0;Um<256;Um++)T8[Um]=E8(Um)?1:0,M8[Um]=E8(Um);function zj(t,i){this.input=t,this.filename=i.filename||null,this.schema=i.schema||Pj,this.onWarning=i.onWarning||null,this.legacy=i.legacy||!1,this.json=i.json||!1,this.listener=i.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function A8(t,i){var o={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return o.snippet=MY(o),new Du(i,o)}function ci(t,i){throw A8(t,i)}function Qb(t,i){t.onWarning&&t.onWarning.call(null,A8(t,i))}var L8={YAML:function(i,o,l){var h,p,m;i.version!==null&&ci(i,"duplication of %YAML directive"),l.length!==1&&ci(i,"YAML directive accepts exactly one argument"),h=/^([0-9]+)\.([0-9]+)$/.exec(l[0]),h===null&&ci(i,"ill-formed argument of the YAML directive"),p=parseInt(h[1],10),m=parseInt(h[2],10),p!==1&&ci(i,"unacceptable YAML version of the document"),i.version=l[0],i.checkLineBreaks=m<2,m!==1&&m!==2&&Qb(i,"unsupported YAML version of the document")},TAG:function(i,o,l){var h,p;l.length!==2&&ci(i,"TAG directive accepts exactly two arguments"),h=l[0],p=l[1],k8.test(h)||ci(i,"ill-formed tag handle (first argument) of the TAG directive"),td.call(i.tagMap,h)&&ci(i,'there is a previously declared suffix for "'+h+'" tag handle'),C8.test(p)||ci(i,"ill-formed tag prefix (second argument) of the TAG directive");try{p=decodeURIComponent(p)}catch{ci(i,"tag prefix is malformed: "+p)}i.tagMap[h]=p}};function nd(t,i,o,l){var h,p,m,b;if(i<o){if(b=t.input.slice(i,o),l)for(h=0,p=b.length;h<p;h+=1)m=b.charCodeAt(h),m===9||32<=m&&m<=1114111||ci(t,"expected valid JSON character");else Dj.test(b)&&ci(t,"the stream contains non-printable characters");t.result+=b}}function R8(t,i,o,l){var h,p,m,b;for(Qo.isObject(o)||ci(t,"cannot merge mappings; the provided source object is unacceptable"),h=Object.keys(o),m=0,b=h.length;m<b;m+=1)p=h[m],td.call(i,p)||(i[p]=o[p],l[p]=!0)}function Gm(t,i,o,l,h,p,m,b,x){var E,L;if(Array.isArray(h))for(h=Array.prototype.slice.call(h),E=0,L=h.length;E<L;E+=1)Array.isArray(h[E])&&ci(t,"nested arrays are not supported inside keys"),typeof h=="object"&&S8(h[E])==="[object Object]"&&(h[E]="[object Object]");if(typeof h=="object"&&S8(h)==="[object Object]"&&(h="[object Object]"),h=String(h),i===null&&(i={}),l==="tag:yaml.org,2002:merge")if(Array.isArray(p))for(E=0,L=p.length;E<L;E+=1)R8(t,i,p[E],o);else R8(t,i,p,o);else!t.json&&!td.call(o,h)&&td.call(i,h)&&(t.line=m||t.line,t.lineStart=b||t.lineStart,t.position=x||t.position,ci(t,"duplicated mapping key")),h==="__proto__"?Object.defineProperty(i,h,{configurable:!0,enumerable:!0,writable:!0,value:p}):i[h]=p,delete o[h];return i}function Yk(t){var i;i=t.input.charCodeAt(t.position),i===10?t.position++:i===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ci(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ls(t,i,o){for(var l=0,h=t.input.charCodeAt(t.position);h!==0;){for(;Mf(h);)h===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),h=t.input.charCodeAt(++t.position);if(i&&h===35)do h=t.input.charCodeAt(++t.position);while(h!==10&&h!==13&&h!==0);if(Uc(h))for(Yk(t),h=t.input.charCodeAt(t.position),l++,t.lineIndent=0;h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);else break}return o!==-1&&l!==0&&t.lineIndent<o&&Qb(t,"deficient indentation"),l}function e2(t){var i=t.position,o;return o=t.input.charCodeAt(i),!!((o===45||o===46)&&o===t.input.charCodeAt(i+1)&&o===t.input.charCodeAt(i+2)&&(i+=3,o=t.input.charCodeAt(i),o===0||ma(o)))}function jk(t,i){i===1?t.result+=" ":i>1&&(t.result+=Qo.repeat(`
`,i-1))}function Uj(t,i,o){var l,h,p,m,b,x,E,L,I=t.kind,F=t.result,W;if(W=t.input.charCodeAt(t.position),ma(W)||zm(W)||W===35||W===38||W===42||W===33||W===124||W===62||W===39||W===34||W===37||W===64||W===96||(W===63||W===45)&&(h=t.input.charCodeAt(t.position+1),ma(h)||o&&zm(h)))return!1;for(t.kind="scalar",t.result="",p=m=t.position,b=!1;W!==0;){if(W===58){if(h=t.input.charCodeAt(t.position+1),ma(h)||o&&zm(h))break}else if(W===35){if(l=t.input.charCodeAt(t.position-1),ma(l))break}else{if(t.position===t.lineStart&&e2(t)||o&&zm(W))break;if(Uc(W))if(x=t.line,E=t.lineStart,L=t.lineIndent,Ls(t,!1,-1),t.lineIndent>=i){b=!0,W=t.input.charCodeAt(t.position);continue}else{t.position=m,t.line=x,t.lineStart=E,t.lineIndent=L;break}}b&&(nd(t,p,m,!1),jk(t,t.line-x),p=m=t.position,b=!1),Mf(W)||(m=t.position+1),W=t.input.charCodeAt(++t.position)}return nd(t,p,m,!1),t.result?!0:(t.kind=I,t.result=F,!1)}function Gj(t,i){var o,l,h;if(o=t.input.charCodeAt(t.position),o!==39)return!1;for(t.kind="scalar",t.result="",t.position++,l=h=t.position;(o=t.input.charCodeAt(t.position))!==0;)if(o===39)if(nd(t,l,t.position,!0),o=t.input.charCodeAt(++t.position),o===39)l=t.position,t.position++,h=t.position;else return!0;else Uc(o)?(nd(t,l,h,!0),jk(t,Ls(t,!1,i)),l=h=t.position):t.position===t.lineStart&&e2(t)?ci(t,"unexpected end of the document within a single quoted scalar"):(t.position++,h=t.position);ci(t,"unexpected end of the stream within a single quoted scalar")}function Hj(t,i){var o,l,h,p,m,b;if(b=t.input.charCodeAt(t.position),b!==34)return!1;for(t.kind="scalar",t.result="",t.position++,o=l=t.position;(b=t.input.charCodeAt(t.position))!==0;){if(b===34)return nd(t,o,t.position,!0),t.position++,!0;if(b===92){if(nd(t,o,t.position,!0),b=t.input.charCodeAt(++t.position),Uc(b))Ls(t,!1,i);else if(b<256&&T8[b])t.result+=M8[b],t.position++;else if((m=Bj(b))>0){for(h=m,p=0;h>0;h--)b=t.input.charCodeAt(++t.position),(m=Fj(b))>=0?p=(p<<4)+m:ci(t,"expected hexadecimal character");t.result+=Wj(p),t.position++}else ci(t,"unknown escape sequence");o=l=t.position}else Uc(b)?(nd(t,o,l,!0),jk(t,Ls(t,!1,i)),o=l=t.position):t.position===t.lineStart&&e2(t)?ci(t,"unexpected end of the document within a double quoted scalar"):(t.position++,l=t.position)}ci(t,"unexpected end of the stream within a double quoted scalar")}function Yj(t,i){var o=!0,l,h,p,m=t.tag,b,x=t.anchor,E,L,I,F,W,K=Object.create(null),re,se,pe,he;if(he=t.input.charCodeAt(t.position),he===91)L=93,W=!1,b=[];else if(he===123)L=125,W=!0,b={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=b),he=t.input.charCodeAt(++t.position);he!==0;){if(Ls(t,!0,i),he=t.input.charCodeAt(t.position),he===L)return t.position++,t.tag=m,t.anchor=x,t.kind=W?"mapping":"sequence",t.result=b,!0;o?he===44&&ci(t,"expected the node content, but found ','"):ci(t,"missed comma between flow collection entries"),se=re=pe=null,I=F=!1,he===63&&(E=t.input.charCodeAt(t.position+1),ma(E)&&(I=F=!0,t.position++,Ls(t,!0,i))),l=t.line,h=t.lineStart,p=t.position,Hm(t,i,Kb,!1,!0),se=t.tag,re=t.result,Ls(t,!0,i),he=t.input.charCodeAt(t.position),(F||t.line===l)&&he===58&&(I=!0,he=t.input.charCodeAt(++t.position),Ls(t,!0,i),Hm(t,i,Kb,!1,!0),pe=t.result),W?Gm(t,b,K,se,re,pe,l,h,p):I?b.push(Gm(t,null,K,se,re,pe,l,h,p)):b.push(re),Ls(t,!0,i),he=t.input.charCodeAt(t.position),he===44?(o=!0,he=t.input.charCodeAt(++t.position)):o=!1}ci(t,"unexpected end of the stream within a flow collection")}function jj(t,i){var o,l,h=Hk,p=!1,m=!1,b=i,x=0,E=!1,L,I;if(I=t.input.charCodeAt(t.position),I===124)l=!1;else if(I===62)l=!0;else return!1;for(t.kind="scalar",t.result="";I!==0;)if(I=t.input.charCodeAt(++t.position),I===43||I===45)Hk===h?h=I===43?w8:Ij:ci(t,"repeat of a chomping mode identifier");else if((L=Vj(I))>=0)L===0?ci(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):m?ci(t,"repeat of an indentation width identifier"):(b=i+L-1,m=!0);else break;if(Mf(I)){do I=t.input.charCodeAt(++t.position);while(Mf(I));if(I===35)do I=t.input.charCodeAt(++t.position);while(!Uc(I)&&I!==0)}for(;I!==0;){for(Yk(t),t.lineIndent=0,I=t.input.charCodeAt(t.position);(!m||t.lineIndent<b)&&I===32;)t.lineIndent++,I=t.input.charCodeAt(++t.position);if(!m&&t.lineIndent>b&&(b=t.lineIndent),Uc(I)){x++;continue}if(t.lineIndent<b){h===w8?t.result+=Qo.repeat(`
`,p?1+x:x):h===Hk&&p&&(t.result+=`
`);break}for(l?Mf(I)?(E=!0,t.result+=Qo.repeat(`
`,p?1+x:x)):E?(E=!1,t.result+=Qo.repeat(`
`,x+1)):x===0?p&&(t.result+=" "):t.result+=Qo.repeat(`
`,x):t.result+=Qo.repeat(`
`,p?1+x:x),p=!0,m=!0,x=0,o=t.position;!Uc(I)&&I!==0;)I=t.input.charCodeAt(++t.position);nd(t,o,t.position,!1)}return!0}function P8(t,i){var o,l=t.tag,h=t.anchor,p=[],m,b=!1,x;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),x=t.input.charCodeAt(t.position);x!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ci(t,"tab characters must not be used in indentation")),!(x!==45||(m=t.input.charCodeAt(t.position+1),!ma(m))));){if(b=!0,t.position++,Ls(t,!0,-1)&&t.lineIndent<=i){p.push(null),x=t.input.charCodeAt(t.position);continue}if(o=t.line,Hm(t,i,x8,!1,!0),p.push(t.result),Ls(t,!0,-1),x=t.input.charCodeAt(t.position),(t.line===o||t.lineIndent>i)&&x!==0)ci(t,"bad indentation of a sequence entry");else if(t.lineIndent<i)break}return b?(t.tag=l,t.anchor=h,t.kind="sequence",t.result=p,!0):!1}function $j(t,i,o){var l,h,p,m,b,x,E=t.tag,L=t.anchor,I={},F=Object.create(null),W=null,K=null,re=null,se=!1,pe=!1,he;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=I),he=t.input.charCodeAt(t.position);he!==0;){if(!se&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ci(t,"tab characters must not be used in indentation")),l=t.input.charCodeAt(t.position+1),p=t.line,(he===63||he===58)&&ma(l))he===63?(se&&(Gm(t,I,F,W,K,null,m,b,x),W=K=re=null),pe=!0,se=!0,h=!0):se?(se=!1,h=!0):ci(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,he=l;else{if(m=t.line,b=t.lineStart,x=t.position,!Hm(t,o,b8,!1,!0))break;if(t.line===p){for(he=t.input.charCodeAt(t.position);Mf(he);)he=t.input.charCodeAt(++t.position);if(he===58)he=t.input.charCodeAt(++t.position),ma(he)||ci(t,"a whitespace character is expected after the key-value separator within a block mapping"),se&&(Gm(t,I,F,W,K,null,m,b,x),W=K=re=null),pe=!0,se=!1,h=!1,W=t.tag,K=t.result;else if(pe)ci(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=E,t.anchor=L,!0}else if(pe)ci(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=E,t.anchor=L,!0}if((t.line===p||t.lineIndent>i)&&(se&&(m=t.line,b=t.lineStart,x=t.position),Hm(t,i,Jb,!0,h)&&(se?K=t.result:re=t.result),se||(Gm(t,I,F,W,K,re,m,b,x),W=K=re=null),Ls(t,!0,-1),he=t.input.charCodeAt(t.position)),(t.line===p||t.lineIndent>i)&&he!==0)ci(t,"bad indentation of a mapping entry");else if(t.lineIndent<i)break}return se&&Gm(t,I,F,W,K,null,m,b,x),pe&&(t.tag=E,t.anchor=L,t.kind="mapping",t.result=I),pe}function qj(t){var i,o=!1,l=!1,h,p,m;if(m=t.input.charCodeAt(t.position),m!==33)return!1;if(t.tag!==null&&ci(t,"duplication of a tag property"),m=t.input.charCodeAt(++t.position),m===60?(o=!0,m=t.input.charCodeAt(++t.position)):m===33?(l=!0,h="!!",m=t.input.charCodeAt(++t.position)):h="!",i=t.position,o){do m=t.input.charCodeAt(++t.position);while(m!==0&&m!==62);t.position<t.length?(p=t.input.slice(i,t.position),m=t.input.charCodeAt(++t.position)):ci(t,"unexpected end of the stream within a verbatim tag")}else{for(;m!==0&&!ma(m);)m===33&&(l?ci(t,"tag suffix cannot contain exclamation marks"):(h=t.input.slice(i-1,t.position+1),k8.test(h)||ci(t,"named tag handle cannot contain such characters"),l=!0,i=t.position+1)),m=t.input.charCodeAt(++t.position);p=t.input.slice(i,t.position),Oj.test(p)&&ci(t,"tag suffix cannot contain flow indicator characters")}p&&!C8.test(p)&&ci(t,"tag name cannot contain such characters: "+p);try{p=decodeURIComponent(p)}catch{ci(t,"tag name is malformed: "+p)}return o?t.tag=p:td.call(t.tagMap,h)?t.tag=t.tagMap[h]+p:h==="!"?t.tag="!"+p:h==="!!"?t.tag="tag:yaml.org,2002:"+p:ci(t,'undeclared tag handle "'+h+'"'),!0}function Xj(t){var i,o;if(o=t.input.charCodeAt(t.position),o!==38)return!1;for(t.anchor!==null&&ci(t,"duplication of an anchor property"),o=t.input.charCodeAt(++t.position),i=t.position;o!==0&&!ma(o)&&!zm(o);)o=t.input.charCodeAt(++t.position);return t.position===i&&ci(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(i,t.position),!0}function Zj(t){var i,o,l;if(l=t.input.charCodeAt(t.position),l!==42)return!1;for(l=t.input.charCodeAt(++t.position),i=t.position;l!==0&&!ma(l)&&!zm(l);)l=t.input.charCodeAt(++t.position);return t.position===i&&ci(t,"name of an alias node must contain at least one character"),o=t.input.slice(i,t.position),td.call(t.anchorMap,o)||ci(t,'unidentified alias "'+o+'"'),t.result=t.anchorMap[o],Ls(t,!0,-1),!0}function Hm(t,i,o,l,h){var p,m,b,x=1,E=!1,L=!1,I,F,W,K,re,se;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,p=m=b=Jb===o||x8===o,l&&Ls(t,!0,-1)&&(E=!0,t.lineIndent>i?x=1:t.lineIndent===i?x=0:t.lineIndent<i&&(x=-1)),x===1)for(;qj(t)||Xj(t);)Ls(t,!0,-1)?(E=!0,b=p,t.lineIndent>i?x=1:t.lineIndent===i?x=0:t.lineIndent<i&&(x=-1)):b=!1;if(b&&(b=E||h),(x===1||Jb===o)&&(Kb===o||b8===o?re=i:re=i+1,se=t.position-t.lineStart,x===1?b&&(P8(t,se)||$j(t,se,re))||Yj(t,re)?L=!0:(m&&jj(t,re)||Gj(t,re)||Hj(t,re)?L=!0:Zj(t)?(L=!0,(t.tag!==null||t.anchor!==null)&&ci(t,"alias node should not have any properties")):Uj(t,re,Kb===o)&&(L=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):x===0&&(L=b&&P8(t,se))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ci(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),I=0,F=t.implicitTypes.length;I<F;I+=1)if(K=t.implicitTypes[I],K.resolve(t.result)){t.result=K.construct(t.result),t.tag=K.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(td.call(t.typeMap[t.kind||"fallback"],t.tag))K=t.typeMap[t.kind||"fallback"][t.tag];else for(K=null,W=t.typeMap.multi[t.kind||"fallback"],I=0,F=W.length;I<F;I+=1)if(t.tag.slice(0,W[I].tag.length)===W[I].tag){K=W[I];break}K||ci(t,"unknown tag !<"+t.tag+">"),t.result!==null&&K.kind!==t.kind&&ci(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+K.kind+'", not "'+t.kind+'"'),K.resolve(t.result,t.tag)?(t.result=K.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ci(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||L}function Kj(t){var i=t.position,o,l,h,p=!1,m;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(m=t.input.charCodeAt(t.position))!==0&&(Ls(t,!0,-1),m=t.input.charCodeAt(t.position),!(t.lineIndent>0||m!==37));){for(p=!0,m=t.input.charCodeAt(++t.position),o=t.position;m!==0&&!ma(m);)m=t.input.charCodeAt(++t.position);for(l=t.input.slice(o,t.position),h=[],l.length<1&&ci(t,"directive name must not be less than one character in length");m!==0;){for(;Mf(m);)m=t.input.charCodeAt(++t.position);if(m===35){do m=t.input.charCodeAt(++t.position);while(m!==0&&!Uc(m));break}if(Uc(m))break;for(o=t.position;m!==0&&!ma(m);)m=t.input.charCodeAt(++t.position);h.push(t.input.slice(o,t.position))}m!==0&&Yk(t),td.call(L8,l)?L8[l](t,l,h):Qb(t,'unknown document directive "'+l+'"')}if(Ls(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ls(t,!0,-1)):p&&ci(t,"directives end mark is expected"),Hm(t,t.lineIndent-1,Jb,!1,!0),Ls(t,!0,-1),t.checkLineBreaks&&Nj.test(t.input.slice(i,t.position))&&Qb(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&e2(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ls(t,!0,-1));return}if(t.position<t.length-1)ci(t,"end of the stream or a document separator is expected");else return}function I8(t,i){t=String(t),i=i||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var o=new zj(t,i),l=t.indexOf("\0");for(l!==-1&&(o.position=l,ci(o,"null byte is not allowed in input")),o.input+="\0";o.input.charCodeAt(o.position)===32;)o.lineIndent+=1,o.position+=1;for(;o.position<o.length-1;)Kj(o);return o.documents}function Jj(t,i,o){i!==null&&typeof i=="object"&&typeof o>"u"&&(o=i,i=null);var l=I8(t,o);if(typeof i!="function")return l;for(var h=0,p=l.length;h<p;h+=1)i(l[h])}function Qj(t,i){var o=I8(t,i);if(o.length!==0){if(o.length===1)return o[0];throw new Du("expected a single document in the stream, but found more")}}var e$=Jj,t$=Qj,n$={loadAll:e$,load:t$},i$=v8,r$=n$.load;const D8=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s;function s$(t,i){var o;const l=t.match(D8);if(l){const h=r$(l[1],{schema:i$});return h!=null&&h.title&&((o=i.setDiagramTitle)==null||o.call(i,h.title)),t.slice(l[0].length)}else return t}const o$=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,a$=/\s*%%.*\n/gm,t2={},$k=function(t,i){t=t.replace(D8,"").replace(o$,"").replace(a$,`
`);for(const[o,{detector:l}]of Object.entries(t2))if(l(t,i))return o;throw new Error(`No diagram type detected for text: ${t}`)},N8=(t,i,o)=>{if(t2[t])throw new Error(`Detector with key ${t} already exists`);t2[t]={detector:i,loader:o},y.debug(`Detector with key ${t} added${o?" with loader":""}`)},l$=t=>t2[t].loader,qk=function(t,i,o){const{depth:l,clobber:h}=Object.assign({depth:2,clobber:!1},o);return Array.isArray(i)&&!Array.isArray(t)?(i.forEach(p=>qk(t,p,o)),t):Array.isArray(i)&&Array.isArray(t)?(i.forEach(p=>{t.includes(p)||t.push(p)}),t):t===void 0||l<=0?t!=null&&typeof t=="object"&&typeof i=="object"?Object.assign(t,i):i:(i!==void 0&&typeof t=="object"&&typeof i=="object"&&Object.keys(i).forEach(p=>{typeof i[p]=="object"&&(t[p]===void 0||typeof t[p]=="object")?(t[p]===void 0&&(t[p]=Array.isArray(i[p])?[]:{}),t[p]=qk(t[p],i[p],{depth:l-1,clobber:h})):(h||typeof t[p]!="object"&&typeof i[p]!="object")&&(t[p]=i[p])}),t)},co=qk;var c$=typeof sp=="object"&&sp&&sp.Object===Object&&sp;const O8=c$;var u$=typeof self=="object"&&self&&self.Object===Object&&self,h$=O8||u$||Function("return this")();const zl=h$;var d$=zl.Symbol;const dl=d$;var F8=Object.prototype,f$=F8.hasOwnProperty,p$=F8.toString,G1=dl?dl.toStringTag:void 0;function m$(t){var i=f$.call(t,G1),o=t[G1];try{t[G1]=void 0;var l=!0}catch{}var h=p$.call(t);return l&&(i?t[G1]=o:delete t[G1]),h}var g$=Object.prototype,v$=g$.toString;function y$(t){return v$.call(t)}var _$="[object Null]",b$="[object Undefined]",B8=dl?dl.toStringTag:void 0;function Af(t){return t==null?t===void 0?b$:_$:B8&&B8 in Object(t)?m$(t):y$(t)}function Va(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}var x$="[object AsyncFunction]",w$="[object Function]",k$="[object GeneratorFunction]",C$="[object Proxy]";function Ym(t){if(!Va(t))return!1;var i=Af(t);return i==w$||i==k$||i==x$||i==C$}var S$=zl["__core-js_shared__"];const Xk=S$;var V8=function(){var t=/[^.]+$/.exec(Xk&&Xk.keys&&Xk.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function E$(t){return!!V8&&V8 in t}var T$=Function.prototype,M$=T$.toString;function Lf(t){if(t!=null){try{return M$.call(t)}catch{}try{return t+""}catch{}}return""}var A$=/[\\^$.*+?()[\]{}|]/g,L$=/^\[object .+?Constructor\]$/,R$=Function.prototype,P$=Object.prototype,I$=R$.toString,D$=P$.hasOwnProperty,N$=RegExp("^"+I$.call(D$).replace(A$,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function O$(t){if(!Va(t)||E$(t))return!1;var i=Ym(t)?N$:L$;return i.test(Lf(t))}function F$(t,i){return t==null?void 0:t[i]}function Rf(t,i){var o=F$(t,i);return O$(o)?o:void 0}var B$=Rf(Object,"create");const H1=B$;function V$(){this.__data__=H1?H1(null):{},this.size=0}function W$(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}var z$="__lodash_hash_undefined__",U$=Object.prototype,G$=U$.hasOwnProperty;function H$(t){var i=this.__data__;if(H1){var o=i[t];return o===z$?void 0:o}return G$.call(i,t)?i[t]:void 0}var Y$=Object.prototype,j$=Y$.hasOwnProperty;function $$(t){var i=this.__data__;return H1?i[t]!==void 0:j$.call(i,t)}var q$="__lodash_hash_undefined__";function X$(t,i){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=H1&&i===void 0?q$:i,this}function Pf(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var l=t[i];this.set(l[0],l[1])}}Pf.prototype.clear=V$,Pf.prototype.delete=W$,Pf.prototype.get=H$,Pf.prototype.has=$$,Pf.prototype.set=X$;function Z$(){this.__data__=[],this.size=0}function jm(t,i){return t===i||t!==t&&i!==i}function n2(t,i){for(var o=t.length;o--;)if(jm(t[o][0],i))return o;return-1}var K$=Array.prototype,J$=K$.splice;function Q$(t){var i=this.__data__,o=n2(i,t);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():J$.call(i,o,1),--this.size,!0}function eq(t){var i=this.__data__,o=n2(i,t);return o<0?void 0:i[o][1]}function tq(t){return n2(this.__data__,t)>-1}function nq(t,i){var o=this.__data__,l=n2(o,t);return l<0?(++this.size,o.push([t,i])):o[l][1]=i,this}function Nu(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var l=t[i];this.set(l[0],l[1])}}Nu.prototype.clear=Z$,Nu.prototype.delete=Q$,Nu.prototype.get=eq,Nu.prototype.has=tq,Nu.prototype.set=nq;var iq=Rf(zl,"Map");const Y1=iq;function rq(){this.size=0,this.__data__={hash:new Pf,map:new(Y1||Nu),string:new Pf}}function sq(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function i2(t,i){var o=t.__data__;return sq(i)?o[typeof i=="string"?"string":"hash"]:o.map}function oq(t){var i=i2(this,t).delete(t);return this.size-=i?1:0,i}function aq(t){return i2(this,t).get(t)}function lq(t){return i2(this,t).has(t)}function cq(t,i){var o=i2(this,t),l=o.size;return o.set(t,i),this.size+=o.size==l?0:1,this}function Ou(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var l=t[i];this.set(l[0],l[1])}}Ou.prototype.clear=rq,Ou.prototype.delete=oq,Ou.prototype.get=aq,Ou.prototype.has=lq,Ou.prototype.set=cq;var uq="Expected a function";function $m(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new TypeError(uq);var o=function(){var l=arguments,h=i?i.apply(this,l):l[0],p=o.cache;if(p.has(h))return p.get(h);var m=t.apply(this,l);return o.cache=p.set(h,m)||p,m};return o.cache=new($m.Cache||Ou),o}$m.Cache=Ou;const hq={curveBasis:Vm,curveBasisClosed:hH,curveBasisOpen:dH,curveLinear:Ba,curveLinearClosed:fH,curveMonotoneX:pH,curveMonotoneY:mH,curveNatural:gH,curveStep:vH,curveStepAfter:_H,curveStepBefore:yH},Zk=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,dq=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,fq=function(t,i){const o=W8(t,/(?:init\b)|(?:initialize\b)/);let l={};if(Array.isArray(o)){const h=o.map(p=>p.args);If(h),l=co(l,[...h])}else l=o.args;if(l){let h=$k(t,i);["config"].forEach(p=>{l[p]!==void 0&&(h==="flowchart-v2"&&(h="flowchart"),l[h]=l[p],delete l[p])})}return l},W8=function(t,i=null){try{const o=new RegExp(`[%]{2}(?![{]${dq.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(o,"").replace(/'/gm,'"'),y.debug(`Detecting diagram directive${i!==null?" type:"+i:""} based on the text:${t}`);let l;const h=[];for(;(l=Zk.exec(t))!==null;)if(l.index===Zk.lastIndex&&Zk.lastIndex++,l&&!i||i&&l[1]&&l[1].match(i)||i&&l[2]&&l[2].match(i)){const p=l[1]?l[1]:l[2],m=l[3]?l[3].trim():l[4]?JSON.parse(l[4].trim()):null;h.push({type:p,args:m})}return h.length===0&&h.push({type:t,args:null}),h.length===1?h[0]:h}catch(o){return y.error(`ERROR: ${o.message} - Unable to parse directive
      ${i!==null?" type:"+i:""} based on the text:${t}`),{type:null,args:null}}},pq=function(t,i){for(const[o,l]of i.entries())if(l.match(t))return o;return-1};function Ul(t,i){if(!t)return i;const o=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return hq[o]||i}function mq(t,i){const o=t.trim();if(o)return i.securityLevel!=="loose"?A(o):o}const gq=(t,...i)=>{const o=t.split("."),l=o.length-1,h=o[l];let p=window;for(let m=0;m<l;m++)if(p=p[o[m]],!p)return;p[h](...i)};function r2(t,i){return t&&i?Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)):0}function vq(t){let i,o=0;t.forEach(p=>{o+=r2(p,i),i=p});let l=o/2,h;return i=void 0,t.forEach(p=>{if(i&&!h){const m=r2(p,i);if(m<l)l-=m;else{const b=l/m;b<=0&&(h=i),b>=1&&(h={x:p.x,y:p.y}),b>0&&b<1&&(h={x:(1-b)*i.x+b*p.x,y:(1-b)*i.y+b*p.y})}}i=p}),h}function yq(t){return t.length===1?t[0]:vq(t)}const _q=(t,i,o)=>{let l;y.info(`our points ${JSON.stringify(i)}`),i[0]!==o&&(i=i.reverse());let p=25,m;l=void 0,i.forEach(L=>{if(l&&!m){const I=r2(L,l);if(I<p)p-=I;else{const F=p/I;F<=0&&(m=l),F>=1&&(m={x:L.x,y:L.y}),F>0&&F<1&&(m={x:(1-F)*l.x+F*L.x,y:(1-F)*l.y+F*L.y})}}l=L});const b=t?10:5,x=Math.atan2(i[0].y-m.y,i[0].x-m.x),E={x:0,y:0};return E.x=Math.sin(x)*b+(i[0].x+m.x)/2,E.y=-Math.cos(x)*b+(i[0].y+m.y)/2,E};function bq(t,i,o){let l=JSON.parse(JSON.stringify(o)),h;y.info("our points",l),i!=="start_left"&&i!=="start_right"&&(l=l.reverse()),l.forEach(I=>{h=I});let m=25+t,b;h=void 0,l.forEach(I=>{if(h&&!b){const F=r2(I,h);if(F<m)m-=F;else{const W=m/F;W<=0&&(b=h),W>=1&&(b={x:I.x,y:I.y}),W>0&&W<1&&(b={x:(1-W)*h.x+W*I.x,y:(1-W)*h.y+W*I.y})}}h=I});const x=10+t*.5,E=Math.atan2(l[0].y-b.y,l[0].x-b.x),L={x:0,y:0};return L.x=Math.sin(E)*x+(l[0].x+b.x)/2,L.y=-Math.cos(E)*x+(l[0].y+b.y)/2,i==="start_left"&&(L.x=Math.sin(E+Math.PI)*x+(l[0].x+b.x)/2,L.y=-Math.cos(E+Math.PI)*x+(l[0].y+b.y)/2),i==="end_right"&&(L.x=Math.sin(E-Math.PI)*x+(l[0].x+b.x)/2-5,L.y=-Math.cos(E-Math.PI)*x+(l[0].y+b.y)/2-5),i==="end_left"&&(L.x=Math.sin(E)*x+(l[0].x+b.x)/2-5,L.y=-Math.cos(E)*x+(l[0].y+b.y)/2-5),L}function id(t){let i="",o="";for(const l of t)l!==void 0&&(l.startsWith("color:")||l.startsWith("text-align:")?o=o+l+";":i=i+l+";");return{style:i,labelStyle:o}}let z8=0;const U8=()=>(z8++,"id-"+Math.random().toString(36).substr(2,12)+"-"+z8);function xq(t){let i="";const o="0123456789abcdef",l=o.length;for(let h=0;h<t;h++)i+=o.charAt(Math.floor(Math.random()*l));return i}const G8=t=>xq(t.length),wq=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},kq=function(t,i){const o=i.text.replace(Ai.lineBreakRegex," "),l=t.append("text");l.attr("x",i.x),l.attr("y",i.y),l.style("text-anchor",i.anchor),l.style("font-family",i.fontFamily),l.style("font-size",i.fontSize),l.style("font-weight",i.fontWeight),l.attr("fill",i.fill),i.class!==void 0&&l.attr("class",i.class);const h=l.append("tspan");return h.attr("x",i.x+i.textMargin*2),h.attr("fill",i.fill),h.text(o),l},H8=$m((t,i,o)=>{if(!t||(o=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},o),Ai.lineBreakRegex.test(t)))return t;const l=t.split(" "),h=[];let p="";return l.forEach((m,b)=>{const x=Gc(`${m} `,o),E=Gc(p,o);if(x>i){const{hyphenatedStrings:F,remainingWord:W}=Cq(m,i,"-",o);h.push(p,...F),p=W}else E+x>=i?(h.push(p),p=m):p=[p,m].filter(Boolean).join(" ");b+1===l.length&&h.push(p)}),h.filter(m=>m!=="").join(o.joinWith)},(t,i,o)=>`${t}${i}${o.fontSize}${o.fontWeight}${o.fontFamily}${o.joinWith}`),Cq=$m((t,i,o="-",l)=>{l=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},l);const h=[...t],p=[];let m="";return h.forEach((b,x)=>{const E=`${m}${b}`;if(Gc(E,l)>=i){const I=x+1,F=h.length===I,W=`${E}${o}`;p.push(F?E:W),m=""}else m=E}),{hyphenatedStrings:p,remainingWord:m}},(t,i,o="-",l)=>`${t}${i}${o}${l.fontSize}${l.fontWeight}${l.fontFamily}`);function Kk(t,i){return i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},i),Jk(t,i).height}function Gc(t,i){return i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},i),Jk(t,i).width}const Jk=$m((t,i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},i);const{fontSize:o,fontFamily:l,fontWeight:h}=i;if(!t)return{width:0,height:0};const p=["sans-serif",l],m=t.split(Ai.lineBreakRegex),b=[],x=dn("body");if(!x.remove)return{width:0,height:0,lineHeight:0};const E=x.append("svg");for(const I of p){let F=0;const W={width:0,height:0,lineHeight:0};for(const K of m){const re=wq();re.text=K;const se=kq(E,re).style("font-size",o).style("font-weight",h).style("font-family",I),pe=(se._groups||se)[0][0].getBBox();W.width=Math.round(Math.max(W.width,pe.width)),F=Math.round(pe.height),W.height+=F,W.lineHeight=Math.round(Math.max(W.lineHeight,F))}b.push(W)}E.remove();const L=isNaN(b[1].height)||isNaN(b[1].width)||isNaN(b[1].lineHeight)||b[0].height>b[1].height&&b[0].width>b[1].width&&b[0].lineHeight>b[1].lineHeight?0:1;return b[L]},(t,i)=>`${t}${i.fontSize}${i.fontWeight}${i.fontFamily}`),Sq=class{constructor(i,o){this.deterministic=i,this.seed=o,this.count=o?o.length:0}next(){return this.deterministic?this.count++:Date.now()}};let s2;const Eq=function(t){return s2=s2||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),s2.innerHTML=t,unescape(s2.textContent)},If=t=>{if(y.debug("directiveSanitizer called with",t),typeof t=="object"&&(t.length?t.forEach(i=>If(i)):Object.keys(t).forEach(i=>{y.debug("Checking key",i),i.startsWith("__")&&(y.debug("sanitize deleting __ option",i),delete t[i]),i.includes("proto")&&(y.debug("sanitize deleting proto option",i),delete t[i]),i.includes("constr")&&(y.debug("sanitize deleting constr option",i),delete t[i]),i.includes("themeCSS")&&(y.debug("sanitizing themeCss option"),t[i]=o2(t[i])),i.includes("fontFamily")&&(y.debug("sanitizing fontFamily option"),t[i]=o2(t[i])),i.includes("altFontFamily")&&(y.debug("sanitizing altFontFamily option"),t[i]=o2(t[i])),pY.includes(i)?typeof t[i]=="object"&&(y.debug("sanitize deleting object",i),If(t[i])):(y.debug("sanitize deleting option",i),delete t[i])})),t.themeVariables){const i=Object.keys(t.themeVariables);for(const o of i){const l=t.themeVariables[o];l&&l.match&&!l.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[o]="")}}y.debug("After sanitization",t)},o2=t=>{let i=0,o=0;for(const l of t){if(i<o)return"{ /* ERROR: Unbalanced CSS */ }";l==="{"?i++:l==="}"&&o++}return i!==o?"{ /* ERROR: Unbalanced CSS */ }":t};function Qk(t){return"str"in t}function Tq(t){return t instanceof Error?t.message:String(t)}const Ii={assignWithDepth:co,wrapLabel:H8,calculateTextHeight:Kk,calculateTextWidth:Gc,calculateTextDimensions:Jk,detectInit:fq,detectDirective:W8,isSubstringInArray:pq,interpolateToCurve:Ul,calcLabelPosition:yq,calcCardinalityPosition:_q,calcTerminalLabelPosition:bq,formatUrl:mq,getStylesFromArray:id,generateId:U8,random:G8,runFunc:gq,entityDecode:Eq,initIdGenerator:Sq,directiveSanitizer:If,sanitizeCss:o2,insertTitle:(t,i,o,l)=>{if(!l)return;const h=t.node().getBBox();t.append("text").text(l).attr("x",h.x+h.width/2).attr("y",-o).attr("class",i)}};var Y8="comm",j8="rule",$8="decl",Mq="@import",Aq="@keyframes",Lq=Math.abs,e4=String.fromCharCode;function q8(t){return t.trim()}function t4(t,i,o){return t.replace(i,o)}function Rq(t,i){return t.indexOf(i)}function a2(t,i){return t.charCodeAt(i)|0}function j1(t,i,o){return t.slice(i,o)}function rd(t){return t.length}function X8(t){return t.length}function l2(t,i){return i.push(t),t}var c2=1,qm=1,Z8=0,fl=0,Rs=0,Xm="";function n4(t,i,o,l,h,p,m){return{value:t,root:i,parent:o,type:l,props:h,children:p,line:c2,column:qm,length:m,return:""}}function Pq(){return Rs}function Iq(){return Rs=fl>0?a2(Xm,--fl):0,qm--,Rs===10&&(qm=1,c2--),Rs}function Gl(){return Rs=fl<Z8?a2(Xm,fl++):0,qm++,Rs===10&&(qm=1,c2++),Rs}function Df(){return a2(Xm,fl)}function u2(){return fl}function h2(t,i){return j1(Xm,t,i)}function i4(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Dq(t){return c2=qm=1,Z8=rd(Xm=t),fl=0,[]}function Nq(t){return Xm="",t}function r4(t){return q8(h2(fl-1,s4(t===91?t+2:t===40?t+1:t)))}function Oq(t){for(;(Rs=Df())&&Rs<33;)Gl();return i4(t)>2||i4(Rs)>3?"":" "}function Fq(t,i){for(;--i&&Gl()&&!(Rs<48||Rs>102||Rs>57&&Rs<65||Rs>70&&Rs<97););return h2(t,u2()+(i<6&&Df()==32&&Gl()==32))}function s4(t){for(;Gl();)switch(Rs){case t:return fl;case 34:case 39:t!==34&&t!==39&&s4(Rs);break;case 40:t===41&&s4(t);break;case 92:Gl();break}return fl}function Bq(t,i){for(;Gl()&&t+Rs!==47+10;)if(t+Rs===42+42&&Df()===47)break;return"/*"+h2(i,fl-1)+"*"+e4(t===47?t:Gl())}function Vq(t){for(;!i4(Df());)Gl();return h2(t,fl)}function Wq(t){return Nq(d2("",null,null,null,[""],t=Dq(t),0,[0],t))}function d2(t,i,o,l,h,p,m,b,x){for(var E=0,L=0,I=m,F=0,W=0,K=0,re=1,se=1,pe=1,he=0,Ce="",Le=h,Ve=p,je=l,Pe=Ce;se;)switch(K=he,he=Gl()){case 40:if(K!=108&&a2(Pe,I-1)==58){Rq(Pe+=t4(r4(he),"&","&\f"),"&\f")!=-1&&(pe=-1);break}case 34:case 39:case 91:Pe+=r4(he);break;case 9:case 10:case 13:case 32:Pe+=Oq(K);break;case 92:Pe+=Fq(u2()-1,7);continue;case 47:switch(Df()){case 42:case 47:l2(zq(Bq(Gl(),u2()),i,o),x);break;default:Pe+="/"}break;case 123*re:b[E++]=rd(Pe)*pe;case 125*re:case 59:case 0:switch(he){case 0:case 125:se=0;case 59+L:W>0&&rd(Pe)-I&&l2(W>32?J8(Pe+";",l,o,I-1):J8(t4(Pe," ","")+";",l,o,I-2),x);break;case 59:Pe+=";";default:if(l2(je=K8(Pe,i,o,E,L,h,b,Ce,Le=[],Ve=[],I),p),he===123)if(L===0)d2(Pe,i,je,je,Le,p,I,b,Ve);else switch(F){case 100:case 109:case 115:d2(t,je,je,l&&l2(K8(t,je,je,0,0,h,b,Ce,h,Le=[],I),Ve),h,Ve,I,b,l?Le:Ve);break;default:d2(Pe,je,je,je,[""],Ve,0,b,Ve)}}E=L=W=0,re=pe=1,Ce=Pe="",I=m;break;case 58:I=1+rd(Pe),W=K;default:if(re<1){if(he==123)--re;else if(he==125&&re++==0&&Iq()==125)continue}switch(Pe+=e4(he),he*re){case 38:pe=L>0?1:(Pe+="\f",-1);break;case 44:b[E++]=(rd(Pe)-1)*pe,pe=1;break;case 64:Df()===45&&(Pe+=r4(Gl())),F=Df(),L=I=rd(Ce=Pe+=Vq(u2())),he++;break;case 45:K===45&&rd(Pe)==2&&(re=0)}}return p}function K8(t,i,o,l,h,p,m,b,x,E,L){for(var I=h-1,F=h===0?p:[""],W=X8(F),K=0,re=0,se=0;K<l;++K)for(var pe=0,he=j1(t,I+1,I=Lq(re=m[K])),Ce=t;pe<W;++pe)(Ce=q8(re>0?F[pe]+" "+he:t4(he,/&\f/g,F[pe])))&&(x[se++]=Ce);return n4(t,i,o,h===0?j8:b,x,E,L)}function zq(t,i,o){return n4(t,i,o,Y8,e4(Pq()),j1(t,2,-2),0)}function J8(t,i,o,l){return n4(t,i,o,$8,j1(t,0,l),j1(t,l+1,-1),l)}function o4(t,i){for(var o="",l=X8(t),h=0;h<l;h++)o+=i(t[h],h,t,i)||"";return o}function Uq(t,i,o,l){switch(t.type){case Mq:case $8:return t.return=t.return||t.value;case Y8:return"";case Aq:return t.return=t.value+"{"+o4(t.children,l)+"}";case j8:t.value=t.props.join(",")}return rd(o=o4(t.children,l))?t.return=t.value+"{"+o+"}":""}const f2={name:"mermaid",version:"9.3.0",description:"Markdown-ish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",main:"./dist/mermaid.min.js",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],scripts:{clean:"rimraf dist","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaidAPI.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts","docs:verify":"pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts --verify","docs:pre:vitepress":"rimraf src/vitepress && pnpm docs:code && ts-node-esm src/docs.mts --vitepress","docs:build:vitepress":"pnpm docs:pre:vitepress && vitepress build src/vitepress","docs:dev":'pnpm docs:pre:vitepress && concurrently "vitepress dev src/vitepress" "ts-node-esm src/docs.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell --config ../../cSpell.json "src/docs/**/*.md"',release:"pnpm build",prepublishOnly:"pnpm -w run build"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0","dagre-d3-es":"7.0.6",dompurify:"2.4.1",khroma:"^2.0.0","lodash-es":"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},devDependencies:{"@types/d3":"^7.4.0","@types/dompurify":"^2.4.0","@types/jsdom":"^20.0.1","@types/lodash-es":"^4.17.6","@types/micromatch":"^4.0.2","@types/prettier":"^2.7.1","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.42.1","@typescript-eslint/parser":"^5.42.1",chokidar:"^3.5.3",concurrently:"^7.5.0",coveralls:"^3.1.1",cspell:"^6.14.3",globby:"^13.1.2",jison:"^0.4.18","js-base64":"^3.7.2",jsdom:"^20.0.2",micromatch:"^4.0.5",moment:"^2.29.4","path-browserify":"^1.0.1",prettier:"^2.7.1",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.14.0",typedoc:"^0.23.18","typedoc-plugin-markdown":"^3.13.6",typescript:"^4.8.4","unist-util-flatmap":"^1.0.0",vitepress:"^1.0.0-alpha.28","vitepress-plugin-search":"^1.0.4-alpha.15"},files:["dist","README.md"],sideEffects:["**/*.css","**/*.scss"]},Zm=Object.freeze(mY);let ga=co({},Zm),Q8,Km=[],$1=co({},Zm);const p2=(t,i)=>{let o=co({},t),l={};for(const h of i)nL(h),l=co(l,h);if(o=co(o,l),l.theme&&l.theme in Iu){const h=co({},Q8),p=co(h.themeVariables||{},l.themeVariables);o.theme&&o.theme in Iu&&(o.themeVariables=Iu[o.theme].getThemeVariables(p))}return $1=o,sL($1),$1},Gq=t=>(ga=co({},Zm),ga=co(ga,t),t.theme&&Iu[t.theme]&&(ga.themeVariables=Iu[t.theme].getThemeVariables(t.themeVariables)),p2(ga,Km),ga),Hq=t=>{Q8=co({},t)},Yq=t=>(ga=co(ga,t),p2(ga,Km),ga),eL=()=>co({},ga),tL=t=>(sL(t),co($1,t),Qe()),Qe=()=>co({},$1),nL=t=>{var i;["secure",...(i=ga.secure)!=null?i:[]].forEach(o=>{t[o]!==void 0&&(y.debug(`Denied attempt to modify a secure key ${o}`,t[o]),delete t[o])}),Object.keys(t).forEach(o=>{o.indexOf("__")===0&&delete t[o]}),Object.keys(t).forEach(o=>{typeof t[o]=="string"&&(t[o].includes("<")||t[o].includes(">")||t[o].includes("url(data:"))&&delete t[o],typeof t[o]=="object"&&nL(t[o])})},a4=t=>{t.fontFamily&&(t.themeVariables?t.themeVariables.fontFamily||(t.themeVariables={fontFamily:t.fontFamily}):t.themeVariables={fontFamily:t.fontFamily}),Km.push(t),p2(ga,Km)},q1=(t=ga)=>{Km=[],p2(t,Km)};var iL=(t=>(t.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",t))(iL||{});const rL={},jq=t=>{rL[t]||(y.warn(iL[t]),rL[t]=!0)},sL=t=>{!t||(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&jq("LAZY_LOAD_DEPRECATED")},$q=function(t,i){for(let o of i)t.attr(o[0],o[1])},qq=function(t,i,o){let l=new Map;return o?(l.set("width","100%"),l.set("style",`max-width: ${i}px;`)):(l.set("height",t),l.set("width",i)),l},Hl=function(t,i,o,l){const h=qq(i,o,l);$q(t,h)},m2=function(t,i,o,l){const h=i.node().getBBox(),p=h.width,m=h.height;y.info(`SVG bounds: ${p}x${m}`,h);let b=0,x=0;y.info(`Graph bounds: ${b}x${x}`,t),b=p+o*2,x=m+o*2,y.info(`Calculated bounds: ${b}x${x}`),Hl(i,x,b,l);const E=`${h.x-o} ${h.y-o} ${h.width+2*o} ${h.height+2*o}`;i.attr("viewBox",E)},X1=t=>`g.classGroup text {
  fill: ${t.nodeBorder};
  fill: ${t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,oL=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }    
`,aL=()=>"",g2=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,lL=t=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${t.fontFamily};
      fill: ${t.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${t.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${t.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,cL=()=>"",uL=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,hL=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 100%;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,dL=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,v2=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,fL=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?`fill: ${t.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?`fill: ${t.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?`fill: ${t.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?`fill: ${t.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?`fill: ${t.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?`fill: ${t.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?`fill: ${t.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?`fill: ${t.fillType7}`:""};
  }

  .actor-0 {
    ${t.actor0?`fill: ${t.actor0}`:""};
  }
  .actor-1 {
    ${t.actor1?`fill: ${t.actor1}`:""};
  }
  .actor-2 {
    ${t.actor2?`fill: ${t.actor2}`:""};
  }
  .actor-3 {
    ${t.actor3?`fill: ${t.actor3}`:""};
  }
  .actor-4 {
    ${t.actor4?`fill: ${t.actor4}`:""};
  }
  .actor-5 {
    ${t.actor5?`fill: ${t.actor5}`:""};
  }
`,pL=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,y2={flowchart:g2,"flowchart-v2":g2,sequence:dL,gantt:lL,classDiagram:X1,"classDiagram-v2":X1,class:X1,stateDiagram:v2,state:v2,info:cL,pie:uL,er:oL,error:aL,journey:fL,requirement:hL,c4:pL},Xq=(t,i,o)=>{let l="";return t in y2&&y2[t]?l=y2[t](o):y.warn(`No theme found for ${t}`),` & {
    font-family: ${o.fontFamily};
    font-size: ${o.fontSize};
    fill: ${o.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${o.errorBkgColor};
  }
  & .error-text {
    fill: ${o.errorTextColor};
    stroke: ${o.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${o.lineColor};
    stroke: ${o.lineColor};
  }
  & .marker.cross {
    stroke: ${o.lineColor};
  }

  & svg {
    font-family: ${o.fontFamily};
    font-size: ${o.fontSize};
  }

  ${l}

  ${i}
`},Zq=(t,i)=>{y2[t]=i},Kq=Xq,Jq=y,Qq=w,Z1=Qe,eX=t=>Wl(t,Z1()),mL=m2,_2={},uo=(t,i,o)=>{if(_2[t])throw new Error(`Diagram ${t} already registered.`);_2[t]=i,o&&N8(t,o),Zq(t,i.styles),i.injectUtils&&i.injectUtils(Jq,Qq,Z1,eX,mL)},gL=t=>{if(t in _2)return _2[t];throw new Error(`Diagram ${t} not found.`)};var l4=function(){var t=function(ze,xe,_e,de){for(_e=_e||{},de=ze.length;de--;_e[ze[de]]=xe);return _e},i=[1,4],o=[1,7],l=[1,5],h=[1,9],p=[1,6],m=[2,6],b=[1,16],x=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],E=[8,14,20,22,24,25,27,29,32,37,40],L=[8,13,14,20,22,24,25,27,29,32,37,40],I=[1,26],F=[6,8,14,50,55],W=[8,14,55],K=[1,53],re=[1,52],se=[8,14,30,33,35,38,55],pe=[1,67],he=[1,68],Ce=[1,69],Le=[8,14,33,35,42,55],Ve={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(xe,_e,de,te,be,q,ot){var Z=q.length-1;switch(be){case 3:return q[Z];case 4:return q[Z-1];case 5:return te.setDirection(q[Z-3]),q[Z-1];case 7:te.setOptions(q[Z-1]),this.$=q[Z];break;case 8:q[Z-1]+=q[Z],this.$=q[Z-1];break;case 10:this.$=[];break;case 11:q[Z-1].push(q[Z]),this.$=q[Z-1];break;case 12:this.$=q[Z-1];break;case 17:this.$=q[Z].trim(),te.setAccTitle(this.$);break;case 18:case 19:this.$=q[Z].trim(),te.setAccDescription(this.$);break;case 20:te.addSection(q[Z].substr(8)),this.$=q[Z].substr(8);break;case 22:te.checkout(q[Z]);break;case 23:te.branch(q[Z]);break;case 24:te.branch(q[Z-2],q[Z]);break;case 25:te.cherryPick(q[Z],"",void 0);break;case 26:te.cherryPick(q[Z-2],"",q[Z]);break;case 27:case 29:te.cherryPick(q[Z-2],"","");break;case 28:te.cherryPick(q[Z],"",q[Z-2]);break;case 30:te.merge(q[Z],"","","");break;case 31:te.merge(q[Z-2],q[Z],"","");break;case 32:te.merge(q[Z-2],"",q[Z],"");break;case 33:te.merge(q[Z-2],"","",q[Z]);break;case 34:te.merge(q[Z-4],q[Z],"",q[Z-2]);break;case 35:te.merge(q[Z-4],"",q[Z],q[Z-2]);break;case 36:te.merge(q[Z-4],"",q[Z-2],q[Z]);break;case 37:te.merge(q[Z-4],q[Z-2],q[Z],"");break;case 38:te.merge(q[Z-4],q[Z-2],"",q[Z]);break;case 39:te.merge(q[Z-4],q[Z],q[Z-2],"");break;case 40:te.merge(q[Z-6],q[Z-4],q[Z-2],q[Z]);break;case 41:te.merge(q[Z-6],q[Z],q[Z-4],q[Z-2]);break;case 42:te.merge(q[Z-6],q[Z-4],q[Z],q[Z-2]);break;case 43:te.merge(q[Z-6],q[Z-2],q[Z-4],q[Z]);break;case 44:te.merge(q[Z-6],q[Z],q[Z-2],q[Z-4]);break;case 45:te.merge(q[Z-6],q[Z-2],q[Z],q[Z-4]);break;case 46:te.commit(q[Z]);break;case 47:te.commit("","",te.commitType.NORMAL,q[Z]);break;case 48:te.commit("","",q[Z],"");break;case 49:te.commit("","",q[Z],q[Z-2]);break;case 50:te.commit("","",q[Z-2],q[Z]);break;case 51:te.commit("",q[Z],te.commitType.NORMAL,"");break;case 52:te.commit("",q[Z-2],te.commitType.NORMAL,q[Z]);break;case 53:te.commit("",q[Z],te.commitType.NORMAL,q[Z-2]);break;case 54:te.commit("",q[Z-2],q[Z],"");break;case 55:te.commit("",q[Z],q[Z-2],"");break;case 56:te.commit("",q[Z-4],q[Z-2],q[Z]);break;case 57:te.commit("",q[Z-4],q[Z],q[Z-2]);break;case 58:te.commit("",q[Z-2],q[Z-4],q[Z]);break;case 59:te.commit("",q[Z],q[Z-4],q[Z-2]);break;case 60:te.commit("",q[Z],q[Z-2],q[Z-4]);break;case 61:te.commit("",q[Z-2],q[Z],q[Z-4]);break;case 62:te.commit(q[Z],"",te.commitType.NORMAL,"");break;case 63:te.commit(q[Z],"",te.commitType.NORMAL,q[Z-2]);break;case 64:te.commit(q[Z-2],"",te.commitType.NORMAL,q[Z]);break;case 65:te.commit(q[Z-2],"",q[Z],"");break;case 66:te.commit(q[Z],"",q[Z-2],"");break;case 67:te.commit(q[Z],q[Z-2],te.commitType.NORMAL,"");break;case 68:te.commit(q[Z-2],q[Z],te.commitType.NORMAL,"");break;case 69:te.commit(q[Z-4],"",q[Z-2],q[Z]);break;case 70:te.commit(q[Z-4],"",q[Z],q[Z-2]);break;case 71:te.commit(q[Z-2],"",q[Z-4],q[Z]);break;case 72:te.commit(q[Z],"",q[Z-4],q[Z-2]);break;case 73:te.commit(q[Z],"",q[Z-2],q[Z-4]);break;case 74:te.commit(q[Z-2],"",q[Z],q[Z-4]);break;case 75:te.commit(q[Z-4],q[Z],q[Z-2],"");break;case 76:te.commit(q[Z-4],q[Z-2],q[Z],"");break;case 77:te.commit(q[Z-2],q[Z],q[Z-4],"");break;case 78:te.commit(q[Z],q[Z-2],q[Z-4],"");break;case 79:te.commit(q[Z],q[Z-4],q[Z-2],"");break;case 80:te.commit(q[Z-2],q[Z-4],q[Z],"");break;case 81:te.commit(q[Z-4],q[Z],te.commitType.NORMAL,q[Z-2]);break;case 82:te.commit(q[Z-4],q[Z-2],te.commitType.NORMAL,q[Z]);break;case 83:te.commit(q[Z-2],q[Z],te.commitType.NORMAL,q[Z-4]);break;case 84:te.commit(q[Z],q[Z-2],te.commitType.NORMAL,q[Z-4]);break;case 85:te.commit(q[Z],q[Z-4],te.commitType.NORMAL,q[Z-2]);break;case 86:te.commit(q[Z-2],q[Z-4],te.commitType.NORMAL,q[Z]);break;case 87:te.commit(q[Z-6],q[Z-4],q[Z-2],q[Z]);break;case 88:te.commit(q[Z-6],q[Z-4],q[Z],q[Z-2]);break;case 89:te.commit(q[Z-6],q[Z-2],q[Z-4],q[Z]);break;case 90:te.commit(q[Z-6],q[Z],q[Z-4],q[Z-2]);break;case 91:te.commit(q[Z-6],q[Z-2],q[Z],q[Z-4]);break;case 92:te.commit(q[Z-6],q[Z],q[Z-2],q[Z-4]);break;case 93:te.commit(q[Z-4],q[Z-6],q[Z-2],q[Z]);break;case 94:te.commit(q[Z-4],q[Z-6],q[Z],q[Z-2]);break;case 95:te.commit(q[Z-2],q[Z-6],q[Z-4],q[Z]);break;case 96:te.commit(q[Z],q[Z-6],q[Z-4],q[Z-2]);break;case 97:te.commit(q[Z-2],q[Z-6],q[Z],q[Z-4]);break;case 98:te.commit(q[Z],q[Z-6],q[Z-2],q[Z-4]);break;case 99:te.commit(q[Z],q[Z-4],q[Z-2],q[Z-6]);break;case 100:te.commit(q[Z-2],q[Z-4],q[Z],q[Z-6]);break;case 101:te.commit(q[Z],q[Z-2],q[Z-4],q[Z-6]);break;case 102:te.commit(q[Z-2],q[Z],q[Z-4],q[Z-6]);break;case 103:te.commit(q[Z-4],q[Z-2],q[Z],q[Z-6]);break;case 104:te.commit(q[Z-4],q[Z],q[Z-2],q[Z-6]);break;case 105:te.commit(q[Z-2],q[Z-4],q[Z-6],q[Z]);break;case 106:te.commit(q[Z],q[Z-4],q[Z-6],q[Z-2]);break;case 107:te.commit(q[Z-2],q[Z],q[Z-6],q[Z-4]);break;case 108:te.commit(q[Z],q[Z-2],q[Z-6],q[Z-4]);break;case 109:te.commit(q[Z-4],q[Z-2],q[Z-6],q[Z]);break;case 110:te.commit(q[Z-4],q[Z],q[Z-6],q[Z-2]);break;case 111:this.$="";break;case 112:this.$=q[Z];break;case 113:this.$=te.commitType.NORMAL;break;case 114:this.$=te.commitType.REVERSE;break;case 115:this.$=te.commitType.HIGHLIGHT;break;case 118:te.parseDirective("%%{","open_directive");break;case 119:te.parseDirective(q[Z],"type_directive");break;case 120:q[Z]=q[Z].trim().replace(/'/g,'"'),te.parseDirective(q[Z],"arg_directive");break;case 121:te.parseDirective("}%%","close_directive","gitGraph");break}},table:[{3:1,4:2,5:3,6:i,8:o,14:l,46:8,50:h,55:p},{1:[3]},{3:10,4:2,5:3,6:i,8:o,14:l,46:8,50:h,55:p},{3:11,4:2,5:3,6:i,8:o,14:l,46:8,50:h,55:p},{7:12,8:m,9:[1,13],10:[1,14],11:15,14:b},t(x,[2,124]),t(x,[2,125]),t(x,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:m,11:15,14:b},{9:[1,21]},t(E,[2,10],{12:22,13:[1,23]}),t(L,[2,9]),{9:[1,25],48:24,53:I},t([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:m,11:15,14:b},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},t(L,[2,8]),t(F,[2,116]),{49:45,52:[1,46]},t(F,[2,121]),{1:[2,4]},{8:[1,47]},t(E,[2,11]),{4:48,8:o,14:l,55:p},t(E,[2,13]),t(W,[2,14]),t(W,[2,15]),t(W,[2,16]),{21:[1,49]},{23:[1,50]},t(W,[2,19]),t(W,[2,20]),t(W,[2,21]),{28:51,34:K,54:re},t(W,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:K,54:re},{33:[1,61],35:[1,62]},{28:63,34:K,54:re},{48:64,53:I},{53:[2,120]},{1:[2,5]},t(E,[2,12]),t(W,[2,17]),t(W,[2,18]),t(W,[2,22]),t(se,[2,122]),t(se,[2,123]),t(W,[2,46]),{34:[1,65]},{39:66,43:pe,44:he,45:Ce},{34:[1,70]},{34:[1,71]},t(W,[2,112]),t(W,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},t(W,[2,23],{30:[1,78]}),t(F,[2,117]),t(W,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),t(W,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),t(Le,[2,113]),t(Le,[2,114]),t(Le,[2,115]),t(W,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),t(W,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:pe,44:he,45:Ce},{34:[1,93]},t(W,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:pe,44:he,45:Ce},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:pe,44:he,45:Ce},{34:[1,106]},{34:[1,107]},{39:108,43:pe,44:he,45:Ce},{34:[1,109]},t(W,[2,31],{35:[1,111],38:[1,110]}),t(W,[2,32],{33:[1,113],35:[1,112]}),t(W,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},t(W,[2,24]),t(W,[2,49],{33:[1,120],42:[1,121]}),t(W,[2,53],{38:[1,122],42:[1,123]}),t(W,[2,63],{33:[1,125],38:[1,124]}),t(W,[2,50],{33:[1,126],42:[1,127]}),t(W,[2,55],{35:[1,128],42:[1,129]}),t(W,[2,66],{33:[1,131],35:[1,130]}),t(W,[2,52],{38:[1,132],42:[1,133]}),t(W,[2,54],{35:[1,134],42:[1,135]}),t(W,[2,67],{35:[1,137],38:[1,136]}),t(W,[2,64],{33:[1,139],38:[1,138]}),t(W,[2,65],{33:[1,141],35:[1,140]}),t(W,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:pe,44:he,45:Ce},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:pe,44:he,45:Ce},t(W,[2,26]),t(W,[2,27]),t(W,[2,28]),t(W,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:pe,44:he,45:Ce},{34:[1,153]},{39:154,43:pe,44:he,45:Ce},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:pe,44:he,45:Ce},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:pe,44:he,45:Ce},{34:[1,167]},{39:168,43:pe,44:he,45:Ce},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:pe,44:he,45:Ce},{34:[1,173]},t(W,[2,37],{35:[1,174]}),t(W,[2,38],{38:[1,175]}),t(W,[2,36],{33:[1,176]}),t(W,[2,39],{35:[1,177]}),t(W,[2,34],{38:[1,178]}),t(W,[2,35],{33:[1,179]}),t(W,[2,60],{42:[1,180]}),t(W,[2,73],{33:[1,181]}),t(W,[2,61],{42:[1,182]}),t(W,[2,84],{38:[1,183]}),t(W,[2,74],{33:[1,184]}),t(W,[2,83],{38:[1,185]}),t(W,[2,59],{42:[1,186]}),t(W,[2,72],{33:[1,187]}),t(W,[2,58],{42:[1,188]}),t(W,[2,78],{35:[1,189]}),t(W,[2,71],{33:[1,190]}),t(W,[2,77],{35:[1,191]}),t(W,[2,57],{42:[1,192]}),t(W,[2,85],{38:[1,193]}),t(W,[2,56],{42:[1,194]}),t(W,[2,79],{35:[1,195]}),t(W,[2,80],{35:[1,196]}),t(W,[2,86],{38:[1,197]}),t(W,[2,70],{33:[1,198]}),t(W,[2,81],{38:[1,199]}),t(W,[2,69],{33:[1,200]}),t(W,[2,75],{35:[1,201]}),t(W,[2,76],{35:[1,202]}),t(W,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:pe,44:he,45:Ce},{34:[1,206]},{34:[1,207]},{39:208,43:pe,44:he,45:Ce},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:pe,44:he,45:Ce},{34:[1,214]},{39:215,43:pe,44:he,45:Ce},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:pe,44:he,45:Ce},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:pe,44:he,45:Ce},{34:[1,228]},{39:229,43:pe,44:he,45:Ce},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:pe,44:he,45:Ce},t(W,[2,40]),t(W,[2,42]),t(W,[2,41]),t(W,[2,43]),t(W,[2,45]),t(W,[2,44]),t(W,[2,101]),t(W,[2,102]),t(W,[2,99]),t(W,[2,100]),t(W,[2,104]),t(W,[2,103]),t(W,[2,108]),t(W,[2,107]),t(W,[2,106]),t(W,[2,105]),t(W,[2,110]),t(W,[2,109]),t(W,[2,98]),t(W,[2,97]),t(W,[2,96]),t(W,[2,95]),t(W,[2,93]),t(W,[2,94]),t(W,[2,92]),t(W,[2,91]),t(W,[2,90]),t(W,[2,89]),t(W,[2,87]),t(W,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(xe,_e){if(_e.recoverable)this.trace(xe);else{var de=new Error(xe);throw de.hash=_e,de}},parse:function(xe){var _e=this,de=[0],te=[],be=[null],q=[],ot=this.table,Z="",Dt=0,xn=0,ln=2,Je=1,kt=q.slice.call(arguments,1),mt=Object.create(this.lexer),vt={yy:{}};for(var Pt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Pt)&&(vt.yy[Pt]=this.yy[Pt]);mt.setInput(xe,vt.yy),vt.yy.lexer=mt,vt.yy.parser=this,typeof mt.yylloc>"u"&&(mt.yylloc={});var rn=mt.yylloc;q.push(rn);var nt=mt.options&&mt.options.ranges;typeof vt.yy.parseError=="function"?this.parseError=vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ln(){var Wn;return Wn=te.pop()||mt.lex()||Je,typeof Wn!="number"&&(Wn instanceof Array&&(te=Wn,Wn=te.pop()),Wn=_e.symbols_[Wn]||Wn),Wn}for(var Ie,Be,et,Me,ke={},ge,ct,le,Ft;;){if(Be=de[de.length-1],this.defaultActions[Be]?et=this.defaultActions[Be]:((Ie===null||typeof Ie>"u")&&(Ie=Ln()),et=ot[Be]&&ot[Be][Ie]),typeof et>"u"||!et.length||!et[0]){var Oe="";Ft=[];for(ge in ot[Be])this.terminals_[ge]&&ge>ln&&Ft.push("'"+this.terminals_[ge]+"'");mt.showPosition?Oe="Parse error on line "+(Dt+1)+`:
`+mt.showPosition()+`
Expecting `+Ft.join(", ")+", got '"+(this.terminals_[Ie]||Ie)+"'":Oe="Parse error on line "+(Dt+1)+": Unexpected "+(Ie==Je?"end of input":"'"+(this.terminals_[Ie]||Ie)+"'"),this.parseError(Oe,{text:mt.match,token:this.terminals_[Ie]||Ie,line:mt.yylineno,loc:rn,expected:Ft})}if(et[0]instanceof Array&&et.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Be+", token: "+Ie);switch(et[0]){case 1:de.push(Ie),be.push(mt.yytext),q.push(mt.yylloc),de.push(et[1]),Ie=null,xn=mt.yyleng,Z=mt.yytext,Dt=mt.yylineno,rn=mt.yylloc;break;case 2:if(ct=this.productions_[et[1]][1],ke.$=be[be.length-ct],ke._$={first_line:q[q.length-(ct||1)].first_line,last_line:q[q.length-1].last_line,first_column:q[q.length-(ct||1)].first_column,last_column:q[q.length-1].last_column},nt&&(ke._$.range=[q[q.length-(ct||1)].range[0],q[q.length-1].range[1]]),Me=this.performAction.apply(ke,[Z,xn,Dt,vt.yy,et[1],be,q].concat(kt)),typeof Me<"u")return Me;ct&&(de=de.slice(0,-1*ct*2),be=be.slice(0,-1*ct),q=q.slice(0,-1*ct)),de.push(this.productions_[et[1]][0]),be.push(ke.$),q.push(ke._$),le=ot[de[de.length-2]][de[de.length-1]],de.push(le);break;case 3:return!0}}return!0}},je=function(){var ze={EOF:1,parseError:function(_e,de){if(this.yy.parser)this.yy.parser.parseError(_e,de);else throw new Error(_e)},setInput:function(xe,_e){return this.yy=_e||this.yy||{},this._input=xe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var xe=this._input[0];this.yytext+=xe,this.yyleng++,this.offset++,this.match+=xe,this.matched+=xe;var _e=xe.match(/(?:\r\n?|\n).*/g);return _e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),xe},unput:function(xe){var _e=xe.length,de=xe.split(/(?:\r\n?|\n)/g);this._input=xe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-_e),this.offset-=_e;var te=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),de.length-1&&(this.yylineno-=de.length-1);var be=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:de?(de.length===te.length?this.yylloc.first_column:0)+te[te.length-de.length].length-de[0].length:this.yylloc.first_column-_e},this.options.ranges&&(this.yylloc.range=[be[0],be[0]+this.yyleng-_e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(xe){this.unput(this.match.slice(xe))},pastInput:function(){var xe=this.matched.substr(0,this.matched.length-this.match.length);return(xe.length>20?"...":"")+xe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var xe=this.match;return xe.length<20&&(xe+=this._input.substr(0,20-xe.length)),(xe.substr(0,20)+(xe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var xe=this.pastInput(),_e=new Array(xe.length+1).join("-");return xe+this.upcomingInput()+`
`+_e+"^"},test_match:function(xe,_e){var de,te,be;if(this.options.backtrack_lexer&&(be={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(be.yylloc.range=this.yylloc.range.slice(0))),te=xe[0].match(/(?:\r\n?|\n).*/g),te&&(this.yylineno+=te.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:te?te[te.length-1].length-te[te.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+xe[0].length},this.yytext+=xe[0],this.match+=xe[0],this.matches=xe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(xe[0].length),this.matched+=xe[0],de=this.performAction.call(this,this.yy,this,_e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),de)return de;if(this._backtrack){for(var q in be)this[q]=be[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var xe,_e,de,te;this._more||(this.yytext="",this.match="");for(var be=this._currentRules(),q=0;q<be.length;q++)if(de=this._input.match(this.rules[be[q]]),de&&(!_e||de[0].length>_e[0].length)){if(_e=de,te=q,this.options.backtrack_lexer){if(xe=this.test_match(de,be[q]),xe!==!1)return xe;if(this._backtrack){_e=!1;continue}else return!1}else if(!this.options.flex)break}return _e?(xe=this.test_match(_e,be[te]),xe!==!1?xe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var _e=this.next();return _e||this.lex()},begin:function(_e){this.conditionStack.push(_e)},popState:function(){var _e=this.conditionStack.length-1;return _e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(_e){return _e=this.conditionStack.length-1-Math.abs(_e||0),_e>=0?this.conditionStack[_e]:"INITIAL"},pushState:function(_e){this.begin(_e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(_e,de,te,be){switch(te){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:break;case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:return 10;case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};return ze}();Ve.lexer=je;function Pe(){this.yy={}}return Pe.prototype=Ve,Ve.Parser=Pe,new Pe}();l4.parser=l4;const tX=l4,nX=t=>t.match(/^\s*gitGraph/)!==null;let c4="",b2="",u4="";const h4=t=>Wl(t,Qe()),Yl=function(){c4="",u4="",b2=""},pl=function(t){c4=h4(t).replace(/^\s+/g,"")},jl=function(){return c4||b2},$l=function(t){u4=h4(t).replace(/\n\s+/g,`
`)},ql=function(){return u4},Fu=function(t){b2=h4(t)},Bu=function(){return b2};let x2=Qe().gitGraph.mainBranchName,iX=Qe().gitGraph.mainBranchOrder,js={},ea=null,K1={};K1[x2]={name:x2,order:iX};let Ps={};Ps[x2]=ea;let ho=x2,vL="LR",Nf=0;function d4(){return G8({length:7})}const rX=function(t,i,o){ss.parseDirective(this,t,i,o)};function sX(t,i){const o=Object.create(null);return t.reduce((l,h)=>{const p=i(h);return o[p]||(o[p]=!0,l.push(h)),l},[])}const oX=function(t){vL=t};let yL={};const aX=function(t){y.debug("options str",t),t=t&&t.trim(),t=t||"{}";try{yL=JSON.parse(t)}catch(i){y.error("error while parsing gitGraph options",i.message)}},lX=function(){return yL},cX=function(t,i,o,l){y.debug("Entering commit:",t,i,o,l),i=Ai.sanitizeText(i,Qe()),t=Ai.sanitizeText(t,Qe()),l=Ai.sanitizeText(l,Qe());const h={id:i||Nf+"-"+d4(),message:t,seq:Nf++,type:o||J1.NORMAL,tag:l||"",parents:ea==null?[]:[ea.id],branch:ho};ea=h,js[h.id]=h,Ps[ho]=h.id,y.debug("in pushCommit "+h.id)},uX=function(t,i){if(t=Ai.sanitizeText(t,Qe()),Ps[t]===void 0)Ps[t]=ea!=null?ea.id:null,K1[t]={name:t,order:i?parseInt(i,10):null},_L(t),y.debug("in createBranch");else{let o=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")');throw o.hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},o}},hX=function(t,i,o,l){t=Ai.sanitizeText(t,Qe()),i=Ai.sanitizeText(i,Qe());const h=js[Ps[ho]],p=js[Ps[t]];if(ho===t){let b=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw b.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},b}else if(h===void 0||!h){let b=new Error('Incorrect usage of "merge". Current branch ('+ho+")has no commits");throw b.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},b}else if(Ps[t]===void 0){let b=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw b.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},b}else if(p===void 0||!p){let b=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw b.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},b}else if(h===p){let b=new Error('Incorrect usage of "merge". Both branches have same head');throw b.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},b}else if(i&&js[i]!==void 0){let b=new Error('Incorrect usage of "merge". Commit with id:'+i+" already exists, use different custom Id");throw b.hash={text:"merge "+t+i+o+l,token:"merge "+t+i+o+l,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+i+"_UNIQUE "+o+" "+l]},b}const m={id:i||Nf+"-"+d4(),message:"merged branch "+t+" into "+ho,seq:Nf++,parents:[ea==null?null:ea.id,Ps[t]],branch:ho,type:J1.MERGE,customType:o,customId:!!i,tag:l||""};ea=m,js[m.id]=m,Ps[ho]=m.id,y.debug(Ps),y.debug("in mergeBranch")},dX=function(t,i,o){if(y.debug("Entering cherryPick:",t,i,o),t=Ai.sanitizeText(t,Qe()),i=Ai.sanitizeText(i,Qe()),o=Ai.sanitizeText(o,Qe()),!t||js[t]===void 0){let p=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw p.hash={text:"cherryPick "+t+" "+i,token:"cherryPick "+t+" "+i,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},p}let l=js[t],h=l.branch;if(l.type===J1.MERGE){let p=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw p.hash={text:"cherryPick "+t+" "+i,token:"cherryPick "+t+" "+i,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},p}if(!i||js[i]===void 0){if(h===ho){let b=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw b.hash={text:"cherryPick "+t+" "+i,token:"cherryPick "+t+" "+i,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},b}const p=js[Ps[ho]];if(p===void 0||!p){let b=new Error('Incorrect usage of "cherry-pick". Current branch ('+ho+")has no commits");throw b.hash={text:"cherryPick "+t+" "+i,token:"cherryPick "+t+" "+i,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},b}const m={id:Nf+"-"+d4(),message:"cherry-picked "+l+" into "+ho,seq:Nf++,parents:[ea==null?null:ea.id,l.id],branch:ho,type:J1.CHERRY_PICK,tag:o!=null?o:"cherry-pick:"+l.id};ea=m,js[m.id]=m,Ps[ho]=m.id,y.debug(Ps),y.debug("in cherryPick")}},_L=function(t){if(t=Ai.sanitizeText(t,Qe()),Ps[t]===void 0){let i=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")');throw i.hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},i}else{ho=t;const i=Ps[ho];ea=js[i]}};function bL(t,i,o){const l=t.indexOf(i);l===-1?t.push(o):t.splice(l,1,o)}function xL(t){const i=t.reduce((h,p)=>h.seq>p.seq?h:p,t[0]);let o="";t.forEach(function(h){h===i?o+="	*":o+="	|"});const l=[o,i.id,i.seq];for(let h in Ps)Ps[h]===i.id&&l.push(h);if(y.debug(l.join(" ")),i.parents&&i.parents.length==2){const h=js[i.parents[0]];bL(t,i,h),t.push(js[i.parents[1]])}else{if(i.parents.length==0)return;{const h=js[i.parents];bL(t,i,h)}}t=sX(t,h=>h.id),xL(t)}const fX=function(){y.debug(js);const t=wL()[0];xL([t])},pX=function(){js={},ea=null;let t=Qe().gitGraph.mainBranchName,i=Qe().gitGraph.mainBranchOrder;Ps={},Ps[t]=null,K1={},K1[t]={name:t,order:i},ho=t,Nf=0,Yl()},mX=function(){return Object.values(K1).map((i,o)=>i.order!==null?i:{...i,order:parseFloat(`0.${o}`,10)}).sort((i,o)=>i.order-o.order).map(({name:i})=>({name:i}))},gX=function(){return Ps},vX=function(){return js},wL=function(){const t=Object.keys(js).map(function(i){return js[i]});return t.forEach(function(i){y.debug(i.id)}),t.sort((i,o)=>i.seq-o.seq),t},yX=function(){return ho},_X=function(){return vL},bX=function(){return ea},J1={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},xX={parseDirective:rX,getConfig:()=>Qe().gitGraph,setDirection:oX,setOptions:aX,getOptions:lX,commit:cX,branch:uX,merge:hX,cherryPick:dX,checkout:_L,prettyPrint:fX,clear:pX,getBranchesAsObjArray:mX,getBranches:gX,getCommits:vX,getCommitsArray:wL,getCurrentBranch:yX,getDirection:_X,getHead:bX,setAccTitle:pl,getAccTitle:jl,getAccDescription:ql,setAccDescription:$l,setDiagramTitle:Fu,getDiagramTitle:Bu,commitType:J1};let Q1={};const Wa={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},Of=8;let va={},w2={},k2=[],C2=0;const wX=()=>{va={},w2={},Q1={},C2=0,k2=[]},kX=t=>{const i=document.createElementNS("http://www.w3.org/2000/svg","text");let o=[];typeof t=="string"?o=t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?o=t:o=[];for(const l of o){const h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),h.setAttribute("dy","1em"),h.setAttribute("x","0"),h.setAttribute("class","row"),h.textContent=l.trim(),i.appendChild(h)}return i},kL=(t,i,o)=>{const l=Z1().gitGraph,h=t.append("g").attr("class","commit-bullets"),p=t.append("g").attr("class","commit-labels");let m=0;Object.keys(i).sort((E,L)=>i[E].seq-i[L].seq).forEach(E=>{const L=i[E],I=va[L.branch].pos,F=m+10;if(o){let W,K=L.customType!==void 0&&L.customType!==""?L.customType:L.type;switch(K){case Wa.NORMAL:W="commit-normal";break;case Wa.REVERSE:W="commit-reverse";break;case Wa.HIGHLIGHT:W="commit-highlight";break;case Wa.MERGE:W="commit-merge";break;case Wa.CHERRY_PICK:W="commit-cherry-pick";break;default:W="commit-normal"}if(K===Wa.HIGHLIGHT){const re=h.append("rect");re.attr("x",F-10),re.attr("y",I-10),re.attr("height",20),re.attr("width",20),re.attr("class",`commit ${L.id} commit-highlight${va[L.branch].index%Of} ${W}-outer`),h.append("rect").attr("x",F-6).attr("y",I-6).attr("height",12).attr("width",12).attr("class",`commit ${L.id} commit${va[L.branch].index%Of} ${W}-inner`)}else if(K===Wa.CHERRY_PICK)h.append("circle").attr("cx",F).attr("cy",I).attr("r",10).attr("class",`commit ${L.id} ${W}`),h.append("circle").attr("cx",F-3).attr("cy",I+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${L.id} ${W}`),h.append("circle").attr("cx",F+3).attr("cy",I+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${L.id} ${W}`),h.append("line").attr("x1",F+3).attr("y1",I+1).attr("x2",F).attr("y2",I-5).attr("stroke","#fff").attr("class",`commit ${L.id} ${W}`),h.append("line").attr("x1",F-3).attr("y1",I+1).attr("x2",F).attr("y2",I-5).attr("stroke","#fff").attr("class",`commit ${L.id} ${W}`);else{const re=h.append("circle");if(re.attr("cx",F),re.attr("cy",I),re.attr("r",L.type===Wa.MERGE?9:10),re.attr("class",`commit ${L.id} commit${va[L.branch].index%Of}`),K===Wa.MERGE){const se=h.append("circle");se.attr("cx",F),se.attr("cy",I),se.attr("r",6),se.attr("class",`commit ${W} ${L.id} commit${va[L.branch].index%Of}`)}K===Wa.REVERSE&&h.append("path").attr("d",`M ${F-5},${I-5}L${F+5},${I+5}M${F-5},${I+5}L${F+5},${I-5}`).attr("class",`commit ${W} ${L.id} commit${va[L.branch].index%Of}`)}}if(w2[L.id]={x:m+10,y:I},o){if(L.type!==Wa.CHERRY_PICK&&(L.customId&&L.type===Wa.MERGE||L.type!==Wa.MERGE)&&l.showCommitLabel){const re=p.append("g"),se=re.insert("rect").attr("class","commit-label-bkg"),pe=re.append("text").attr("x",m).attr("y",I+25).attr("class","commit-label").text(L.id);let he=pe.node().getBBox();if(se.attr("x",m+10-he.width/2-2).attr("y",I+13.5).attr("width",he.width+2*2).attr("height",he.height+2*2),pe.attr("x",m+10-he.width/2),l.rotateCommitLabel){let Ce=-7.5-(he.width+10)/25*9.5,Le=10+he.width/25*8.5;re.attr("transform","translate("+Ce+", "+Le+") rotate("+-45+", "+m+", "+I+")")}}if(L.tag){const re=p.insert("polygon"),se=p.append("circle"),pe=p.append("text").attr("y",I-16).attr("class","tag-label").text(L.tag);let he=pe.node().getBBox();pe.attr("x",m+10-he.width/2);const Ce=he.height/2,Le=I-19.2;re.attr("class","tag-label-bkg").attr("points",`
          ${m-he.width/2-4/2},${Le+2}
          ${m-he.width/2-4/2},${Le-2}
          ${m+10-he.width/2-4},${Le-Ce-2}
          ${m+10+he.width/2+4},${Le-Ce-2}
          ${m+10+he.width/2+4},${Le+Ce+2}
          ${m+10-he.width/2-4},${Le+Ce+2}`),se.attr("cx",m-he.width/2+4/2).attr("cy",Le).attr("r",1.5).attr("class","tag-hole")}}m+=50,m>C2&&(C2=m)})},CX=(t,i,o)=>Object.keys(o).filter(p=>o[p].branch===i.branch&&o[p].seq>t.seq&&o[p].seq<i.seq).length>0,f4=(t,i,o=0)=>{const l=t+Math.abs(t-i)/2;if(o>5)return l;if(k2.every(m=>Math.abs(m-l)>=10))return k2.push(l),l;const p=Math.abs(t-i);return f4(t,i-p/5,o+1)},SX=(t,i,o,l)=>{const h=w2[i.id],p=w2[o.id],m=CX(i,o,l);let b="",x="",E=0,L=0,I=va[o.branch].index,F;if(m){b="A 10 10, 0, 0, 0,",x="A 10 10, 0, 0, 1,",E=10,L=10,I=va[o.branch].index;const W=h.y<p.y?f4(h.y,p.y):f4(p.y,h.y);h.y<p.y?F=`M ${h.x} ${h.y} L ${h.x} ${W-E} ${b} ${h.x+L} ${W} L ${p.x-E} ${W} ${x} ${p.x} ${W+L} L ${p.x} ${p.y}`:F=`M ${h.x} ${h.y} L ${h.x} ${W+E} ${x} ${h.x+L} ${W} L ${p.x-E} ${W} ${b} ${p.x} ${W-L} L ${p.x} ${p.y}`}else h.y<p.y&&(b="A 20 20, 0, 0, 0,",E=20,L=20,I=va[o.branch].index,F=`M ${h.x} ${h.y} L ${h.x} ${p.y-E} ${b} ${h.x+L} ${p.y} L ${p.x} ${p.y}`),h.y>p.y&&(b="A 20 20, 0, 0, 0,",E=20,L=20,I=va[i.branch].index,F=`M ${h.x} ${h.y} L ${p.x-E} ${h.y} ${b} ${p.x} ${h.y-L} L ${p.x} ${p.y}`),h.y===p.y&&(I=va[i.branch].index,F=`M ${h.x} ${h.y} L ${h.x} ${p.y-E} ${b} ${h.x+L} ${p.y} L ${p.x} ${p.y}`);t.append("path").attr("d",F).attr("class","arrow arrow"+I%Of)},EX=(t,i)=>{const o=t.append("g").attr("class","commit-arrows");Object.keys(i).forEach(l=>{const h=i[l];h.parents&&h.parents.length>0&&h.parents.forEach(p=>{SX(o,i[p],h,i)})})},TX=(t,i)=>{const o=Z1().gitGraph,l=t.append("g");i.forEach((h,p)=>{const m=p%Of,b=va[h.name].pos,x=l.append("line");x.attr("x1",0),x.attr("y1",b),x.attr("x2",C2),x.attr("y2",b),x.attr("class","branch branch"+m),k2.push(b);let E=h.name;const L=kX(E),I=l.insert("rect"),W=l.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+m);W.node().appendChild(L);let K=L.getBBox();I.attr("class","branchLabelBkg label"+m).attr("rx",4).attr("ry",4).attr("x",-K.width-4-(o.rotateCommitLabel===!0?30:0)).attr("y",-K.height/2+8).attr("width",K.width+18).attr("height",K.height+4),W.attr("transform","translate("+(-K.width-14-(o.rotateCommitLabel===!0?30:0))+", "+(b-K.height/2-1)+")"),I.attr("transform","translate("+-19+", "+(b-K.height/2)+")")})},MX={draw:function(t,i,o,l){var h;wX();const p=Z1(),m=p.gitGraph;y.debug("in gitgraph renderer",t+`
`,"id:",i,o),Q1=l.db.getCommits();const b=l.db.getBranchesAsObjArray();let x=0;b.forEach((L,I)=>{va[L.name]={pos:x,index:I},x+=50+(m.rotateCommitLabel?40:0)});const E=dn(`[id="${i}"]`);kL(E,Q1,!1),m.showBranches&&TX(E,b),EX(E,Q1),kL(E,Q1,!0),Ii.insertTitle(E,"gitTitleText",m.titleTopMargin,l.db.getDiagramTitle()),mL(void 0,E,m.diagramPadding,(h=m.useMaxWidth)!=null?h:p.useMaxWidth)}},AX=t=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(i=>`
        .branch-label${i} { fill: ${t["gitBranchLabel"+i]}; }
        .commit${i} { stroke: ${t["git"+i]}; fill: ${t["git"+i]}; }
        .commit-highlight${i} { stroke: ${t["gitInv"+i]}; fill: ${t["gitInv"+i]}; }
        .label${i}  { fill: ${t["git"+i]}; }
        .arrow${i} { stroke: ${t["git"+i]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${t.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}
  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}
  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }
  .tag-hole { fill: ${t.textColor}; }

  .commit-merge {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }
  .commit-reverse {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
  }
`;var S2=function(){var t=function(Bn,sn,jt,bn){for(jt=jt||{},bn=Bn.length;bn--;jt[Bn[bn]]=sn);return jt},i=[1,6],o=[1,7],l=[1,8],h=[1,9],p=[1,16],m=[1,11],b=[1,12],x=[1,13],E=[1,14],L=[1,15],I=[1,27],F=[1,33],W=[1,34],K=[1,35],re=[1,36],se=[1,37],pe=[1,72],he=[1,73],Ce=[1,74],Le=[1,75],Ve=[1,76],je=[1,77],Pe=[1,78],ze=[1,38],xe=[1,39],_e=[1,40],de=[1,41],te=[1,42],be=[1,43],q=[1,44],ot=[1,45],Z=[1,46],Dt=[1,47],xn=[1,48],ln=[1,49],Je=[1,50],kt=[1,51],mt=[1,52],vt=[1,53],Pt=[1,54],rn=[1,55],nt=[1,56],Ln=[1,57],Ie=[1,59],Be=[1,60],et=[1,61],Me=[1,62],ke=[1,63],ge=[1,64],ct=[1,65],le=[1,66],Ft=[1,67],Oe=[1,68],Wn=[1,69],dt=[24,52],Cn=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],un=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Kt=[1,94],hn=[1,95],cn=[1,96],qt=[1,97],_t=[15,24,52],Si=[7,8,9,10,18,22,25,26,27,28],ni=[15,24,43,52],ei=[15,24,43,52,86,87,89,90],ii=[15,43],$n=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],ar={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(sn,jt,bn,tn,Un,bt,gi){var zt=bt.length-1;switch(Un){case 4:tn.setDirection("TB");break;case 5:tn.setDirection("BT");break;case 6:tn.setDirection("RL");break;case 7:tn.setDirection("LR");break;case 11:tn.parseDirective("%%{","open_directive");break;case 12:break;case 13:bt[zt]=bt[zt].trim().replace(/'/g,'"'),tn.parseDirective(bt[zt],"arg_directive");break;case 14:tn.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:tn.setC4Type(bt[zt-3]);break;case 26:tn.setTitle(bt[zt].substring(6)),this.$=bt[zt].substring(6);break;case 27:tn.setAccDescription(bt[zt].substring(15)),this.$=bt[zt].substring(15);break;case 28:this.$=bt[zt].trim(),tn.setTitle(this.$);break;case 29:case 30:this.$=bt[zt].trim(),tn.setAccDescription(this.$);break;case 35:case 36:bt[zt].splice(2,0,"ENTERPRISE"),tn.addPersonOrSystemBoundary(...bt[zt]),this.$=bt[zt];break;case 37:tn.addPersonOrSystemBoundary(...bt[zt]),this.$=bt[zt];break;case 38:bt[zt].splice(2,0,"CONTAINER"),tn.addContainerBoundary(...bt[zt]),this.$=bt[zt];break;case 39:tn.addDeploymentNode("node",...bt[zt]),this.$=bt[zt];break;case 40:tn.addDeploymentNode("nodeL",...bt[zt]),this.$=bt[zt];break;case 41:tn.addDeploymentNode("nodeR",...bt[zt]),this.$=bt[zt];break;case 42:tn.popBoundaryParseStack();break;case 46:tn.addPersonOrSystem("person",...bt[zt]),this.$=bt[zt];break;case 47:tn.addPersonOrSystem("external_person",...bt[zt]),this.$=bt[zt];break;case 48:tn.addPersonOrSystem("system",...bt[zt]),this.$=bt[zt];break;case 49:tn.addPersonOrSystem("system_db",...bt[zt]),this.$=bt[zt];break;case 50:tn.addPersonOrSystem("system_queue",...bt[zt]),this.$=bt[zt];break;case 51:tn.addPersonOrSystem("external_system",...bt[zt]),this.$=bt[zt];break;case 52:tn.addPersonOrSystem("external_system_db",...bt[zt]),this.$=bt[zt];break;case 53:tn.addPersonOrSystem("external_system_queue",...bt[zt]),this.$=bt[zt];break;case 54:tn.addContainer("container",...bt[zt]),this.$=bt[zt];break;case 55:tn.addContainer("container_db",...bt[zt]),this.$=bt[zt];break;case 56:tn.addContainer("container_queue",...bt[zt]),this.$=bt[zt];break;case 57:tn.addContainer("external_container",...bt[zt]),this.$=bt[zt];break;case 58:tn.addContainer("external_container_db",...bt[zt]),this.$=bt[zt];break;case 59:tn.addContainer("external_container_queue",...bt[zt]),this.$=bt[zt];break;case 60:tn.addComponent("component",...bt[zt]),this.$=bt[zt];break;case 61:tn.addComponent("component_db",...bt[zt]),this.$=bt[zt];break;case 62:tn.addComponent("component_queue",...bt[zt]),this.$=bt[zt];break;case 63:tn.addComponent("external_component",...bt[zt]),this.$=bt[zt];break;case 64:tn.addComponent("external_component_db",...bt[zt]),this.$=bt[zt];break;case 65:tn.addComponent("external_component_queue",...bt[zt]),this.$=bt[zt];break;case 67:tn.addRel("rel",...bt[zt]),this.$=bt[zt];break;case 68:tn.addRel("birel",...bt[zt]),this.$=bt[zt];break;case 69:tn.addRel("rel_u",...bt[zt]),this.$=bt[zt];break;case 70:tn.addRel("rel_d",...bt[zt]),this.$=bt[zt];break;case 71:tn.addRel("rel_l",...bt[zt]),this.$=bt[zt];break;case 72:tn.addRel("rel_r",...bt[zt]),this.$=bt[zt];break;case 73:tn.addRel("rel_b",...bt[zt]),this.$=bt[zt];break;case 74:bt[zt].splice(0,1),tn.addRel("rel",...bt[zt]),this.$=bt[zt];break;case 75:tn.updateElStyle("update_el_style",...bt[zt]),this.$=bt[zt];break;case 76:tn.updateRelStyle("update_rel_style",...bt[zt]),this.$=bt[zt];break;case 77:tn.updateLayoutConfig("update_layout_config",...bt[zt]),this.$=bt[zt];break;case 78:this.$=[bt[zt]];break;case 79:bt[zt].unshift(bt[zt-1]),this.$=bt[zt];break;case 80:case 82:this.$=bt[zt].trim();break;case 81:let di={};di[bt[zt-1].trim()]=bt[zt].trim(),this.$=di;break;case 83:this.$="";break}},table:[{3:1,4:2,5:3,6:4,7:i,8:o,9:l,10:h,11:5,12:10,18:p,22:m,25:b,26:x,27:E,28:L},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:i,8:o,9:l,10:h,11:5,12:10,18:p,22:m,25:b,26:x,27:E,28:L},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:I},t([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:F,33:W,34:K,36:re,38:se,39:58,40:70,42:71,44:pe,46:he,47:Ce,48:Le,49:Ve,50:je,51:Pe,53:32,54:ze,55:xe,56:_e,57:de,58:te,59:be,60:q,61:ot,62:Z,63:Dt,64:xn,65:ln,66:Je,67:kt,68:mt,69:vt,70:Pt,71:rn,72:nt,73:Ln,74:Ie,75:Be,76:et,77:Me,78:ke,79:ge,80:ct,81:le,82:Ft,83:Oe,84:Wn},{23:79,29:29,30:30,31:31,32:F,33:W,34:K,36:re,38:se,39:58,40:70,42:71,44:pe,46:he,47:Ce,48:Le,49:Ve,50:je,51:Pe,53:32,54:ze,55:xe,56:_e,57:de,58:te,59:be,60:q,61:ot,62:Z,63:Dt,64:xn,65:ln,66:Je,67:kt,68:mt,69:vt,70:Pt,71:rn,72:nt,73:Ln,74:Ie,75:Be,76:et,77:Me,78:ke,79:ge,80:ct,81:le,82:Ft,83:Oe,84:Wn},{23:80,29:29,30:30,31:31,32:F,33:W,34:K,36:re,38:se,39:58,40:70,42:71,44:pe,46:he,47:Ce,48:Le,49:Ve,50:je,51:Pe,53:32,54:ze,55:xe,56:_e,57:de,58:te,59:be,60:q,61:ot,62:Z,63:Dt,64:xn,65:ln,66:Je,67:kt,68:mt,69:vt,70:Pt,71:rn,72:nt,73:Ln,74:Ie,75:Be,76:et,77:Me,78:ke,79:ge,80:ct,81:le,82:Ft,83:Oe,84:Wn},{23:81,29:29,30:30,31:31,32:F,33:W,34:K,36:re,38:se,39:58,40:70,42:71,44:pe,46:he,47:Ce,48:Le,49:Ve,50:je,51:Pe,53:32,54:ze,55:xe,56:_e,57:de,58:te,59:be,60:q,61:ot,62:Z,63:Dt,64:xn,65:ln,66:Je,67:kt,68:mt,69:vt,70:Pt,71:rn,72:nt,73:Ln,74:Ie,75:Be,76:et,77:Me,78:ke,79:ge,80:ct,81:le,82:Ft,83:Oe,84:Wn},{23:82,29:29,30:30,31:31,32:F,33:W,34:K,36:re,38:se,39:58,40:70,42:71,44:pe,46:he,47:Ce,48:Le,49:Ve,50:je,51:Pe,53:32,54:ze,55:xe,56:_e,57:de,58:te,59:be,60:q,61:ot,62:Z,63:Dt,64:xn,65:ln,66:Je,67:kt,68:mt,69:vt,70:Pt,71:rn,72:nt,73:Ln,74:Ie,75:Be,76:et,77:Me,78:ke,79:ge,80:ct,81:le,82:Ft,83:Oe,84:Wn},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},t(dt,[2,20],{53:32,39:58,40:70,42:71,30:87,44:pe,46:he,47:Ce,48:Le,49:Ve,50:je,51:Pe,54:ze,55:xe,56:_e,57:de,58:te,59:be,60:q,61:ot,62:Z,63:Dt,64:xn,65:ln,66:Je,67:kt,68:mt,69:vt,70:Pt,71:rn,72:nt,73:Ln,74:Ie,75:Be,76:et,77:Me,78:ke,79:ge,80:ct,81:le,82:Ft,83:Oe,84:Wn}),t(dt,[2,21]),t(Cn,[2,23],{15:[1,88]}),t(dt,[2,43],{15:[1,89]}),t(un,[2,26]),t(un,[2,27]),{35:[1,90]},{37:[1,91]},t(un,[2,30]),{45:92,85:93,86:Kt,87:hn,89:cn,90:qt},{45:98,85:93,86:Kt,87:hn,89:cn,90:qt},{45:99,85:93,86:Kt,87:hn,89:cn,90:qt},{45:100,85:93,86:Kt,87:hn,89:cn,90:qt},{45:101,85:93,86:Kt,87:hn,89:cn,90:qt},{45:102,85:93,86:Kt,87:hn,89:cn,90:qt},{45:103,85:93,86:Kt,87:hn,89:cn,90:qt},{45:104,85:93,86:Kt,87:hn,89:cn,90:qt},{45:105,85:93,86:Kt,87:hn,89:cn,90:qt},{45:106,85:93,86:Kt,87:hn,89:cn,90:qt},{45:107,85:93,86:Kt,87:hn,89:cn,90:qt},{45:108,85:93,86:Kt,87:hn,89:cn,90:qt},{45:109,85:93,86:Kt,87:hn,89:cn,90:qt},{45:110,85:93,86:Kt,87:hn,89:cn,90:qt},{45:111,85:93,86:Kt,87:hn,89:cn,90:qt},{45:112,85:93,86:Kt,87:hn,89:cn,90:qt},{45:113,85:93,86:Kt,87:hn,89:cn,90:qt},{45:114,85:93,86:Kt,87:hn,89:cn,90:qt},{45:115,85:93,86:Kt,87:hn,89:cn,90:qt},{45:116,85:93,86:Kt,87:hn,89:cn,90:qt},t(_t,[2,66]),{45:117,85:93,86:Kt,87:hn,89:cn,90:qt},{45:118,85:93,86:Kt,87:hn,89:cn,90:qt},{45:119,85:93,86:Kt,87:hn,89:cn,90:qt},{45:120,85:93,86:Kt,87:hn,89:cn,90:qt},{45:121,85:93,86:Kt,87:hn,89:cn,90:qt},{45:122,85:93,86:Kt,87:hn,89:cn,90:qt},{45:123,85:93,86:Kt,87:hn,89:cn,90:qt},{45:124,85:93,86:Kt,87:hn,89:cn,90:qt},{45:125,85:93,86:Kt,87:hn,89:cn,90:qt},{45:126,85:93,86:Kt,87:hn,89:cn,90:qt},{45:127,85:93,86:Kt,87:hn,89:cn,90:qt},{30:128,39:58,40:70,42:71,44:pe,46:he,47:Ce,48:Le,49:Ve,50:je,51:Pe,53:32,54:ze,55:xe,56:_e,57:de,58:te,59:be,60:q,61:ot,62:Z,63:Dt,64:xn,65:ln,66:Je,67:kt,68:mt,69:vt,70:Pt,71:rn,72:nt,73:Ln,74:Ie,75:Be,76:et,77:Me,78:ke,79:ge,80:ct,81:le,82:Ft,83:Oe,84:Wn},{15:[1,130],43:[1,129]},{45:131,85:93,86:Kt,87:hn,89:cn,90:qt},{45:132,85:93,86:Kt,87:hn,89:cn,90:qt},{45:133,85:93,86:Kt,87:hn,89:cn,90:qt},{45:134,85:93,86:Kt,87:hn,89:cn,90:qt},{45:135,85:93,86:Kt,87:hn,89:cn,90:qt},{45:136,85:93,86:Kt,87:hn,89:cn,90:qt},{45:137,85:93,86:Kt,87:hn,89:cn,90:qt},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},t(Si,[2,9]),{14:142,21:I},{21:[2,13]},{1:[2,15]},t(dt,[2,22]),t(Cn,[2,24],{31:31,29:143,32:F,33:W,34:K,36:re,38:se}),t(dt,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:F,33:W,34:K,36:re,38:se,44:pe,46:he,47:Ce,48:Le,49:Ve,50:je,51:Pe,54:ze,55:xe,56:_e,57:de,58:te,59:be,60:q,61:ot,62:Z,63:Dt,64:xn,65:ln,66:Je,67:kt,68:mt,69:vt,70:Pt,71:rn,72:nt,73:Ln,74:Ie,75:Be,76:et,77:Me,78:ke,79:ge,80:ct,81:le,82:Ft,83:Oe,84:Wn}),t(un,[2,28]),t(un,[2,29]),t(_t,[2,46]),t(ni,[2,78],{85:93,45:145,86:Kt,87:hn,89:cn,90:qt}),t(ei,[2,80]),{88:[1,146]},t(ei,[2,82]),t(ei,[2,83]),t(_t,[2,47]),t(_t,[2,48]),t(_t,[2,49]),t(_t,[2,50]),t(_t,[2,51]),t(_t,[2,52]),t(_t,[2,53]),t(_t,[2,54]),t(_t,[2,55]),t(_t,[2,56]),t(_t,[2,57]),t(_t,[2,58]),t(_t,[2,59]),t(_t,[2,60]),t(_t,[2,61]),t(_t,[2,62]),t(_t,[2,63]),t(_t,[2,64]),t(_t,[2,65]),t(_t,[2,67]),t(_t,[2,68]),t(_t,[2,69]),t(_t,[2,70]),t(_t,[2,71]),t(_t,[2,72]),t(_t,[2,73]),t(_t,[2,74]),t(_t,[2,75]),t(_t,[2,76]),t(_t,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},t(ii,[2,35]),t(ii,[2,36]),t(ii,[2,37]),t(ii,[2,38]),t(ii,[2,39]),t(ii,[2,40]),t(ii,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},t(Cn,[2,25]),t(dt,[2,45]),t(ni,[2,79]),t(ei,[2,81]),t(_t,[2,31]),t(_t,[2,42]),t($n,[2,32]),t($n,[2,33],{15:[1,152]}),t(Si,[2,10]),t($n,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(sn,jt){if(jt.recoverable)this.trace(sn);else{var bn=new Error(sn);throw bn.hash=jt,bn}},parse:function(sn){var jt=this,bn=[0],tn=[],Un=[null],bt=[],gi=this.table,zt="",di=0,Ri=0,Fi=2,Bi=1,Hi=bt.slice.call(arguments,1),ti=Object.create(this.lexer),vi={yy:{}};for(var Di in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Di)&&(vi.yy[Di]=this.yy[Di]);ti.setInput(sn,vi.yy),vi.yy.lexer=ti,vi.yy.parser=this,typeof ti.yylloc>"u"&&(ti.yylloc={});var ui=ti.yylloc;bt.push(ui);var nc=ti.options&&ti.options.ranges;typeof vi.yy.parseError=="function"?this.parseError=vi.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ga(){var rt;return rt=tn.pop()||ti.lex()||Bi,typeof rt!="number"&&(rt instanceof Array&&(tn=rt,rt=tn.pop()),rt=jt.symbols_[rt]||rt),rt}for(var Er,bi,Fr,Hr,Kr={},Jr,Br,vs,Os;;){if(bi=bn[bn.length-1],this.defaultActions[bi]?Fr=this.defaultActions[bi]:((Er===null||typeof Er>"u")&&(Er=Ga()),Fr=gi[bi]&&gi[bi][Er]),typeof Fr>"u"||!Fr.length||!Fr[0]){var Gn="";Os=[];for(Jr in gi[bi])this.terminals_[Jr]&&Jr>Fi&&Os.push("'"+this.terminals_[Jr]+"'");ti.showPosition?Gn="Parse error on line "+(di+1)+`:
`+ti.showPosition()+`
Expecting `+Os.join(", ")+", got '"+(this.terminals_[Er]||Er)+"'":Gn="Parse error on line "+(di+1)+": Unexpected "+(Er==Bi?"end of input":"'"+(this.terminals_[Er]||Er)+"'"),this.parseError(Gn,{text:ti.match,token:this.terminals_[Er]||Er,line:ti.yylineno,loc:ui,expected:Os})}if(Fr[0]instanceof Array&&Fr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+bi+", token: "+Er);switch(Fr[0]){case 1:bn.push(Er),Un.push(ti.yytext),bt.push(ti.yylloc),bn.push(Fr[1]),Er=null,Ri=ti.yyleng,zt=ti.yytext,di=ti.yylineno,ui=ti.yylloc;break;case 2:if(Br=this.productions_[Fr[1]][1],Kr.$=Un[Un.length-Br],Kr._$={first_line:bt[bt.length-(Br||1)].first_line,last_line:bt[bt.length-1].last_line,first_column:bt[bt.length-(Br||1)].first_column,last_column:bt[bt.length-1].last_column},nc&&(Kr._$.range=[bt[bt.length-(Br||1)].range[0],bt[bt.length-1].range[1]]),Hr=this.performAction.apply(Kr,[zt,Ri,di,vi.yy,Fr[1],Un,bt].concat(Hi)),typeof Hr<"u")return Hr;Br&&(bn=bn.slice(0,-1*Br*2),Un=Un.slice(0,-1*Br),bt=bt.slice(0,-1*Br)),bn.push(this.productions_[Fr[1]][0]),Un.push(Kr.$),bt.push(Kr._$),vs=gi[bn[bn.length-2]][bn[bn.length-1]],bn.push(vs);break;case 3:return!0}}return!0}},Yn=function(){var Bn={EOF:1,parseError:function(jt,bn){if(this.yy.parser)this.yy.parser.parseError(jt,bn);else throw new Error(jt)},setInput:function(sn,jt){return this.yy=jt||this.yy||{},this._input=sn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var sn=this._input[0];this.yytext+=sn,this.yyleng++,this.offset++,this.match+=sn,this.matched+=sn;var jt=sn.match(/(?:\r\n?|\n).*/g);return jt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),sn},unput:function(sn){var jt=sn.length,bn=sn.split(/(?:\r\n?|\n)/g);this._input=sn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-jt),this.offset-=jt;var tn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),bn.length-1&&(this.yylineno-=bn.length-1);var Un=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:bn?(bn.length===tn.length?this.yylloc.first_column:0)+tn[tn.length-bn.length].length-bn[0].length:this.yylloc.first_column-jt},this.options.ranges&&(this.yylloc.range=[Un[0],Un[0]+this.yyleng-jt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(sn){this.unput(this.match.slice(sn))},pastInput:function(){var sn=this.matched.substr(0,this.matched.length-this.match.length);return(sn.length>20?"...":"")+sn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var sn=this.match;return sn.length<20&&(sn+=this._input.substr(0,20-sn.length)),(sn.substr(0,20)+(sn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var sn=this.pastInput(),jt=new Array(sn.length+1).join("-");return sn+this.upcomingInput()+`
`+jt+"^"},test_match:function(sn,jt){var bn,tn,Un;if(this.options.backtrack_lexer&&(Un={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Un.yylloc.range=this.yylloc.range.slice(0))),tn=sn[0].match(/(?:\r\n?|\n).*/g),tn&&(this.yylineno+=tn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:tn?tn[tn.length-1].length-tn[tn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+sn[0].length},this.yytext+=sn[0],this.match+=sn[0],this.matches=sn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(sn[0].length),this.matched+=sn[0],bn=this.performAction.call(this,this.yy,this,jt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),bn)return bn;if(this._backtrack){for(var bt in Un)this[bt]=Un[bt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var sn,jt,bn,tn;this._more||(this.yytext="",this.match="");for(var Un=this._currentRules(),bt=0;bt<Un.length;bt++)if(bn=this._input.match(this.rules[Un[bt]]),bn&&(!jt||bn[0].length>jt[0].length)){if(jt=bn,tn=bt,this.options.backtrack_lexer){if(sn=this.test_match(bn,Un[bt]),sn!==!1)return sn;if(this._backtrack){jt=!1;continue}else return!1}else if(!this.options.flex)break}return jt?(sn=this.test_match(jt,Un[tn]),sn!==!1?sn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var jt=this.next();return jt||this.lex()},begin:function(jt){this.conditionStack.push(jt)},popState:function(){var jt=this.conditionStack.length-1;return jt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(jt){return jt=this.conditionStack.length-1-Math.abs(jt||0),jt>=0?this.conditionStack[jt]:"INITIAL"},pushState:function(jt){this.begin(jt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(jt,bn,tn,Un){switch(tn){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:return this.begin("node"),49;case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:return this.begin("rel_u"),76;case 58:return this.begin("rel_u"),76;case 59:return this.begin("rel_d"),77;case 60:return this.begin("rel_d"),77;case 61:return this.begin("rel_l"),78;case 62:return this.begin("rel_l"),78;case 63:return this.begin("rel_r"),79;case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};return Bn}();ar.lexer=Yn;function zn(){this.yy={}}return zn.prototype=ar,ar.Parser=zn,new zn}();S2.parser=S2;const LX=S2,RX=t=>t.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)!==null;let Xl=[],sd=[""],ta="global",Zl="",Hc=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],ev=[],p4="",m4=!1,E2=4,T2=2;var CL;const PX=function(){return CL},IX=function(t){CL=Wl(t,Qe())},DX=function(t,i,o){ss.parseDirective(this,t,i,o)},NX=function(t,i,o,l,h,p,m,b,x){if(t==null||i===void 0||i===null||o===void 0||o===null||l===void 0||l===null)return;let E={};const L=ev.find(I=>I.from===i&&I.to===o);if(L?E=L:ev.push(E),E.type=t,E.from=i,E.to=o,E.label={text:l},h==null)E.techn={text:""};else if(typeof h=="object"){let[I,F]=Object.entries(h)[0];E[I]={text:F}}else E.techn={text:h};if(p==null)E.descr={text:""};else if(typeof p=="object"){let[I,F]=Object.entries(p)[0];E[I]={text:F}}else E.descr={text:p};if(typeof m=="object"){let[I,F]=Object.entries(m)[0];E[I]=F}else E.sprite=m;if(typeof b=="object"){let[I,F]=Object.entries(b)[0];E[I]=F}else E.tags=b;if(typeof x=="object"){let[I,F]=Object.entries(x)[0];E[I]=F}else E.link=x;E.wrap=od()},OX=function(t,i,o,l,h,p,m){if(i===null||o===null)return;let b={};const x=Xl.find(E=>E.alias===i);if(x&&i===x.alias?b=x:(b.alias=i,Xl.push(b)),o==null?b.label={text:""}:b.label={text:o},l==null)b.descr={text:""};else if(typeof l=="object"){let[E,L]=Object.entries(l)[0];b[E]={text:L}}else b.descr={text:l};if(typeof h=="object"){let[E,L]=Object.entries(h)[0];b[E]=L}else b.sprite=h;if(typeof p=="object"){let[E,L]=Object.entries(p)[0];b[E]=L}else b.tags=p;if(typeof m=="object"){let[E,L]=Object.entries(m)[0];b[E]=L}else b.link=m;b.typeC4Shape={text:t},b.parentBoundary=ta,b.wrap=od()},FX=function(t,i,o,l,h,p,m,b){if(i===null||o===null)return;let x={};const E=Xl.find(L=>L.alias===i);if(E&&i===E.alias?x=E:(x.alias=i,Xl.push(x)),o==null?x.label={text:""}:x.label={text:o},l==null)x.techn={text:""};else if(typeof l=="object"){let[L,I]=Object.entries(l)[0];x[L]={text:I}}else x.techn={text:l};if(h==null)x.descr={text:""};else if(typeof h=="object"){let[L,I]=Object.entries(h)[0];x[L]={text:I}}else x.descr={text:h};if(typeof p=="object"){let[L,I]=Object.entries(p)[0];x[L]=I}else x.sprite=p;if(typeof m=="object"){let[L,I]=Object.entries(m)[0];x[L]=I}else x.tags=m;if(typeof b=="object"){let[L,I]=Object.entries(b)[0];x[L]=I}else x.link=b;x.wrap=od(),x.typeC4Shape={text:t},x.parentBoundary=ta},BX=function(t,i,o,l,h,p,m,b){if(i===null||o===null)return;let x={};const E=Xl.find(L=>L.alias===i);if(E&&i===E.alias?x=E:(x.alias=i,Xl.push(x)),o==null?x.label={text:""}:x.label={text:o},l==null)x.techn={text:""};else if(typeof l=="object"){let[L,I]=Object.entries(l)[0];x[L]={text:I}}else x.techn={text:l};if(h==null)x.descr={text:""};else if(typeof h=="object"){let[L,I]=Object.entries(h)[0];x[L]={text:I}}else x.descr={text:h};if(typeof p=="object"){let[L,I]=Object.entries(p)[0];x[L]=I}else x.sprite=p;if(typeof m=="object"){let[L,I]=Object.entries(m)[0];x[L]=I}else x.tags=m;if(typeof b=="object"){let[L,I]=Object.entries(b)[0];x[L]=I}else x.link=b;x.wrap=od(),x.typeC4Shape={text:t},x.parentBoundary=ta},VX=function(t,i,o,l,h){if(t===null||i===null)return;let p={};const m=Hc.find(b=>b.alias===t);if(m&&t===m.alias?p=m:(p.alias=t,Hc.push(p)),i==null?p.label={text:""}:p.label={text:i},o==null)p.type={text:"system"};else if(typeof o=="object"){let[b,x]=Object.entries(o)[0];p[b]={text:x}}else p.type={text:o};if(typeof l=="object"){let[b,x]=Object.entries(l)[0];p[b]=x}else p.tags=l;if(typeof h=="object"){let[b,x]=Object.entries(h)[0];p[b]=x}else p.link=h;p.parentBoundary=ta,p.wrap=od(),Zl=ta,ta=t,sd.push(Zl)},WX=function(t,i,o,l,h){if(t===null||i===null)return;let p={};const m=Hc.find(b=>b.alias===t);if(m&&t===m.alias?p=m:(p.alias=t,Hc.push(p)),i==null?p.label={text:""}:p.label={text:i},o==null)p.type={text:"container"};else if(typeof o=="object"){let[b,x]=Object.entries(o)[0];p[b]={text:x}}else p.type={text:o};if(typeof l=="object"){let[b,x]=Object.entries(l)[0];p[b]=x}else p.tags=l;if(typeof h=="object"){let[b,x]=Object.entries(h)[0];p[b]=x}else p.link=h;p.parentBoundary=ta,p.wrap=od(),Zl=ta,ta=t,sd.push(Zl)},zX=function(t,i,o,l,h,p,m,b){if(i===null||o===null)return;let x={};const E=Hc.find(L=>L.alias===i);if(E&&i===E.alias?x=E:(x.alias=i,Hc.push(x)),o==null?x.label={text:""}:x.label={text:o},l==null)x.type={text:"node"};else if(typeof l=="object"){let[L,I]=Object.entries(l)[0];x[L]={text:I}}else x.type={text:l};if(h==null)x.descr={text:""};else if(typeof h=="object"){let[L,I]=Object.entries(h)[0];x[L]={text:I}}else x.descr={text:h};if(typeof m=="object"){let[L,I]=Object.entries(m)[0];x[L]=I}else x.tags=m;if(typeof b=="object"){let[L,I]=Object.entries(b)[0];x[L]=I}else x.link=b;x.nodeType=t,x.parentBoundary=ta,x.wrap=od(),Zl=ta,ta=i,sd.push(Zl)},UX=function(){ta=Zl,sd.pop(),Zl=sd.pop(),sd.push(Zl)},GX=function(t,i,o,l,h,p,m,b,x,E,L){let I=Xl.find(F=>F.alias===i);if(!(I===void 0&&(I=Hc.find(F=>F.alias===i),I===void 0))){if(o!=null)if(typeof o=="object"){let[F,W]=Object.entries(o)[0];I[F]=W}else I.bgColor=o;if(l!=null)if(typeof l=="object"){let[F,W]=Object.entries(l)[0];I[F]=W}else I.fontColor=l;if(h!=null)if(typeof h=="object"){let[F,W]=Object.entries(h)[0];I[F]=W}else I.borderColor=h;if(p!=null)if(typeof p=="object"){let[F,W]=Object.entries(p)[0];I[F]=W}else I.shadowing=p;if(m!=null)if(typeof m=="object"){let[F,W]=Object.entries(m)[0];I[F]=W}else I.shape=m;if(b!=null)if(typeof b=="object"){let[F,W]=Object.entries(b)[0];I[F]=W}else I.sprite=b;if(x!=null)if(typeof x=="object"){let[F,W]=Object.entries(x)[0];I[F]=W}else I.techn=x;if(E!=null)if(typeof E=="object"){let[F,W]=Object.entries(E)[0];I[F]=W}else I.legendText=E;if(L!=null)if(typeof L=="object"){let[F,W]=Object.entries(L)[0];I[F]=W}else I.legendSprite=L}},HX=function(t,i,o,l,h,p,m){const b=ev.find(x=>x.from===i&&x.to===o);if(b!==void 0){if(l!=null)if(typeof l=="object"){let[x,E]=Object.entries(l)[0];b[x]=E}else b.textColor=l;if(h!=null)if(typeof h=="object"){let[x,E]=Object.entries(h)[0];b[x]=E}else b.lineColor=h;if(p!=null)if(typeof p=="object"){let[x,E]=Object.entries(p)[0];b[x]=parseInt(E)}else b.offsetX=parseInt(p);if(m!=null)if(typeof m=="object"){let[x,E]=Object.entries(m)[0];b[x]=parseInt(E)}else b.offsetY=parseInt(m)}},YX=function(t,i,o){let l=E2,h=T2;if(typeof i=="object"){const p=Object.values(i)[0];l=parseInt(p)}else l=parseInt(i);if(typeof o=="object"){const p=Object.values(o)[0];h=parseInt(p)}else h=parseInt(o);l>=1&&(E2=l),h>=1&&(T2=h)},jX=function(){return E2},$X=function(){return T2},qX=function(){return ta},XX=function(){return Zl},SL=function(t){return t==null?Xl:Xl.filter(i=>i.parentBoundary===t)},ZX=function(t){return Xl.find(i=>i.alias===t)},KX=function(t){return Object.keys(SL(t))},JX=function(t){return t==null?Hc:Hc.filter(i=>i.parentBoundary===t)},QX=function(){return ev},eZ=function(){return p4},tZ=function(t){m4=t},od=function(){return m4},EL={addPersonOrSystem:OX,addPersonOrSystemBoundary:VX,addContainer:FX,addContainerBoundary:WX,addComponent:BX,addDeploymentNode:zX,popBoundaryParseStack:UX,addRel:NX,updateElStyle:GX,updateRelStyle:HX,updateLayoutConfig:YX,autoWrap:od,setWrap:tZ,getC4ShapeArray:SL,getC4Shape:ZX,getC4ShapeKeys:KX,getBoundarys:JX,getCurrentBoundaryParse:qX,getParentBoundaryParse:XX,getRels:QX,getTitle:eZ,getC4Type:PX,getC4ShapeInRow:jX,getC4BoundaryInRow:$X,setAccTitle:pl,getAccTitle:jl,getAccDescription:ql,setAccDescription:$l,parseDirective:DX,getConfig:()=>Qe().c4,clear:function(){Xl=[],Hc=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Zl="",ta="global",sd=[""],ev=[],sd=[""],p4="",m4=!1,E2=4,T2=2},LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:function(t){p4=Wl(t,Qe())},setC4Type:IX},g4=function(t,i){const o=t.append("rect");if(o.attr("x",i.x),o.attr("y",i.y),o.attr("fill",i.fill),o.attr("stroke",i.stroke),o.attr("width",i.width),o.attr("height",i.height),o.attr("rx",i.rx),o.attr("ry",i.ry),i.attrs!=="undefined"&&i.attrs!==null)for(let l in i.attrs)o.attr(l,i.attrs[l]);return i.class!=="undefined"&&o.attr("class",i.class),o},TL=function(t,i,o,l,h,p){const m=t.append("image");m.attr("width",i),m.attr("height",o),m.attr("x",l),m.attr("y",h);let b=p.startsWith("data:image/png;base64")?p:A(p);m.attr("xlink:href",b)},nZ=(t,i,o)=>{const l=t.append("g");let h=0;for(let p of i){let m=p.textColor?p.textColor:"#444444",b=p.lineColor?p.lineColor:"#444444",x=p.offsetX?parseInt(p.offsetX):0,E=p.offsetY?parseInt(p.offsetY):0,L="";if(h===0){let F=l.append("line");F.attr("x1",p.startPoint.x),F.attr("y1",p.startPoint.y),F.attr("x2",p.endPoint.x),F.attr("y2",p.endPoint.y),F.attr("stroke-width","1"),F.attr("stroke",b),F.style("fill","none"),p.type!=="rel_b"&&F.attr("marker-end","url("+L+"#arrowhead)"),(p.type==="birel"||p.type==="rel_b")&&F.attr("marker-start","url("+L+"#arrowend)"),h=-1}else{let F=l.append("path");F.attr("fill","none").attr("stroke-width","1").attr("stroke",b).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",p.startPoint.x).replaceAll("starty",p.startPoint.y).replaceAll("controlx",p.startPoint.x+(p.endPoint.x-p.startPoint.x)/2-(p.endPoint.x-p.startPoint.x)/4).replaceAll("controly",p.startPoint.y+(p.endPoint.y-p.startPoint.y)/2).replaceAll("stopx",p.endPoint.x).replaceAll("stopy",p.endPoint.y)),p.type!=="rel_b"&&F.attr("marker-end","url("+L+"#arrowhead)"),(p.type==="birel"||p.type==="rel_b")&&F.attr("marker-start","url("+L+"#arrowend)")}let I=o.messageFont();Vu(o)(p.label.text,l,Math.min(p.startPoint.x,p.endPoint.x)+Math.abs(p.endPoint.x-p.startPoint.x)/2+x,Math.min(p.startPoint.y,p.endPoint.y)+Math.abs(p.endPoint.y-p.startPoint.y)/2+E,p.label.width,p.label.height,{fill:m},I),p.techn&&p.techn.text!==""&&(I=o.messageFont(),Vu(o)("["+p.techn.text+"]",l,Math.min(p.startPoint.x,p.endPoint.x)+Math.abs(p.endPoint.x-p.startPoint.x)/2+x,Math.min(p.startPoint.y,p.endPoint.y)+Math.abs(p.endPoint.y-p.startPoint.y)/2+o.messageFontSize+5+E,Math.max(p.label.width,p.techn.width),p.techn.height,{fill:m,"font-style":"italic"},I))}},iZ=function(t,i,o){const l=t.append("g");let h=i.bgColor?i.bgColor:"none",p=i.borderColor?i.borderColor:"#444444",m=i.fontColor?i.fontColor:"black",b={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};i.nodeType&&(b={"stroke-width":1});let x={x:i.x,y:i.y,fill:h,stroke:p,width:i.width,height:i.height,rx:2.5,ry:2.5,attrs:b};g4(l,x);let E=o.boundaryFont();E.fontWeight="bold",E.fontSize=E.fontSize+2,E.fontColor=m,Vu(o)(i.label.text,l,i.x,i.y+i.label.Y,i.width,i.height,{fill:"#444444"},E),i.type&&i.type.text!==""&&(E=o.boundaryFont(),E.fontColor=m,Vu(o)(i.type.text,l,i.x,i.y+i.type.Y,i.width,i.height,{fill:"#444444"},E)),i.descr&&i.descr.text!==""&&(E=o.boundaryFont(),E.fontSize=E.fontSize-2,E.fontColor=m,Vu(o)(i.descr.text,l,i.x,i.y+i.descr.Y,i.width,i.height,{fill:"#444444"},E))},rZ=function(t,i,o){let l=i.bgColor?i.bgColor:o[i.typeC4Shape.text+"_bg_color"],h=i.borderColor?i.borderColor:o[i.typeC4Shape.text+"_border_color"],p=i.fontColor?i.fontColor:"#FFFFFF",m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(i.typeC4Shape.text){case"person":m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const b=t.append("g");b.attr("class","person-man");const x=ML();switch(i.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":x.x=i.x,x.y=i.y,x.fill=l,x.width=i.width,x.height=i.height,x.style="stroke:"+h+";stroke-width:0.5;",x.rx=2.5,x.ry=2.5,g4(b,x);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":b.append("path").attr("fill",l).attr("stroke-width","0.5").attr("stroke",h).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",i.x).replaceAll("starty",i.y).replaceAll("half",i.width/2).replaceAll("height",i.height)),b.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",h).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",i.x).replaceAll("starty",i.y).replaceAll("half",i.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":b.append("path").attr("fill",l).attr("stroke-width","0.5").attr("stroke",h).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",i.x).replaceAll("starty",i.y).replaceAll("width",i.width).replaceAll("half",i.height/2)),b.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",h).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",i.x+i.width).replaceAll("starty",i.y).replaceAll("half",i.height/2));break}let E=fZ(o,i.typeC4Shape.text);switch(b.append("text").attr("fill",p).attr("font-family",E.fontFamily).attr("font-size",E.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",i.typeC4Shape.width).attr("x",i.x+i.width/2-i.typeC4Shape.width/2).attr("y",i.y+i.typeC4Shape.Y).text("<<"+i.typeC4Shape.text+">>"),i.typeC4Shape.text){case"person":case"external_person":TL(b,48,48,i.x+i.width/2-24,i.y+i.image.Y,m);break}let L=o[i.typeC4Shape.text+"Font"]();return L.fontWeight="bold",L.fontSize=L.fontSize+2,L.fontColor=p,Vu(o)(i.label.text,b,i.x,i.y+i.label.Y,i.width,i.height,{fill:p},L),L=o[i.typeC4Shape.text+"Font"](),L.fontColor=p,i.thchn&&i.thchn.text!==""?Vu(o)(i.thchn.text,b,i.x,i.y+i.thchn.Y,i.width,i.height,{fill:p,"font-style":"italic"},L):i.type&&i.type.text!==""&&Vu(o)(i.type.text,b,i.x,i.y+i.type.Y,i.width,i.height,{fill:p,"font-style":"italic"},L),i.descr&&i.descr.text!==""&&(L=o.personFont(),L.fontColor=p,Vu(o)(i.descr.text,b,i.x,i.y+i.descr.Y,i.width,i.height,{fill:p},L)),i.height},sZ=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},oZ=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},aZ=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},lZ=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},cZ=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},uZ=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},hZ=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},dZ=function(t){const o=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);o.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),o.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},ML=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},fZ=(t,i)=>({fontFamily:t[i+"FontFamily"],fontSize:t[i+"FontSize"],fontWeight:t[i+"FontWeight"]}),Vu=function(){function t(h,p,m,b,x,E,L){const I=p.append("text").attr("x",m+x/2).attr("y",b+E/2+5).style("text-anchor","middle").text(h);l(I,L)}function i(h,p,m,b,x,E,L,I){const{fontSize:F,fontFamily:W,fontWeight:K}=I,re=h.split(Ai.lineBreakRegex);for(let se=0;se<re.length;se++){const pe=se*F-F*(re.length-1)/2,he=p.append("text").attr("x",m+x/2).attr("y",b).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",F).style("font-weight",K).style("font-family",W);he.append("tspan").attr("dy",pe).text(re[se]).attr("alignment-baseline","mathematical"),l(he,L)}}function o(h,p,m,b,x,E,L,I){const F=p.append("switch"),K=F.append("foreignObject").attr("x",m).attr("y",b).attr("width",x).attr("height",E).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");K.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(h),i(h,F,m,b,x,E,L,I),l(K,L)}function l(h,p){for(const m in p)p.hasOwnProperty(m)&&h.attr(m,p[m])}return function(h){return h.textPlacement==="fo"?o:h.textPlacement==="old"?t:i}}(),Yc={drawRect:g4,drawBoundary:iZ,drawC4Shape:rZ,drawRels:nZ,drawImage:TL,insertArrowHead:lZ,insertArrowEnd:cZ,insertArrowFilledHead:uZ,insertDynamicNumber:hZ,insertArrowCrossHead:dZ,insertDatabaseIcon:sZ,insertComputerIcon:oZ,insertClockIcon:aZ,getNoteRect:ML,sanitizeUrl:A};let M2=0,A2=0,AL=4,v4=2;S2.yy=EL;let si={};class LL{constructor(i){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,y4(i.db.getConfig())}setData(i,o,l,h){this.nextData.startx=this.data.startx=i,this.nextData.stopx=this.data.stopx=o,this.nextData.starty=this.data.starty=l,this.nextData.stopy=this.data.stopy=h}updateVal(i,o,l,h){i[o]===void 0?i[o]=l:i[o]=h(l,i[o])}insert(i){this.nextData.cnt=this.nextData.cnt+1;let o=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+i.margin:this.nextData.stopx+i.margin*2,l=o+i.width,h=this.nextData.starty+i.margin*2,p=h+i.height;(o>=this.data.widthLimit||l>=this.data.widthLimit||this.nextData.cnt>AL)&&(o=this.nextData.startx+i.margin+si.nextLinePaddingX,h=this.nextData.stopy+i.margin*2,this.nextData.stopx=l=o+i.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=p=h+i.height,this.nextData.cnt=1),i.x=o,i.y=h,this.updateVal(this.data,"startx",o,Math.min),this.updateVal(this.data,"starty",h,Math.min),this.updateVal(this.data,"stopx",l,Math.max),this.updateVal(this.data,"stopy",p,Math.max),this.updateVal(this.nextData,"startx",o,Math.min),this.updateVal(this.nextData,"starty",h,Math.min),this.updateVal(this.nextData,"stopx",l,Math.max),this.updateVal(this.nextData,"stopy",p,Math.max)}init(i){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},y4(i.db.getConfig())}bumpLastMargin(i){this.data.stopx+=i,this.data.stopy+=i}}const y4=function(t){co(si,t),t.fontFamily&&(si.personFontFamily=si.systemFontFamily=si.messageFontFamily=t.fontFamily),t.fontSize&&(si.personFontSize=si.systemFontSize=si.messageFontSize=t.fontSize),t.fontWeight&&(si.personFontWeight=si.systemFontWeight=si.messageFontWeight=t.fontWeight)},tv=(t,i)=>({fontFamily:t[i+"FontFamily"],fontSize:t[i+"FontSize"],fontWeight:t[i+"FontWeight"]}),L2=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),pZ=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight});function Kl(t,i,o,l,h){if(!i[t].width)if(o)i[t].text=H8(i[t].text,h,l),i[t].textLines=i[t].text.split(Ai.lineBreakRegex).length,i[t].width=h,i[t].height=Kk(i[t].text,l);else{let p=i[t].text.split(Ai.lineBreakRegex);i[t].textLines=p.length;let m=0;i[t].height=0,i[t].width=0;for(const b of p)i[t].width=Math.max(Gc(b,l),i[t].width),m=Kk(b,l),i[t].height=i[t].height+m}}const RL=function(t,i,o){i.x=o.data.startx,i.y=o.data.starty,i.width=o.data.stopx-o.data.startx,i.height=o.data.stopy-o.data.starty,i.label.y=si.c4ShapeMargin-35;let l=i.wrap&&si.wrap,h=L2(si);h.fontSize=h.fontSize+2,h.fontWeight="bold";let p=Gc(i.label.text,h);Kl("label",i,l,h,p),Yc.drawBoundary(t,i,si)},PL=function(t,i,o,l){let h=0;for(const p of l){h=0;const m=o[p];let b=tv(si,m.typeC4Shape.text);switch(b.fontSize=b.fontSize-2,m.typeC4Shape.width=Gc("<<"+m.typeC4Shape.text+">>",b),m.typeC4Shape.height=b.fontSize+2,m.typeC4Shape.Y=si.c4ShapePadding,h=m.typeC4Shape.Y+m.typeC4Shape.height-4,m.image={width:0,height:0,Y:0},m.typeC4Shape.text){case"person":case"external_person":m.image.width=48,m.image.height=48,m.image.Y=h,h=m.image.Y+m.image.height;break}m.sprite&&(m.image.width=48,m.image.height=48,m.image.Y=h,h=m.image.Y+m.image.height);let x=m.wrap&&si.wrap,E=si.width-si.c4ShapePadding*2,L=tv(si,m.typeC4Shape.text);if(L.fontSize=L.fontSize+2,L.fontWeight="bold",Kl("label",m,x,L,E),m.label.Y=h+8,h=m.label.Y+m.label.height,m.type&&m.type.text!==""){m.type.text="["+m.type.text+"]";let W=tv(si,m.typeC4Shape.text);Kl("type",m,x,W,E),m.type.Y=h+5,h=m.type.Y+m.type.height}else if(m.techn&&m.techn.text!==""){m.techn.text="["+m.techn.text+"]";let W=tv(si,m.techn.text);Kl("techn",m,x,W,E),m.techn.Y=h+5,h=m.techn.Y+m.techn.height}let I=h,F=m.label.width;if(m.descr&&m.descr.text!==""){let W=tv(si,m.typeC4Shape.text);Kl("descr",m,x,W,E),m.descr.Y=h+20,h=m.descr.Y+m.descr.height,F=Math.max(m.label.width,m.descr.width),I=h-m.descr.textLines*5}F=F+si.c4ShapePadding,m.width=Math.max(m.width||si.width,F,si.width),m.height=Math.max(m.height||si.height,I,si.height),m.margin=m.margin||si.c4ShapeMargin,t.insert(m),Yc.drawC4Shape(i,m,si)}t.bumpLastMargin(si.c4ShapeMargin)};class ml{constructor(i,o){this.x=i,this.y=o}}let IL=function(t,i){let o=t.x,l=t.y,h=i.x,p=i.y,m=o+t.width/2,b=l+t.height/2,x=Math.abs(o-h),E=Math.abs(l-p),L=E/x,I=t.height/t.width,F=null;return l==p&&o<h?F=new ml(o+t.width,b):l==p&&o>h?F=new ml(o,b):o==h&&l<p?F=new ml(m,l+t.height):o==h&&l>p&&(F=new ml(m,l)),o>h&&l<p?I>=L?F=new ml(o,b+L*t.width/2):F=new ml(m-x/E*t.height/2,l+t.height):o<h&&l<p?I>=L?F=new ml(o+t.width,b+L*t.width/2):F=new ml(m+x/E*t.height/2,l+t.height):o<h&&l>p?I>=L?F=new ml(o+t.width,b-L*t.width/2):F=new ml(m+t.height/2*x/E,l):o>h&&l>p&&(I>=L?F=new ml(o,b-t.width/2*L):F=new ml(m-t.height/2*x/E,l)),F},mZ=function(t,i){let o={x:0,y:0};o.x=i.x+i.width/2,o.y=i.y+i.height/2;let l=IL(t,o);o.x=t.x+t.width/2,o.y=t.y+t.height/2;let h=IL(i,o);return{startPoint:l,endPoint:h}};const gZ=function(t,i,o,l){let h=0;for(let p of i){h=h+1;let m=p.wrap&&si.wrap,b=pZ(si);l.db.getC4Type()==="C4Dynamic"&&(p.label.text=h+": "+p.label.text);let E=Gc(p.label.text,b);Kl("label",p,m,b,E),p.techn&&p.techn.text!==""&&(E=Gc(p.techn.text,b),Kl("techn",p,m,b,E)),p.descr&&p.descr.text!==""&&(E=Gc(p.descr.text,b),Kl("descr",p,m,b,E));let L=o(p.from),I=o(p.to),F=mZ(L,I);p.startPoint=F.startPoint,p.endPoint=F.endPoint}Yc.drawRels(t,i,si)};function DL(t,i,o,l,h){let p=new LL(h);p.data.widthLimit=o.data.widthLimit/Math.min(v4,l.length);for(let[m,b]of l.entries()){let x=0;b.image={width:0,height:0,Y:0},b.sprite&&(b.image.width=48,b.image.height=48,b.image.Y=x,x=b.image.Y+b.image.height);let E=b.wrap&&si.wrap,L=L2(si);if(L.fontSize=L.fontSize+2,L.fontWeight="bold",Kl("label",b,E,L,p.data.widthLimit),b.label.Y=x+8,x=b.label.Y+b.label.height,b.type&&b.type.text!==""){b.type.text="["+b.type.text+"]";let K=L2(si);Kl("type",b,E,K,p.data.widthLimit),b.type.Y=x+5,x=b.type.Y+b.type.height}if(b.descr&&b.descr.text!==""){let K=L2(si);K.fontSize=K.fontSize-2,Kl("descr",b,E,K,p.data.widthLimit),b.descr.Y=x+20,x=b.descr.Y+b.descr.height}if(m==0||m%v4===0){let K=o.data.startx+si.diagramMarginX,re=o.data.stopy+si.diagramMarginY+x;p.setData(K,K,re,re)}else{let K=p.data.stopx!==p.data.startx?p.data.stopx+si.diagramMarginX:p.data.startx,re=p.data.starty;p.setData(K,K,re,re)}p.name=b.alias;let I=h.db.getC4ShapeArray(b.alias),F=h.db.getC4ShapeKeys(b.alias);F.length>0&&PL(p,t,I,F),i=b.alias;let W=h.db.getBoundarys(i);W.length>0&&DL(t,i,p,W,h),b.alias!=="global"&&RL(t,b,p),o.data.stopy=Math.max(p.data.stopy+si.c4ShapeMargin,o.data.stopy),o.data.stopx=Math.max(p.data.stopx+si.c4ShapeMargin,o.data.stopx),M2=Math.max(M2,o.data.stopx),A2=Math.max(A2,o.data.stopy)}}const NL={drawPersonOrSystemArray:PL,drawBoundary:RL,setConf:y4,draw:function(t,i,o,l){si=Qe().c4;const h=Qe().securityLevel;let p;h==="sandbox"&&(p=dn("#i"+i));const m=dn(h==="sandbox"?p.nodes()[0].contentDocument.body:"body");let b=l.db;l.db.setWrap(si.wrap),AL=b.getC4ShapeInRow(),v4=b.getC4BoundaryInRow(),y.debug(`C:${JSON.stringify(si,null,2)}`);const x=h==="sandbox"?m.select(`[id="${i}"]`):dn(`[id="${i}"]`);Yc.insertComputerIcon(x),Yc.insertDatabaseIcon(x),Yc.insertClockIcon(x);let E=new LL(l);E.setData(si.diagramMarginX,si.diagramMarginX,si.diagramMarginY,si.diagramMarginY),E.data.widthLimit=screen.availWidth,M2=si.diagramMarginX,A2=si.diagramMarginY;const L=l.db.getTitle();let I=l.db.getBoundarys("");DL(x,"",E,I,l),Yc.insertArrowHead(x),Yc.insertArrowEnd(x),Yc.insertArrowCrossHead(x),Yc.insertArrowFilledHead(x),gZ(x,l.db.getRels(),l.db.getC4Shape,l),E.data.stopx=M2,E.data.stopy=A2;const F=E.data;let K=F.stopy-F.starty+2*si.diagramMarginY;const se=F.stopx-F.startx+2*si.diagramMarginX;L&&x.append("text").text(L).attr("x",(F.stopx-F.startx)/2-4*si.diagramMarginX).attr("y",F.starty+si.diagramMarginY),Hl(x,K,se,si.useMaxWidth);const pe=L?60:0;x.attr("viewBox",F.startx-si.diagramMarginX+" -"+(si.diagramMarginY+pe)+" "+se+" "+(K+pe)),y.debug("models:",F)}};var _4=function(){var t=function(Me,ke,ge,ct){for(ge=ge||{},ct=Me.length;ct--;ge[Me[ct]]=ke);return ge},i=[1,3],o=[1,7],l=[1,8],h=[1,9],p=[1,10],m=[1,13],b=[1,12],x=[1,16,25],E=[1,20],L=[1,32],I=[1,33],F=[1,34],W=[1,36],K=[1,39],re=[1,37],se=[1,38],pe=[1,44],he=[1,45],Ce=[1,40],Le=[1,41],Ve=[1,42],je=[1,43],Pe=[1,48],ze=[1,49],xe=[1,50],_e=[1,51],de=[16,25],te=[1,65],be=[1,66],q=[1,67],ot=[1,68],Z=[1,69],Dt=[1,70],xn=[1,71],ln=[1,80],Je=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],kt=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],mt=[5,8,9,10,11,16,19,23,25],vt=[54,88,89,90,91],Pt=[54,65,66,88,89,90,91],rn=[54,60,61,62,63,64,88,89,90,91],nt=[16,25,32],Ln=[1,107],Ie={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(ke,ge,ct,le,Ft,Oe,Wn){var dt=Oe.length-1;switch(Ft){case 5:le.setDirection("TB");break;case 6:le.setDirection("BT");break;case 7:le.setDirection("RL");break;case 8:le.setDirection("LR");break;case 12:le.parseDirective("%%{","open_directive");break;case 13:le.parseDirective(Oe[dt],"type_directive");break;case 14:Oe[dt]=Oe[dt].trim().replace(/'/g,'"'),le.parseDirective(Oe[dt],"arg_directive");break;case 15:le.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=Oe[dt];break;case 22:this.$=Oe[dt-1]+Oe[dt];break;case 23:case 24:this.$=Oe[dt-1]+"~"+Oe[dt];break;case 25:le.addRelation(Oe[dt]);break;case 26:Oe[dt-1].title=le.cleanupLabel(Oe[dt]),le.addRelation(Oe[dt-1]);break;case 35:this.$=Oe[dt].trim(),le.setAccTitle(this.$);break;case 36:case 37:this.$=Oe[dt].trim(),le.setAccDescription(this.$);break;case 38:le.addClass(Oe[dt]);break;case 39:le.addClass(Oe[dt-2]),le.setCssClass(Oe[dt-2],Oe[dt]);break;case 40:le.addClass(Oe[dt-3]),le.addMembers(Oe[dt-3],Oe[dt-1]);break;case 41:le.addClass(Oe[dt-5]),le.setCssClass(Oe[dt-5],Oe[dt-3]),le.addMembers(Oe[dt-5],Oe[dt-1]);break;case 42:le.addAnnotation(Oe[dt],Oe[dt-2]);break;case 43:this.$=[Oe[dt]];break;case 44:Oe[dt].push(Oe[dt-1]),this.$=Oe[dt];break;case 45:break;case 46:le.addMember(Oe[dt-1],le.cleanupLabel(Oe[dt]));break;case 47:break;case 48:break;case 49:this.$={id1:Oe[dt-2],id2:Oe[dt],relation:Oe[dt-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:Oe[dt-3],id2:Oe[dt],relation:Oe[dt-1],relationTitle1:Oe[dt-2],relationTitle2:"none"};break;case 51:this.$={id1:Oe[dt-3],id2:Oe[dt],relation:Oe[dt-2],relationTitle1:"none",relationTitle2:Oe[dt-1]};break;case 52:this.$={id1:Oe[dt-4],id2:Oe[dt],relation:Oe[dt-2],relationTitle1:Oe[dt-3],relationTitle2:Oe[dt-1]};break;case 53:le.addNote(Oe[dt],Oe[dt-1]);break;case 54:le.addNote(Oe[dt]);break;case 55:this.$={type1:Oe[dt-2],type2:Oe[dt],lineType:Oe[dt-1]};break;case 56:this.$={type1:"none",type2:Oe[dt],lineType:Oe[dt-1]};break;case 57:this.$={type1:Oe[dt-1],type2:"none",lineType:Oe[dt]};break;case 58:this.$={type1:"none",type2:"none",lineType:Oe[dt]};break;case 59:this.$=le.relationType.AGGREGATION;break;case 60:this.$=le.relationType.EXTENSION;break;case 61:this.$=le.relationType.COMPOSITION;break;case 62:this.$=le.relationType.DEPENDENCY;break;case 63:this.$=le.relationType.LOLLIPOP;break;case 64:this.$=le.lineType.LINE;break;case 65:this.$=le.lineType.DOTTED_LINE;break;case 66:case 72:this.$=Oe[dt-2],le.setClickEvent(Oe[dt-1],Oe[dt]);break;case 67:case 73:this.$=Oe[dt-3],le.setClickEvent(Oe[dt-2],Oe[dt-1]),le.setTooltip(Oe[dt-2],Oe[dt]);break;case 68:case 76:this.$=Oe[dt-2],le.setLink(Oe[dt-1],Oe[dt]);break;case 69:this.$=Oe[dt-3],le.setLink(Oe[dt-2],Oe[dt-1],Oe[dt]);break;case 70:case 78:this.$=Oe[dt-3],le.setLink(Oe[dt-2],Oe[dt-1]),le.setTooltip(Oe[dt-2],Oe[dt]);break;case 71:case 79:this.$=Oe[dt-4],le.setLink(Oe[dt-3],Oe[dt-2],Oe[dt]),le.setTooltip(Oe[dt-3],Oe[dt-1]);break;case 74:this.$=Oe[dt-3],le.setClickEvent(Oe[dt-2],Oe[dt-1],Oe[dt]);break;case 75:this.$=Oe[dt-4],le.setClickEvent(Oe[dt-3],Oe[dt-2],Oe[dt-1]),le.setTooltip(Oe[dt-3],Oe[dt]);break;case 77:this.$=Oe[dt-3],le.setLink(Oe[dt-2],Oe[dt-1],Oe[dt]);break;case 80:le.setCssClass(Oe[dt-1],Oe[dt]);break}},table:[{3:1,4:2,5:i,6:4,7:5,8:o,9:l,10:h,11:p,12:6,13:11,19:m,23:b},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:i,6:4,7:5,8:o,9:l,10:h,11:p,12:6,13:11,19:m,23:b},{1:[2,9]},t(x,[2,5]),t(x,[2,6]),t(x,[2,7]),t(x,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:E},t([17,22],[2,13]),{6:31,7:30,8:o,9:l,10:h,11:p,13:11,19:m,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:L,41:I,43:F,44:W,49:K,51:re,52:se,55:pe,57:he,67:Ce,68:Le,70:Ve,74:je,88:Pe,89:ze,90:xe,91:_e},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},t(de,[2,25],{32:[1,57]}),t(de,[2,27]),t(de,[2,28]),t(de,[2,29]),t(de,[2,30]),t(de,[2,31]),t(de,[2,32]),t(de,[2,33]),t(de,[2,34]),{40:[1,58]},{42:[1,59]},t(de,[2,37]),t(de,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:te,61:be,62:q,63:ot,64:Z,65:Dt,66:xn}),{27:72,28:46,29:47,88:Pe,89:ze,90:xe,91:_e},t(de,[2,47]),t(de,[2,48]),{28:73,88:Pe,89:ze,90:xe},{27:74,28:46,29:47,88:Pe,89:ze,90:xe,91:_e},{27:75,28:46,29:47,88:Pe,89:ze,90:xe,91:_e},{27:76,28:46,29:47,88:Pe,89:ze,90:xe,91:_e},{54:[1,77]},{27:78,28:46,29:47,88:Pe,89:ze,90:xe,91:_e},{54:ln,56:79},t(Je,[2,20],{28:46,29:47,27:81,30:[1,82],88:Pe,89:ze,90:xe,91:_e}),t(Je,[2,21],{30:[1,83]}),t(kt,[2,94]),t(kt,[2,95]),t(kt,[2,96]),t([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),t(mt,[2,10]),{15:84,22:E},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:o,9:l,10:h,11:p,13:11,19:m,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:L,41:I,43:F,44:W,49:K,51:re,52:se,55:pe,57:he,67:Ce,68:Le,70:Ve,74:je,88:Pe,89:ze,90:xe,91:_e},t(de,[2,26]),t(de,[2,35]),t(de,[2,36]),{27:86,28:46,29:47,54:[1,87],88:Pe,89:ze,90:xe,91:_e},{53:88,58:63,59:64,60:te,61:be,62:q,63:ot,64:Z,65:Dt,66:xn},t(de,[2,46]),{59:89,65:Dt,66:xn},t(vt,[2,58],{58:90,60:te,61:be,62:q,63:ot,64:Z}),t(Pt,[2,59]),t(Pt,[2,60]),t(Pt,[2,61]),t(Pt,[2,62]),t(Pt,[2,63]),t(rn,[2,64]),t(rn,[2,65]),t(de,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:Pe,89:ze,90:xe},{54:ln,56:99},t(de,[2,54]),t(de,[2,98]),t(Je,[2,22]),t(Je,[2,23]),t(Je,[2,24]),{16:[1,100]},{25:[2,19]},t(nt,[2,49]),{27:101,28:46,29:47,88:Pe,89:ze,90:xe,91:_e},{27:102,28:46,29:47,54:[1,103],88:Pe,89:ze,90:xe,91:_e},t(vt,[2,57],{58:104,60:te,61:be,62:q,63:ot,64:Z}),t(vt,[2,56]),{28:105,88:Pe,89:ze,90:xe},{47:106,51:Ln},{27:108,28:46,29:47,88:Pe,89:ze,90:xe,91:_e},t(de,[2,66],{54:[1,109]}),t(de,[2,68],{54:[1,111],69:[1,110]}),t(de,[2,72],{54:[1,112],72:[1,113]}),t(de,[2,76],{54:[1,115],69:[1,114]}),t(de,[2,80]),t(de,[2,53]),t(mt,[2,11]),t(nt,[2,51]),t(nt,[2,50]),{27:116,28:46,29:47,88:Pe,89:ze,90:xe,91:_e},t(vt,[2,55]),t(de,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:Ln},t(de,[2,42]),t(de,[2,67]),t(de,[2,69]),t(de,[2,70],{69:[1,120]}),t(de,[2,73]),t(de,[2,74],{54:[1,121]}),t(de,[2,77]),t(de,[2,78],{69:[1,122]}),t(nt,[2,52]),{47:123,51:Ln},t(de,[2,40]),{48:[2,44]},t(de,[2,71]),t(de,[2,75]),t(de,[2,79]),{48:[1,124]},t(de,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(ke,ge){if(ge.recoverable)this.trace(ke);else{var ct=new Error(ke);throw ct.hash=ge,ct}},parse:function(ke){var ge=this,ct=[0],le=[],Ft=[null],Oe=[],Wn=this.table,dt="",Cn=0,un=0,Kt=2,hn=1,cn=Oe.slice.call(arguments,1),qt=Object.create(this.lexer),_t={yy:{}};for(var Si in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Si)&&(_t.yy[Si]=this.yy[Si]);qt.setInput(ke,_t.yy),_t.yy.lexer=qt,_t.yy.parser=this,typeof qt.yylloc>"u"&&(qt.yylloc={});var ni=qt.yylloc;Oe.push(ni);var ei=qt.options&&qt.options.ranges;typeof _t.yy.parseError=="function"?this.parseError=_t.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ii(){var bt;return bt=le.pop()||qt.lex()||hn,typeof bt!="number"&&(bt instanceof Array&&(le=bt,bt=le.pop()),bt=ge.symbols_[bt]||bt),bt}for(var $n,ar,Yn,zn,Bn={},sn,jt,bn,tn;;){if(ar=ct[ct.length-1],this.defaultActions[ar]?Yn=this.defaultActions[ar]:(($n===null||typeof $n>"u")&&($n=ii()),Yn=Wn[ar]&&Wn[ar][$n]),typeof Yn>"u"||!Yn.length||!Yn[0]){var Un="";tn=[];for(sn in Wn[ar])this.terminals_[sn]&&sn>Kt&&tn.push("'"+this.terminals_[sn]+"'");qt.showPosition?Un="Parse error on line "+(Cn+1)+`:
`+qt.showPosition()+`
Expecting `+tn.join(", ")+", got '"+(this.terminals_[$n]||$n)+"'":Un="Parse error on line "+(Cn+1)+": Unexpected "+($n==hn?"end of input":"'"+(this.terminals_[$n]||$n)+"'"),this.parseError(Un,{text:qt.match,token:this.terminals_[$n]||$n,line:qt.yylineno,loc:ni,expected:tn})}if(Yn[0]instanceof Array&&Yn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ar+", token: "+$n);switch(Yn[0]){case 1:ct.push($n),Ft.push(qt.yytext),Oe.push(qt.yylloc),ct.push(Yn[1]),$n=null,un=qt.yyleng,dt=qt.yytext,Cn=qt.yylineno,ni=qt.yylloc;break;case 2:if(jt=this.productions_[Yn[1]][1],Bn.$=Ft[Ft.length-jt],Bn._$={first_line:Oe[Oe.length-(jt||1)].first_line,last_line:Oe[Oe.length-1].last_line,first_column:Oe[Oe.length-(jt||1)].first_column,last_column:Oe[Oe.length-1].last_column},ei&&(Bn._$.range=[Oe[Oe.length-(jt||1)].range[0],Oe[Oe.length-1].range[1]]),zn=this.performAction.apply(Bn,[dt,un,Cn,_t.yy,Yn[1],Ft,Oe].concat(cn)),typeof zn<"u")return zn;jt&&(ct=ct.slice(0,-1*jt*2),Ft=Ft.slice(0,-1*jt),Oe=Oe.slice(0,-1*jt)),ct.push(this.productions_[Yn[1]][0]),Ft.push(Bn.$),Oe.push(Bn._$),bn=Wn[ct[ct.length-2]][ct[ct.length-1]],ct.push(bn);break;case 3:return!0}}return!0}},Be=function(){var Me={EOF:1,parseError:function(ge,ct){if(this.yy.parser)this.yy.parser.parseError(ge,ct);else throw new Error(ge)},setInput:function(ke,ge){return this.yy=ge||this.yy||{},this._input=ke,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ke=this._input[0];this.yytext+=ke,this.yyleng++,this.offset++,this.match+=ke,this.matched+=ke;var ge=ke.match(/(?:\r\n?|\n).*/g);return ge?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ke},unput:function(ke){var ge=ke.length,ct=ke.split(/(?:\r\n?|\n)/g);this._input=ke+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ge),this.offset-=ge;var le=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ct.length-1&&(this.yylineno-=ct.length-1);var Ft=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ct?(ct.length===le.length?this.yylloc.first_column:0)+le[le.length-ct.length].length-ct[0].length:this.yylloc.first_column-ge},this.options.ranges&&(this.yylloc.range=[Ft[0],Ft[0]+this.yyleng-ge]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ke){this.unput(this.match.slice(ke))},pastInput:function(){var ke=this.matched.substr(0,this.matched.length-this.match.length);return(ke.length>20?"...":"")+ke.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ke=this.match;return ke.length<20&&(ke+=this._input.substr(0,20-ke.length)),(ke.substr(0,20)+(ke.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ke=this.pastInput(),ge=new Array(ke.length+1).join("-");return ke+this.upcomingInput()+`
`+ge+"^"},test_match:function(ke,ge){var ct,le,Ft;if(this.options.backtrack_lexer&&(Ft={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ft.yylloc.range=this.yylloc.range.slice(0))),le=ke[0].match(/(?:\r\n?|\n).*/g),le&&(this.yylineno+=le.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:le?le[le.length-1].length-le[le.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ke[0].length},this.yytext+=ke[0],this.match+=ke[0],this.matches=ke,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ke[0].length),this.matched+=ke[0],ct=this.performAction.call(this,this.yy,this,ge,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ct)return ct;if(this._backtrack){for(var Oe in Ft)this[Oe]=Ft[Oe];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ke,ge,ct,le;this._more||(this.yytext="",this.match="");for(var Ft=this._currentRules(),Oe=0;Oe<Ft.length;Oe++)if(ct=this._input.match(this.rules[Ft[Oe]]),ct&&(!ge||ct[0].length>ge[0].length)){if(ge=ct,le=Oe,this.options.backtrack_lexer){if(ke=this.test_match(ct,Ft[Oe]),ke!==!1)return ke;if(this._backtrack){ge=!1;continue}else return!1}else if(!this.options.flex)break}return ge?(ke=this.test_match(ge,Ft[le]),ke!==!1?ke:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ge=this.next();return ge||this.lex()},begin:function(ge){this.conditionStack.push(ge)},popState:function(){var ge=this.conditionStack.length-1;return ge>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ge){return ge=this.conditionStack.length-1-Math.abs(ge||0),ge>=0?this.conditionStack[ge]:"INITIAL"},pushState:function(ge){this.begin(ge)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ge,ct,le,Ft){switch(le){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:break;case 10:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:return 23;case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 27:break;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 39:this.popState();break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 42:this.popState();break;case 43:return"STR";case 44:this.begin("bqstring");break;case 45:this.popState();break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 48:this.popState();break;case 49:return 73;case 50:this.begin("callback_name");break;case 51:this.popState();break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 54:this.popState();break;case 55:return 72;case 56:return 69;case 57:return 69;case 58:return 69;case 59:return 69;case 60:return 61;case 61:return 61;case 62:return 63;case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:return"EQUALS";case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};return Me}();Ie.lexer=Be;function et(){this.yy={}}return et.prototype=Ie,Ie.Parser=et,new et}();_4.parser=_4;const OL=_4,vZ=(t,i)=>{var o;return((o=i==null?void 0:i.class)==null?void 0:o.defaultRenderer)==="dagre-wrapper"?!1:t.match(/^\s*classDiagram/)!==null},yZ=(t,i)=>{var o;return t.match(/^\s*classDiagram/)!==null&&((o=i==null?void 0:i.class)==null?void 0:o.defaultRenderer)==="dagre-wrapper"?!0:t.match(/^\s*classDiagram-v2/)!==null},b4="classid-";let x4=[],xs={},R2=[],FL=0,nv=[];const iv=t=>Ai.sanitizeText(t,Qe()),_Z=function(t,i,o){ss.parseDirective(this,t,i,o)},rv=function(t){let i="",o=t;if(t.indexOf("~")>0){let l=t.split("~");o=l[0],i=Ai.sanitizeText(l[1],Qe())}return{className:o,type:i}},w4=function(t){let i=rv(t);xs[i.className]===void 0&&(xs[i.className]={id:i.className,type:i.type,cssClasses:[],methods:[],members:[],annotations:[],domId:b4+i.className+"-"+FL},FL++)},BL=function(t){const i=Object.keys(xs);for(const o of i)if(xs[o].id===t)return xs[o].domId},bZ=function(){x4=[],xs={},R2=[],nv=[],nv.push(WL),Yl()},xZ=function(t){return xs[t]},wZ=function(){return xs},kZ=function(){return x4},CZ=function(){return R2},SZ=function(t){y.debug("Adding relation: "+JSON.stringify(t)),w4(t.id1),w4(t.id2),t.id1=rv(t.id1).className,t.id2=rv(t.id2).className,t.relationTitle1=Ai.sanitizeText(t.relationTitle1.trim(),Qe()),t.relationTitle2=Ai.sanitizeText(t.relationTitle2.trim(),Qe()),x4.push(t)},EZ=function(t,i){const o=rv(t).className;xs[o].annotations.push(i)},VL=function(t,i){const o=rv(t).className,l=xs[o];if(typeof i=="string"){const h=i.trim();h.startsWith("<<")&&h.endsWith(">>")?l.annotations.push(iv(h.substring(2,h.length-2))):h.indexOf(")")>0?l.methods.push(iv(h)):h&&l.members.push(iv(h))}},TZ=function(t,i){Array.isArray(i)&&(i.reverse(),i.forEach(o=>VL(t,o)))},MZ=function(t,i){const o={id:`note${R2.length}`,class:i,text:t};R2.push(o)},AZ=function(t){return t.substring(0,1)===":"?Ai.sanitizeText(t.substr(1).trim(),Qe()):iv(t.trim())},k4=function(t,i){t.split(",").forEach(function(o){let l=o;o[0].match(/\d/)&&(l=b4+l),xs[l]!==void 0&&xs[l].cssClasses.push(i)})},LZ=function(t,i){const o=Qe();t.split(",").forEach(function(l){i!==void 0&&(xs[l].tooltip=Ai.sanitizeText(i,o))})},RZ=function(t){return xs[t].tooltip},PZ=function(t,i,o){const l=Qe();t.split(",").forEach(function(h){let p=h;h[0].match(/\d/)&&(p=b4+p),xs[p]!==void 0&&(xs[p].link=Ii.formatUrl(i,l),l.securityLevel==="sandbox"?xs[p].linkTarget="_top":typeof o=="string"?xs[p].linkTarget=iv(o):xs[p].linkTarget="_blank")}),k4(t,"clickable")},IZ=function(t,i,o){t.split(",").forEach(function(l){DZ(l,i,o),xs[l].haveCallback=!0}),k4(t,"clickable")},DZ=function(t,i,o){const l=Qe();let h=t,p=BL(h);if(l.securityLevel==="loose"&&i!==void 0&&xs[h]!==void 0){let m=[];if(typeof o=="string"){m=o.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let b=0;b<m.length;b++){let x=m[b].trim();x.charAt(0)==='"'&&x.charAt(x.length-1)==='"'&&(x=x.substr(1,x.length-2)),m[b]=x}}m.length===0&&m.push(p),nv.push(function(){const b=document.querySelector(`[id="${p}"]`);b!==null&&b.addEventListener("click",function(){Ii.runFunc(i,...m)},!1)})}},NZ=function(t){nv.forEach(function(i){i(t)})},OZ={LINE:0,DOTTED_LINE:1},FZ={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},WL=function(t){let i=dn(".mermaidTooltip");(i._groups||i)[0][0]===null&&(i=dn("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),dn(t).select("svg").selectAll("g.node").on("mouseover",function(){const h=dn(this);if(h.attr("title")===null)return;const m=this.getBoundingClientRect();i.transition().duration(200).style("opacity",".9"),i.text(h.attr("title")).style("left",window.scrollX+m.left+(m.right-m.left)/2+"px").style("top",window.scrollY+m.top-14+document.body.scrollTop+"px"),i.html(i.html().replace(/&lt;br\/&gt;/g,"<br/>")),h.classed("hover",!0)}).on("mouseout",function(){i.transition().duration(500).style("opacity",0),dn(this).classed("hover",!1)})};nv.push(WL);let zL="TB";const Jm={parseDirective:_Z,setAccTitle:pl,getAccTitle:jl,getAccDescription:ql,setAccDescription:$l,getConfig:()=>Qe().class,addClass:w4,bindFunctions:NZ,clear:bZ,getClass:xZ,getClasses:wZ,getNotes:CZ,addAnnotation:EZ,addNote:MZ,getRelations:kZ,addRelation:SZ,getDirection:()=>zL,setDirection:t=>{zL=t},addMember:VL,addMembers:TZ,cleanupLabel:AZ,lineType:OZ,relationType:FZ,setClickEvent:IZ,setCssClass:k4,setLink:PZ,getTooltip:RZ,setTooltip:LZ,lookUpDomId:BL,setDiagramTitle:Fu,getDiagramTitle:Bu};function jc(t){return t!=null&&typeof t=="object"}var BZ="[object Symbol]";function Ff(t){return typeof t=="symbol"||jc(t)&&Af(t)==BZ}function Qm(t,i){for(var o=-1,l=t==null?0:t.length,h=Array(l);++o<l;)h[o]=i(t[o],o,t);return h}var VZ=Array.isArray;const Is=VZ;var WZ=1/0,UL=dl?dl.prototype:void 0,GL=UL?UL.toString:void 0;function HL(t){if(typeof t=="string")return t;if(Is(t))return Qm(t,HL)+"";if(Ff(t))return GL?GL.call(t):"";var i=t+"";return i=="0"&&1/t==-WZ?"-0":i}var zZ=/\s/;function UZ(t){for(var i=t.length;i--&&zZ.test(t.charAt(i)););return i}var GZ=/^\s+/;function HZ(t){return t&&t.slice(0,UZ(t)+1).replace(GZ,"")}var YL=0/0,YZ=/^[-+]0x[0-9a-f]+$/i,jZ=/^0b[01]+$/i,$Z=/^0o[0-7]+$/i,qZ=parseInt;function XZ(t){if(typeof t=="number")return t;if(Ff(t))return YL;if(Va(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Va(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=HZ(t);var o=jZ.test(t);return o||$Z.test(t)?qZ(t.slice(2),o?2:8):YZ.test(t)?YL:+t}var jL=1/0,ZZ=17976931348623157e292;function P2(t){if(!t)return t===0?t:0;if(t=XZ(t),t===jL||t===-jL){var i=t<0?-1:1;return i*ZZ}return t===t?t:0}function KZ(t){var i=P2(t),o=i%1;return i===i?o?i-o:i:0}function Bf(t){return t}var JZ=Rf(zl,"WeakMap");const C4=JZ;var $L=Object.create,QZ=function(){function t(){}return function(i){if(!Va(i))return{};if($L)return $L(i);t.prototype=i;var o=new t;return t.prototype=void 0,o}}();const eK=QZ;function tK(t,i,o){switch(o.length){case 0:return t.call(i);case 1:return t.call(i,o[0]);case 2:return t.call(i,o[0],o[1]);case 3:return t.call(i,o[0],o[1],o[2])}return t.apply(i,o)}function nK(){}function qL(t,i){var o=-1,l=t.length;for(i||(i=Array(l));++o<l;)i[o]=t[o];return i}var iK=800,rK=16,sK=Date.now;function oK(t){var i=0,o=0;return function(){var l=sK(),h=rK-(l-o);if(o=l,h>0){if(++i>=iK)return arguments[0]}else i=0;return t.apply(void 0,arguments)}}function e0(t){return function(){return t}}var aK=function(){try{var t=Rf(Object,"defineProperty");return t({},"",{}),t}catch{}}();const I2=aK;var lK=I2?function(t,i){return I2(t,"toString",{configurable:!0,enumerable:!1,value:e0(i),writable:!0})}:Bf,cK=oK(lK);const XL=cK;function ZL(t,i){for(var o=-1,l=t==null?0:t.length;++o<l&&i(t[o],o,t)!==!1;);return t}function KL(t,i,o,l){for(var h=t.length,p=o+(l?1:-1);l?p--:++p<h;)if(i(t[p],p,t))return p;return-1}function uK(t){return t!==t}function hK(t,i,o){for(var l=o-1,h=t.length;++l<h;)if(t[l]===i)return l;return-1}function dK(t,i,o){return i===i?hK(t,i,o):KL(t,uK,o)}function fK(t,i){var o=t==null?0:t.length;return!!o&&dK(t,i,0)>-1}var pK=9007199254740991,mK=/^(?:0|[1-9]\d*)$/;function D2(t,i){var o=typeof t;return i=i==null?pK:i,!!i&&(o=="number"||o!="symbol"&&mK.test(t))&&t>-1&&t%1==0&&t<i}function N2(t,i,o){i=="__proto__"&&I2?I2(t,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[i]=o}var gK=Object.prototype,vK=gK.hasOwnProperty;function O2(t,i,o){var l=t[i];(!(vK.call(t,i)&&jm(l,o))||o===void 0&&!(i in t))&&N2(t,i,o)}function sv(t,i,o,l){var h=!o;o||(o={});for(var p=-1,m=i.length;++p<m;){var b=i[p],x=l?l(o[b],t[b],b,o,t):void 0;x===void 0&&(x=t[b]),h?N2(o,b,x):O2(o,b,x)}return o}var JL=Math.max;function QL(t,i,o){return i=JL(i===void 0?t.length-1:i,0),function(){for(var l=arguments,h=-1,p=JL(l.length-i,0),m=Array(p);++h<p;)m[h]=l[i+h];h=-1;for(var b=Array(i+1);++h<i;)b[h]=l[h];return b[i]=o(m),tK(t,this,b)}}function F2(t,i){return XL(QL(t,i,Bf),t+"")}var yK=9007199254740991;function S4(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=yK}function ad(t){return t!=null&&S4(t.length)&&!Ym(t)}function ov(t,i,o){if(!Va(o))return!1;var l=typeof i;return(l=="number"?ad(o)&&D2(i,o.length):l=="string"&&i in o)?jm(o[i],t):!1}function _K(t){return F2(function(i,o){var l=-1,h=o.length,p=h>1?o[h-1]:void 0,m=h>2?o[2]:void 0;for(p=t.length>3&&typeof p=="function"?(h--,p):void 0,m&&ov(o[0],o[1],m)&&(p=h<3?void 0:p,h=1),i=Object(i);++l<h;){var b=o[l];b&&t(i,b,l,p)}return i})}var bK=Object.prototype;function B2(t){var i=t&&t.constructor,o=typeof i=="function"&&i.prototype||bK;return t===o}function xK(t,i){for(var o=-1,l=Array(t);++o<t;)l[o]=i(o);return l}var wK="[object Arguments]";function e7(t){return jc(t)&&Af(t)==wK}var t7=Object.prototype,kK=t7.hasOwnProperty,CK=t7.propertyIsEnumerable,SK=e7(function(){return arguments}())?e7:function(t){return jc(t)&&kK.call(t,"callee")&&!CK.call(t,"callee")};const t0=SK;function EK(){return!1}var n7=e&&!e.nodeType&&e,i7=n7&&!0&&r&&!r.nodeType&&r,TK=i7&&i7.exports===n7,r7=TK?zl.Buffer:void 0,MK=r7?r7.isBuffer:void 0,AK=MK||EK;const n0=AK;var LK="[object Arguments]",RK="[object Array]",PK="[object Boolean]",IK="[object Date]",DK="[object Error]",NK="[object Function]",OK="[object Map]",FK="[object Number]",BK="[object Object]",VK="[object RegExp]",WK="[object Set]",zK="[object String]",UK="[object WeakMap]",GK="[object ArrayBuffer]",HK="[object DataView]",YK="[object Float32Array]",jK="[object Float64Array]",$K="[object Int8Array]",qK="[object Int16Array]",XK="[object Int32Array]",ZK="[object Uint8Array]",KK="[object Uint8ClampedArray]",JK="[object Uint16Array]",QK="[object Uint32Array]",Zr={};Zr[YK]=Zr[jK]=Zr[$K]=Zr[qK]=Zr[XK]=Zr[ZK]=Zr[KK]=Zr[JK]=Zr[QK]=!0,Zr[LK]=Zr[RK]=Zr[GK]=Zr[PK]=Zr[HK]=Zr[IK]=Zr[DK]=Zr[NK]=Zr[OK]=Zr[FK]=Zr[BK]=Zr[VK]=Zr[WK]=Zr[zK]=Zr[UK]=!1;function eJ(t){return jc(t)&&S4(t.length)&&!!Zr[Af(t)]}function V2(t){return function(i){return t(i)}}var s7=e&&!e.nodeType&&e,av=s7&&!0&&r&&!r.nodeType&&r,tJ=av&&av.exports===s7,E4=tJ&&O8.process,nJ=function(){try{var t=av&&av.require&&av.require("util").types;return t||E4&&E4.binding&&E4.binding("util")}catch{}}();const i0=nJ;var o7=i0&&i0.isTypedArray,iJ=o7?V2(o7):eJ;const W2=iJ;var rJ=Object.prototype,sJ=rJ.hasOwnProperty;function a7(t,i){var o=Is(t),l=!o&&t0(t),h=!o&&!l&&n0(t),p=!o&&!l&&!h&&W2(t),m=o||l||h||p,b=m?xK(t.length,String):[],x=b.length;for(var E in t)(i||sJ.call(t,E))&&!(m&&(E=="length"||h&&(E=="offset"||E=="parent")||p&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||D2(E,x)))&&b.push(E);return b}function l7(t,i){return function(o){return t(i(o))}}var oJ=l7(Object.keys,Object);const aJ=oJ;var lJ=Object.prototype,cJ=lJ.hasOwnProperty;function c7(t){if(!B2(t))return aJ(t);var i=[];for(var o in Object(t))cJ.call(t,o)&&o!="constructor"&&i.push(o);return i}function za(t){return ad(t)?a7(t):c7(t)}function uJ(t){var i=[];if(t!=null)for(var o in Object(t))i.push(o);return i}var hJ=Object.prototype,dJ=hJ.hasOwnProperty;function fJ(t){if(!Va(t))return uJ(t);var i=B2(t),o=[];for(var l in t)l=="constructor"&&(i||!dJ.call(t,l))||o.push(l);return o}function Vf(t){return ad(t)?a7(t,!0):fJ(t)}var pJ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mJ=/^\w*$/;function T4(t,i){if(Is(t))return!1;var o=typeof t;return o=="number"||o=="symbol"||o=="boolean"||t==null||Ff(t)?!0:mJ.test(t)||!pJ.test(t)||i!=null&&t in Object(i)}var gJ=500;function vJ(t){var i=$m(t,function(l){return o.size===gJ&&o.clear(),l}),o=i.cache;return i}var yJ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_J=/\\(\\)?/g,bJ=vJ(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(yJ,function(o,l,h,p){i.push(h?p.replace(_J,"$1"):l||o)}),i});const xJ=bJ;function u7(t){return t==null?"":HL(t)}function z2(t,i){return Is(t)?t:T4(t,i)?[t]:xJ(u7(t))}var wJ=1/0;function lv(t){if(typeof t=="string"||Ff(t))return t;var i=t+"";return i=="0"&&1/t==-wJ?"-0":i}function U2(t,i){i=z2(i,t);for(var o=0,l=i.length;t!=null&&o<l;)t=t[lv(i[o++])];return o&&o==l?t:void 0}function kJ(t,i,o){var l=t==null?void 0:U2(t,i);return l===void 0?o:l}function M4(t,i){for(var o=-1,l=i.length,h=t.length;++o<l;)t[h+o]=i[o];return t}var h7=dl?dl.isConcatSpreadable:void 0;function CJ(t){return Is(t)||t0(t)||!!(h7&&t&&t[h7])}function G2(t,i,o,l,h){var p=-1,m=t.length;for(o||(o=CJ),h||(h=[]);++p<m;){var b=t[p];i>0&&o(b)?i>1?G2(b,i-1,o,l,h):M4(h,b):l||(h[h.length]=b)}return h}function r0(t){var i=t==null?0:t.length;return i?G2(t,1):[]}function SJ(t){return XL(QL(t,void 0,r0),t+"")}var EJ=l7(Object.getPrototypeOf,Object);const A4=EJ;var TJ="[object Object]",MJ=Function.prototype,AJ=Object.prototype,d7=MJ.toString,LJ=AJ.hasOwnProperty,RJ=d7.call(Object);function f7(t){if(!jc(t)||Af(t)!=TJ)return!1;var i=A4(t);if(i===null)return!0;var o=LJ.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&d7.call(o)==RJ}function PJ(t,i,o,l){var h=-1,p=t==null?0:t.length;for(l&&p&&(o=t[++h]);++h<p;)o=i(o,t[h],h,t);return o}function IJ(){this.__data__=new Nu,this.size=0}function DJ(t){var i=this.__data__,o=i.delete(t);return this.size=i.size,o}function NJ(t){return this.__data__.get(t)}function OJ(t){return this.__data__.has(t)}var FJ=200;function BJ(t,i){var o=this.__data__;if(o instanceof Nu){var l=o.__data__;if(!Y1||l.length<FJ-1)return l.push([t,i]),this.size=++o.size,this;o=this.__data__=new Ou(l)}return o.set(t,i),this.size=o.size,this}function Jl(t){var i=this.__data__=new Nu(t);this.size=i.size}Jl.prototype.clear=IJ,Jl.prototype.delete=DJ,Jl.prototype.get=NJ,Jl.prototype.has=OJ,Jl.prototype.set=BJ;function VJ(t,i){return t&&sv(i,za(i),t)}function WJ(t,i){return t&&sv(i,Vf(i),t)}var p7=e&&!e.nodeType&&e,m7=p7&&!0&&r&&!r.nodeType&&r,zJ=m7&&m7.exports===p7,g7=zJ?zl.Buffer:void 0,v7=g7?g7.allocUnsafe:void 0;function y7(t,i){if(i)return t.slice();var o=t.length,l=v7?v7(o):new t.constructor(o);return t.copy(l),l}function _7(t,i){for(var o=-1,l=t==null?0:t.length,h=0,p=[];++o<l;){var m=t[o];i(m,o,t)&&(p[h++]=m)}return p}function b7(){return[]}var UJ=Object.prototype,GJ=UJ.propertyIsEnumerable,x7=Object.getOwnPropertySymbols,HJ=x7?function(t){return t==null?[]:(t=Object(t),_7(x7(t),function(i){return GJ.call(t,i)}))}:b7;const L4=HJ;function YJ(t,i){return sv(t,L4(t),i)}var jJ=Object.getOwnPropertySymbols,$J=jJ?function(t){for(var i=[];t;)M4(i,L4(t)),t=A4(t);return i}:b7;const w7=$J;function qJ(t,i){return sv(t,w7(t),i)}function k7(t,i,o){var l=i(t);return Is(t)?l:M4(l,o(t))}function R4(t){return k7(t,za,L4)}function XJ(t){return k7(t,Vf,w7)}var ZJ=Rf(zl,"DataView");const P4=ZJ;var KJ=Rf(zl,"Promise");const I4=KJ;var JJ=Rf(zl,"Set");const s0=JJ;var C7="[object Map]",QJ="[object Object]",S7="[object Promise]",E7="[object Set]",T7="[object WeakMap]",M7="[object DataView]",eQ=Lf(P4),tQ=Lf(Y1),nQ=Lf(I4),iQ=Lf(s0),rQ=Lf(C4),Wf=Af;(P4&&Wf(new P4(new ArrayBuffer(1)))!=M7||Y1&&Wf(new Y1)!=C7||I4&&Wf(I4.resolve())!=S7||s0&&Wf(new s0)!=E7||C4&&Wf(new C4)!=T7)&&(Wf=function(t){var i=Af(t),o=i==QJ?t.constructor:void 0,l=o?Lf(o):"";if(l)switch(l){case eQ:return M7;case tQ:return C7;case nQ:return S7;case iQ:return E7;case rQ:return T7}return i});const o0=Wf;var sQ=Object.prototype,oQ=sQ.hasOwnProperty;function aQ(t){var i=t.length,o=new t.constructor(i);return i&&typeof t[0]=="string"&&oQ.call(t,"index")&&(o.index=t.index,o.input=t.input),o}var lQ=zl.Uint8Array;const H2=lQ;function D4(t){var i=new t.constructor(t.byteLength);return new H2(i).set(new H2(t)),i}function cQ(t,i){var o=i?D4(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}var uQ=/\w*$/;function hQ(t){var i=new t.constructor(t.source,uQ.exec(t));return i.lastIndex=t.lastIndex,i}var A7=dl?dl.prototype:void 0,L7=A7?A7.valueOf:void 0;function dQ(t){return L7?Object(L7.call(t)):{}}function R7(t,i){var o=i?D4(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}var fQ="[object Boolean]",pQ="[object Date]",mQ="[object Map]",gQ="[object Number]",vQ="[object RegExp]",yQ="[object Set]",_Q="[object String]",bQ="[object Symbol]",xQ="[object ArrayBuffer]",wQ="[object DataView]",kQ="[object Float32Array]",CQ="[object Float64Array]",SQ="[object Int8Array]",EQ="[object Int16Array]",TQ="[object Int32Array]",MQ="[object Uint8Array]",AQ="[object Uint8ClampedArray]",LQ="[object Uint16Array]",RQ="[object Uint32Array]";function PQ(t,i,o){var l=t.constructor;switch(i){case xQ:return D4(t);case fQ:case pQ:return new l(+t);case wQ:return cQ(t,o);case kQ:case CQ:case SQ:case EQ:case TQ:case MQ:case AQ:case LQ:case RQ:return R7(t,o);case mQ:return new l;case gQ:case _Q:return new l(t);case vQ:return hQ(t);case yQ:return new l;case bQ:return dQ(t)}}function P7(t){return typeof t.constructor=="function"&&!B2(t)?eK(A4(t)):{}}var IQ="[object Map]";function DQ(t){return jc(t)&&o0(t)==IQ}var I7=i0&&i0.isMap,NQ=I7?V2(I7):DQ;const OQ=NQ;var FQ="[object Set]";function BQ(t){return jc(t)&&o0(t)==FQ}var D7=i0&&i0.isSet,VQ=D7?V2(D7):BQ;const WQ=VQ;var zQ=1,UQ=2,GQ=4,N7="[object Arguments]",HQ="[object Array]",YQ="[object Boolean]",jQ="[object Date]",$Q="[object Error]",O7="[object Function]",qQ="[object GeneratorFunction]",XQ="[object Map]",ZQ="[object Number]",F7="[object Object]",KQ="[object RegExp]",JQ="[object Set]",QQ="[object String]",eee="[object Symbol]",tee="[object WeakMap]",nee="[object ArrayBuffer]",iee="[object DataView]",ree="[object Float32Array]",see="[object Float64Array]",oee="[object Int8Array]",aee="[object Int16Array]",lee="[object Int32Array]",cee="[object Uint8Array]",uee="[object Uint8ClampedArray]",hee="[object Uint16Array]",dee="[object Uint32Array]",Gr={};Gr[N7]=Gr[HQ]=Gr[nee]=Gr[iee]=Gr[YQ]=Gr[jQ]=Gr[ree]=Gr[see]=Gr[oee]=Gr[aee]=Gr[lee]=Gr[XQ]=Gr[ZQ]=Gr[F7]=Gr[KQ]=Gr[JQ]=Gr[QQ]=Gr[eee]=Gr[cee]=Gr[uee]=Gr[hee]=Gr[dee]=!0,Gr[$Q]=Gr[O7]=Gr[tee]=!1;function cv(t,i,o,l,h,p){var m,b=i&zQ,x=i&UQ,E=i&GQ;if(o&&(m=h?o(t,l,h,p):o(t)),m!==void 0)return m;if(!Va(t))return t;var L=Is(t);if(L){if(m=aQ(t),!b)return qL(t,m)}else{var I=o0(t),F=I==O7||I==qQ;if(n0(t))return y7(t,b);if(I==F7||I==N7||F&&!h){if(m=x||F?{}:P7(t),!b)return x?qJ(t,WJ(m,t)):YJ(t,VJ(m,t))}else{if(!Gr[I])return h?t:{};m=PQ(t,I,b)}}p||(p=new Jl);var W=p.get(t);if(W)return W;p.set(t,m),WQ(t)?t.forEach(function(se){m.add(cv(se,i,o,se,t,p))}):OQ(t)&&t.forEach(function(se,pe){m.set(pe,cv(se,i,o,pe,t,p))});var K=E?x?XJ:R4:x?Vf:za,re=L?void 0:K(t);return ZL(re||t,function(se,pe){re&&(pe=se,se=t[pe]),O2(m,pe,cv(se,i,o,pe,t,p))}),m}var fee=4;function pee(t){return cv(t,fee)}var mee=1,gee=4;function vee(t){return cv(t,mee|gee)}var yee="__lodash_hash_undefined__";function _ee(t){return this.__data__.set(t,yee),this}function bee(t){return this.__data__.has(t)}function uv(t){var i=-1,o=t==null?0:t.length;for(this.__data__=new Ou;++i<o;)this.add(t[i])}uv.prototype.add=uv.prototype.push=_ee,uv.prototype.has=bee;function xee(t,i){for(var o=-1,l=t==null?0:t.length;++o<l;)if(i(t[o],o,t))return!0;return!1}function B7(t,i){return t.has(i)}var wee=1,kee=2;function V7(t,i,o,l,h,p){var m=o&wee,b=t.length,x=i.length;if(b!=x&&!(m&&x>b))return!1;var E=p.get(t),L=p.get(i);if(E&&L)return E==i&&L==t;var I=-1,F=!0,W=o&kee?new uv:void 0;for(p.set(t,i),p.set(i,t);++I<b;){var K=t[I],re=i[I];if(l)var se=m?l(re,K,I,i,t,p):l(K,re,I,t,i,p);if(se!==void 0){if(se)continue;F=!1;break}if(W){if(!xee(i,function(pe,he){if(!B7(W,he)&&(K===pe||h(K,pe,o,l,p)))return W.push(he)})){F=!1;break}}else if(!(K===re||h(K,re,o,l,p))){F=!1;break}}return p.delete(t),p.delete(i),F}function Cee(t){var i=-1,o=Array(t.size);return t.forEach(function(l,h){o[++i]=[h,l]}),o}function N4(t){var i=-1,o=Array(t.size);return t.forEach(function(l){o[++i]=l}),o}var See=1,Eee=2,Tee="[object Boolean]",Mee="[object Date]",Aee="[object Error]",Lee="[object Map]",Ree="[object Number]",Pee="[object RegExp]",Iee="[object Set]",Dee="[object String]",Nee="[object Symbol]",Oee="[object ArrayBuffer]",Fee="[object DataView]",W7=dl?dl.prototype:void 0,O4=W7?W7.valueOf:void 0;function Bee(t,i,o,l,h,p,m){switch(o){case Fee:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Oee:return!(t.byteLength!=i.byteLength||!p(new H2(t),new H2(i)));case Tee:case Mee:case Ree:return jm(+t,+i);case Aee:return t.name==i.name&&t.message==i.message;case Pee:case Dee:return t==i+"";case Lee:var b=Cee;case Iee:var x=l&See;if(b||(b=N4),t.size!=i.size&&!x)return!1;var E=m.get(t);if(E)return E==i;l|=Eee,m.set(t,i);var L=V7(b(t),b(i),l,h,p,m);return m.delete(t),L;case Nee:if(O4)return O4.call(t)==O4.call(i)}return!1}var Vee=1,Wee=Object.prototype,zee=Wee.hasOwnProperty;function Uee(t,i,o,l,h,p){var m=o&Vee,b=R4(t),x=b.length,E=R4(i),L=E.length;if(x!=L&&!m)return!1;for(var I=x;I--;){var F=b[I];if(!(m?F in i:zee.call(i,F)))return!1}var W=p.get(t),K=p.get(i);if(W&&K)return W==i&&K==t;var re=!0;p.set(t,i),p.set(i,t);for(var se=m;++I<x;){F=b[I];var pe=t[F],he=i[F];if(l)var Ce=m?l(he,pe,F,i,t,p):l(pe,he,F,t,i,p);if(!(Ce===void 0?pe===he||h(pe,he,o,l,p):Ce)){re=!1;break}se||(se=F=="constructor")}if(re&&!se){var Le=t.constructor,Ve=i.constructor;Le!=Ve&&"constructor"in t&&"constructor"in i&&!(typeof Le=="function"&&Le instanceof Le&&typeof Ve=="function"&&Ve instanceof Ve)&&(re=!1)}return p.delete(t),p.delete(i),re}var Gee=1,z7="[object Arguments]",U7="[object Array]",Y2="[object Object]",Hee=Object.prototype,G7=Hee.hasOwnProperty;function Yee(t,i,o,l,h,p){var m=Is(t),b=Is(i),x=m?U7:o0(t),E=b?U7:o0(i);x=x==z7?Y2:x,E=E==z7?Y2:E;var L=x==Y2,I=E==Y2,F=x==E;if(F&&n0(t)){if(!n0(i))return!1;m=!0,L=!1}if(F&&!L)return p||(p=new Jl),m||W2(t)?V7(t,i,o,l,h,p):Bee(t,i,x,o,l,h,p);if(!(o&Gee)){var W=L&&G7.call(t,"__wrapped__"),K=I&&G7.call(i,"__wrapped__");if(W||K){var re=W?t.value():t,se=K?i.value():i;return p||(p=new Jl),h(re,se,o,l,p)}}return F?(p||(p=new Jl),Uee(t,i,o,l,h,p)):!1}function F4(t,i,o,l,h){return t===i?!0:t==null||i==null||!jc(t)&&!jc(i)?t!==t&&i!==i:Yee(t,i,o,l,F4,h)}var jee=1,$ee=2;function qee(t,i,o,l){var h=o.length,p=h,m=!l;if(t==null)return!p;for(t=Object(t);h--;){var b=o[h];if(m&&b[2]?b[1]!==t[b[0]]:!(b[0]in t))return!1}for(;++h<p;){b=o[h];var x=b[0],E=t[x],L=b[1];if(m&&b[2]){if(E===void 0&&!(x in t))return!1}else{var I=new Jl;if(l)var F=l(E,L,x,t,i,I);if(!(F===void 0?F4(L,E,jee|$ee,l,I):F))return!1}}return!0}function H7(t){return t===t&&!Va(t)}function Xee(t){for(var i=za(t),o=i.length;o--;){var l=i[o],h=t[l];i[o]=[l,h,H7(h)]}return i}function Y7(t,i){return function(o){return o==null?!1:o[t]===i&&(i!==void 0||t in Object(o))}}function Zee(t){var i=Xee(t);return i.length==1&&i[0][2]?Y7(i[0][0],i[0][1]):function(o){return o===t||qee(o,t,i)}}function Kee(t,i){return t!=null&&i in Object(t)}function j7(t,i,o){i=z2(i,t);for(var l=-1,h=i.length,p=!1;++l<h;){var m=lv(i[l]);if(!(p=t!=null&&o(t,m)))break;t=t[m]}return p||++l!=h?p:(h=t==null?0:t.length,!!h&&S4(h)&&D2(m,h)&&(Is(t)||t0(t)))}function $7(t,i){return t!=null&&j7(t,i,Kee)}var Jee=1,Qee=2;function ete(t,i){return T4(t)&&H7(i)?Y7(lv(t),i):function(o){var l=kJ(o,t);return l===void 0&&l===i?$7(o,t):F4(i,l,Jee|Qee)}}function tte(t){return function(i){return i==null?void 0:i[t]}}function nte(t){return function(i){return U2(i,t)}}function ite(t){return T4(t)?tte(lv(t)):nte(t)}function ld(t){return typeof t=="function"?t:t==null?Bf:typeof t=="object"?Is(t)?ete(t[0],t[1]):Zee(t):ite(t)}function rte(t){return function(i,o,l){for(var h=-1,p=Object(i),m=l(i),b=m.length;b--;){var x=m[t?b:++h];if(o(p[x],x,p)===!1)break}return i}}var ste=rte();const B4=ste;function q7(t,i){return t&&B4(t,i,za)}function ote(t,i){return function(o,l){if(o==null)return o;if(!ad(o))return t(o,l);for(var h=o.length,p=i?h:-1,m=Object(o);(i?p--:++p<h)&&l(m[p],p,m)!==!1;);return o}}var ate=ote(q7);const j2=ate;var lte=function(){return zl.Date.now()};const X7=lte;var Z7=Object.prototype,cte=Z7.hasOwnProperty,ute=F2(function(t,i){t=Object(t);var o=-1,l=i.length,h=l>2?i[2]:void 0;for(h&&ov(i[0],i[1],h)&&(l=1);++o<l;)for(var p=i[o],m=Vf(p),b=-1,x=m.length;++b<x;){var E=m[b],L=t[E];(L===void 0||jm(L,Z7[E])&&!cte.call(t,E))&&(t[E]=p[E])}return t});const a0=ute;function V4(t,i,o){(o!==void 0&&!jm(t[i],o)||o===void 0&&!(i in t))&&N2(t,i,o)}function K7(t){return jc(t)&&ad(t)}function W4(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}function hte(t){return sv(t,Vf(t))}function dte(t,i,o,l,h,p,m){var b=W4(t,o),x=W4(i,o),E=m.get(x);if(E){V4(t,o,E);return}var L=p?p(b,x,o+"",t,i,m):void 0,I=L===void 0;if(I){var F=Is(x),W=!F&&n0(x),K=!F&&!W&&W2(x);L=x,F||W||K?Is(b)?L=b:K7(b)?L=qL(b):W?(I=!1,L=y7(x,!0)):K?(I=!1,L=R7(x,!0)):L=[]:f7(x)||t0(x)?(L=b,t0(b)?L=hte(b):(!Va(b)||Ym(b))&&(L=P7(x))):I=!1}I&&(m.set(x,L),h(L,x,l,p,m),m.delete(x)),V4(t,o,L)}function J7(t,i,o,l,h){t!==i&&B4(i,function(p,m){if(h||(h=new Jl),Va(p))dte(t,i,m,o,J7,l,h);else{var b=l?l(W4(t,m),p,m+"",t,i,h):void 0;b===void 0&&(b=p),V4(t,m,b)}},Vf)}function fte(t,i,o){for(var l=-1,h=t==null?0:t.length;++l<h;)if(o(i,t[l]))return!0;return!1}function $2(t){var i=t==null?0:t.length;return i?t[i-1]:void 0}function Q7(t){return typeof t=="function"?t:Bf}function an(t,i){var o=Is(t)?ZL:j2;return o(t,Q7(i))}function pte(t,i){var o=[];return j2(t,function(l,h,p){i(l,h,p)&&o.push(l)}),o}function Wu(t,i){var o=Is(t)?_7:pte;return o(t,ld(i))}function mte(t){return function(i,o,l){var h=Object(i);if(!ad(i)){var p=ld(o);i=za(i),o=function(b){return p(h[b],b,h)}}var m=t(i,o,l);return m>-1?h[p?i[m]:m]:void 0}}var gte=Math.max;function vte(t,i,o){var l=t==null?0:t.length;if(!l)return-1;var h=o==null?0:KZ(o);return h<0&&(h=gte(l+h,0)),KL(t,ld(i),h)}var yte=mte(vte);const z4=yte;function eR(t,i){var o=-1,l=ad(t)?Array(t.length):[];return j2(t,function(h,p,m){l[++o]=i(h,p,m)}),l}function Ds(t,i){var o=Is(t)?Qm:eR;return o(t,ld(i))}function _te(t,i){return t==null?t:B4(t,Q7(i),Vf)}function bte(t,i){return t>i}var xte=Object.prototype,wte=xte.hasOwnProperty;function kte(t,i){return t!=null&&wte.call(t,i)}function Oi(t,i){return t!=null&&j7(t,i,kte)}function Cte(t,i){return Qm(i,function(o){return t[o]})}function zu(t){return t==null?[]:Cte(t,za(t))}var Ste="[object Map]",Ete="[object Set]",Tte=Object.prototype,Mte=Tte.hasOwnProperty;function l0(t){if(t==null)return!0;if(ad(t)&&(Is(t)||typeof t=="string"||typeof t.splice=="function"||n0(t)||W2(t)||t0(t)))return!t.length;var i=o0(t);if(i==Ste||i==Ete)return!t.size;if(B2(t))return!c7(t).length;for(var o in t)if(Mte.call(t,o))return!1;return!0}function ws(t){return t===void 0}function tR(t,i){return t<i}function q2(t,i){var o={};return i=ld(i),q7(t,function(l,h,p){N2(o,h,i(l,h,p))}),o}function U4(t,i,o){for(var l=-1,h=t.length;++l<h;){var p=t[l],m=i(p);if(m!=null&&(b===void 0?m===m&&!Ff(m):o(m,b)))var b=m,x=p}return x}function zf(t){return t&&t.length?U4(t,Bf,bte):void 0}var Ate=_K(function(t,i,o){J7(t,i,o)});const G4=Ate;function hv(t){return t&&t.length?U4(t,Bf,tR):void 0}function H4(t,i){return t&&t.length?U4(t,ld(i),tR):void 0}function Lte(t,i,o,l){if(!Va(t))return t;i=z2(i,t);for(var h=-1,p=i.length,m=p-1,b=t;b!=null&&++h<p;){var x=lv(i[h]),E=o;if(x==="__proto__"||x==="constructor"||x==="prototype")return t;if(h!=m){var L=b[x];E=l?l(L,x,b):void 0,E===void 0&&(E=Va(L)?L:D2(i[h+1])?[]:{})}O2(b,x,E),b=b[x]}return t}function Rte(t,i,o){for(var l=-1,h=i.length,p={};++l<h;){var m=i[l],b=U2(t,m);o(b,m)&&Lte(p,z2(m,t),b)}return p}function Pte(t,i){var o=t.length;for(t.sort(i);o--;)t[o]=t[o].value;return t}function Ite(t,i){if(t!==i){var o=t!==void 0,l=t===null,h=t===t,p=Ff(t),m=i!==void 0,b=i===null,x=i===i,E=Ff(i);if(!b&&!E&&!p&&t>i||p&&m&&x&&!b&&!E||l&&m&&x||!o&&x||!h)return 1;if(!l&&!p&&!E&&t<i||E&&o&&h&&!l&&!p||b&&o&&h||!m&&h||!x)return-1}return 0}function Dte(t,i,o){for(var l=-1,h=t.criteria,p=i.criteria,m=h.length,b=o.length;++l<m;){var x=Ite(h[l],p[l]);if(x){if(l>=b)return x;var E=o[l];return x*(E=="desc"?-1:1)}}return t.index-i.index}function Nte(t,i,o){i.length?i=Qm(i,function(p){return Is(p)?function(m){return U2(m,p.length===1?p[0]:p)}:p}):i=[Bf];var l=-1;i=Qm(i,V2(ld));var h=eR(t,function(p,m,b){var x=Qm(i,function(E){return E(p)});return{criteria:x,index:++l,value:p}});return Pte(h,function(p,m){return Dte(p,m,o)})}function Ote(t,i){return Rte(t,i,function(o,l){return $7(t,l)})}var Fte=SJ(function(t,i){return t==null?{}:Ote(t,i)});const dv=Fte;var Bte=Math.ceil,Vte=Math.max;function Wte(t,i,o,l){for(var h=-1,p=Vte(Bte((i-t)/(o||1)),0),m=Array(p);p--;)m[l?p:++h]=t,t+=o;return m}function zte(t){return function(i,o,l){return l&&typeof l!="number"&&ov(i,o,l)&&(o=l=void 0),i=P2(i),o===void 0?(o=i,i=0):o=P2(o),l=l===void 0?i<o?1:-1:P2(l),Wte(i,o,l,t)}}var Ute=zte();const Uf=Ute;function Gte(t,i,o,l,h){return h(t,function(p,m,b){o=l?(l=!1,p):i(o,p,m,b)}),o}function fv(t,i,o){var l=Is(t)?PJ:Gte,h=arguments.length<3;return l(t,ld(i),o,h,j2)}var Hte=F2(function(t,i){if(t==null)return[];var o=i.length;return o>1&&ov(t,i[0],i[1])?i=[]:o>2&&ov(i[0],i[1],i[2])&&(i=[i[0]]),Nte(t,G2(i,1),[])});const pv=Hte;var Yte=1/0,jte=s0&&1/N4(new s0([,-0]))[1]==Yte?function(t){return new s0(t)}:nK;const $te=jte;var qte=200;function Xte(t,i,o){var l=-1,h=fK,p=t.length,m=!0,b=[],x=b;if(o)m=!1,h=fte;else if(p>=qte){var E=i?null:$te(t);if(E)return N4(E);m=!1,h=B7,x=new uv}else x=i?[]:b;e:for(;++l<p;){var L=t[l],I=i?i(L):L;if(L=o||L!==0?L:0,m&&I===I){for(var F=x.length;F--;)if(x[F]===I)continue e;i&&x.push(I),b.push(L)}else h(x,I,o)||(x!==b&&x.push(I),b.push(L))}return b}var Zte=F2(function(t){return Xte(G2(t,1,K7,!0))});const Kte=Zte;var Jte=0;function X2(t){var i=++Jte;return u7(t)+i}function Qte(t,i,o){for(var l=-1,h=t.length,p=i.length,m={};++l<h;){var b=l<p?i[l]:void 0;o(m,t[l],b)}return m}function ene(t,i){return Qte(t||[],i||[],O2)}var tne="\0",Gf="\0",nR="";class Ns{constructor(i={}){this._isDirected=Oi(i,"directed")?i.directed:!0,this._isMultigraph=Oi(i,"multigraph")?i.multigraph:!1,this._isCompound=Oi(i,"compound")?i.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e0(void 0),this._defaultEdgeLabelFn=e0(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Gf]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(i){return this._label=i,this}graph(){return this._label}setDefaultNodeLabel(i){return Ym(i)||(i=e0(i)),this._defaultNodeLabelFn=i,this}nodeCount(){return this._nodeCount}nodes(){return za(this._nodes)}sources(){var i=this;return Wu(this.nodes(),function(o){return l0(i._in[o])})}sinks(){var i=this;return Wu(this.nodes(),function(o){return l0(i._out[o])})}setNodes(i,o){var l=arguments,h=this;return an(i,function(p){l.length>1?h.setNode(p,o):h.setNode(p)}),this}setNode(i,o){return Oi(this._nodes,i)?(arguments.length>1&&(this._nodes[i]=o),this):(this._nodes[i]=arguments.length>1?o:this._defaultNodeLabelFn(i),this._isCompound&&(this._parent[i]=Gf,this._children[i]={},this._children[Gf][i]=!0),this._in[i]={},this._preds[i]={},this._out[i]={},this._sucs[i]={},++this._nodeCount,this)}node(i){return this._nodes[i]}hasNode(i){return Oi(this._nodes,i)}removeNode(i){var o=this;if(Oi(this._nodes,i)){var l=function(h){o.removeEdge(o._edgeObjs[h])};delete this._nodes[i],this._isCompound&&(this._removeFromParentsChildList(i),delete this._parent[i],an(this.children(i),function(h){o.setParent(h)}),delete this._children[i]),an(za(this._in[i]),l),delete this._in[i],delete this._preds[i],an(za(this._out[i]),l),delete this._out[i],delete this._sucs[i],--this._nodeCount}return this}setParent(i,o){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ws(o))o=Gf;else{o+="";for(var l=o;!ws(l);l=this.parent(l))if(l===i)throw new Error("Setting "+o+" as parent of "+i+" would create a cycle");this.setNode(o)}return this.setNode(i),this._removeFromParentsChildList(i),this._parent[i]=o,this._children[o][i]=!0,this}_removeFromParentsChildList(i){delete this._children[this._parent[i]][i]}parent(i){if(this._isCompound){var o=this._parent[i];if(o!==Gf)return o}}children(i){if(ws(i)&&(i=Gf),this._isCompound){var o=this._children[i];if(o)return za(o)}else{if(i===Gf)return this.nodes();if(this.hasNode(i))return[]}}predecessors(i){var o=this._preds[i];if(o)return za(o)}successors(i){var o=this._sucs[i];if(o)return za(o)}neighbors(i){var o=this.predecessors(i);if(o)return Kte(o,this.successors(i))}isLeaf(i){var o;return this.isDirected()?o=this.successors(i):o=this.neighbors(i),o.length===0}filterNodes(i){var o=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});o.setGraph(this.graph());var l=this;an(this._nodes,function(m,b){i(b)&&o.setNode(b,m)}),an(this._edgeObjs,function(m){o.hasNode(m.v)&&o.hasNode(m.w)&&o.setEdge(m,l.edge(m))});var h={};function p(m){var b=l.parent(m);return b===void 0||o.hasNode(b)?(h[m]=b,b):b in h?h[b]:p(b)}return this._isCompound&&an(o.nodes(),function(m){o.setParent(m,p(m))}),o}setDefaultEdgeLabel(i){return Ym(i)||(i=e0(i)),this._defaultEdgeLabelFn=i,this}edgeCount(){return this._edgeCount}edges(){return zu(this._edgeObjs)}setPath(i,o){var l=this,h=arguments;return fv(i,function(p,m){return h.length>1?l.setEdge(p,m,o):l.setEdge(p,m),m}),this}setEdge(){var i,o,l,h,p=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(i=m.v,o=m.w,l=m.name,arguments.length===2&&(h=arguments[1],p=!0)):(i=m,o=arguments[1],l=arguments[3],arguments.length>2&&(h=arguments[2],p=!0)),i=""+i,o=""+o,ws(l)||(l=""+l);var b=mv(this._isDirected,i,o,l);if(Oi(this._edgeLabels,b))return p&&(this._edgeLabels[b]=h),this;if(!ws(l)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(i),this.setNode(o),this._edgeLabels[b]=p?h:this._defaultEdgeLabelFn(i,o,l);var x=nne(this._isDirected,i,o,l);return i=x.v,o=x.w,Object.freeze(x),this._edgeObjs[b]=x,iR(this._preds[o],i),iR(this._sucs[i],o),this._in[o][b]=x,this._out[i][b]=x,this._edgeCount++,this}edge(i,o,l){var h=arguments.length===1?Y4(this._isDirected,arguments[0]):mv(this._isDirected,i,o,l);return this._edgeLabels[h]}hasEdge(i,o,l){var h=arguments.length===1?Y4(this._isDirected,arguments[0]):mv(this._isDirected,i,o,l);return Oi(this._edgeLabels,h)}removeEdge(i,o,l){var h=arguments.length===1?Y4(this._isDirected,arguments[0]):mv(this._isDirected,i,o,l),p=this._edgeObjs[h];return p&&(i=p.v,o=p.w,delete this._edgeLabels[h],delete this._edgeObjs[h],rR(this._preds[o],i),rR(this._sucs[i],o),delete this._in[o][h],delete this._out[i][h],this._edgeCount--),this}inEdges(i,o){var l=this._in[i];if(l){var h=zu(l);return o?Wu(h,function(p){return p.v===o}):h}}outEdges(i,o){var l=this._out[i];if(l){var h=zu(l);return o?Wu(h,function(p){return p.w===o}):h}}nodeEdges(i,o){var l=this.inEdges(i,o);if(l)return l.concat(this.outEdges(i,o))}}Ns.prototype._nodeCount=0,Ns.prototype._edgeCount=0;function iR(t,i){t[i]?t[i]++:t[i]=1}function rR(t,i){--t[i]||delete t[i]}function mv(t,i,o,l){var h=""+i,p=""+o;if(!t&&h>p){var m=h;h=p,p=m}return h+nR+p+nR+(ws(l)?tne:l)}function nne(t,i,o,l){var h=""+i,p=""+o;if(!t&&h>p){var m=h;h=p,p=m}var b={v:h,w:p};return l&&(b.name=l),b}function Y4(t,i){return mv(t,i.v,i.w,i.name)}class ine{constructor(){var i={};i._next=i._prev=i,this._sentinel=i}dequeue(){var i=this._sentinel,o=i._prev;if(o!==i)return sR(o),o}enqueue(i){var o=this._sentinel;i._prev&&i._next&&sR(i),i._next=o._next,o._next._prev=i,o._next=i,i._prev=o}toString(){for(var i=[],o=this._sentinel,l=o._prev;l!==o;)i.push(JSON.stringify(l,rne)),l=l._prev;return"["+i.join(", ")+"]"}}function sR(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function rne(t,i){if(t!=="_next"&&t!=="_prev")return i}var sne=e0(1);function one(t,i){if(t.nodeCount()<=1)return[];var o=lne(t,i||sne),l=ane(o.graph,o.buckets,o.zeroIdx);return r0(Ds(l,function(h){return t.outEdges(h.v,h.w)}))}function ane(t,i,o){for(var l=[],h=i[i.length-1],p=i[0],m;t.nodeCount();){for(;m=p.dequeue();)j4(t,i,o,m);for(;m=h.dequeue();)j4(t,i,o,m);if(t.nodeCount()){for(var b=i.length-2;b>0;--b)if(m=i[b].dequeue(),m){l=l.concat(j4(t,i,o,m,!0));break}}}return l}function j4(t,i,o,l,h){var p=h?[]:void 0;return an(t.inEdges(l.v),function(m){var b=t.edge(m),x=t.node(m.v);h&&p.push({v:m.v,w:m.w}),x.out-=b,$4(i,o,x)}),an(t.outEdges(l.v),function(m){var b=t.edge(m),x=m.w,E=t.node(x);E.in-=b,$4(i,o,E)}),t.removeNode(l.v),p}function lne(t,i){var o=new Ns,l=0,h=0;an(t.nodes(),function(b){o.setNode(b,{v:b,in:0,out:0})}),an(t.edges(),function(b){var x=o.edge(b.v,b.w)||0,E=i(b),L=x+E;o.setEdge(b.v,b.w,L),h=Math.max(h,o.node(b.v).out+=E),l=Math.max(l,o.node(b.w).in+=E)});var p=Uf(h+l+3).map(function(){return new ine}),m=l+1;return an(o.nodes(),function(b){$4(p,m,o.node(b))}),{graph:o,buckets:p,zeroIdx:m}}function $4(t,i,o){o.out?o.in?t[o.out-o.in+i].enqueue(o):t[t.length-1].enqueue(o):t[0].enqueue(o)}function cne(t){var i=t.graph().acyclicer==="greedy"?one(t,o(t)):une(t);an(i,function(l){var h=t.edge(l);t.removeEdge(l),h.forwardName=l.name,h.reversed=!0,t.setEdge(l.w,l.v,h,X2("rev"))});function o(l){return function(h){return l.edge(h).weight}}}function une(t){var i=[],o={},l={};function h(p){Oi(l,p)||(l[p]=!0,o[p]=!0,an(t.outEdges(p),function(m){Oi(o,m.w)?i.push(m):h(m.w)}),delete o[p])}return an(t.nodes(),h),i}function hne(t){an(t.edges(),function(i){var o=t.edge(i);if(o.reversed){t.removeEdge(i);var l=o.forwardName;delete o.reversed,delete o.forwardName,t.setEdge(i.w,i.v,o,l)}})}function c0(t,i,o,l){var h;do h=X2(l);while(t.hasNode(h));return o.dummy=i,t.setNode(h,o),h}function dne(t){var i=new Ns().setGraph(t.graph());return an(t.nodes(),function(o){i.setNode(o,t.node(o))}),an(t.edges(),function(o){var l=i.edge(o.v,o.w)||{weight:0,minlen:1},h=t.edge(o);i.setEdge(o.v,o.w,{weight:l.weight+h.weight,minlen:Math.max(l.minlen,h.minlen)})}),i}function oR(t){var i=new Ns({multigraph:t.isMultigraph()}).setGraph(t.graph());return an(t.nodes(),function(o){t.children(o).length||i.setNode(o,t.node(o))}),an(t.edges(),function(o){i.setEdge(o,t.edge(o))}),i}function aR(t,i){var o=t.x,l=t.y,h=i.x-o,p=i.y-l,m=t.width/2,b=t.height/2;if(!h&&!p)throw new Error("Not possible to find intersection inside of the rectangle");var x,E;return Math.abs(p)*m>Math.abs(h)*b?(p<0&&(b=-b),x=b*h/p,E=b):(h<0&&(m=-m),x=m,E=m*p/h),{x:o+x,y:l+E}}function Z2(t){var i=Ds(Uf(cR(t)+1),function(){return[]});return an(t.nodes(),function(o){var l=t.node(o),h=l.rank;ws(h)||(i[h][l.order]=o)}),i}function fne(t){var i=hv(Ds(t.nodes(),function(o){return t.node(o).rank}));an(t.nodes(),function(o){var l=t.node(o);Oi(l,"rank")&&(l.rank-=i)})}function pne(t){var i=hv(Ds(t.nodes(),function(p){return t.node(p).rank})),o=[];an(t.nodes(),function(p){var m=t.node(p).rank-i;o[m]||(o[m]=[]),o[m].push(p)});var l=0,h=t.graph().nodeRankFactor;an(o,function(p,m){ws(p)&&m%h!==0?--l:l&&an(p,function(b){t.node(b).rank+=l})})}function lR(t,i,o,l){var h={width:0,height:0};return arguments.length>=4&&(h.rank=o,h.order=l),c0(t,"border",h,i)}function cR(t){return zf(Ds(t.nodes(),function(i){var o=t.node(i).rank;if(!ws(o))return o}))}function mne(t,i){var o={lhs:[],rhs:[]};return an(t,function(l){i(l)?o.lhs.push(l):o.rhs.push(l)}),o}function gne(t,i){var o=X7();try{return i()}finally{console.log(t+" time: "+(X7()-o)+"ms")}}function vne(t,i){return i()}function yne(t){function i(o){var l=t.children(o),h=t.node(o);if(l.length&&an(l,i),Oi(h,"minRank")){h.borderLeft=[],h.borderRight=[];for(var p=h.minRank,m=h.maxRank+1;p<m;++p)uR(t,"borderLeft","_bl",o,h,p),uR(t,"borderRight","_br",o,h,p)}}an(t.children(),i)}function uR(t,i,o,l,h,p){var m={width:0,height:0,rank:p,borderType:i},b=h[i][p-1],x=c0(t,"border",m,o);h[i][p]=x,t.setParent(x,l),b&&t.setEdge(b,x,{weight:1})}function _ne(t){var i=t.graph().rankdir.toLowerCase();(i==="lr"||i==="rl")&&hR(t)}function bne(t){var i=t.graph().rankdir.toLowerCase();(i==="bt"||i==="rl")&&xne(t),(i==="lr"||i==="rl")&&(wne(t),hR(t))}function hR(t){an(t.nodes(),function(i){dR(t.node(i))}),an(t.edges(),function(i){dR(t.edge(i))})}function dR(t){var i=t.width;t.width=t.height,t.height=i}function xne(t){an(t.nodes(),function(i){q4(t.node(i))}),an(t.edges(),function(i){var o=t.edge(i);an(o.points,q4),Oi(o,"y")&&q4(o)})}function q4(t){t.y=-t.y}function wne(t){an(t.nodes(),function(i){X4(t.node(i))}),an(t.edges(),function(i){var o=t.edge(i);an(o.points,X4),Oi(o,"x")&&X4(o)})}function X4(t){var i=t.x;t.x=t.y,t.y=i}function kne(t){var i=c0(t,"root",{},"_root"),o=Cne(t),l=zf(zu(o))-1,h=2*l+1;t.graph().nestingRoot=i,an(t.edges(),function(m){t.edge(m).minlen*=h});var p=Sne(t)+1;an(t.children(),function(m){fR(t,i,h,p,l,o,m)}),t.graph().nodeRankFactor=h}function fR(t,i,o,l,h,p,m){var b=t.children(m);if(!b.length){m!==i&&t.setEdge(i,m,{weight:0,minlen:o});return}var x=lR(t,"_bt"),E=lR(t,"_bb"),L=t.node(m);t.setParent(x,m),L.borderTop=x,t.setParent(E,m),L.borderBottom=E,an(b,function(I){fR(t,i,o,l,h,p,I);var F=t.node(I),W=F.borderTop?F.borderTop:I,K=F.borderBottom?F.borderBottom:I,re=F.borderTop?l:2*l,se=W!==K?1:h-p[m]+1;t.setEdge(x,W,{weight:re,minlen:se,nestingEdge:!0}),t.setEdge(K,E,{weight:re,minlen:se,nestingEdge:!0})}),t.parent(m)||t.setEdge(i,x,{weight:0,minlen:h+p[m]})}function Cne(t){var i={};function o(l,h){var p=t.children(l);p&&p.length&&an(p,function(m){o(m,h+1)}),i[l]=h}return an(t.children(),function(l){o(l,1)}),i}function Sne(t){return fv(t.edges(),function(i,o){return i+t.edge(o).weight},0)}function Ene(t){var i=t.graph();t.removeNode(i.nestingRoot),delete i.nestingRoot,an(t.edges(),function(o){var l=t.edge(o);l.nestingEdge&&t.removeEdge(o)})}function Tne(t,i,o){var l={},h;an(o,function(p){for(var m=t.parent(p),b,x;m;){if(b=t.parent(m),b?(x=l[b],l[b]=m):(x=h,h=m),x&&x!==m){i.setEdge(x,m);return}m=b}})}function Mne(t,i,o){var l=Ane(t),h=new Ns({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(p){return t.node(p)});return an(t.nodes(),function(p){var m=t.node(p),b=t.parent(p);(m.rank===i||m.minRank<=i&&i<=m.maxRank)&&(h.setNode(p),h.setParent(p,b||l),an(t[o](p),function(x){var E=x.v===p?x.w:x.v,L=h.edge(E,p),I=ws(L)?0:L.weight;h.setEdge(E,p,{weight:t.edge(x).weight+I})}),Oi(m,"minRank")&&h.setNode(p,{borderLeft:m.borderLeft[i],borderRight:m.borderRight[i]}))}),h}function Ane(t){for(var i;t.hasNode(i=X2("_root")););return i}function Lne(t,i){for(var o=0,l=1;l<i.length;++l)o+=Rne(t,i[l-1],i[l]);return o}function Rne(t,i,o){for(var l=ene(o,Ds(o,function(E,L){return L})),h=r0(Ds(i,function(E){return pv(Ds(t.outEdges(E),function(L){return{pos:l[L.w],weight:t.edge(L).weight}}),"pos")})),p=1;p<o.length;)p<<=1;var m=2*p-1;p-=1;var b=Ds(new Array(m),function(){return 0}),x=0;return an(h.forEach(function(E){var L=E.pos+p;b[L]+=E.weight;for(var I=0;L>0;)L%2&&(I+=b[L+1]),L=L-1>>1,b[L]+=E.weight;x+=E.weight*I})),x}function Pne(t){var i={},o=Wu(t.nodes(),function(b){return!t.children(b).length}),l=zf(Ds(o,function(b){return t.node(b).rank})),h=Ds(Uf(l+1),function(){return[]});function p(b){if(!Oi(i,b)){i[b]=!0;var x=t.node(b);h[x.rank].push(b),an(t.successors(b),p)}}var m=pv(o,function(b){return t.node(b).rank});return an(m,p),h}function Ine(t,i){return Ds(i,function(o){var l=t.inEdges(o);if(l.length){var h=fv(l,function(p,m){var b=t.edge(m),x=t.node(m.v);return{sum:p.sum+b.weight*x.order,weight:p.weight+b.weight}},{sum:0,weight:0});return{v:o,barycenter:h.sum/h.weight,weight:h.weight}}else return{v:o}})}function Dne(t,i){var o={};an(t,function(h,p){var m=o[h.v]={indegree:0,in:[],out:[],vs:[h.v],i:p};ws(h.barycenter)||(m.barycenter=h.barycenter,m.weight=h.weight)}),an(i.edges(),function(h){var p=o[h.v],m=o[h.w];!ws(p)&&!ws(m)&&(m.indegree++,p.out.push(o[h.w]))});var l=Wu(o,function(h){return!h.indegree});return Nne(l)}function Nne(t){var i=[];function o(p){return function(m){m.merged||(ws(m.barycenter)||ws(p.barycenter)||m.barycenter>=p.barycenter)&&One(p,m)}}function l(p){return function(m){m.in.push(p),--m.indegree===0&&t.push(m)}}for(;t.length;){var h=t.pop();i.push(h),an(h.in.reverse(),o(h)),an(h.out,l(h))}return Ds(Wu(i,function(p){return!p.merged}),function(p){return dv(p,["vs","i","barycenter","weight"])})}function One(t,i){var o=0,l=0;t.weight&&(o+=t.barycenter*t.weight,l+=t.weight),i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),t.vs=i.vs.concat(t.vs),t.barycenter=o/l,t.weight=l,t.i=Math.min(i.i,t.i),i.merged=!0}function Fne(t,i){var o=mne(t,function(L){return Oi(L,"barycenter")}),l=o.lhs,h=pv(o.rhs,function(L){return-L.i}),p=[],m=0,b=0,x=0;l.sort(Bne(!!i)),x=pR(p,h,x),an(l,function(L){x+=L.vs.length,p.push(L.vs),m+=L.barycenter*L.weight,b+=L.weight,x=pR(p,h,x)});var E={vs:r0(p)};return b&&(E.barycenter=m/b,E.weight=b),E}function pR(t,i,o){for(var l;i.length&&(l=$2(i)).i<=o;)i.pop(),t.push(l.vs),o++;return o}function Bne(t){return function(i,o){return i.barycenter<o.barycenter?-1:i.barycenter>o.barycenter?1:t?o.i-i.i:i.i-o.i}}function mR(t,i,o,l){var h=t.children(i),p=t.node(i),m=p?p.borderLeft:void 0,b=p?p.borderRight:void 0,x={};m&&(h=Wu(h,function(K){return K!==m&&K!==b}));var E=Ine(t,h);an(E,function(K){if(t.children(K.v).length){var re=mR(t,K.v,o,l);x[K.v]=re,Oi(re,"barycenter")&&Wne(K,re)}});var L=Dne(E,o);Vne(L,x);var I=Fne(L,l);if(m&&(I.vs=r0([m,I.vs,b]),t.predecessors(m).length)){var F=t.node(t.predecessors(m)[0]),W=t.node(t.predecessors(b)[0]);Oi(I,"barycenter")||(I.barycenter=0,I.weight=0),I.barycenter=(I.barycenter*I.weight+F.order+W.order)/(I.weight+2),I.weight+=2}return I}function Vne(t,i){an(t,function(o){o.vs=r0(o.vs.map(function(l){return i[l]?i[l].vs:l}))})}function Wne(t,i){ws(t.barycenter)?(t.barycenter=i.barycenter,t.weight=i.weight):(t.barycenter=(t.barycenter*t.weight+i.barycenter*i.weight)/(t.weight+i.weight),t.weight+=i.weight)}function zne(t){var i=cR(t),o=gR(t,Uf(1,i+1),"inEdges"),l=gR(t,Uf(i-1,-1,-1),"outEdges"),h=Pne(t);vR(t,h);for(var p=Number.POSITIVE_INFINITY,m,b=0,x=0;x<4;++b,++x){Une(b%2?o:l,b%4>=2),h=Z2(t);var E=Lne(t,h);E<p&&(x=0,m=vee(h),p=E)}vR(t,m)}function gR(t,i,o){return Ds(i,function(l){return Mne(t,l,o)})}function Une(t,i){var o=new Ns;an(t,function(l){var h=l.graph().root,p=mR(l,h,o,i);an(p.vs,function(m,b){l.node(m).order=b}),Tne(l,o,p.vs)})}function vR(t,i){an(i,function(o){an(o,function(l,h){t.node(l).order=h})})}function Gne(t){var i=Yne(t);an(t.graph().dummyChains,function(o){for(var l=t.node(o),h=l.edgeObj,p=Hne(t,i,h.v,h.w),m=p.path,b=p.lca,x=0,E=m[x],L=!0;o!==h.w;){if(l=t.node(o),L){for(;(E=m[x])!==b&&t.node(E).maxRank<l.rank;)x++;E===b&&(L=!1)}if(!L){for(;x<m.length-1&&t.node(E=m[x+1]).minRank<=l.rank;)x++;E=m[x]}t.setParent(o,E),o=t.successors(o)[0]}})}function Hne(t,i,o,l){var h=[],p=[],m=Math.min(i[o].low,i[l].low),b=Math.max(i[o].lim,i[l].lim),x,E;x=o;do x=t.parent(x),h.push(x);while(x&&(i[x].low>m||b>i[x].lim));for(E=x,x=l;(x=t.parent(x))!==E;)p.push(x);return{path:h.concat(p.reverse()),lca:E}}function Yne(t){var i={},o=0;function l(h){var p=o;an(t.children(h),l),i[h]={low:p,lim:o++}}return an(t.children(),l),i}function jne(t,i){var o={};function l(h,p){var m=0,b=0,x=h.length,E=$2(p);return an(p,function(L,I){var F=qne(t,L),W=F?t.node(F).order:x;(F||L===E)&&(an(p.slice(b,I+1),function(K){an(t.predecessors(K),function(re){var se=t.node(re),pe=se.order;(pe<m||W<pe)&&!(se.dummy&&t.node(K).dummy)&&yR(o,re,K)})}),b=I+1,m=W)}),p}return fv(i,l),o}function $ne(t,i){var o={};function l(p,m,b,x,E){var L;an(Uf(m,b),function(I){L=p[I],t.node(L).dummy&&an(t.predecessors(L),function(F){var W=t.node(F);W.dummy&&(W.order<x||W.order>E)&&yR(o,F,L)})})}function h(p,m){var b=-1,x,E=0;return an(m,function(L,I){if(t.node(L).dummy==="border"){var F=t.predecessors(L);F.length&&(x=t.node(F[0]).order,l(m,E,I,b,x),E=I,b=x)}l(m,E,m.length,x,p.length)}),m}return fv(i,h),o}function qne(t,i){if(t.node(i).dummy)return z4(t.predecessors(i),function(o){return t.node(o).dummy})}function yR(t,i,o){if(i>o){var l=i;i=o,o=l}var h=t[i];h||(t[i]=h={}),h[o]=!0}function Xne(t,i,o){if(i>o){var l=i;i=o,o=l}return Oi(t[i],o)}function Zne(t,i,o,l){var h={},p={},m={};return an(i,function(b){an(b,function(x,E){h[x]=x,p[x]=x,m[x]=E})}),an(i,function(b){var x=-1;an(b,function(E){var L=l(E);if(L.length){L=pv(L,function(re){return m[re]});for(var I=(L.length-1)/2,F=Math.floor(I),W=Math.ceil(I);F<=W;++F){var K=L[F];p[E]===E&&x<m[K]&&!Xne(o,E,K)&&(p[K]=E,p[E]=h[E]=h[K],x=m[K])}}})}),{root:h,align:p}}function Kne(t,i,o,l,h){var p={},m=Jne(t,i,o,h),b=h?"borderLeft":"borderRight";function x(I,F){for(var W=m.nodes(),K=W.pop(),re={};K;)re[K]?I(K):(re[K]=!0,W.push(K),W=W.concat(F(K))),K=W.pop()}function E(I){p[I]=m.inEdges(I).reduce(function(F,W){return Math.max(F,p[W.v]+m.edge(W))},0)}function L(I){var F=m.outEdges(I).reduce(function(K,re){return Math.min(K,p[re.w]-m.edge(re))},Number.POSITIVE_INFINITY),W=t.node(I);F!==Number.POSITIVE_INFINITY&&W.borderType!==b&&(p[I]=Math.max(p[I],F))}return x(E,m.predecessors.bind(m)),x(L,m.successors.bind(m)),an(l,function(I){p[I]=p[o[I]]}),p}function Jne(t,i,o,l){var h=new Ns,p=t.graph(),m=iie(p.nodesep,p.edgesep,l);return an(i,function(b){var x;an(b,function(E){var L=o[E];if(h.setNode(L),x){var I=o[x],F=h.edge(I,L);h.setEdge(I,L,Math.max(m(t,E,x),F||0))}x=E})}),h}function Qne(t,i){return H4(zu(i),function(o){var l=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;return _te(o,function(p,m){var b=rie(t,m)/2;l=Math.max(p+b,l),h=Math.min(p-b,h)}),l-h})}function eie(t,i){var o=zu(i),l=hv(o),h=zf(o);an(["u","d"],function(p){an(["l","r"],function(m){var b=p+m,x=t[b],E;if(x!==i){var L=zu(x);E=m==="l"?l-hv(L):h-zf(L),E&&(t[b]=q2(x,function(I){return I+E}))}})})}function tie(t,i){return q2(t.ul,function(o,l){if(i)return t[i.toLowerCase()][l];var h=pv(Ds(t,l));return(h[1]+h[2])/2})}function nie(t){var i=Z2(t),o=G4(jne(t,i),$ne(t,i)),l={},h;an(["u","d"],function(m){h=m==="u"?i:zu(i).reverse(),an(["l","r"],function(b){b==="r"&&(h=Ds(h,function(I){return zu(I).reverse()}));var x=(m==="u"?t.predecessors:t.successors).bind(t),E=Zne(t,h,o,x),L=Kne(t,h,E.root,E.align,b==="r");b==="r"&&(L=q2(L,function(I){return-I})),l[m+b]=L})});var p=Qne(t,l);return eie(l,p),tie(l,t.graph().align)}function iie(t,i,o){return function(l,h,p){var m=l.node(h),b=l.node(p),x=0,E;if(x+=m.width/2,Oi(m,"labelpos"))switch(m.labelpos.toLowerCase()){case"l":E=-m.width/2;break;case"r":E=m.width/2;break}if(E&&(x+=o?E:-E),E=0,x+=(m.dummy?i:t)/2,x+=(b.dummy?i:t)/2,x+=b.width/2,Oi(b,"labelpos"))switch(b.labelpos.toLowerCase()){case"l":E=b.width/2;break;case"r":E=-b.width/2;break}return E&&(x+=o?E:-E),E=0,x}}function rie(t,i){return t.node(i).width}function sie(t){t=oR(t),oie(t),an(nie(t),function(i,o){t.node(o).x=i})}function oie(t){var i=Z2(t),o=t.graph().ranksep,l=0;an(i,function(h){var p=zf(Ds(h,function(m){return t.node(m).height}));an(h,function(m){t.node(m).y=l+p/2}),l+=p+o})}function u0(t,i){var o=i&&i.debugTiming?gne:vne;o("layout",function(){var l=o("  buildLayoutGraph",function(){return vie(t)});o("  runLayout",function(){aie(l,o)}),o("  updateInputGraph",function(){lie(t,l)})})}function aie(t,i){i("    makeSpaceForEdgeLabels",function(){yie(t)}),i("    removeSelfEdges",function(){Tie(t)}),i("    acyclic",function(){cne(t)}),i("    nestingGraph.run",function(){kne(t)}),i("    rank",function(){zie(oR(t))}),i("    injectEdgeLabelProxies",function(){_ie(t)}),i("    removeEmptyRanks",function(){pne(t)}),i("    nestingGraph.cleanup",function(){Ene(t)}),i("    normalizeRanks",function(){fne(t)}),i("    assignRankMinMax",function(){bie(t)}),i("    removeEdgeLabelProxies",function(){xie(t)}),i("    normalize.run",function(){Lie(t)}),i("    parentDummyChains",function(){Gne(t)}),i("    addBorderSegments",function(){yne(t)}),i("    order",function(){zne(t)}),i("    insertSelfEdges",function(){Mie(t)}),i("    adjustCoordinateSystem",function(){_ne(t)}),i("    position",function(){sie(t)}),i("    positionSelfEdges",function(){Aie(t)}),i("    removeBorderNodes",function(){Eie(t)}),i("    normalize.undo",function(){Pie(t)}),i("    fixupEdgeLabelCoords",function(){Cie(t)}),i("    undoCoordinateSystem",function(){bne(t)}),i("    translateGraph",function(){wie(t)}),i("    assignNodeIntersects",function(){kie(t)}),i("    reversePoints",function(){Sie(t)}),i("    acyclic.undo",function(){hne(t)})}function lie(t,i){an(t.nodes(),function(o){var l=t.node(o),h=i.node(o);l&&(l.x=h.x,l.y=h.y,i.children(o).length&&(l.width=h.width,l.height=h.height))}),an(t.edges(),function(o){var l=t.edge(o),h=i.edge(o);l.points=h.points,Oi(h,"x")&&(l.x=h.x,l.y=h.y)}),t.graph().width=i.graph().width,t.graph().height=i.graph().height}var cie=["nodesep","edgesep","ranksep","marginx","marginy"],uie={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},hie=["acyclicer","ranker","rankdir","align"],die=["width","height"],fie={width:0,height:0},pie=["minlen","weight","width","height","labeloffset"],mie={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},gie=["labelpos"];function vie(t){var i=new Ns({multigraph:!0,compound:!0}),o=K4(t.graph());return i.setGraph(G4({},uie,Z4(o,cie),dv(o,hie))),an(t.nodes(),function(l){var h=K4(t.node(l));i.setNode(l,a0(Z4(h,die),fie)),i.setParent(l,t.parent(l))}),an(t.edges(),function(l){var h=K4(t.edge(l));i.setEdge(l,G4({},mie,Z4(h,pie),dv(h,gie)))}),i}function yie(t){var i=t.graph();i.ranksep/=2,an(t.edges(),function(o){var l=t.edge(o);l.minlen*=2,l.labelpos.toLowerCase()!=="c"&&(i.rankdir==="TB"||i.rankdir==="BT"?l.width+=l.labeloffset:l.height+=l.labeloffset)})}function _ie(t){an(t.edges(),function(i){var o=t.edge(i);if(o.width&&o.height){var l=t.node(i.v),h=t.node(i.w),p={rank:(h.rank-l.rank)/2+l.rank,e:i};c0(t,"edge-proxy",p,"_ep")}})}function bie(t){var i=0;an(t.nodes(),function(o){var l=t.node(o);l.borderTop&&(l.minRank=t.node(l.borderTop).rank,l.maxRank=t.node(l.borderBottom).rank,i=zf(i,l.maxRank))}),t.graph().maxRank=i}function xie(t){an(t.nodes(),function(i){var o=t.node(i);o.dummy==="edge-proxy"&&(t.edge(o.e).labelRank=o.rank,t.removeNode(i))})}function wie(t){var i=Number.POSITIVE_INFINITY,o=0,l=Number.POSITIVE_INFINITY,h=0,p=t.graph(),m=p.marginx||0,b=p.marginy||0;function x(E){var L=E.x,I=E.y,F=E.width,W=E.height;i=Math.min(i,L-F/2),o=Math.max(o,L+F/2),l=Math.min(l,I-W/2),h=Math.max(h,I+W/2)}an(t.nodes(),function(E){x(t.node(E))}),an(t.edges(),function(E){var L=t.edge(E);Oi(L,"x")&&x(L)}),i-=m,l-=b,an(t.nodes(),function(E){var L=t.node(E);L.x-=i,L.y-=l}),an(t.edges(),function(E){var L=t.edge(E);an(L.points,function(I){I.x-=i,I.y-=l}),Oi(L,"x")&&(L.x-=i),Oi(L,"y")&&(L.y-=l)}),p.width=o-i+m,p.height=h-l+b}function kie(t){an(t.edges(),function(i){var o=t.edge(i),l=t.node(i.v),h=t.node(i.w),p,m;o.points?(p=o.points[0],m=o.points[o.points.length-1]):(o.points=[],p=h,m=l),o.points.unshift(aR(l,p)),o.points.push(aR(h,m))})}function Cie(t){an(t.edges(),function(i){var o=t.edge(i);if(Oi(o,"x"))switch((o.labelpos==="l"||o.labelpos==="r")&&(o.width-=o.labeloffset),o.labelpos){case"l":o.x-=o.width/2+o.labeloffset;break;case"r":o.x+=o.width/2+o.labeloffset;break}})}function Sie(t){an(t.edges(),function(i){var o=t.edge(i);o.reversed&&o.points.reverse()})}function Eie(t){an(t.nodes(),function(i){if(t.children(i).length){var o=t.node(i),l=t.node(o.borderTop),h=t.node(o.borderBottom),p=t.node($2(o.borderLeft)),m=t.node($2(o.borderRight));o.width=Math.abs(m.x-p.x),o.height=Math.abs(h.y-l.y),o.x=p.x+o.width/2,o.y=l.y+o.height/2}}),an(t.nodes(),function(i){t.node(i).dummy==="border"&&t.removeNode(i)})}function Tie(t){an(t.edges(),function(i){if(i.v===i.w){var o=t.node(i.v);o.selfEdges||(o.selfEdges=[]),o.selfEdges.push({e:i,label:t.edge(i)}),t.removeEdge(i)}})}function Mie(t){var i=Z2(t);an(i,function(o){var l=0;an(o,function(h,p){var m=t.node(h);m.order=p+l,an(m.selfEdges,function(b){c0(t,"selfedge",{width:b.label.width,height:b.label.height,rank:m.rank,order:p+ ++l,e:b.e,label:b.label},"_se")}),delete m.selfEdges})})}function Aie(t){an(t.nodes(),function(i){var o=t.node(i);if(o.dummy==="selfedge"){var l=t.node(o.e.v),h=l.x+l.width/2,p=l.y,m=o.x-h,b=l.height/2;t.setEdge(o.e,o.label),t.removeNode(i),o.label.points=[{x:h+2*m/3,y:p-b},{x:h+5*m/6,y:p-b},{x:h+m,y:p},{x:h+5*m/6,y:p+b},{x:h+2*m/3,y:p+b}],o.label.x=o.x,o.label.y=o.y}})}function Z4(t,i){return q2(dv(t,i),Number)}function K4(t){var i={};return an(t,function(o,l){i[l.toLowerCase()]=o}),i}function Lie(t){t.graph().dummyChains=[],an(t.edges(),function(i){Rie(t,i)})}function Rie(t,i){var o=i.v,l=t.node(o).rank,h=i.w,p=t.node(h).rank,m=i.name,b=t.edge(i),x=b.labelRank;if(p!==l+1){t.removeEdge(i);var E,L,I;for(I=0,++l;l<p;++I,++l)b.points=[],L={width:0,height:0,edgeLabel:b,edgeObj:i,rank:l},E=c0(t,"edge",L,"_d"),l===x&&(L.width=b.width,L.height=b.height,L.dummy="edge-label",L.labelpos=b.labelpos),t.setEdge(o,E,{weight:b.weight},m),I===0&&t.graph().dummyChains.push(E),o=E;t.setEdge(o,h,{weight:b.weight},m)}}function Pie(t){an(t.graph().dummyChains,function(i){var o=t.node(i),l=o.edgeLabel,h;for(t.setEdge(o.edgeObj,l);o.dummy;)h=t.successors(i)[0],t.removeNode(i),l.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(l.x=o.x,l.y=o.y,l.width=o.width,l.height=o.height),i=h,o=t.node(i)})}function J4(t){var i={};function o(l){var h=t.node(l);if(Oi(i,l))return h.rank;i[l]=!0;var p=hv(Ds(t.outEdges(l),function(m){return o(m.w)-t.edge(m).minlen}));return(p===Number.POSITIVE_INFINITY||p===void 0||p===null)&&(p=0),h.rank=p}an(t.sources(),o)}function gv(t,i){return t.node(i.w).rank-t.node(i.v).rank-t.edge(i).minlen}function _R(t){var i=new Ns({directed:!1}),o=t.nodes()[0],l=t.nodeCount();i.setNode(o,{});for(var h,p;Iie(i,t)<l;)h=Die(i,t),p=i.hasNode(h.v)?gv(t,h):-gv(t,h),Nie(i,t,p);return i}function Iie(t,i){function o(l){an(i.nodeEdges(l),function(h){var p=h.v,m=l===p?h.w:p;!t.hasNode(m)&&!gv(i,h)&&(t.setNode(m,{}),t.setEdge(l,m,{}),o(m))})}return an(t.nodes(),o),t.nodeCount()}function Die(t,i){return H4(i.edges(),function(o){if(t.hasNode(o.v)!==t.hasNode(o.w))return gv(i,o)})}function Nie(t,i,o){an(t.nodes(),function(l){i.node(l).rank+=o})}function bR(t,i,o){Is(i)||(i=[i]);var l=(t.isDirected()?t.successors:t.neighbors).bind(t),h=[],p={};return an(i,function(m){if(!t.hasNode(m))throw new Error("Graph does not have node: "+m);xR(t,m,o==="post",p,l,h)}),h}function xR(t,i,o,l,h,p){Oi(l,i)||(l[i]=!0,o||p.push(i),an(h(i),function(m){xR(t,m,o,l,h,p)}),o&&p.push(i))}function Oie(t,i){return bR(t,i,"post")}function Fie(t,i){return bR(t,i,"pre")}Hf.initLowLimValues=eC,Hf.initCutValues=Q4,Hf.calcCutValue=wR,Hf.leaveEdge=CR,Hf.enterEdge=SR,Hf.exchangeEdges=ER;function Hf(t){t=dne(t),J4(t);var i=_R(t);eC(i),Q4(i,t);for(var o,l;o=CR(i);)l=SR(i,t,o),ER(i,t,o,l)}function Q4(t,i){var o=Oie(t,t.nodes());o=o.slice(0,o.length-1),an(o,function(l){Bie(t,i,l)})}function Bie(t,i,o){var l=t.node(o),h=l.parent;t.edge(o,h).cutvalue=wR(t,i,o)}function wR(t,i,o){var l=t.node(o),h=l.parent,p=!0,m=i.edge(o,h),b=0;return m||(p=!1,m=i.edge(h,o)),b=m.weight,an(i.nodeEdges(o),function(x){var E=x.v===o,L=E?x.w:x.v;if(L!==h){var I=E===p,F=i.edge(x).weight;if(b+=I?F:-F,Wie(t,o,L)){var W=t.edge(o,L).cutvalue;b+=I?-W:W}}}),b}function eC(t,i){arguments.length<2&&(i=t.nodes()[0]),kR(t,{},1,i)}function kR(t,i,o,l,h){var p=o,m=t.node(l);return i[l]=!0,an(t.neighbors(l),function(b){Oi(i,b)||(o=kR(t,i,o,b,l))}),m.low=p,m.lim=o++,h?m.parent=h:delete m.parent,o}function CR(t){return z4(t.edges(),function(i){return t.edge(i).cutvalue<0})}function SR(t,i,o){var l=o.v,h=o.w;i.hasEdge(l,h)||(l=o.w,h=o.v);var p=t.node(l),m=t.node(h),b=p,x=!1;p.lim>m.lim&&(b=m,x=!0);var E=Wu(i.edges(),function(L){return x===TR(t,t.node(L.v),b)&&x!==TR(t,t.node(L.w),b)});return H4(E,function(L){return gv(i,L)})}function ER(t,i,o,l){var h=o.v,p=o.w;t.removeEdge(h,p),t.setEdge(l.v,l.w,{}),eC(t),Q4(t,i),Vie(t,i)}function Vie(t,i){var o=z4(t.nodes(),function(h){return!i.node(h).parent}),l=Fie(t,o);l=l.slice(1),an(l,function(h){var p=t.node(h).parent,m=i.edge(h,p),b=!1;m||(m=i.edge(p,h),b=!0),i.node(h).rank=i.node(p).rank+(b?m.minlen:-m.minlen)})}function Wie(t,i,o){return t.hasEdge(i,o)}function TR(t,i,o){return o.low<=i.lim&&i.lim<=o.lim}function zie(t){switch(t.graph().ranker){case"network-simplex":MR(t);break;case"tight-tree":Gie(t);break;case"longest-path":Uie(t);break;default:MR(t)}}var Uie=J4;function Gie(t){J4(t),_R(t)}function MR(t){Hf(t)}let AR=0;const Hie=function(t,i,o,l,h){const p=function(he){switch(he){case h.db.relationType.AGGREGATION:return"aggregation";case h.db.relationType.EXTENSION:return"extension";case h.db.relationType.COMPOSITION:return"composition";case h.db.relationType.DEPENDENCY:return"dependency";case h.db.relationType.LOLLIPOP:return"lollipop"}};i.points=i.points.filter(he=>!Number.isNaN(he.y));const m=i.points,b=Bm().x(function(he){return he.x}).y(function(he){return he.y}).curve(Vm),x=t.append("path").attr("d",b(m)).attr("id","edge"+AR).attr("class","relation");let E="";l.arrowMarkerAbsolute&&(E=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,E=E.replace(/\(/g,"\\("),E=E.replace(/\)/g,"\\)")),o.relation.lineType==1&&x.attr("class","relation dashed-line"),o.relation.lineType==10&&x.attr("class","relation dotted-line"),o.relation.type1!=="none"&&x.attr("marker-start","url("+E+"#"+p(o.relation.type1)+"Start)"),o.relation.type2!=="none"&&x.attr("marker-end","url("+E+"#"+p(o.relation.type2)+"End)");let L,I;const F=i.points.length;let W=Ii.calcLabelPosition(i.points);L=W.x,I=W.y;let K,re,se,pe;if(F%2!==0&&F>1){let he=Ii.calcCardinalityPosition(o.relation.type1!=="none",i.points,i.points[0]),Ce=Ii.calcCardinalityPosition(o.relation.type2!=="none",i.points,i.points[F-1]);y.debug("cardinality_1_point "+JSON.stringify(he)),y.debug("cardinality_2_point "+JSON.stringify(Ce)),K=he.x,re=he.y,se=Ce.x,pe=Ce.y}if(o.title!==void 0){const he=t.append("g").attr("class","classLabel"),Ce=he.append("text").attr("class","label").attr("x",L).attr("y",I).attr("fill","red").attr("text-anchor","middle").text(o.title);window.label=Ce;const Le=Ce.node().getBBox();he.insert("rect",":first-child").attr("class","box").attr("x",Le.x-l.padding/2).attr("y",Le.y-l.padding/2).attr("width",Le.width+l.padding).attr("height",Le.height+l.padding)}y.info("Rendering relation "+JSON.stringify(o)),o.relationTitle1!==void 0&&o.relationTitle1!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",K).attr("y",re).attr("fill","black").attr("font-size","6").text(o.relationTitle1),o.relationTitle2!==void 0&&o.relationTitle2!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",se).attr("y",pe).attr("fill","black").attr("font-size","6").text(o.relationTitle2),AR++},Yie=function(t,i,o,l){y.debug("Rendering class ",i,o);const h=i.id,p={id:h,label:i.id,width:0,height:0},m=t.append("g").attr("id",l.db.lookUpDomId(h)).attr("class","classGroup");let b;i.link?b=m.append("svg:a").attr("xlink:href",i.link).attr("target",i.linkTarget).append("text").attr("y",o.textHeight+o.padding).attr("x",0):b=m.append("text").attr("y",o.textHeight+o.padding).attr("x",0);let x=!0;i.annotations.forEach(function(Ve){const je=b.append("tspan").text("\xAB"+Ve+"\xBB");x||je.attr("dy",o.textHeight),x=!1});let E=i.id;i.type!==void 0&&i.type!==""&&(E+="<"+i.type+">");const L=b.append("tspan").text(E).attr("class","title");x||L.attr("dy",o.textHeight);const I=b.node().getBBox().height,F=m.append("line").attr("x1",0).attr("y1",o.padding+I+o.dividerMargin/2).attr("y2",o.padding+I+o.dividerMargin/2),W=m.append("text").attr("x",o.padding).attr("y",I+o.dividerMargin+o.textHeight).attr("fill","white").attr("class","classText");x=!0,i.members.forEach(function(Ve){LR(W,Ve,x,o),x=!1});const K=W.node().getBBox(),re=m.append("line").attr("x1",0).attr("y1",o.padding+I+o.dividerMargin+K.height).attr("y2",o.padding+I+o.dividerMargin+K.height),se=m.append("text").attr("x",o.padding).attr("y",I+2*o.dividerMargin+K.height+o.textHeight).attr("fill","white").attr("class","classText");x=!0,i.methods.forEach(function(Ve){LR(se,Ve,x,o),x=!1});const pe=m.node().getBBox();var he=" ";i.cssClasses.length>0&&(he=he+i.cssClasses.join(" "));const Le=m.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",pe.width+2*o.padding).attr("height",pe.height+o.padding+.5*o.dividerMargin).attr("class",he).node().getBBox().width;return b.node().childNodes.forEach(function(Ve){Ve.setAttribute("x",(Le-Ve.getBBox().width)/2)}),i.tooltip&&b.insert("title").text(i.tooltip),F.attr("x2",Le),re.attr("x2",Le),p.width=Le,p.height=pe.height+o.padding+.5*o.dividerMargin,p},jie=function(t,i,o,l){y.debug("Rendering note ",i,o);const h=i.id,p={id:h,text:i.text,width:0,height:0},m=t.append("g").attr("id",h).attr("class","classGroup");let b=m.append("text").attr("y",o.textHeight+o.padding).attr("x",0);const x=JSON.parse(`"${i.text}"`).split(`
`);x.forEach(function(F){y.debug(`Adding line: ${F}`),b.append("tspan").text(F).attr("class","title").attr("dy",o.textHeight)});const E=m.node().getBBox(),I=m.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",E.width+2*o.padding).attr("height",E.height+x.length*o.textHeight+o.padding+.5*o.dividerMargin).node().getBBox().width;return b.node().childNodes.forEach(function(F){F.setAttribute("x",(I-F.getBBox().width)/2)}),p.width=I,p.height=E.height+x.length*o.textHeight+o.padding+.5*o.dividerMargin,p},K2=function(t){const i=/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/,o=/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/;let l=t.match(i),h=t.match(o);return l&&!h?$ie(l):h?qie(h):Xie(t)},$ie=function(t){let i="",o="";try{let l=t[1]?t[1].trim():"",h=t[2]?t[2].trim():"",p=t[3]?Jh(t[3].trim()):"",m=t[4]?t[4].trim():"",b=t[5]?t[5].trim():"";o=l+h+p+" "+m,i=tC(b)}catch{o=t}return{displayText:o,cssStyle:i}},qie=function(t){let i="",o="";try{let l=t[1]?t[1].trim():"",h=t[2]?t[2].trim():"",p=t[3]?Jh(t[3].trim()):"",m=t[4]?t[4].trim():"",b=t[5]?" : "+Jh(t[5]).trim():"";o=l+h+"("+p+")"+b,i=tC(m)}catch{o=t}return{displayText:o,cssStyle:i}},Xie=function(t){let i="",o="",l="",h=t.indexOf("("),p=t.indexOf(")");if(h>1&&p>h&&p<=t.length){let m="",b="",x=t.substring(0,1);x.match(/\w/)?b=t.substring(0,h).trim():(x.match(/[#+~-]/)&&(m=x),b=t.substring(1,h).trim());const E=t.substring(h+1,p);t.substring(p+1,1),o=tC(t.substring(p+1,p+2)),i=m+b+"("+Jh(E.trim())+")",p<t.length&&(l=t.substring(p+2).trim(),l!==""&&(l=" : "+Jh(l),i+=l))}else i=Jh(t);return{displayText:i,cssStyle:o}},LR=function(t,i,o,l){let h=K2(i);const p=t.append("tspan").attr("x",l.padding).text(h.displayText);h.cssStyle!==""&&p.attr("style",h.cssStyle),o||p.attr("dy",l.textHeight)},tC=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},nC={drawClass:Yie,drawEdge:Hie,drawNote:jie,parseMember:K2};let J2={};const Q2=20,vv=function(t){const i=Object.entries(J2).find(o=>o[1].label===t);if(i)return i[0]},Zie=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Kie={draw:function(t,i,o,l){const h=Qe().class;J2={},y.info("Rendering diagram "+t);const p=Qe().securityLevel;let m;p==="sandbox"&&(m=dn("#i"+i));const b=dn(p==="sandbox"?m.nodes()[0].contentDocument.body:"body"),x=b.select(`[id='${i}']`);Zie(x);const E=new Ns({multigraph:!0});E.setGraph({isMultiGraph:!0}),E.setDefaultEdgeLabel(function(){return{}});const L=l.db.getClasses(),I=Object.keys(L);for(const he of I){const Ce=L[he],Le=nC.drawClass(x,Ce,h,l);J2[Le.id]=Le,E.setNode(Le.id,Le),y.info("Org height: "+Le.height)}l.db.getRelations().forEach(function(he){y.info("tjoho"+vv(he.id1)+vv(he.id2)+JSON.stringify(he)),E.setEdge(vv(he.id1),vv(he.id2),{relation:he},he.title||"DEFAULT")}),l.db.getNotes().forEach(function(he){y.debug(`Adding note: ${JSON.stringify(he)}`);const Ce=nC.drawNote(x,he,h,l);J2[Ce.id]=Ce,E.setNode(Ce.id,Ce),he.class&&he.class in L&&E.setEdge(he.id,vv(he.class),{relation:{id1:he.id,id2:he.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),u0(E),E.nodes().forEach(function(he){he!==void 0&&E.node(he)!==void 0&&(y.debug("Node "+he+": "+JSON.stringify(E.node(he))),b.select("#"+(l.db.lookUpDomId(he)||he)).attr("transform","translate("+(E.node(he).x-E.node(he).width/2)+","+(E.node(he).y-E.node(he).height/2)+" )"))}),E.edges().forEach(function(he){he!==void 0&&E.edge(he)!==void 0&&(y.debug("Edge "+he.v+" -> "+he.w+": "+JSON.stringify(E.edge(he))),nC.drawEdge(x,E.edge(he),E.edge(he).relation,h,l))});const K=x.node().getBBox(),re=K.width+Q2*2,se=K.height+Q2*2;Hl(x,se,re,h.useMaxWidth);const pe=`${K.x-Q2} ${K.y-Q2} ${re} ${se}`;y.debug(`viewBox ${pe}`),x.attr("viewBox",pe)}};function Uu(t){var i={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Jie(t),edges:Qie(t)};return ws(t.graph())||(i.value=pee(t.graph())),i}function Jie(t){return Ds(t.nodes(),function(i){var o=t.node(i),l=t.parent(i),h={v:i};return ws(o)||(h.value=o),ws(l)||(h.parent=l),h})}function Qie(t){return Ds(t.edges(),function(i){var o=t.edge(i),l={v:i.v,w:i.w};return ws(i.name)||(l.name=i.name),ws(o)||(l.value=o),l})}const ere=(t,i,o,l)=>{i.forEach(h=>{tre[h](t,o,l)})},tre={extension:(t,i,o)=>{y.trace("Making markers for ",o),t.append("defs").append("marker").attr("id",i+"-extensionStart").attr("class","marker extension "+i).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",i+"-extensionEnd").attr("class","marker extension "+i).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,i)=>{t.append("defs").append("marker").attr("id",i+"-compositionStart").attr("class","marker composition "+i).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"-compositionEnd").attr("class","marker composition "+i).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,i)=>{t.append("defs").append("marker").attr("id",i+"-aggregationStart").attr("class","marker aggregation "+i).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"-aggregationEnd").attr("class","marker aggregation "+i).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,i)=>{t.append("defs").append("marker").attr("id",i+"-dependencyStart").attr("class","marker dependency "+i).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"-dependencyEnd").attr("class","marker dependency "+i).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,i)=>{t.append("defs").append("marker").attr("id",i+"-lollipopStart").attr("class","marker lollipop "+i).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(t,i)=>{t.append("marker").attr("id",i+"-pointEnd").attr("class","marker "+i).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"-pointStart").attr("class","marker "+i).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,i)=>{t.append("marker").attr("id",i+"-circleEnd").attr("class","marker "+i).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"-circleStart").attr("class","marker "+i).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,i)=>{t.append("marker").attr("id",i+"-crossEnd").attr("class","marker cross "+i).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"-crossStart").attr("class","marker cross "+i).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,i)=>{t.append("defs").append("marker").attr("id",i+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},nre=ere;function ire(t,i){i&&t.attr("style",i)}function rre(t){const i=dn(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),o=i.append("xhtml:div"),l=t.label,h=t.isNode?"nodeLabel":"edgeLabel";return o.html('<span class="'+h+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+l+"</span>"),ire(o,t.labelStyle),o.style("display","inline-block"),o.style("white-space","nowrap"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),i.node()}const ya=(t,i,o,l)=>{let h=t||"";if(typeof h=="object"&&(h=h[0]),lo(Qe().flowchart.htmlLabels)){h=h.replace(/\\n|\n/g,"<br />"),y.info("vertexText"+h);const p={isNode:l,label:mS(h).replace(/fa[blrs]?:fa-[\w-]+/g,b=>`<i class='${b.replace(":"," ")}'></i>`),labelStyle:i.replace("fill:","color:")};return rre(p)}else{const p=document.createElementNS("http://www.w3.org/2000/svg","text");p.setAttribute("style",i.replace("color:","fill:"));let m=[];typeof h=="string"?m=h.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(h)?m=h:m=[];for(const b of m){const x=document.createElementNS("http://www.w3.org/2000/svg","tspan");x.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),x.setAttribute("dy","1em"),x.setAttribute("x","0"),o?x.setAttribute("class","title-row"):x.setAttribute("class","row"),x.textContent=b.trim(),p.appendChild(x)}return p}},Oo=(t,i,o,l)=>{let h;o?h=o:h="node default";const p=t.insert("g").attr("class",h).attr("id",i.domId||i.id),m=p.insert("g").attr("class","label").attr("style",i.labelStyle);let b;i.labelText===void 0?b="":b=typeof i.labelText=="string"?i.labelText:i.labelText[0];const x=m.node().appendChild(ya(Wl(mS(b),Qe()),i.labelStyle,!1,l));let E=x.getBBox();if(lo(Qe().flowchart.htmlLabels)){const I=x.children[0],F=dn(x);E=I.getBoundingClientRect(),F.attr("width",E.width),F.attr("height",E.height)}const L=i.padding/2;return m.attr("transform","translate("+-E.width/2+", "+-E.height/2+")"),{shapeSvg:p,bbox:E,halfPadding:L,label:m}},ks=(t,i)=>{const o=i.node().getBBox();t.width=o.width,t.height=o.height};function Gu(t,i,o,l){return t.insert("polygon",":first-child").attr("points",l.map(function(h){return h.x+","+h.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-i/2+","+o/2+")")}let sr={},Ql={},RR={};const sre=()=>{Ql={},RR={},sr={}},ex=(t,i)=>(y.trace("In isDecendant",i," ",t," = ",Ql[i].includes(t)),!!Ql[i].includes(t)),ore=(t,i)=>(y.info("Decendants of ",i," is ",Ql[i]),y.info("Edge is ",t),t.v===i||t.w===i?!1:Ql[i]?Ql[i].includes(t.v)||ex(t.v,i)||ex(t.w,i)||Ql[i].includes(t.w):(y.debug("Tilt, ",i,",not in decendants"),!1)),PR=(t,i,o,l)=>{y.warn("Copying children of ",t,"root",l,"data",i.node(t),l);const h=i.children(t)||[];t!==l&&h.push(t),y.warn("Copying (nodes) clusterId",t,"nodes",h),h.forEach(p=>{if(i.children(p).length>0)PR(p,i,o,l);else{const m=i.node(p);y.info("cp ",p," to ",l," with parent ",t),o.setNode(p,m),l!==i.parent(p)&&(y.warn("Setting parent",p,i.parent(p)),o.setParent(p,i.parent(p))),t!==l&&p!==t?(y.debug("Setting parent",p,t),o.setParent(p,t)):(y.info("In copy ",t,"root",l,"data",i.node(t),l),y.debug("Not Setting parent for node=",p,"cluster!==rootId",t!==l,"node!==clusterId",p!==t));const b=i.edges(p);y.debug("Copying Edges",b),b.forEach(x=>{y.info("Edge",x);const E=i.edge(x.v,x.w,x.name);y.info("Edge data",E,l);try{ore(x,l)?(y.info("Copying as ",x.v,x.w,E,x.name),o.setEdge(x.v,x.w,E,x.name),y.info("newGraph edges ",o.edges(),o.edge(o.edges()[0]))):y.info("Skipping copy of edge ",x.v,"-->",x.w," rootId: ",l," clusterId:",t)}catch(L){y.error(L)}})}y.debug("Removing node",p),i.removeNode(p)})},IR=(t,i)=>{const o=i.children(t);let l=[...o];for(const h of o)RR[h]=t,l=[...l,...IR(h,i)];return l},yv=(t,i)=>{y.trace("Searching",t);const o=i.children(t);if(y.trace("Searching children of id ",t,o),o.length<1)return y.trace("This is a valid node",t),t;for(const l of o){const h=yv(l,i);if(h)return y.trace("Found replacement for",t," => ",h),h}},tx=t=>!sr[t]||!sr[t].externalConnections?t:sr[t]?sr[t].id:t,are=(t,i)=>{if(!t||i>10){y.debug("Opting out, no graph ");return}else y.debug("Opting in, graph ");t.nodes().forEach(function(o){t.children(o).length>0&&(y.warn("Cluster identified",o," Replacement id in edges: ",yv(o,t)),Ql[o]=IR(o,t),sr[o]={id:yv(o,t),clusterData:t.node(o)})}),t.nodes().forEach(function(o){const l=t.children(o),h=t.edges();l.length>0?(y.debug("Cluster identified",o,Ql),h.forEach(p=>{if(p.v!==o&&p.w!==o){const m=ex(p.v,o),b=ex(p.w,o);m^b&&(y.warn("Edge: ",p," leaves cluster ",o),y.warn("Decendants of XXX ",o,": ",Ql[o]),sr[o].externalConnections=!0)}})):y.debug("Not a cluster ",o,Ql)}),t.edges().forEach(function(o){const l=t.edge(o);y.warn("Edge "+o.v+" -> "+o.w+": "+JSON.stringify(o)),y.warn("Edge "+o.v+" -> "+o.w+": "+JSON.stringify(t.edge(o)));let h=o.v,p=o.w;if(y.warn("Fix XXX",sr,"ids:",o.v,o.w,"Translating: ",sr[o.v]," --- ",sr[o.w]),sr[o.v]&&sr[o.w]&&sr[o.v]===sr[o.w]){y.warn("Fixing and trixing link to self - removing XXX",o.v,o.w,o.name),y.warn("Fixing and trixing - removing XXX",o.v,o.w,o.name),h=tx(o.v),p=tx(o.w),t.removeEdge(o.v,o.w,o.name);const m=o.w+"---"+o.v;t.setNode(m,{domId:m,id:m,labelStyle:"",labelText:l.label,padding:0,shape:"labelRect",style:""});const b=JSON.parse(JSON.stringify(l)),x=JSON.parse(JSON.stringify(l));b.label="",b.arrowTypeEnd="none",x.label="",b.fromCluster=o.v,x.toCluster=o.v,t.setEdge(h,m,b,o.name+"-cyclic-special"),t.setEdge(m,p,x,o.name+"-cyclic-special")}else(sr[o.v]||sr[o.w])&&(y.warn("Fixing and trixing - removing XXX",o.v,o.w,o.name),h=tx(o.v),p=tx(o.w),t.removeEdge(o.v,o.w,o.name),h!==o.v&&(l.fromCluster=o.v),p!==o.w&&(l.toCluster=o.w),y.warn("Fix Replacing with XXX",h,p,o.name),t.setEdge(h,p,l,o.name))}),y.warn("Adjusted Graph",Uu(t)),DR(t,0),y.trace(sr)},DR=(t,i)=>{if(y.warn("extractor - ",i,Uu(t),t.children("D")),i>10){y.error("Bailing out");return}let o=t.nodes(),l=!1;for(const h of o){const p=t.children(h);l=l||p.length>0}if(!l){y.debug("Done, no node has children",t.nodes());return}y.debug("Nodes = ",o,i);for(const h of o)if(y.debug("Extracting node",h,sr,sr[h]&&!sr[h].externalConnections,!t.parent(h),t.node(h),t.children("D")," Depth ",i),!sr[h])y.debug("Not a cluster",h,i);else if(!sr[h].externalConnections&&t.children(h)&&t.children(h).length>0){y.warn("Cluster without external connections, without a parent and with children",h,i);let m=t.graph().rankdir==="TB"?"LR":"TB";sr[h]&&sr[h].clusterData&&sr[h].clusterData.dir&&(m=sr[h].clusterData.dir,y.warn("Fixing dir",sr[h].clusterData.dir,m));const b=new Ns({multigraph:!0,compound:!0}).setGraph({rankdir:m,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});y.warn("Old graph before copy",Uu(t)),PR(h,t,b,h),t.setNode(h,{clusterNode:!0,id:h,clusterData:sr[h].clusterData,labelText:sr[h].labelText,graph:b}),y.warn("New graph after copy node: (",h,")",Uu(b)),y.debug("Old graph after copy",Uu(t))}else y.warn("Cluster ** ",h," **not meeting the criteria !externalConnections:",!sr[h].externalConnections," no parent: ",!t.parent(h)," children ",t.children(h)&&t.children(h).length>0,t.children("D"),i),y.debug(sr);o=t.nodes(),y.warn("New list of nodes",o);for(const h of o){const p=t.node(h);y.warn(" Now next level",h,p),p.clusterNode&&DR(p.graph,i+1)}},NR=(t,i)=>{if(i.length===0)return[];let o=Object.assign(i);return i.forEach(l=>{const h=t.children(l),p=NR(t,h);o=[...o,...p]}),o},lre=t=>NR(t,t.children());function cre(t,i){return t.intersect(i)}function OR(t,i,o,l){var h=t.x,p=t.y,m=h-l.x,b=p-l.y,x=Math.sqrt(i*i*b*b+o*o*m*m),E=Math.abs(i*o*m/x);l.x<h&&(E=-E);var L=Math.abs(i*o*b/x);return l.y<p&&(L=-L),{x:h+E,y:p+L}}function ure(t,i,o){return OR(t,i,i,o)}function hre(t,i,o,l){var h,p,m,b,x,E,L,I,F,W,K,re,se,pe,he;if(h=i.y-t.y,m=t.x-i.x,x=i.x*t.y-t.x*i.y,F=h*o.x+m*o.y+x,W=h*l.x+m*l.y+x,!(F!==0&&W!==0&&FR(F,W))&&(p=l.y-o.y,b=o.x-l.x,E=l.x*o.y-o.x*l.y,L=p*t.x+b*t.y+E,I=p*i.x+b*i.y+E,!(L!==0&&I!==0&&FR(L,I))&&(K=h*b-p*m,K!==0)))return re=Math.abs(K/2),se=m*E-b*x,pe=se<0?(se-re)/K:(se+re)/K,se=p*x-h*E,he=se<0?(se-re)/K:(se+re)/K,{x:pe,y:he}}function FR(t,i){return t*i>0}function dre(t,i,o){var l=t.x,h=t.y,p=[],m=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY;typeof i.forEach=="function"?i.forEach(function(K){m=Math.min(m,K.x),b=Math.min(b,K.y)}):(m=Math.min(m,i.x),b=Math.min(b,i.y));for(var x=l-t.width/2-m,E=h-t.height/2-b,L=0;L<i.length;L++){var I=i[L],F=i[L<i.length-1?L+1:0],W=hre(t,o,{x:x+I.x,y:E+I.y},{x:x+F.x,y:E+F.y});W&&p.push(W)}return p.length?(p.length>1&&p.sort(function(K,re){var se=K.x-o.x,pe=K.y-o.y,he=Math.sqrt(se*se+pe*pe),Ce=re.x-o.x,Le=re.y-o.y,Ve=Math.sqrt(Ce*Ce+Le*Le);return he<Ve?-1:he===Ve?0:1}),p[0]):t}const _v=(t,i)=>{var o=t.x,l=t.y,h=i.x-o,p=i.y-l,m=t.width/2,b=t.height/2,x,E;return Math.abs(p)*m>Math.abs(h)*b?(p<0&&(b=-b),x=p===0?0:b*h/p,E=b):(h<0&&(m=-m),x=m,E=h===0?0:m*p/h),{x:o+x,y:l+E}},ps={node:cre,circle:ure,ellipse:OR,polygon:dre,rect:_v},fre=(t,i)=>{const{shapeSvg:o,bbox:l,halfPadding:h}=Oo(t,i,"node "+i.classes,!0);y.info("Classes = ",i.classes);const p=o.insert("rect",":first-child");return p.attr("rx",i.rx).attr("ry",i.ry).attr("x",-l.width/2-h).attr("y",-l.height/2-h).attr("width",l.width+i.padding).attr("height",l.height+i.padding),ks(i,p),i.intersect=function(m){return ps.rect(i,m)},o},pre=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=l.width+i.padding,p=l.height+i.padding,m=h+p,b=[{x:m/2,y:0},{x:m,y:-m/2},{x:m/2,y:-m},{x:0,y:-m/2}];y.info("Question main (Circle)");const x=Gu(o,m,m,b);return x.attr("style",i.style),ks(i,x),i.intersect=function(E){return y.warn("Intersect called"),ps.polygon(i,b,E)},o},mre=(t,i)=>{const o=t.insert("g").attr("class","node default").attr("id",i.domId||i.id),l=28,h=[{x:0,y:l/2},{x:l/2,y:0},{x:0,y:-l/2},{x:-l/2,y:0}];return o.insert("polygon",":first-child").attr("points",h.map(function(m){return m.x+","+m.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),i.width=28,i.height=28,i.intersect=function(m){return ps.circle(i,14,m)},o},gre=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=4,p=l.height+i.padding,m=p/h,b=l.width+2*m+i.padding,x=[{x:m,y:0},{x:b-m,y:0},{x:b,y:-p/2},{x:b-m,y:-p},{x:m,y:-p},{x:0,y:-p/2}],E=Gu(o,b,p,x);return E.attr("style",i.style),ks(i,E),i.intersect=function(L){return ps.polygon(i,x,L)},o},vre=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=l.width+i.padding,p=l.height+i.padding,m=[{x:-p/2,y:0},{x:h,y:0},{x:h,y:-p},{x:-p/2,y:-p},{x:0,y:-p/2}];return Gu(o,h,p,m).attr("style",i.style),i.width=h+p,i.height=p,i.intersect=function(x){return ps.polygon(i,m,x)},o},yre=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=l.width+i.padding,p=l.height+i.padding,m=[{x:-2*p/6,y:0},{x:h-p/6,y:0},{x:h+2*p/6,y:-p},{x:p/6,y:-p}],b=Gu(o,h,p,m);return b.attr("style",i.style),ks(i,b),i.intersect=function(x){return ps.polygon(i,m,x)},o},_re=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=l.width+i.padding,p=l.height+i.padding,m=[{x:2*p/6,y:0},{x:h+p/6,y:0},{x:h-2*p/6,y:-p},{x:-p/6,y:-p}],b=Gu(o,h,p,m);return b.attr("style",i.style),ks(i,b),i.intersect=function(x){return ps.polygon(i,m,x)},o},bre=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=l.width+i.padding,p=l.height+i.padding,m=[{x:-2*p/6,y:0},{x:h+2*p/6,y:0},{x:h-p/6,y:-p},{x:p/6,y:-p}],b=Gu(o,h,p,m);return b.attr("style",i.style),ks(i,b),i.intersect=function(x){return ps.polygon(i,m,x)},o},xre=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=l.width+i.padding,p=l.height+i.padding,m=[{x:p/6,y:0},{x:h-p/6,y:0},{x:h+2*p/6,y:-p},{x:-2*p/6,y:-p}],b=Gu(o,h,p,m);return b.attr("style",i.style),ks(i,b),i.intersect=function(x){return ps.polygon(i,m,x)},o},wre=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=l.width+i.padding,p=l.height+i.padding,m=[{x:0,y:0},{x:h+p/2,y:0},{x:h,y:-p/2},{x:h+p/2,y:-p},{x:0,y:-p}],b=Gu(o,h,p,m);return b.attr("style",i.style),ks(i,b),i.intersect=function(x){return ps.polygon(i,m,x)},o},kre=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=l.width+i.padding,p=h/2,m=p/(2.5+h/50),b=l.height+m+i.padding,x="M 0,"+m+" a "+p+","+m+" 0,0,0 "+h+" 0 a "+p+","+m+" 0,0,0 "+-h+" 0 l 0,"+b+" a "+p+","+m+" 0,0,0 "+h+" 0 l 0,"+-b,E=o.attr("label-offset-y",m).insert("path",":first-child").attr("style",i.style).attr("d",x).attr("transform","translate("+-h/2+","+-(b/2+m)+")");return ks(i,E),i.intersect=function(L){const I=ps.rect(i,L),F=I.x-i.x;if(p!=0&&(Math.abs(F)<i.width/2||Math.abs(F)==i.width/2&&Math.abs(I.y-i.y)>i.height/2-m)){let W=m*m*(1-F*F/(p*p));W!=0&&(W=Math.sqrt(W)),W=m-W,L.y-i.y>0&&(W=-W),I.y+=W}return I},o},Cre=(t,i)=>{const{shapeSvg:o,bbox:l,halfPadding:h}=Oo(t,i,"node "+i.classes,!0);y.trace("Classes = ",i.classes);const p=o.insert("rect",":first-child"),m=l.width+i.padding,b=l.height+i.padding;if(p.attr("class","basic label-container").attr("style",i.style).attr("rx",i.rx).attr("ry",i.ry).attr("x",-l.width/2-h).attr("y",-l.height/2-h).attr("width",m).attr("height",b),i.props){const x=new Set(Object.keys(i.props));i.props.borders&&(BR(p,i.props.borders,m,b),x.delete("borders")),x.forEach(E=>{y.warn(`Unknown node property ${E}`)})}return ks(i,p),i.intersect=function(x){return ps.rect(i,x)},o},Sre=(t,i)=>{const{shapeSvg:o}=Oo(t,i,"label",!0);y.trace("Classes = ",i.classes);const l=o.insert("rect",":first-child"),h=0,p=0;if(l.attr("width",h).attr("height",p),o.attr("class","label edgeLabel"),i.props){const m=new Set(Object.keys(i.props));i.props.borders&&(BR(l,i.props.borders,h,p),m.delete("borders")),m.forEach(b=>{y.warn(`Unknown node property ${b}`)})}return ks(i,l),i.intersect=function(m){return ps.rect(i,m)},o};function BR(t,i,o,l){const h=[],p=b=>{h.push(b,0)},m=b=>{h.push(0,b)};i.includes("t")?(y.debug("add top border"),p(o)):m(o),i.includes("r")?(y.debug("add right border"),p(l)):m(l),i.includes("b")?(y.debug("add bottom border"),p(o)):m(o),i.includes("l")?(y.debug("add left border"),p(l)):m(l),t.attr("stroke-dasharray",h.join(" "))}const Ere=(t,i)=>{let o;i.classes?o="node "+i.classes:o="node default";const l=t.insert("g").attr("class",o).attr("id",i.domId||i.id),h=l.insert("rect",":first-child"),p=l.insert("line"),m=l.insert("g").attr("class","label"),b=i.labelText.flat?i.labelText.flat():i.labelText;let x="";typeof b=="object"?x=b[0]:x=b,y.info("Label text abc79",x,b,typeof b=="object");const E=m.node().appendChild(ya(x,i.labelStyle,!0,!0));let L={width:0,height:0};if(lo(Qe().flowchart.htmlLabels)){const re=E.children[0],se=dn(E);L=re.getBoundingClientRect(),se.attr("width",L.width),se.attr("height",L.height)}y.info("Text 2",b);const I=b.slice(1,b.length);let F=E.getBBox();const W=m.node().appendChild(ya(I.join?I.join("<br/>"):I,i.labelStyle,!0,!0));if(lo(Qe().flowchart.htmlLabels)){const re=W.children[0],se=dn(W);L=re.getBoundingClientRect(),se.attr("width",L.width),se.attr("height",L.height)}const K=i.padding/2;return dn(W).attr("transform","translate( "+(L.width>F.width?0:(F.width-L.width)/2)+", "+(F.height+K+5)+")"),dn(E).attr("transform","translate( "+(L.width<F.width?0:-(F.width-L.width)/2)+", "+0+")"),L=m.node().getBBox(),m.attr("transform","translate("+-L.width/2+", "+(-L.height/2-K+3)+")"),h.attr("class","outer title-state").attr("x",-L.width/2-K).attr("y",-L.height/2-K).attr("width",L.width+i.padding).attr("height",L.height+i.padding),p.attr("class","divider").attr("x1",-L.width/2-K).attr("x2",L.width/2+K).attr("y1",-L.height/2-K+F.height+K).attr("y2",-L.height/2-K+F.height+K),ks(i,h),i.intersect=function(re){return ps.rect(i,re)},l},Tre=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=l.height+i.padding,p=l.width+h/4+i.padding,m=o.insert("rect",":first-child").attr("style",i.style).attr("rx",h/2).attr("ry",h/2).attr("x",-p/2).attr("y",-h/2).attr("width",p).attr("height",h);return ks(i,m),i.intersect=function(b){return ps.rect(i,b)},o},Mre=(t,i)=>{const{shapeSvg:o,bbox:l,halfPadding:h}=Oo(t,i,void 0,!0),p=o.insert("circle",":first-child");return p.attr("style",i.style).attr("rx",i.rx).attr("ry",i.ry).attr("r",l.width/2+h).attr("width",l.width+i.padding).attr("height",l.height+i.padding),y.info("Circle main"),ks(i,p),i.intersect=function(m){return y.info("Circle intersect",i,l.width/2+h,m),ps.circle(i,l.width/2+h,m)},o},Are=(t,i)=>{const{shapeSvg:o,bbox:l,halfPadding:h}=Oo(t,i,void 0,!0),p=5,m=o.insert("g",":first-child"),b=m.insert("circle"),x=m.insert("circle");return b.attr("style",i.style).attr("rx",i.rx).attr("ry",i.ry).attr("r",l.width/2+h+p).attr("width",l.width+i.padding+p*2).attr("height",l.height+i.padding+p*2),x.attr("style",i.style).attr("rx",i.rx).attr("ry",i.ry).attr("r",l.width/2+h).attr("width",l.width+i.padding).attr("height",l.height+i.padding),y.info("DoubleCircle main"),ks(i,b),i.intersect=function(E){return y.info("DoubleCircle intersect",i,l.width/2+h+p,E),ps.circle(i,l.width/2+h+p,E)},o},Lre=(t,i)=>{const{shapeSvg:o,bbox:l}=Oo(t,i,void 0,!0),h=l.width+i.padding,p=l.height+i.padding,m=[{x:0,y:0},{x:h,y:0},{x:h,y:-p},{x:0,y:-p},{x:0,y:0},{x:-8,y:0},{x:h+8,y:0},{x:h+8,y:-p},{x:-8,y:-p},{x:-8,y:0}],b=Gu(o,h,p,m);return b.attr("style",i.style),ks(i,b),i.intersect=function(x){return ps.polygon(i,m,x)},o},Rre=(t,i)=>{const o=t.insert("g").attr("class","node default").attr("id",i.domId||i.id),l=o.insert("circle",":first-child");return l.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),ks(i,l),i.intersect=function(h){return ps.circle(i,7,h)},o},VR=(t,i,o)=>{const l=t.insert("g").attr("class","node default").attr("id",i.domId||i.id);let h=70,p=10;o==="LR"&&(h=10,p=70);const m=l.append("rect").attr("x",-1*h/2).attr("y",-1*p/2).attr("width",h).attr("height",p).attr("class","fork-join");return ks(i,m),i.height=i.height+i.padding/2,i.width=i.width+i.padding/2,i.intersect=function(b){return ps.rect(i,b)},l},WR={question:pre,rect:Cre,labelRect:Sre,rectWithTitle:Ere,choice:mre,circle:Mre,doublecircle:Are,stadium:Tre,hexagon:gre,rect_left_inv_arrow:vre,lean_right:yre,lean_left:_re,trapezoid:bre,inv_trapezoid:xre,rect_right_inv_arrow:wre,cylinder:kre,start:Rre,end:(t,i)=>{const o=t.insert("g").attr("class","node default").attr("id",i.domId||i.id),l=o.insert("circle",":first-child"),h=o.insert("circle",":first-child");return h.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),l.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),ks(i,h),i.intersect=function(p){return ps.circle(i,7,p)},o},note:fre,subroutine:Lre,fork:VR,join:VR,class_box:(t,i)=>{const o=i.padding/2,l=4,h=8;let p;i.classes?p="node "+i.classes:p="node default";const m=t.insert("g").attr("class",p).attr("id",i.domId||i.id),b=m.insert("rect",":first-child"),x=m.insert("line"),E=m.insert("line");let L=0,I=l;const F=m.insert("g").attr("class","label");let W=0;const K=i.classData.annotations&&i.classData.annotations[0],re=i.classData.annotations[0]?"\xAB"+i.classData.annotations[0]+"\xBB":"",se=F.node().appendChild(ya(re,i.labelStyle,!0,!0));let pe=se.getBBox();if(lo(Qe().flowchart.htmlLabels)){const ze=se.children[0],xe=dn(se);pe=ze.getBoundingClientRect(),xe.attr("width",pe.width),xe.attr("height",pe.height)}i.classData.annotations[0]&&(I+=pe.height+l,L+=pe.width);let he=i.classData.id;i.classData.type!==void 0&&i.classData.type!==""&&(Qe().flowchart.htmlLabels?he+="&lt;"+i.classData.type+"&gt;":he+="<"+i.classData.type+">");const Ce=F.node().appendChild(ya(he,i.labelStyle,!0,!0));dn(Ce).attr("class","classTitle");let Le=Ce.getBBox();if(lo(Qe().flowchart.htmlLabels)){const ze=Ce.children[0],xe=dn(Ce);Le=ze.getBoundingClientRect(),xe.attr("width",Le.width),xe.attr("height",Le.height)}I+=Le.height+l,Le.width>L&&(L=Le.width);const Ve=[];i.classData.members.forEach(ze=>{const xe=K2(ze);let _e=xe.displayText;Qe().flowchart.htmlLabels&&(_e=_e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const de=F.node().appendChild(ya(_e,xe.cssStyle?xe.cssStyle:i.labelStyle,!0,!0));let te=de.getBBox();if(lo(Qe().flowchart.htmlLabels)){const be=de.children[0],q=dn(de);te=be.getBoundingClientRect(),q.attr("width",te.width),q.attr("height",te.height)}te.width>L&&(L=te.width),I+=te.height+l,Ve.push(de)}),I+=h;const je=[];if(i.classData.methods.forEach(ze=>{const xe=K2(ze);let _e=xe.displayText;Qe().flowchart.htmlLabels&&(_e=_e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const de=F.node().appendChild(ya(_e,xe.cssStyle?xe.cssStyle:i.labelStyle,!0,!0));let te=de.getBBox();if(lo(Qe().flowchart.htmlLabels)){const be=de.children[0],q=dn(de);te=be.getBoundingClientRect(),q.attr("width",te.width),q.attr("height",te.height)}te.width>L&&(L=te.width),I+=te.height+l,je.push(de)}),I+=h,K){let ze=(L-pe.width)/2;dn(se).attr("transform","translate( "+(-1*L/2+ze)+", "+-1*I/2+")"),W=pe.height+l}let Pe=(L-Le.width)/2;return dn(Ce).attr("transform","translate( "+(-1*L/2+Pe)+", "+(-1*I/2+W)+")"),W+=Le.height+l,x.attr("class","divider").attr("x1",-L/2-o).attr("x2",L/2+o).attr("y1",-I/2-o+h+W).attr("y2",-I/2-o+h+W),W+=h,Ve.forEach(ze=>{dn(ze).attr("transform","translate( "+-L/2+", "+(-1*I/2+W+h/2)+")"),W+=Le.height+l}),W+=h,E.attr("class","divider").attr("x1",-L/2-o).attr("x2",L/2+o).attr("y1",-I/2-o+h+W).attr("y2",-I/2-o+h+W),W+=h,je.forEach(ze=>{dn(ze).attr("transform","translate( "+-L/2+", "+(-1*I/2+W)+")"),W+=Le.height+l}),b.attr("class","outer title-state").attr("x",-L/2-o).attr("y",-(I/2)-o).attr("width",L+i.padding).attr("height",I+i.padding),ks(i,b),i.intersect=function(ze){return ps.rect(i,ze)},m}};let h0={};const Pre=(t,i,o)=>{let l,h;if(i.link){let p;Qe().securityLevel==="sandbox"?p="_top":i.linkTarget&&(p=i.linkTarget||"_blank"),l=t.insert("svg:a").attr("xlink:href",i.link).attr("target",p),h=WR[i.shape](l,i,o)}else h=WR[i.shape](t,i,o),l=h;i.tooltip&&h.attr("title",i.tooltip),i.class&&h.attr("class","node default "+i.class),h0[i.id]=l,i.haveCallback&&h0[i.id].attr("class",h0[i.id].attr("class")+" clickable")},Ire=(t,i)=>{h0[i.id]=t},Dre=()=>{h0={}},zR=t=>{const i=h0[t.id];y.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const o=8,l=t.diff||0;return t.clusterNode?i.attr("transform","translate("+(t.x+l-t.width/2)+", "+(t.y-t.height/2-o)+")"):i.attr("transform","translate("+t.x+", "+t.y+")"),l},Nre={rect:(t,i)=>{y.trace("Creating subgraph rect for ",i.id,i);const o=t.insert("g").attr("class","cluster"+(i.class?" "+i.class:"")).attr("id",i.id),l=o.insert("rect",":first-child"),h=o.insert("g").attr("class","cluster-label"),p=h.node().appendChild(ya(i.labelText,i.labelStyle,void 0,!0));let m=p.getBBox();if(lo(Qe().flowchart.htmlLabels)){const I=p.children[0],F=dn(p);m=I.getBoundingClientRect(),F.attr("width",m.width),F.attr("height",m.height)}const b=0*i.padding,x=b/2,E=i.width<=m.width+b?m.width+b:i.width;i.width<=m.width+b?i.diff=(m.width-i.width)/2-i.padding/2:i.diff=-i.padding/2,y.trace("Data ",i,JSON.stringify(i)),l.attr("style",i.style).attr("rx",i.rx).attr("ry",i.ry).attr("x",i.x-E/2).attr("y",i.y-i.height/2-x).attr("width",E).attr("height",i.height+b),h.attr("transform","translate("+(i.x-m.width/2)+", "+(i.y-i.height/2)+")");const L=l.node().getBBox();return i.width=L.width,i.height=L.height,i.intersect=function(I){return _v(i,I)},o},roundedWithTitle:(t,i)=>{const o=t.insert("g").attr("class",i.classes).attr("id",i.id),l=o.insert("rect",":first-child"),h=o.insert("g").attr("class","cluster-label"),p=o.append("rect"),m=h.node().appendChild(ya(i.labelText,i.labelStyle,void 0,!0));let b=m.getBBox();if(lo(Qe().flowchart.htmlLabels)){const F=m.children[0],W=dn(m);b=F.getBoundingClientRect(),W.attr("width",b.width),W.attr("height",b.height)}b=m.getBBox();const x=0*i.padding,E=x/2,L=i.width<=b.width+i.padding?b.width+i.padding:i.width;i.width<=b.width+i.padding?i.diff=(b.width+i.padding*0-i.width)/2:i.diff=-i.padding/2,l.attr("class","outer").attr("x",i.x-L/2-E).attr("y",i.y-i.height/2-E).attr("width",L+x).attr("height",i.height+x),p.attr("class","inner").attr("x",i.x-L/2-E).attr("y",i.y-i.height/2-E+b.height-1).attr("width",L+x).attr("height",i.height+x-b.height-3),h.attr("transform","translate("+(i.x-b.width/2)+", "+(i.y-i.height/2-i.padding/3+(lo(Qe().flowchart.htmlLabels)?5:3))+")");const I=l.node().getBBox();return i.height=I.height,i.intersect=function(F){return _v(i,F)},o},noteGroup:(t,i)=>{const o=t.insert("g").attr("class","note-cluster").attr("id",i.id),l=o.insert("rect",":first-child"),h=0*i.padding,p=h/2;l.attr("rx",i.rx).attr("ry",i.ry).attr("x",i.x-i.width/2-p).attr("y",i.y-i.height/2-p).attr("width",i.width+h).attr("height",i.height+h).attr("fill","none");const m=l.node().getBBox();return i.width=m.width,i.height=m.height,i.intersect=function(b){return _v(i,b)},o},divider:(t,i)=>{const o=t.insert("g").attr("class",i.classes).attr("id",i.id),l=o.insert("rect",":first-child"),h=0*i.padding,p=h/2;l.attr("class","divider").attr("x",i.x-i.width/2-p).attr("y",i.y-i.height/2).attr("width",i.width+h).attr("height",i.height+h);const m=l.node().getBBox();return i.width=m.width,i.height=m.height,i.diff=-i.padding/2,i.intersect=function(b){return _v(i,b)},o}};let UR={};const Ore=(t,i)=>{y.trace("Inserting cluster");const o=i.shape||"rect";UR[i.id]=Nre[o](t,i)},Fre=()=>{UR={}};let nx={},_o={};const Bre=()=>{nx={},_o={}},Vre=(t,i)=>{const o=ya(i.label,i.labelStyle),l=t.insert("g").attr("class","edgeLabel"),h=l.insert("g").attr("class","label");h.node().appendChild(o);let p=o.getBBox();if(lo(Qe().flowchart.htmlLabels)){const b=o.children[0],x=dn(o);p=b.getBoundingClientRect(),x.attr("width",p.width),x.attr("height",p.height)}h.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),nx[i.id]=l,i.width=p.width,i.height=p.height;let m;if(i.startLabelLeft){const b=ya(i.startLabelLeft,i.labelStyle),x=t.insert("g").attr("class","edgeTerminals"),E=x.insert("g").attr("class","inner");m=E.node().appendChild(b);const L=b.getBBox();E.attr("transform","translate("+-L.width/2+", "+-L.height/2+")"),_o[i.id]||(_o[i.id]={}),_o[i.id].startLeft=x,ix(m,i.startLabelLeft)}if(i.startLabelRight){const b=ya(i.startLabelRight,i.labelStyle),x=t.insert("g").attr("class","edgeTerminals"),E=x.insert("g").attr("class","inner");m=x.node().appendChild(b),E.node().appendChild(b);const L=b.getBBox();E.attr("transform","translate("+-L.width/2+", "+-L.height/2+")"),_o[i.id]||(_o[i.id]={}),_o[i.id].startRight=x,ix(m,i.startLabelRight)}if(i.endLabelLeft){const b=ya(i.endLabelLeft,i.labelStyle),x=t.insert("g").attr("class","edgeTerminals"),E=x.insert("g").attr("class","inner");m=E.node().appendChild(b);const L=b.getBBox();E.attr("transform","translate("+-L.width/2+", "+-L.height/2+")"),x.node().appendChild(b),_o[i.id]||(_o[i.id]={}),_o[i.id].endLeft=x,ix(m,i.endLabelLeft)}if(i.endLabelRight){const b=ya(i.endLabelRight,i.labelStyle),x=t.insert("g").attr("class","edgeTerminals"),E=x.insert("g").attr("class","inner");m=E.node().appendChild(b);const L=b.getBBox();E.attr("transform","translate("+-L.width/2+", "+-L.height/2+")"),x.node().appendChild(b),_o[i.id]||(_o[i.id]={}),_o[i.id].endRight=x,ix(m,i.endLabelRight)}};function ix(t,i){Qe().flowchart.htmlLabels&&t&&(t.style.width=i.length*9+"px",t.style.height="12px")}const Wre=(t,i)=>{y.info("Moving label abc78 ",t.id,t.label,nx[t.id]);let o=i.updatedPath?i.updatedPath:i.originalPath;if(t.label){const l=nx[t.id];let h=t.x,p=t.y;if(o){const m=Ii.calcLabelPosition(o);y.info("Moving label "+t.label+" from (",h,",",p,") to (",m.x,",",m.y,") abc78"),i.updatedPath&&(h=m.x,p=m.y)}l.attr("transform","translate("+h+", "+p+")")}if(t.startLabelLeft){const l=_o[t.id].startLeft;let h=t.x,p=t.y;if(o){const m=Ii.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",o);h=m.x,p=m.y}l.attr("transform","translate("+h+", "+p+")")}if(t.startLabelRight){const l=_o[t.id].startRight;let h=t.x,p=t.y;if(o){const m=Ii.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",o);h=m.x,p=m.y}l.attr("transform","translate("+h+", "+p+")")}if(t.endLabelLeft){const l=_o[t.id].endLeft;let h=t.x,p=t.y;if(o){const m=Ii.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",o);h=m.x,p=m.y}l.attr("transform","translate("+h+", "+p+")")}if(t.endLabelRight){const l=_o[t.id].endRight;let h=t.x,p=t.y;if(o){const m=Ii.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",o);h=m.x,p=m.y}l.attr("transform","translate("+h+", "+p+")")}},zre=(t,i)=>{const o=t.x,l=t.y,h=Math.abs(i.x-o),p=Math.abs(i.y-l),m=t.width/2,b=t.height/2;return h>=m||p>=b},Ure=(t,i,o)=>{y.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(i)}
  insidePoint : ${JSON.stringify(o)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const l=t.x,h=t.y,p=Math.abs(l-o.x),m=t.width/2;let b=o.x<i.x?m-p:m+p;const x=t.height/2,E=Math.abs(i.y-o.y),L=Math.abs(i.x-o.x);if(Math.abs(h-i.y)*m>Math.abs(l-i.x)*x){let I=o.y<i.y?i.y-x-h:h-x-i.y;b=L*I/E;const F={x:o.x<i.x?o.x+b:o.x-L+b,y:o.y<i.y?o.y+E-I:o.y-E+I};return b===0&&(F.x=i.x,F.y=i.y),L===0&&(F.x=i.x),E===0&&(F.y=i.y),y.warn(`abc89 topp/bott calc, Q ${E}, q ${I}, R ${L}, r ${b}`,F),F}else{o.x<i.x?b=i.x-m-l:b=l-m-i.x;let I=E*b/L,F=o.x<i.x?o.x+L-b:o.x-L+b,W=o.y<i.y?o.y+I:o.y-I;return y.warn(`sides calc abc89, Q ${E}, q ${I}, R ${L}, r ${b}`,{_x:F,_y:W}),b===0&&(F=i.x,W=i.y),L===0&&(F=i.x),E===0&&(W=i.y),{x:F,y:W}}},GR=(t,i)=>{y.warn("abc88 cutPathAtIntersect",t,i);let o=[],l=t[0],h=!1;return t.forEach(p=>{if(y.info("abc88 checking point",p,i),!zre(i,p)&&!h){const m=Ure(i,l,p);y.warn("abc88 inside",p,l,m),y.warn("abc88 intersection",m);let b=!1;o.forEach(x=>{b=b||x.x===m.x&&x.y===m.y}),o.some(x=>x.x===m.x&&x.y===m.y)?y.warn("abc88 no intersect",m,o):o.push(m),h=!0}else y.warn("abc88 outside",p,l),l=p,h||o.push(p)}),y.warn("abc88 returning points",o),o},Gre=function(t,i,o,l,h,p){let m=o.points,b=!1;const x=p.node(i.v);var E=p.node(i.w);y.info("abc88 InsertEdge: ",o),E.intersect&&x.intersect&&(m=m.slice(1,o.points.length-1),m.unshift(x.intersect(m[0])),y.info("Last point",m[m.length-1],E,E.intersect(m[m.length-1])),m.push(E.intersect(m[m.length-1]))),o.toCluster&&(y.info("to cluster abc88",l[o.toCluster]),m=GR(o.points,l[o.toCluster].node),b=!0),o.fromCluster&&(y.info("from cluster abc88",l[o.fromCluster]),m=GR(m.reverse(),l[o.fromCluster].node).reverse(),b=!0);const L=m.filter(pe=>!Number.isNaN(pe.y));let I;h==="graph"||h==="flowchart"?I=o.curve||Vm:I=Vm;const F=Bm().x(function(pe){return pe.x}).y(function(pe){return pe.y}).curve(I);let W;switch(o.thickness){case"normal":W="edge-thickness-normal";break;case"thick":W="edge-thickness-thick";break;default:W=""}switch(o.pattern){case"solid":W+=" edge-pattern-solid";break;case"dotted":W+=" edge-pattern-dotted";break;case"dashed":W+=" edge-pattern-dashed";break}const K=t.append("path").attr("d",F(L)).attr("id",o.id).attr("class"," "+W+(o.classes?" "+o.classes:"")).attr("style",o.style);let re="";switch((Qe().flowchart.arrowMarkerAbsolute||Qe().state.arrowMarkerAbsolute)&&(re=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,re=re.replace(/\(/g,"\\("),re=re.replace(/\)/g,"\\)")),y.info("arrowTypeStart",o.arrowTypeStart),y.info("arrowTypeEnd",o.arrowTypeEnd),o.arrowTypeStart){case"arrow_cross":K.attr("marker-start","url("+re+"#"+h+"-crossStart)");break;case"arrow_point":K.attr("marker-start","url("+re+"#"+h+"-pointStart)");break;case"arrow_barb":K.attr("marker-start","url("+re+"#"+h+"-barbStart)");break;case"arrow_circle":K.attr("marker-start","url("+re+"#"+h+"-circleStart)");break;case"aggregation":K.attr("marker-start","url("+re+"#"+h+"-aggregationStart)");break;case"extension":K.attr("marker-start","url("+re+"#"+h+"-extensionStart)");break;case"composition":K.attr("marker-start","url("+re+"#"+h+"-compositionStart)");break;case"dependency":K.attr("marker-start","url("+re+"#"+h+"-dependencyStart)");break;case"lollipop":K.attr("marker-start","url("+re+"#"+h+"-lollipopStart)");break}switch(o.arrowTypeEnd){case"arrow_cross":K.attr("marker-end","url("+re+"#"+h+"-crossEnd)");break;case"arrow_point":K.attr("marker-end","url("+re+"#"+h+"-pointEnd)");break;case"arrow_barb":K.attr("marker-end","url("+re+"#"+h+"-barbEnd)");break;case"arrow_circle":K.attr("marker-end","url("+re+"#"+h+"-circleEnd)");break;case"aggregation":K.attr("marker-end","url("+re+"#"+h+"-aggregationEnd)");break;case"extension":K.attr("marker-end","url("+re+"#"+h+"-extensionEnd)");break;case"composition":K.attr("marker-end","url("+re+"#"+h+"-compositionEnd)");break;case"dependency":K.attr("marker-end","url("+re+"#"+h+"-dependencyEnd)");break;case"lollipop":K.attr("marker-end","url("+re+"#"+h+"-lollipopEnd)");break}let se={};return b&&(se.updatedPath=m),se.originalPath=o.points,se},HR=(t,i,o,l)=>{y.info("Graph in recursive render: XXX",Uu(i),l);const h=i.graph().rankdir;y.trace("Dir in recursive render - dir:",h);const p=t.insert("g").attr("class","root");i.nodes()?y.info("Recursive render XXX",i.nodes()):y.info("No nodes found for",i),i.edges().length>0&&y.trace("Recursive edges",i.edge(i.edges()[0]));const m=p.insert("g").attr("class","clusters"),b=p.insert("g").attr("class","edgePaths"),x=p.insert("g").attr("class","edgeLabels"),E=p.insert("g").attr("class","nodes");i.nodes().forEach(function(I){const F=i.node(I);if(l!==void 0){const W=JSON.parse(JSON.stringify(l.clusterData));y.info("Setting data for cluster XXX (",I,") ",W,l),i.setNode(l.id,W),i.parent(I)||(y.trace("Setting parent",I,l.id),i.setParent(I,l.id,W))}if(y.info("(Insert) Node XXX"+I+": "+JSON.stringify(i.node(I))),F&&F.clusterNode){y.info("Cluster identified",I,F.width,i.node(I));const W=HR(E,F.graph,o,i.node(I)),K=W.elem;ks(F,K),F.diff=W.diff||0,y.info("Node bounds (abc123)",I,F,F.width,F.x,F.y),Ire(K,F),y.warn("Recursive render complete ",K,F)}else i.children(I).length>0?(y.info("Cluster - the non recursive path XXX",I,F.id,F,i),y.info(yv(F.id,i)),sr[F.id]={id:yv(F.id,i),node:F}):(y.info("Node - the non recursive path",I,F.id,F),Pre(E,i.node(I),h))}),i.edges().forEach(function(I){const F=i.edge(I.v,I.w,I.name);y.info("Edge "+I.v+" -> "+I.w+": "+JSON.stringify(I)),y.info("Edge "+I.v+" -> "+I.w+": ",I," ",JSON.stringify(i.edge(I))),y.info("Fix",sr,"ids:",I.v,I.w,"Translateing: ",sr[I.v],sr[I.w]),Vre(x,F)}),i.edges().forEach(function(I){y.info("Edge "+I.v+" -> "+I.w+": "+JSON.stringify(I))}),y.info("#############################################"),y.info("###                Layout                 ###"),y.info("#############################################"),y.info(i),u0(i),y.info("Graph after layout:",Uu(i));let L=0;return lre(i).forEach(function(I){const F=i.node(I);y.info("Position "+I+": "+JSON.stringify(i.node(I))),y.info("Position "+I+": ("+F.x,","+F.y,") width: ",F.width," height: ",F.height),F&&F.clusterNode?zR(F):i.children(I).length>0?(Ore(m,F),sr[F.id].node=F):zR(F)}),i.edges().forEach(function(I){const F=i.edge(I);y.info("Edge "+I.v+" -> "+I.w+": "+JSON.stringify(F),F);const W=Gre(b,I,F,sr,o,i);Wre(F,W)}),i.nodes().forEach(function(I){const F=i.node(I);y.info(I,F.type,F.diff),F.type==="group"&&(L=F.diff)}),{elem:p,diff:L}},iC=(t,i,o,l,h)=>{nre(t,o,l,h),Dre(),Bre(),Fre(),sre(),y.warn("Graph at first:",Uu(i)),are(i),y.warn("Graph after:",Uu(i)),HR(t,i,l)},YR=t=>Ai.sanitizeText(t,Qe());let jR={dividerMargin:10,padding:5,textHeight:10};const Hre=function(t,i,o,l){const h=Object.keys(t);y.info("keys:",h),y.info(t),h.forEach(function(p){const m=t[p];let b="";m.cssClasses.length>0&&(b=b+" "+m.cssClasses.join(" "));const x={labelStyle:""};let E=m.text!==void 0?m.text:m.id,L=0,I="";switch(m.type){case"class":I="class_box";break;default:I="class_box"}i.setNode(m.id,{labelStyle:x.labelStyle,shape:I,labelText:YR(E),classData:m,rx:L,ry:L,class:b,style:x.style,id:m.id,domId:m.domId,tooltip:l.db.getTooltip(m.id)||"",haveCallback:m.haveCallback,link:m.link,width:m.type==="group"?500:void 0,type:m.type,padding:Qe().flowchart.padding}),y.info("setNode",{labelStyle:x.labelStyle,shape:I,labelText:E,rx:L,ry:L,class:b,style:x.style,id:m.id,width:m.type==="group"?500:void 0,type:m.type,padding:Qe().flowchart.padding})})},Yre=function(t,i,o,l){y.info(t),t.forEach(function(h,p){const m=h;let b="";const x={labelStyle:"",style:""};let E=m.text,L=0,I="note";if(i.setNode(m.id,{labelStyle:x.labelStyle,shape:I,labelText:YR(E),noteData:m,rx:L,ry:L,class:b,style:x.style,id:m.id,domId:m.id,tooltip:"",type:"note",padding:Qe().flowchart.padding}),y.info("setNode",{labelStyle:x.labelStyle,shape:I,labelText:E,rx:L,ry:L,style:x.style,id:m.id,type:"note",padding:Qe().flowchart.padding}),!m.class||!(m.class in l))return;const F=o+p,W={};W.classes="relation",W.pattern="dotted",W.id=`edgeNote${F}`,W.arrowhead="none",y.info(`Note edge: ${JSON.stringify(W)}, ${JSON.stringify(m)}`),W.startLabelRight="",W.endLabelLeft="",W.arrowTypeStart="none",W.arrowTypeEnd="none";let K="fill:none",re="";W.style=K,W.labelStyle=re,W.curve=Ul(jR.curve,Ba),i.setEdge(m.id,m.class,W,F)})},jre=function(t,i){const o=Qe().flowchart;let l=0;t.forEach(function(h){l++;const p={};p.classes="relation",p.pattern=h.relation.lineType==1?"dashed":"solid",p.id="id"+l,h.type==="arrow_open"?p.arrowhead="none":p.arrowhead="normal",y.info(p,h),p.startLabelRight=h.relationTitle1==="none"?"":h.relationTitle1,p.endLabelLeft=h.relationTitle2==="none"?"":h.relationTitle2,p.arrowTypeStart=$R(h.relation.type1),p.arrowTypeEnd=$R(h.relation.type2);let m="",b="";if(h.style!==void 0){const x=id(h.style);m=x.style,b=x.labelStyle}else m="fill:none";p.style=m,p.labelStyle=b,h.interpolate!==void 0?p.curve=Ul(h.interpolate,Ba):t.defaultInterpolate!==void 0?p.curve=Ul(t.defaultInterpolate,Ba):p.curve=Ul(o.curve,Ba),h.text=h.title,h.text===void 0?h.style!==void 0&&(p.arrowheadStyle="fill: #333"):(p.arrowheadStyle="fill: #333",p.labelpos="c",Qe().flowchart.htmlLabels?(p.labelType="html",p.label='<span class="edgeLabel">'+h.text+"</span>"):(p.labelType="text",p.label=h.text.replace(Ai.lineBreakRegex,`
`),h.style===void 0&&(p.style=p.style||"stroke: #333; stroke-width: 1.5px;fill:none"),p.labelStyle=p.labelStyle.replace("color:","fill:"))),i.setEdge(h.id1,h.id2,p,l)})},$re=function(t){Object.keys(t).forEach(function(o){jR[o]=t[o]})},qre=function(t,i,o,l){y.info("Drawing class - ",i);const h=Qe().flowchart,p=Qe().securityLevel;y.info("config:",h);const m=h.nodeSpacing||50,b=h.rankSpacing||50,x=new Ns({multigraph:!0,compound:!0}).setGraph({rankdir:l.db.getDirection(),nodesep:m,ranksep:b,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),E=l.db.getClasses(),L=l.db.getRelations(),I=l.db.getNotes();y.info(L),Hre(E,x,i,l),jre(L,x),Yre(I,x,L.length+1,E);let F;p==="sandbox"&&(F=dn("#i"+i));const W=dn(p==="sandbox"?F.nodes()[0].contentDocument.body:"body"),K=W.select(`[id="${i}"]`),re=W.select("#"+i+" g");if(iC(re,x,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",i),Ii.insertTitle(K,"classTitleText",h.titleTopMargin,l.db.getDiagramTitle()),m2(x,K,h.diagramPadding,h.useMaxWidth),!h.htmlLabels){const se=p==="sandbox"?F.nodes()[0].contentDocument:document,pe=se.querySelectorAll('[id="'+i+'"] .edgeLabel .label');for(const he of pe){const Ce=he.getBBox(),Le=se.createElementNS("http://www.w3.org/2000/svg","rect");Le.setAttribute("rx",0),Le.setAttribute("ry",0),Le.setAttribute("width",Ce.width),Le.setAttribute("height",Ce.height),he.insertBefore(Le,he.firstChild)}}};function $R(t){let i;switch(t){case 0:i="aggregation";break;case 1:i="extension";break;case 2:i="composition";break;case 3:i="dependency";break;case 4:i="lollipop";break;default:i="none"}return i}const Xre={setConf:$re,draw:qre};var rC=function(){var t=function(xe,_e,de,te){for(de=de||{},te=xe.length;te--;de[xe[te]]=_e);return de},i=[1,2],o=[1,5],l=[6,9,11,23,25,27,29,30,31,49],h=[1,17],p=[1,18],m=[1,19],b=[1,20],x=[1,21],E=[1,22],L=[1,25],I=[1,30],F=[1,31],W=[1,32],K=[1,33],re=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],se=[1,45],pe=[30,31,46,47],he=[4,6,9,11,23,25,27,29,30,31,49],Ce=[42,43,44,45],Le=[22,37],Ve=[1,64],je={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(_e,de,te,be,q,ot,Z){var Dt=ot.length-1;switch(q){case 1:break;case 3:this.$=[];break;case 4:ot[Dt-1].push(ot[Dt]),this.$=ot[Dt-1];break;case 5:case 6:this.$=ot[Dt];break;case 7:case 8:this.$=[];break;case 12:be.addEntity(ot[Dt-4]),be.addEntity(ot[Dt-2]),be.addRelationship(ot[Dt-4],ot[Dt],ot[Dt-2],ot[Dt-3]);break;case 13:be.addEntity(ot[Dt-3]),be.addAttributes(ot[Dt-3],ot[Dt-1]);break;case 14:be.addEntity(ot[Dt-2]);break;case 15:be.addEntity(ot[Dt]);break;case 16:case 17:this.$=ot[Dt].trim(),be.setAccTitle(this.$);break;case 18:case 19:this.$=ot[Dt].trim(),be.setAccDescription(this.$);break;case 20:case 41:this.$=ot[Dt];break;case 21:case 39:case 40:this.$=ot[Dt].replace(/"/g,"");break;case 22:this.$=[ot[Dt]];break;case 23:ot[Dt].push(ot[Dt-1]),this.$=ot[Dt];break;case 24:this.$={attributeType:ot[Dt-1],attributeName:ot[Dt]};break;case 25:this.$={attributeType:ot[Dt-2],attributeName:ot[Dt-1],attributeKeyType:ot[Dt]};break;case 26:this.$={attributeType:ot[Dt-2],attributeName:ot[Dt-1],attributeComment:ot[Dt]};break;case 27:this.$={attributeType:ot[Dt-3],attributeName:ot[Dt-2],attributeKeyType:ot[Dt-1],attributeComment:ot[Dt]};break;case 28:case 29:case 30:this.$=ot[Dt];break;case 31:this.$=ot[Dt].replace(/"/g,"");break;case 32:this.$={cardA:ot[Dt],relType:ot[Dt-1],cardB:ot[Dt-2]};break;case 33:this.$=be.Cardinality.ZERO_OR_ONE;break;case 34:this.$=be.Cardinality.ZERO_OR_MORE;break;case 35:this.$=be.Cardinality.ONE_OR_MORE;break;case 36:this.$=be.Cardinality.ONLY_ONE;break;case 37:this.$=be.Identification.NON_IDENTIFYING;break;case 38:this.$=be.Identification.IDENTIFYING;break;case 42:be.parseDirective("%%{","open_directive");break;case 43:be.parseDirective(ot[Dt],"type_directive");break;case 44:ot[Dt]=ot[Dt].trim().replace(/'/g,'"'),be.parseDirective(ot[Dt],"arg_directive");break;case 45:be.parseDirective("}%%","close_directive","er");break}},table:[{3:1,4:i,7:3,12:4,49:o},{1:[3]},t(l,[2,3],{5:6}),{3:7,4:i,7:3,12:4,49:o},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:h,25:p,27:m,29:b,30:x,31:E,49:o},{1:[2,2]},{14:23,15:[1,24],52:L},t([15,52],[2,43]),t(l,[2,8],{1:[2,1]}),t(l,[2,4]),{7:15,10:26,12:4,17:16,23:h,25:p,27:m,29:b,30:x,31:E,49:o},t(l,[2,6]),t(l,[2,7]),t(l,[2,11]),t(l,[2,15],{18:27,40:29,20:[1,28],42:I,43:F,44:W,45:K}),{24:[1,34]},{26:[1,35]},{28:[1,36]},t(l,[2,19]),t(re,[2,20]),t(re,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},t(l,[2,5]),{17:40,30:x,31:E},{21:41,22:[1,42],32:43,33:44,37:se},{41:46,46:[1,47],47:[1,48]},t(pe,[2,33]),t(pe,[2,34]),t(pe,[2,35]),t(pe,[2,36]),t(l,[2,16]),t(l,[2,17]),t(l,[2,18]),t(he,[2,9]),{14:49,52:L},{52:[2,44]},{15:[1,50]},{22:[1,51]},t(l,[2,14]),{21:52,22:[2,22],32:43,33:44,37:se},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:I,43:F,44:W,45:K},t(Ce,[2,37]),t(Ce,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},t(l,[2,13]),{22:[2,23]},t(Le,[2,24],{35:61,36:62,38:[1,63],39:Ve}),t([22,37,38,39],[2,29]),t([30,31],[2,32]),t(he,[2,10]),t(l,[2,12]),t(l,[2,39]),t(l,[2,40]),t(l,[2,41]),t(Le,[2,25],{36:65,39:Ve}),t(Le,[2,26]),t([22,37,39],[2,30]),t(Le,[2,31]),t(Le,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(_e,de){if(de.recoverable)this.trace(_e);else{var te=new Error(_e);throw te.hash=de,te}},parse:function(_e){var de=this,te=[0],be=[],q=[null],ot=[],Z=this.table,Dt="",xn=0,ln=0,Je=2,kt=1,mt=ot.slice.call(arguments,1),vt=Object.create(this.lexer),Pt={yy:{}};for(var rn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,rn)&&(Pt.yy[rn]=this.yy[rn]);vt.setInput(_e,Pt.yy),Pt.yy.lexer=vt,Pt.yy.parser=this,typeof vt.yylloc>"u"&&(vt.yylloc={});var nt=vt.yylloc;ot.push(nt);var Ln=vt.options&&vt.options.ranges;typeof Pt.yy.parseError=="function"?this.parseError=Pt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ie(){var dt;return dt=be.pop()||vt.lex()||kt,typeof dt!="number"&&(dt instanceof Array&&(be=dt,dt=be.pop()),dt=de.symbols_[dt]||dt),dt}for(var Be,et,Me,ke,ge={},ct,le,Ft,Oe;;){if(et=te[te.length-1],this.defaultActions[et]?Me=this.defaultActions[et]:((Be===null||typeof Be>"u")&&(Be=Ie()),Me=Z[et]&&Z[et][Be]),typeof Me>"u"||!Me.length||!Me[0]){var Wn="";Oe=[];for(ct in Z[et])this.terminals_[ct]&&ct>Je&&Oe.push("'"+this.terminals_[ct]+"'");vt.showPosition?Wn="Parse error on line "+(xn+1)+`:
`+vt.showPosition()+`
Expecting `+Oe.join(", ")+", got '"+(this.terminals_[Be]||Be)+"'":Wn="Parse error on line "+(xn+1)+": Unexpected "+(Be==kt?"end of input":"'"+(this.terminals_[Be]||Be)+"'"),this.parseError(Wn,{text:vt.match,token:this.terminals_[Be]||Be,line:vt.yylineno,loc:nt,expected:Oe})}if(Me[0]instanceof Array&&Me.length>1)throw new Error("Parse Error: multiple actions possible at state: "+et+", token: "+Be);switch(Me[0]){case 1:te.push(Be),q.push(vt.yytext),ot.push(vt.yylloc),te.push(Me[1]),Be=null,ln=vt.yyleng,Dt=vt.yytext,xn=vt.yylineno,nt=vt.yylloc;break;case 2:if(le=this.productions_[Me[1]][1],ge.$=q[q.length-le],ge._$={first_line:ot[ot.length-(le||1)].first_line,last_line:ot[ot.length-1].last_line,first_column:ot[ot.length-(le||1)].first_column,last_column:ot[ot.length-1].last_column},Ln&&(ge._$.range=[ot[ot.length-(le||1)].range[0],ot[ot.length-1].range[1]]),ke=this.performAction.apply(ge,[Dt,ln,xn,Pt.yy,Me[1],q,ot].concat(mt)),typeof ke<"u")return ke;le&&(te=te.slice(0,-1*le*2),q=q.slice(0,-1*le),ot=ot.slice(0,-1*le)),te.push(this.productions_[Me[1]][0]),q.push(ge.$),ot.push(ge._$),Ft=Z[te[te.length-2]][te[te.length-1]],te.push(Ft);break;case 3:return!0}}return!0}},Pe=function(){var xe={EOF:1,parseError:function(de,te){if(this.yy.parser)this.yy.parser.parseError(de,te);else throw new Error(de)},setInput:function(_e,de){return this.yy=de||this.yy||{},this._input=_e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var _e=this._input[0];this.yytext+=_e,this.yyleng++,this.offset++,this.match+=_e,this.matched+=_e;var de=_e.match(/(?:\r\n?|\n).*/g);return de?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),_e},unput:function(_e){var de=_e.length,te=_e.split(/(?:\r\n?|\n)/g);this._input=_e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-de),this.offset-=de;var be=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),te.length-1&&(this.yylineno-=te.length-1);var q=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:te?(te.length===be.length?this.yylloc.first_column:0)+be[be.length-te.length].length-te[0].length:this.yylloc.first_column-de},this.options.ranges&&(this.yylloc.range=[q[0],q[0]+this.yyleng-de]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(_e){this.unput(this.match.slice(_e))},pastInput:function(){var _e=this.matched.substr(0,this.matched.length-this.match.length);return(_e.length>20?"...":"")+_e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var _e=this.match;return _e.length<20&&(_e+=this._input.substr(0,20-_e.length)),(_e.substr(0,20)+(_e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var _e=this.pastInput(),de=new Array(_e.length+1).join("-");return _e+this.upcomingInput()+`
`+de+"^"},test_match:function(_e,de){var te,be,q;if(this.options.backtrack_lexer&&(q={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(q.yylloc.range=this.yylloc.range.slice(0))),be=_e[0].match(/(?:\r\n?|\n).*/g),be&&(this.yylineno+=be.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:be?be[be.length-1].length-be[be.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+_e[0].length},this.yytext+=_e[0],this.match+=_e[0],this.matches=_e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(_e[0].length),this.matched+=_e[0],te=this.performAction.call(this,this.yy,this,de,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),te)return te;if(this._backtrack){for(var ot in q)this[ot]=q[ot];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var _e,de,te,be;this._more||(this.yytext="",this.match="");for(var q=this._currentRules(),ot=0;ot<q.length;ot++)if(te=this._input.match(this.rules[q[ot]]),te&&(!de||te[0].length>de[0].length)){if(de=te,be=ot,this.options.backtrack_lexer){if(_e=this.test_match(te,q[ot]),_e!==!1)return _e;if(this._backtrack){de=!1;continue}else return!1}else if(!this.options.flex)break}return de?(_e=this.test_match(de,q[be]),_e!==!1?_e:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var de=this.next();return de||this.lex()},begin:function(de){this.conditionStack.push(de)},popState:function(){var de=this.conditionStack.length-1;return de>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(de){return de=this.conditionStack.length-1-Math.abs(de||0),de>=0?this.conditionStack[de]:"INITIAL"},pushState:function(de){this.begin(de)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(de,te,be,q){switch(be){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:break;case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 21:break;case 22:return 38;case 23:return 37;case 24:return 37;case 25:return 39;case 26:break;case 27:return this.popState(),22;case 28:return te.yytext[0];case 29:return 42;case 30:return 44;case 31:return 44;case 32:return 44;case 33:return 42;case 34:return 42;case 35:return 43;case 36:return 43;case 37:return 43;case 38:return 43;case 39:return 43;case 40:return 44;case 41:return 43;case 42:return 44;case 43:return 45;case 44:return 45;case 45:return 45;case 46:return 45;case 47:return 42;case 48:return 43;case 49:return 44;case 50:return 46;case 51:return 47;case 52:return 47;case 53:return 46;case 54:return 46;case 55:return 46;case 56:return 30;case 57:return te.yytext[0];case 58:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9\-_\[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};return xe}();je.lexer=Pe;function ze(){this.yy={}}return ze.prototype=je,je.Parser=ze,new ze}();rC.parser=rC;const Zre=rC,Kre=t=>t.match(/^\s*erDiagram/)!==null;let bv={},sC=[];const Jre={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Qre={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},ese=function(t,i,o){ss.parseDirective(this,t,i,o)},qR=function(t){return bv[t]===void 0&&(bv[t]={attributes:[]},y.info("Added new entity :",t)),bv[t]},tse={Cardinality:Jre,Identification:Qre,parseDirective:ese,getConfig:()=>Qe().er,addEntity:qR,addAttributes:function(t,i){let o=qR(t),l;for(l=i.length-1;l>=0;l--)o.attributes.push(i[l]),y.debug("Added attribute ",i[l].attributeName)},getEntities:()=>bv,addRelationship:function(t,i,o,l){let h={entityA:t,roleA:i,entityB:o,relSpec:l};sC.push(h),y.debug("Added new relationship :",h)},getRelationships:()=>sC,clear:function(){bv={},sC=[],Yl()},setAccTitle:pl,getAccTitle:jl,setAccDescription:$l,getAccDescription:ql,setDiagramTitle:Fu,getDiagramTitle:Bu},Hu={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},Yu={ERMarkers:Hu,insertMarkers:function(t,i){let o;t.append("defs").append("marker").attr("id",Hu.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",i.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",Hu.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",i.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),o=t.append("defs").append("marker").attr("id",Hu.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),o.append("circle").attr("stroke",i.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),o.append("path").attr("stroke",i.stroke).attr("fill","none").attr("d","M9,0 L9,18"),o=t.append("defs").append("marker").attr("id",Hu.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),o.append("circle").attr("stroke",i.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),o.append("path").attr("stroke",i.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",Hu.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",i.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",Hu.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",i.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),o=t.append("defs").append("marker").attr("id",Hu.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),o.append("circle").attr("stroke",i.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),o.append("path").attr("stroke",i.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),o=t.append("defs").append("marker").attr("id",Hu.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),o.append("circle").attr("stroke",i.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),o.append("path").attr("stroke",i.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")}};let rx;const nse=new Uint8Array(16);function ise(){if(!rx&&(rx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rx(nse)}const bo=[];for(let t=0;t<256;++t)bo.push((t+256).toString(16).slice(1));function rse(t,i=0){return(bo[t[i+0]]+bo[t[i+1]]+bo[t[i+2]]+bo[t[i+3]]+"-"+bo[t[i+4]]+bo[t[i+5]]+"-"+bo[t[i+6]]+bo[t[i+7]]+"-"+bo[t[i+8]]+bo[t[i+9]]+"-"+bo[t[i+10]]+bo[t[i+11]]+bo[t[i+12]]+bo[t[i+13]]+bo[t[i+14]]+bo[t[i+15]]).toLowerCase()}const XR={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function sse(t,i,o){if(XR.randomUUID&&!i&&!t)return XR.randomUUID();t=t||{};const l=t.random||(t.rng||ise)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,i){o=o||0;for(let h=0;h<16;++h)i[o+h]=l[h];return i}return rse(l)}const ose=/[^\dA-Za-z](\W)*/g;let $s={},xv=new Map;const ase=function(t){const i=Object.keys(t);for(const o of i)$s[o]=t[o]},lse=(t,i,o)=>{const l=$s.entityPadding/3,h=$s.entityPadding/3,p=$s.fontSize*.85,m=i.node().getBBox(),b=[];let x=!1,E=!1,L=0,I=0,F=0,W=0,K=m.height+l*2,re=1;o.forEach(Ce=>{Ce.attributeKeyType!==void 0&&(x=!0),Ce.attributeComment!==void 0&&(E=!0)}),o.forEach(Ce=>{const Le=`${i.node().id}-attr-${re}`;let Ve=0;const je=Jh(Ce.attributeType),Pe=t.append("text").classed("er entityLabel",!0).attr("id",`${Le}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Qe().fontFamily).style("font-size",p+"px").text(je),ze=t.append("text").classed("er entityLabel",!0).attr("id",`${Le}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Qe().fontFamily).style("font-size",p+"px").text(Ce.attributeName),xe={};xe.tn=Pe,xe.nn=ze;const _e=Pe.node().getBBox(),de=ze.node().getBBox();if(L=Math.max(L,_e.width),I=Math.max(I,de.width),Ve=Math.max(_e.height,de.height),x){const te=t.append("text").classed("er entityLabel",!0).attr("id",`${Le}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Qe().fontFamily).style("font-size",p+"px").text(Ce.attributeKeyType||"");xe.kn=te;const be=te.node().getBBox();F=Math.max(F,be.width),Ve=Math.max(Ve,be.height)}if(E){const te=t.append("text").classed("er entityLabel",!0).attr("id",`${Le}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Qe().fontFamily).style("font-size",p+"px").text(Ce.attributeComment||"");xe.cn=te;const be=te.node().getBBox();W=Math.max(W,be.width),Ve=Math.max(Ve,be.height)}xe.height=Ve,b.push(xe),K+=Ve+l*2,re+=1});let se=4;x&&(se+=2),E&&(se+=2);const pe=L+I+F+W,he={width:Math.max($s.minEntityWidth,Math.max(m.width+$s.entityPadding*2,pe+h*se)),height:o.length>0?K:Math.max($s.minEntityHeight,m.height+$s.entityPadding*2)};if(o.length>0){const Ce=Math.max(0,(he.width-pe-h*se)/(se/2));i.attr("transform","translate("+he.width/2+","+(l+m.height/2)+")");let Le=m.height+l*2,Ve="attributeBoxOdd";b.forEach(je=>{const Pe=Le+l+je.height/2;je.tn.attr("transform","translate("+h+","+Pe+")");const ze=t.insert("rect","#"+je.tn.node().id).classed(`er ${Ve}`,!0).attr("x",0).attr("y",Le).attr("width",L+h*2+Ce).attr("height",je.height+l*2),xe=parseFloat(ze.attr("x"))+parseFloat(ze.attr("width"));je.nn.attr("transform","translate("+(xe+h)+","+Pe+")");const _e=t.insert("rect","#"+je.nn.node().id).classed(`er ${Ve}`,!0).attr("x",xe).attr("y",Le).attr("width",I+h*2+Ce).attr("height",je.height+l*2);let de=parseFloat(_e.attr("x"))+parseFloat(_e.attr("width"));if(x){je.kn.attr("transform","translate("+(de+h)+","+Pe+")");const te=t.insert("rect","#"+je.kn.node().id).classed(`er ${Ve}`,!0).attr("x",de).attr("y",Le).attr("width",F+h*2+Ce).attr("height",je.height+l*2);de=parseFloat(te.attr("x"))+parseFloat(te.attr("width"))}E&&(je.cn.attr("transform","translate("+(de+h)+","+Pe+")"),t.insert("rect","#"+je.cn.node().id).classed(`er ${Ve}`,"true").attr("x",de).attr("y",Le).attr("width",W+h*2+Ce).attr("height",je.height+l*2)),Le+=je.height+l*2,Ve=Ve==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else he.height=Math.max($s.minEntityHeight,K),i.attr("transform","translate("+he.width/2+","+he.height/2+")");return he},cse=function(t,i,o){const l=Object.keys(i);let h;return l.forEach(function(p){const m=pse(p,"entity");xv.set(p,m);const b=t.append("g").attr("id",m);h=h===void 0?m:h;const x="text-"+m,E=b.append("text").classed("er entityLabel",!0).attr("id",x).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",Qe().fontFamily).style("font-size",$s.fontSize+"px").text(p),{width:L,height:I}=lse(b,E,i[p].attributes),W=b.insert("rect","#"+x).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",L).attr("height",I).node().getBBox();o.setNode(m,{width:W.width,height:W.height,shape:"rect",id:m})}),h},use=function(t,i){i.nodes().forEach(function(o){o!==void 0&&i.node(o)!==void 0&&t.select("#"+o).attr("transform","translate("+(i.node(o).x-i.node(o).width/2)+","+(i.node(o).y-i.node(o).height/2)+" )")})},ZR=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},hse=function(t,i){return t.forEach(function(o){i.setEdge(xv.get(o.entityA),xv.get(o.entityB),{relationship:o},ZR(o))}),t};let KR=0;const dse=function(t,i,o,l,h){KR++;const p=o.edge(xv.get(i.entityA),xv.get(i.entityB),ZR(i)),m=Bm().x(function(K){return K.x}).y(function(K){return K.y}).curve(Vm),b=t.insert("path","#"+l).classed("er relationshipLine",!0).attr("d",m(p.points)).style("stroke",$s.stroke).style("fill","none");i.relSpec.relType===h.db.Identification.NON_IDENTIFYING&&b.attr("stroke-dasharray","8,8");let x="";switch($s.arrowMarkerAbsolute&&(x=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,x=x.replace(/\(/g,"\\("),x=x.replace(/\)/g,"\\)")),i.relSpec.cardA){case h.db.Cardinality.ZERO_OR_ONE:b.attr("marker-end","url("+x+"#"+Yu.ERMarkers.ZERO_OR_ONE_END+")");break;case h.db.Cardinality.ZERO_OR_MORE:b.attr("marker-end","url("+x+"#"+Yu.ERMarkers.ZERO_OR_MORE_END+")");break;case h.db.Cardinality.ONE_OR_MORE:b.attr("marker-end","url("+x+"#"+Yu.ERMarkers.ONE_OR_MORE_END+")");break;case h.db.Cardinality.ONLY_ONE:b.attr("marker-end","url("+x+"#"+Yu.ERMarkers.ONLY_ONE_END+")");break}switch(i.relSpec.cardB){case h.db.Cardinality.ZERO_OR_ONE:b.attr("marker-start","url("+x+"#"+Yu.ERMarkers.ZERO_OR_ONE_START+")");break;case h.db.Cardinality.ZERO_OR_MORE:b.attr("marker-start","url("+x+"#"+Yu.ERMarkers.ZERO_OR_MORE_START+")");break;case h.db.Cardinality.ONE_OR_MORE:b.attr("marker-start","url("+x+"#"+Yu.ERMarkers.ONE_OR_MORE_START+")");break;case h.db.Cardinality.ONLY_ONE:b.attr("marker-start","url("+x+"#"+Yu.ERMarkers.ONLY_ONE_START+")");break}const E=b.node().getTotalLength(),L=b.node().getPointAtLength(E*.5),I="rel"+KR,W=t.append("text").classed("er relationshipLabel",!0).attr("id",I).attr("x",L.x).attr("y",L.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",Qe().fontFamily).style("font-size",$s.fontSize+"px").text(i.roleA).node().getBBox();t.insert("rect","#"+I).classed("er relationshipLabelBox",!0).attr("x",L.x-W.width/2).attr("y",L.y-W.height/2).attr("width",W.width).attr("height",W.height)},fse=function(t,i,o,l){$s=Qe().er,y.info("Drawing ER diagram");const h=Qe().securityLevel;let p;h==="sandbox"&&(p=dn("#i"+i));const b=dn(h==="sandbox"?p.nodes()[0].contentDocument.body:"body").select(`[id='${i}']`);Yu.insertMarkers(b,$s);let x;x=new Ns({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:$s.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const E=cse(b,l.db.getEntities(),x),L=hse(l.db.getRelationships(),x);u0(x),use(b,x),L.forEach(function(re){dse(b,re,x,E,l)});const I=$s.diagramPadding;Ii.insertTitle(b,"entityTitleText",$s.titleTopMargin,l.db.getDiagramTitle());const F=b.node().getBBox(),W=F.width+I*2,K=F.height+I*2;Hl(b,K,W,$s.useMaxWidth),b.attr("viewBox",`${F.x-I} ${F.y-I} ${W} ${K}`)};function pse(t="",i=""){const o=t.replace(ose,"");return`${JR(i)}${JR(o)}${sse()}`}function JR(t=""){return t.length>0?`${t}-`:""}const mse={setConf:ase,draw:fse};var oC=function(){var t=function(ba,Kn,hi,xi){for(hi=hi||{},xi=ba.length;xi--;hi[ba[xi]]=Kn);return hi},i=[1,9],o=[1,7],l=[1,6],h=[1,8],p=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],m=[2,10],b=[1,20],x=[1,21],E=[1,22],L=[1,23],I=[1,30],F=[1,32],W=[1,33],K=[1,34],re=[1,62],se=[1,48],pe=[1,52],he=[1,36],Ce=[1,37],Le=[1,38],Ve=[1,39],je=[1,40],Pe=[1,56],ze=[1,63],xe=[1,51],_e=[1,53],de=[1,55],te=[1,59],be=[1,60],q=[1,41],ot=[1,42],Z=[1,43],Dt=[1,44],xn=[1,61],ln=[1,50],Je=[1,54],kt=[1,57],mt=[1,58],vt=[1,49],Pt=[1,66],rn=[1,71],nt=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ln=[1,75],Ie=[1,74],Be=[1,76],et=[20,21,23,81,82],Me=[1,99],ke=[1,104],ge=[1,107],ct=[1,108],le=[1,101],Ft=[1,106],Oe=[1,109],Wn=[1,102],dt=[1,114],Cn=[1,113],un=[1,103],Kt=[1,105],hn=[1,110],cn=[1,111],qt=[1,112],_t=[1,115],Si=[20,21,22,23,81,82],ni=[20,21,22,23,53,81,82],ei=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],ii=[20,21,23],$n=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],ar=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Yn=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],zn=[1,149],Bn=[1,157],sn=[1,158],jt=[1,159],bn=[1,160],tn=[1,144],Un=[1,145],bt=[1,141],gi=[1,152],zt=[1,153],di=[1,154],Ri=[1,155],Fi=[1,156],Bi=[1,161],Hi=[1,162],ti=[1,147],vi=[1,150],Di=[1,146],ui=[1,143],nc=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ga=[1,165],Er=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],bi=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],Fr=[12,21,22,24],Hr=[22,106],Kr=[1,250],Jr=[1,245],Br=[1,246],vs=[1,254],Os=[1,251],Gn=[1,248],rt=[1,247],gn=[1,249],Sn=[1,252],Pi=[1,253],Tr=[1,255],xr=[1,273],cs=[20,21,23,106],Wi=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],Ir={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(Kn,hi,xi,Pn,Qr,Ze,Xf){var ht=Ze.length-1;switch(Qr){case 5:Pn.parseDirective("%%{","open_directive");break;case 6:Pn.parseDirective(Ze[ht],"type_directive");break;case 7:Ze[ht]=Ze[ht].trim().replace(/'/g,'"'),Pn.parseDirective(Ze[ht],"arg_directive");break;case 8:Pn.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(Ze[ht])||Ze[ht].length>0)&&Ze[ht-1].push(Ze[ht]),this.$=Ze[ht-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=Ze[ht];break;case 19:Pn.setDirection("TB"),this.$="TB";break;case 20:Pn.setDirection(Ze[ht-1]),this.$=Ze[ht-1];break;case 35:this.$=Ze[ht-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=Pn.addSubGraph(Ze[ht-6],Ze[ht-1],Ze[ht-4]);break;case 42:this.$=Pn.addSubGraph(Ze[ht-3],Ze[ht-1],Ze[ht-3]);break;case 43:this.$=Pn.addSubGraph(void 0,Ze[ht-1],void 0);break;case 45:this.$=Ze[ht].trim(),Pn.setAccTitle(this.$);break;case 46:case 47:this.$=Ze[ht].trim(),Pn.setAccDescription(this.$);break;case 51:Pn.addLink(Ze[ht-2].stmt,Ze[ht],Ze[ht-1]),this.$={stmt:Ze[ht],nodes:Ze[ht].concat(Ze[ht-2].nodes)};break;case 52:Pn.addLink(Ze[ht-3].stmt,Ze[ht-1],Ze[ht-2]),this.$={stmt:Ze[ht-1],nodes:Ze[ht-1].concat(Ze[ht-3].nodes)};break;case 53:this.$={stmt:Ze[ht-1],nodes:Ze[ht-1]};break;case 54:this.$={stmt:Ze[ht],nodes:Ze[ht]};break;case 55:this.$=[Ze[ht]];break;case 56:this.$=Ze[ht-4].concat(Ze[ht]);break;case 57:this.$=[Ze[ht-2]],Pn.setClass(Ze[ht-2],Ze[ht]);break;case 58:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"square");break;case 59:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"doublecircle");break;case 60:this.$=Ze[ht-5],Pn.addVertex(Ze[ht-5],Ze[ht-2],"circle");break;case 61:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"ellipse");break;case 62:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"stadium");break;case 63:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"subroutine");break;case 64:this.$=Ze[ht-7],Pn.addVertex(Ze[ht-7],Ze[ht-1],"rect",void 0,void 0,void 0,Object.fromEntries([[Ze[ht-5],Ze[ht-3]]]));break;case 65:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"cylinder");break;case 66:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"round");break;case 67:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"diamond");break;case 68:this.$=Ze[ht-5],Pn.addVertex(Ze[ht-5],Ze[ht-2],"hexagon");break;case 69:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"odd");break;case 70:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"trapezoid");break;case 71:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"inv_trapezoid");break;case 72:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"lean_right");break;case 73:this.$=Ze[ht-3],Pn.addVertex(Ze[ht-3],Ze[ht-1],"lean_left");break;case 74:this.$=Ze[ht],Pn.addVertex(Ze[ht]);break;case 75:Ze[ht-1].text=Ze[ht],this.$=Ze[ht-1];break;case 76:case 77:Ze[ht-2].text=Ze[ht-1],this.$=Ze[ht-2];break;case 78:this.$=Ze[ht];break;case 79:var Bo=Pn.destructLink(Ze[ht],Ze[ht-2]);this.$={type:Bo.type,stroke:Bo.stroke,length:Bo.length,text:Ze[ht-1]};break;case 80:var Bo=Pn.destructLink(Ze[ht]);this.$={type:Bo.type,stroke:Bo.stroke,length:Bo.length};break;case 81:this.$=Ze[ht-1];break;case 83:case 97:case 153:this.$=Ze[ht-1]+""+Ze[ht];break;case 98:case 99:this.$=Ze[ht-4],Pn.addClass(Ze[ht-2],Ze[ht]);break;case 100:this.$=Ze[ht-4],Pn.setClass(Ze[ht-2],Ze[ht]);break;case 101:case 109:this.$=Ze[ht-1],Pn.setClickEvent(Ze[ht-1],Ze[ht]);break;case 102:case 110:this.$=Ze[ht-3],Pn.setClickEvent(Ze[ht-3],Ze[ht-2]),Pn.setTooltip(Ze[ht-3],Ze[ht]);break;case 103:this.$=Ze[ht-2],Pn.setClickEvent(Ze[ht-2],Ze[ht-1],Ze[ht]);break;case 104:this.$=Ze[ht-4],Pn.setClickEvent(Ze[ht-4],Ze[ht-3],Ze[ht-2]),Pn.setTooltip(Ze[ht-4],Ze[ht]);break;case 105:case 111:this.$=Ze[ht-1],Pn.setLink(Ze[ht-1],Ze[ht]);break;case 106:case 112:this.$=Ze[ht-3],Pn.setLink(Ze[ht-3],Ze[ht-2]),Pn.setTooltip(Ze[ht-3],Ze[ht]);break;case 107:case 113:this.$=Ze[ht-3],Pn.setLink(Ze[ht-3],Ze[ht-2],Ze[ht]);break;case 108:case 114:this.$=Ze[ht-5],Pn.setLink(Ze[ht-5],Ze[ht-4],Ze[ht]),Pn.setTooltip(Ze[ht-5],Ze[ht-2]);break;case 115:this.$=Ze[ht-4],Pn.addVertex(Ze[ht-2],void 0,void 0,Ze[ht]);break;case 116:case 118:this.$=Ze[ht-4],Pn.updateLink(Ze[ht-2],Ze[ht]);break;case 117:this.$=Ze[ht-4],Pn.updateLink([Ze[ht-2]],Ze[ht]);break;case 119:this.$=Ze[ht-8],Pn.updateLinkInterpolate([Ze[ht-6]],Ze[ht-2]),Pn.updateLink([Ze[ht-6]],Ze[ht]);break;case 120:this.$=Ze[ht-8],Pn.updateLinkInterpolate(Ze[ht-6],Ze[ht-2]),Pn.updateLink(Ze[ht-6],Ze[ht]);break;case 121:this.$=Ze[ht-6],Pn.updateLinkInterpolate([Ze[ht-4]],Ze[ht]);break;case 122:this.$=Ze[ht-6],Pn.updateLinkInterpolate(Ze[ht-4],Ze[ht]);break;case 123:case 125:this.$=[Ze[ht]];break;case 124:case 126:Ze[ht-2].push(Ze[ht]),this.$=Ze[ht-2];break;case 128:this.$=Ze[ht-1]+Ze[ht];break;case 150:this.$=Ze[ht];break;case 151:this.$=Ze[ht-1]+""+Ze[ht];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,5:3,6:5,12:i,16:4,21:o,22:l,24:h},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:i,16:4,21:o,22:l,24:h},t(p,m,{17:11}),{7:12,13:[1,13]},{16:14,21:o,22:l,24:h},{16:15,21:o,22:l,24:h},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:b,21:x,22:E,23:L,32:24,33:25,34:26,35:27,36:28,37:29,38:I,43:31,44:F,46:W,48:K,50:35,51:45,52:re,54:46,66:se,67:pe,86:he,87:Ce,88:Le,89:Ve,90:je,91:Pe,95:ze,105:xe,106:_e,109:de,111:te,112:be,116:47,118:q,119:ot,120:Z,121:Dt,122:xn,123:ln,124:Je,125:kt,126:mt,127:vt},{8:64,10:[1,65],15:Pt},t([10,15],[2,6]),t(p,[2,17]),t(p,[2,18]),t(p,[2,19]),{20:[1,68],21:[1,69],22:rn,27:67,30:70},t(nt,[2,11]),t(nt,[2,12]),t(nt,[2,13]),t(nt,[2,14]),t(nt,[2,15]),t(nt,[2,16]),{9:72,20:Ln,21:Ie,23:Be,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:Ln,21:Ie,23:Be},{9:81,20:Ln,21:Ie,23:Be},{9:82,20:Ln,21:Ie,23:Be},{9:83,20:Ln,21:Ie,23:Be},{9:84,20:Ln,21:Ie,23:Be},{9:86,20:Ln,21:Ie,22:[1,85],23:Be},t(nt,[2,44]),{45:[1,87]},{47:[1,88]},t(nt,[2,47]),t(et,[2,54],{30:89,22:rn}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:Me,52:ke,66:ge,67:ct,84:[1,97],91:le,97:96,98:[1,94],100:[1,95],105:Ft,106:Oe,109:Wn,111:dt,112:Cn,115:100,117:98,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(nt,[2,158]),t(nt,[2,159]),t(nt,[2,160]),t(nt,[2,161]),t(Si,[2,55],{53:[1,116]}),t(ni,[2,74],{116:129,40:[1,117],52:re,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:se,67:pe,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:Pe,95:ze,105:xe,106:_e,109:de,111:te,112:be,122:xn,123:ln,124:Je,125:kt,126:mt,127:vt}),t(ei,[2,150]),t(ei,[2,175]),t(ei,[2,176]),t(ei,[2,177]),t(ei,[2,178]),t(ei,[2,179]),t(ei,[2,180]),t(ei,[2,181]),t(ei,[2,182]),t(ei,[2,183]),t(ei,[2,184]),t(ei,[2,185]),t(ei,[2,186]),t(ei,[2,187]),t(ei,[2,188]),t(ei,[2,189]),t(ei,[2,190]),{9:130,20:Ln,21:Ie,23:Be},{11:131,14:[1,132]},t(ii,[2,8]),t(p,[2,20]),t(p,[2,26]),t(p,[2,27]),{21:[1,133]},t($n,[2,34],{30:134,22:rn}),t(nt,[2,35]),{50:135,51:45,52:re,54:46,66:se,67:pe,91:Pe,95:ze,105:xe,106:_e,109:de,111:te,112:be,116:47,122:xn,123:ln,124:Je,125:kt,126:mt,127:vt},t(ar,[2,48]),t(ar,[2,49]),t(ar,[2,50]),t(Yn,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:zn,24:Bn,26:sn,38:jt,39:139,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),t(nt,[2,36]),t(nt,[2,37]),t(nt,[2,38]),t(nt,[2,39]),t(nt,[2,40]),{22:zn,24:Bn,26:sn,38:jt,39:163,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(nc,m,{17:164}),t(nt,[2,45]),t(nt,[2,46]),t(et,[2,53],{52:Ga}),{26:Me,52:ke,66:ge,67:ct,91:le,97:166,102:[1,167],105:Ft,106:Oe,109:Wn,111:dt,112:Cn,115:100,117:98,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{95:[1,168],103:169,105:[1,170]},{26:Me,52:ke,66:ge,67:ct,91:le,95:[1,171],97:172,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,115:100,117:98,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{26:Me,52:ke,66:ge,67:ct,91:le,97:173,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,115:100,117:98,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(ii,[2,101],{22:[1,174],99:[1,175]}),t(ii,[2,105],{22:[1,176]}),t(ii,[2,109],{115:100,117:178,22:[1,177],26:Me,52:ke,66:ge,67:ct,91:le,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t}),t(ii,[2,111],{22:[1,179]}),t(Er,[2,152]),t(Er,[2,154]),t(Er,[2,155]),t(Er,[2,156]),t(Er,[2,157]),t(bi,[2,162]),t(bi,[2,163]),t(bi,[2,164]),t(bi,[2,165]),t(bi,[2,166]),t(bi,[2,167]),t(bi,[2,168]),t(bi,[2,169]),t(bi,[2,170]),t(bi,[2,171]),t(bi,[2,172]),t(bi,[2,173]),t(bi,[2,174]),{52:re,54:180,66:se,67:pe,91:Pe,95:ze,105:xe,106:_e,109:de,111:te,112:be,116:47,122:xn,123:ln,124:Je,125:kt,126:mt,127:vt},{22:zn,24:Bn,26:sn,38:jt,39:181,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:182,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:184,42:bn,52:ke,57:[1,183],66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:185,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:186,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:187,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{66:[1,188]},{22:zn,24:Bn,26:sn,38:jt,39:189,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:190,42:bn,52:ke,66:ge,67:ct,71:[1,191],73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:192,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:193,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:194,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(ei,[2,151]),t(Fr,[2,3]),{8:195,15:Pt},{15:[2,7]},t(p,[2,28]),t($n,[2,33]),t(et,[2,51],{30:196,22:rn}),t(Yn,[2,75],{22:[1,197]}),{22:[1,198]},{22:zn,24:Bn,26:sn,38:jt,39:199,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,82:[1,200],83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(bi,[2,82]),t(bi,[2,84]),t(bi,[2,140]),t(bi,[2,141]),t(bi,[2,142]),t(bi,[2,143]),t(bi,[2,144]),t(bi,[2,145]),t(bi,[2,146]),t(bi,[2,147]),t(bi,[2,148]),t(bi,[2,149]),t(bi,[2,85]),t(bi,[2,86]),t(bi,[2,87]),t(bi,[2,88]),t(bi,[2,89]),t(bi,[2,90]),t(bi,[2,91]),t(bi,[2,92]),t(bi,[2,93]),t(bi,[2,94]),t(bi,[2,95]),{9:203,20:Ln,21:Ie,22:zn,23:Be,24:Bn,26:sn,38:jt,40:[1,202],42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{18:18,19:19,20:b,21:x,22:E,23:L,32:24,33:25,34:26,35:27,36:28,37:29,38:I,42:[1,204],43:31,44:F,46:W,48:K,50:35,51:45,52:re,54:46,66:se,67:pe,86:he,87:Ce,88:Le,89:Ve,90:je,91:Pe,95:ze,105:xe,106:_e,109:de,111:te,112:be,116:47,118:q,119:ot,120:Z,121:Dt,122:xn,123:ln,124:Je,125:kt,126:mt,127:vt},{22:rn,30:205},{22:[1,206],26:Me,52:ke,66:ge,67:ct,91:le,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,115:100,117:178,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},t(Hr,[2,123]),{22:[1,211]},{22:[1,212],26:Me,52:ke,66:ge,67:ct,91:le,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,115:100,117:178,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:[1,213],26:Me,52:ke,66:ge,67:ct,91:le,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,115:100,117:178,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{84:[1,214]},t(ii,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},t(Er,[2,153]),{84:[1,219],101:[1,220]},t(Si,[2,57],{116:129,52:re,66:se,67:pe,91:Pe,95:ze,105:xe,106:_e,109:de,111:te,112:be,122:xn,123:ln,124:Je,125:kt,126:mt,127:vt}),{22:zn,24:Bn,26:sn,38:jt,41:[1,221],42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,56:[1,222],66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:223,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,58:[1,224],66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,60:[1,225],66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,62:[1,226],66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,64:[1,227],66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{67:[1,228]},{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,66:ge,67:ct,70:[1,229],73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,66:ge,67:ct,72:[1,230],73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,39:231,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,41:[1,232],42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,66:ge,67:ct,73:tn,75:[1,233],77:[1,234],81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,66:ge,67:ct,73:tn,75:[1,236],77:[1,235],81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{9:237,20:Ln,21:Ie,23:Be},t(et,[2,52],{52:Ga}),t(Yn,[2,77]),t(Yn,[2,76]),{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,66:ge,67:ct,68:[1,238],73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(Yn,[2,79]),t(bi,[2,83]),{22:zn,24:Bn,26:sn,38:jt,39:239,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(nc,m,{17:240}),t(nt,[2,43]),{51:241,52:re,54:46,66:se,67:pe,91:Pe,95:ze,105:xe,106:_e,109:de,111:te,112:be,116:47,122:xn,123:ln,124:Je,125:kt,126:mt,127:vt},{22:Kr,66:Jr,67:Br,86:vs,96:242,102:Os,105:Gn,107:243,108:244,109:rt,110:gn,111:Sn,112:Pi,113:Tr},{22:Kr,66:Jr,67:Br,86:vs,96:256,102:Os,105:Gn,107:243,108:244,109:rt,110:gn,111:Sn,112:Pi,113:Tr},{22:Kr,66:Jr,67:Br,86:vs,96:257,102:Os,104:[1,258],105:Gn,107:243,108:244,109:rt,110:gn,111:Sn,112:Pi,113:Tr},{22:Kr,66:Jr,67:Br,86:vs,96:259,102:Os,104:[1,260],105:Gn,107:243,108:244,109:rt,110:gn,111:Sn,112:Pi,113:Tr},{105:[1,261]},{22:Kr,66:Jr,67:Br,86:vs,96:262,102:Os,105:Gn,107:243,108:244,109:rt,110:gn,111:Sn,112:Pi,113:Tr},{22:Kr,66:Jr,67:Br,86:vs,96:263,102:Os,105:Gn,107:243,108:244,109:rt,110:gn,111:Sn,112:Pi,113:Tr},{26:Me,52:ke,66:ge,67:ct,91:le,97:264,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,115:100,117:98,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(ii,[2,102]),{84:[1,265]},t(ii,[2,106],{22:[1,266]}),t(ii,[2,107]),t(ii,[2,110]),t(ii,[2,112],{22:[1,267]}),t(ii,[2,113]),t(ni,[2,58]),t(ni,[2,59]),{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,58:[1,268],66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(ni,[2,66]),t(ni,[2,61]),t(ni,[2,62]),t(ni,[2,63]),{66:[1,269]},t(ni,[2,65]),t(ni,[2,67]),{22:zn,24:Bn,26:sn,38:jt,42:bn,52:ke,66:ge,67:ct,72:[1,270],73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(ni,[2,69]),t(ni,[2,70]),t(ni,[2,72]),t(ni,[2,71]),t(ni,[2,73]),t(Fr,[2,4]),t([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:zn,24:Bn,26:sn,38:jt,41:[1,271],42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{18:18,19:19,20:b,21:x,22:E,23:L,32:24,33:25,34:26,35:27,36:28,37:29,38:I,42:[1,272],43:31,44:F,46:W,48:K,50:35,51:45,52:re,54:46,66:se,67:pe,86:he,87:Ce,88:Le,89:Ve,90:je,91:Pe,95:ze,105:xe,106:_e,109:de,111:te,112:be,116:47,118:q,119:ot,120:Z,121:Dt,122:xn,123:ln,124:Je,125:kt,126:mt,127:vt},t(Si,[2,56]),t(ii,[2,115],{106:xr}),t(cs,[2,125],{108:274,22:Kr,66:Jr,67:Br,86:vs,102:Os,105:Gn,109:rt,110:gn,111:Sn,112:Pi,113:Tr}),t(Wi,[2,127]),t(Wi,[2,129]),t(Wi,[2,130]),t(Wi,[2,131]),t(Wi,[2,132]),t(Wi,[2,133]),t(Wi,[2,134]),t(Wi,[2,135]),t(Wi,[2,136]),t(Wi,[2,137]),t(Wi,[2,138]),t(Wi,[2,139]),t(ii,[2,116],{106:xr}),t(ii,[2,117],{106:xr}),{22:[1,275]},t(ii,[2,118],{106:xr}),{22:[1,276]},t(Hr,[2,124]),t(ii,[2,98],{106:xr}),t(ii,[2,99],{106:xr}),t(ii,[2,100],{115:100,117:178,26:Me,52:ke,66:ge,67:ct,91:le,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t}),t(ii,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:Ln,21:Ie,23:Be},t(nt,[2,42]),{22:Kr,66:Jr,67:Br,86:vs,102:Os,105:Gn,107:283,108:244,109:rt,110:gn,111:Sn,112:Pi,113:Tr},t(Wi,[2,128]),{26:Me,52:ke,66:ge,67:ct,91:le,97:284,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,115:100,117:98,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{26:Me,52:ke,66:ge,67:ct,91:le,97:285,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,115:100,117:98,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(ii,[2,108]),t(ii,[2,114]),t(ni,[2,60]),{22:zn,24:Bn,26:sn,38:jt,39:286,42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:140,84:bt,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},t(ni,[2,68]),t(nc,m,{17:287}),t(cs,[2,126],{108:274,22:Kr,66:Jr,67:Br,86:vs,102:Os,105:Gn,109:rt,110:gn,111:Sn,112:Pi,113:Tr}),t(ii,[2,121],{115:100,117:178,22:[1,288],26:Me,52:ke,66:ge,67:ct,91:le,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t}),t(ii,[2,122],{115:100,117:178,22:[1,289],26:Me,52:ke,66:ge,67:ct,91:le,105:Ft,106:Oe,109:Wn,111:dt,112:Cn,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t}),{22:zn,24:Bn,26:sn,38:jt,41:[1,290],42:bn,52:ke,66:ge,67:ct,73:tn,81:Un,83:201,85:151,86:gi,87:zt,88:di,89:Ri,90:Fi,91:Bi,92:Hi,94:142,95:ti,105:Ft,106:Oe,109:vi,111:dt,112:Cn,113:Di,114:ui,115:148,122:un,123:Kt,124:hn,125:cn,126:qt,127:_t},{18:18,19:19,20:b,21:x,22:E,23:L,32:24,33:25,34:26,35:27,36:28,37:29,38:I,42:[1,291],43:31,44:F,46:W,48:K,50:35,51:45,52:re,54:46,66:se,67:pe,86:he,87:Ce,88:Le,89:Ve,90:je,91:Pe,95:ze,105:xe,106:_e,109:de,111:te,112:be,116:47,118:q,119:ot,120:Z,121:Dt,122:xn,123:ln,124:Je,125:kt,126:mt,127:vt},{22:Kr,66:Jr,67:Br,86:vs,96:292,102:Os,105:Gn,107:243,108:244,109:rt,110:gn,111:Sn,112:Pi,113:Tr},{22:Kr,66:Jr,67:Br,86:vs,96:293,102:Os,105:Gn,107:243,108:244,109:rt,110:gn,111:Sn,112:Pi,113:Tr},t(ni,[2,64]),t(nt,[2,41]),t(ii,[2,119],{106:xr}),t(ii,[2,120],{106:xr})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(Kn,hi){if(hi.recoverable)this.trace(Kn);else{var xi=new Error(Kn);throw xi.hash=hi,xi}},parse:function(Kn){var hi=this,xi=[0],Pn=[],Qr=[null],Ze=[],Xf=this.table,ht="",Bo=0,Rx=0,vS=2,Px=1,Ix=Ze.slice.call(arguments,1),Fs=Object.create(this.lexer),Qc={yy:{}};for(var eu in this.yy)Object.prototype.hasOwnProperty.call(this.yy,eu)&&(Qc.yy[eu]=this.yy[eu]);Fs.setInput(Kn,Qc.yy),Qc.yy.lexer=Fs,Qc.yy.parser=this,typeof Fs.yylloc>"u"&&(Fs.yylloc={});var Zf=Fs.yylloc;Ze.push(Zf);var Uv=Fs.options&&Fs.options.ranges;typeof Qc.yy.parseError=="function"?this.parseError=Qc.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Dx(){var Ya;return Ya=Pn.pop()||Fs.lex()||Px,typeof Ya!="number"&&(Ya instanceof Array&&(Pn=Ya,Ya=Pn.pop()),Ya=hi.symbols_[Ya]||Ya),Ya}for(var xo,hr,na,eh,ic={},th,Ha,Gv,k0;;){if(hr=xi[xi.length-1],this.defaultActions[hr]?na=this.defaultActions[hr]:((xo===null||typeof xo>"u")&&(xo=Dx()),na=Xf[hr]&&Xf[hr][xo]),typeof na>"u"||!na.length||!na[0]){var Kf="";k0=[];for(th in Xf[hr])this.terminals_[th]&&th>vS&&k0.push("'"+this.terminals_[th]+"'");Fs.showPosition?Kf="Parse error on line "+(Bo+1)+`:
`+Fs.showPosition()+`
Expecting `+k0.join(", ")+", got '"+(this.terminals_[xo]||xo)+"'":Kf="Parse error on line "+(Bo+1)+": Unexpected "+(xo==Px?"end of input":"'"+(this.terminals_[xo]||xo)+"'"),this.parseError(Kf,{text:Fs.match,token:this.terminals_[xo]||xo,line:Fs.yylineno,loc:Zf,expected:k0})}if(na[0]instanceof Array&&na.length>1)throw new Error("Parse Error: multiple actions possible at state: "+hr+", token: "+xo);switch(na[0]){case 1:xi.push(xo),Qr.push(Fs.yytext),Ze.push(Fs.yylloc),xi.push(na[1]),xo=null,Rx=Fs.yyleng,ht=Fs.yytext,Bo=Fs.yylineno,Zf=Fs.yylloc;break;case 2:if(Ha=this.productions_[na[1]][1],ic.$=Qr[Qr.length-Ha],ic._$={first_line:Ze[Ze.length-(Ha||1)].first_line,last_line:Ze[Ze.length-1].last_line,first_column:Ze[Ze.length-(Ha||1)].first_column,last_column:Ze[Ze.length-1].last_column},Uv&&(ic._$.range=[Ze[Ze.length-(Ha||1)].range[0],Ze[Ze.length-1].range[1]]),eh=this.performAction.apply(ic,[ht,Rx,Bo,Qc.yy,na[1],Qr,Ze].concat(Ix)),typeof eh<"u")return eh;Ha&&(xi=xi.slice(0,-1*Ha*2),Qr=Qr.slice(0,-1*Ha),Ze=Ze.slice(0,-1*Ha)),xi.push(this.productions_[na[1]][0]),Qr.push(ic.$),Ze.push(ic._$),Gv=Xf[xi[xi.length-2]][xi[xi.length-1]],xi.push(Gv);break;case 3:return!0}}return!0}},dd=function(){var ba={EOF:1,parseError:function(hi,xi){if(this.yy.parser)this.yy.parser.parseError(hi,xi);else throw new Error(hi)},setInput:function(Kn,hi){return this.yy=hi||this.yy||{},this._input=Kn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Kn=this._input[0];this.yytext+=Kn,this.yyleng++,this.offset++,this.match+=Kn,this.matched+=Kn;var hi=Kn.match(/(?:\r\n?|\n).*/g);return hi?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Kn},unput:function(Kn){var hi=Kn.length,xi=Kn.split(/(?:\r\n?|\n)/g);this._input=Kn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-hi),this.offset-=hi;var Pn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),xi.length-1&&(this.yylineno-=xi.length-1);var Qr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:xi?(xi.length===Pn.length?this.yylloc.first_column:0)+Pn[Pn.length-xi.length].length-xi[0].length:this.yylloc.first_column-hi},this.options.ranges&&(this.yylloc.range=[Qr[0],Qr[0]+this.yyleng-hi]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Kn){this.unput(this.match.slice(Kn))},pastInput:function(){var Kn=this.matched.substr(0,this.matched.length-this.match.length);return(Kn.length>20?"...":"")+Kn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Kn=this.match;return Kn.length<20&&(Kn+=this._input.substr(0,20-Kn.length)),(Kn.substr(0,20)+(Kn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Kn=this.pastInput(),hi=new Array(Kn.length+1).join("-");return Kn+this.upcomingInput()+`
`+hi+"^"},test_match:function(Kn,hi){var xi,Pn,Qr;if(this.options.backtrack_lexer&&(Qr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Qr.yylloc.range=this.yylloc.range.slice(0))),Pn=Kn[0].match(/(?:\r\n?|\n).*/g),Pn&&(this.yylineno+=Pn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Pn?Pn[Pn.length-1].length-Pn[Pn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Kn[0].length},this.yytext+=Kn[0],this.match+=Kn[0],this.matches=Kn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Kn[0].length),this.matched+=Kn[0],xi=this.performAction.call(this,this.yy,this,hi,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),xi)return xi;if(this._backtrack){for(var Ze in Qr)this[Ze]=Qr[Ze];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Kn,hi,xi,Pn;this._more||(this.yytext="",this.match="");for(var Qr=this._currentRules(),Ze=0;Ze<Qr.length;Ze++)if(xi=this._input.match(this.rules[Qr[Ze]]),xi&&(!hi||xi[0].length>hi[0].length)){if(hi=xi,Pn=Ze,this.options.backtrack_lexer){if(Kn=this.test_match(xi,Qr[Ze]),Kn!==!1)return Kn;if(this._backtrack){hi=!1;continue}else return!1}else if(!this.options.flex)break}return hi?(Kn=this.test_match(hi,Qr[Pn]),Kn!==!1?Kn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var hi=this.next();return hi||this.lex()},begin:function(hi){this.conditionStack.push(hi)},popState:function(){var hi=this.conditionStack.length-1;return hi>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(hi){return hi=this.conditionStack.length-1-Math.abs(hi||0),hi>=0?this.conditionStack[hi]:"INITIAL"},pushState:function(hi){this.begin(hi)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(hi,xi,Pn,Qr){switch(Pn){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:break;case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:return hi.lex.firstGraph()&&this.begin("dir"),24;case 36:return hi.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:return 101;case 40:return 101;case 41:return 101;case 42:return 101;case 43:return this.popState(),25;case 44:return this.popState(),26;case 45:return this.popState(),26;case 46:return this.popState(),26;case 47:return this.popState(),26;case 48:return this.popState(),26;case 49:return this.popState(),26;case 50:return this.popState(),26;case 51:return this.popState(),26;case 52:return this.popState(),26;case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:return 82;case 67:return 82;case 68:return 82;case 69:return 81;case 70:return 81;case 71:return 81;case 72:return 59;case 73:return 60;case 74:return 61;case 75:return 62;case 76:return 63;case 77:return 64;case 78:return 65;case 79:return 69;case 80:return 70;case 81:return 55;case 82:return 56;case 83:return 109;case 84:return 112;case 85:return 127;case 86:return 124;case 87:return 113;case 88:return 125;case 89:return 125;case 90:return 114;case 91:return 73;case 92:return 92;case 93:return"SEP";case 94:return 91;case 95:return 66;case 96:return 75;case 97:return 74;case 98:return 77;case 99:return 76;case 100:return 122;case 101:return 123;case 102:return 68;case 103:return 57;case 104:return 58;case 105:return 40;case 106:return 41;case 107:return 71;case 108:return 72;case 109:return 133;case 110:return 21;case 111:return 22;case 112:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112],inclusive:!0}}};return ba}();Ir.lexer=dd;function fd(){this.yy={}}return fd.prototype=Ir,Ir.Parser=fd,new fd}();oC.parser=oC;const QR=oC,gse=(t,i)=>{var o;return((o=i==null?void 0:i.flowchart)==null?void 0:o.defaultRenderer)==="dagre-wrapper"?!1:t.match(/^\s*graph/)!==null},vse=(t,i)=>{var o;return((o=i==null?void 0:i.flowchart)==null?void 0:o.defaultRenderer)==="dagre-wrapper"&&t.match(/^\s*graph/)!==null?!0:t.match(/^\s*flowchart/)!==null},yse="flowchart-";let eP=0,aC=Qe(),rs={},Yf=[],d0={},ju=[],sx={},lC={},ox=0,cC=!0,$c,ax,lx=[];const cx=t=>Ai.sanitizeText(t,aC),_se=function(t,i,o){ss.parseDirective(this,t,i,o)},ux=function(t){const i=Object.keys(rs);for(const o of i)if(rs[o].id===t)return rs[o].domId;return t},bse=function(t,i,o,l,h,p,m={}){let b,x=t;x!==void 0&&x.trim().length!==0&&(rs[x]===void 0&&(rs[x]={id:x,domId:yse+x+"-"+eP,styles:[],classes:[]}),eP++,i!==void 0?(aC=Qe(),b=cx(i.trim()),b[0]==='"'&&b[b.length-1]==='"'&&(b=b.substring(1,b.length-1)),rs[x].text=b):rs[x].text===void 0&&(rs[x].text=t),o!==void 0&&(rs[x].type=o),l!=null&&l.forEach(function(E){rs[x].styles.push(E)}),h!=null&&h.forEach(function(E){rs[x].classes.push(E)}),p!==void 0&&(rs[x].dir=p),rs[x].props===void 0?rs[x].props=m:m!==void 0&&Object.assign(rs[x].props,m))},xse=function(t,i,o,l){const m={start:t,end:i,type:void 0,text:""};l=o.text,l!==void 0&&(m.text=cx(l.trim()),m.text[0]==='"'&&m.text[m.text.length-1]==='"'&&(m.text=m.text.substring(1,m.text.length-1))),o!==void 0&&(m.type=o.type,m.stroke=o.stroke,m.length=o.length),Yf.push(m)},wse=function(t,i,o,l){let h,p;for(h=0;h<t.length;h++)for(p=0;p<i.length;p++)xse(t[h],i[p],o,l)},kse=function(t,i){t.forEach(function(o){o==="default"?Yf.defaultInterpolate=i:Yf[o].interpolate=i})},Cse=function(t,i){t.forEach(function(o){o==="default"?Yf.defaultStyle=i:(Ii.isSubstringInArray("fill",i)===-1&&i.push("fill:none"),Yf[o].style=i)})},Sse=function(t,i){d0[t]===void 0&&(d0[t]={id:t,styles:[],textStyles:[]}),i!=null&&i.forEach(function(o){if(o.match("color")){const h=o.replace("fill","bgFill").replace("color","fill");d0[t].textStyles.push(h)}d0[t].styles.push(o)})},Ese=function(t){$c=t,$c.match(/.*</)&&($c="RL"),$c.match(/.*\^/)&&($c="BT"),$c.match(/.*>/)&&($c="LR"),$c.match(/.*v/)&&($c="TB")},uC=function(t,i){t.split(",").forEach(function(o){let l=o;rs[l]!==void 0&&rs[l].classes.push(i),sx[l]!==void 0&&sx[l].classes.push(i)})},Tse=function(t,i){t.split(",").forEach(function(o){i!==void 0&&(lC[ax==="gen-1"?ux(o):o]=cx(i))})},Mse=function(t,i,o){let l=ux(t);if(Qe().securityLevel!=="loose"||i===void 0)return;let h=[];if(typeof o=="string"){h=o.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let p=0;p<h.length;p++){let m=h[p].trim();m.charAt(0)==='"'&&m.charAt(m.length-1)==='"'&&(m=m.substr(1,m.length-2)),h[p]=m}}h.length===0&&h.push(t),rs[t]!==void 0&&(rs[t].haveCallback=!0,lx.push(function(){const p=document.querySelector(`[id="${l}"]`);p!==null&&p.addEventListener("click",function(){Ii.runFunc(i,...h)},!1)}))},Ase=function(t,i,o){t.split(",").forEach(function(l){rs[l]!==void 0&&(rs[l].link=Ii.formatUrl(i,aC),rs[l].linkTarget=o)}),uC(t,"clickable")},Lse=function(t){return lC[t]},Rse=function(t,i,o){t.split(",").forEach(function(l){Mse(l,i,o)}),uC(t,"clickable")},Pse=function(t){lx.forEach(function(i){i(t)})},Ise=function(){return $c.trim()},Dse=function(){return rs},Nse=function(){return Yf},Ose=function(){return d0},tP=function(t){let i=dn(".mermaidTooltip");(i._groups||i)[0][0]===null&&(i=dn("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),dn(t).select("svg").selectAll("g.node").on("mouseover",function(){const h=dn(this);if(h.attr("title")===null)return;const m=this.getBoundingClientRect();i.transition().duration(200).style("opacity",".9"),i.text(h.attr("title")).style("left",window.scrollX+m.left+(m.right-m.left)/2+"px").style("top",window.scrollY+m.top-14+document.body.scrollTop+"px"),i.html(i.html().replace(/&lt;br\/&gt;/g,"<br/>")),h.classed("hover",!0)}).on("mouseout",function(){i.transition().duration(500).style("opacity",0),dn(this).classed("hover",!1)})};lx.push(tP);const Fse=function(t="gen-1"){rs={},d0={},Yf=[],lx=[tP],ju=[],sx={},ox=0,lC=[],cC=!0,ax=t,Yl()},Bse=t=>{ax=t||"gen-1"},Vse=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},Wse=function(t,i,o){let l=t.trim(),h=o;t===o&&o.match(/\s/)&&(l=void 0);function p(L){const I={boolean:{},number:{},string:{}},F=[];let W;return{nodeList:L.filter(function(re){const se=typeof re;return re.stmt&&re.stmt==="dir"?(W=re.value,!1):re.trim()===""?!1:se in I?I[se].hasOwnProperty(re)?!1:I[se][re]=!0:F.includes(re)?!1:F.push(re)}),dir:W}}let m=[];const{nodeList:b,dir:x}=p(m.concat.apply(m,i));if(m=b,ax==="gen-1")for(let L=0;L<m.length;L++)m[L]=ux(m[L]);l=l||"subGraph"+ox,h=h||"",h=cx(h),ox=ox+1;const E={id:l,nodes:m,title:h.trim(),classes:[],dir:x};return y.info("Adding",E.id,E.nodes,E.dir),E.nodes=sP(E,ju).nodes,ju.push(E),sx[l]=E,l},zse=function(t){for(const[i,o]of ju.entries())if(o.id===t)return i;return-1};let wv=-1;const nP=[],iP=function(t,i){const o=ju[i].nodes;if(wv=wv+1,wv>2e3)return;if(nP[wv]=i,ju[i].id===t)return{result:!0,count:0};let l=0,h=1;for(;l<o.length;){const p=zse(o[l]);if(p>=0){const m=iP(t,p);if(m.result)return{result:!0,count:h+m.count};h=h+m.count}l=l+1}return{result:!1,count:h}},Use=function(t){return nP[t]},Gse=function(){wv=-1,ju.length>0&&iP("none",ju.length-1)},Hse=function(){return ju},Yse=()=>cC?(cC=!1,!0):!1,jse=t=>{let i=t.trim(),o="arrow_open";switch(i[0]){case"<":o="arrow_point",i=i.slice(1);break;case"x":o="arrow_cross",i=i.slice(1);break;case"o":o="arrow_circle",i=i.slice(1);break}let l="normal";return i.includes("=")&&(l="thick"),i.includes(".")&&(l="dotted"),{type:o,stroke:l}},$se=(t,i)=>{const o=i.length;let l=0;for(let h=0;h<o;++h)i[h]===t&&++l;return l},qse=t=>{const i=t.trim();let o=i.slice(0,-1),l="arrow_open";switch(i.slice(-1)){case"x":l="arrow_cross",i[0]==="x"&&(l="double_"+l,o=o.slice(1));break;case">":l="arrow_point",i[0]==="<"&&(l="double_"+l,o=o.slice(1));break;case"o":l="arrow_circle",i[0]==="o"&&(l="double_"+l,o=o.slice(1));break}let h="normal",p=o.length-1;o[0]==="="&&(h="thick");let m=$se(".",o);return m&&(h="dotted",p=m),{type:l,stroke:h,length:p}},Xse=(t,i)=>{const o=qse(t);let l;if(i){if(l=jse(i),l.stroke!==o.stroke)return{type:"INVALID",stroke:"INVALID"};if(l.type==="arrow_open")l.type=o.type;else{if(l.type!==o.type)return{type:"INVALID",stroke:"INVALID"};l.type="double_"+l.type}return l.type==="double_arrow"&&(l.type="double_arrow_point"),l.length=o.length,l}return o},rP=(t,i)=>{let o=!1;return t.forEach(l=>{l.nodes.indexOf(i)>=0&&(o=!0)}),o},sP=(t,i)=>{const o=[];return t.nodes.forEach((l,h)=>{rP(i,l)||o.push(t.nodes[h])}),{nodes:o}},$u={parseDirective:_se,defaultConfig:()=>Zm.flowchart,setAccTitle:pl,getAccTitle:jl,getAccDescription:ql,setAccDescription:$l,addVertex:bse,lookUpDomId:ux,addLink:wse,updateLinkInterpolate:kse,updateLink:Cse,addClass:Sse,setDirection:Ese,setClass:uC,setTooltip:Tse,getTooltip:Lse,setClickEvent:Rse,setLink:Ase,bindFunctions:Pse,getDirection:Ise,getVertices:Dse,getEdges:Nse,getClasses:Ose,clear:Fse,setGen:Bse,defaultStyle:Vse,addSubGraph:Wse,getDepthFirstPos:Use,indexNodes:Gse,getSubGraphs:Hse,destructLink:Xse,lex:{firstGraph:Yse},exists:rP,makeUniq:sP,setDiagramTitle:Fu,getDiagramTitle:Bu};function oP(t,i){return!!t.children(i).length}function aP(t){return hC(t.v)+":"+hC(t.w)+":"+hC(t.name)}var Zse=/:/g;function hC(t){return t?String(t).replace(Zse,"\\:"):""}function qc(t,i){i&&t.attr("style",i)}function lP(t,i,o){i&&t.attr("class",i).attr("class",o+" "+t.attr("class"))}function ec(t,i){var o=i.graph();if(f7(o)){var l=o.transition;if(Ym(l))return l(t)}return t}var dC={normal:Jse,vee:Qse,undirected:eoe};function Kse(t){dC=t}function Jse(t,i,o,l){var h=t.append("marker").attr("id",i).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),p=h.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");qc(p,o[l+"Style"]),o[l+"Class"]&&p.attr("class",o[l+"Class"])}function Qse(t,i,o,l){var h=t.append("marker").attr("id",i).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),p=h.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");qc(p,o[l+"Style"]),o[l+"Class"]&&p.attr("class",o[l+"Class"])}function eoe(t,i,o,l){var h=t.append("marker").attr("id",i).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),p=h.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");qc(p,o[l+"Style"]),o[l+"Class"]&&p.attr("class",o[l+"Class"])}function fC(t,i){var o=t.append("foreignObject").attr("width","100000"),l=o.append("xhtml:div");l.attr("xmlns","http://www.w3.org/1999/xhtml");var h=i.label;switch(typeof h){case"function":l.insert(h);break;case"object":l.insert(function(){return h});break;default:l.html(h)}qc(l,i.labelStyle),l.style("display","inline-block"),l.style("white-space","nowrap");var p=l.node().getBoundingClientRect();return o.attr("width",p.width).attr("height",p.height),o}function toe(t,i){var o=t;return o.node().appendChild(i.label),qc(o,i.labelStyle),o}function noe(t,i){for(var o=t.append("text"),l=ioe(i.label).split(`
`),h=0;h<l.length;h++)o.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(l[h]);return qc(o,i.labelStyle),o}function ioe(t){for(var i="",o=!1,l,h=0;h<t.length;++h)if(l=t[h],o){switch(l){case"n":i+=`
`;break;default:i+=l}o=!1}else l==="\\"?o=!0:i+=l;return i}function pC(t,i,o){var l=i.label,h=t.append("g");i.labelType==="svg"?toe(h,i):typeof l!="string"||i.labelType==="html"?fC(h,i):noe(h,i);var p=h.node().getBBox(),m;switch(o){case"top":m=-i.height/2;break;case"bottom":m=i.height/2-p.height;break;default:m=-p.height/2}return h.attr("transform","translate("+-p.width/2+","+m+")"),h}var mC=function(t,i){var o=i.nodes().filter(function(p){return oP(i,p)}),l=t.selectAll("g.cluster").data(o,function(p){return p});ec(l.exit(),i).style("opacity",0).remove();var h=l.enter().append("g").attr("class","cluster").attr("id",function(p){var m=i.node(p);return m.id}).style("opacity",0).each(function(p){var m=i.node(p),b=dn(this);dn(this).append("rect");var x=b.append("g").attr("class","label");pC(x,m,m.clusterLabelPos)});return l=l.merge(h),l=ec(l,i).style("opacity",1),l.selectAll("rect").each(function(p){var m=i.node(p),b=dn(this);qc(b,m.style)}),l};function roe(t){mC=t}let gC=function(t,i){var o=t.selectAll("g.edgeLabel").data(i.edges(),function(h){return aP(h)}).classed("update",!0);o.exit().remove(),o.enter().append("g").classed("edgeLabel",!0).style("opacity",0),o=t.selectAll("g.edgeLabel"),o.each(function(h){var p=dn(this);p.select(".label").remove();var m=i.edge(h),b=pC(p,i.edge(h),0).classed("label",!0),x=b.node().getBBox();m.labelId&&b.attr("id",m.labelId),Oi(m,"width")||(m.width=x.width),Oi(m,"height")||(m.height=x.height)});var l;return o.exit?l=o.exit():l=o.selectAll(null),ec(l,i).style("opacity",0).remove(),o};function soe(t){gC=t}function cP(t,i){return t.intersect(i)}var vC=function(t,i,o){var l=t.selectAll("g.edgePath").data(i.edges(),function(m){return aP(m)}).classed("update",!0),h=uoe(l,i);hoe(l,i);var p=l.merge!==void 0?l.merge(h):l;return ec(p,i).style("opacity",1),p.each(function(m){var b=dn(this),x=i.edge(m);x.elem=this,x.id&&b.attr("id",x.id),lP(b,x.class,(b.classed("update")?"update ":"")+"edgePath")}),p.selectAll("path.path").each(function(m){var b=i.edge(m);b.arrowheadId=X2("arrowhead");var x=dn(this).attr("marker-end",function(){return"url("+aoe(location.href,b.arrowheadId)+")"}).style("fill","none");ec(x,i).attr("d",function(E){return loe(i,E)}),qc(x,b.style)}),p.selectAll("defs *").remove(),p.selectAll("defs").each(function(m){var b=i.edge(m),x=o[b.arrowhead];x(dn(this),b.arrowheadId,b,"arrowhead")}),p};function ooe(t){vC=t}function aoe(t,i){var o=t.split("#")[0];return o+"#"+i}function loe(t,i){var o=t.edge(i),l=t.node(i.v),h=t.node(i.w),p=o.points.slice(1,o.points.length-1);return p.unshift(cP(l,p[0])),p.push(cP(h,p[p.length-1])),uP(o,p)}function uP(t,i){var o=(Bm||wf.line)().x(function(l){return l.x}).y(function(l){return l.y});return(o.curve||o.interpolate)(t.curve),o(i)}function coe(t){var i=t.getBBox(),o=t.ownerSVGElement.getScreenCTM().inverse().multiply(t.getScreenCTM()).translate(i.width/2,i.height/2);return{x:o.e,y:o.f}}function uoe(t,i){var o=t.enter().append("g").attr("class","edgePath").style("opacity",0);return o.append("path").attr("class","path").attr("d",function(l){var h=i.edge(l),p=i.node(l.v).elem,m=Uf(h.points.length).map(function(){return coe(p)});return uP(h,m)}),o.append("defs"),o}function hoe(t,i){var o=t.exit();ec(o,i).style("opacity",0).remove()}var yC=function(t,i,o){var l=i.nodes().filter(function(m){return!oP(i,m)}),h=t.selectAll("g.node").data(l,function(m){return m}).classed("update",!0);h.exit().remove(),h.enter().append("g").attr("class","node").style("opacity",0),h=t.selectAll("g.node"),h.each(function(m){var b=i.node(m),x=dn(this);lP(x,b.class,(x.classed("update")?"update ":"")+"node"),x.select("g.label").remove();var E=x.append("g").attr("class","label"),L=pC(E,b),I=o[b.shape],F=dv(L.node().getBBox(),"width","height");b.elem=this,b.id&&x.attr("id",b.id),b.labelId&&E.attr("id",b.labelId),Oi(b,"width")&&(F.width=b.width),Oi(b,"height")&&(F.height=b.height),F.width+=b.paddingLeft+b.paddingRight,F.height+=b.paddingTop+b.paddingBottom,E.attr("transform","translate("+(b.paddingLeft-b.paddingRight)/2+","+(b.paddingTop-b.paddingBottom)/2+")");var W=dn(this);W.select(".label-container").remove();var K=I(W,F,b).classed("label-container",!0);qc(K,b.style);var re=K.node().getBBox();b.width=re.width,b.height=re.height});var p;return h.exit?p=h.exit():p=h.selectAll(null),ec(p,i).style("opacity",0).remove(),h};function doe(t){yC=t}function foe(t,i){var o=t.filter(function(){return!dn(this).classed("update")});function l(h){var p=i.node(h);return"translate("+p.x+","+p.y+")"}o.attr("transform",l),ec(t,i).style("opacity",1).attr("transform",l),ec(o.selectAll("rect"),i).attr("width",function(h){return i.node(h).width}).attr("height",function(h){return i.node(h).height}).attr("x",function(h){var p=i.node(h);return-p.width/2}).attr("y",function(h){var p=i.node(h);return-p.height/2})}function poe(t,i){var o=t.filter(function(){return!dn(this).classed("update")});function l(h){var p=i.edge(h);return Oi(p,"x")?"translate("+p.x+","+p.y+")":""}o.attr("transform",l),ec(t,i).style("opacity",1).attr("transform",l)}function moe(t,i){var o=t.filter(function(){return!dn(this).classed("update")});function l(h){var p=i.node(h);return"translate("+p.x+","+p.y+")"}o.attr("transform",l),ec(t,i).style("opacity",1).attr("transform",l)}function hP(t,i,o,l){var h=t.x,p=t.y,m=h-l.x,b=p-l.y,x=Math.sqrt(i*i*b*b+o*o*m*m),E=Math.abs(i*o*m/x);l.x<h&&(E=-E);var L=Math.abs(i*o*b/x);return l.y<p&&(L=-L),{x:h+E,y:p+L}}function goe(t,i,o){return hP(t,i,i,o)}function voe(t,i,o,l){var h,p,m,b,x,E,L,I,F,W,K,re,se,pe,he;if(h=i.y-t.y,m=t.x-i.x,x=i.x*t.y-t.x*i.y,F=h*o.x+m*o.y+x,W=h*l.x+m*l.y+x,!(F!==0&&W!==0&&dP(F,W))&&(p=l.y-o.y,b=o.x-l.x,E=l.x*o.y-o.x*l.y,L=p*t.x+b*t.y+E,I=p*i.x+b*i.y+E,!(L!==0&&I!==0&&dP(L,I))&&(K=h*b-p*m,K!==0)))return re=Math.abs(K/2),se=m*E-b*x,pe=se<0?(se-re)/K:(se+re)/K,se=p*x-h*E,he=se<0?(se-re)/K:(se+re)/K,{x:pe,y:he}}function dP(t,i){return t*i>0}function Xc(t,i,o){var l=t.x,h=t.y,p=[],m=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY;i.forEach(function(K){m=Math.min(m,K.x),b=Math.min(b,K.y)});for(var x=l-t.width/2-m,E=h-t.height/2-b,L=0;L<i.length;L++){var I=i[L],F=i[L<i.length-1?L+1:0],W=voe(t,o,{x:x+I.x,y:E+I.y},{x:x+F.x,y:E+F.y});W&&p.push(W)}return p.length?(p.length>1&&p.sort(function(K,re){var se=K.x-o.x,pe=K.y-o.y,he=Math.sqrt(se*se+pe*pe),Ce=re.x-o.x,Le=re.y-o.y,Ve=Math.sqrt(Ce*Ce+Le*Le);return he<Ve?-1:he===Ve?0:1}),p[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}function _C(t,i){var o=t.x,l=t.y,h=i.x-o,p=i.y-l,m=t.width/2,b=t.height/2,x,E;return Math.abs(p)*m>Math.abs(h)*b?(p<0&&(b=-b),x=p===0?0:b*h/p,E=b):(h<0&&(m=-m),x=m,E=h===0?0:m*p/h),{x:o+x,y:l+E}}var bC={rect:_oe,ellipse:boe,circle:xoe,diamond:woe};function yoe(t){bC=t}function _oe(t,i,o){var l=t.insert("rect",":first-child").attr("rx",o.rx).attr("ry",o.ry).attr("x",-i.width/2).attr("y",-i.height/2).attr("width",i.width).attr("height",i.height);return o.intersect=function(h){return _C(o,h)},l}function boe(t,i,o){var l=i.width/2,h=i.height/2,p=t.insert("ellipse",":first-child").attr("x",-i.width/2).attr("y",-i.height/2).attr("rx",l).attr("ry",h);return o.intersect=function(m){return hP(o,l,h,m)},p}function xoe(t,i,o){var l=Math.max(i.width,i.height)/2,h=t.insert("circle",":first-child").attr("x",-i.width/2).attr("y",-i.height/2).attr("r",l);return o.intersect=function(p){return goe(o,l,p)},h}function woe(t,i,o){var l=i.width*Math.SQRT2/2,h=i.height*Math.SQRT2/2,p=[{x:0,y:-h},{x:-l,y:0},{x:0,y:h},{x:l,y:0}],m=t.insert("polygon",":first-child").attr("points",p.map(function(b){return b.x+","+b.y}).join(" "));return o.intersect=function(b){return Xc(o,p,b)},m}function koe(){var t=function(i,o){Eoe(o);var l=kv(i,"output"),h=kv(l,"clusters"),p=kv(l,"edgePaths"),m=gC(kv(l,"edgeLabels"),o),b=yC(kv(l,"nodes"),o,bC);u0(o),moe(b,o),poe(m,o),vC(p,o,dC);var x=mC(h,o);foe(x,o),Toe(o)};return t.createNodes=function(i){return arguments.length?(doe(i),t):yC},t.createClusters=function(i){return arguments.length?(roe(i),t):mC},t.createEdgeLabels=function(i){return arguments.length?(soe(i),t):gC},t.createEdgePaths=function(i){return arguments.length?(ooe(i),t):vC},t.shapes=function(i){return arguments.length?(yoe(i),t):bC},t.arrows=function(i){return arguments.length?(Kse(i),t):dC},t}var Coe={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},Soe={arrowhead:"normal",curve:Ba};function Eoe(t){t.nodes().forEach(function(i){var o=t.node(i);!Oi(o,"label")&&!t.children(i).length&&(o.label=i),Oi(o,"paddingX")&&a0(o,{paddingLeft:o.paddingX,paddingRight:o.paddingX}),Oi(o,"paddingY")&&a0(o,{paddingTop:o.paddingY,paddingBottom:o.paddingY}),Oi(o,"padding")&&a0(o,{paddingLeft:o.padding,paddingRight:o.padding,paddingTop:o.padding,paddingBottom:o.padding}),a0(o,Coe),an(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(l){o[l]=Number(o[l])}),Oi(o,"width")&&(o._prevWidth=o.width),Oi(o,"height")&&(o._prevHeight=o.height)}),t.edges().forEach(function(i){var o=t.edge(i);Oi(o,"label")||(o.label=""),a0(o,Soe)})}function Toe(t){an(t.nodes(),function(i){var o=t.node(i);Oi(o,"_prevWidth")?o.width=o._prevWidth:delete o.width,Oi(o,"_prevHeight")?o.height=o._prevHeight:delete o.height,delete o._prevWidth,delete o._prevHeight})}function kv(t,i){var o=t.select("g."+i);return o.empty()&&(o=t.append("g").attr("class",i)),o}function fP(t,i,o){const l=i.width,h=i.height,p=(l+h)*.9,m=[{x:p/2,y:0},{x:p,y:-p/2},{x:p/2,y:-p},{x:0,y:-p/2}],b=qu(t,p,p,m);return o.intersect=function(x){return Xc(o,m,x)},b}function pP(t,i,o){const h=i.height,p=h/4,m=i.width+2*p,b=[{x:p,y:0},{x:m-p,y:0},{x:m,y:-h/2},{x:m-p,y:-h},{x:p,y:-h},{x:0,y:-h/2}],x=qu(t,m,h,b);return o.intersect=function(E){return Xc(o,b,E)},x}function mP(t,i,o){const l=i.width,h=i.height,p=[{x:-h/2,y:0},{x:l,y:0},{x:l,y:-h},{x:-h/2,y:-h},{x:0,y:-h/2}],m=qu(t,l,h,p);return o.intersect=function(b){return Xc(o,p,b)},m}function gP(t,i,o){const l=i.width,h=i.height,p=[{x:-2*h/6,y:0},{x:l-h/6,y:0},{x:l+2*h/6,y:-h},{x:h/6,y:-h}],m=qu(t,l,h,p);return o.intersect=function(b){return Xc(o,p,b)},m}function vP(t,i,o){const l=i.width,h=i.height,p=[{x:2*h/6,y:0},{x:l+h/6,y:0},{x:l-2*h/6,y:-h},{x:-h/6,y:-h}],m=qu(t,l,h,p);return o.intersect=function(b){return Xc(o,p,b)},m}function yP(t,i,o){const l=i.width,h=i.height,p=[{x:-2*h/6,y:0},{x:l+2*h/6,y:0},{x:l-h/6,y:-h},{x:h/6,y:-h}],m=qu(t,l,h,p);return o.intersect=function(b){return Xc(o,p,b)},m}function _P(t,i,o){const l=i.width,h=i.height,p=[{x:h/6,y:0},{x:l-h/6,y:0},{x:l+2*h/6,y:-h},{x:-2*h/6,y:-h}],m=qu(t,l,h,p);return o.intersect=function(b){return Xc(o,p,b)},m}function bP(t,i,o){const l=i.width,h=i.height,p=[{x:0,y:0},{x:l+h/2,y:0},{x:l,y:-h/2},{x:l+h/2,y:-h},{x:0,y:-h}],m=qu(t,l,h,p);return o.intersect=function(b){return Xc(o,p,b)},m}function xP(t,i,o){const l=i.height,h=i.width+l/4,p=t.insert("rect",":first-child").attr("rx",l/2).attr("ry",l/2).attr("x",-h/2).attr("y",-l/2).attr("width",h).attr("height",l);return o.intersect=function(m){return _C(o,m)},p}function wP(t,i,o){const l=i.width,h=i.height,p=[{x:0,y:0},{x:l,y:0},{x:l,y:-h},{x:0,y:-h},{x:0,y:0},{x:-8,y:0},{x:l+8,y:0},{x:l+8,y:-h},{x:-8,y:-h},{x:-8,y:0}],m=qu(t,l,h,p);return o.intersect=function(b){return Xc(o,p,b)},m}function kP(t,i,o){const l=i.width,h=l/2,p=h/(2.5+l/50),m=i.height+p,b="M 0,"+p+" a "+h+","+p+" 0,0,0 "+l+" 0 a "+h+","+p+" 0,0,0 "+-l+" 0 l 0,"+m+" a "+h+","+p+" 0,0,0 "+l+" 0 l 0,"+-m,x=t.attr("label-offset-y",p).insert("path",":first-child").attr("d",b).attr("transform","translate("+-l/2+","+-(m/2+p)+")");return o.intersect=function(E){const L=_C(o,E),I=L.x-o.x;if(h!=0&&(Math.abs(I)<o.width/2||Math.abs(I)==o.width/2&&Math.abs(L.y-o.y)>o.height/2-p)){let F=p*p*(1-I*I/(h*h));F!=0&&(F=Math.sqrt(F)),F=p-F,E.y-o.y>0&&(F=-F),L.y+=F}return L},x}function Moe(t){t.shapes().question=fP,t.shapes().hexagon=pP,t.shapes().stadium=xP,t.shapes().subroutine=wP,t.shapes().cylinder=kP,t.shapes().rect_left_inv_arrow=mP,t.shapes().lean_right=gP,t.shapes().lean_left=vP,t.shapes().trapezoid=yP,t.shapes().inv_trapezoid=_P,t.shapes().rect_right_inv_arrow=bP}function Aoe(t){t({question:fP}),t({hexagon:pP}),t({stadium:xP}),t({subroutine:wP}),t({cylinder:kP}),t({rect_left_inv_arrow:mP}),t({lean_right:gP}),t({lean_left:vP}),t({trapezoid:yP}),t({inv_trapezoid:_P}),t({rect_right_inv_arrow:bP})}function qu(t,i,o,l){return t.insert("polygon",":first-child").attr("points",l.map(function(h){return h.x+","+h.y}).join(" ")).attr("transform","translate("+-i/2+","+o/2+")")}const Loe={addToRender:Moe,addToRenderV2:Aoe},CP={},Roe=function(t){const i=Object.keys(t);for(const o of i)CP[o]=t[o]},SP=function(t,i,o,l,h,p){const m=l?l.select(`[id="${o}"]`):dn(`[id="${o}"]`),b=h||document;Object.keys(t).forEach(function(E){const L=t[E];let I="default";L.classes.length>0&&(I=L.classes.join(" "));const F=id(L.styles);let W=L.text!==void 0?L.text:L.id,K;if(lo(Qe().flowchart.htmlLabels)){const pe={label:W.replace(/fa[blrs]?:fa-[\w-]+/g,he=>`<i class='${he.replace(":"," ")}'></i>`)};K=fC(m,pe).node(),K.parentNode.removeChild(K)}else{const pe=b.createElementNS("http://www.w3.org/2000/svg","text");pe.setAttribute("style",F.labelStyle.replace("color:","fill:"));const he=W.split(Ai.lineBreakRegex);for(const Ce of he){const Le=b.createElementNS("http://www.w3.org/2000/svg","tspan");Le.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Le.setAttribute("dy","1em"),Le.setAttribute("x","1"),Le.textContent=Ce,pe.appendChild(Le)}K=pe}let re=0,se="";switch(L.type){case"round":re=5,se="rect";break;case"square":se="rect";break;case"diamond":se="question";break;case"hexagon":se="hexagon";break;case"odd":se="rect_left_inv_arrow";break;case"lean_right":se="lean_right";break;case"lean_left":se="lean_left";break;case"trapezoid":se="trapezoid";break;case"inv_trapezoid":se="inv_trapezoid";break;case"odd_right":se="rect_left_inv_arrow";break;case"circle":se="circle";break;case"ellipse":se="ellipse";break;case"stadium":se="stadium";break;case"subroutine":se="subroutine";break;case"cylinder":se="cylinder";break;case"group":se="rect";break;default:se="rect"}y.warn("Adding node",L.id,L.domId),i.setNode(p.db.lookUpDomId(L.id),{labelType:"svg",labelStyle:F.labelStyle,shape:se,label:K,rx:re,ry:re,class:I,style:F.style,id:p.db.lookUpDomId(L.id)})})},EP=function(t,i,o){let l=0,h,p;if(t.defaultStyle!==void 0){const m=id(t.defaultStyle);h=m.style,p=m.labelStyle}t.forEach(function(m){l++;var b="L-"+m.start+"-"+m.end,x="LS-"+m.start,E="LE-"+m.end;const L={};m.type==="arrow_open"?L.arrowhead="none":L.arrowhead="normal";let I="",F="";if(m.style!==void 0){const W=id(m.style);I=W.style,F=W.labelStyle}else switch(m.stroke){case"normal":I="fill:none",h!==void 0&&(I=h),p!==void 0&&(F=p);break;case"dotted":I="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":I=" stroke-width: 3.5px;fill:none";break}L.style=I,L.labelStyle=F,m.interpolate!==void 0?L.curve=Ul(m.interpolate,Ba):t.defaultInterpolate!==void 0?L.curve=Ul(t.defaultInterpolate,Ba):L.curve=Ul(CP.curve,Ba),m.text===void 0?m.style!==void 0&&(L.arrowheadStyle="fill: #333"):(L.arrowheadStyle="fill: #333",L.labelpos="c",lo(Qe().flowchart.htmlLabels)?(L.labelType="html",L.label=`<span id="L-${b}" class="edgeLabel L-${x}' L-${E}" style="${L.labelStyle}">${m.text.replace(/fa[blrs]?:fa-[\w-]+/g,W=>`<i class='${W.replace(":"," ")}'></i>`)}</span>`):(L.labelType="text",L.label=m.text.replace(Ai.lineBreakRegex,`
`),m.style===void 0&&(L.style=L.style||"stroke: #333; stroke-width: 1.5px;fill:none"),L.labelStyle=L.labelStyle.replace("color:","fill:"))),L.id=b,L.class=x+" "+E,L.minlen=m.length||1,i.setEdge(o.db.lookUpDomId(m.start),o.db.lookUpDomId(m.end),L,l)})},Poe={setConf:Roe,addVertices:SP,addEdges:EP,getClasses:function(t,i){y.info("Extracting classes"),i.db.clear();try{return i.parse(t),i.db.getClasses()}catch(o){return y.error(o),{}}},draw:function(t,i,o,l){y.info("Drawing flowchart"),l.db.clear();const{securityLevel:h,flowchart:p}=Qe();let m;h==="sandbox"&&(m=dn("#i"+i));const b=dn(h==="sandbox"?m.nodes()[0].contentDocument.body:"body"),x=h==="sandbox"?m.nodes()[0].contentDocument:document;try{l.parser.parse(t)}catch{y.debug("Parsing failed")}let E=l.db.getDirection();E===void 0&&(E="TD");const L=p.nodeSpacing||50,I=p.rankSpacing||50,F=new Ns({multigraph:!0,compound:!0}).setGraph({rankdir:E,nodesep:L,ranksep:I,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let W;const K=l.db.getSubGraphs();for(let je=K.length-1;je>=0;je--)W=K[je],l.db.addVertex(W.id,W.title,"group",void 0,W.classes);const re=l.db.getVertices();y.warn("Get vertices",re);const se=l.db.getEdges();let pe=0;for(pe=K.length-1;pe>=0;pe--){W=K[pe],Lo("cluster").append("text");for(let je=0;je<W.nodes.length;je++)y.warn("Setting subgraph",W.nodes[je],l.db.lookUpDomId(W.nodes[je]),l.db.lookUpDomId(W.id)),F.setParent(l.db.lookUpDomId(W.nodes[je]),l.db.lookUpDomId(W.id))}SP(re,F,i,b,x,l),EP(se,F,l);const he=new koe;Loe.addToRender(he),he.arrows().none=function(Pe,ze,xe,_e){const te=Pe.append("marker").attr("id",ze).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");qc(te,xe[_e+"Style"])},he.arrows().normal=function(Pe,ze){Pe.append("marker").attr("id",ze).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const Ce=b.select(`[id="${i}"]`),Le=b.select("#"+i+" g");for(he(Le,F),Le.selectAll("g.node").attr("title",function(){return l.db.getTooltip(this.id)}),l.db.indexNodes("subGraph"+pe),pe=0;pe<K.length;pe++)if(W=K[pe],W.title!=="undefined"){const je=x.querySelectorAll("#"+i+' [id="'+l.db.lookUpDomId(W.id)+'"] rect'),Pe=x.querySelectorAll("#"+i+' [id="'+l.db.lookUpDomId(W.id)+'"]'),ze=je[0].x.baseVal.value,xe=je[0].y.baseVal.value,_e=je[0].width.baseVal.value,te=dn(Pe[0]).select(".label");te.attr("transform",`translate(${ze+_e/2}, ${xe+14})`),te.attr("id",i+"Text");for(let be=0;be<W.classes.length;be++)Pe[0].classList.add(W.classes[be])}if(!p.htmlLabels){const je=x.querySelectorAll('[id="'+i+'"] .edgeLabel .label');for(const Pe of je){const ze=Pe.getBBox(),xe=x.createElementNS("http://www.w3.org/2000/svg","rect");xe.setAttribute("rx",0),xe.setAttribute("ry",0),xe.setAttribute("width",ze.width),xe.setAttribute("height",ze.height),Pe.insertBefore(xe,Pe.firstChild)}}m2(F,Ce,p.diagramPadding,p.useMaxWidth),Object.keys(re).forEach(function(je){const Pe=re[je];if(Pe.link){const ze=b.select("#"+i+' [id="'+l.db.lookUpDomId(je)+'"]');if(ze){const xe=x.createElementNS("http://www.w3.org/2000/svg","a");xe.setAttributeNS("http://www.w3.org/2000/svg","class",Pe.classes.join(" ")),xe.setAttributeNS("http://www.w3.org/2000/svg","href",Pe.link),xe.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),h==="sandbox"?xe.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):Pe.linkTarget&&xe.setAttributeNS("http://www.w3.org/2000/svg","target",Pe.linkTarget);const _e=ze.insert(function(){return xe},":first-child"),de=ze.select(".label-container");de&&_e.append(function(){return de.node()});const te=ze.select(".label");te&&_e.append(function(){return te.node()})}}})}},TP={},Ioe=function(t){const i=Object.keys(t);for(const o of i)TP[o]=t[o]},MP=function(t,i,o,l,h,p){const m=l.select(`[id="${o}"]`);Object.keys(t).forEach(function(x){const E=t[x];let L="default";E.classes.length>0&&(L=E.classes.join(" "));const I=id(E.styles);let F=E.text!==void 0?E.text:E.id,W;if(lo(Qe().flowchart.htmlLabels)){const se={label:F.replace(/fa[blrs]?:fa-[\w-]+/g,pe=>`<i class='${pe.replace(":"," ")}'></i>`)};W=fC(m,se).node(),W.parentNode.removeChild(W)}else{const se=h.createElementNS("http://www.w3.org/2000/svg","text");se.setAttribute("style",I.labelStyle.replace("color:","fill:"));const pe=F.split(Ai.lineBreakRegex);for(const he of pe){const Ce=h.createElementNS("http://www.w3.org/2000/svg","tspan");Ce.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Ce.setAttribute("dy","1em"),Ce.setAttribute("x","1"),Ce.textContent=he,se.appendChild(Ce)}W=se}let K=0,re="";switch(E.type){case"round":K=5,re="rect";break;case"square":re="rect";break;case"diamond":re="question";break;case"hexagon":re="hexagon";break;case"odd":re="rect_left_inv_arrow";break;case"lean_right":re="lean_right";break;case"lean_left":re="lean_left";break;case"trapezoid":re="trapezoid";break;case"inv_trapezoid":re="inv_trapezoid";break;case"odd_right":re="rect_left_inv_arrow";break;case"circle":re="circle";break;case"ellipse":re="ellipse";break;case"stadium":re="stadium";break;case"subroutine":re="subroutine";break;case"cylinder":re="cylinder";break;case"group":re="rect";break;case"doublecircle":re="doublecircle";break;default:re="rect"}i.setNode(E.id,{labelStyle:I.labelStyle,shape:re,labelText:F,rx:K,ry:K,class:L,style:I.style,id:E.id,link:E.link,linkTarget:E.linkTarget,tooltip:p.db.getTooltip(E.id)||"",domId:p.db.lookUpDomId(E.id),haveCallback:E.haveCallback,width:E.type==="group"?500:void 0,dir:E.dir,type:E.type,props:E.props,padding:Qe().flowchart.padding}),y.info("setNode",{labelStyle:I.labelStyle,shape:re,labelText:F,rx:K,ry:K,class:L,style:I.style,id:E.id,domId:p.db.lookUpDomId(E.id),width:E.type==="group"?500:void 0,type:E.type,dir:E.dir,props:E.props,padding:Qe().flowchart.padding})})},AP=function(t,i,o){y.info("abc78 edges = ",t);let l=0,h={},p,m;if(t.defaultStyle!==void 0){const b=id(t.defaultStyle);p=b.style,m=b.labelStyle}t.forEach(function(b){l++;var x="L-"+b.start+"-"+b.end;h[x]===void 0?(h[x]=0,y.info("abc78 new entry",x,h[x])):(h[x]++,y.info("abc78 new entry",x,h[x]));let E=x+"-"+h[x];y.info("abc78 new link id to be used is",x,E,h[x]);var L="LS-"+b.start,I="LE-"+b.end;const F={style:"",labelStyle:""};switch(F.minlen=b.length||1,b.type==="arrow_open"?F.arrowhead="none":F.arrowhead="normal",F.arrowTypeStart="arrow_open",F.arrowTypeEnd="arrow_open",b.type){case"double_arrow_cross":F.arrowTypeStart="arrow_cross";case"arrow_cross":F.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":F.arrowTypeStart="arrow_point";case"arrow_point":F.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":F.arrowTypeStart="arrow_circle";case"arrow_circle":F.arrowTypeEnd="arrow_circle";break}let W="",K="";switch(b.stroke){case"normal":W="fill:none;",p!==void 0&&(W=p),m!==void 0&&(K=m),F.thickness="normal",F.pattern="solid";break;case"dotted":F.thickness="normal",F.pattern="dotted",F.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":F.thickness="thick",F.pattern="solid",F.style="stroke-width: 3.5px;fill:none;";break}if(b.style!==void 0){const re=id(b.style);W=re.style,K=re.labelStyle}F.style=F.style+=W,F.labelStyle=F.labelStyle+=K,b.interpolate!==void 0?F.curve=Ul(b.interpolate,Ba):t.defaultInterpolate!==void 0?F.curve=Ul(t.defaultInterpolate,Ba):F.curve=Ul(TP.curve,Ba),b.text===void 0?b.style!==void 0&&(F.arrowheadStyle="fill: #333"):(F.arrowheadStyle="fill: #333",F.labelpos="c"),F.labelType="text",F.label=b.text.replace(Ai.lineBreakRegex,`
`),b.style===void 0&&(F.style=F.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),F.labelStyle=F.labelStyle.replace("color:","fill:"),F.id=E,F.classes="flowchart-link "+L+" "+I,i.setEdge(b.start,b.end,F,l)})},xC={setConf:Ioe,addVertices:MP,addEdges:AP,getClasses:function(t,i){y.info("Extracting classes"),i.db.clear();try{return i.parse(t),i.db.getClasses()}catch{return}},draw:function(t,i,o,l){y.info("Drawing flowchart"),l.db.clear(),$u.setGen("gen-2"),l.parser.parse(t);let h=l.db.getDirection();h===void 0&&(h="TD");const{securityLevel:p,flowchart:m}=Qe(),b=m.nodeSpacing||50,x=m.rankSpacing||50;let E;p==="sandbox"&&(E=dn("#i"+i));const L=dn(p==="sandbox"?E.nodes()[0].contentDocument.body:"body"),I=p==="sandbox"?E.nodes()[0].contentDocument:document,F=new Ns({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:b,ranksep:x,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let W;const K=l.db.getSubGraphs();y.info("Subgraphs - ",K);for(let Ve=K.length-1;Ve>=0;Ve--)W=K[Ve],y.info("Subgraph - ",W),l.db.addVertex(W.id,W.title,"group",void 0,W.classes,W.dir);const re=l.db.getVertices(),se=l.db.getEdges();y.info(se);let pe=0;for(pe=K.length-1;pe>=0;pe--){W=K[pe],Lo("cluster").append("text");for(let Ve=0;Ve<W.nodes.length;Ve++)y.info("Setting up subgraphs",W.nodes[Ve],W.id),F.setParent(W.nodes[Ve],W.id)}MP(re,F,i,L,I,l),AP(se,F);const he=L.select(`[id="${i}"]`),Ce=L.select("#"+i+" g");if(iC(Ce,F,["point","circle","cross"],"flowchart",i),Ii.insertTitle(he,"flowchartTitleText",m.titleTopMargin,l.db.getDiagramTitle()),m2(F,he,m.diagramPadding,m.useMaxWidth),l.db.indexNodes("subGraph"+pe),!m.htmlLabels){const Ve=I.querySelectorAll('[id="'+i+'"] .edgeLabel .label');for(const je of Ve){const Pe=je.getBBox(),ze=I.createElementNS("http://www.w3.org/2000/svg","rect");ze.setAttribute("rx",0),ze.setAttribute("ry",0),ze.setAttribute("width",Pe.width),ze.setAttribute("height",Pe.height),je.insertBefore(ze,je.firstChild)}}Object.keys(re).forEach(function(Ve){const je=re[Ve];if(je.link){const Pe=dn("#"+i+' [id="'+Ve+'"]');if(Pe){const ze=I.createElementNS("http://www.w3.org/2000/svg","a");ze.setAttributeNS("http://www.w3.org/2000/svg","class",je.classes.join(" ")),ze.setAttributeNS("http://www.w3.org/2000/svg","href",je.link),ze.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),p==="sandbox"?ze.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):je.linkTarget&&ze.setAttributeNS("http://www.w3.org/2000/svg","target",je.linkTarget);const xe=Pe.insert(function(){return ze},":first-child"),_e=Pe.select(".label-container");_e&&xe.append(function(){return _e.node()});const de=Pe.select(".label");de&&xe.append(function(){return de.node()})}}})}};var wC=function(){var t=function(ze,xe,_e,de){for(_e=_e||{},de=ze.length;de--;_e[ze[de]]=xe);return _e},i=[1,3],o=[1,5],l=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],h=[1,15],p=[1,16],m=[1,17],b=[1,18],x=[1,19],E=[1,20],L=[1,21],I=[1,22],F=[1,23],W=[1,24],K=[1,25],re=[1,26],se=[1,27],pe=[1,29],he=[1,31],Ce=[1,34],Le=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],Ve={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(xe,_e,de,te,be,q,ot){var Z=q.length-1;switch(be){case 2:return q[Z-1];case 3:this.$=[];break;case 4:q[Z-1].push(q[Z]),this.$=q[Z-1];break;case 5:case 6:this.$=q[Z];break;case 7:case 8:this.$=[];break;case 9:te.setDateFormat(q[Z].substr(11)),this.$=q[Z].substr(11);break;case 10:te.enableInclusiveEndDates(),this.$=q[Z].substr(18);break;case 11:te.TopAxis(),this.$=q[Z].substr(8);break;case 12:te.setAxisFormat(q[Z].substr(11)),this.$=q[Z].substr(11);break;case 13:te.setTickInterval(q[Z].substr(13)),this.$=q[Z].substr(13);break;case 14:te.setExcludes(q[Z].substr(9)),this.$=q[Z].substr(9);break;case 15:te.setIncludes(q[Z].substr(9)),this.$=q[Z].substr(9);break;case 16:te.setTodayMarker(q[Z].substr(12)),this.$=q[Z].substr(12);break;case 17:te.setDiagramTitle(q[Z].substr(6)),this.$=q[Z].substr(6);break;case 18:this.$=q[Z].trim(),te.setAccTitle(this.$);break;case 19:case 20:this.$=q[Z].trim(),te.setAccDescription(this.$);break;case 21:te.addSection(q[Z].substr(8)),this.$=q[Z].substr(8);break;case 23:te.addTask(q[Z-1],q[Z]),this.$="task";break;case 27:this.$=q[Z-1],te.setClickEvent(q[Z-1],q[Z],null);break;case 28:this.$=q[Z-2],te.setClickEvent(q[Z-2],q[Z-1],q[Z]);break;case 29:this.$=q[Z-2],te.setClickEvent(q[Z-2],q[Z-1],null),te.setLink(q[Z-2],q[Z]);break;case 30:this.$=q[Z-3],te.setClickEvent(q[Z-3],q[Z-2],q[Z-1]),te.setLink(q[Z-3],q[Z]);break;case 31:this.$=q[Z-2],te.setClickEvent(q[Z-2],q[Z],null),te.setLink(q[Z-2],q[Z-1]);break;case 32:this.$=q[Z-3],te.setClickEvent(q[Z-3],q[Z-1],q[Z]),te.setLink(q[Z-3],q[Z-2]);break;case 33:this.$=q[Z-1],te.setLink(q[Z-1],q[Z]);break;case 34:case 40:this.$=q[Z-1]+" "+q[Z];break;case 35:case 36:case 38:this.$=q[Z-2]+" "+q[Z-1]+" "+q[Z];break;case 37:case 39:this.$=q[Z-3]+" "+q[Z-2]+" "+q[Z-1]+" "+q[Z];break;case 41:te.parseDirective("%%{","open_directive");break;case 42:te.parseDirective(q[Z],"type_directive");break;case 43:q[Z]=q[Z].trim().replace(/'/g,'"'),te.parseDirective(q[Z],"arg_directive");break;case 44:te.parseDirective("}%%","close_directive","gantt");break}},table:[{3:1,4:2,5:i,30:4,40:o},{1:[3]},{3:6,4:2,5:i,30:4,40:o},t(l,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:h,13:p,14:m,15:b,16:x,17:E,18:L,19:I,20:F,21:W,23:K,25:re,26:se,27:28,28:pe,30:4,35:he,40:o},{32:32,33:[1,33],43:Ce},t([33,43],[2,42]),t(l,[2,8],{1:[2,2]}),t(l,[2,4]),{4:30,10:35,12:h,13:p,14:m,15:b,16:x,17:E,18:L,19:I,20:F,21:W,23:K,25:re,26:se,27:28,28:pe,30:4,35:he,40:o},t(l,[2,6]),t(l,[2,7]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),t(l,[2,13]),t(l,[2,14]),t(l,[2,15]),t(l,[2,16]),t(l,[2,17]),{22:[1,36]},{24:[1,37]},t(l,[2,20]),t(l,[2,21]),t(l,[2,22]),{29:[1,38]},t(l,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},t(l,[2,5]),t(l,[2,18]),t(l,[2,19]),t(l,[2,23]),t(l,[2,27],{37:[1,44],38:[1,45]}),t(l,[2,33],{36:[1,46]}),t(Le,[2,25]),{32:47,43:Ce},{43:[2,43]},t(l,[2,28],{38:[1,48]}),t(l,[2,29]),t(l,[2,31],{37:[1,49]}),{11:[1,50]},t(l,[2,30]),t(l,[2,32]),t(Le,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(xe,_e){if(_e.recoverable)this.trace(xe);else{var de=new Error(xe);throw de.hash=_e,de}},parse:function(xe){var _e=this,de=[0],te=[],be=[null],q=[],ot=this.table,Z="",Dt=0,xn=0,ln=2,Je=1,kt=q.slice.call(arguments,1),mt=Object.create(this.lexer),vt={yy:{}};for(var Pt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Pt)&&(vt.yy[Pt]=this.yy[Pt]);mt.setInput(xe,vt.yy),vt.yy.lexer=mt,vt.yy.parser=this,typeof mt.yylloc>"u"&&(mt.yylloc={});var rn=mt.yylloc;q.push(rn);var nt=mt.options&&mt.options.ranges;typeof vt.yy.parseError=="function"?this.parseError=vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ln(){var Wn;return Wn=te.pop()||mt.lex()||Je,typeof Wn!="number"&&(Wn instanceof Array&&(te=Wn,Wn=te.pop()),Wn=_e.symbols_[Wn]||Wn),Wn}for(var Ie,Be,et,Me,ke={},ge,ct,le,Ft;;){if(Be=de[de.length-1],this.defaultActions[Be]?et=this.defaultActions[Be]:((Ie===null||typeof Ie>"u")&&(Ie=Ln()),et=ot[Be]&&ot[Be][Ie]),typeof et>"u"||!et.length||!et[0]){var Oe="";Ft=[];for(ge in ot[Be])this.terminals_[ge]&&ge>ln&&Ft.push("'"+this.terminals_[ge]+"'");mt.showPosition?Oe="Parse error on line "+(Dt+1)+`:
`+mt.showPosition()+`
Expecting `+Ft.join(", ")+", got '"+(this.terminals_[Ie]||Ie)+"'":Oe="Parse error on line "+(Dt+1)+": Unexpected "+(Ie==Je?"end of input":"'"+(this.terminals_[Ie]||Ie)+"'"),this.parseError(Oe,{text:mt.match,token:this.terminals_[Ie]||Ie,line:mt.yylineno,loc:rn,expected:Ft})}if(et[0]instanceof Array&&et.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Be+", token: "+Ie);switch(et[0]){case 1:de.push(Ie),be.push(mt.yytext),q.push(mt.yylloc),de.push(et[1]),Ie=null,xn=mt.yyleng,Z=mt.yytext,Dt=mt.yylineno,rn=mt.yylloc;break;case 2:if(ct=this.productions_[et[1]][1],ke.$=be[be.length-ct],ke._$={first_line:q[q.length-(ct||1)].first_line,last_line:q[q.length-1].last_line,first_column:q[q.length-(ct||1)].first_column,last_column:q[q.length-1].last_column},nt&&(ke._$.range=[q[q.length-(ct||1)].range[0],q[q.length-1].range[1]]),Me=this.performAction.apply(ke,[Z,xn,Dt,vt.yy,et[1],be,q].concat(kt)),typeof Me<"u")return Me;ct&&(de=de.slice(0,-1*ct*2),be=be.slice(0,-1*ct),q=q.slice(0,-1*ct)),de.push(this.productions_[et[1]][0]),be.push(ke.$),q.push(ke._$),le=ot[de[de.length-2]][de[de.length-1]],de.push(le);break;case 3:return!0}}return!0}},je=function(){var ze={EOF:1,parseError:function(_e,de){if(this.yy.parser)this.yy.parser.parseError(_e,de);else throw new Error(_e)},setInput:function(xe,_e){return this.yy=_e||this.yy||{},this._input=xe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var xe=this._input[0];this.yytext+=xe,this.yyleng++,this.offset++,this.match+=xe,this.matched+=xe;var _e=xe.match(/(?:\r\n?|\n).*/g);return _e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),xe},unput:function(xe){var _e=xe.length,de=xe.split(/(?:\r\n?|\n)/g);this._input=xe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-_e),this.offset-=_e;var te=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),de.length-1&&(this.yylineno-=de.length-1);var be=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:de?(de.length===te.length?this.yylloc.first_column:0)+te[te.length-de.length].length-de[0].length:this.yylloc.first_column-_e},this.options.ranges&&(this.yylloc.range=[be[0],be[0]+this.yyleng-_e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(xe){this.unput(this.match.slice(xe))},pastInput:function(){var xe=this.matched.substr(0,this.matched.length-this.match.length);return(xe.length>20?"...":"")+xe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var xe=this.match;return xe.length<20&&(xe+=this._input.substr(0,20-xe.length)),(xe.substr(0,20)+(xe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var xe=this.pastInput(),_e=new Array(xe.length+1).join("-");return xe+this.upcomingInput()+`
`+_e+"^"},test_match:function(xe,_e){var de,te,be;if(this.options.backtrack_lexer&&(be={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(be.yylloc.range=this.yylloc.range.slice(0))),te=xe[0].match(/(?:\r\n?|\n).*/g),te&&(this.yylineno+=te.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:te?te[te.length-1].length-te[te.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+xe[0].length},this.yytext+=xe[0],this.match+=xe[0],this.matches=xe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(xe[0].length),this.matched+=xe[0],de=this.performAction.call(this,this.yy,this,_e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),de)return de;if(this._backtrack){for(var q in be)this[q]=be[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var xe,_e,de,te;this._more||(this.yytext="",this.match="");for(var be=this._currentRules(),q=0;q<be.length;q++)if(de=this._input.match(this.rules[be[q]]),de&&(!_e||de[0].length>_e[0].length)){if(_e=de,te=q,this.options.backtrack_lexer){if(xe=this.test_match(de,be[q]),xe!==!1)return xe;if(this._backtrack){_e=!1;continue}else return!1}else if(!this.options.flex)break}return _e?(xe=this.test_match(_e,be[te]),xe!==!1?xe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var _e=this.next();return _e||this.lex()},begin:function(_e){this.conditionStack.push(_e)},popState:function(){var _e=this.conditionStack.length-1;return _e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(_e){return _e=this.conditionStack.length-1-Math.abs(_e||0),_e>=0?this.conditionStack[_e]:"INITIAL"},pushState:function(_e){this.begin(_e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(_e,de,te,be){switch(te){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:break;case 13:break;case 14:break;case 15:return 11;case 16:break;case 17:break;case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 38;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 26:this.popState();break;case 27:return 37;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return ze}();Ve.lexer=je;function Pe(){this.yy={}}return Pe.prototype=Ve,Ve.Parser=Pe,new Pe}();wC.parser=wC;const Doe=wC,Noe=t=>t.match(/^\s*gantt/)!==null;let Zc="",kC="",CC,SC="",Cv=[],Sv=[],EC={},TC=[],hx=[],f0="";const LP=["active","done","crit","milestone"];let MC=[],Ev=!1,AC=!1,LC=0;const Ooe=function(t,i,o){ss.parseDirective(this,t,i,o)},Foe=function(){TC=[],hx=[],f0="",MC=[],dx=0,PC=void 0,fx=void 0,qs=[],Zc="",kC="",CC=void 0,SC="",Cv=[],Sv=[],Ev=!1,AC=!1,LC=0,EC={},Yl()},Boe=function(t){kC=t},Voe=function(){return kC},Woe=function(t){CC=t},zoe=function(){return CC},Uoe=function(t){SC=t},Goe=function(){return SC},Hoe=function(t){Zc=t},Yoe=function(){Ev=!0},joe=function(){return Ev},$oe=function(){AC=!0},qoe=function(){return AC},Xoe=function(){return Zc},Zoe=function(t){Cv=t.toLowerCase().split(/[\s,]+/)},Koe=function(){return Cv},Joe=function(t){Sv=t.toLowerCase().split(/[\s,]+/)},Qoe=function(){return Sv},eae=function(){return EC},tae=function(t){f0=t,TC.push(t)},nae=function(){return TC},iae=function(){let t=OP();const i=10;let o=0;for(;!t&&o<i;)t=OP(),o++;return hx=qs,hx},RP=function(t,i,o,l){return l.includes(t.format(i.trim()))?!1:t.isoWeekday()>=6&&o.includes("weekends")||o.includes(t.format("dddd").toLowerCase())?!0:o.includes(t.format(i.trim()))},PP=function(t,i,o,l){if(!o.length||t.manualEndTime)return;let h=g(t.startTime,i,!0);h.add(1,"d");let p=g(t.endTime,i,!0),m=rae(h,p,i,o,l);t.endTime=p.toDate(),t.renderEndTime=m},rae=function(t,i,o,l,h){let p=!1,m=null;for(;t<=i;)p||(m=i.toDate()),p=RP(t,o,l,h),p&&i.add(1,"d"),t.add(1,"d");return m},RC=function(t,i,o){o=o.trim();const h=/^after\s+([\d\w- ]+)/.exec(o.trim());if(h!==null){let m=null;if(h[1].split(" ").forEach(function(b){let x=m0(b);x!==void 0&&(m?x.endTime>m.endTime&&(m=x):m=x)}),m)return m.endTime;{const b=new Date;return b.setHours(0,0,0,0),b}}let p=g(o,i.trim(),!0);if(p.isValid())return p.toDate();{y.debug("Invalid date:"+o),y.debug("With date format:"+i.trim());const m=new Date(o);if(m===void 0||isNaN(m.getTime()))throw new Error("Invalid date:"+o);return m}},IP=function(t){const i=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return i!==null?g.duration(Number.parseFloat(i[1]),i[2]):g.duration.invalid()},DP=function(t,i,o,l=!1){o=o.trim();let h=g(o,i.trim(),!0);if(h.isValid())return l&&h.add(1,"d"),h.toDate();const p=g(t),m=IP(o);return m.isValid()&&p.add(m),p.toDate()};let dx=0;const p0=function(t){return t===void 0?(dx=dx+1,"task"+dx):t},sae=function(t,i){let o;i.substr(0,1)===":"?o=i.substr(1,i.length):o=i;const l=o.split(","),h={};VP(l,h,LP);for(let m=0;m<l.length;m++)l[m]=l[m].trim();let p="";switch(l.length){case 1:h.id=p0(),h.startTime=t.endTime,p=l[0];break;case 2:h.id=p0(),h.startTime=RC(void 0,Zc,l[0]),p=l[1];break;case 3:h.id=p0(l[0]),h.startTime=RC(void 0,Zc,l[1]),p=l[2];break}return p&&(h.endTime=DP(h.startTime,Zc,p,Ev),h.manualEndTime=g(p,"YYYY-MM-DD",!0).isValid(),PP(h,Zc,Sv,Cv)),h},oae=function(t,i){let o;i.substr(0,1)===":"?o=i.substr(1,i.length):o=i;const l=o.split(","),h={};VP(l,h,LP);for(let p=0;p<l.length;p++)l[p]=l[p].trim();switch(l.length){case 1:h.id=p0(),h.startTime={type:"prevTaskEnd",id:t},h.endTime={data:l[0]};break;case 2:h.id=p0(),h.startTime={type:"getStartDate",startData:l[0]},h.endTime={data:l[1]};break;case 3:h.id=p0(l[0]),h.startTime={type:"getStartDate",startData:l[1]},h.endTime={data:l[2]};break}return h};let PC,fx,qs=[];const NP={},aae=function(t,i){const o={section:f0,type:f0,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:i},task:t,classes:[]},l=oae(fx,i);o.raw.startTime=l.startTime,o.raw.endTime=l.endTime,o.id=l.id,o.prevTaskId=fx,o.active=l.active,o.done=l.done,o.crit=l.crit,o.milestone=l.milestone,o.order=LC,LC++;const h=qs.push(o);fx=o.id,NP[o.id]=h-1},m0=function(t){const i=NP[t];return qs[i]},lae=function(t,i){const o={section:f0,type:f0,description:t,task:t,classes:[]},l=sae(PC,i);o.startTime=l.startTime,o.endTime=l.endTime,o.id=l.id,o.active=l.active,o.done=l.done,o.crit=l.crit,o.milestone=l.milestone,PC=o,hx.push(o)},OP=function(){const t=function(o){const l=qs[o];let h="";switch(qs[o].raw.startTime.type){case"prevTaskEnd":{const p=m0(l.prevTaskId);l.startTime=p.endTime;break}case"getStartDate":h=RC(void 0,Zc,qs[o].raw.startTime.startData),h&&(qs[o].startTime=h);break}return qs[o].startTime&&(qs[o].endTime=DP(qs[o].startTime,Zc,qs[o].raw.endTime.data,Ev),qs[o].endTime&&(qs[o].processed=!0,qs[o].manualEndTime=g(qs[o].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),PP(qs[o],Zc,Sv,Cv))),qs[o].processed};let i=!0;for(const[o,l]of qs.entries())t(o),i=i&&l.processed;return i},cae=function(t,i){let o=i;Qe().securityLevel!=="loose"&&(o=A(i)),t.split(",").forEach(function(l){m0(l)!==void 0&&(BP(l,()=>{window.open(o,"_self")}),EC[l]=o)}),FP(t,"clickable")},FP=function(t,i){t.split(",").forEach(function(o){let l=m0(o);l!==void 0&&l.classes.push(i)})},uae=function(t,i,o){if(Qe().securityLevel!=="loose"||i===void 0)return;let l=[];if(typeof o=="string"){l=o.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let p=0;p<l.length;p++){let m=l[p].trim();m.charAt(0)==='"'&&m.charAt(m.length-1)==='"'&&(m=m.substr(1,m.length-2)),l[p]=m}}l.length===0&&l.push(t),m0(t)!==void 0&&BP(t,()=>{Ii.runFunc(i,...l)})},BP=function(t,i){MC.push(function(){const o=document.querySelector(`[id="${t}"]`);o!==null&&o.addEventListener("click",function(){i()})},function(){const o=document.querySelector(`[id="${t}-text"]`);o!==null&&o.addEventListener("click",function(){i()})})},IC={parseDirective:Ooe,getConfig:()=>Qe().gantt,clear:Foe,setDateFormat:Hoe,getDateFormat:Xoe,enableInclusiveEndDates:Yoe,endDatesAreInclusive:joe,enableTopAxis:$oe,topAxisEnabled:qoe,setAxisFormat:Boe,getAxisFormat:Voe,setTickInterval:Woe,getTickInterval:zoe,setTodayMarker:Uoe,getTodayMarker:Goe,setAccTitle:pl,getAccTitle:jl,setDiagramTitle:Fu,getDiagramTitle:Bu,setAccDescription:$l,getAccDescription:ql,addSection:tae,getSections:nae,getTasks:iae,addTask:aae,findTaskById:m0,addTaskOrg:lae,setIncludes:Zoe,getIncludes:Koe,setExcludes:Joe,getExcludes:Qoe,setClickEvent:function(t,i,o){t.split(",").forEach(function(l){uae(l,i,o)}),FP(t,"clickable")},setLink:cae,getLinks:eae,bindFunctions:function(t){MC.forEach(function(i){i(t)})},parseDuration:IP,isInvalidDate:RP};function VP(t,i,o){let l=!0;for(;l;)l=!1,o.forEach(function(h){const p="^\\s*"+h+"\\s*$",m=new RegExp(p);t[0].match(m)&&(i[h]=!0,t.shift(1),l=!0)})}const hae=function(){y.debug("Something is calling, setConf, remove the call")};let Xu;const dae={setConf:hae,draw:function(t,i,o,l){const h=Qe().gantt,p=Qe().securityLevel;let m;p==="sandbox"&&(m=dn("#i"+i));const b=dn(p==="sandbox"?m.nodes()[0].contentDocument.body:"body"),x=p==="sandbox"?m.nodes()[0].contentDocument:document,E=x.getElementById(i);Xu=E.parentElement.offsetWidth,Xu===void 0&&(Xu=1200),h.useWidth!==void 0&&(Xu=h.useWidth);const L=l.db.getTasks(),I=L.length*(h.barHeight+h.barGap)+2*h.topPadding;E.setAttribute("viewBox","0 0 "+Xu+" "+I);const F=b.select(`[id="${i}"]`),W=KG().domain([pt(L,function(_e){return _e.startTime}),Fe(L,function(_e){return _e.endTime})]).rangeRound([0,Xu-h.leftPadding-h.rightPadding]);let K=[];for(const _e of L)K.push(_e.type);const re=K;K=Pe(K);function se(_e,de){const te=_e.startTime,be=de.startTime;let q=0;return te>be?q=1:te<be&&(q=-1),q}L.sort(se),pe(L,Xu,I),Hl(F,I,Xu,h.useMaxWidth),F.append("text").text(l.db.getDiagramTitle()).attr("x",Xu/2).attr("y",h.titleTopMargin).attr("class","titleText");function pe(_e,de,te){const be=h.barHeight,q=be+h.barGap,ot=h.topPadding,Z=h.leftPadding,Dt=z().domain([0,K.length]).range(["#00B9FA","#F95002"]).interpolate($_);Ce(q,ot,Z,de,te,_e,l.db.getExcludes(),l.db.getIncludes()),Le(Z,ot,de,te),he(_e,q,ot,Z,be,Dt,de),Ve(q,ot),je(Z,ot,de,te)}function he(_e,de,te,be,q,ot,Z){F.append("g").selectAll("rect").data(_e).enter().append("rect").attr("x",0).attr("y",function(Je,kt){return kt=Je.order,kt*de+te-2}).attr("width",function(){return Z-h.rightPadding/2}).attr("height",de).attr("class",function(Je){for(const[kt,mt]of K.entries())if(Je.type===mt)return"section section"+kt%h.numberSectionStyles;return"section section0"});const Dt=F.append("g").selectAll("rect").data(_e).enter(),xn=l.db.getLinks();if(Dt.append("rect").attr("id",function(Je){return Je.id}).attr("rx",3).attr("ry",3).attr("x",function(Je){return Je.milestone?W(Je.startTime)+be+.5*(W(Je.endTime)-W(Je.startTime))-.5*q:W(Je.startTime)+be}).attr("y",function(Je,kt){return kt=Je.order,kt*de+te}).attr("width",function(Je){return Je.milestone?q:W(Je.renderEndTime||Je.endTime)-W(Je.startTime)}).attr("height",q).attr("transform-origin",function(Je,kt){return kt=Je.order,(W(Je.startTime)+be+.5*(W(Je.endTime)-W(Je.startTime))).toString()+"px "+(kt*de+te+.5*q).toString()+"px"}).attr("class",function(Je){const kt="task";let mt="";Je.classes.length>0&&(mt=Je.classes.join(" "));let vt=0;for(const[rn,nt]of K.entries())Je.type===nt&&(vt=rn%h.numberSectionStyles);let Pt="";return Je.active?Je.crit?Pt+=" activeCrit":Pt=" active":Je.done?Je.crit?Pt=" doneCrit":Pt=" done":Je.crit&&(Pt+=" crit"),Pt.length===0&&(Pt=" task"),Je.milestone&&(Pt=" milestone "+Pt),Pt+=vt,Pt+=" "+mt,kt+Pt}),Dt.append("text").attr("id",function(Je){return Je.id+"-text"}).text(function(Je){return Je.task}).attr("font-size",h.fontSize).attr("x",function(Je){let kt=W(Je.startTime),mt=W(Je.renderEndTime||Je.endTime);Je.milestone&&(kt+=.5*(W(Je.endTime)-W(Je.startTime))-.5*q),Je.milestone&&(mt=kt+q);const vt=this.getBBox().width;return vt>mt-kt?mt+vt+1.5*h.leftPadding>Z?kt+be-5:mt+be+5:(mt-kt)/2+kt+be}).attr("y",function(Je,kt){return kt=Je.order,kt*de+h.barHeight/2+(h.fontSize/2-2)+te}).attr("text-height",q).attr("class",function(Je){const kt=W(Je.startTime);let mt=W(Je.endTime);Je.milestone&&(mt=kt+q);const vt=this.getBBox().width;let Pt="";Je.classes.length>0&&(Pt=Je.classes.join(" "));let rn=0;for(const[Ln,Ie]of K.entries())Je.type===Ie&&(rn=Ln%h.numberSectionStyles);let nt="";return Je.active&&(Je.crit?nt="activeCritText"+rn:nt="activeText"+rn),Je.done?Je.crit?nt=nt+" doneCritText"+rn:nt=nt+" doneText"+rn:Je.crit&&(nt=nt+" critText"+rn),Je.milestone&&(nt+=" milestoneText"),vt>mt-kt?mt+vt+1.5*h.leftPadding>Z?Pt+" taskTextOutsideLeft taskTextOutside"+rn+" "+nt:Pt+" taskTextOutsideRight taskTextOutside"+rn+" "+nt+" width-"+vt:Pt+" taskText taskText"+rn+" "+nt+" width-"+vt}),Qe().securityLevel==="sandbox"){let Je;Je=dn("#i"+i);const kt=Je.nodes()[0].contentDocument;Dt.filter(function(mt){return xn[mt.id]!==void 0}).each(function(mt){var vt=kt.querySelector("#"+mt.id),Pt=kt.querySelector("#"+mt.id+"-text");const rn=vt.parentNode;var nt=kt.createElement("a");nt.setAttribute("xlink:href",xn[mt.id]),nt.setAttribute("target","_top"),rn.appendChild(nt),nt.appendChild(vt),nt.appendChild(Pt)})}}function Ce(_e,de,te,be,q,ot,Z,Dt){const xn=ot.reduce((rn,{startTime:nt})=>rn?Math.min(rn,nt):nt,0),ln=ot.reduce((rn,{endTime:nt})=>rn?Math.max(rn,nt):nt,0),Je=l.db.getDateFormat();if(!xn||!ln)return;const kt=[];let mt=null,vt=g(xn);for(;vt.valueOf()<=ln;)l.db.isInvalidDate(vt,Je,Z,Dt)?mt?mt.end=vt.clone():mt={start:vt.clone(),end:vt.clone()}:mt&&(kt.push(mt),mt=null),vt.add(1,"d");F.append("g").selectAll("rect").data(kt).enter().append("rect").attr("id",function(rn){return"exclude-"+rn.start.format("YYYY-MM-DD")}).attr("x",function(rn){return W(rn.start)+te}).attr("y",h.gridLineStartPadding).attr("width",function(rn){const nt=rn.end.clone().add(1,"day");return W(nt)-W(rn.start)}).attr("height",q-de-h.gridLineStartPadding).attr("transform-origin",function(rn,nt){return(W(rn.start)+te+.5*(W(rn.end)-W(rn.start))).toString()+"px "+(nt*_e+.5*q).toString()+"px"}).attr("class","exclude-range")}function Le(_e,de,te,be){let q=Wt(W).tickSize(-be+de+h.gridLineStartPadding).tickFormat(Ab(l.db.getAxisFormat()||h.axisFormat||"%Y-%m-%d"));const Z=/^([1-9]\d*)(minute|hour|day|week|month)$/.exec(l.db.getTickInterval()||h.tickInterval);if(Z!==null){const Dt=Z[1];switch(Z[2]){case"minute":q.ticks(Cb.every(Dt));break;case"hour":q.ticks(Sb.every(Dt));break;case"day":q.ticks(Pm.every(Dt));break;case"week":q.ticks(Im.every(Dt));break;case"month":q.ticks(Tb.every(Dt));break}}if(F.append("g").attr("class","grid").attr("transform","translate("+_e+", "+(be-50)+")").call(q).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),l.db.topAxisEnabled()||h.topAxis){let Dt=Ut(W).tickSize(-be+de+h.gridLineStartPadding).tickFormat(Ab(l.db.getAxisFormat()||h.axisFormat||"%Y-%m-%d"));if(Z!==null){const xn=Z[1];switch(Z[2]){case"minute":Dt.ticks(Cb.every(xn));break;case"hour":Dt.ticks(Sb.every(xn));break;case"day":Dt.ticks(Pm.every(xn));break;case"week":Dt.ticks(Im.every(xn));break;case"month":Dt.ticks(Tb.every(xn));break}}F.append("g").attr("class","grid").attr("transform","translate("+_e+", "+de+")").call(Dt).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function Ve(_e,de){const te=[];let be=0;for(const[q,ot]of K.entries())te[q]=[ot,xe(ot,re)];F.append("g").selectAll("text").data(te).enter().append(function(q){const ot=q[0].split(Ai.lineBreakRegex),Z=-(ot.length-1)/2,Dt=x.createElementNS("http://www.w3.org/2000/svg","text");Dt.setAttribute("dy",Z+"em");for(const[xn,ln]of ot.entries()){const Je=x.createElementNS("http://www.w3.org/2000/svg","tspan");Je.setAttribute("alignment-baseline","central"),Je.setAttribute("x","10"),xn>0&&Je.setAttribute("dy","1em"),Je.textContent=ln,Dt.appendChild(Je)}return Dt}).attr("x",10).attr("y",function(q,ot){if(ot>0)for(let Z=0;Z<ot;Z++)return be+=te[ot-1][1],q[1]*_e/2+be*_e+de;else return q[1]*_e/2+de}).attr("font-size",h.sectionFontSize).attr("font-size",h.sectionFontSize).attr("class",function(q){for(const[ot,Z]of K.entries())if(q[0]===Z)return"sectionTitle sectionTitle"+ot%h.numberSectionStyles;return"sectionTitle"})}function je(_e,de,te,be){const q=l.db.getTodayMarker();if(q==="off")return;const ot=F.append("g").attr("class","today"),Z=new Date,Dt=ot.append("line");Dt.attr("x1",W(Z)+_e).attr("x2",W(Z)+_e).attr("y1",h.titleTopMargin).attr("y2",be-h.titleTopMargin).attr("class","today"),q!==""&&Dt.attr("style",q.replace(/,/g,";"))}function Pe(_e){const de={},te=[];for(let be=0,q=_e.length;be<q;++be)Object.prototype.hasOwnProperty.call(de,_e[be])||(de[_e[be]]=!0,te.push(_e[be]));return te}function ze(_e){let de=_e.length;const te={};for(;de;)te[_e[--de]]=(te[_e[de]]||0)+1;return te}function xe(_e,de){return ze(de)[_e]||0}}};var DC=function(){var t=function(p,m,b,x){for(b=b||{},x=p.length;x--;b[p[x]]=m);return b},i=[6,9,10],o={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(m,b,x,E,L,I,F){switch(I.length-1,L){case 1:return E;case 4:break;case 6:E.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},t(i,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(i,[2,3]),t(i,[2,4]),t(i,[2,5]),t(i,[2,6])],defaultActions:{4:[2,1]},parseError:function(m,b){if(b.recoverable)this.trace(m);else{var x=new Error(m);throw x.hash=b,x}},parse:function(m){var b=this,x=[0],E=[],L=[null],I=[],F=this.table,W="",K=0,re=0,se=2,pe=1,he=I.slice.call(arguments,1),Ce=Object.create(this.lexer),Le={yy:{}};for(var Ve in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ve)&&(Le.yy[Ve]=this.yy[Ve]);Ce.setInput(m,Le.yy),Le.yy.lexer=Ce,Le.yy.parser=this,typeof Ce.yylloc>"u"&&(Ce.yylloc={});var je=Ce.yylloc;I.push(je);var Pe=Ce.options&&Ce.options.ranges;typeof Le.yy.parseError=="function"?this.parseError=Le.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ze(){var ln;return ln=E.pop()||Ce.lex()||pe,typeof ln!="number"&&(ln instanceof Array&&(E=ln,ln=E.pop()),ln=b.symbols_[ln]||ln),ln}for(var xe,_e,de,te,be={},q,ot,Z,Dt;;){if(_e=x[x.length-1],this.defaultActions[_e]?de=this.defaultActions[_e]:((xe===null||typeof xe>"u")&&(xe=ze()),de=F[_e]&&F[_e][xe]),typeof de>"u"||!de.length||!de[0]){var xn="";Dt=[];for(q in F[_e])this.terminals_[q]&&q>se&&Dt.push("'"+this.terminals_[q]+"'");Ce.showPosition?xn="Parse error on line "+(K+1)+`:
`+Ce.showPosition()+`
Expecting `+Dt.join(", ")+", got '"+(this.terminals_[xe]||xe)+"'":xn="Parse error on line "+(K+1)+": Unexpected "+(xe==pe?"end of input":"'"+(this.terminals_[xe]||xe)+"'"),this.parseError(xn,{text:Ce.match,token:this.terminals_[xe]||xe,line:Ce.yylineno,loc:je,expected:Dt})}if(de[0]instanceof Array&&de.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_e+", token: "+xe);switch(de[0]){case 1:x.push(xe),L.push(Ce.yytext),I.push(Ce.yylloc),x.push(de[1]),xe=null,re=Ce.yyleng,W=Ce.yytext,K=Ce.yylineno,je=Ce.yylloc;break;case 2:if(ot=this.productions_[de[1]][1],be.$=L[L.length-ot],be._$={first_line:I[I.length-(ot||1)].first_line,last_line:I[I.length-1].last_line,first_column:I[I.length-(ot||1)].first_column,last_column:I[I.length-1].last_column},Pe&&(be._$.range=[I[I.length-(ot||1)].range[0],I[I.length-1].range[1]]),te=this.performAction.apply(be,[W,re,K,Le.yy,de[1],L,I].concat(he)),typeof te<"u")return te;ot&&(x=x.slice(0,-1*ot*2),L=L.slice(0,-1*ot),I=I.slice(0,-1*ot)),x.push(this.productions_[de[1]][0]),L.push(be.$),I.push(be._$),Z=F[x[x.length-2]][x[x.length-1]],x.push(Z);break;case 3:return!0}}return!0}},l=function(){var p={EOF:1,parseError:function(b,x){if(this.yy.parser)this.yy.parser.parseError(b,x);else throw new Error(b)},setInput:function(m,b){return this.yy=b||this.yy||{},this._input=m,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var m=this._input[0];this.yytext+=m,this.yyleng++,this.offset++,this.match+=m,this.matched+=m;var b=m.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),m},unput:function(m){var b=m.length,x=m.split(/(?:\r\n?|\n)/g);this._input=m+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var E=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),x.length-1&&(this.yylineno-=x.length-1);var L=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:x?(x.length===E.length?this.yylloc.first_column:0)+E[E.length-x.length].length-x[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[L[0],L[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(m){this.unput(this.match.slice(m))},pastInput:function(){var m=this.matched.substr(0,this.matched.length-this.match.length);return(m.length>20?"...":"")+m.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var m=this.match;return m.length<20&&(m+=this._input.substr(0,20-m.length)),(m.substr(0,20)+(m.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var m=this.pastInput(),b=new Array(m.length+1).join("-");return m+this.upcomingInput()+`
`+b+"^"},test_match:function(m,b){var x,E,L;if(this.options.backtrack_lexer&&(L={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(L.yylloc.range=this.yylloc.range.slice(0))),E=m[0].match(/(?:\r\n?|\n).*/g),E&&(this.yylineno+=E.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+m[0].length},this.yytext+=m[0],this.match+=m[0],this.matches=m,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(m[0].length),this.matched+=m[0],x=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),x)return x;if(this._backtrack){for(var I in L)this[I]=L[I];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var m,b,x,E;this._more||(this.yytext="",this.match="");for(var L=this._currentRules(),I=0;I<L.length;I++)if(x=this._input.match(this.rules[L[I]]),x&&(!b||x[0].length>b[0].length)){if(b=x,E=I,this.options.backtrack_lexer){if(m=this.test_match(x,L[I]),m!==!1)return m;if(this._backtrack){b=!1;continue}else return!1}else if(!this.options.flex)break}return b?(m=this.test_match(b,L[E]),m!==!1?m:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return b||this.lex()},begin:function(b){this.conditionStack.push(b)},popState:function(){var b=this.conditionStack.length-1;return b>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(b){return b=this.conditionStack.length-1-Math.abs(b||0),b>=0?this.conditionStack[b]:"INITIAL"},pushState:function(b){this.begin(b)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(b,x,E,L){switch(E){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return p}();o.lexer=l;function h(){this.yy={}}return h.prototype=o,o.Parser=h,new h}();DC.parser=DC;const fae=DC;var WP="",zP=!1;const pae={setMessage:t=>{y.debug("Setting message to: "+t),WP=t},getMessage:()=>WP,setInfo:t=>{zP=t},getInfo:()=>zP,clear:Yl},mae={draw:(t,i,o)=>{try{y.debug(`Rendering info diagram
`+t);const l=Qe().securityLevel;let h;l==="sandbox"&&(h=dn("#i"+i));const m=dn(l==="sandbox"?h.nodes()[0].contentDocument.body:"body").select("#"+i);m.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+o),m.attr("height",100),m.attr("width",400)}catch(l){y.error("Error while rendering info diagram"),y.error(l.message)}}},gae=t=>t.match(/^\s*info/)!==null;var NC=function(){var t=function(je,Pe,ze,xe){for(ze=ze||{},xe=je.length;xe--;ze[je[xe]]=Pe);return ze},i=[1,4],o=[1,5],l=[1,6],h=[1,7],p=[1,9],m=[1,11,13,15,17,19,20,26,27,28,29],b=[2,5],x=[1,6,11,13,15,17,19,20,26,27,28,29],E=[26,27,28],L=[2,8],I=[1,18],F=[1,19],W=[1,20],K=[1,21],re=[1,22],se=[1,23],pe=[1,28],he=[6,26,27,28,29],Ce={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(Pe,ze,xe,_e,de,te,be){var q=te.length-1;switch(de){case 4:_e.setShowData(!0);break;case 7:this.$=te[q-1];break;case 9:_e.addSection(te[q-1],_e.cleanupValue(te[q]));break;case 10:this.$=te[q].trim(),_e.setDiagramTitle(this.$);break;case 11:this.$=te[q].trim(),_e.setAccTitle(this.$);break;case 12:case 13:this.$=te[q].trim(),_e.setAccDescription(this.$);break;case 14:_e.addSection(te[q].substr(8)),this.$=te[q].substr(8);break;case 21:_e.parseDirective("%%{","open_directive");break;case 22:_e.parseDirective(te[q],"type_directive");break;case 23:te[q]=te[q].trim().replace(/'/g,'"'),_e.parseDirective(te[q],"arg_directive");break;case 24:_e.parseDirective("}%%","close_directive","pie");break}},table:[{3:1,4:2,5:3,6:i,21:8,26:o,27:l,28:h,29:p},{1:[3]},{3:10,4:2,5:3,6:i,21:8,26:o,27:l,28:h,29:p},{3:11,4:2,5:3,6:i,21:8,26:o,27:l,28:h,29:p},t(m,b,{7:12,8:[1,13]}),t(x,[2,18]),t(x,[2,19]),t(x,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},t(E,L,{21:8,9:16,10:17,5:24,1:[2,3],11:I,13:F,15:W,17:K,19:re,20:se,29:p}),t(m,b,{7:25}),{23:26,24:[1,27],32:pe},t([24,32],[2,22]),t(m,[2,6]),{4:29,26:o,27:l,28:h},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},t(E,[2,13]),t(E,[2,14]),t(E,[2,15]),t(E,L,{21:8,9:16,10:17,5:24,1:[2,4],11:I,13:F,15:W,17:K,19:re,20:se,29:p}),t(he,[2,16]),{25:34,31:[1,35]},t(he,[2,24]),t(m,[2,7]),t(E,[2,9]),t(E,[2,10]),t(E,[2,11]),t(E,[2,12]),{23:36,32:pe},{32:[2,23]},t(he,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(Pe,ze){if(ze.recoverable)this.trace(Pe);else{var xe=new Error(Pe);throw xe.hash=ze,xe}},parse:function(Pe){var ze=this,xe=[0],_e=[],de=[null],te=[],be=this.table,q="",ot=0,Z=0,Dt=2,xn=1,ln=te.slice.call(arguments,1),Je=Object.create(this.lexer),kt={yy:{}};for(var mt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,mt)&&(kt.yy[mt]=this.yy[mt]);Je.setInput(Pe,kt.yy),kt.yy.lexer=Je,kt.yy.parser=this,typeof Je.yylloc>"u"&&(Je.yylloc={});var vt=Je.yylloc;te.push(vt);var Pt=Je.options&&Je.options.ranges;typeof kt.yy.parseError=="function"?this.parseError=kt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function rn(){var Ft;return Ft=_e.pop()||Je.lex()||xn,typeof Ft!="number"&&(Ft instanceof Array&&(_e=Ft,Ft=_e.pop()),Ft=ze.symbols_[Ft]||Ft),Ft}for(var nt,Ln,Ie,Be,et={},Me,ke,ge,ct;;){if(Ln=xe[xe.length-1],this.defaultActions[Ln]?Ie=this.defaultActions[Ln]:((nt===null||typeof nt>"u")&&(nt=rn()),Ie=be[Ln]&&be[Ln][nt]),typeof Ie>"u"||!Ie.length||!Ie[0]){var le="";ct=[];for(Me in be[Ln])this.terminals_[Me]&&Me>Dt&&ct.push("'"+this.terminals_[Me]+"'");Je.showPosition?le="Parse error on line "+(ot+1)+`:
`+Je.showPosition()+`
Expecting `+ct.join(", ")+", got '"+(this.terminals_[nt]||nt)+"'":le="Parse error on line "+(ot+1)+": Unexpected "+(nt==xn?"end of input":"'"+(this.terminals_[nt]||nt)+"'"),this.parseError(le,{text:Je.match,token:this.terminals_[nt]||nt,line:Je.yylineno,loc:vt,expected:ct})}if(Ie[0]instanceof Array&&Ie.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ln+", token: "+nt);switch(Ie[0]){case 1:xe.push(nt),de.push(Je.yytext),te.push(Je.yylloc),xe.push(Ie[1]),nt=null,Z=Je.yyleng,q=Je.yytext,ot=Je.yylineno,vt=Je.yylloc;break;case 2:if(ke=this.productions_[Ie[1]][1],et.$=de[de.length-ke],et._$={first_line:te[te.length-(ke||1)].first_line,last_line:te[te.length-1].last_line,first_column:te[te.length-(ke||1)].first_column,last_column:te[te.length-1].last_column},Pt&&(et._$.range=[te[te.length-(ke||1)].range[0],te[te.length-1].range[1]]),Be=this.performAction.apply(et,[q,Z,ot,kt.yy,Ie[1],de,te].concat(ln)),typeof Be<"u")return Be;ke&&(xe=xe.slice(0,-1*ke*2),de=de.slice(0,-1*ke),te=te.slice(0,-1*ke)),xe.push(this.productions_[Ie[1]][0]),de.push(et.$),te.push(et._$),ge=be[xe[xe.length-2]][xe[xe.length-1]],xe.push(ge);break;case 3:return!0}}return!0}},Le=function(){var je={EOF:1,parseError:function(ze,xe){if(this.yy.parser)this.yy.parser.parseError(ze,xe);else throw new Error(ze)},setInput:function(Pe,ze){return this.yy=ze||this.yy||{},this._input=Pe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Pe=this._input[0];this.yytext+=Pe,this.yyleng++,this.offset++,this.match+=Pe,this.matched+=Pe;var ze=Pe.match(/(?:\r\n?|\n).*/g);return ze?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Pe},unput:function(Pe){var ze=Pe.length,xe=Pe.split(/(?:\r\n?|\n)/g);this._input=Pe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ze),this.offset-=ze;var _e=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),xe.length-1&&(this.yylineno-=xe.length-1);var de=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:xe?(xe.length===_e.length?this.yylloc.first_column:0)+_e[_e.length-xe.length].length-xe[0].length:this.yylloc.first_column-ze},this.options.ranges&&(this.yylloc.range=[de[0],de[0]+this.yyleng-ze]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Pe){this.unput(this.match.slice(Pe))},pastInput:function(){var Pe=this.matched.substr(0,this.matched.length-this.match.length);return(Pe.length>20?"...":"")+Pe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Pe=this.match;return Pe.length<20&&(Pe+=this._input.substr(0,20-Pe.length)),(Pe.substr(0,20)+(Pe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Pe=this.pastInput(),ze=new Array(Pe.length+1).join("-");return Pe+this.upcomingInput()+`
`+ze+"^"},test_match:function(Pe,ze){var xe,_e,de;if(this.options.backtrack_lexer&&(de={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(de.yylloc.range=this.yylloc.range.slice(0))),_e=Pe[0].match(/(?:\r\n?|\n).*/g),_e&&(this.yylineno+=_e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:_e?_e[_e.length-1].length-_e[_e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Pe[0].length},this.yytext+=Pe[0],this.match+=Pe[0],this.matches=Pe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Pe[0].length),this.matched+=Pe[0],xe=this.performAction.call(this,this.yy,this,ze,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),xe)return xe;if(this._backtrack){for(var te in de)this[te]=de[te];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Pe,ze,xe,_e;this._more||(this.yytext="",this.match="");for(var de=this._currentRules(),te=0;te<de.length;te++)if(xe=this._input.match(this.rules[de[te]]),xe&&(!ze||xe[0].length>ze[0].length)){if(ze=xe,_e=te,this.options.backtrack_lexer){if(Pe=this.test_match(xe,de[te]),Pe!==!1)return Pe;if(this._backtrack){ze=!1;continue}else return!1}else if(!this.options.flex)break}return ze?(Pe=this.test_match(ze,de[_e]),Pe!==!1?Pe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ze=this.next();return ze||this.lex()},begin:function(ze){this.conditionStack.push(ze)},popState:function(){var ze=this.conditionStack.length-1;return ze>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ze){return ze=this.conditionStack.length-1-Math.abs(ze||0),ze>=0?this.conditionStack[ze]:"INITIAL"},pushState:function(ze){this.begin(ze)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(ze,xe,_e,de){switch(_e){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:break;case 6:break;case 7:return 26;case 8:break;case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};return je}();Ce.lexer=Le;function Ve(){this.yy={}}return Ve.prototype=Ce,Ce.Parser=Ve,new Ve}();NC.parser=NC;const vae=NC,yae=t=>t.match(/^\s*pie/)!==null||t.match(/^\s*bar/)!==null;let px={},OC=!1;const _ae={parseDirective:function(t,i,o){ss.parseDirective(this,t,i,o)},getConfig:()=>Qe().pie,addSection:function(t,i){t=Ai.sanitizeText(t,Qe()),px[t]===void 0&&(px[t]=i,y.debug("Added new section :",t))},getSections:()=>px,cleanupValue:function(t){return t.substring(0,1)===":"&&(t=t.substring(1).trim()),Number(t.trim())},clear:function(){px={},OC=!1,Yl()},setAccTitle:pl,getAccTitle:jl,setDiagramTitle:Fu,getDiagramTitle:Bu,setShowData:function(t){OC=t},getShowData:function(){return OC},getAccDescription:ql,setAccDescription:$l};let Zu=Qe(),Ku;const Tv=450,bae={draw:(t,i,o,l)=>{try{Zu=Qe(),y.debug(`Rendering info diagram
`+t);const he=Qe().securityLevel;let Ce;he==="sandbox"&&(Ce=dn("#i"+i));const Le=dn(he==="sandbox"?Ce.nodes()[0].contentDocument.body:"body"),Ve=he==="sandbox"?Ce.nodes()[0].contentDocument:document;l.db.clear(),l.parser.parse(t),y.debug("Parsed info diagram");const je=Ve.getElementById(i);Ku=je.parentElement.offsetWidth,Ku===void 0&&(Ku=1200),Zu.useWidth!==void 0&&(Ku=Zu.useWidth),Zu.pie.useWidth!==void 0&&(Ku=Zu.pie.useWidth);const Pe=Le.select("#"+i);Hl(Pe,Tv,Ku,Zu.pie.useMaxWidth),je.setAttribute("viewBox","0 0 "+Ku+" "+Tv);var h=40,p=18,m=4,b=Math.min(Ku,Tv)/2-h,x=Pe.append("g").attr("transform","translate("+Ku/2+","+Tv/2+")"),E=l.db.getSections(),L=0;Object.keys(E).forEach(function(xe){L+=E[xe]});const ze=Zu.themeVariables;var I=[ze.pie1,ze.pie2,ze.pie3,ze.pie4,ze.pie5,ze.pie6,ze.pie7,ze.pie8,ze.pie9,ze.pie10,ze.pie11,ze.pie12],F=_b().range(I),W=Object.entries(E).map(function(xe,_e){return{order:_e,name:xe[0],value:xe[1]}}),K=uH().value(function(xe){return xe.value}).sort(function(xe,_e){return xe.order-_e.order}),re=K(W),se=Ak().innerRadius(0).outerRadius(b);x.selectAll("mySlices").data(re).enter().append("path").attr("d",se).attr("fill",function(xe){return F(xe.data.name)}).attr("class","pieCircle"),x.selectAll("mySlices").data(re).enter().append("text").text(function(xe){return(xe.data.value/L*100).toFixed(0)+"%"}).attr("transform",function(xe){return"translate("+se.centroid(xe)+")"}).style("text-anchor","middle").attr("class","slice"),x.append("text").text(l.db.getDiagramTitle()).attr("x",0).attr("y",-(Tv-50)/2).attr("class","pieTitleText");var pe=x.selectAll(".legend").data(F.domain()).enter().append("g").attr("class","legend").attr("transform",function(xe,_e){const de=p+m,te=de*F.domain().length/2,be=12*p,q=_e*de-te;return"translate("+be+","+q+")"});pe.append("rect").attr("width",p).attr("height",p).style("fill",F).style("stroke",F),pe.data(re).append("text").attr("x",p+m).attr("y",p-m).text(function(xe){return l.db.getShowData()||Zu.showData||Zu.pie.showData?xe.data.name+" ["+xe.data.value+"]":xe.data.name})}catch(he){y.error("Error while rendering info diagram"),y.error(he)}}};var FC=function(){var t=function(Ln,Ie,Be,et){for(Be=Be||{},et=Ln.length;et--;Be[Ln[et]]=Ie);return Be},i=[1,3],o=[1,5],l=[1,6],h=[1,7],p=[1,8],m=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],b=[1,22],x=[2,13],E=[1,26],L=[1,27],I=[1,28],F=[1,29],W=[1,30],K=[1,31],re=[1,24],se=[1,32],pe=[1,33],he=[1,36],Ce=[71,72],Le=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],Ve=[1,56],je=[1,57],Pe=[1,58],ze=[1,59],xe=[1,60],_e=[1,61],de=[1,62],te=[62,63],be=[1,74],q=[1,70],ot=[1,71],Z=[1,72],Dt=[1,73],xn=[1,75],ln=[1,79],Je=[1,80],kt=[1,77],mt=[1,78],vt=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],Pt={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(Ie,Be,et,Me,ke,ge,ct){var le=ge.length-1;switch(ke){case 6:this.$=ge[le].trim(),Me.setAccTitle(this.$);break;case 7:case 8:this.$=ge[le].trim(),Me.setAccDescription(this.$);break;case 9:Me.parseDirective("%%{","open_directive");break;case 10:Me.parseDirective(ge[le],"type_directive");break;case 11:ge[le]=ge[le].trim().replace(/'/g,'"'),Me.parseDirective(ge[le],"arg_directive");break;case 12:Me.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:Me.addRequirement(ge[le-3],ge[le-4]);break;case 20:Me.setNewReqId(ge[le-2]);break;case 21:Me.setNewReqText(ge[le-2]);break;case 22:Me.setNewReqRisk(ge[le-2]);break;case 23:Me.setNewReqVerifyMethod(ge[le-2]);break;case 26:this.$=Me.RequirementType.REQUIREMENT;break;case 27:this.$=Me.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=Me.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=Me.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=Me.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=Me.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=Me.RiskLevel.LOW_RISK;break;case 33:this.$=Me.RiskLevel.MED_RISK;break;case 34:this.$=Me.RiskLevel.HIGH_RISK;break;case 35:this.$=Me.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=Me.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=Me.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=Me.VerifyType.VERIFY_TEST;break;case 39:Me.addElement(ge[le-3]);break;case 40:Me.setNewElementType(ge[le-2]);break;case 41:Me.setNewElementDocRef(ge[le-2]);break;case 44:Me.addRelationship(ge[le-2],ge[le],ge[le-4]);break;case 45:Me.addRelationship(ge[le-2],ge[le-4],ge[le]);break;case 46:this.$=Me.Relationships.CONTAINS;break;case 47:this.$=Me.Relationships.COPIES;break;case 48:this.$=Me.Relationships.DERIVES;break;case 49:this.$=Me.Relationships.SATISFIES;break;case 50:this.$=Me.Relationships.VERIFIES;break;case 51:this.$=Me.Relationships.REFINES;break;case 52:this.$=Me.Relationships.TRACES;break}},table:[{3:1,4:2,6:i,9:4,14:o,16:l,18:h,19:p},{1:[3]},{3:10,4:2,5:[1,9],6:i,9:4,14:o,16:l,18:h,19:p},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},t(m,[2,8]),{20:[2,9]},{3:16,4:2,6:i,9:4,14:o,16:l,18:h,19:p},{1:[2,2]},{4:21,5:b,7:17,8:x,9:4,14:o,16:l,18:h,19:p,23:18,24:19,25:20,26:23,32:25,40:E,41:L,42:I,43:F,44:W,45:K,53:re,71:se,72:pe},{11:34,12:[1,35],22:he},t([12,22],[2,10]),t(m,[2,6]),t(m,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:b,7:38,8:x,9:4,14:o,16:l,18:h,19:p,23:18,24:19,25:20,26:23,32:25,40:E,41:L,42:I,43:F,44:W,45:K,53:re,71:se,72:pe},{4:21,5:b,7:39,8:x,9:4,14:o,16:l,18:h,19:p,23:18,24:19,25:20,26:23,32:25,40:E,41:L,42:I,43:F,44:W,45:K,53:re,71:se,72:pe},{4:21,5:b,7:40,8:x,9:4,14:o,16:l,18:h,19:p,23:18,24:19,25:20,26:23,32:25,40:E,41:L,42:I,43:F,44:W,45:K,53:re,71:se,72:pe},{4:21,5:b,7:41,8:x,9:4,14:o,16:l,18:h,19:p,23:18,24:19,25:20,26:23,32:25,40:E,41:L,42:I,43:F,44:W,45:K,53:re,71:se,72:pe},{4:21,5:b,7:42,8:x,9:4,14:o,16:l,18:h,19:p,23:18,24:19,25:20,26:23,32:25,40:E,41:L,42:I,43:F,44:W,45:K,53:re,71:se,72:pe},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},t(Ce,[2,26]),t(Ce,[2,27]),t(Ce,[2,28]),t(Ce,[2,29]),t(Ce,[2,30]),t(Ce,[2,31]),t(Le,[2,55]),t(Le,[2,56]),t(m,[2,4]),{13:51,21:[1,52]},t(m,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:Ve,65:je,66:Pe,67:ze,68:xe,69:_e,70:de},{61:63,64:Ve,65:je,66:Pe,67:ze,68:xe,69:_e,70:de},{11:64,22:he},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},t(te,[2,46]),t(te,[2,47]),t(te,[2,48]),t(te,[2,49]),t(te,[2,50]),t(te,[2,51]),t(te,[2,52]),{63:[1,68]},t(m,[2,5]),{5:be,29:69,30:q,33:ot,35:Z,37:Dt,39:xn},{5:ln,39:Je,55:76,56:kt,58:mt},{32:81,71:se,72:pe},{32:82,71:se,72:pe},t(vt,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:be,29:87,30:q,33:ot,35:Z,37:Dt,39:xn},t(vt,[2,25]),t(vt,[2,39]),{31:[1,88]},{31:[1,89]},{5:ln,39:Je,55:90,56:kt,58:mt},t(vt,[2,43]),t(vt,[2,44]),t(vt,[2,45]),{32:91,71:se,72:pe},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},t(vt,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},t(vt,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:be,29:116,30:q,33:ot,35:Z,37:Dt,39:xn},{5:be,29:117,30:q,33:ot,35:Z,37:Dt,39:xn},{5:be,29:118,30:q,33:ot,35:Z,37:Dt,39:xn},{5:be,29:119,30:q,33:ot,35:Z,37:Dt,39:xn},{5:ln,39:Je,55:120,56:kt,58:mt},{5:ln,39:Je,55:121,56:kt,58:mt},t(vt,[2,20]),t(vt,[2,21]),t(vt,[2,22]),t(vt,[2,23]),t(vt,[2,40]),t(vt,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(Ie,Be){if(Be.recoverable)this.trace(Ie);else{var et=new Error(Ie);throw et.hash=Be,et}},parse:function(Ie){var Be=this,et=[0],Me=[],ke=[null],ge=[],ct=this.table,le="",Ft=0,Oe=0,Wn=2,dt=1,Cn=ge.slice.call(arguments,1),un=Object.create(this.lexer),Kt={yy:{}};for(var hn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,hn)&&(Kt.yy[hn]=this.yy[hn]);un.setInput(Ie,Kt.yy),Kt.yy.lexer=un,Kt.yy.parser=this,typeof un.yylloc>"u"&&(un.yylloc={});var cn=un.yylloc;ge.push(cn);var qt=un.options&&un.options.ranges;typeof Kt.yy.parseError=="function"?this.parseError=Kt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function _t(){var jt;return jt=Me.pop()||un.lex()||dt,typeof jt!="number"&&(jt instanceof Array&&(Me=jt,jt=Me.pop()),jt=Be.symbols_[jt]||jt),jt}for(var Si,ni,ei,ii,$n={},ar,Yn,zn,Bn;;){if(ni=et[et.length-1],this.defaultActions[ni]?ei=this.defaultActions[ni]:((Si===null||typeof Si>"u")&&(Si=_t()),ei=ct[ni]&&ct[ni][Si]),typeof ei>"u"||!ei.length||!ei[0]){var sn="";Bn=[];for(ar in ct[ni])this.terminals_[ar]&&ar>Wn&&Bn.push("'"+this.terminals_[ar]+"'");un.showPosition?sn="Parse error on line "+(Ft+1)+`:
`+un.showPosition()+`
Expecting `+Bn.join(", ")+", got '"+(this.terminals_[Si]||Si)+"'":sn="Parse error on line "+(Ft+1)+": Unexpected "+(Si==dt?"end of input":"'"+(this.terminals_[Si]||Si)+"'"),this.parseError(sn,{text:un.match,token:this.terminals_[Si]||Si,line:un.yylineno,loc:cn,expected:Bn})}if(ei[0]instanceof Array&&ei.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ni+", token: "+Si);switch(ei[0]){case 1:et.push(Si),ke.push(un.yytext),ge.push(un.yylloc),et.push(ei[1]),Si=null,Oe=un.yyleng,le=un.yytext,Ft=un.yylineno,cn=un.yylloc;break;case 2:if(Yn=this.productions_[ei[1]][1],$n.$=ke[ke.length-Yn],$n._$={first_line:ge[ge.length-(Yn||1)].first_line,last_line:ge[ge.length-1].last_line,first_column:ge[ge.length-(Yn||1)].first_column,last_column:ge[ge.length-1].last_column},qt&&($n._$.range=[ge[ge.length-(Yn||1)].range[0],ge[ge.length-1].range[1]]),ii=this.performAction.apply($n,[le,Oe,Ft,Kt.yy,ei[1],ke,ge].concat(Cn)),typeof ii<"u")return ii;Yn&&(et=et.slice(0,-1*Yn*2),ke=ke.slice(0,-1*Yn),ge=ge.slice(0,-1*Yn)),et.push(this.productions_[ei[1]][0]),ke.push($n.$),ge.push($n._$),zn=ct[et[et.length-2]][et[et.length-1]],et.push(zn);break;case 3:return!0}}return!0}},rn=function(){var Ln={EOF:1,parseError:function(Be,et){if(this.yy.parser)this.yy.parser.parseError(Be,et);else throw new Error(Be)},setInput:function(Ie,Be){return this.yy=Be||this.yy||{},this._input=Ie,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ie=this._input[0];this.yytext+=Ie,this.yyleng++,this.offset++,this.match+=Ie,this.matched+=Ie;var Be=Ie.match(/(?:\r\n?|\n).*/g);return Be?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ie},unput:function(Ie){var Be=Ie.length,et=Ie.split(/(?:\r\n?|\n)/g);this._input=Ie+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Be),this.offset-=Be;var Me=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),et.length-1&&(this.yylineno-=et.length-1);var ke=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:et?(et.length===Me.length?this.yylloc.first_column:0)+Me[Me.length-et.length].length-et[0].length:this.yylloc.first_column-Be},this.options.ranges&&(this.yylloc.range=[ke[0],ke[0]+this.yyleng-Be]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Ie){this.unput(this.match.slice(Ie))},pastInput:function(){var Ie=this.matched.substr(0,this.matched.length-this.match.length);return(Ie.length>20?"...":"")+Ie.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ie=this.match;return Ie.length<20&&(Ie+=this._input.substr(0,20-Ie.length)),(Ie.substr(0,20)+(Ie.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ie=this.pastInput(),Be=new Array(Ie.length+1).join("-");return Ie+this.upcomingInput()+`
`+Be+"^"},test_match:function(Ie,Be){var et,Me,ke;if(this.options.backtrack_lexer&&(ke={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ke.yylloc.range=this.yylloc.range.slice(0))),Me=Ie[0].match(/(?:\r\n?|\n).*/g),Me&&(this.yylineno+=Me.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Me?Me[Me.length-1].length-Me[Me.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ie[0].length},this.yytext+=Ie[0],this.match+=Ie[0],this.matches=Ie,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ie[0].length),this.matched+=Ie[0],et=this.performAction.call(this,this.yy,this,Be,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),et)return et;if(this._backtrack){for(var ge in ke)this[ge]=ke[ge];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Ie,Be,et,Me;this._more||(this.yytext="",this.match="");for(var ke=this._currentRules(),ge=0;ge<ke.length;ge++)if(et=this._input.match(this.rules[ke[ge]]),et&&(!Be||et[0].length>Be[0].length)){if(Be=et,Me=ge,this.options.backtrack_lexer){if(Ie=this.test_match(et,ke[ge]),Ie!==!1)return Ie;if(this._backtrack){Be=!1;continue}else return!1}else if(!this.options.flex)break}return Be?(Ie=this.test_match(Be,ke[Me]),Ie!==!1?Ie:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Be=this.next();return Be||this.lex()},begin:function(Be){this.conditionStack.push(Be)},popState:function(){var Be=this.conditionStack.length-1;return Be>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Be){return Be=this.conditionStack.length-1-Math.abs(Be||0),Be>=0?this.conditionStack[Be]:"INITIAL"},pushState:function(Be){this.begin(Be)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Be,et,Me,ke){switch(Me){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:break;case 15:break;case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return et.yytext=et.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};return Ln}();Pt.lexer=rn;function nt(){this.yy={}}return nt.prototype=Pt,Pt.Parser=nt,new nt}();FC.parser=FC;const xae=FC,wae=t=>t.match(/^\s*requirement(Diagram)?/)!==null;let BC=[],_a={},Mv={},cd={},Av={};const kae={RequirementType:{REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel:{LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType:{VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships:{CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective:function(t,i,o){ss.parseDirective(this,t,i,o)},getConfig:()=>Qe().req,addRequirement:(t,i)=>(Mv[t]===void 0&&(Mv[t]={name:t,type:i,id:_a.id,text:_a.text,risk:_a.risk,verifyMethod:_a.verifyMethod}),_a={},Mv[t]),getRequirements:()=>Mv,setNewReqId:t=>{_a!==void 0&&(_a.id=t)},setNewReqText:t=>{_a!==void 0&&(_a.text=t)},setNewReqRisk:t=>{_a!==void 0&&(_a.risk=t)},setNewReqVerifyMethod:t=>{_a!==void 0&&(_a.verifyMethod=t)},setAccTitle:pl,getAccTitle:jl,setAccDescription:$l,getAccDescription:ql,addElement:t=>(Av[t]===void 0&&(Av[t]={name:t,type:cd.type,docRef:cd.docRef},y.info("Added new requirement: ",t)),cd={},Av[t]),getElements:()=>Av,setNewElementType:t=>{cd!==void 0&&(cd.type=t)},setNewElementDocRef:t=>{cd!==void 0&&(cd.docRef=t)},addRelationship:(t,i,o)=>{BC.push({type:t,src:i,dst:o})},getRelationships:()=>BC,clear:()=>{BC=[],_a={},Mv={},cd={},Av={},Yl()}},VC={CONTAINS:"contains",ARROW:"arrow"},UP={ReqMarkers:VC,insertLineEndings:(t,i)=>{let o=t.append("defs").append("marker").attr("id",VC.CONTAINS+"_line_ending").attr("refX",0).attr("refY",i.line_height/2).attr("markerWidth",i.line_height).attr("markerHeight",i.line_height).attr("orient","auto").append("g");o.append("circle").attr("cx",i.line_height/2).attr("cy",i.line_height/2).attr("r",i.line_height/2).attr("fill","none"),o.append("line").attr("x1",0).attr("x2",i.line_height).attr("y1",i.line_height/2).attr("y2",i.line_height/2).attr("stroke-width",1),o.append("line").attr("y1",0).attr("y2",i.line_height).attr("x1",i.line_height/2).attr("x2",i.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",VC.ARROW+"_line_ending").attr("refX",i.line_height).attr("refY",.5*i.line_height).attr("markerWidth",i.line_height).attr("markerHeight",i.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${i.line_height},${i.line_height/2}
      M${i.line_height},${i.line_height/2}
      L0,${i.line_height}`).attr("stroke-width",1)}};let ms={},GP=0;const HP=(t,i)=>t.insert("rect","#"+i).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",ms.rect_min_width+"px").attr("height",ms.rect_min_height+"px"),YP=(t,i,o)=>{let l=ms.rect_min_width/2,h=t.append("text").attr("class","req reqLabel reqTitle").attr("id",i).attr("x",l).attr("y",ms.rect_padding).attr("dominant-baseline","hanging"),p=0;o.forEach(E=>{p==0?h.append("tspan").attr("text-anchor","middle").attr("x",ms.rect_min_width/2).attr("dy",0).text(E):h.append("tspan").attr("text-anchor","middle").attr("x",ms.rect_min_width/2).attr("dy",ms.line_height*.75).text(E),p++});let m=1.5*ms.rect_padding,b=p*ms.line_height*.75,x=m+b;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",ms.rect_min_width).attr("y1",x).attr("y2",x),{titleNode:h,y:x}},jP=(t,i,o,l)=>{let h=t.append("text").attr("class","req reqLabel").attr("id",i).attr("x",ms.rect_padding).attr("y",l).attr("dominant-baseline","hanging"),p=0;const m=30;let b=[];return o.forEach(x=>{let E=x.length;for(;E>m&&p<3;){let L=x.substring(0,m);x=x.substring(m,x.length),E=x.length,b[b.length]=L,p++}if(p==3){let L=b[b.length-1];b[b.length-1]=L.substring(0,L.length-4)+"..."}else b[b.length]=x;p=0}),b.forEach(x=>{h.append("tspan").attr("x",ms.rect_padding).attr("dy",ms.line_height).text(x)}),h},Cae=(t,i,o,l)=>{const h=i.node().getTotalLength(),p=i.node().getPointAtLength(h*.5),m="rel"+GP;GP++;const x=t.append("text").attr("class","req relationshipLabel").attr("id",m).attr("x",p.x).attr("y",p.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(l).node().getBBox();t.insert("rect","#"+m).attr("class","req reqLabelBox").attr("x",p.x-x.width/2).attr("y",p.y-x.height/2).attr("width",x.width).attr("height",x.height).attr("fill","white").attr("fill-opacity","85%")},Sae=function(t,i,o,l,h){const p=o.edge(g0(i.src),g0(i.dst)),m=Bm().x(function(x){return x.x}).y(function(x){return x.y}),b=t.insert("path","#"+l).attr("class","er relationshipLine").attr("d",m(p.points)).attr("fill","none");i.type==h.db.Relationships.CONTAINS?b.attr("marker-start","url("+Ai.getUrl(ms.arrowMarkerAbsolute)+"#"+i.type+"_line_ending)"):(b.attr("stroke-dasharray","10,7"),b.attr("marker-end","url("+Ai.getUrl(ms.arrowMarkerAbsolute)+"#"+UP.ReqMarkers.ARROW+"_line_ending)")),Cae(t,b,ms,`<<${i.type}>>`)},Eae=(t,i,o)=>{Object.keys(t).forEach(l=>{let h=t[l];l=g0(l),y.info("Added new requirement: ",l);const p=o.append("g").attr("id",l),m="req-"+l,b=HP(p,m);let x=YP(p,l+"_title",[`<<${h.type}>>`,`${h.name}`]);jP(p,l+"_body",[`Id: ${h.id}`,`Text: ${h.text}`,`Risk: ${h.risk}`,`Verification: ${h.verifyMethod}`],x.y);const E=b.node().getBBox();i.setNode(l,{width:E.width,height:E.height,shape:"rect",id:l})})},Tae=(t,i,o)=>{Object.keys(t).forEach(l=>{let h=t[l];const p=g0(l),m=o.append("g").attr("id",p),b="element-"+p,x=HP(m,b);let E=YP(m,b+"_title",["<<Element>>",`${l}`]);jP(m,b+"_body",[`Type: ${h.type||"Not Specified"}`,`Doc Ref: ${h.docRef||"None"}`],E.y);const L=x.node().getBBox();i.setNode(p,{width:L.width,height:L.height,shape:"rect",id:p})})},Mae=(t,i)=>(t.forEach(function(o){let l=g0(o.src),h=g0(o.dst);i.setEdge(l,h,{relationship:o})}),t),Aae=function(t,i){i.nodes().forEach(function(o){o!==void 0&&i.node(o)!==void 0&&(t.select("#"+o),t.select("#"+o).attr("transform","translate("+(i.node(o).x-i.node(o).width/2)+","+(i.node(o).y-i.node(o).height/2)+" )"))})},g0=t=>t.replace(/\s/g,"").replace(/\./g,"_"),Lae={draw:(t,i,o,l)=>{ms=Qe().requirement,l.db.clear(),l.parser.parse(t);const h=ms.securityLevel;let p;h==="sandbox"&&(p=dn("#i"+i));const b=dn(h==="sandbox"?p.nodes()[0].contentDocument.body:"body").select(`[id='${i}']`);UP.insertLineEndings(b,ms);const x=new Ns({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:ms.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let E=l.db.getRequirements(),L=l.db.getElements(),I=l.db.getRelationships();Eae(E,x,b),Tae(L,x,b),Mae(I,x),u0(x),Aae(b,x),I.forEach(function(se){Sae(b,se,x,i,l)});const F=ms.rect_padding,W=b.node().getBBox(),K=W.width+F*2,re=W.height+F*2;Hl(b,re,K,ms.useMaxWidth),b.attr("viewBox",`${W.x-F} ${W.y-F} ${K} ${re}`)}};var WC=function(){var t=function(Ln,Ie,Be,et){for(Be=Be||{},et=Ln.length;et--;Be[Ln[et]]=Ie);return Be},i=[1,2],o=[1,3],l=[1,5],h=[1,7],p=[2,5],m=[1,15],b=[1,17],x=[1,18],E=[1,19],L=[1,21],I=[1,22],F=[1,23],W=[1,29],K=[1,30],re=[1,31],se=[1,32],pe=[1,33],he=[1,34],Ce=[1,35],Le=[1,36],Ve=[1,37],je=[1,38],Pe=[1,39],ze=[1,40],xe=[1,43],_e=[1,44],de=[1,45],te=[1,46],be=[1,47],q=[1,48],ot=[1,51],Z=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],Dt=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],xn=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],ln=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],Je=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],kt=[67,68,69],mt=[1,121],vt=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],Pt={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(Ie,Be,et,Me,ke,ge,ct){var le=ge.length-1;switch(ke){case 4:return Me.apply(ge[le]),ge[le];case 5:this.$=[];break;case 6:ge[le-1].push(ge[le]),this.$=ge[le-1];break;case 7:case 8:this.$=ge[le];break;case 9:this.$=[];break;case 12:ge[le-3].type="addParticipant",ge[le-3].description=Me.parseMessage(ge[le-1]),this.$=ge[le-3];break;case 13:ge[le-1].type="addParticipant",this.$=ge[le-1];break;case 14:ge[le-3].type="addActor",ge[le-3].description=Me.parseMessage(ge[le-1]),this.$=ge[le-3];break;case 15:ge[le-1].type="addActor",this.$=ge[le-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(ge[le-2]),sequenceIndexStep:Number(ge[le-1]),sequenceVisible:!0,signalType:Me.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(ge[le-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:Me.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:Me.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:Me.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:Me.LINETYPE.ACTIVE_START,actor:ge[le-1]};break;case 22:this.$={type:"activeEnd",signalType:Me.LINETYPE.ACTIVE_END,actor:ge[le-1]};break;case 28:Me.setDiagramTitle(ge[le].substring(6)),this.$=ge[le].substring(6);break;case 29:Me.setDiagramTitle(ge[le].substring(7)),this.$=ge[le].substring(7);break;case 30:this.$=ge[le].trim(),Me.setAccTitle(this.$);break;case 31:case 32:this.$=ge[le].trim(),Me.setAccDescription(this.$);break;case 33:ge[le-1].unshift({type:"loopStart",loopText:Me.parseMessage(ge[le-2]),signalType:Me.LINETYPE.LOOP_START}),ge[le-1].push({type:"loopEnd",loopText:ge[le-2],signalType:Me.LINETYPE.LOOP_END}),this.$=ge[le-1];break;case 34:ge[le-1].unshift({type:"rectStart",color:Me.parseMessage(ge[le-2]),signalType:Me.LINETYPE.RECT_START}),ge[le-1].push({type:"rectEnd",color:Me.parseMessage(ge[le-2]),signalType:Me.LINETYPE.RECT_END}),this.$=ge[le-1];break;case 35:ge[le-1].unshift({type:"optStart",optText:Me.parseMessage(ge[le-2]),signalType:Me.LINETYPE.OPT_START}),ge[le-1].push({type:"optEnd",optText:Me.parseMessage(ge[le-2]),signalType:Me.LINETYPE.OPT_END}),this.$=ge[le-1];break;case 36:ge[le-1].unshift({type:"altStart",altText:Me.parseMessage(ge[le-2]),signalType:Me.LINETYPE.ALT_START}),ge[le-1].push({type:"altEnd",signalType:Me.LINETYPE.ALT_END}),this.$=ge[le-1];break;case 37:ge[le-1].unshift({type:"parStart",parText:Me.parseMessage(ge[le-2]),signalType:Me.LINETYPE.PAR_START}),ge[le-1].push({type:"parEnd",signalType:Me.LINETYPE.PAR_END}),this.$=ge[le-1];break;case 38:ge[le-1].unshift({type:"criticalStart",criticalText:Me.parseMessage(ge[le-2]),signalType:Me.LINETYPE.CRITICAL_START}),ge[le-1].push({type:"criticalEnd",signalType:Me.LINETYPE.CRITICAL_END}),this.$=ge[le-1];break;case 39:ge[le-1].unshift({type:"breakStart",breakText:Me.parseMessage(ge[le-2]),signalType:Me.LINETYPE.BREAK_START}),ge[le-1].push({type:"breakEnd",optText:Me.parseMessage(ge[le-2]),signalType:Me.LINETYPE.BREAK_END}),this.$=ge[le-1];break;case 42:this.$=ge[le-3].concat([{type:"option",optionText:Me.parseMessage(ge[le-1]),signalType:Me.LINETYPE.CRITICAL_OPTION},ge[le]]);break;case 44:this.$=ge[le-3].concat([{type:"and",parText:Me.parseMessage(ge[le-1]),signalType:Me.LINETYPE.PAR_AND},ge[le]]);break;case 46:this.$=ge[le-3].concat([{type:"else",altText:Me.parseMessage(ge[le-1]),signalType:Me.LINETYPE.ALT_ELSE},ge[le]]);break;case 47:this.$=[ge[le-1],{type:"addNote",placement:ge[le-2],actor:ge[le-1].actor,text:ge[le]}];break;case 48:ge[le-2]=[].concat(ge[le-1],ge[le-1]).slice(0,2),ge[le-2][0]=ge[le-2][0].actor,ge[le-2][1]=ge[le-2][1].actor,this.$=[ge[le-1],{type:"addNote",placement:Me.PLACEMENT.OVER,actor:ge[le-2].slice(0,2),text:ge[le]}];break;case 49:this.$=[ge[le-1],{type:"addLinks",actor:ge[le-1].actor,text:ge[le]}];break;case 50:this.$=[ge[le-1],{type:"addALink",actor:ge[le-1].actor,text:ge[le]}];break;case 51:this.$=[ge[le-1],{type:"addProperties",actor:ge[le-1].actor,text:ge[le]}];break;case 52:this.$=[ge[le-1],{type:"addDetails",actor:ge[le-1].actor,text:ge[le]}];break;case 55:this.$=[ge[le-2],ge[le]];break;case 56:this.$=ge[le];break;case 57:this.$=Me.PLACEMENT.LEFTOF;break;case 58:this.$=Me.PLACEMENT.RIGHTOF;break;case 59:this.$=[ge[le-4],ge[le-1],{type:"addMessage",from:ge[le-4].actor,to:ge[le-1].actor,signalType:ge[le-3],msg:ge[le]},{type:"activeStart",signalType:Me.LINETYPE.ACTIVE_START,actor:ge[le-1]}];break;case 60:this.$=[ge[le-4],ge[le-1],{type:"addMessage",from:ge[le-4].actor,to:ge[le-1].actor,signalType:ge[le-3],msg:ge[le]},{type:"activeEnd",signalType:Me.LINETYPE.ACTIVE_END,actor:ge[le-4]}];break;case 61:this.$=[ge[le-3],ge[le-1],{type:"addMessage",from:ge[le-3].actor,to:ge[le-1].actor,signalType:ge[le-2],msg:ge[le]}];break;case 62:this.$={type:"addParticipant",actor:ge[le]};break;case 63:this.$=Me.LINETYPE.SOLID_OPEN;break;case 64:this.$=Me.LINETYPE.DOTTED_OPEN;break;case 65:this.$=Me.LINETYPE.SOLID;break;case 66:this.$=Me.LINETYPE.DOTTED;break;case 67:this.$=Me.LINETYPE.SOLID_CROSS;break;case 68:this.$=Me.LINETYPE.DOTTED_CROSS;break;case 69:this.$=Me.LINETYPE.SOLID_POINT;break;case 70:this.$=Me.LINETYPE.DOTTED_POINT;break;case 71:this.$=Me.parseMessage(ge[le].trim().substring(1));break;case 72:Me.parseDirective("%%{","open_directive");break;case 73:Me.parseDirective(ge[le],"type_directive");break;case 74:ge[le]=ge[le].trim().replace(/'/g,'"'),Me.parseDirective(ge[le],"arg_directive");break;case 75:Me.parseDirective("}%%","close_directive","sequence");break}},table:[{3:1,4:i,5:o,6:4,7:l,11:6,79:h},{1:[3]},{3:8,4:i,5:o,6:4,7:l,11:6,79:h},{3:9,4:i,5:o,6:4,7:l,11:6,79:h},{3:10,4:i,5:o,6:4,7:l,11:6,79:h},t([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],p,{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:m,5:b,6:41,9:14,10:16,11:6,16:x,17:42,20:E,21:20,22:L,25:I,26:F,27:24,28:25,29:26,30:27,31:28,32:W,33:K,34:re,36:se,38:pe,39:he,41:Ce,42:Le,43:Ve,45:je,47:Pe,49:ze,53:xe,58:_e,59:de,60:te,61:be,69:q,79:h},{13:49,14:[1,50],82:ot},t([14,82],[2,73]),t(Z,[2,6]),{6:41,10:52,11:6,16:x,17:42,20:E,21:20,22:L,25:I,26:F,27:24,28:25,29:26,30:27,31:28,32:W,33:K,34:re,36:se,38:pe,39:he,41:Ce,42:Le,43:Ve,45:je,47:Pe,49:ze,53:xe,58:_e,59:de,60:te,61:be,69:q,79:h},t(Z,[2,8]),t(Z,[2,9]),{17:53,69:q},{17:54,69:q},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:q},{17:60,69:q},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},t(Z,[2,28]),t(Z,[2,29]),{35:[1,66]},{37:[1,67]},t(Z,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},t(Z,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:q},{17:89,69:q},{17:90,69:q},{17:91,69:q},t([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},t(Z,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},t(Z,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},t(Z,[2,20]),{5:[1,102]},{5:[1,103]},t(Z,[2,23]),t(Z,[2,24]),t(Z,[2,25]),t(Z,[2,26]),t(Z,[2,27]),t(Z,[2,30]),t(Z,[2,31]),t(Dt,p,{8:104}),t(Dt,p,{8:105}),t(Dt,p,{8:106}),t(xn,p,{44:107,8:108}),t(ln,p,{46:109,8:110}),t(Je,p,{48:111,8:112}),t(Dt,p,{8:113}),{17:116,67:[1,114],68:[1,115],69:q},t(kt,[2,63]),t(kt,[2,64]),t(kt,[2,65]),t(kt,[2,66]),t(kt,[2,67]),t(kt,[2,68]),t(kt,[2,69]),t(kt,[2,70]),{17:117,69:q},{17:119,57:118,69:q},{69:[2,57]},{69:[2,58]},{55:120,78:mt},{55:122,78:mt},{55:123,78:mt},{55:124,78:mt},t(vt,[2,10]),{13:125,82:ot},{82:[2,74]},{19:[1,126]},t(Z,[2,13]),{19:[1,127]},t(Z,[2,15]),{5:[1,128]},t(Z,[2,18]),t(Z,[2,19]),t(Z,[2,21]),t(Z,[2,22]),{4:m,5:b,6:41,9:14,10:16,11:6,16:x,17:42,20:E,21:20,22:L,25:I,26:F,27:24,28:25,29:26,30:27,31:28,32:W,33:K,34:re,36:se,38:pe,39:he,40:[1,129],41:Ce,42:Le,43:Ve,45:je,47:Pe,49:ze,53:xe,58:_e,59:de,60:te,61:be,69:q,79:h},{4:m,5:b,6:41,9:14,10:16,11:6,16:x,17:42,20:E,21:20,22:L,25:I,26:F,27:24,28:25,29:26,30:27,31:28,32:W,33:K,34:re,36:se,38:pe,39:he,40:[1,130],41:Ce,42:Le,43:Ve,45:je,47:Pe,49:ze,53:xe,58:_e,59:de,60:te,61:be,69:q,79:h},{4:m,5:b,6:41,9:14,10:16,11:6,16:x,17:42,20:E,21:20,22:L,25:I,26:F,27:24,28:25,29:26,30:27,31:28,32:W,33:K,34:re,36:se,38:pe,39:he,40:[1,131],41:Ce,42:Le,43:Ve,45:je,47:Pe,49:ze,53:xe,58:_e,59:de,60:te,61:be,69:q,79:h},{40:[1,132]},{4:m,5:b,6:41,9:14,10:16,11:6,16:x,17:42,20:E,21:20,22:L,25:I,26:F,27:24,28:25,29:26,30:27,31:28,32:W,33:K,34:re,36:se,38:pe,39:he,40:[2,45],41:Ce,42:Le,43:Ve,45:je,47:Pe,49:ze,52:[1,133],53:xe,58:_e,59:de,60:te,61:be,69:q,79:h},{40:[1,134]},{4:m,5:b,6:41,9:14,10:16,11:6,16:x,17:42,20:E,21:20,22:L,25:I,26:F,27:24,28:25,29:26,30:27,31:28,32:W,33:K,34:re,36:se,38:pe,39:he,40:[2,43],41:Ce,42:Le,43:Ve,45:je,47:Pe,49:ze,51:[1,135],53:xe,58:_e,59:de,60:te,61:be,69:q,79:h},{40:[1,136]},{4:m,5:b,6:41,9:14,10:16,11:6,16:x,17:42,20:E,21:20,22:L,25:I,26:F,27:24,28:25,29:26,30:27,31:28,32:W,33:K,34:re,36:se,38:pe,39:he,40:[2,41],41:Ce,42:Le,43:Ve,45:je,47:Pe,49:ze,50:[1,137],53:xe,58:_e,59:de,60:te,61:be,69:q,79:h},{4:m,5:b,6:41,9:14,10:16,11:6,16:x,17:42,20:E,21:20,22:L,25:I,26:F,27:24,28:25,29:26,30:27,31:28,32:W,33:K,34:re,36:se,38:pe,39:he,40:[1,138],41:Ce,42:Le,43:Ve,45:je,47:Pe,49:ze,53:xe,58:_e,59:de,60:te,61:be,69:q,79:h},{17:139,69:q},{17:140,69:q},{55:141,78:mt},{55:142,78:mt},{55:143,78:mt},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},t(Z,[2,17]),t(Z,[2,33]),t(Z,[2,34]),t(Z,[2,35]),t(Z,[2,36]),{19:[1,148]},t(Z,[2,37]),{19:[1,149]},t(Z,[2,38]),{19:[1,150]},t(Z,[2,39]),{55:151,78:mt},{55:152,78:mt},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:q},t(vt,[2,11]),t(Z,[2,12]),t(Z,[2,14]),t(xn,p,{8:108,44:154}),t(ln,p,{8:110,46:155}),t(Je,p,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(Ie,Be){if(Be.recoverable)this.trace(Ie);else{var et=new Error(Ie);throw et.hash=Be,et}},parse:function(Ie){var Be=this,et=[0],Me=[],ke=[null],ge=[],ct=this.table,le="",Ft=0,Oe=0,Wn=2,dt=1,Cn=ge.slice.call(arguments,1),un=Object.create(this.lexer),Kt={yy:{}};for(var hn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,hn)&&(Kt.yy[hn]=this.yy[hn]);un.setInput(Ie,Kt.yy),Kt.yy.lexer=un,Kt.yy.parser=this,typeof un.yylloc>"u"&&(un.yylloc={});var cn=un.yylloc;ge.push(cn);var qt=un.options&&un.options.ranges;typeof Kt.yy.parseError=="function"?this.parseError=Kt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function _t(){var jt;return jt=Me.pop()||un.lex()||dt,typeof jt!="number"&&(jt instanceof Array&&(Me=jt,jt=Me.pop()),jt=Be.symbols_[jt]||jt),jt}for(var Si,ni,ei,ii,$n={},ar,Yn,zn,Bn;;){if(ni=et[et.length-1],this.defaultActions[ni]?ei=this.defaultActions[ni]:((Si===null||typeof Si>"u")&&(Si=_t()),ei=ct[ni]&&ct[ni][Si]),typeof ei>"u"||!ei.length||!ei[0]){var sn="";Bn=[];for(ar in ct[ni])this.terminals_[ar]&&ar>Wn&&Bn.push("'"+this.terminals_[ar]+"'");un.showPosition?sn="Parse error on line "+(Ft+1)+`:
`+un.showPosition()+`
Expecting `+Bn.join(", ")+", got '"+(this.terminals_[Si]||Si)+"'":sn="Parse error on line "+(Ft+1)+": Unexpected "+(Si==dt?"end of input":"'"+(this.terminals_[Si]||Si)+"'"),this.parseError(sn,{text:un.match,token:this.terminals_[Si]||Si,line:un.yylineno,loc:cn,expected:Bn})}if(ei[0]instanceof Array&&ei.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ni+", token: "+Si);switch(ei[0]){case 1:et.push(Si),ke.push(un.yytext),ge.push(un.yylloc),et.push(ei[1]),Si=null,Oe=un.yyleng,le=un.yytext,Ft=un.yylineno,cn=un.yylloc;break;case 2:if(Yn=this.productions_[ei[1]][1],$n.$=ke[ke.length-Yn],$n._$={first_line:ge[ge.length-(Yn||1)].first_line,last_line:ge[ge.length-1].last_line,first_column:ge[ge.length-(Yn||1)].first_column,last_column:ge[ge.length-1].last_column},qt&&($n._$.range=[ge[ge.length-(Yn||1)].range[0],ge[ge.length-1].range[1]]),ii=this.performAction.apply($n,[le,Oe,Ft,Kt.yy,ei[1],ke,ge].concat(Cn)),typeof ii<"u")return ii;Yn&&(et=et.slice(0,-1*Yn*2),ke=ke.slice(0,-1*Yn),ge=ge.slice(0,-1*Yn)),et.push(this.productions_[ei[1]][0]),ke.push($n.$),ge.push($n._$),zn=ct[et[et.length-2]][et[et.length-1]],et.push(zn);break;case 3:return!0}}return!0}},rn=function(){var Ln={EOF:1,parseError:function(Be,et){if(this.yy.parser)this.yy.parser.parseError(Be,et);else throw new Error(Be)},setInput:function(Ie,Be){return this.yy=Be||this.yy||{},this._input=Ie,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ie=this._input[0];this.yytext+=Ie,this.yyleng++,this.offset++,this.match+=Ie,this.matched+=Ie;var Be=Ie.match(/(?:\r\n?|\n).*/g);return Be?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ie},unput:function(Ie){var Be=Ie.length,et=Ie.split(/(?:\r\n?|\n)/g);this._input=Ie+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Be),this.offset-=Be;var Me=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),et.length-1&&(this.yylineno-=et.length-1);var ke=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:et?(et.length===Me.length?this.yylloc.first_column:0)+Me[Me.length-et.length].length-et[0].length:this.yylloc.first_column-Be},this.options.ranges&&(this.yylloc.range=[ke[0],ke[0]+this.yyleng-Be]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Ie){this.unput(this.match.slice(Ie))},pastInput:function(){var Ie=this.matched.substr(0,this.matched.length-this.match.length);return(Ie.length>20?"...":"")+Ie.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ie=this.match;return Ie.length<20&&(Ie+=this._input.substr(0,20-Ie.length)),(Ie.substr(0,20)+(Ie.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ie=this.pastInput(),Be=new Array(Ie.length+1).join("-");return Ie+this.upcomingInput()+`
`+Be+"^"},test_match:function(Ie,Be){var et,Me,ke;if(this.options.backtrack_lexer&&(ke={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ke.yylloc.range=this.yylloc.range.slice(0))),Me=Ie[0].match(/(?:\r\n?|\n).*/g),Me&&(this.yylineno+=Me.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Me?Me[Me.length-1].length-Me[Me.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ie[0].length},this.yytext+=Ie[0],this.match+=Ie[0],this.matches=Ie,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ie[0].length),this.matched+=Ie[0],et=this.performAction.call(this,this.yy,this,Be,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),et)return et;if(this._backtrack){for(var ge in ke)this[ge]=ke[ge];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Ie,Be,et,Me;this._more||(this.yytext="",this.match="");for(var ke=this._currentRules(),ge=0;ge<ke.length;ge++)if(et=this._input.match(this.rules[ke[ge]]),et&&(!Be||et[0].length>Be[0].length)){if(Be=et,Me=ge,this.options.backtrack_lexer){if(Ie=this.test_match(et,ke[ge]),Ie!==!1)return Ie;if(this._backtrack){Be=!1;continue}else return!1}else if(!this.options.flex)break}return Be?(Ie=this.test_match(Be,ke[Me]),Ie!==!1?Ie:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Be=this.next();return Be||this.lex()},begin:function(Be){this.conditionStack.push(Be)},popState:function(){var Be=this.conditionStack.length-1;return Be>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Be){return Be=this.conditionStack.length-1-Math.abs(Be||0),Be>=0?this.conditionStack[Be]:"INITIAL"},pushState:function(Be){this.begin(Be)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Be,et,Me,ke){switch(Me){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:return 5;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return et.yytext=et.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 52:return 5;case 53:return et.yytext=et.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 65:return 5;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};return Ln}();Pt.lexer=rn;function nt(){this.yy={}}return nt.prototype=Pt,Pt.Parser=nt,new nt}();WC.parser=WC;const Rae=WC,Pae=t=>t.match(/^\s*sequenceDiagram/)!==null;let Lv,ud={},tc=[],mx=!1,zC;const Iae=function(t,i,o){ss.parseDirective(this,t,i,o)},UC=function(t,i,o,l){const h=ud[t];h&&i===h.name&&o==null||((o==null||o.text==null)&&(o={text:i,wrap:null,type:l}),(l==null||o.text==null)&&(o={text:i,wrap:null,type:l}),ud[t]={name:i,description:o.text,wrap:o.wrap===void 0&&v0()||!!o.wrap,prevActor:Lv,links:{},properties:{},actorCnt:null,rectData:null,type:l||"participant"},Lv&&ud[Lv]&&(ud[Lv].nextActor=t),Lv=t)},Dae=t=>{let i,o=0;for(i=0;i<tc.length;i++)tc[i].type===Pv.ACTIVE_START&&tc[i].from.actor===t&&o++,tc[i].type===Pv.ACTIVE_END&&tc[i].from.actor===t&&o--;return o},Nae=function(t,i,o,l){tc.push({from:t,to:i,message:o.text,wrap:o.wrap===void 0&&v0()||!!o.wrap,answer:l})},Cs=function(t,i,o={text:void 0,wrap:void 0},l){if(l===Pv.ACTIVE_END&&Dae(t.actor)<1){let p=new Error("Trying to inactivate an inactive participant ("+t.actor+")");throw p.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},p}return tc.push({from:t,to:i,message:o.text,wrap:o.wrap===void 0&&v0()||!!o.wrap,type:l}),!0},Oae=function(){return tc},Fae=function(){return ud},Rv=function(t){return ud[t]},Bae=function(){return Object.keys(ud)},Vae=function(){mx=!0},Wae=function(){mx=!1},zae=()=>mx,Uae=function(t){zC=t},v0=()=>zC!==void 0?zC:Qe().sequence.wrap,Gae=function(){ud={},tc=[],mx=!1,Yl()},Hae=function(t){const i=t.trim(),o={text:i.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:i.match(/^:?wrap:/)!==null?!0:i.match(/^:?nowrap:/)!==null?!1:void 0};return y.debug("parseMessage:",o),o},Pv={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},Yae={FILLED:0,OPEN:1},jae={LEFTOF:0,RIGHTOF:1,OVER:2},$P=function(t,i,o){o.text,o.wrap===void 0&&v0()||o.wrap;const l=[].concat(t,t);tc.push({from:l[0],to:l[1],message:o.text,wrap:o.wrap===void 0&&v0()||!!o.wrap,type:Pv.NOTE,placement:i})},qP=function(t,i){const o=Rv(t);try{let l=Wl(i.text,Qe());l=l.replace(/&amp;/g,"&"),l=l.replace(/&equals;/g,"=");const h=JSON.parse(l);GC(o,h)}catch(l){y.error("error while parsing actor link text",l)}},$ae=function(t,i){const o=Rv(t);try{const m={};let b=Wl(i.text,Qe());var l=b.indexOf("@");b=b.replace(/&amp;/g,"&"),b=b.replace(/&equals;/g,"=");var h=b.slice(0,l-1).trim(),p=b.slice(l+1).trim();m[h]=p,GC(o,m)}catch(m){y.error("error while parsing actor link text",m)}};function GC(t,i){if(t.links==null)t.links=i;else for(let o in i)t.links[o]=i[o]}const XP=function(t,i){const o=Rv(t);try{let l=Wl(i.text,Qe());const h=JSON.parse(l);ZP(o,h)}catch(l){y.error("error while parsing actor properties text",l)}};function ZP(t,i){if(t.properties==null)t.properties=i;else for(let o in i)t.properties[o]=i[o]}const KP=function(t,i){const o=Rv(t),l=document.getElementById(i.text);try{const h=l.innerHTML,p=JSON.parse(h);p.properties&&ZP(o,p.properties),p.links&&GC(o,p.links)}catch(h){y.error("error while parsing actor details text",h)}},qae=function(t,i){if(t!==void 0&&t.properties!==void 0)return t.properties[i]},JP=function(t){if(Array.isArray(t))t.forEach(function(i){JP(i)});else switch(t.type){case"sequenceIndex":tc.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":UC(t.actor,t.actor,t.description,"participant");break;case"addActor":UC(t.actor,t.actor,t.description,"actor");break;case"activeStart":Cs(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":Cs(t.actor,void 0,void 0,t.signalType);break;case"addNote":$P(t.actor,t.placement,t.text);break;case"addLinks":qP(t.actor,t.text);break;case"addALink":$ae(t.actor,t.text);break;case"addProperties":XP(t.actor,t.text);break;case"addDetails":KP(t.actor,t.text);break;case"addMessage":Cs(t.from,t.to,t.msg,t.signalType);break;case"loopStart":Cs(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":Cs(void 0,void 0,void 0,t.signalType);break;case"rectStart":Cs(void 0,void 0,t.color,t.signalType);break;case"rectEnd":Cs(void 0,void 0,void 0,t.signalType);break;case"optStart":Cs(void 0,void 0,t.optText,t.signalType);break;case"optEnd":Cs(void 0,void 0,void 0,t.signalType);break;case"altStart":Cs(void 0,void 0,t.altText,t.signalType);break;case"else":Cs(void 0,void 0,t.altText,t.signalType);break;case"altEnd":Cs(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":pl(t.text);break;case"parStart":Cs(void 0,void 0,t.parText,t.signalType);break;case"and":Cs(void 0,void 0,t.parText,t.signalType);break;case"parEnd":Cs(void 0,void 0,void 0,t.signalType);break;case"criticalStart":Cs(void 0,void 0,t.criticalText,t.signalType);break;case"option":Cs(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":Cs(void 0,void 0,void 0,t.signalType);break;case"breakStart":Cs(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":Cs(void 0,void 0,void 0,t.signalType);break}},QP={addActor:UC,addMessage:Nae,addSignal:Cs,addLinks:qP,addDetails:KP,addProperties:XP,autoWrap:v0,setWrap:Uae,enableSequenceNumbers:Vae,disableSequenceNumbers:Wae,showSequenceNumbers:zae,getMessages:Oae,getActors:Fae,getActor:Rv,getActorKeys:Bae,getActorProperty:qae,getAccTitle:jl,getDiagramTitle:Bu,setDiagramTitle:Fu,parseDirective:Iae,getConfig:()=>Qe().sequence,clear:Gae,parseMessage:Hae,LINETYPE:Pv,ARROWTYPE:Yae,PLACEMENT:jae,addNote:$P,setAccTitle:pl,apply:JP,setAccDescription:$l,getAccDescription:ql};let HC=[];const Xae=t=>{HC.push(t)},eI=()=>{HC.forEach(t=>{t()}),HC=[]},gx=function(t,i){const o=t.append("rect");return o.attr("x",i.x),o.attr("y",i.y),o.attr("fill",i.fill),o.attr("stroke",i.stroke),o.attr("width",i.width),o.attr("height",i.height),o.attr("rx",i.rx),o.attr("ry",i.ry),i.class!==void 0&&o.attr("class",i.class),o},tI=(t,i)=>{Xae(()=>{const o=document.querySelectorAll(t);o.length!==0&&(o[0].addEventListener("mouseover",function(){Qae("actor"+i+"_popup")}),o[0].addEventListener("mouseout",function(){ele("actor"+i+"_popup")}))})},Zae=function(t,i,o,l,h){if(i.links===void 0||i.links===null||Object.keys(i.links).length===0)return{height:0,width:0};const p=i.links,m=i.actorCnt,b=i.rectData;var x="none";h&&(x="block !important");const E=t.append("g");E.attr("id","actor"+m+"_popup"),E.attr("class","actorPopupMenu"),E.attr("display",x),tI("#actor"+m+"_popup",m);var L="";b.class!==void 0&&(L=" "+b.class);let I=b.width>o?b.width:o;const F=E.append("rect");if(F.attr("class","actorPopupMenuPanel"+L),F.attr("x",b.x),F.attr("y",b.height),F.attr("fill",b.fill),F.attr("stroke",b.stroke),F.attr("width",I),F.attr("height",b.height),F.attr("rx",b.rx),F.attr("ry",b.ry),p!=null){var W=20;for(let se in p){var K=E.append("a"),re=A(p[se]);K.attr("xlink:href",re),K.attr("target","_blank"),mle(l)(se,K,b.x+10,b.height+W,I,20,{class:"actor"},l),W+=30}}return F.attr("height",W),{height:b.height+W,width:I}},nI=function(t,i,o,l){const h=t.append("image");h.attr("x",i),h.attr("y",o);var p=A(l);h.attr("xlink:href",p)},iI=function(t,i,o,l){const h=t.append("use");h.attr("x",i),h.attr("y",o);var p=A(l);h.attr("xlink:href","#"+p)},Kae=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'block'; }"},Jae=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'none'; }"},Qae=function(t){var i=document.getElementById(t);i!=null&&(i.style.display="block")},ele=function(t){var i=document.getElementById(t);i!=null&&(i.style.display="none")},y0=function(t,i){let o=0,l=0;const h=i.text.split(Ai.lineBreakRegex);let p=[],m=0,b=()=>i.y;if(i.valign!==void 0&&i.textMargin!==void 0&&i.textMargin>0)switch(i.valign){case"top":case"start":b=()=>Math.round(i.y+i.textMargin);break;case"middle":case"center":b=()=>Math.round(i.y+(o+l+i.textMargin)/2);break;case"bottom":case"end":b=()=>Math.round(i.y+(o+l+2*i.textMargin)-i.textMargin);break}if(i.anchor!==void 0&&i.textMargin!==void 0&&i.width!==void 0)switch(i.anchor){case"left":case"start":i.x=Math.round(i.x+i.textMargin),i.anchor="start",i.dominantBaseline="middle",i.alignmentBaseline="middle";break;case"middle":case"center":i.x=Math.round(i.x+i.width/2),i.anchor="middle",i.dominantBaseline="middle",i.alignmentBaseline="middle";break;case"right":case"end":i.x=Math.round(i.x+i.width-i.textMargin),i.anchor="end",i.dominantBaseline="middle",i.alignmentBaseline="middle";break}for(let[x,E]of h.entries()){i.textMargin!==void 0&&i.textMargin===0&&i.fontSize!==void 0&&(m=x*i.fontSize);const L=t.append("text");if(L.attr("x",i.x),L.attr("y",b()),i.anchor!==void 0&&L.attr("text-anchor",i.anchor).attr("dominant-baseline",i.dominantBaseline).attr("alignment-baseline",i.alignmentBaseline),i.fontFamily!==void 0&&L.style("font-family",i.fontFamily),i.fontSize!==void 0&&L.style("font-size",i.fontSize),i.fontWeight!==void 0&&L.style("font-weight",i.fontWeight),i.fill!==void 0&&L.attr("fill",i.fill),i.class!==void 0&&L.attr("class",i.class),i.dy!==void 0?L.attr("dy",i.dy):m!==0&&L.attr("dy",m),i.tspan){const I=L.append("tspan");I.attr("x",i.x),i.fill!==void 0&&I.attr("fill",i.fill),I.text(E)}else L.text(E);i.valign!==void 0&&i.textMargin!==void 0&&i.textMargin>0&&(l+=(L._groups||L)[0][0].getBBox().height,o=l),p.push(L)}return p},rI=function(t,i){function o(h,p,m,b,x){return h+","+p+" "+(h+m)+","+p+" "+(h+m)+","+(p+b-x)+" "+(h+m-x*1.2)+","+(p+b)+" "+h+","+(p+b)}const l=t.append("polygon");return l.attr("points",o(i.x,i.y,i.width,i.height,7)),l.attr("class","labelBox"),i.y=i.y+i.height/2,y0(t,i),l};let Kc=-1;const sI=(t,i)=>{!t.selectAll||t.selectAll(".actor-line").attr("class","200").attr("y2",i-55)},tle=function(t,i,o){const l=i.x+i.width/2,h=t.append("g");var p=h;i.y===0&&(Kc++,p.append("line").attr("id","actor"+Kc).attr("x1",l).attr("y1",5).attr("x2",l).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),p=h.append("g"),i.actorCnt=Kc,i.links!=null&&(p.attr("id","root-"+Kc),tI("#root-"+Kc,Kc)));const m=vx();var b="actor";i.properties!=null&&i.properties.class?b=i.properties.class:m.fill="#eaeaea",m.x=i.x,m.y=i.y,m.width=i.width,m.height=i.height,m.class=b,m.rx=3,m.ry=3;const x=gx(p,m);if(i.rectData=m,i.properties!=null&&i.properties.icon){const L=i.properties.icon.trim();L.charAt(0)==="@"?iI(p,m.x+m.width-20,m.y+10,L.substr(1)):nI(p,m.x+m.width-20,m.y+10,L)}oI(o)(i.description,p,m.x,m.y,m.width,m.height,{class:"actor"},o);let E=i.height;if(x.node){const L=x.node().getBBox();i.height=L.height,E=L.height}return E},nle=function(t,i,o){const l=i.x+i.width/2;i.y===0&&(Kc++,t.append("line").attr("id","actor"+Kc).attr("x1",l).attr("y1",80).attr("x2",l).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const h=t.append("g");h.attr("class","actor-man");const p=vx();p.x=i.x,p.y=i.y,p.fill="#eaeaea",p.width=i.width,p.height=i.height,p.class="actor",p.rx=3,p.ry=3,h.append("line").attr("id","actor-man-torso"+Kc).attr("x1",l).attr("y1",i.y+25).attr("x2",l).attr("y2",i.y+45),h.append("line").attr("id","actor-man-arms"+Kc).attr("x1",l-18).attr("y1",i.y+33).attr("x2",l+18).attr("y2",i.y+33),h.append("line").attr("x1",l-18).attr("y1",i.y+60).attr("x2",l).attr("y2",i.y+45),h.append("line").attr("x1",l).attr("y1",i.y+45).attr("x2",l+16).attr("y2",i.y+60);const m=h.append("circle");m.attr("cx",i.x+i.width/2),m.attr("cy",i.y+10),m.attr("r",15),m.attr("width",i.width),m.attr("height",i.height);const b=h.node().getBBox();return i.height=b.height,oI(o)(i.description,h,p.x,p.y+35,p.width,p.height,{class:"actor"},o),i.height},ile=function(t,i,o){switch(i.type){case"actor":return nle(t,i,o);case"participant":return tle(t,i,o)}},rle=function(t){return t.append("g")},sle=function(t,i,o,l,h){const p=vx(),m=i.anchored;p.x=i.startx,p.y=i.starty,p.class="activation"+h%3,p.width=i.stopx-i.startx,p.height=o-i.starty,gx(m,p)},ole=function(t,i,o,l){const{boxMargin:h,boxTextMargin:p,labelBoxHeight:m,labelBoxWidth:b,messageFontFamily:x,messageFontSize:E,messageFontWeight:L}=l,I=t.append("g"),F=function(re,se,pe,he){return I.append("line").attr("x1",re).attr("y1",se).attr("x2",pe).attr("y2",he).attr("class","loopLine")};F(i.startx,i.starty,i.stopx,i.starty),F(i.stopx,i.starty,i.stopx,i.stopy),F(i.startx,i.stopy,i.stopx,i.stopy),F(i.startx,i.starty,i.startx,i.stopy),i.sections!==void 0&&i.sections.forEach(function(re){F(i.startx,re.y,i.stopx,re.y).style("stroke-dasharray","3, 3")});let W=YC();W.text=o,W.x=i.startx,W.y=i.starty,W.fontFamily=x,W.fontSize=E,W.fontWeight=L,W.anchor="middle",W.valign="middle",W.tspan=!1,W.width=b||50,W.height=m||20,W.textMargin=p,W.class="labelText",rI(I,W),W=YC(),W.text=i.title,W.x=i.startx+b/2+(i.stopx-i.startx)/2,W.y=i.starty+h+p,W.anchor="middle",W.valign="middle",W.textMargin=p,W.class="loopText",W.fontFamily=x,W.fontSize=E,W.fontWeight=L,W.wrap=!0;let K=y0(I,W);return i.sectionTitles!==void 0&&i.sectionTitles.forEach(function(re,se){if(re.message){W.text=re.message,W.x=i.startx+(i.stopx-i.startx)/2,W.y=i.sections[se].y+h+p,W.class="loopText",W.anchor="middle",W.valign="middle",W.tspan=!1,W.fontFamily=x,W.fontSize=E,W.fontWeight=L,W.wrap=i.wrap,K=y0(I,W);let pe=Math.round(K.map(he=>(he._groups||he)[0][0].getBBox().height).reduce((he,Ce)=>he+Ce));i.sections[se].height+=pe-(h+p)}}),i.height=Math.round(i.stopy-i.starty),I},ale=function(t,i){gx(t,{x:i.startx,y:i.starty,width:i.stopx-i.startx,height:i.stopy-i.starty,fill:i.fill,class:"rect"}).lower()},lle=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},cle=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},ule=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},hle=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},dle=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},fle=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},ple=function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},YC=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},vx=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},oI=function(){function t(h,p,m,b,x,E,L){const I=p.append("text").attr("x",m+x/2).attr("y",b+E/2+5).style("text-anchor","middle").text(h);l(I,L)}function i(h,p,m,b,x,E,L,I){const{actorFontSize:F,actorFontFamily:W,actorFontWeight:K}=I;let re=F&&F.replace?F.replace("px",""):F;const se=h.split(Ai.lineBreakRegex);for(let pe=0;pe<se.length;pe++){const he=pe*re-re*(se.length-1)/2,Ce=p.append("text").attr("x",m+x/2).attr("y",b).style("text-anchor","middle").style("font-size",F).style("font-weight",K).style("font-family",W);Ce.append("tspan").attr("x",m+x/2).attr("dy",he).text(se[pe]),Ce.attr("y",b+E/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),l(Ce,L)}}function o(h,p,m,b,x,E,L,I){const F=p.append("switch"),K=F.append("foreignObject").attr("x",m).attr("y",b).attr("width",x).attr("height",E).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");K.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(h),i(h,F,m,b,x,E,L,I),l(K,L)}function l(h,p){for(const m in p)p.hasOwnProperty(m)&&h.attr(m,p[m])}return function(h){return h.textPlacement==="fo"?o:h.textPlacement==="old"?t:i}}(),mle=function(){function t(h,p,m,b,x,E,L){const I=p.append("text").attr("x",m).attr("y",b).style("text-anchor","start").text(h);l(I,L)}function i(h,p,m,b,x,E,L,I){const{actorFontSize:F,actorFontFamily:W,actorFontWeight:K}=I,re=h.split(Ai.lineBreakRegex);for(let se=0;se<re.length;se++){const pe=se*F-F*(re.length-1)/2,he=p.append("text").attr("x",m).attr("y",b).style("text-anchor","start").style("font-size",F).style("font-weight",K).style("font-family",W);he.append("tspan").attr("x",m).attr("dy",pe).text(re[se]),he.attr("y",b+E/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),l(he,L)}}function o(h,p,m,b,x,E,L,I){const F=p.append("switch"),K=F.append("foreignObject").attr("x",m).attr("y",b).attr("width",x).attr("height",E).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");K.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(h),i(h,F,m,b,x,E,L,I),l(K,L)}function l(h,p){for(const m in p)p.hasOwnProperty(m)&&h.attr(m,p[m])}return function(h){return h.textPlacement==="fo"?o:h.textPlacement==="old"?t:i}}(),gs={drawRect:gx,drawText:y0,drawLabel:rI,drawActor:ile,drawPopup:Zae,drawImage:nI,drawEmbeddedImage:iI,anchorElement:rle,drawActivation:sle,drawLoop:ole,drawBackgroundRect:ale,insertArrowHead:hle,insertArrowFilledHead:dle,insertSequenceNumber:fle,insertArrowCrossHead:ple,insertDatabaseIcon:lle,insertComputerIcon:cle,insertClockIcon:ule,getTextObj:YC,getNoteRect:vx,popupMenu:Kae,popdownMenu:Jae,fixLifeLineHeights:sI,sanitizeUrl:A};let Et={};const En={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(t=>t.height||0))+(this.loops.length===0?0:this.loops.map(t=>t.height||0).reduce((t,i)=>t+i))+(this.messages.length===0?0:this.messages.map(t=>t.height||0).reduce((t,i)=>t+i))+(this.notes.length===0?0:this.notes.map(t=>t.height||0).reduce((t,i)=>t+i))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,lI(Qe())},updateVal:function(t,i,o,l){t[i]===void 0?t[i]=o:t[i]=l(o,t[i])},updateBounds:function(t,i,o,l){const h=this;let p=0;function m(b){return function(E){p++;const L=h.sequenceItems.length-p+1;h.updateVal(E,"starty",i-L*Et.boxMargin,Math.min),h.updateVal(E,"stopy",l+L*Et.boxMargin,Math.max),h.updateVal(En.data,"startx",t-L*Et.boxMargin,Math.min),h.updateVal(En.data,"stopx",o+L*Et.boxMargin,Math.max),b!=="activation"&&(h.updateVal(E,"startx",t-L*Et.boxMargin,Math.min),h.updateVal(E,"stopx",o+L*Et.boxMargin,Math.max),h.updateVal(En.data,"starty",i-L*Et.boxMargin,Math.min),h.updateVal(En.data,"stopy",l+L*Et.boxMargin,Math.max))}}this.sequenceItems.forEach(m()),this.activations.forEach(m("activation"))},insert:function(t,i,o,l){const h=Math.min(t,o),p=Math.max(t,o),m=Math.min(i,l),b=Math.max(i,l);this.updateVal(En.data,"startx",h,Math.min),this.updateVal(En.data,"starty",m,Math.min),this.updateVal(En.data,"stopx",p,Math.max),this.updateVal(En.data,"stopy",b,Math.max),this.updateBounds(h,m,p,b)},newActivation:function(t,i,o){const l=o[t.from.actor],h=yx(t.from.actor).length||0,p=l.x+l.width/2+(h-1)*Et.activationWidth/2;this.activations.push({startx:p,starty:this.verticalPos+2,stopx:p+Et.activationWidth,stopy:void 0,actor:t.from.actor,anchored:gs.anchorElement(i)})},endActivation:function(t){const i=this.activations.map(function(o){return o.actor}).lastIndexOf(t.from.actor);return this.activations.splice(i,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},i){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:i}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},i){this.sequenceItems.push(this.createLoop(t,i))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(t){const i=this.sequenceItems.pop();i.sections=i.sections||[],i.sectionTitles=i.sectionTitles||[],i.sections.push({y:En.getVerticalPos(),height:0}),i.sectionTitles.push(t),this.sequenceItems.push(i)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},gle=function(t,i){En.bumpVerticalPos(Et.boxMargin),i.height=Et.boxMargin,i.starty=En.getVerticalPos();const o=gs.getNoteRect();o.x=i.startx,o.y=i.starty,o.width=i.width||Et.width,o.class="note";const l=t.append("g"),h=gs.drawRect(l,o),p=gs.getTextObj();p.x=i.startx,p.y=i.starty,p.width=o.width,p.dy="1em",p.text=i.message,p.class="noteText",p.fontFamily=Et.noteFontFamily,p.fontSize=Et.noteFontSize,p.fontWeight=Et.noteFontWeight,p.anchor=Et.noteAlign,p.textMargin=Et.noteMargin,p.valign="center";const m=y0(l,p),b=Math.round(m.map(x=>(x._groups||x)[0][0].getBBox().height).reduce((x,E)=>x+E));h.attr("height",b+2*Et.noteMargin),i.height+=b+2*Et.noteMargin,En.bumpVerticalPos(b+2*Et.noteMargin),i.stopy=i.starty+b+2*Et.noteMargin,i.stopx=i.startx+o.width,En.insert(i.startx,i.starty,i.stopx,i.stopy),En.models.addNote(i)},_0=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),b0=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),jC=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight});function vle(t,i){En.bumpVerticalPos(10);const{startx:o,stopx:l,message:h}=i,p=Ai.splitBreaks(h).length,m=Ii.calculateTextDimensions(h,_0(Et)),b=m.height/p;i.height+=b,En.bumpVerticalPos(b);let x,E=m.height-10;const L=m.width;if(o===l){x=En.getVerticalPos()+E,Et.rightAngles||(E+=Et.boxMargin,x=En.getVerticalPos()+E),E+=30;const I=Math.max(L/2,Et.width/2);En.insert(o-I,En.getVerticalPos()-10+E,l+I,En.getVerticalPos()+30+E)}else E+=Et.boxMargin,x=En.getVerticalPos()+E,En.insert(o,x-10,l,x);return En.bumpVerticalPos(E),i.height+=E,i.stopy=i.starty+i.height,En.insert(i.fromBounds,i.starty,i.toBounds,i.stopy),x}const yle=function(t,i,o,l){const{startx:h,stopx:p,starty:m,message:b,type:x,sequenceIndex:E,sequenceVisible:L}=i,I=Ii.calculateTextDimensions(b,_0(Et)),F=gs.getTextObj();F.x=h,F.y=m+10,F.width=p-h,F.class="messageText",F.dy="1em",F.text=b,F.fontFamily=Et.messageFontFamily,F.fontSize=Et.messageFontSize,F.fontWeight=Et.messageFontWeight,F.anchor=Et.messageAlign,F.valign="center",F.textMargin=Et.wrapPadding,F.tspan=!1,y0(t,F);const W=I.width;let K;h===p?Et.rightAngles?K=t.append("path").attr("d",`M  ${h},${o} H ${h+Math.max(Et.width/2,W/2)} V ${o+25} H ${h}`):K=t.append("path").attr("d","M "+h+","+o+" C "+(h+60)+","+(o-10)+" "+(h+60)+","+(o+30)+" "+h+","+(o+20)):(K=t.append("line"),K.attr("x1",h),K.attr("y1",o),K.attr("x2",p),K.attr("y2",o)),x===l.db.LINETYPE.DOTTED||x===l.db.LINETYPE.DOTTED_CROSS||x===l.db.LINETYPE.DOTTED_POINT||x===l.db.LINETYPE.DOTTED_OPEN?(K.style("stroke-dasharray","3, 3"),K.attr("class","messageLine1")):K.attr("class","messageLine0");let re="";Et.arrowMarkerAbsolute&&(re=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,re=re.replace(/\(/g,"\\("),re=re.replace(/\)/g,"\\)")),K.attr("stroke-width",2),K.attr("stroke","none"),K.style("fill","none"),(x===l.db.LINETYPE.SOLID||x===l.db.LINETYPE.DOTTED)&&K.attr("marker-end","url("+re+"#arrowhead)"),(x===l.db.LINETYPE.SOLID_POINT||x===l.db.LINETYPE.DOTTED_POINT)&&K.attr("marker-end","url("+re+"#filled-head)"),(x===l.db.LINETYPE.SOLID_CROSS||x===l.db.LINETYPE.DOTTED_CROSS)&&K.attr("marker-end","url("+re+"#crosshead)"),(L||Et.showSequenceNumbers)&&(K.attr("marker-start","url("+re+"#sequencenumber)"),t.append("text").attr("x",h).attr("y",o+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(E))},$C=function(t,i,o,l,h,p){if(h.hideUnusedParticipants===!0){const E=new Set;p.forEach(L=>{E.add(L.from),E.add(L.to)}),o=o.filter(L=>E.has(L))}let m=0,b=0,x=0;for(const E of o){const L=i[E];L.width=L.width||Et.width,L.height=Math.max(L.height||Et.height,Et.height),L.margin=L.margin||Et.actorMargin,L.x=m+b,L.y=l;const I=gs.drawActor(t,L,Et);x=Math.max(x,I),En.insert(L.x,l,L.x+L.width,L.height),m+=L.width,b+=L.margin,En.models.addActor(L)}En.bumpVerticalPos(x)},aI=function(t,i,o,l){let h=0,p=0;for(const m of o){const b=i[m],x=xle(b),E=gs.drawPopup(t,b,x,Et,Et.forceMenus,l);E.height>h&&(h=E.height),E.width+b.x>p&&(p=E.width+b.x)}return{maxHeight:h,maxWidth:p}},lI=function(t){co(Et,t),t.fontFamily&&(Et.actorFontFamily=Et.noteFontFamily=Et.messageFontFamily=t.fontFamily),t.fontSize&&(Et.actorFontSize=Et.noteFontSize=Et.messageFontSize=t.fontSize),t.fontWeight&&(Et.actorFontWeight=Et.noteFontWeight=Et.messageFontWeight=t.fontWeight)},yx=function(t){return En.activations.filter(function(i){return i.actor===t})},cI=function(t,i){const o=i[t],l=yx(t),h=l.reduce(function(m,b){return Math.min(m,b.startx)},o.x+o.width/2),p=l.reduce(function(m,b){return Math.max(m,b.stopx)},o.x+o.width/2);return[h,p]};function Jc(t,i,o,l,h){En.bumpVerticalPos(o);let p=l;if(i.id&&i.message&&t[i.id]){const m=t[i.id].width,b=_0(Et);i.message=Ii.wrapLabel(`[${i.message}]`,m-2*Et.wrapPadding,b),i.width=m,i.wrap=!0;const x=Ii.calculateTextDimensions(i.message,b),E=Math.max(x.height,Et.labelBoxHeight);p=l+E,y.debug(`${E} - ${i.message}`)}h(i),En.bumpVerticalPos(p)}const _le=function(t,i,o,l){const{securityLevel:h,sequence:p}=Qe();Et=p;let m;h==="sandbox"&&(m=dn("#i"+i));const b=dn(h==="sandbox"?m.nodes()[0].contentDocument.body:"body"),x=h==="sandbox"?m.nodes()[0].contentDocument:document;En.init(),y.debug(l.db);const E=h==="sandbox"?b.select(`[id="${i}"]`):dn(`[id="${i}"]`),L=l.db.getActors(),I=l.db.getActorKeys(),F=l.db.getMessages(),W=l.db.getDiagramTitle(),K=ble(L,F,l);Et.height=wle(L,K),gs.insertComputerIcon(E),gs.insertDatabaseIcon(E),gs.insertClockIcon(E),$C(E,L,I,0,Et,F);const re=Sle(F,L,K,l);gs.insertArrowHead(E),gs.insertArrowCrossHead(E),gs.insertArrowFilledHead(E),gs.insertSequenceNumber(E);function se(te,be){const q=En.endActivation(te);q.starty+18>be&&(q.starty=be-6,be+=12),gs.drawActivation(E,q,be,Et,yx(te.from.actor).length),En.insert(q.startx,be-10,q.stopx,be)}let pe=1,he=1;const Ce=[];F.forEach(function(te){let be,q,ot;switch(te.type){case l.db.LINETYPE.NOTE:q=te.noteModel,gle(E,q);break;case l.db.LINETYPE.ACTIVE_START:En.newActivation(te,E,L);break;case l.db.LINETYPE.ACTIVE_END:se(te,En.getVerticalPos());break;case l.db.LINETYPE.LOOP_START:Jc(re,te,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,Z=>En.newLoop(Z));break;case l.db.LINETYPE.LOOP_END:be=En.endLoop(),gs.drawLoop(E,be,"loop",Et),En.bumpVerticalPos(be.stopy-En.getVerticalPos()),En.models.addLoop(be);break;case l.db.LINETYPE.RECT_START:Jc(re,te,Et.boxMargin,Et.boxMargin,Z=>En.newLoop(void 0,Z.message));break;case l.db.LINETYPE.RECT_END:be=En.endLoop(),gs.drawBackgroundRect(E,be),En.models.addLoop(be),En.bumpVerticalPos(be.stopy-En.getVerticalPos());break;case l.db.LINETYPE.OPT_START:Jc(re,te,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,Z=>En.newLoop(Z));break;case l.db.LINETYPE.OPT_END:be=En.endLoop(),gs.drawLoop(E,be,"opt",Et),En.bumpVerticalPos(be.stopy-En.getVerticalPos()),En.models.addLoop(be);break;case l.db.LINETYPE.ALT_START:Jc(re,te,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,Z=>En.newLoop(Z));break;case l.db.LINETYPE.ALT_ELSE:Jc(re,te,Et.boxMargin+Et.boxTextMargin,Et.boxMargin,Z=>En.addSectionToLoop(Z));break;case l.db.LINETYPE.ALT_END:be=En.endLoop(),gs.drawLoop(E,be,"alt",Et),En.bumpVerticalPos(be.stopy-En.getVerticalPos()),En.models.addLoop(be);break;case l.db.LINETYPE.PAR_START:Jc(re,te,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,Z=>En.newLoop(Z));break;case l.db.LINETYPE.PAR_AND:Jc(re,te,Et.boxMargin+Et.boxTextMargin,Et.boxMargin,Z=>En.addSectionToLoop(Z));break;case l.db.LINETYPE.PAR_END:be=En.endLoop(),gs.drawLoop(E,be,"par",Et),En.bumpVerticalPos(be.stopy-En.getVerticalPos()),En.models.addLoop(be);break;case l.db.LINETYPE.AUTONUMBER:pe=te.message.start||pe,he=te.message.step||he,te.message.visible?l.db.enableSequenceNumbers():l.db.disableSequenceNumbers();break;case l.db.LINETYPE.CRITICAL_START:Jc(re,te,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,Z=>En.newLoop(Z));break;case l.db.LINETYPE.CRITICAL_OPTION:Jc(re,te,Et.boxMargin+Et.boxTextMargin,Et.boxMargin,Z=>En.addSectionToLoop(Z));break;case l.db.LINETYPE.CRITICAL_END:be=En.endLoop(),gs.drawLoop(E,be,"critical",Et),En.bumpVerticalPos(be.stopy-En.getVerticalPos()),En.models.addLoop(be);break;case l.db.LINETYPE.BREAK_START:Jc(re,te,Et.boxMargin,Et.boxMargin+Et.boxTextMargin,Z=>En.newLoop(Z));break;case l.db.LINETYPE.BREAK_END:be=En.endLoop(),gs.drawLoop(E,be,"break",Et),En.bumpVerticalPos(be.stopy-En.getVerticalPos()),En.models.addLoop(be);break;default:try{ot=te.msgModel,ot.starty=En.getVerticalPos(),ot.sequenceIndex=pe,ot.sequenceVisible=l.db.showSequenceNumbers();const Z=vle(E,ot);Ce.push({messageModel:ot,lineStartY:Z}),En.models.addMessage(ot)}catch(Z){y.error("error while drawing message",Z)}}[l.db.LINETYPE.SOLID_OPEN,l.db.LINETYPE.DOTTED_OPEN,l.db.LINETYPE.SOLID,l.db.LINETYPE.DOTTED,l.db.LINETYPE.SOLID_CROSS,l.db.LINETYPE.DOTTED_CROSS,l.db.LINETYPE.SOLID_POINT,l.db.LINETYPE.DOTTED_POINT].includes(te.type)&&(pe=pe+he)}),Ce.forEach(te=>yle(E,te.messageModel,te.lineStartY,l)),Et.mirrorActors&&(En.bumpVerticalPos(Et.boxMargin*2),$C(E,L,I,En.getVerticalPos(),Et,F),En.bumpVerticalPos(Et.boxMargin),sI(E,En.getVerticalPos()));const Le=aI(E,L,I,x),{bounds:Ve}=En.getBounds();y.debug("For line height fix Querying: #"+i+" .actor-line"),Lo("#"+i+" .actor-line").attr("y2",Ve.stopy);let Pe=Ve.stopy-Ve.starty;Pe<Le.maxHeight&&(Pe=Le.maxHeight);let ze=Pe+2*Et.diagramMarginY;Et.mirrorActors&&(ze=ze-Et.boxMargin+Et.bottomMarginAdj);let xe=Ve.stopx-Ve.startx;xe<Le.maxWidth&&(xe=Le.maxWidth);const _e=xe+2*Et.diagramMarginX;W&&E.append("text").text(W).attr("x",(Ve.stopx-Ve.startx)/2-2*Et.diagramMarginX).attr("y",-25),Hl(E,ze,_e,Et.useMaxWidth);const de=W?40:0;E.attr("viewBox",Ve.startx-Et.diagramMarginX+" -"+(Et.diagramMarginY+de)+" "+_e+" "+(ze+de)),y.debug("models:",En.models)};function ble(t,i,o){const l={};return i.forEach(function(h){if(t[h.to]&&t[h.from]){const p=t[h.to];if(h.placement===o.db.PLACEMENT.LEFTOF&&!p.prevActor||h.placement===o.db.PLACEMENT.RIGHTOF&&!p.nextActor)return;const m=h.placement!==void 0,b=!m,x=m?b0(Et):_0(Et),E=h.wrap?Ii.wrapLabel(h.message,Et.width-2*Et.wrapPadding,x):h.message,I=Ii.calculateTextDimensions(E,x).width+2*Et.wrapPadding;b&&h.from===p.nextActor?l[h.to]=Math.max(l[h.to]||0,I):b&&h.from===p.prevActor?l[h.from]=Math.max(l[h.from]||0,I):b&&h.from===h.to?(l[h.from]=Math.max(l[h.from]||0,I/2),l[h.to]=Math.max(l[h.to]||0,I/2)):h.placement===o.db.PLACEMENT.RIGHTOF?l[h.from]=Math.max(l[h.from]||0,I):h.placement===o.db.PLACEMENT.LEFTOF?l[p.prevActor]=Math.max(l[p.prevActor]||0,I):h.placement===o.db.PLACEMENT.OVER&&(p.prevActor&&(l[p.prevActor]=Math.max(l[p.prevActor]||0,I/2)),p.nextActor&&(l[h.from]=Math.max(l[h.from]||0,I/2)))}}),y.debug("maxMessageWidthPerActor:",l),l}const xle=function(t){let i=0;const o=jC(Et);for(const l in t.links){const p=Ii.calculateTextDimensions(l,o).width+2*Et.wrapPadding+2*Et.boxMargin;i<p&&(i=p)}return i};function wle(t,i){let o=0;Object.keys(t).forEach(l=>{const h=t[l];h.wrap&&(h.description=Ii.wrapLabel(h.description,Et.width-2*Et.wrapPadding,jC(Et)));const p=Ii.calculateTextDimensions(h.description,jC(Et));h.width=h.wrap?Et.width:Math.max(Et.width,p.width+2*Et.wrapPadding),h.height=h.wrap?Math.max(p.height,Et.height):Et.height,o=Math.max(o,h.height)});for(const l in i){const h=t[l];if(!h)continue;const p=t[h.nextActor];if(!p)continue;const b=i[l]+Et.actorMargin-h.width/2-p.width/2;h.margin=Math.max(b,Et.actorMargin)}return Math.max(o,Et.height)}const kle=function(t,i,o){const l=i[t.from].x,h=i[t.to].x,p=t.wrap&&t.message;let m=Ii.calculateTextDimensions(p?Ii.wrapLabel(t.message,Et.width,b0(Et)):t.message,b0(Et));const b={width:p?Et.width:Math.max(Et.width,m.width+2*Et.noteMargin),height:0,startx:i[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===o.db.PLACEMENT.RIGHTOF?(b.width=p?Math.max(Et.width,m.width):Math.max(i[t.from].width/2+i[t.to].width/2,m.width+2*Et.noteMargin),b.startx=l+(i[t.from].width+Et.actorMargin)/2):t.placement===o.db.PLACEMENT.LEFTOF?(b.width=Math.max(p?Et.width:i[t.from].width/2+i[t.to].width/2,m.width+2*Et.noteMargin),b.startx=l-b.width+(i[t.from].width-Et.actorMargin)/2):t.to===t.from?(m=Ii.calculateTextDimensions(p?Ii.wrapLabel(t.message,Math.max(Et.width,i[t.from].width),b0(Et)):t.message,b0(Et)),b.width=p?Math.max(Et.width,i[t.from].width):Math.max(i[t.from].width,Et.width,m.width+2*Et.noteMargin),b.startx=l+(i[t.from].width-b.width)/2):(b.width=Math.abs(l+i[t.from].width/2-(h+i[t.to].width/2))+Et.actorMargin,b.startx=l<h?l+i[t.from].width/2-Et.actorMargin/2:h+i[t.to].width/2-Et.actorMargin/2),p&&(b.message=Ii.wrapLabel(t.message,b.width-2*Et.wrapPadding,b0(Et))),y.debug(`NM:[${b.startx},${b.stopx},${b.starty},${b.stopy}:${b.width},${b.height}=${t.message}]`),b},Cle=function(t,i,o){let l=!1;if([o.db.LINETYPE.SOLID_OPEN,o.db.LINETYPE.DOTTED_OPEN,o.db.LINETYPE.SOLID,o.db.LINETYPE.DOTTED,o.db.LINETYPE.SOLID_CROSS,o.db.LINETYPE.DOTTED_CROSS,o.db.LINETYPE.SOLID_POINT,o.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(l=!0),!l)return{};const h=cI(t.from,i),p=cI(t.to,i),m=h[0]<=p[0]?1:0,b=h[0]<p[0]?0:1,x=[...h,...p],E=Math.abs(p[b]-h[m]);t.wrap&&t.message&&(t.message=Ii.wrapLabel(t.message,Math.max(E+2*Et.wrapPadding,Et.width),_0(Et)));const L=Ii.calculateTextDimensions(t.message,_0(Et));return{width:Math.max(t.wrap?0:L.width+2*Et.wrapPadding,E+2*Et.wrapPadding,Et.width),height:0,startx:h[m],stopx:p[b],starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,x),toBounds:Math.max.apply(null,x)}},Sle=function(t,i,o,l){const h={},p=[];let m,b,x;return t.forEach(function(E){switch(E.id=Ii.random({length:10}),E.type){case l.db.LINETYPE.LOOP_START:case l.db.LINETYPE.ALT_START:case l.db.LINETYPE.OPT_START:case l.db.LINETYPE.PAR_START:case l.db.LINETYPE.CRITICAL_START:case l.db.LINETYPE.BREAK_START:p.push({id:E.id,msg:E.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case l.db.LINETYPE.ALT_ELSE:case l.db.LINETYPE.PAR_AND:case l.db.LINETYPE.CRITICAL_OPTION:E.message&&(m=p.pop(),h[m.id]=m,h[E.id]=m,p.push(m));break;case l.db.LINETYPE.LOOP_END:case l.db.LINETYPE.ALT_END:case l.db.LINETYPE.OPT_END:case l.db.LINETYPE.PAR_END:case l.db.LINETYPE.CRITICAL_END:case l.db.LINETYPE.BREAK_END:m=p.pop(),h[m.id]=m;break;case l.db.LINETYPE.ACTIVE_START:{const I=i[E.from?E.from.actor:E.to.actor],F=yx(E.from?E.from.actor:E.to.actor).length,W=I.x+I.width/2+(F-1)*Et.activationWidth/2,K={startx:W,stopx:W+Et.activationWidth,actor:E.from.actor,enabled:!0};En.activations.push(K)}break;case l.db.LINETYPE.ACTIVE_END:{const I=En.activations.map(F=>F.actor).lastIndexOf(E.from.actor);delete En.activations.splice(I,1)[0]}break}E.placement!==void 0?(b=kle(E,i,l),E.noteModel=b,p.forEach(I=>{m=I,m.from=Math.min(m.from,b.startx),m.to=Math.max(m.to,b.startx+b.width),m.width=Math.max(m.width,Math.abs(m.from-m.to))-Et.labelBoxWidth})):(x=Cle(E,i,l),E.msgModel=x,x.startx&&x.stopx&&p.length>0&&p.forEach(I=>{if(m=I,x.startx===x.stopx){const F=i[E.from],W=i[E.to];m.from=Math.min(F.x-x.width/2,F.x-F.width/2,m.from),m.to=Math.max(W.x+x.width/2,W.x+F.width/2,m.to),m.width=Math.max(m.width,Math.abs(m.to-m.from))-Et.labelBoxWidth}else m.from=Math.min(x.startx,m.from),m.to=Math.max(x.stopx,m.to),m.width=Math.max(m.width,x.width)-Et.labelBoxWidth}))}),En.activations=[],y.debug("Loop type widths:",h),h},uI={bounds:En,drawActors:$C,drawActorsPopup:aI,setConf:lI,draw:_le};var qC=function(){var t=function(Je,kt,mt,vt){for(mt=mt||{},vt=Je.length;vt--;mt[Je[vt]]=kt);return mt},i=[1,2],o=[1,3],l=[1,5],h=[1,7],p=[2,5],m=[1,15],b=[1,17],x=[1,21],E=[1,22],L=[1,23],I=[1,24],F=[1,37],W=[1,25],K=[1,26],re=[1,27],se=[1,28],pe=[1,29],he=[1,32],Ce=[1,33],Le=[1,34],Ve=[1,35],je=[1,36],Pe=[1,39],ze=[1,40],xe=[1,41],_e=[1,42],de=[1,38],te=[1,45],be=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],q=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],ot=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],Z=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],Dt={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(kt,mt,vt,Pt,rn,nt,Ln){var Ie=nt.length-1;switch(rn){case 4:return Pt.setRootDoc(nt[Ie]),nt[Ie];case 5:this.$=[];break;case 6:nt[Ie]!="nl"&&(nt[Ie-1].push(nt[Ie]),this.$=nt[Ie-1]);break;case 7:case 8:this.$=nt[Ie];break;case 9:this.$="nl";break;case 12:this.$=nt[Ie];break;case 13:const ke=nt[Ie-1];ke.description=Pt.trimColon(nt[Ie]),this.$=ke;break;case 14:this.$={stmt:"relation",state1:nt[Ie-2],state2:nt[Ie]};break;case 15:const ge=Pt.trimColon(nt[Ie]);this.$={stmt:"relation",state1:nt[Ie-3],state2:nt[Ie-1],description:ge};break;case 19:this.$={stmt:"state",id:nt[Ie-3],type:"default",description:"",doc:nt[Ie-1]};break;case 20:var Be=nt[Ie],et=nt[Ie-2].trim();if(nt[Ie].match(":")){var Me=nt[Ie].split(":");Be=Me[0],et=[et,Me[1]]}this.$={stmt:"state",id:Be,type:"default",description:et};break;case 21:this.$={stmt:"state",id:nt[Ie-3],type:"default",description:nt[Ie-5],doc:nt[Ie-1]};break;case 22:this.$={stmt:"state",id:nt[Ie],type:"fork"};break;case 23:this.$={stmt:"state",id:nt[Ie],type:"join"};break;case 24:this.$={stmt:"state",id:nt[Ie],type:"choice"};break;case 25:this.$={stmt:"state",id:Pt.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:nt[Ie-1].trim(),note:{position:nt[Ie-2].trim(),text:nt[Ie].trim()}};break;case 30:this.$=nt[Ie].trim(),Pt.setAccTitle(this.$);break;case 31:case 32:this.$=nt[Ie].trim(),Pt.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:nt[Ie-1].trim(),classes:nt[Ie].trim()};break;case 35:this.$={stmt:"applyClass",id:nt[Ie-1].trim(),styleClass:nt[Ie].trim()};break;case 38:Pt.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:Pt.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:Pt.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:Pt.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:nt[Ie].trim(),type:"default",description:""};break;case 46:this.$={stmt:"state",id:nt[Ie-2].trim(),classes:[nt[Ie].trim()],type:"default",description:""};break;case 47:this.$={stmt:"state",id:nt[Ie-2].trim(),classes:[nt[Ie].trim()],type:"default",description:""};break;case 50:Pt.parseDirective("%%{","open_directive");break;case 51:Pt.parseDirective(nt[Ie],"type_directive");break;case 52:nt[Ie]=nt[Ie].trim().replace(/'/g,'"'),Pt.parseDirective(nt[Ie],"arg_directive");break;case 53:Pt.parseDirective("}%%","close_directive","state");break}},table:[{3:1,4:i,5:o,6:4,7:l,45:6,60:h},{1:[3]},{3:8,4:i,5:o,6:4,7:l,45:6,60:h},{3:9,4:i,5:o,6:4,7:l,45:6,60:h},{3:10,4:i,5:o,6:4,7:l,45:6,60:h},t([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],p,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:m,5:b,6:30,9:14,10:16,11:18,12:19,13:20,16:x,17:E,19:L,22:I,24:F,25:W,26:K,27:re,28:se,29:pe,32:31,33:he,35:Ce,37:Le,38:Ve,42:je,45:6,50:Pe,51:ze,52:xe,53:_e,56:de,60:h},{47:43,48:[1,44],63:te},t([48,63],[2,51]),t(be,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:x,17:E,19:L,22:I,24:F,25:W,26:K,27:re,28:se,29:pe,32:31,33:he,35:Ce,37:Le,38:Ve,42:je,45:6,50:Pe,51:ze,52:xe,53:_e,56:de,60:h},t(be,[2,8]),t(be,[2,9]),t(be,[2,10]),t(be,[2,11]),t(be,[2,12],{14:[1,47],15:[1,48]}),t(be,[2,16]),{18:[1,49]},t(be,[2,18],{20:[1,50]}),{23:[1,51]},t(be,[2,22]),t(be,[2,23]),t(be,[2,24]),t(be,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},t(be,[2,28]),t(be,[2,29]),{34:[1,56]},{36:[1,57]},t(be,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},t(q,[2,44],{57:[1,61]}),t(q,[2,45],{57:[1,62]}),t(be,[2,38]),t(be,[2,39]),t(be,[2,40]),t(be,[2,41]),t(ot,[2,36]),{49:63,62:[1,64]},t(ot,[2,53]),t(be,[2,7]),t(be,[2,13]),{13:65,24:F,56:de},t(be,[2,17]),t(Z,p,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},t(be,[2,30]),t(be,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:te},{63:[2,52]},t(be,[2,14],{14:[1,76]}),{4:m,5:b,6:30,9:14,10:16,11:18,12:19,13:20,16:x,17:E,19:L,21:[1,77],22:I,24:F,25:W,26:K,27:re,28:se,29:pe,32:31,33:he,35:Ce,37:Le,38:Ve,42:je,45:6,50:Pe,51:ze,52:xe,53:_e,56:de,60:h},t(be,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},t(be,[2,33]),t(be,[2,34]),t(be,[2,35]),t(q,[2,46]),t(q,[2,47]),t(ot,[2,37]),t(be,[2,15]),t(be,[2,19]),t(Z,p,{8:81}),t(be,[2,26]),t(be,[2,27]),{4:m,5:b,6:30,9:14,10:16,11:18,12:19,13:20,16:x,17:E,19:L,21:[1,82],22:I,24:F,25:W,26:K,27:re,28:se,29:pe,32:31,33:he,35:Ce,37:Le,38:Ve,42:je,45:6,50:Pe,51:ze,52:xe,53:_e,56:de,60:h},t(be,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(kt,mt){if(mt.recoverable)this.trace(kt);else{var vt=new Error(kt);throw vt.hash=mt,vt}},parse:function(kt){var mt=this,vt=[0],Pt=[],rn=[null],nt=[],Ln=this.table,Ie="",Be=0,et=0,Me=2,ke=1,ge=nt.slice.call(arguments,1),ct=Object.create(this.lexer),le={yy:{}};for(var Ft in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ft)&&(le.yy[Ft]=this.yy[Ft]);ct.setInput(kt,le.yy),le.yy.lexer=ct,le.yy.parser=this,typeof ct.yylloc>"u"&&(ct.yylloc={});var Oe=ct.yylloc;nt.push(Oe);var Wn=ct.options&&ct.options.ranges;typeof le.yy.parseError=="function"?this.parseError=le.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function dt(){var ii;return ii=Pt.pop()||ct.lex()||ke,typeof ii!="number"&&(ii instanceof Array&&(Pt=ii,ii=Pt.pop()),ii=mt.symbols_[ii]||ii),ii}for(var Cn,un,Kt,hn,cn={},qt,_t,Si,ni;;){if(un=vt[vt.length-1],this.defaultActions[un]?Kt=this.defaultActions[un]:((Cn===null||typeof Cn>"u")&&(Cn=dt()),Kt=Ln[un]&&Ln[un][Cn]),typeof Kt>"u"||!Kt.length||!Kt[0]){var ei="";ni=[];for(qt in Ln[un])this.terminals_[qt]&&qt>Me&&ni.push("'"+this.terminals_[qt]+"'");ct.showPosition?ei="Parse error on line "+(Be+1)+`:
`+ct.showPosition()+`
Expecting `+ni.join(", ")+", got '"+(this.terminals_[Cn]||Cn)+"'":ei="Parse error on line "+(Be+1)+": Unexpected "+(Cn==ke?"end of input":"'"+(this.terminals_[Cn]||Cn)+"'"),this.parseError(ei,{text:ct.match,token:this.terminals_[Cn]||Cn,line:ct.yylineno,loc:Oe,expected:ni})}if(Kt[0]instanceof Array&&Kt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+un+", token: "+Cn);switch(Kt[0]){case 1:vt.push(Cn),rn.push(ct.yytext),nt.push(ct.yylloc),vt.push(Kt[1]),Cn=null,et=ct.yyleng,Ie=ct.yytext,Be=ct.yylineno,Oe=ct.yylloc;break;case 2:if(_t=this.productions_[Kt[1]][1],cn.$=rn[rn.length-_t],cn._$={first_line:nt[nt.length-(_t||1)].first_line,last_line:nt[nt.length-1].last_line,first_column:nt[nt.length-(_t||1)].first_column,last_column:nt[nt.length-1].last_column},Wn&&(cn._$.range=[nt[nt.length-(_t||1)].range[0],nt[nt.length-1].range[1]]),hn=this.performAction.apply(cn,[Ie,et,Be,le.yy,Kt[1],rn,nt].concat(ge)),typeof hn<"u")return hn;_t&&(vt=vt.slice(0,-1*_t*2),rn=rn.slice(0,-1*_t),nt=nt.slice(0,-1*_t)),vt.push(this.productions_[Kt[1]][0]),rn.push(cn.$),nt.push(cn._$),Si=Ln[vt[vt.length-2]][vt[vt.length-1]],vt.push(Si);break;case 3:return!0}}return!0}},xn=function(){var Je={EOF:1,parseError:function(mt,vt){if(this.yy.parser)this.yy.parser.parseError(mt,vt);else throw new Error(mt)},setInput:function(kt,mt){return this.yy=mt||this.yy||{},this._input=kt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var kt=this._input[0];this.yytext+=kt,this.yyleng++,this.offset++,this.match+=kt,this.matched+=kt;var mt=kt.match(/(?:\r\n?|\n).*/g);return mt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),kt},unput:function(kt){var mt=kt.length,vt=kt.split(/(?:\r\n?|\n)/g);this._input=kt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-mt),this.offset-=mt;var Pt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),vt.length-1&&(this.yylineno-=vt.length-1);var rn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:vt?(vt.length===Pt.length?this.yylloc.first_column:0)+Pt[Pt.length-vt.length].length-vt[0].length:this.yylloc.first_column-mt},this.options.ranges&&(this.yylloc.range=[rn[0],rn[0]+this.yyleng-mt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(kt){this.unput(this.match.slice(kt))},pastInput:function(){var kt=this.matched.substr(0,this.matched.length-this.match.length);return(kt.length>20?"...":"")+kt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var kt=this.match;return kt.length<20&&(kt+=this._input.substr(0,20-kt.length)),(kt.substr(0,20)+(kt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var kt=this.pastInput(),mt=new Array(kt.length+1).join("-");return kt+this.upcomingInput()+`
`+mt+"^"},test_match:function(kt,mt){var vt,Pt,rn;if(this.options.backtrack_lexer&&(rn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(rn.yylloc.range=this.yylloc.range.slice(0))),Pt=kt[0].match(/(?:\r\n?|\n).*/g),Pt&&(this.yylineno+=Pt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Pt?Pt[Pt.length-1].length-Pt[Pt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+kt[0].length},this.yytext+=kt[0],this.match+=kt[0],this.matches=kt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(kt[0].length),this.matched+=kt[0],vt=this.performAction.call(this,this.yy,this,mt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),vt)return vt;if(this._backtrack){for(var nt in rn)this[nt]=rn[nt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var kt,mt,vt,Pt;this._more||(this.yytext="",this.match="");for(var rn=this._currentRules(),nt=0;nt<rn.length;nt++)if(vt=this._input.match(this.rules[rn[nt]]),vt&&(!mt||vt[0].length>mt[0].length)){if(mt=vt,Pt=nt,this.options.backtrack_lexer){if(kt=this.test_match(vt,rn[nt]),kt!==!1)return kt;if(this._backtrack){mt=!1;continue}else return!1}else if(!this.options.flex)break}return mt?(kt=this.test_match(mt,rn[Pt]),kt!==!1?kt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var mt=this.next();return mt||this.lex()},begin:function(mt){this.conditionStack.push(mt)},popState:function(){var mt=this.conditionStack.length-1;return mt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(mt){return mt=this.conditionStack.length-1-Math.abs(mt||0),mt>=0?this.conditionStack[mt]:"INITIAL"},pushState:function(mt){this.begin(mt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(mt,vt,Pt,rn){switch(Pt){case 0:return 41;case 1:return 50;case 2:return 51;case 3:return 52;case 4:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:break;case 11:break;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:break;case 17:return this.pushState("SCALE"),17;case 18:return 18;case 19:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 25:this.popState();break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 34:return this.pushState("SCALE"),17;case 35:return 18;case 36:this.popState();break;case 37:this.pushState("STATE");break;case 38:return this.popState(),vt.yytext=vt.yytext.slice(0,-8).trim(),25;case 39:return this.popState(),vt.yytext=vt.yytext.slice(0,-8).trim(),26;case 40:return this.popState(),vt.yytext=vt.yytext.slice(0,-10).trim(),27;case 41:return this.popState(),vt.yytext=vt.yytext.slice(0,-8).trim(),25;case 42:return this.popState(),vt.yytext=vt.yytext.slice(0,-8).trim(),26;case 43:return this.popState(),vt.yytext=vt.yytext.slice(0,-10).trim(),27;case 44:return 50;case 45:return 51;case 46:return 52;case 47:return 53;case 48:this.begin("STATE_STRING");break;case 49:return this.popState(),this.pushState("STATE_ID"),"AS";case 50:return this.popState(),"ID";case 51:this.popState();break;case 52:return"STATE_DESCR";case 53:return 19;case 54:this.popState();break;case 55:return this.popState(),this.pushState("struct"),20;case 56:break;case 57:return this.popState(),21;case 58:break;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 64:break;case 65:return"NOTE_TEXT";case 66:return this.popState(),"ID";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),vt.yytext=vt.yytext.substr(2).trim(),31;case 69:return this.popState(),vt.yytext=vt.yytext.slice(0,-8).trim(),31;case 70:return 7;case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return vt.yytext=vt.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 79:return 5;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};return Je}();Dt.lexer=xn;function ln(){this.yy={}}return ln.prototype=Dt,Dt.Parser=ln,new ln}();qC.parser=qC;const hI=qC,Ele=(t,i)=>{var o;return((o=i==null?void 0:i.state)==null?void 0:o.defaultRenderer)==="dagre-wrapper"?!1:t.match(/^\s*stateDiagram/)!==null},Tle=(t,i)=>{var o;return!!(t.match(/^\s*stateDiagram-v2/)!==null||t.match(/^\s*stateDiagram/)&&((o=i==null?void 0:i.state)==null?void 0:o.defaultRenderer)==="dagre-wrapper")},Mle="LR",Ale="TB",_x="state",XC="relation",Lle="classDef",Rle="applyClass",Iv="default",dI="divider",ZC="[*]",fI="start",pI=ZC,mI="end",gI="color",vI="fill",Ple="bgFill",Ile=",";function yI(){return{}}let _I=Mle,bx=[],Dv=yI();const bI=()=>({relations:[],states:{},documents:{}});let xx={root:bI()},Fo=xx.root,Nv=0,xI=0;const Dle={LINE:0,DOTTED_LINE:1},Nle={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},wx=t=>JSON.parse(JSON.stringify(t)),Ole=function(t,i,o){ss.parseDirective(this,t,i,o)},Fle=t=>{y.info("Setting root doc",t),bx=t},Ble=()=>bx,kx=(t,i,o)=>{if(i.stmt===XC)kx(t,i.state1,!0),kx(t,i.state2,!1);else if(i.stmt===_x&&i.id==="[*]"&&(i.id=o?t.id+"_start":t.id+"_end",i.start=o),i.doc){const l=[];let h=[],p;for(p=0;p<i.doc.length;p++)if(i.doc[p].type===dI){const m=wx(i.doc[p]);m.doc=wx(h),l.push(m),h=[]}else h.push(i.doc[p]);if(l.length>0&&h.length>0){const m={stmt:_x,id:U8(),type:"divider",doc:wx(h)};l.push(wx(m)),i.doc=l}i.doc.forEach(m=>kx(i,m,!0))}},Vle=()=>(kx({id:"root"},{id:"root",doc:bx},!0),{id:"root",doc:bx}),Wle=t=>{let i;t.doc?i=t.doc:i=t,y.info(i),wI(!0),y.info("Extract",i),i.forEach(o=>{switch(o.stmt){case _x:jf(o.id,o.type,o.doc,o.description,o.note,o.classes,o.styles,o.textStyles);break;case XC:kI(o.state1,o.state2,o.description);break;case Lle:CI(o.id,o.classes);break;case Rle:eS(o.id,o.styleClass);break}})},jf=function(t,i=Iv,o=null,l=null,h=null,p=null,m=null,b=null){Fo.states[t]===void 0?(y.info("Adding state ",t,l),Fo.states[t]={id:t,descriptions:[],type:i,doc:o,note:h,classes:[],styles:[],textStyles:[]}):(Fo.states[t].doc||(Fo.states[t].doc=o),Fo.states[t].type||(Fo.states[t].type=i)),l&&(y.info("Setting state description",t,l),typeof l=="string"&&QC(t,l.trim()),typeof l=="object"&&l.forEach(x=>QC(t,x.trim()))),h&&(Fo.states[t].note=h,Fo.states[t].note.text=Ai.sanitizeText(Fo.states[t].note.text,Qe())),p&&(y.info("Setting state classes",t,p),(typeof p=="string"?[p]:p).forEach(E=>eS(t,E.trim()))),m&&(y.info("Setting state styles",t,m),(typeof m=="string"?[m]:m).forEach(E=>Zle(t,E.trim()))),b&&(y.info("Setting state styles",t,m),(typeof b=="string"?[b]:b).forEach(E=>Kle(t,E.trim())))},wI=function(t){xx={root:bI()},Fo=xx.root,Nv=0,Dv=yI(),t||Yl()},Ov=function(t){return Fo.states[t]},zle=function(){return Fo.states},Ule=function(){y.info("Documents = ",xx)},Gle=function(){return Fo.relations};function KC(t=""){let i=t;return t===ZC&&(Nv++,i=`${fI}${Nv}`),i}function JC(t="",i=Iv){return t===ZC?fI:i}function Hle(t=""){let i=t;return t===pI&&(Nv++,i=`${mI}${Nv}`),i}function Yle(t="",i=Iv){return t===pI?mI:i}function jle(t,i,o){let l=KC(t.id),h=JC(t.id,t.type),p=KC(i.id),m=JC(i.id,i.type);jf(l,h,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),jf(p,m,i.doc,i.description,i.note,i.classes,i.styles,i.textStyles),Fo.relations.push({id1:l,id2:p,relationTitle:Ai.sanitizeText(o,Qe())})}const kI=function(t,i,o){if(typeof t=="object")jle(t,i,o);else{const l=KC(t),h=JC(t),p=Hle(i),m=Yle(i);jf(l,h),jf(p,m),Fo.relations.push({id1:l,id2:p,title:Ai.sanitizeText(o,Qe())})}},QC=function(t,i){const o=Fo.states[t],l=i.startsWith(":")?i.replace(":","").trim():i;o.descriptions.push(Ai.sanitizeText(l,Qe()))},$le=function(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()},qle=()=>(xI++,"divider-id-"+xI),CI=function(t,i=""){Dv[t]===void 0&&(Dv[t]={id:t,styles:[],textStyles:[]});const o=Dv[t];i!=null&&i.split(Ile).forEach(l=>{const h=l.replace(/([^;]*);/,"$1").trim();if(l.match(gI)){const m=h.replace(vI,Ple).replace(gI,vI);o.textStyles.push(m)}o.styles.push(h)})},Xle=function(){return Dv},eS=function(t,i){t.split(",").forEach(function(o){let l=Ov(o);if(l===void 0){const h=o.trim();jf(h),l=Ov(h)}l.classes.push(i)})},Zle=function(t,i){const o=Ov(t);o!==void 0&&o.textStyles.push(i)},Kle=function(t,i){const o=Ov(t);o!==void 0&&o.textStyles.push(i)},Ju={parseDirective:Ole,getConfig:()=>Qe().state,addState:jf,clear:wI,getState:Ov,getStates:zle,getRelations:Gle,getClasses:Xle,getDirection:()=>_I,addRelation:kI,getDividerId:qle,setDirection:t=>{_I=t},cleanupLabel:$le,lineType:Dle,relationType:Nle,logDocuments:Ule,getRootDoc:Ble,setRootDoc:Fle,getRootDocV2:Vle,extract:Wle,trimColon:t=>t&&t[0]===":"?t.substr(1).trim():t.trim(),getAccTitle:jl,setAccTitle:pl,getAccDescription:ql,setAccDescription:$l,addStyleClass:CI,setCssClass:eS,addDescription:QC,setDiagramTitle:Fu,getDiagramTitle:Bu},Jle=t=>t.append("circle").attr("class","start-state").attr("r",Qe().state.sizeUnit).attr("cx",Qe().state.padding+Qe().state.sizeUnit).attr("cy",Qe().state.padding+Qe().state.sizeUnit),Qle=t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",Qe().state.textHeight).attr("class","divider").attr("x2",Qe().state.textHeight*2).attr("y1",0).attr("y2",0),ece=(t,i)=>{const o=t.append("text").attr("x",2*Qe().state.padding).attr("y",Qe().state.textHeight+2*Qe().state.padding).attr("font-size",Qe().state.fontSize).attr("class","state-title").text(i.id),l=o.node().getBBox();return t.insert("rect",":first-child").attr("x",Qe().state.padding).attr("y",Qe().state.padding).attr("width",l.width+2*Qe().state.padding).attr("height",l.height+2*Qe().state.padding).attr("rx",Qe().state.radius),o},tce=(t,i)=>{const o=function(F,W,K){const re=F.append("tspan").attr("x",2*Qe().state.padding).text(W);K||re.attr("dy",Qe().state.textHeight)},h=t.append("text").attr("x",2*Qe().state.padding).attr("y",Qe().state.textHeight+1.3*Qe().state.padding).attr("font-size",Qe().state.fontSize).attr("class","state-title").text(i.descriptions[0]).node().getBBox(),p=h.height,m=t.append("text").attr("x",Qe().state.padding).attr("y",p+Qe().state.padding*.4+Qe().state.dividerMargin+Qe().state.textHeight).attr("class","state-description");let b=!0,x=!0;i.descriptions.forEach(function(F){b||(o(m,F,x),x=!1),b=!1});const E=t.append("line").attr("x1",Qe().state.padding).attr("y1",Qe().state.padding+p+Qe().state.dividerMargin/2).attr("y2",Qe().state.padding+p+Qe().state.dividerMargin/2).attr("class","descr-divider"),L=m.node().getBBox(),I=Math.max(L.width,h.width);return E.attr("x2",I+3*Qe().state.padding),t.insert("rect",":first-child").attr("x",Qe().state.padding).attr("y",Qe().state.padding).attr("width",I+2*Qe().state.padding).attr("height",L.height+p+2*Qe().state.padding).attr("rx",Qe().state.radius),t},nce=(t,i,o)=>{const l=Qe().state.padding,h=2*Qe().state.padding,p=t.node().getBBox(),m=p.width,b=p.x,x=t.append("text").attr("x",0).attr("y",Qe().state.titleShift).attr("font-size",Qe().state.fontSize).attr("class","state-title").text(i.id),L=x.node().getBBox().width+h;let I=Math.max(L,m);I===m&&(I=I+h);let F;const W=t.node().getBBox();i.doc,F=b-l,L>m&&(F=(m-I)/2+l),Math.abs(b-W.x)<l&&L>m&&(F=b-(L-m)/2);const K=1-Qe().state.textHeight;return t.insert("rect",":first-child").attr("x",F).attr("y",K).attr("class",o?"alt-composit":"composit").attr("width",I).attr("height",W.height+Qe().state.textHeight+Qe().state.titleShift+1).attr("rx","0"),x.attr("x",F+l),L<=m&&x.attr("x",b+(I-h)/2-L/2+l),t.insert("rect",":first-child").attr("x",F).attr("y",Qe().state.titleShift-Qe().state.textHeight-Qe().state.padding).attr("width",I).attr("height",Qe().state.textHeight*3).attr("rx",Qe().state.radius),t.insert("rect",":first-child").attr("x",F).attr("y",Qe().state.titleShift-Qe().state.textHeight-Qe().state.padding).attr("width",I).attr("height",W.height+3+2*Qe().state.textHeight).attr("rx",Qe().state.radius),t},ice=t=>(t.append("circle").attr("class","end-state-outer").attr("r",Qe().state.sizeUnit+Qe().state.miniPadding).attr("cx",Qe().state.padding+Qe().state.sizeUnit+Qe().state.miniPadding).attr("cy",Qe().state.padding+Qe().state.sizeUnit+Qe().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",Qe().state.sizeUnit).attr("cx",Qe().state.padding+Qe().state.sizeUnit+2).attr("cy",Qe().state.padding+Qe().state.sizeUnit+2)),rce=(t,i)=>{let o=Qe().state.forkWidth,l=Qe().state.forkHeight;if(i.parentId){let h=o;o=l,l=h}return t.append("rect").style("stroke","black").style("fill","black").attr("width",o).attr("height",l).attr("x",Qe().state.padding).attr("y",Qe().state.padding)},sce=(t,i,o,l)=>{let h=0;const p=l.append("text");p.style("text-anchor","start"),p.attr("class","noteText");let m=t.replace(/\r\n/g,"<br/>");m=m.replace(/\n/g,"<br/>");const b=m.split(Ai.lineBreakRegex);let x=1.25*Qe().state.noteMargin;for(const E of b){const L=E.trim();if(L.length>0){const I=p.append("tspan");if(I.text(L),x===0){const F=I.node().getBBox();x+=F.height}h+=x,I.attr("x",i+Qe().state.noteMargin),I.attr("y",o+h+1.25*Qe().state.noteMargin)}}return{textWidth:p.node().getBBox().width,textHeight:h}},oce=(t,i)=>{i.attr("class","state-note");const o=i.append("rect").attr("x",0).attr("y",Qe().state.padding),l=i.append("g"),{textWidth:h,textHeight:p}=sce(t,0,0,l);return o.attr("height",p+2*Qe().state.noteMargin),o.attr("width",h+Qe().state.noteMargin*2),o},SI=function(t,i){const o=i.id,l={id:o,label:i.id,width:0,height:0},h=t.append("g").attr("id",o).attr("class","stateGroup");i.type==="start"&&Jle(h),i.type==="end"&&ice(h),(i.type==="fork"||i.type==="join")&&rce(h,i),i.type==="note"&&oce(i.note.text,h),i.type==="divider"&&Qle(h),i.type==="default"&&i.descriptions.length===0&&ece(h,i),i.type==="default"&&i.descriptions.length>0&&tce(h,i);const p=h.node().getBBox();return l.width=p.width+2*Qe().state.padding,l.height=p.height+2*Qe().state.padding,l};let EI=0;const ace=function(t,i,o){const l=function(x){switch(x){case Ju.relationType.AGGREGATION:return"aggregation";case Ju.relationType.EXTENSION:return"extension";case Ju.relationType.COMPOSITION:return"composition";case Ju.relationType.DEPENDENCY:return"dependency"}};i.points=i.points.filter(x=>!Number.isNaN(x.y));const h=i.points,p=Bm().x(function(x){return x.x}).y(function(x){return x.y}).curve(Vm),m=t.append("path").attr("d",p(h)).attr("id","edge"+EI).attr("class","transition");let b="";if(Qe().state.arrowMarkerAbsolute&&(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,b=b.replace(/\(/g,"\\("),b=b.replace(/\)/g,"\\)")),m.attr("marker-end","url("+b+"#"+l(Ju.relationType.DEPENDENCY)+"End)"),o.title!==void 0){const x=t.append("g").attr("class","stateLabel"),{x:E,y:L}=Ii.calcLabelPosition(i.points),I=Ai.getRows(o.title);let F=0;const W=[];let K=0,re=0;for(let he=0;he<=I.length;he++){const Ce=x.append("text").attr("text-anchor","middle").text(I[he]).attr("x",E).attr("y",L+F),Le=Ce.node().getBBox();K=Math.max(K,Le.width),re=Math.min(re,Le.x),y.info(Le.x,E,L+F),F===0&&(F=Ce.node().getBBox().height,y.info("Title height",F,L)),W.push(Ce)}let se=F*I.length;if(I.length>1){const he=(I.length-1)*F*.5;W.forEach((Ce,Le)=>Ce.attr("y",L+Le*F-he)),se=F*I.length}const pe=x.node().getBBox();x.insert("rect",":first-child").attr("class","box").attr("x",E-K/2-Qe().state.padding/2).attr("y",L-se/2-Qe().state.padding/2-3.5).attr("width",K+Qe().state.padding).attr("height",se+Qe().state.padding),y.info(pe)}EI++};let Ua;const tS={},lce=function(){},cce=function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},uce=function(t,i,o,l){Ua=Qe().state;const h=Qe().securityLevel;let p;h==="sandbox"&&(p=dn("#i"+i));const m=dn(h==="sandbox"?p.nodes()[0].contentDocument.body:"body"),b=h==="sandbox"?p.nodes()[0].contentDocument:document;y.debug("Rendering diagram "+t);const x=m.select(`[id='${i}']`);cce(x),new Ns({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}});const L=l.db.getRootDoc();TI(L,x,void 0,!1,m,b,l);const I=Ua.padding,F=x.node().getBBox(),W=F.width+I*2,K=F.height+I*2,re=W*1.75;Hl(x,K,re,Ua.useMaxWidth),x.attr("viewBox",`${F.x-Ua.padding}  ${F.y-Ua.padding} `+W+" "+K)},hce=t=>t?t.length*Ua.fontSizeFactor:1,TI=(t,i,o,l,h,p,m)=>{const b=new Ns({compound:!0,multigraph:!0});let x,E=!0;for(x=0;x<t.length;x++)if(t[x].stmt==="relation"){E=!1;break}o?b.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:E?1:Ua.edgeLengthFactor,nodeSep:E?1:50,isMultiGraph:!0}):b.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:E?1:Ua.edgeLengthFactor,nodeSep:E?1:50,ranker:"tight-tree",isMultiGraph:!0}),b.setDefaultEdgeLabel(function(){return{}}),m.db.extract(t);const L=m.db.getStates(),I=m.db.getRelations(),F=Object.keys(L);for(const pe of F){const he=L[pe];o&&(he.parentId=o);let Ce;if(he.doc){let Le=i.append("g").attr("id",he.id).attr("class","stateGroup");Ce=TI(he.doc,Le,he.id,!l,h,p,m);{Le=nce(Le,he,l);let Ve=Le.node().getBBox();Ce.width=Ve.width,Ce.height=Ve.height+Ua.padding/2,tS[he.id]={y:Ua.compositTitleSize}}}else Ce=SI(i,he);if(he.note){const Le={descriptions:[],id:he.id+"-note",note:he.note,type:"note"},Ve=SI(i,Le);he.note.position==="left of"?(b.setNode(Ce.id+"-note",Ve),b.setNode(Ce.id,Ce)):(b.setNode(Ce.id,Ce),b.setNode(Ce.id+"-note",Ve)),b.setParent(Ce.id,Ce.id+"-group"),b.setParent(Ce.id+"-note",Ce.id+"-group")}else b.setNode(Ce.id,Ce)}y.debug("Count=",b.nodeCount(),b);let W=0;I.forEach(function(pe){W++,y.debug("Setting edge",pe),b.setEdge(pe.id1,pe.id2,{relation:pe,width:hce(pe.title),height:Ua.labelHeight*Ai.getRows(pe.title).length,labelpos:"c"},"id"+W)}),u0(b),y.debug("Graph after layout",b.nodes());const K=i.node();b.nodes().forEach(function(pe){pe!==void 0&&b.node(pe)!==void 0?(y.warn("Node "+pe+": "+JSON.stringify(b.node(pe))),h.select("#"+K.id+" #"+pe).attr("transform","translate("+(b.node(pe).x-b.node(pe).width/2)+","+(b.node(pe).y+(tS[pe]?tS[pe].y:0)-b.node(pe).height/2)+" )"),h.select("#"+K.id+" #"+pe).attr("data-x-shift",b.node(pe).x-b.node(pe).width/2),p.querySelectorAll("#"+K.id+" #"+pe+" .divider").forEach(Ce=>{const Le=Ce.parentElement;let Ve=0,je=0;Le&&(Le.parentElement&&(Ve=Le.parentElement.getBBox().width),je=parseInt(Le.getAttribute("data-x-shift"),10),Number.isNaN(je)&&(je=0)),Ce.setAttribute("x1",0-je+8),Ce.setAttribute("x2",Ve-je-8)})):y.debug("No Node "+pe+": "+JSON.stringify(b.node(pe)))});let re=K.getBBox();b.edges().forEach(function(pe){pe!==void 0&&b.edge(pe)!==void 0&&(y.debug("Edge "+pe.v+" -> "+pe.w+": "+JSON.stringify(b.edge(pe))),ace(i,b.edge(pe),b.edge(pe).relation))}),re=K.getBBox();const se={id:o||"root",label:o||"root",width:0,height:0};return se.width=re.width+2*Ua.padding,se.height=re.height+2*Ua.padding,y.debug("Doc rendered",se,b),se},dce={setConf:lce,draw:uce},Cx="rect",nS="rectWithTitle",fce="start",pce="end",mce="divider",gce="roundedWithTitle",vce="note",yce="noteGroup",x0="statediagram",_ce=`${x0}-state`,MI="transition",bce="note",xce=`${MI} note-edge`,wce=`${x0}-${bce}`,kce=`${x0}-cluster`,Cce=`${x0}-cluster-alt`,AI="parent",LI="note",Sce="state",iS="----",Ece=`${iS}${LI}`,RI=`${iS}${AI}`,PI="fill:none",II="fill: #333",DI="c",NI="text",OI="normal";let Sx={},hd=0;const Tce=function(t){const i=Object.keys(t);for(const o of i)t[o]},Mce=function(t,i){y.trace("Extracting classes"),i.db.clear();try{return i.parser.parse(t),i.db.extract(i.db.getRootDocV2()),i.db.getClasses()}catch(o){return o}};function Ace(t){return t==null?"":t.classes?t.classes.join(" "):""}function rS(t="",i=0,o="",l=iS){const h=o!==null&&o.length>0?`${l}${o}`:"";return`${Sce}-${t}${h}-${i}`}const Fv=(t,i,o,l,h,p)=>{const m=o.id,b=Ace(l[m]);if(m!=="root"){let x=Cx;o.start===!0&&(x=fce),o.start===!1&&(x=pce),o.type!==Iv&&(x=o.type),Sx[m]||(Sx[m]={id:m,shape:x,description:Ai.sanitizeText(m,Qe()),classes:`${b} ${_ce}`});const E=Sx[m];o.description&&(Array.isArray(E.description)?(E.shape=nS,E.description.push(o.description)):E.description.length>0?(E.shape=nS,E.description===m?E.description=[o.description]:E.description=[E.description,o.description]):(E.shape=Cx,E.description=o.description),E.description=Ai.sanitizeTextOrArray(E.description,Qe())),E.description.length===1&&E.shape===nS&&(E.shape=Cx),!E.type&&o.doc&&(y.info("Setting cluster for ",m,sS(o)),E.type="group",E.dir=sS(o),E.shape=o.type===dI?mce:gce,E.classes=E.classes+" "+kce+" "+(p?Cce:""));const L={labelStyle:"",shape:E.shape,labelText:E.description,classes:E.classes,style:"",id:m,dir:E.dir,domId:rS(m,hd),type:E.type,padding:15};if(o.note){const I={labelStyle:"",shape:vce,labelText:o.note.text,classes:wce,style:"",id:m+Ece+"-"+hd,domId:rS(m,hd,LI),type:E.type,padding:15},F={labelStyle:"",shape:yce,labelText:o.note.text,classes:E.classes,style:"",id:m+RI,domId:rS(m,hd,AI),type:"group",padding:0};hd++;const W=m+RI;t.setNode(W,F),t.setNode(I.id,I),t.setNode(m,L),t.setParent(m,W),t.setParent(I.id,W);let K=m,re=I.id;o.note.position==="left of"&&(K=I.id,re=m),t.setEdge(K,re,{arrowhead:"none",arrowType:"",style:PI,labelStyle:"",classes:xce,arrowheadStyle:II,labelpos:DI,labelType:NI,thickness:OI})}else t.setNode(m,L)}i&&i.id!=="root"&&(y.trace("Setting node ",m," to be child of its parent ",i.id),t.setParent(m,i.id)),o.doc&&(y.trace("Adding nodes children "),Lce(t,o,o.doc,l,h,!p))},Lce=(t,i,o,l,h,p)=>{y.trace("items",o),o.forEach(m=>{switch(m.stmt){case _x:Fv(t,i,m,l,h,p);break;case Iv:Fv(t,i,m,l,h,p);break;case XC:{Fv(t,i,m.state1,l,h,p),Fv(t,i,m.state2,l,h,p);const b={id:"edge"+hd,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:PI,labelStyle:"",label:Ai.sanitizeText(m.description,Qe()),arrowheadStyle:II,labelpos:DI,labelType:NI,thickness:OI,classes:MI};t.setEdge(m.state1.id,m.state2.id,b,hd),hd++}break}})},sS=(t,i=Ale)=>{let o=i;if(t.doc)for(let l=0;l<t.doc.length;l++){const h=t.doc[l];h.stmt==="dir"&&(o=h.value)}return o},Rce={setConf:Tce,getClasses:Mce,draw:function(t,i,o,l){y.info("Drawing state diagram (v2)",i),Sx={},l.db.getDirection();const{securityLevel:h,state:p}=Qe(),m=p.nodeSpacing||50,b=p.rankSpacing||50;y.info(l.db.getRootDocV2()),l.db.extract(l.db.getRootDocV2()),y.info(l.db.getRootDocV2());const x=l.db.getStates(),E=new Ns({multigraph:!0,compound:!0}).setGraph({rankdir:sS(l.db.getRootDocV2()),nodesep:m,ranksep:b,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});Fv(E,void 0,l.db.getRootDocV2(),x,l.db,!0);let L;h==="sandbox"&&(L=dn("#i"+i));const I=dn(h==="sandbox"?L.nodes()[0].contentDocument.body:"body"),F=I.select(`[id="${i}"]`),W=I.select("#"+i+" g");iC(W,E,["barb"],x0,i);const K=8;Ii.insertTitle(F,"statediagramTitleText",p.titleTopMargin,l.db.getDiagramTitle());const re=F.node().getBBox(),se=re.width+K*2,pe=re.height+K*2;F.attr("class",x0);const he=F.node().getBBox();Hl(F,pe,se,p.useMaxWidth);const Ce=`${he.x-K} ${he.y-K} ${se} ${pe}`;y.debug(`viewBox ${Ce}`),F.attr("viewBox",Ce);const Le=document.querySelectorAll('[id="'+i+'"] .edgeLabel .label');for(const Ve of Le){const je=Ve.getBBox(),Pe=document.createElementNS("http://www.w3.org/2000/svg",Cx);Pe.setAttribute("rx",0),Pe.setAttribute("ry",0),Pe.setAttribute("width",je.width),Pe.setAttribute("height",je.height),Ve.insertBefore(Pe,Ve.firstChild)}}};var oS=function(){var t=function(re,se,pe,he){for(pe=pe||{},he=re.length;he--;pe[re[he]]=se);return pe},i=[1,2],o=[1,5],l=[6,9,11,17,18,20,22,23,24,26],h=[1,15],p=[1,16],m=[1,17],b=[1,18],x=[1,19],E=[1,20],L=[1,24],I=[4,6,9,11,17,18,20,22,23,24,26],F={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(se,pe,he,Ce,Le,Ve,je){var Pe=Ve.length-1;switch(Le){case 1:return Ve[Pe-1];case 3:this.$=[];break;case 4:Ve[Pe-1].push(Ve[Pe]),this.$=Ve[Pe-1];break;case 5:case 6:this.$=Ve[Pe];break;case 7:case 8:this.$=[];break;case 11:Ce.setDiagramTitle(Ve[Pe].substr(6)),this.$=Ve[Pe].substr(6);break;case 12:this.$=Ve[Pe].trim(),Ce.setAccTitle(this.$);break;case 13:case 14:this.$=Ve[Pe].trim(),Ce.setAccDescription(this.$);break;case 15:Ce.addSection(Ve[Pe].substr(8)),this.$=Ve[Pe].substr(8);break;case 16:Ce.addTask(Ve[Pe-1],Ve[Pe]),this.$="task";break;case 18:Ce.parseDirective("%%{","open_directive");break;case 19:Ce.parseDirective(Ve[Pe],"type_directive");break;case 20:Ve[Pe]=Ve[Pe].trim().replace(/'/g,'"'),Ce.parseDirective(Ve[Pe],"arg_directive");break;case 21:Ce.parseDirective("}%%","close_directive","journey");break}},table:[{3:1,4:i,7:3,12:4,26:o},{1:[3]},t(l,[2,3],{5:6}),{3:7,4:i,7:3,12:4,26:o},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:h,18:p,20:m,22:b,23:x,24:E,26:o},{1:[2,2]},{14:22,15:[1,23],29:L},t([15,29],[2,19]),t(l,[2,8],{1:[2,1]}),t(l,[2,4]),{7:21,10:25,12:4,17:h,18:p,20:m,22:b,23:x,24:E,26:o},t(l,[2,6]),t(l,[2,7]),t(l,[2,11]),{19:[1,26]},{21:[1,27]},t(l,[2,14]),t(l,[2,15]),{25:[1,28]},t(l,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},t(l,[2,5]),t(l,[2,12]),t(l,[2,13]),t(l,[2,16]),t(I,[2,9]),{14:32,29:L},{29:[2,20]},{11:[1,33]},t(I,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(se,pe){if(pe.recoverable)this.trace(se);else{var he=new Error(se);throw he.hash=pe,he}},parse:function(se){var pe=this,he=[0],Ce=[],Le=[null],Ve=[],je=this.table,Pe="",ze=0,xe=0,_e=2,de=1,te=Ve.slice.call(arguments,1),be=Object.create(this.lexer),q={yy:{}};for(var ot in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ot)&&(q.yy[ot]=this.yy[ot]);be.setInput(se,q.yy),q.yy.lexer=be,q.yy.parser=this,typeof be.yylloc>"u"&&(be.yylloc={});var Z=be.yylloc;Ve.push(Z);var Dt=be.options&&be.options.ranges;typeof q.yy.parseError=="function"?this.parseError=q.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function xn(){var Be;return Be=Ce.pop()||be.lex()||de,typeof Be!="number"&&(Be instanceof Array&&(Ce=Be,Be=Ce.pop()),Be=pe.symbols_[Be]||Be),Be}for(var ln,Je,kt,mt,vt={},Pt,rn,nt,Ln;;){if(Je=he[he.length-1],this.defaultActions[Je]?kt=this.defaultActions[Je]:((ln===null||typeof ln>"u")&&(ln=xn()),kt=je[Je]&&je[Je][ln]),typeof kt>"u"||!kt.length||!kt[0]){var Ie="";Ln=[];for(Pt in je[Je])this.terminals_[Pt]&&Pt>_e&&Ln.push("'"+this.terminals_[Pt]+"'");be.showPosition?Ie="Parse error on line "+(ze+1)+`:
`+be.showPosition()+`
Expecting `+Ln.join(", ")+", got '"+(this.terminals_[ln]||ln)+"'":Ie="Parse error on line "+(ze+1)+": Unexpected "+(ln==de?"end of input":"'"+(this.terminals_[ln]||ln)+"'"),this.parseError(Ie,{text:be.match,token:this.terminals_[ln]||ln,line:be.yylineno,loc:Z,expected:Ln})}if(kt[0]instanceof Array&&kt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Je+", token: "+ln);switch(kt[0]){case 1:he.push(ln),Le.push(be.yytext),Ve.push(be.yylloc),he.push(kt[1]),ln=null,xe=be.yyleng,Pe=be.yytext,ze=be.yylineno,Z=be.yylloc;break;case 2:if(rn=this.productions_[kt[1]][1],vt.$=Le[Le.length-rn],vt._$={first_line:Ve[Ve.length-(rn||1)].first_line,last_line:Ve[Ve.length-1].last_line,first_column:Ve[Ve.length-(rn||1)].first_column,last_column:Ve[Ve.length-1].last_column},Dt&&(vt._$.range=[Ve[Ve.length-(rn||1)].range[0],Ve[Ve.length-1].range[1]]),mt=this.performAction.apply(vt,[Pe,xe,ze,q.yy,kt[1],Le,Ve].concat(te)),typeof mt<"u")return mt;rn&&(he=he.slice(0,-1*rn*2),Le=Le.slice(0,-1*rn),Ve=Ve.slice(0,-1*rn)),he.push(this.productions_[kt[1]][0]),Le.push(vt.$),Ve.push(vt._$),nt=je[he[he.length-2]][he[he.length-1]],he.push(nt);break;case 3:return!0}}return!0}},W=function(){var re={EOF:1,parseError:function(pe,he){if(this.yy.parser)this.yy.parser.parseError(pe,he);else throw new Error(pe)},setInput:function(se,pe){return this.yy=pe||this.yy||{},this._input=se,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var se=this._input[0];this.yytext+=se,this.yyleng++,this.offset++,this.match+=se,this.matched+=se;var pe=se.match(/(?:\r\n?|\n).*/g);return pe?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),se},unput:function(se){var pe=se.length,he=se.split(/(?:\r\n?|\n)/g);this._input=se+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-pe),this.offset-=pe;var Ce=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),he.length-1&&(this.yylineno-=he.length-1);var Le=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:he?(he.length===Ce.length?this.yylloc.first_column:0)+Ce[Ce.length-he.length].length-he[0].length:this.yylloc.first_column-pe},this.options.ranges&&(this.yylloc.range=[Le[0],Le[0]+this.yyleng-pe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(se){this.unput(this.match.slice(se))},pastInput:function(){var se=this.matched.substr(0,this.matched.length-this.match.length);return(se.length>20?"...":"")+se.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var se=this.match;return se.length<20&&(se+=this._input.substr(0,20-se.length)),(se.substr(0,20)+(se.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var se=this.pastInput(),pe=new Array(se.length+1).join("-");return se+this.upcomingInput()+`
`+pe+"^"},test_match:function(se,pe){var he,Ce,Le;if(this.options.backtrack_lexer&&(Le={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Le.yylloc.range=this.yylloc.range.slice(0))),Ce=se[0].match(/(?:\r\n?|\n).*/g),Ce&&(this.yylineno+=Ce.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ce?Ce[Ce.length-1].length-Ce[Ce.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+se[0].length},this.yytext+=se[0],this.match+=se[0],this.matches=se,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(se[0].length),this.matched+=se[0],he=this.performAction.call(this,this.yy,this,pe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),he)return he;if(this._backtrack){for(var Ve in Le)this[Ve]=Le[Ve];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var se,pe,he,Ce;this._more||(this.yytext="",this.match="");for(var Le=this._currentRules(),Ve=0;Ve<Le.length;Ve++)if(he=this._input.match(this.rules[Le[Ve]]),he&&(!pe||he[0].length>pe[0].length)){if(pe=he,Ce=Ve,this.options.backtrack_lexer){if(se=this.test_match(he,Le[Ve]),se!==!1)return se;if(this._backtrack){pe=!1;continue}else return!1}else if(!this.options.flex)break}return pe?(se=this.test_match(pe,Le[Ce]),se!==!1?se:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var pe=this.next();return pe||this.lex()},begin:function(pe){this.conditionStack.push(pe)},popState:function(){var pe=this.conditionStack.length-1;return pe>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(pe){return pe=this.conditionStack.length-1-Math.abs(pe||0),pe>=0?this.conditionStack[pe]:"INITIAL"},pushState:function(pe){this.begin(pe)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(pe,he,Ce,Le){switch(Ce){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:break;case 6:break;case 7:return 11;case 8:break;case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};return re}();F.lexer=W;function K(){this.yy={}}return K.prototype=F,F.Parser=K,new K}();oS.parser=oS;const Pce=oS,Ice=t=>t.match(/^\s*journey/)!==null;let w0="";const aS=[],Bv=[],Vv=[],Dce=function(t,i,o){ss.parseDirective(this,t,i,o)},Nce=function(){aS.length=0,Bv.length=0,w0="",Vv.length=0,Yl()},Oce=function(t){w0=t,aS.push(t)},Fce=function(){return aS},Bce=function(){let t=FI();const i=100;let o=0;for(;!t&&o<i;)t=FI(),o++;return Bv.push(...Vv),Bv},Vce=function(){const t=[];return Bv.forEach(o=>{o.people&&t.push(...o.people)}),[...new Set(t)].sort()},Wce=function(t,i){const o=i.substr(1).split(":");let l=0,h=[];o.length===1?(l=Number(o[0]),h=[]):(l=Number(o[0]),h=o[1].split(","));const p=h.map(b=>b.trim()),m={section:w0,type:w0,people:p,task:t,score:l};Vv.push(m)},zce=function(t){const i={section:w0,type:w0,description:t,task:t,classes:[]};Bv.push(i)},FI=function(){const t=function(o){return Vv[o].processed};let i=!0;for(const[o,l]of Vv.entries())t(o),i=i&&l.processed;return i},BI={parseDirective:Dce,getConfig:()=>Qe().journey,clear:Nce,setDiagramTitle:Fu,getDiagramTitle:Bu,setAccTitle:pl,getAccTitle:jl,setAccDescription:$l,getAccDescription:ql,addSection:Oce,getSections:Fce,getTasks:Bce,addTask:Wce,addTaskOrg:zce,getActors:function(){return Vce()}},Ex=function(t,i){const o=t.append("rect");return o.attr("x",i.x),o.attr("y",i.y),o.attr("fill",i.fill),o.attr("stroke",i.stroke),o.attr("width",i.width),o.attr("height",i.height),o.attr("rx",i.rx),o.attr("ry",i.ry),i.class!==void 0&&o.attr("class",i.class),o},Uce=function(t,i){const l=t.append("circle").attr("cx",i.cx).attr("cy",i.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),h=t.append("g");h.append("circle").attr("cx",i.cx-15/3).attr("cy",i.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),h.append("circle").attr("cx",i.cx+15/3).attr("cy",i.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function p(x){const E=Ak().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);x.append("path").attr("class","mouth").attr("d",E).attr("transform","translate("+i.cx+","+(i.cy+2)+")")}function m(x){const E=Ak().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);x.append("path").attr("class","mouth").attr("d",E).attr("transform","translate("+i.cx+","+(i.cy+7)+")")}function b(x){x.append("line").attr("class","mouth").attr("stroke",2).attr("x1",i.cx-5).attr("y1",i.cy+7).attr("x2",i.cx+5).attr("y2",i.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return i.score>3?p(h):i.score<3?m(h):b(h),l},VI=function(t,i){const o=t.append("circle");return o.attr("cx",i.cx),o.attr("cy",i.cy),o.attr("class","actor-"+i.pos),o.attr("fill",i.fill),o.attr("stroke",i.stroke),o.attr("r",i.r),o.class!==void 0&&o.attr("class",o.class),i.title!==void 0&&o.append("title").text(i.title),o},WI=function(t,i){const o=i.text.replace(/<br\s*\/?>/gi," "),l=t.append("text");l.attr("x",i.x),l.attr("y",i.y),l.attr("class","legend"),l.style("text-anchor",i.anchor),i.class!==void 0&&l.attr("class",i.class);const h=l.append("tspan");return h.attr("x",i.x+i.textMargin*2),h.text(o),l},Gce=function(t,i){function o(h,p,m,b,x){return h+","+p+" "+(h+m)+","+p+" "+(h+m)+","+(p+b-x)+" "+(h+m-x*1.2)+","+(p+b)+" "+h+","+(p+b)}const l=t.append("polygon");l.attr("points",o(i.x,i.y,50,20,7)),l.attr("class","labelBox"),i.y=i.y+i.labelMargin,i.x=i.x+.5*i.labelMargin,WI(t,i)},Hce=function(t,i,o){const l=t.append("g"),h=lS();h.x=i.x,h.y=i.y,h.fill=i.fill,h.width=o.width,h.height=o.height,h.class="journey-section section-type-"+i.num,h.rx=3,h.ry=3,Ex(l,h),UI(o)(i.text,l,h.x,h.y,h.width,h.height,{class:"journey-section section-type-"+i.num},o,i.colour)};let zI=-1;const Yce=function(t,i,o){const l=i.x+o.width/2,h=t.append("g");zI++;const p=300+5*30;h.append("line").attr("id","task"+zI).attr("x1",l).attr("y1",i.y).attr("x2",l).attr("y2",p).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),Uce(h,{cx:l,cy:300+(5-i.score)*30,score:i.score});const m=lS();m.x=i.x,m.y=i.y,m.fill=i.fill,m.width=o.width,m.height=o.height,m.class="task task-type-"+i.num,m.rx=3,m.ry=3,Ex(h,m);let b=i.x+14;i.people.forEach(x=>{const E=i.actors[x].color,L={cx:b,cy:i.y,r:7,fill:E,stroke:"#000",title:x,pos:i.actors[x].position};VI(h,L),b+=10}),UI(o)(i.task,h,m.x,m.y,m.width,m.height,{class:"task"},o,i.colour)},jce=function(t,i){Ex(t,{x:i.startx,y:i.starty,width:i.stopx-i.startx,height:i.stopy-i.starty,fill:i.fill,class:"rect"}).lower()},$ce=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},lS=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},UI=function(){function t(h,p,m,b,x,E,L,I){const F=p.append("text").attr("x",m+x/2).attr("y",b+E/2+5).style("font-color",I).style("text-anchor","middle").text(h);l(F,L)}function i(h,p,m,b,x,E,L,I,F){const{taskFontSize:W,taskFontFamily:K}=I,re=h.split(/<br\s*\/?>/gi);for(let se=0;se<re.length;se++){const pe=se*W-W*(re.length-1)/2,he=p.append("text").attr("x",m+x/2).attr("y",b).attr("fill",F).style("text-anchor","middle").style("font-size",W).style("font-family",K);he.append("tspan").attr("x",m+x/2).attr("dy",pe).text(re[se]),he.attr("y",b+E/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),l(he,L)}}function o(h,p,m,b,x,E,L,I){const F=p.append("switch"),K=F.append("foreignObject").attr("x",m).attr("y",b).attr("width",x).attr("height",E).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");K.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(h),i(h,F,m,b,x,E,L,I),l(K,L)}function l(h,p){for(const m in p)m in p&&h.attr(m,p[m])}return function(h){return h.textPlacement==="fo"?o:h.textPlacement==="old"?t:i}}(),Wv={drawRect:Ex,drawCircle:VI,drawSection:Hce,drawText:WI,drawLabel:Gce,drawTask:Yce,drawBackgroundRect:jce,getTextObj:$ce,getNoteRect:lS,initGraphics:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}},qce=function(t){Object.keys(t).forEach(function(o){Tx[o]=t[o]})},Qu={};function Xce(t){const i=Qe().journey;let o=60;Object.keys(Qu).forEach(l=>{const h=Qu[l].color,p={cx:20,cy:o,r:7,fill:h,stroke:"#000",pos:Qu[l].position};Wv.drawCircle(t,p);const m={x:40,y:o+7,fill:"#666",text:l,textMargin:i.boxTextMargin|5};Wv.drawText(t,m),o+=20})}const Tx=Qe().journey,$f=Tx.leftMargin,Zce=function(t,i,o,l){const h=Qe().journey;l.db.clear(),l.parser.parse(t+`
`);const p=Qe().securityLevel;let m;p==="sandbox"&&(m=dn("#i"+i));const b=dn(p==="sandbox"?m.nodes()[0].contentDocument.body:"body");gl.init();const x=b.select("#"+i);Wv.initGraphics(x);const E=l.db.getTasks(),L=l.db.getDiagramTitle(),I=l.db.getActors();for(const pe in Qu)delete Qu[pe];let F=0;I.forEach(pe=>{Qu[pe]={color:h.actorColours[F%h.actorColours.length],position:F},F++}),Xce(x),gl.insert(0,0,$f,Object.keys(Qu).length*50),Kce(x,E,0);const W=gl.getBounds();L&&x.append("text").text(L).attr("x",$f).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const K=W.stopy-W.starty+2*h.diagramMarginY,re=$f+W.stopx+2*h.diagramMarginX;Hl(x,K,re,h.useMaxWidth),x.append("line").attr("x1",$f).attr("y1",h.height*4).attr("x2",re-$f-4).attr("y2",h.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const se=L?70:0;x.attr("viewBox",`${W.startx} -25 ${re} ${K+se}`),x.attr("preserveAspectRatio","xMinYMin meet"),x.attr("height",K+se+25)},gl={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,i,o,l){t[i]===void 0?t[i]=o:t[i]=l(o,t[i])},updateBounds:function(t,i,o,l){const h=Qe().journey,p=this;let m=0;function b(x){return function(L){m++;const I=p.sequenceItems.length-m+1;p.updateVal(L,"starty",i-I*h.boxMargin,Math.min),p.updateVal(L,"stopy",l+I*h.boxMargin,Math.max),p.updateVal(gl.data,"startx",t-I*h.boxMargin,Math.min),p.updateVal(gl.data,"stopx",o+I*h.boxMargin,Math.max),x!=="activation"&&(p.updateVal(L,"startx",t-I*h.boxMargin,Math.min),p.updateVal(L,"stopx",o+I*h.boxMargin,Math.max),p.updateVal(gl.data,"starty",i-I*h.boxMargin,Math.min),p.updateVal(gl.data,"stopy",l+I*h.boxMargin,Math.max))}}this.sequenceItems.forEach(b())},insert:function(t,i,o,l){const h=Math.min(t,o),p=Math.max(t,o),m=Math.min(i,l),b=Math.max(i,l);this.updateVal(gl.data,"startx",h,Math.min),this.updateVal(gl.data,"starty",m,Math.min),this.updateVal(gl.data,"stopx",p,Math.max),this.updateVal(gl.data,"stopy",b,Math.max),this.updateBounds(h,m,p,b)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},cS=Tx.sectionFills,GI=Tx.sectionColours,Kce=function(t,i,o){const l=Qe().journey;let h="";const p=l.height*2+l.diagramMarginY,m=o+p;let b=0,x="#CCC",E="black",L=0;for(const[I,F]of i.entries()){if(h!==F.section){x=cS[b%cS.length],L=b%cS.length,E=GI[b%GI.length];const K={x:I*l.taskMargin+I*l.width+$f,y:50,text:F.section,fill:x,num:L,colour:E};Wv.drawSection(t,K,l),h=F.section,b++}const W=F.people.reduce((K,re)=>(Qu[re]&&(K[re]=Qu[re]),K),{});F.x=I*l.taskMargin+I*l.width+$f,F.y=m,F.width=l.diagramMarginX,F.height=l.diagramMarginY,F.colour=E,F.fill=x,F.num=L,F.actors=W,Wv.drawTask(t,F,l),gl.insert(F.x,F.y,F.x+F.width+l.taskMargin,300+5*30)}},HI={setConf:qce,draw:Zce};let YI={};const uS={setConf:function(t){YI={...YI,...t}},draw:(t,i,o)=>{try{y.debug(`Renering svg for syntax error
`);const l=dn("#"+i),h=l.append("g");h.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),h.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),h.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),h.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),h.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),h.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),h.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),h.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+o),l.attr("height",100),l.attr("width",500),l.attr("viewBox","768 0 912 512")}catch(l){y.error("Error while rendering info diagram"),y.error(Tq(l))}}};let jI=!1;const zv=()=>{jI||(jI=!0,uo("error",{db:{clear:()=>{}},styles:aL,renderer:uS,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},t=>t.toLowerCase().trim()==="error"),uo("c4",{parser:LX,db:EL,renderer:NL,styles:pL,init:t=>{NL.setConf(t.c4)}},RX),uo("class",{parser:OL,db:Jm,renderer:Kie,styles:X1,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Jm.clear()}},vZ),uo("classDiagram",{parser:OL,db:Jm,renderer:Xre,styles:X1,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Jm.clear()}},yZ),uo("er",{parser:Zre,db:tse,renderer:mse,styles:oL},Kre),uo("gantt",{parser:Doe,db:IC,renderer:dae,styles:lL},Noe),uo("info",{parser:fae,db:pae,renderer:mae,styles:cL},gae),uo("pie",{parser:vae,db:_ae,renderer:bae,styles:uL},yae),uo("requirement",{parser:xae,db:kae,renderer:Lae,styles:hL},wae),uo("sequence",{parser:Rae,db:QP,renderer:uI,styles:dL,init:t=>{if(t.sequence||(t.sequence={}),t.sequence.arrowMarkerAbsolute=t.arrowMarkerAbsolute,"sequenceDiagram"in t)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");QP.setWrap(t.wrap),uI.setConf(t.sequence)}},Pae),uo("state",{parser:hI,db:Ju,renderer:dce,styles:v2,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ju.clear()}},Ele),uo("stateDiagram",{parser:hI,db:Ju,renderer:Rce,styles:v2,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ju.clear()}},Tle),uo("journey",{parser:Pce,db:BI,renderer:HI,styles:fL,init:t=>{HI.setConf(t.journey),BI.clear()}},Ice),uo("flowchart",{parser:QR,db:$u,renderer:xC,styles:g2,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Poe.setConf(t.flowchart),$u.clear(),$u.setGen("gen-1")}},gse),uo("flowchart-v2",{parser:QR,db:$u,renderer:xC,styles:g2,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,tL({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),xC.setConf(t.flowchart),$u.clear(),$u.setGen("gen-2")}},vse),uo("gitGraph",{parser:tX,db:xX,renderer:MX,styles:AX},nX))};class hS{constructor(i,o){a(this,"type","graph"),a(this,"parser"),a(this,"renderer"),a(this,"db"),a(this,"detectTypeFailed",!1);var l,h;this.txt=i;const p=Qe();this.txt=i;try{this.type=$k(i,p)}catch(x){this.handleError(x,o),this.type="error",this.detectTypeFailed=!0}const m=gL(this.type);y.debug("Type "+this.type),this.db=m.db,(h=(l=this.db).clear)==null||h.call(l),this.renderer=m.renderer,this.parser=m.parser;const b=this.parser.parse.bind(this.parser);this.parser.parse=x=>b(s$(x,this.db)),this.parser.parser.yy=this.db,m.init&&(m.init(p),y.debug("Initialized diagram "+this.type,p)),this.txt+=`
`,this.parse(this.txt,o)}parse(i,o){var l,h;if(this.detectTypeFailed)return!1;try{return i=i+`
`,(h=(l=this.db).clear)==null||h.call(l),this.parser.parse(i),!0}catch(p){this.handleError(p,o)}return!1}handleError(i,o){if(o===void 0)throw i;if(Qk(i)){o(i.str,i.hash);return}o(i)}getParser(){return this.parser}getType(){return this.type}}const dS=(t,i)=>{const o=$k(t,Qe());try{gL(o)}catch{const h=l$(o);if(!h)throw new Error(`Diagram ${o} not found.`);return h().then(({diagram:p})=>(uo(o,p,void 0),new hS(t,i)))}return new hS(t,i)},fS=hS;function Jce(t,i){l0(i)||t.attr("aria-roledescription",i)}function Qce(t,i,o,l){if(t.insert!==void 0)if(i||o){if(o){const h="chart-desc-"+l;t.attr("aria-describedby",h),t.insert("desc",":first-child").attr("id",h).text(o)}if(i){const h="chart-title-"+l;t.attr("aria-labelledby",h),t.insert("title",":first-child").attr("id",h).text(i)}}else return}const pS=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],$I="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",qI="sandbox",XI="loose",eue="http://www.w3.org/2000/svg",ZI="http://www.w3.org/1999/xlink",KI="http://www.w3.org/1999/xhtml",tue="100%",nue="100%",iue="border:0;margin:0;",rue="margin:0",sue="allow-top-navigation-by-user-activation allow-popups",oue='The "iframe" tag is not supported by your browser.',JI=["foreignobject"],QI=["dominant-baseline"];function aue(t,i){return zv(),new fS(t,i).parse(t,i)}async function lue(t,i){return zv(),(await dS(t,i)).parse(t,i)}const eD=function(t){let i=t;return i=i.replace(/style.*:\S*#.*;/g,function(o){return o.substring(0,o.length-1)}),i=i.replace(/classDef.*:\S*#.*;/g,function(o){return o.substring(0,o.length-1)}),i=i.replace(/#\w+;/g,function(o){const l=o.substring(1,o.length-1);return/^\+?\d+$/.test(l)?"\uFB02\xB0\xB0"+l+"\xB6\xDF":"\uFB02\xB0"+l+"\xB6\xDF"}),i},mS=function(t){let i=t;return i=i.replace(/ﬂ°°/g,"&#"),i=i.replace(/ﬂ°/g,"&"),i=i.replace(/¶ß/g,";"),i},tD=(t,i,o=[])=>`
.${t} ${i} { ${o.join(" !important; ")} !important; }`,cue=(t,i,o={})=>{var l;let h="";if(t.themeCSS!==void 0&&(h+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(h+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(h+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!l0(o)&&pS.includes(i)){const x=t.htmlLabels||((l=t.flowchart)==null?void 0:l.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const E in o){const L=o[E];l0(L.styles)||x.forEach(I=>{h+=tD(L.id,I,L.styles)}),l0(L.textStyles)||(h+=tD(L.id,"tspan",L.textStyles))}}return h},nD=(t,i,o,l)=>{const h=cue(t,i,o),p=Kq(i,h,t.themeVariables);return o4(Wq(`${l}{${p}}`),Uq)},iD=(t="",i,o)=>{let l=t;return!o&&!i&&(l=l.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),l=mS(l),l=l.replace(/<br>/g,"<br/>"),l},rD=(t="",i)=>{const o=i?i.viewBox.baseVal.height+"px":nue,l=btoa('<body style="'+rue+'">'+t+"</body>");return`<iframe style="width:${tue};height:${o};${iue}" src="data:text/html;base64,${l}" sandbox="${sue}">
  ${oue}
</iframe>`},Mx=(t,i,o,l,h)=>{const p=t.append("div");p.attr("id",o),l&&p.attr("style",l);const m=p.append("svg").attr("id",i).attr("width","100%").attr("xmlns",eue);return h&&m.attr("xmlns:xlink",h),m.append("g"),t};function Ax(t,i){return t.append("iframe").attr("id",i).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const sD=(t,i,o,l)=>{var h,p,m;(h=t.getElementById(i))==null||h.remove(),(p=t.getElementById(o))==null||p.remove(),(m=t.getElementById(l))==null||m.remove()},uue=function(t,i,o,l){var h,p,m,b,x;zv(),q1();const E=Ii.detectInit(i);E&&(If(E),a4(E));const L=Qe();y.debug(L),i.length>((h=L==null?void 0:L.maxTextSize)!=null?h:5e4)&&(i=$I),i=i.replace(/\r\n?/g,`
`);const I="#"+t,F="i"+t,W="#"+F,K="d"+t,re="#"+K;let se=dn("body");const pe=L.securityLevel===qI,he=L.securityLevel===XI,Ce=L.fontFamily;if(l!==void 0){if(l&&(l.innerHTML=""),pe){const ln=Ax(dn(l),F);se=dn(ln.nodes()[0].contentDocument.body),se.node().style.margin=0}else se=dn(l);Mx(se,t,K,`font-family: ${Ce}`,ZI)}else{if(sD(document,t,K,F),pe){const ln=Ax(dn("body"),F);se=dn(ln.nodes()[0].contentDocument.body),se.node().style.margin=0}else se=dn("body");Mx(se,t,K)}i=eD(i);let Le,Ve;try{if(Le=dS(i),"then"in Le)throw new Error("Diagram is a promise. Use renderAsync.")}catch(ln){Le=new fS("error"),Ve=ln}const je=se.select(re).node(),Pe=Le.type,ze=je.firstChild,xe=ze.firstChild,_e=pS.includes(Pe)?Le.renderer.getClasses(i,Le):{},de=nD(L,Pe,_e,I),te=document.createElement("style");te.innerHTML=de,ze.insertBefore(te,xe);try{Le.renderer.draw(i,t,f2.version,Le)}catch(ln){throw uS.draw(i,t,f2.version),ln}const be=se.select(`${re} svg`),q=(m=(p=Le.db).getAccTitle)==null?void 0:m.call(p),ot=(x=(b=Le.db).getAccDescription)==null?void 0:x.call(b);oD(Pe,be,q,ot),se.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",KI);let Z=se.select(re).node().innerHTML;if(y.debug("config.arrowMarkerAbsolute",L.arrowMarkerAbsolute),Z=iD(Z,pe,lo(L.arrowMarkerAbsolute)),pe){const ln=se.select(re+" svg").node();Z=rD(Z,ln)}else he||(Z=V1.sanitize(Z,{ADD_TAGS:JI,ADD_ATTR:QI}));if(o!==void 0)switch(Pe){case"flowchart":case"flowchart-v2":o(Z,$u.bindFunctions);break;case"gantt":o(Z,IC.bindFunctions);break;case"class":case"classDiagram":o(Z,Jm.bindFunctions);break;default:o(Z)}else y.debug("CB = undefined!");eI();const xn=dn(pe?W:re).node();if(xn&&"remove"in xn&&xn.remove(),Ve)throw Ve;return Z},hue=async function(t,i,o,l){var h,p,m,b,x;zv(),q1();const E=Ii.detectInit(i);E&&(If(E),a4(E));const L=Qe();y.debug(L),i.length>((h=L==null?void 0:L.maxTextSize)!=null?h:5e4)&&(i=$I),i=i.replace(/\r\n?/g,`
`);const I="#"+t,F="i"+t,W="#"+F,K="d"+t,re="#"+K;let se=dn("body");const pe=L.securityLevel===qI,he=L.securityLevel===XI,Ce=L.fontFamily;if(l!==void 0){if(l&&(l.innerHTML=""),pe){const ln=Ax(dn(l),F);se=dn(ln.nodes()[0].contentDocument.body),se.node().style.margin=0}else se=dn(l);Mx(se,t,K,`font-family: ${Ce}`,ZI)}else{if(sD(document,t,K,F),pe){const ln=Ax(dn("body"),F);se=dn(ln.nodes()[0].contentDocument.body),se.node().style.margin=0}else se=dn("body");Mx(se,t,K)}i=eD(i);let Le,Ve;try{Le=await dS(i)}catch(ln){Le=new fS("error"),Ve=ln}const je=se.select(re).node(),Pe=Le.type,ze=je.firstChild,xe=ze.firstChild,_e=pS.includes(Pe)?Le.renderer.getClasses(i,Le):{},de=nD(L,Pe,_e,I),te=document.createElement("style");te.innerHTML=de,ze.insertBefore(te,xe);try{await Le.renderer.draw(i,t,f2.version,Le)}catch(ln){throw uS.draw(i,t,f2.version),ln}const be=se.select(`${re} svg`),q=(m=(p=Le.db).getAccTitle)==null?void 0:m.call(p),ot=(x=(b=Le.db).getAccDescription)==null?void 0:x.call(b);oD(Pe,be,q,ot),se.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",KI);let Z=se.select(re).node().innerHTML;if(y.debug("config.arrowMarkerAbsolute",L.arrowMarkerAbsolute),Z=iD(Z,pe,lo(L.arrowMarkerAbsolute)),pe){const ln=se.select(re+" svg").node();Z=rD(Z,ln)}else he||(Z=V1.sanitize(Z,{ADD_TAGS:JI,ADD_ATTR:QI}));if(o!==void 0)switch(Pe){case"flowchart":case"flowchart-v2":o(Z,$u.bindFunctions);break;case"gantt":o(Z,IC.bindFunctions);break;case"class":case"classDiagram":o(Z,Jm.bindFunctions);break;default:o(Z)}else y.debug("CB = undefined!");eI();const xn=dn(pe?W:re).node();if(xn&&"remove"in xn&&xn.remove(),Ve)throw Ve;return Z};let qf={};const due=function(t,i,o,l){try{if(i!==void 0)switch(i=i.trim(),o){case"open_directive":qf={};break;case"type_directive":if(!qf)throw new Error("currentDirective is undefined");qf.type=i.toLowerCase();break;case"arg_directive":if(!qf)throw new Error("currentDirective is undefined");qf.args=JSON.parse(i);break;case"close_directive":fue(t,qf,l),qf=void 0;break}}catch(h){y.error(`Error while rendering sequenceDiagram directive: ${i} jison context: ${o}`),y.error(h.message)}},fue=function(t,i,o){switch(y.debug(`Directive type=${i.type} with args:`,i.args),i.type){case"init":case"initialize":{["config"].forEach(l=>{i.args[l]!==void 0&&(o==="flowchart-v2"&&(o="flowchart"),i.args[o]=i.args[l],delete i.args[l])}),y.debug("sanitize in handleDirective",i.args),If(i.args),y.debug("sanitize in handleDirective (done)",i.args),a4(i.args);break}case"wrap":case"nowrap":t&&t.setWrap&&t.setWrap(i.type==="wrap");break;case"themeCss":y.warn("themeCss encountered");break;default:y.warn(`Unhandled directive: source: '%%{${i.type}: ${JSON.stringify(i.args?i.args:{})}}%%`,i);break}};function pue(t={}){var i;(t==null?void 0:t.fontFamily)&&!((i=t.themeVariables)!=null&&i.fontFamily)&&(t.themeVariables={fontFamily:t.fontFamily}),Hq(t),(t==null?void 0:t.theme)&&t.theme in Iu?t.themeVariables=Iu[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Iu.default.getThemeVariables(t.themeVariables));const o=typeof t=="object"?Gq(t):eL();w(o.logLevel),zv()}function oD(t,i,o,l){Jce(i,t),Qce(i,o,l,i.attr("id"))}const ss=Object.freeze({render:uue,renderAsync:hue,parse:aue,parseAsync:lue,parseDirective:due,initialize:pue,getConfig:Qe,setConfig:tL,getSiteConfig:eL,updateSiteConfig:Yq,reset:()=>{q1()},globalReset:()=>{q1(Zm)},defaultConfig:Zm});w(Qe().logLevel),q1(Qe());let aD=!1;const mue=async function(t,i,o){try{aD?await uD(t,i,o):cD(t,i,o)}catch(l){y.warn("Syntax Error rendering"),Qk(l)&&y.warn(l.str),vl.parseError&&vl.parseError(l)}},lD=(t,i,o)=>{y.warn(t),Qk(t)?(o&&o(t.str,t.hash),i.push({...t,message:t.str,error:t})):(o&&o(t),t instanceof Error&&i.push({str:t.message,message:t.message,hash:t.name,error:t}))},cD=function(t,i,o){const l=ss.getConfig();t&&(vl.sequenceConfig=t),y.debug(`${o?"":"No "}Callback function found`);let h;if(i===void 0)h=document.querySelectorAll(".mermaid");else if(typeof i=="string")h=document.querySelectorAll(i);else if(i instanceof HTMLElement)h=[i];else if(i instanceof NodeList)h=i;else throw new Error("Invalid argument nodes for mermaid.init");y.debug(`Found ${h.length} diagrams`),(t==null?void 0:t.startOnLoad)!==void 0&&(y.debug("Start On Load: "+(t==null?void 0:t.startOnLoad)),ss.updateSiteConfig({startOnLoad:t==null?void 0:t.startOnLoad}));const p=new Ii.initIdGenerator(l.deterministicIds,l.deterministicIDSeed);let m;const b=[];for(const x of Array.from(h)){y.info("Rendering diagram: "+x.id);/*! Check if previously processed */if(x.getAttribute("data-processed"))continue;x.setAttribute("data-processed","true");const E=`mermaid-${p.next()}`;m=x.innerHTML,m=Ii.entityDecode(m).trim().replace(/<br\s*\/?>/gi,"<br/>");const L=Ii.detectInit(m);L&&y.debug("Detected early reinit: ",L);try{ss.render(E,m,(I,F)=>{x.innerHTML=I,o!==void 0&&o(E),F&&F(x)},x)}catch(I){lD(I,b,vl.parseError)}}if(b.length>0)throw b[0]},gue=t=>{for(const{id:i,detector:o,loader:l}of t)N8(i,o,l)},vue=async t=>{y.debug(`Loading ${t.length} external diagrams`);const o=(await Promise.allSettled(t.map(async({id:l,detector:h,loader:p})=>{const{diagram:m}=await p();uo(l,m,h)}))).filter(l=>l.status==="rejected");if(o.length>0){y.error(`Failed to load ${o.length} external diagrams`);for(const l of o)y.error(l);throw new Error(`Failed to load ${o.length} external diagrams`)}},uD=async function(t,i,o){const l=ss.getConfig();t&&(vl.sequenceConfig=t),y.debug(`${o?"":"No "}Callback function found`);let h;if(i===void 0)h=document.querySelectorAll(".mermaid");else if(typeof i=="string")h=document.querySelectorAll(i);else if(i instanceof HTMLElement)h=[i];else if(i instanceof NodeList)h=i;else throw new Error("Invalid argument nodes for mermaid.init");y.debug(`Found ${h.length} diagrams`),(t==null?void 0:t.startOnLoad)!==void 0&&(y.debug("Start On Load: "+(t==null?void 0:t.startOnLoad)),ss.updateSiteConfig({startOnLoad:t==null?void 0:t.startOnLoad}));const p=new Ii.initIdGenerator(l.deterministicIds,l.deterministicIDSeed);let m;const b=[];for(const x of Array.from(h)){y.info("Rendering diagram: "+x.id);/*! Check if previously processed */if(x.getAttribute("data-processed"))continue;x.setAttribute("data-processed","true");const E=`mermaid-${p.next()}`;m=x.innerHTML,m=Ii.entityDecode(m).trim().replace(/<br\s*\/?>/gi,"<br/>");const L=Ii.detectInit(m);L&&y.debug("Detected early reinit: ",L);try{await ss.renderAsync(E,m,(I,F)=>{x.innerHTML=I,o!==void 0&&o(E),F&&F(x)},x)}catch(I){lD(I,b,vl.parseError)}}if(b.length>0)throw b[0]},yue=function(t){ss.initialize(t)},_ue=async(t,{lazyLoad:i=!0}={})=>{i?gue(t):await vue(t),aD=!0},hD=function(){if(vl.startOnLoad){const{startOnLoad:t}=ss.getConfig();t&&vl.init()}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",hD,!1)}const bue=function(t){vl.parseError=t},xue=t=>ss.parse(t,vl.parseError),Lx=[];let gS=!1;const dD=async()=>{if(!gS){for(gS=!0;Lx.length>0;){const t=Lx.shift();if(t)try{await t()}catch(i){y.error("Error executing queue",i)}}gS=!1}},wue=t=>new Promise((i,o)=>{const l=()=>new Promise((h,p)=>{ss.parseAsync(t,vl.parseError).then(m=>{h(m),i(m)},m=>{y.error("Error parsing",m),p(m),o(m)})});Lx.push(l),dD()}),kue=(t,i,o,l)=>new Promise((h,p)=>{const m=()=>new Promise((b,x)=>{ss.renderAsync(t,i,o,l).then(E=>{b(E),h(E)},E=>{y.error("Error parsing",E),x(E),p(E)})});Lx.push(m),dD()}),vl={startOnLoad:!0,diagrams:{},mermaidAPI:ss,parse:xue,parseAsync:wue,render:ss.render,renderAsync:kue,init:mue,initThrowsErrors:cD,initThrowsErrorsAsync:uD,registerExternalDiagrams:_ue,initialize:yue,parseError:void 0,contentLoaded:hD,setParseErrorHandler:bue};return vl})})(yT,yT.exports);const v3=d_e(yT.exports);let f_e=r=>crypto.getRandomValues(new Uint8Array(r)),p_e=(r,e,n)=>{let s=(2<<Math.log(r.length-1)/Math.LN2)-1,a=-~(1.6*s*e/r.length);return(u=e)=>{let d="";for(;;){let f=n(a),g=a;for(;g--;)if(d+=r[f[g]&s]||"",d.length===u)return d}}},m_e=(r,e=21)=>p_e(r,e,f_e);const g_e=typeof atob=="function",i6=typeof Buffer=="function",pN=typeof TextDecoder=="function"?new TextDecoder:void 0;typeof TextEncoder=="function"&&new TextEncoder;const v_e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y_e=Array.prototype.slice.call(v_e),Xx=(r=>{let e={};return r.forEach((n,s)=>e[n]=s),e})(y_e),__e=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ap=String.fromCharCode.bind(String),mN=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):r=>new Uint8Array(Array.prototype.slice.call(r,0)),wV=r=>r.replace(/[^A-Za-z0-9\+\/]/g,""),b_e=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,x_e=r=>{switch(r.length){case 4:var e=(7&r.charCodeAt(0))<<18|(63&r.charCodeAt(1))<<12|(63&r.charCodeAt(2))<<6|63&r.charCodeAt(3),n=e-65536;return Ap((n>>>10)+55296)+Ap((n&1023)+56320);case 3:return Ap((15&r.charCodeAt(0))<<12|(63&r.charCodeAt(1))<<6|63&r.charCodeAt(2));default:return Ap((31&r.charCodeAt(0))<<6|63&r.charCodeAt(1))}},w_e=r=>r.replace(b_e,x_e),k_e=r=>{if(r=r.replace(/\s+/g,""),!__e.test(r))throw new TypeError("malformed base64.");r+="==".slice(2-(r.length&3));let e,n="",s,a;for(let u=0;u<r.length;)e=Xx[r.charAt(u++)]<<18|Xx[r.charAt(u++)]<<12|(s=Xx[r.charAt(u++)])<<6|(a=Xx[r.charAt(u++)]),n+=s===64?Ap(e>>16&255):a===64?Ap(e>>16&255,e>>8&255):Ap(e>>16&255,e>>8&255,e&255);return n},kV=g_e?r=>atob(wV(r)):i6?r=>Buffer.from(r,"base64").toString("binary"):k_e,C_e=i6?r=>mN(Buffer.from(r,"base64")):r=>mN(kV(r).split("").map(e=>e.charCodeAt(0))),S_e=i6?r=>Buffer.from(r,"base64").toString("utf8"):pN?r=>pN.decode(C_e(r)):r=>w_e(kV(r)),E_e=r=>wV(r.replace(/[-_]/g,e=>e=="-"?"+":"/")),T_e=r=>S_e(E_e(r));const M_e=()=>({theme:"default"});v3.startOnLoad=!1;v3.initialize({startOnLoad:!1});const A_e=m_e("abcedfghicklmn",10),gN=new Map;function L_e(r,e){const n=r+JSON.stringify(e),s=gN.get(n);if(s)return s;v3.initialize({startOnLoad:!1,...b9(M_e()||{}),...b9(e)});const a=T_e(r),u=A_e(),d=v3.render(u,a);return gN.set(n,d),d}const R_e=yi({__name:"ShadowRoot",props:{innerHtml:null},emits:["shadow"],setup(r,{emit:e}){const n=r;Dn(Zn);const s=Tn(),a=Ht(()=>s.value?s.value.shadowRoot||s.value.attachShadow({mode:"open"}):null);return kh(()=>{a.value&&(e("shadow",a.value),a.value.innerHTML=n.innerHtml)}),(u,d)=>(Ge(),Ct("div",{ref_key:"el",ref:s},null,512))}}),To=yi({__name:"Mermaid",props:{code:null,scale:null,theme:null},setup(r){const e=r;Dn(Zn);const n=pu(),s=Tn(),a=Ht(()=>L_e(e.code||"",{theme:e.theme||($3.value?"dark":void 0),...n.attrs})),u=Ht(()=>a.value),d=Tn();return Ni(u,()=>{d.value=void 0}),kh(()=>{var g,_,y;const f=(_=(g=s.value)==null?void 0:g.children)==null?void 0:_[0];if(f&&f.hasAttribute("viewBox")&&d.value==null){const w=parseFloat(((y=f.getAttribute("viewBox"))==null?void 0:y.split(" ")[3])||"");d.value=isNaN(w)?void 0:w}},{flush:"post"}),kh(()=>{var g,_;const f=(_=(g=s.value)==null?void 0:g.children)==null?void 0:_[0];f!=null&&e.scale!=null&&d.value!=null&&(f.setAttribute("height",`${d.value*e.scale}`),f.removeAttribute("width"),f.removeAttribute("style"))},{flush:"post"}),(f,g)=>(Ge(),Jn(R_e,{ref_key:"el",ref:s,class:"mermaid","inner-html":ft(u),onShadow:g[0]||(g[0]=_=>s.value=_)},null,8,["inner-html"]))}}),P_e=G("h1",null,"Design Level Event Storming",-1),I_e={__name:"5",setup(r){const e={class:"text-white",layout:"new-section",srcSequence:"pages/event-storming.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds;return Ge(),Jn(Ah,jr(zr(e)),{default:Xn(()=>[P_e,Bt(a,pr({code:"Zmxvd2NoYXJ0IExSCgpSZWdpc3Rlck11c2ljYWxXb3JrOjo6Y29tbWFuZApDbGFpbU11c2ljYWxXb3JrOjo6Y29tbWFuZAoKTXVzaWNhbFdvcmtSZWdpc3RlcmVkOjo6ZXZlbnQKTXVzaWNhbFdvcmtDbGFpbWVkOjo6ZXZlbnQKTXVzaWNhbFdvcmtGdWxseUNsYWltZWQ6OjpldmVudAoKTXVzaWNhbFdvcmtPdmVyY2xhaW1lZDo6OmVycm9yCk11c2ljYWxXb3JrQWxyZWFkeVJlZ2lzdGVyZWQ6OjplcnJvcgoKc3ViZ3JhcGggTXVzaWNhbFdvcmtbTXVzaWNhbFdvcmtdCmRpcmVjdGlvbiBMUgoKTm90UmVnaXN0ZXJlZFlldFtJcyBub3QgYWxyZWFkeSByZWdpc3RlcmVkXQoKRnVsbHlDbGFpbWVkW0lzIGZ1bGx5IGNsYWltZWRdCgpPdmVyY2xhaW1bSXMgb3ZlcmNsYWltZWRdCgoKZW5kCgpzdHlsZSBNdXNpY2FsV29yayBmaWxsOiNiZDlkNDA7CgoKUmVnaXN0ZXJNdXNpY2FsV29yay0uLU11c2ljYWxXb3JrCkNsYWltTXVzaWNhbFdvcmstLi1NdXNpY2FsV29yawoKCk11c2ljYWxXb3JrLS4tTXVzaWNhbFdvcmtSZWdpc3RlcmVkCk11c2ljYWxXb3JrLS4tTXVzaWNhbFdvcmtBbHJlYWR5UmVnaXN0ZXJlZAoKTXVzaWNhbFdvcmstLi1NdXNpY2FsV29ya0NsYWltZWQKTXVzaWNhbFdvcmstLi1NdXNpY2FsV29ya0Z1bGx5Q2xhaW1lZApNdXNpY2FsV29yay0uLU11c2ljYWxXb3JrT3ZlcmNsYWltZWQKCmxpbmtTdHlsZSAwIHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKbGlua1N0eWxlIDEgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgMiBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CmxpbmtTdHlsZSAzIHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKbGlua1N0eWxlIDQgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgNSBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CmxpbmtTdHlsZSA2IHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKCmNsYXNzRGVmIGV2ZW50IGZpbGw6I2Y1ODMxODsKY2xhc3NEZWYgYWdncmVnYXRlIGZpbGw6I2JkOWQ0MDsKY2xhc3NEZWYgY29tbWFuZCBmaWxsOiM0OGExZjA7CmNsYXNzRGVmIGVycm9yIGZpbGw6I2Y0NDMzNjs"},{}),null,16),Bt(u)]),_:1},16)}}},D_e=G("h1",null,"Example Mapping",-1),N_e=G("h4",null,"Register new Musical Work",-1),O_e={__name:"6",setup(r){const e={class:"text-white",layout:"new-section",srcSequence:"pages/example-mapping.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds;return Ge(),Jn(Ah,jr(zr(e)),{default:Xn(()=>[D_e,N_e,Bt(a,pr({code:"Zmxvd2NoYXJ0IFRCIAoKc3ViZ3JhcGggR2l2ZW5bR2l2ZW5dCmRpcmVjdGlvbiBMUgoKTm9FdmVudHMKCmVuZAoKCnN1YmdyYXBoIFdoZW5bV2hlbl0KZGlyZWN0aW9uIExSCgpSZWdpc3Rlck11c2ljYWxXb3JrOjo6Y29tbWFuZAoKZW5kCgoKc3ViZ3JhcGggVGhlbltUaGVuXQpkaXJlY3Rpb24gTFIKCk11c2ljYWxXb3JrUmVnaXN0ZXJlZDo6OmV2ZW50CgplbmQKCkdpdmVuLS4tV2hlbgpXaGVuLS4tVGhlbgoKbGlua1N0eWxlIDAgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgMSBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CgpjbGFzc0RlZiBldmVudCBmaWxsOiNmNTgzMTg7CmNsYXNzRGVmIGNvbW1hbmQgZmlsbDojNDhhMWYwOwpjbGFzc0RlZiBlcnJvciBmaWxsOiNmNDQzMzY7"},{scale:.8}),null,16),Bt(u)]),_:1},16)}}},F_e={class:"slidev-icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},B_e=G("path",{fill:"currentColor",d:"M200 32h-36.3a47.8 47.8 0 0 0-71.4 0H56a16 16 0 0 0-16 16v168a16 16 0 0 0 16 16h144a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16Zm-72 0a32.1 32.1 0 0 1 32 32H96a32.1 32.1 0 0 1 32-32Zm72 184H56V48h26.8A47.2 47.2 0 0 0 80 64v8a8 8 0 0 0 8 8h80a8 8 0 0 0 8-8v-8a47.2 47.2 0 0 0-2.8-16H200Z"},null,-1),V_e=[B_e];function W_e(r,e){return Ge(),Ct("svg",F_e,V_e)}const z_e={name:"ph-clipboard",render:W_e},U_e={class:"slidev-icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},G_e=G("path",{fill:"currentColor",d:"M177.8 98.5a8 8 0 0 1-.3 11.3l-58.6 56a8.1 8.1 0 0 1-5.6 2.2a7.9 7.9 0 0 1-5.5-2.2l-29.3-28a8 8 0 1 1 11-11.6l23.8 22.7l53.2-50.7a8 8 0 0 1 11.3.3ZM232 128A104 104 0 1 1 128 24a104.2 104.2 0 0 1 104 104Zm-16 0a88 88 0 1 0-88 88a88.1 88.1 0 0 0 88-88Z"},null,-1),H_e=[G_e];function Y_e(r,e){return Ge(),Ct("svg",U_e,H_e)}const j_e={name:"ph-check-circle",render:Y_e};/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function CV(r){return typeof r>"u"||r===null}function $_e(r){return typeof r=="object"&&r!==null}function q_e(r){return Array.isArray(r)?r:CV(r)?[]:[r]}function X_e(r,e){var n,s,a,u;if(e)for(u=Object.keys(e),n=0,s=u.length;n<s;n+=1)a=u[n],r[a]=e[a];return r}function Z_e(r,e){var n="",s;for(s=0;s<e;s+=1)n+=r;return n}function K_e(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}var J_e=CV,Q_e=$_e,ebe=q_e,tbe=Z_e,nbe=K_e,ibe=X_e,r6={isNothing:J_e,isObject:Q_e,toArray:ebe,repeat:tbe,isNegativeZero:nbe,extend:ibe};function SV(r,e){var n="",s=r.reason||"(unknown reason)";return r.mark?(r.mark.name&&(n+='in "'+r.mark.name+'" '),n+="("+(r.mark.line+1)+":"+(r.mark.column+1)+")",!e&&r.mark.snippet&&(n+=`

`+r.mark.snippet),s+" "+n):s}function Hy(r,e){Error.call(this),this.name="YAMLException",this.reason=r,this.mark=e,this.message=SV(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Hy.prototype=Object.create(Error.prototype);Hy.prototype.constructor=Hy;Hy.prototype.toString=function(e){return this.name+": "+SV(this,e)};var Cp=Hy,rbe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],sbe=["scalar","sequence","mapping"];function obe(r){var e={};return r!==null&&Object.keys(r).forEach(function(n){r[n].forEach(function(s){e[String(s)]=n})}),e}function abe(r,e){if(e=e||{},Object.keys(e).forEach(function(n){if(rbe.indexOf(n)===-1)throw new Cp('Unknown option "'+n+'" is met in definition of "'+r+'" YAML type.')}),this.options=e,this.tag=r,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=obe(e.styleAliases||null),sbe.indexOf(this.kind)===-1)throw new Cp('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}var Go=abe;function vN(r,e){var n=[];return r[e].forEach(function(s){var a=n.length;n.forEach(function(u,d){u.tag===s.tag&&u.kind===s.kind&&u.multi===s.multi&&(a=d)}),n[a]=s}),n}function lbe(){var r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function s(a){a.multi?(r.multi[a.kind].push(a),r.multi.fallback.push(a)):r[a.kind][a.tag]=r.fallback[a.tag]=a}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(s);return r}function _T(r){return this.extend(r)}_T.prototype.extend=function(e){var n=[],s=[];if(e instanceof Go)s.push(e);else if(Array.isArray(e))s=s.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(s=s.concat(e.explicit));else throw new Cp("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(u){if(!(u instanceof Go))throw new Cp("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(u.loadKind&&u.loadKind!=="scalar")throw new Cp("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(u.multi)throw new Cp("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),s.forEach(function(u){if(!(u instanceof Go))throw new Cp("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(_T.prototype);return a.implicit=(this.implicit||[]).concat(n),a.explicit=(this.explicit||[]).concat(s),a.compiledImplicit=vN(a,"implicit"),a.compiledExplicit=vN(a,"explicit"),a.compiledTypeMap=lbe(a.compiledImplicit,a.compiledExplicit),a};var cbe=_T,ube=new Go("tag:yaml.org,2002:str",{kind:"scalar",construct:function(r){return r!==null?r:""}}),hbe=new Go("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(r){return r!==null?r:[]}}),dbe=new Go("tag:yaml.org,2002:map",{kind:"mapping",construct:function(r){return r!==null?r:{}}}),fbe=new cbe({explicit:[ube,hbe,dbe]});function pbe(r){if(r===null)return!0;var e=r.length;return e===1&&r==="~"||e===4&&(r==="null"||r==="Null"||r==="NULL")}function mbe(){return null}function gbe(r){return r===null}var vbe=new Go("tag:yaml.org,2002:null",{kind:"scalar",resolve:pbe,construct:mbe,predicate:gbe,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function ybe(r){if(r===null)return!1;var e=r.length;return e===4&&(r==="true"||r==="True"||r==="TRUE")||e===5&&(r==="false"||r==="False"||r==="FALSE")}function _be(r){return r==="true"||r==="True"||r==="TRUE"}function bbe(r){return Object.prototype.toString.call(r)==="[object Boolean]"}var xbe=new Go("tag:yaml.org,2002:bool",{kind:"scalar",resolve:ybe,construct:_be,predicate:bbe,represent:{lowercase:function(r){return r?"true":"false"},uppercase:function(r){return r?"TRUE":"FALSE"},camelcase:function(r){return r?"True":"False"}},defaultStyle:"lowercase"});function wbe(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}function kbe(r){return 48<=r&&r<=55}function Cbe(r){return 48<=r&&r<=57}function Sbe(r){if(r===null)return!1;var e=r.length,n=0,s=!1,a;if(!e)return!1;if(a=r[n],(a==="-"||a==="+")&&(a=r[++n]),a==="0"){if(n+1===e)return!0;if(a=r[++n],a==="b"){for(n++;n<e;n++)if(a=r[n],a!=="_"){if(a!=="0"&&a!=="1")return!1;s=!0}return s&&a!=="_"}if(a==="x"){for(n++;n<e;n++)if(a=r[n],a!=="_"){if(!wbe(r.charCodeAt(n)))return!1;s=!0}return s&&a!=="_"}if(a==="o"){for(n++;n<e;n++)if(a=r[n],a!=="_"){if(!kbe(r.charCodeAt(n)))return!1;s=!0}return s&&a!=="_"}}if(a==="_")return!1;for(;n<e;n++)if(a=r[n],a!=="_"){if(!Cbe(r.charCodeAt(n)))return!1;s=!0}return!(!s||a==="_")}function Ebe(r){var e=r,n=1,s;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),s=e[0],(s==="-"||s==="+")&&(s==="-"&&(n=-1),e=e.slice(1),s=e[0]),e==="0")return 0;if(s==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function Tbe(r){return Object.prototype.toString.call(r)==="[object Number]"&&r%1===0&&!r6.isNegativeZero(r)}var Mbe=new Go("tag:yaml.org,2002:int",{kind:"scalar",resolve:Sbe,construct:Ebe,predicate:Tbe,represent:{binary:function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},octal:function(r){return r>=0?"0o"+r.toString(8):"-0o"+r.toString(8).slice(1)},decimal:function(r){return r.toString(10)},hexadecimal:function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Abe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Lbe(r){return!(r===null||!Abe.test(r)||r[r.length-1]==="_")}function Rbe(r){var e,n;return e=r.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var Pbe=/^[-+]?[0-9]+e/;function Ibe(r,e){var n;if(isNaN(r))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(r6.isNegativeZero(r))return"-0.0";return n=r.toString(10),Pbe.test(n)?n.replace("e",".e"):n}function Dbe(r){return Object.prototype.toString.call(r)==="[object Number]"&&(r%1!==0||r6.isNegativeZero(r))}var Nbe=new Go("tag:yaml.org,2002:float",{kind:"scalar",resolve:Lbe,construct:Rbe,predicate:Dbe,represent:Ibe,defaultStyle:"lowercase"}),Obe=fbe.extend({implicit:[vbe,xbe,Mbe,Nbe]}),Fbe=Obe,EV=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),TV=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Bbe(r){return r===null?!1:EV.exec(r)!==null||TV.exec(r)!==null}function Vbe(r){var e,n,s,a,u,d,f,g=0,_=null,y,w,k;if(e=EV.exec(r),e===null&&(e=TV.exec(r)),e===null)throw new Error("Date resolve error");if(n=+e[1],s=+e[2]-1,a=+e[3],!e[4])return new Date(Date.UTC(n,s,a));if(u=+e[4],d=+e[5],f=+e[6],e[7]){for(g=e[7].slice(0,3);g.length<3;)g+="0";g=+g}return e[9]&&(y=+e[10],w=+(e[11]||0),_=(y*60+w)*6e4,e[9]==="-"&&(_=-_)),k=new Date(Date.UTC(n,s,a,u,d,f,g)),_&&k.setTime(k.getTime()-_),k}function Wbe(r){return r.toISOString()}var zbe=new Go("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Bbe,construct:Vbe,instanceOf:Date,represent:Wbe});function Ube(r){return r==="<<"||r===null}var Gbe=new Go("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Ube}),s6=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Hbe(r){if(r===null)return!1;var e,n,s=0,a=r.length,u=s6;for(n=0;n<a;n++)if(e=u.indexOf(r.charAt(n)),!(e>64)){if(e<0)return!1;s+=6}return s%8===0}function Ybe(r){var e,n,s=r.replace(/[\r\n=]/g,""),a=s.length,u=s6,d=0,f=[];for(e=0;e<a;e++)e%4===0&&e&&(f.push(d>>16&255),f.push(d>>8&255),f.push(d&255)),d=d<<6|u.indexOf(s.charAt(e));return n=a%4*6,n===0?(f.push(d>>16&255),f.push(d>>8&255),f.push(d&255)):n===18?(f.push(d>>10&255),f.push(d>>2&255)):n===12&&f.push(d>>4&255),new Uint8Array(f)}function jbe(r){var e="",n=0,s,a,u=r.length,d=s6;for(s=0;s<u;s++)s%3===0&&s&&(e+=d[n>>18&63],e+=d[n>>12&63],e+=d[n>>6&63],e+=d[n&63]),n=(n<<8)+r[s];return a=u%3,a===0?(e+=d[n>>18&63],e+=d[n>>12&63],e+=d[n>>6&63],e+=d[n&63]):a===2?(e+=d[n>>10&63],e+=d[n>>4&63],e+=d[n<<2&63],e+=d[64]):a===1&&(e+=d[n>>2&63],e+=d[n<<4&63],e+=d[64],e+=d[64]),e}function $be(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}var qbe=new Go("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Hbe,construct:Ybe,predicate:$be,represent:jbe}),Xbe=Object.prototype.hasOwnProperty,Zbe=Object.prototype.toString;function Kbe(r){if(r===null)return!0;var e=[],n,s,a,u,d,f=r;for(n=0,s=f.length;n<s;n+=1){if(a=f[n],d=!1,Zbe.call(a)!=="[object Object]")return!1;for(u in a)if(Xbe.call(a,u))if(!d)d=!0;else return!1;if(!d)return!1;if(e.indexOf(u)===-1)e.push(u);else return!1}return!0}function Jbe(r){return r!==null?r:[]}var Qbe=new Go("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Kbe,construct:Jbe}),e2e=Object.prototype.toString;function t2e(r){if(r===null)return!0;var e,n,s,a,u,d=r;for(u=new Array(d.length),e=0,n=d.length;e<n;e+=1){if(s=d[e],e2e.call(s)!=="[object Object]"||(a=Object.keys(s),a.length!==1))return!1;u[e]=[a[0],s[a[0]]]}return!0}function n2e(r){if(r===null)return[];var e,n,s,a,u,d=r;for(u=new Array(d.length),e=0,n=d.length;e<n;e+=1)s=d[e],a=Object.keys(s),u[e]=[a[0],s[a[0]]];return u}var i2e=new Go("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:t2e,construct:n2e}),r2e=Object.prototype.hasOwnProperty;function s2e(r){if(r===null)return!0;var e,n=r;for(e in n)if(r2e.call(n,e)&&n[e]!==null)return!1;return!0}function o2e(r){return r!==null?r:{}}var a2e=new Go("tag:yaml.org,2002:set",{kind:"mapping",resolve:s2e,construct:o2e});Fbe.extend({implicit:[zbe,Gbe],explicit:[qbe,Qbe,i2e,a2e]});function yN(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"\x1B":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"\x85":r===95?"\xA0":r===76?"\u2028":r===80?"\u2029":""}var l2e=new Array(256),c2e=new Array(256);for(var A0=0;A0<256;A0++)l2e[A0]=yN(A0)?1:0,c2e[A0]=yN(A0);function u2e(r){return Array.from(new Set(r))}function _N(...r){let e,n,s;r.length===1?(e=0,s=1,[n]=r):[e,n,s=1]=r;const a=[];let u=e;for(;u<n;)a.push(u),u+=s||1;return a}function h2e(r,e){if(!e||e==="all"||e==="*")return _N(1,r+1);const n=[];for(const s of e.split(/[,;]/g))if(!s.includes("-"))n.push(+s);else{const[a,u]=s.split("-",2);n.push(..._N(+a,u?+u+1:r+1))}return u2e(n).filter(s=>s<=r).sort((s,a)=>s-a)}const d2e=["title"],Qd=yi({__name:"CodeBlockWrapper",props:{ranges:{default:()=>[]},at:{type:Number,default:void 0},maxHeight:{type:String,default:void 0}},setup(r){const e=r;Dn(Zn);const n=Dn(_y),s=Dn(kp),a=Dn(by);function u(w=5){const k=[],S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",A=S.length;for(let P=0;P<w;P++)k.push(S.charAt(Math.floor(Math.random()*A)));return k.join("")}const d=Tn(),f=pu();Jd(()=>{const w=e.at==null?s==null?void 0:s.value.length:e.at,k=Ht(()=>a!=null&&a.value?e.ranges.length-1:Math.min(Math.max(0,((n==null?void 0:n.value)||0)-(w||0)),e.ranges.length-1)),S=Ht(()=>e.ranges[k.value]||"");if(e.ranges.length>=2&&!(a!=null&&a.value)){const A=u(),P=ope(e.ranges.length-1).map(R=>A+R);s!=null&&s.value&&(s.value.push(...P),W3(()=>P.forEach(R=>aT(s.value,R)),f))}kh(()=>{if(!d.value)return;const P=d.value.querySelector(".shiki-dark")?Array.from(d.value.querySelectorAll(".shiki")):[d.value];for(const R of P){const O=Array.from(R.querySelectorAll(".line")),B=h2e(O.length,S.value);if(O.forEach((N,V)=>{const U=B.includes(V+1);N.classList.toggle(vp,!0),N.classList.toggle("highlighted",U),N.classList.toggle("dishonored",!U)}),e.maxHeight){const N=R.querySelector(".line.highlighted");N&&N.scrollIntoView({behavior:"smooth",block:"center"})}}})});const{copied:g,copy:_}=Mpe();function y(){var k,S;const w=(S=(k=d.value)==null?void 0:k.querySelector(".slidev-code"))==null?void 0:S.textContent;w&&_(w)}return(w,k)=>{const S=j_e,A=z_e;return Ge(),Ct("div",{ref_key:"el",ref:d,class:"slidev-code-wrapper relative group",style:Qs({"max-height":e.maxHeight,"overflow-y":e.maxHeight?"scroll":void 0})},[yr(w.$slots,"default"),ft(wr).codeCopy?(Ge(),Ct("button",{key:0,class:"slidev-code-copy absolute top-0 right-0 transition opacity-0 group-hover:opacity-20 hover:!opacity-100",title:ft(g)?"Copied":"Copy",onClick:k[0]||(k[0]=P=>y())},[ft(g)?(Ge(),Jn(S,{key:0,class:"p-2 w-8 h-8"})):(Ge(),Jn(A,{key:1,class:"p-2 w-8 h-8"}))],8,d2e)):pi("v-if",!0)],4)}}}),o6=yi({props:{every:{type:Number,default:1},at:{type:[Number,String],default:null},hide:{type:Boolean,default:!1},fade:{type:Boolean,default:!1}},render(){var u,d;const r=Sh("click"),e=Sh("after"),n=(f,g,_)=>cr(f,[[g,this.at!=null?+this.at+_:null,"",{hide:this.hide,fade:this.fade}]]);let s=(d=(u=this.$slots).default)==null?void 0:d.call(u);if(!s)return;s=VB(s);const a=f=>f.map((g,_)=>Yd(g)?n(po(g),_%this.every===0?r:e,Math.floor(_/this.every)):g);return s.length===1&&["ul","ol"].includes(s[0].type)&&Array.isArray(s[0].children)?po(s[0],{},[a(s[0].children)]):a(s)}}),f2e={class:"slidev-layout"},p2e={class:"grid grid-cols-2 gap-16"},m2e={class:"prose"},g2e={class:"prose"},ef={__name:"two-cols",setup(r){return Dn(Zn),(e,n)=>(Ge(),Ct("div",f2e,[G("div",p2e,[G("div",m2e,[yr(e.$slots,"default")]),G("div",g2e,[yr(e.$slots,"right")])])]))}},v2e=G("h1",null,"Command",-1),y2e=G("ol",null,[G("li",null,"Where to put such method?"),G("li",null,"What about parameters?")],-1),_2e=G("h1",null,"Method",-1),b2e=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"void"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"registerMusicalWork("),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"..."),G("span",{style:{color:"var(--shiki-token-function)"}},")"),G("span",{style:{color:"var(--shiki-color-text)"}}," {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"      ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"}")]),Yt(`
`),G("span",{class:"line"})])],-1),x2e={__name:"7",setup(r){const e={class:"text-white",layout:"two-cols",lineNumbers:!0,highlighter:"shiki",srcSequence:"pages/command-coding-rule-template.md"};return Dn(Zn),(n,s)=>{const a=To,u=o6,d=Qd,f=ds;return Ge(),Jn(ef,jr(zr(e)),{default:Xn(g=>[v2e,Bt(a,pr({code:"Zmxvd2NoYXJ0IFRCIAoKUmVnaXN0ZXJNdXNpY2FsV29yazo6OmNvbW1hbmQKCmNsYXNzRGVmIGV2ZW50IGZpbGw6I2Y1ODMxODsKY2xhc3NEZWYgY29tbWFuZCBmaWxsOiM0OGExZjA7CmNsYXNzRGVmIGVycm9yIGZpbGw6I2Y0NDMzNjs"},{}),null,16),Bt(u,null,{default:Xn(()=>[y2e]),_:1})]),right:Xn(g=>[_2e,Bt(d,pr({},{ranges:["all"]}),{default:Xn(()=>[b2e]),_:1},16),Bt(f)]),_:1},16)}}},w2e=G("h1",null,"Design Level Event Storming",-1),k2e={__name:"8",setup(r){const e={class:"text-white",layout:"new-section",hideInToc:!0,srcSequence:"pages/event-storming.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds;return Ge(),Jn(Ah,jr(zr(e)),{default:Xn(()=>[w2e,Bt(a,pr({code:"Zmxvd2NoYXJ0IExSCgpSZWdpc3Rlck11c2ljYWxXb3JrOjo6Y29tbWFuZApDbGFpbU11c2ljYWxXb3JrOjo6Y29tbWFuZAoKTXVzaWNhbFdvcmtSZWdpc3RlcmVkOjo6ZXZlbnQKTXVzaWNhbFdvcmtDbGFpbWVkOjo6ZXZlbnQKTXVzaWNhbFdvcmtGdWxseUNsYWltZWQ6OjpldmVudAoKTXVzaWNhbFdvcmtPdmVyY2xhaW1lZDo6OmVycm9yCk11c2ljYWxXb3JrQWxyZWFkeVJlZ2lzdGVyZWQ6OjplcnJvcgoKc3ViZ3JhcGggTXVzaWNhbFdvcmtbTXVzaWNhbFdvcmtdCmRpcmVjdGlvbiBMUgoKTm90UmVnaXN0ZXJlZFlldFtJcyBub3QgYWxyZWFkeSByZWdpc3RlcmVkXQoKRnVsbHlDbGFpbWVkW0lzIGZ1bGx5IGNsYWltZWRdCgpPdmVyY2xhaW1bSXMgb3ZlcmNsYWltZWRdCgoKZW5kCgpzdHlsZSBNdXNpY2FsV29yayBmaWxsOiNiZDlkNDA7CgoKUmVnaXN0ZXJNdXNpY2FsV29yay0uLU11c2ljYWxXb3JrCkNsYWltTXVzaWNhbFdvcmstLi1NdXNpY2FsV29yawoKCk11c2ljYWxXb3JrLS4tTXVzaWNhbFdvcmtSZWdpc3RlcmVkCk11c2ljYWxXb3JrLS4tTXVzaWNhbFdvcmtBbHJlYWR5UmVnaXN0ZXJlZAoKTXVzaWNhbFdvcmstLi1NdXNpY2FsV29ya0NsYWltZWQKTXVzaWNhbFdvcmstLi1NdXNpY2FsV29ya0Z1bGx5Q2xhaW1lZApNdXNpY2FsV29yay0uLU11c2ljYWxXb3JrT3ZlcmNsYWltZWQKCmxpbmtTdHlsZSAwIHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKbGlua1N0eWxlIDEgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgMiBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CmxpbmtTdHlsZSAzIHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKbGlua1N0eWxlIDQgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgNSBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CmxpbmtTdHlsZSA2IHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKCmNsYXNzRGVmIGV2ZW50IGZpbGw6I2Y1ODMxODsKY2xhc3NEZWYgYWdncmVnYXRlIGZpbGw6I2JkOWQ0MDsKY2xhc3NEZWYgY29tbWFuZCBmaWxsOiM0OGExZjA7CmNsYXNzRGVmIGVycm9yIGZpbGw6I2Y0NDMzNjs"},{}),null,16),Bt(u)]),_:1},16)}}},C2e=G("h1",null,"Aggregate Root",-1),S2e=G("h1",null,"Command",-1),E2e={class:"animate-pulse",style:{color:"#f26d83"}},T2e=G("ol",null,[G("li",null,"What about parameters?")],-1),M2e=[T2e],A2e=G("h1",null,"Class",-1),L2e=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"class"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"MusicalWork"),G("span",{style:{color:"var(--shiki-color-text)"}},"() {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"      ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"}")]),Yt(`
`),G("span",{class:"line"})])],-1),R2e=G("h1",null,"Method in Class",-1),P2e=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"class"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"MusicalWork"),G("span",{style:{color:"var(--shiki-color-text)"}},"() {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"   ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"void"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"register"),G("span",{style:{color:"var(--shiki-color-text)"}},"(...) {")]),Yt(`
`),G("span",{class:"line"}),Yt(`
`),G("span",{class:"line"}),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    }")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"}")]),Yt(`
`),G("span",{class:"line"})])],-1),I2e={__name:"9",setup(r){const e={class:"text-white",layout:"two-cols",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/aggregate-coding-rule.md"};return Dn(Zn),(n,s)=>{const a=To,u=Qd,d=ds,f=Sh("click");return Ge(),Jn(ef,jr(zr(e)),{default:Xn(g=>[C2e,Bt(a,pr({code:"Zmxvd2NoYXJ0IFRCIAoKTXVzaWNhbFdvcmtbTXVzaWNhbFdvcmtcblxuXG5dOjo6YWdncmVnYXRlCgpjbGFzc0RlZiBhZ2dyZWdhdGUgZmlsbDojYmQ5ZDQwOw"},{}),null,16),cr((Ge(),Ct("div",null,[S2e,Bt(a,pr({code:"Zmxvd2NoYXJ0IFRCIAoKUmVnaXN0ZXJNdXNpY2FsV29yazo6OmNvbW1hbmQKCmNsYXNzRGVmIGV2ZW50IGZpbGw6I2Y1ODMxODsKY2xhc3NEZWYgY29tbWFuZCBmaWxsOiM0OGExZjA7CmNsYXNzRGVmIGVycm9yIGZpbGw6I2Y0NDMzNjs"},{}),null,16)])),[[f,1]]),cr((Ge(),Ct("div",E2e,M2e)),[[f,3]])]),right:Xn(g=>[A2e,Bt(u,pr({},{ranges:["all"]}),{default:Xn(()=>[L2e]),_:1},16),cr((Ge(),Ct("div",null,[R2e,Bt(u,pr({},{ranges:["all"]}),{default:Xn(()=>[P2e]),_:1},16)])),[[f,2]]),Bt(d)]),_:1},16)}}},D2e=G("h1",null,"Example Mapping",-1),N2e=G("h4",null,"Register new Musical Work",-1),O2e={__name:"10",setup(r){const e={class:"text-white",layout:"new-section",hideInToc:!0,srcSequence:"pages/example-mapping.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds;return Ge(),Jn(Ah,jr(zr(e)),{default:Xn(()=>[D2e,N2e,Bt(a,pr({code:"Zmxvd2NoYXJ0IFRCIAoKc3ViZ3JhcGggR2l2ZW5bR2l2ZW5dCmRpcmVjdGlvbiBMUgoKTm9FdmVudHMKCmVuZAoKCnN1YmdyYXBoIFdoZW5bV2hlbl0KZGlyZWN0aW9uIExSCgpSZWdpc3Rlck11c2ljYWxXb3JrOjo6Y29tbWFuZAoKZW5kCgoKc3ViZ3JhcGggVGhlbltUaGVuXQpkaXJlY3Rpb24gTFIKCk11c2ljYWxXb3JrUmVnaXN0ZXJlZDo6OmV2ZW50CgplbmQKCkdpdmVuLS4tV2hlbgpXaGVuLS4tVGhlbgoKbGlua1N0eWxlIDAgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgMSBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CgpjbGFzc0RlZiBldmVudCBmaWxsOiNmNTgzMTg7CmNsYXNzRGVmIGNvbW1hbmQgZmlsbDojNDhhMWYwOwpjbGFzc0RlZiBlcnJvciBmaWxsOiNmNDQzMzY7"},{scale:.8}),null,16),Bt(u)]),_:1},16)}}},F2e=G("h1",null,"Example Mapping",-1),B2e=G("h4",null,"Register Musical Work Exploration",-1),V2e=G("div",{style:{color:"#f26d83"}},"1. What is required to register musical work?",-1),W2e=[V2e],z2e=G("div",{style:{color:"#f26d83"}},"2. Could you provide some example values used for registration?",-1),U2e=[z2e],G2e=G("blockquote",null,[G("p",null,"We need to know who (the creator), under what title and genre is want to register musical work - Jakub (Copyright Officer)")],-1),H2e=[G2e],Y2e=G("br",null,null,-1),j2e=G("br",null,null,-1),$2e=G("br",null,null,-1),q2e=G("div",{class:"animate-pulse",style:{color:"#f26d83"}},"How to model creatorId, workTitle, musicGenre?",-1),X2e=[Y2e,j2e,$2e,q2e],Z2e={__name:"11",setup(r){const e={class:"text-white",layout:"two-cols",hideInToc:!0,srcSequence:"pages/example-mapping-detailed-command-questions.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds,d=Sh("click");return Ge(),Jn(ef,jr(zr(e)),{default:Xn(f=>[F2e,B2e,cr((Ge(),Ct("div",null,W2e)),[[d,1]]),cr((Ge(),Ct("div",null,U2e)),[[d,2]]),cr((Ge(),Ct("div",null,H2e)),[[d,3]]),cr((Ge(),Ct("div",null,X2e)),[[d,5]])]),right:Xn(f=>[cr((Ge(),Ct("div",null,[Bt(a,pr({code:"Zmxvd2NoYXJ0IFRCIAoKc3ViZ3JhcGggR2l2ZW5bR2l2ZW5dCmRpcmVjdGlvbiBMUgoKTm9FdmVudHMKCmVuZAoKCnN1YmdyYXBoIFdoZW5bV2hlbl0KZGlyZWN0aW9uIExSCgpSZWdpc3Rlck11c2ljYWxXb3JrW1JlZ2lzdGVyTXVzaWNhbFdvcms6XG4tIGNyZWF0b3JJZDogJ2JvYi1tYXJsZXktMTIzNCdcbi0gd29ya1RpdGxlOiAnT05FIExPVkUnXG4tIG11c2ljR2VucmU6IFJlZ2dhZV06Ojpjb21tYW5kCgplbmQKCgpzdWJncmFwaCBUaGVuW1RoZW5dCmRpcmVjdGlvbiBMUgoKTXVzaWNhbFdvcmtSZWdpc3RlcmVkOjo6ZXZlbnQKCmVuZAoKR2l2ZW4tLi1XaGVuCldoZW4tLi1UaGVuCgpsaW5rU3R5bGUgMCBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CmxpbmtTdHlsZSAxIHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKCmNsYXNzRGVmIGV2ZW50IGZpbGw6I2Y1ODMxODsKY2xhc3NEZWYgY29tbWFuZCBmaWxsOiM0OGExZjA7CmNsYXNzRGVmIGVycm9yIGZpbGw6I2Y0NDMzNjs"},{}),null,16)])),[[d,4]]),Bt(u)]),_:1},16)}}},K2e=G("h1",null,"Value object",-1),J2e=G("h1",null,"Exploration",-1),Q2e=G("div",{style:{color:"#f26d83"}},"1. What is the source of creator id? How frequent are changes?",-1),exe=[Q2e],txe=G("blockquote",null,[G("p",null,"It comes from external system. Once assigned it doesn\u2019t change - J.")],-1),nxe=[txe],ixe=G("div",{style:{color:"#f26d83"}},"2. Is work title any text?",-1),rxe=[ixe],sxe=G("blockquote",null,[G("p",null,"No, it\u2019s text provided by creator, and it\u2019s always represented in copyright in upper-case - J.")],-1),oxe=[sxe],axe=G("div",{style:{color:"#f26d83"}},"3. Where do we can find possible values for music genre?",-1),lxe=[axe],cxe=G("blockquote",null,[G("p",null,"That\u2019s easy - it\u2019s a standardised list of values- J.")],-1),uxe=[cxe],hxe={__name:"12",setup(r){const e={class:"text-white",layout:"two-cols",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/value-object-exploration.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds,d=Sh("click");return Ge(),Jn(ef,jr(zr(e)),{right:Xn(f=>[cr((Ge(),Ct("div",null,[K2e,Bt(a,pr({code:"Zmxvd2NoYXJ0IExSIAoKQ3JlYXRvcklkW0NyZWF0b3JJZDpcbi0gdW5pcXVlbHkgaWRlbnRpZmllcyBDcmVhdG9yXG4tIGV4dGVybmFsIGlkIGZyb20gY29weXJpZ2h0IHN5c3RlbVxuLSBkb2Vzbid0IGNoYW5nZSBvbmNlIGFzc2lnbmVkXTo6OnZvCldvcmtUaXRsZVtXb3JrVGl0bGU6XG4tIHRleHQgcHJvdmlkZWQgYnkgQ3JlYXRvclxuLSBhbHdheXMgdXBwZXIgY2FzZV06Ojp2bwpNdXNpY0dlbnJlW011c2ljR2VucmU6XG4tIGEgbGlzdCBvZiBwcmUtZGVmaW5lZCB2YWx1ZXMgYnkgaW5kdXN0cnlcbi0gY2hhbmdlcyB2ZXJ5IHJhcmVseV06Ojp2bwoKY2xhc3NEZWYgdm8gZmlsbDojYmQ5ZDQwOw"},{}),null,16)])),[[d,7]])]),default:Xn(f=>[J2e,cr((Ge(),Ct("div",null,exe)),[[d,1]]),cr((Ge(),Ct("div",null,nxe)),[[d,2]]),cr((Ge(),Ct("div",null,rxe)),[[d,3]]),cr((Ge(),Ct("div",null,oxe)),[[d,4]]),cr((Ge(),Ct("div",null,lxe)),[[d,5]]),cr((Ge(),Ct("div",null,uxe)),[[d,6]]),Bt(u)]),_:1},16)}}},dxe=G("h1",null,"Value object",-1),fxe=G("h1",null,"Immutable Class",-1),pxe=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"record"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"CreatorId"),G("span",{style:{color:"var(--shiki-color-text)"}},"("),G("span",{style:{color:"var(--shiki-token-keyword)"}},"String"),G("span",{style:{color:"var(--shiki-color-text)"}}," value) { }")]),Yt(`
`),G("span",{class:"line"})])],-1),mxe=G("br",null,null,-1),gxe=G("br",null,null,-1),vxe=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"record"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"WorkTitle"),G("span",{style:{color:"var(--shiki-color-text)"}},"("),G("span",{style:{color:"var(--shiki-token-keyword)"}},"String"),G("span",{style:{color:"var(--shiki-color-text)"}}," value) {")]),Yt(`
`),G("span",{class:"line"}),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"WorkTitle"),G("span",{style:{color:"var(--shiki-color-text)"}}," {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        value "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-constant)"}},"value"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-function)"}},"toUpperCase"),G("span",{style:{color:"var(--shiki-color-text)"}},"();")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    }")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"}")]),Yt(`
`),G("span",{class:"line"})])],-1),yxe=G("br",null,null,-1),_xe=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"enum"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"MusicGenre"),G("span",{style:{color:"var(--shiki-color-text)"}}," {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    Pop"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," Reggae"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," Rock"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," Metal"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    Jazz"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," Rap"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," Classic")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"}")]),Yt(`
`),G("span",{class:"line"})])],-1),bxe={__name:"13",setup(r){const e={class:"text-white",layout:"two-cols",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/value-object-coding-rule.md"};return Dn(Zn),(n,s)=>{const a=To,u=Qd,d=ds,f=Sh("click");return Ge(),Jn(ef,jr(zr(e)),{default:Xn(g=>[dxe,Bt(a,pr({code:"Zmxvd2NoYXJ0IExSIAoKQ3JlYXRvcklkW0NyZWF0b3JJZDpcbi0gdW5pcXVlbHkgaWRlbnRpZmllcyBDcmVhdG9yXG4tIGV4dGVybmFsIGlkIGZyb20gY29weXJpZ2h0IHN5c3RlbVxuLSBkb2Vzbid0IGNoYW5nZSBvbmNlIGFzc2lnbmVkXTo6OnZvCldvcmtUaXRsZVtXb3JrVGl0bGU6XG4tIHRleHQgcHJvdmlkZWQgYnkgQ3JlYXRvclxuLSBhbHdheXMgdXBwZXIgY2FzZV06Ojp2bwpNdXNpY0dlbnJlW011c2ljR2VucmU6XG4tIGEgbGlzdCBvZiBwcmUtZGVmaW5lZCB2YWx1ZXMgYnkgaW5kdXN0cnlcbi0gY2hhbmdlcyB2ZXJ5IHJhcmVseV06Ojp2bwoKY2xhc3NEZWYgdm8gZmlsbDojYmQ5ZDQwOw"},{}),null,16)]),right:Xn(g=>[cr((Ge(),Ct("div",null,[fxe,Bt(u,pr({},{ranges:["all"]}),{default:Xn(()=>[pxe]),_:1},16),mxe,gxe,Bt(u,pr({},{ranges:["all"]}),{default:Xn(()=>[vxe]),_:1},16),yxe,Bt(u,pr({},{ranges:["all"]}),{default:Xn(()=>[_xe]),_:1},16)])),[[f,1]]),Bt(d)]),_:1},16)}}},a6=yi({props:{at:{type:[Number,String],default:null},hide:{type:Boolean,default:!1},fade:{type:Boolean,default:!1}},render(){return Bt(o6,{every:99999,at:this.at,hide:this.hide,fade:this.fade},{default:this.$slots.default})}}),xxe={class:"slidev-layout full w-full h-full"},g_={__name:"full",setup(r){return Dn(Zn),(e,n)=>(Ge(),Ct("div",xxe,[yr(e.$slots,"default",{class:"w-full h-full"})]))}},wxe=G("h1",null,"Command on Aggregate",-1),kxe=G("h1",null,"Method in Class",-1),Cxe=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"class"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"MusicalWork"),G("span",{style:{color:"var(--shiki-color-text)"}},"() {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"   ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"void"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"register"),G("span",{style:{color:"var(--shiki-color-text)"}},"("),G("span",{style:{color:"var(--shiki-token-keyword)"}},"CreatorId"),G("span",{style:{color:"var(--shiki-color-text)"}}," creatorId"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"WorkTitle"),G("span",{style:{color:"var(--shiki-color-text)"}}," title"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"MusicGenre"),G("span",{style:{color:"var(--shiki-color-text)"}}," genre) {")]),Yt(`
`),G("span",{class:"line"}),Yt(`
`),G("span",{class:"line"}),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    }")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"}")]),Yt(`
`),G("span",{class:"line"})])],-1),Sxe={__name:"14",setup(r){const e={class:"text-white",layout:"full",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/command-coding-rule.md"};return Dn(Zn),(n,s)=>{const a=To,u=Qd,d=a6,f=ds;return Ge(),Jn(g_,jr(zr(e)),{default:Xn(()=>[wxe,Bt(a,pr({code:"Zmxvd2NoYXJ0IExSIAoKTXVzaWNhbFdvcmtbTXVzaWNhbFdvcmtcblxuXG5cbl06OjphZ2dyZWdhdGUKUmVnaXN0ZXJNdXNpY2FsV29ya1tSZWdpc3Rlck11c2ljYWxXb3JrOlxuLSBjcmVhdG9ySWQ6ICdib2ItbWFybGV5LTEyMzQnXG4tIHdvcmtUaXRsZTogJ09ORSBMT1ZFJ1xuLSBtdXNpY0dlbnJlOiBSZWdnYWVdOjo6Y29tbWFuZAoKUmVnaXN0ZXJNdXNpY2FsV29yay0uLU11c2ljYWxXb3JrCgpjbGFzc0RlZiBhZ2dyZWdhdGUgZmlsbDojYmQ5ZDQwOwpjbGFzc0RlZiBjb21tYW5kIGZpbGw6IzQ4YTFmMDs"},{}),null,16),Bt(d,null,{default:Xn(()=>[kxe,Bt(u,pr({},{ranges:["all"]}),{default:Xn(()=>[Cxe]),_:1},16)]),_:1}),Bt(f)]),_:1},16)}}},Exe=G("h1",null,"Design Level Event Storming",-1),Txe={__name:"15",setup(r){const e={class:"text-white",layout:"new-section",hideInToc:!0,srcSequence:"pages/event-storming.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds;return Ge(),Jn(Ah,jr(zr(e)),{default:Xn(()=>[Exe,Bt(a,pr({code:"Zmxvd2NoYXJ0IExSCgpSZWdpc3Rlck11c2ljYWxXb3JrOjo6Y29tbWFuZApDbGFpbU11c2ljYWxXb3JrOjo6Y29tbWFuZAoKTXVzaWNhbFdvcmtSZWdpc3RlcmVkOjo6ZXZlbnQKTXVzaWNhbFdvcmtDbGFpbWVkOjo6ZXZlbnQKTXVzaWNhbFdvcmtGdWxseUNsYWltZWQ6OjpldmVudAoKTXVzaWNhbFdvcmtPdmVyY2xhaW1lZDo6OmVycm9yCk11c2ljYWxXb3JrQWxyZWFkeVJlZ2lzdGVyZWQ6OjplcnJvcgoKc3ViZ3JhcGggTXVzaWNhbFdvcmtbTXVzaWNhbFdvcmtdCmRpcmVjdGlvbiBMUgoKTm90UmVnaXN0ZXJlZFlldFtJcyBub3QgYWxyZWFkeSByZWdpc3RlcmVkXQoKRnVsbHlDbGFpbWVkW0lzIGZ1bGx5IGNsYWltZWRdCgpPdmVyY2xhaW1bSXMgb3ZlcmNsYWltZWRdCgoKZW5kCgpzdHlsZSBNdXNpY2FsV29yayBmaWxsOiNiZDlkNDA7CgoKUmVnaXN0ZXJNdXNpY2FsV29yay0uLU11c2ljYWxXb3JrCkNsYWltTXVzaWNhbFdvcmstLi1NdXNpY2FsV29yawoKCk11c2ljYWxXb3JrLS4tTXVzaWNhbFdvcmtSZWdpc3RlcmVkCk11c2ljYWxXb3JrLS4tTXVzaWNhbFdvcmtBbHJlYWR5UmVnaXN0ZXJlZAoKTXVzaWNhbFdvcmstLi1NdXNpY2FsV29ya0NsYWltZWQKTXVzaWNhbFdvcmstLi1NdXNpY2FsV29ya0Z1bGx5Q2xhaW1lZApNdXNpY2FsV29yay0uLU11c2ljYWxXb3JrT3ZlcmNsYWltZWQKCmxpbmtTdHlsZSAwIHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKbGlua1N0eWxlIDEgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgMiBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CmxpbmtTdHlsZSAzIHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKbGlua1N0eWxlIDQgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgNSBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CmxpbmtTdHlsZSA2IHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKCmNsYXNzRGVmIGV2ZW50IGZpbGw6I2Y1ODMxODsKY2xhc3NEZWYgYWdncmVnYXRlIGZpbGw6I2JkOWQ0MDsKY2xhc3NEZWYgY29tbWFuZCBmaWxsOiM0OGExZjA7CmNsYXNzRGVmIGVycm9yIGZpbGw6I2Y0NDMzNjs"},{}),null,16),Bt(u)]),_:1},16)}}},Mxe=G("h1",null,"Example Mapping",-1),Axe=G("h4",null,"Musical Work Registered",-1),Lxe=G("div",{style:{color:"#f26d83"}},"1. What does it mean that musical work is registered?",-1),Rxe=[Lxe],Pxe=G("div",{style:{color:"#f26d83"}},"2. How can we reference a registered musical work?",-1),Ixe=[Pxe],Dxe=G("div",{style:{color:"#f26d83"}},"3. What is changing after registration?",-1),Nxe=[Dxe],Oxe=G("blockquote",null,[G("p",null,"After successful musical work registration, work status changes to registered, and we are able to locate work to see registration details like: title, genre, who and when registered it - Jakub (Copyright Officer)")],-1),Fxe=[Oxe],Bxe={__name:"16",setup(r){const e={class:"text-white",layout:"two-cols",hideInToc:!0,srcSequence:"pages/example-mapping-detailed-event.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds,d=Sh("click");return Ge(),Jn(ef,jr(zr(e)),{default:Xn(f=>[Mxe,Axe,cr((Ge(),Ct("div",null,Rxe)),[[d,1]]),cr((Ge(),Ct("div",null,Ixe)),[[d,2]]),cr((Ge(),Ct("div",null,Nxe)),[[d,3]]),cr((Ge(),Ct("div",null,Fxe)),[[d,4]])]),right:Xn(f=>[cr((Ge(),Ct("div",null,[Bt(a,pr({code:"Zmxvd2NoYXJ0IFRCIAoKc3ViZ3JhcGggR2l2ZW5bR2l2ZW5dCmRpcmVjdGlvbiBMUgoKTm9FdmVudHMKCmVuZAoKCnN1YmdyYXBoIFdoZW5bV2hlbl0KZGlyZWN0aW9uIExSCgpSZWdpc3Rlck11c2ljYWxXb3JrW1JlZ2lzdGVyTXVzaWNhbFdvcms6XG4tIGNyZWF0b3JJZDogJ2JvYi1tYXJsZXktMTIzNCdcbi0gd29ya1RpdGxlOiAnT05FIExPVkUnXG4tIG11c2ljR2VucmU6IFJlZ2dhZV06Ojpjb21tYW5kCgplbmQKCgpzdWJncmFwaCBUaGVuW1RoZW5dCmRpcmVjdGlvbiBMUgoKTXVzaWNhbFdvcmtSZWdpc3RlcmVkW011c2ljYWxXb3JrUmVnaXN0ZXJlZDpcbi0gbXVzaWNhbFdvcmtJZDogVVVJRFxuLSByZWdpc3RlcmVkQnk6ICdib2ItbWFybGV5LTEyMzQnXG4tIHdvcmtUaXRsZTogJ09ORSBMT1ZFJ1xuLSBtdXNpY0dlbnJlOiBSZWdnYWVcbi0gcmVnaXN0ZXJlZEF0OiAnMTk4NC0wNC0xNicgXTo6OmV2ZW50CgplbmQKCkdpdmVuLS4tV2hlbgpXaGVuLS4tVGhlbgoKbGlua1N0eWxlIDAgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgMSBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CgpjbGFzc0RlZiBldmVudCBmaWxsOiNmNTgzMTg7CmNsYXNzRGVmIGNvbW1hbmQgZmlsbDojNDhhMWYwOw"},{scale:.8}),null,16)])),[[d,5]]),Bt(u)]),_:1},16)}}},Vxe=G("h1",null,"Example Mapping",-1),Wxe=G("h4",null,"Register new Musical Work",-1),zxe={__name:"17",setup(r){const e={class:"text-white",layout:"new-section",hideInToc:!0,srcSequence:"pages/example-mapping-detailed.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds;return Ge(),Jn(Ah,jr(zr(e)),{default:Xn(d=>[Vxe,Wxe,Bt(a,pr({code:"Zmxvd2NoYXJ0IFRCIAoKc3ViZ3JhcGggR2l2ZW5bR2l2ZW5dCmRpcmVjdGlvbiBMUgoKTm9FdmVudHMKCmVuZAoKCnN1YmdyYXBoIFdoZW5bV2hlbl0KZGlyZWN0aW9uIExSCgpSZWdpc3Rlck11c2ljYWxXb3JrW1JlZ2lzdGVyTXVzaWNhbFdvcms6XG4tIGNyZWF0b3JJZDogJ2JvYi1tYXJsZXktMTIzNCdcbi0gd29ya1RpdGxlOiAnT05FIExPVkUnXG4tIG11c2ljR2VucmU6IFJlZ2dhZV06Ojpjb21tYW5kCgplbmQKCgpzdWJncmFwaCBUaGVuW1RoZW5dCmRpcmVjdGlvbiBMUgoKTXVzaWNhbFdvcmtSZWdpc3RlcmVkW011c2ljYWxXb3JrUmVnaXN0ZXJlZDpcbi0gbXVzaWNhbFdvcmtJZDogVVVJRFxuLSByZWdpc3RlcmVkQnk6ICdib2ItbWFybGV5LTEyMzQnXG4tIHdvcmtUaXRsZTogJ09ORSBMT1ZFJ1xuLSBtdXNpY0dlbnJlOiBSZWdnYWVcbi0gcmVnaXN0ZXJlZEF0OiAnMTk4NC0wNC0xNicgXTo6OmV2ZW50CgplbmQKCkdpdmVuLS4tV2hlbgpXaGVuLS4tVGhlbgoKbGlua1N0eWxlIDAgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgMSBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CgpjbGFzc0RlZiBldmVudCBmaWxsOiNmNTgzMTg7CmNsYXNzRGVmIGNvbW1hbmQgZmlsbDojNDhhMWYwOw"},{scale:.6}),null,16),Bt(u)]),_:1},16)}}},Uxe=G("h1",null,"Example Mapping == Test Case",-1),Gxe=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"def"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"should register new musical work"'),G("span",{style:{color:"var(--shiki-color-text)"}},"() {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        given:")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        noEvents()")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        when:")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        registerMusicalWork("),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"bob-marley-1234"'),G("span",{style:{color:"var(--shiki-color-text)"}},", "),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"One Love"'),G("span",{style:{color:"var(--shiki-color-text)"}},", "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"MusicGenre.Reggae"),G("span",{style:{color:"var(--shiki-color-text)"}},")")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        then:")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        expectsThatMusicalWorkRegistered("),G("span",{style:{color:"var(--shiki-token-keyword)"}},"new"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"CreatorId"),G("span",{style:{color:"var(--shiki-color-text)"}},"("),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"bob-marley-1234"'),G("span",{style:{color:"var(--shiki-color-text)"}},"), "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"new"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"WorkTitle"),G("span",{style:{color:"var(--shiki-color-text)"}},"("),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"ONE LOVE"'),G("span",{style:{color:"var(--shiki-color-text)"}},"), "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"MusicGenre.Reggae"),G("span",{style:{color:"var(--shiki-color-text)"}},")")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    }")]),Yt(`
`),G("span",{class:"line"})])],-1),Hxe={__name:"18",setup(r){const e={class:"text-white",layout:"full",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/example-mapping-coding-rule.md"};return Dn(Zn),(n,s)=>{const a=Qd,u=ds;return Ge(),Jn(g_,jr(zr(e)),{default:Xn(()=>[Uxe,Bt(a,pr({maxHeight:"400px"},{ranges:["all"]}),{default:Xn(()=>[Gxe]),_:1},16),Bt(u)]),_:1},16)}}},Yxe=G("h1",null,"Event from Aggregate",-1),jxe=G("h1",null,"State changes",-1),$xe=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"class"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"MusicalWork"),G("span",{style:{color:"var(--shiki-color-text)"}}," {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"private"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"MusicalWorkId"),G("span",{style:{color:"var(--shiki-color-text)"}}," id;")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"private"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"Status"),G("span",{style:{color:"var(--shiki-color-text)"}}," status "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-constant)"}},"Status"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"Unregistered"),G("span",{style:{color:"var(--shiki-color-text)"}},";")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"private"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"RegistrationDetails"),G("span",{style:{color:"var(--shiki-color-text)"}}," registrationDetails;")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"void"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"register"),G("span",{style:{color:"var(--shiki-color-text)"}},"("),G("span",{style:{color:"var(--shiki-token-keyword)"}},"CreatorId"),G("span",{style:{color:"var(--shiki-color-text)"}}," creatorId"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"WorkTitle"),G("span",{style:{color:"var(--shiki-color-text)"}}," title"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"MusicGenre"),G("span",{style:{color:"var(--shiki-color-text)"}}," musicGenre) {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        "),G("span",{style:{color:"var(--shiki-token-constant)"}},"this"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"id"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-constant)"}},"MusicalWorkId"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-function)"}},"next"),G("span",{style:{color:"var(--shiki-color-text)"}},"();")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        "),G("span",{style:{color:"var(--shiki-token-constant)"}},"this"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"registrationDetails"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"new"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"RegistrationDetails(creatorId"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-token-function)"}}," title"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-token-function)"}}," musicGenre"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-token-function)"}}," "),G("span",{style:{color:"var(--shiki-token-constant)"}},"RegistrationDate"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-function)"}},"now())"),G("span",{style:{color:"var(--shiki-color-text)"}},";")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        "),G("span",{style:{color:"var(--shiki-token-constant)"}},"this"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"status"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-constant)"}},"Status"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"Registered"),G("span",{style:{color:"var(--shiki-color-text)"}},";")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    }")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"static"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"enum"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"Status"),G("span",{style:{color:"var(--shiki-color-text)"}}," {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        Unregistered"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," Registered")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    } ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"}")]),Yt(`
`),G("span",{class:"line"})])],-1),qxe={__name:"19",setup(r){const e={class:"text-white",layout:"full",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/event-coding-rule.md"};return Dn(Zn),(n,s)=>{const a=To,u=Qd,d=a6,f=ds;return Ge(),Jn(g_,jr(zr(e)),{default:Xn(()=>[Yxe,Bt(a,pr({code:"Zmxvd2NoYXJ0IExSIAoKTXVzaWNhbFdvcmtbTXVzaWNhbFdvcms6XG4tIGlkOiBVVUlEXG4tIHN0YXR1czogJ1VucmVnaXN0ZXJlZCdcbi0gcmVnaXN0cmF0aW9uRGV0YWlsczogUmVnaXN0cmF0aW9uRGV0YWlsc106OjphZ2dyZWdhdGUKUmVnaXN0ZXJNdXNpY2FsV29ya1tSZWdpc3Rlck11c2ljYWxXb3JrOlxuLSBjcmVhdG9ySWQ6ICdib2ItbWFybGV5LTEyMzQnXG4tIHdvcmtUaXRsZTogJ09ORSBMT1ZFJ1xuLSBtdXNpY0dlbnJlOiBSZWdnYWVdOjo6Y29tbWFuZApNdXNpY2FsV29ya1JlZ2lzdGVyZWRbTXVzaWNhbFdvcmtSZWdpc3RlcmVkOlxuLSBtdXNpY2FsV29ya0lkOiBVVUlEXG4tIHJlZ2lzdGVyZWRCeTogJ2JvYi1tYXJsZXktMTIzNCdcbi0gd29ya1RpdGxlOiAnT05FIExPVkUnXG4tIG11c2ljR2VucmU6IFJlZ2dhZVxuLSByZWdpc3RlcmVkQXQ6ICcxOTg0LTA0LTE2JyBdOjo6ZXZlbnQKCgpSZWdpc3Rlck11c2ljYWxXb3JrLS4tTXVzaWNhbFdvcmsKTXVzaWNhbFdvcmstLi1NdXNpY2FsV29ya1JlZ2lzdGVyZWQKCmNsYXNzRGVmIGFnZ3JlZ2F0ZSBmaWxsOiNiZDlkNDA7CmNsYXNzRGVmIGNvbW1hbmQgZmlsbDojNDhhMWYwOwpjbGFzc0RlZiBldmVudCBmaWxsOiNmNTgzMTg7"},{scale:.8}),null,16),Bt(d,null,{default:Xn(()=>[jxe,Bt(u,pr({maxHeight:"200px"},{ranges:["all"]}),{default:Xn(()=>[$xe]),_:1},16)]),_:1}),Bt(f)]),_:1},16)}}},Xxe=G("h1",null,"Design Level Event Storming",-1),Zxe={__name:"20",setup(r){const e={class:"text-white",layout:"new-section",hideInToc:!0,srcSequence:"pages/event-storming.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds;return Ge(),Jn(Ah,jr(zr(e)),{default:Xn(()=>[Xxe,Bt(a,pr({code:"Zmxvd2NoYXJ0IExSCgpSZWdpc3Rlck11c2ljYWxXb3JrOjo6Y29tbWFuZApDbGFpbU11c2ljYWxXb3JrOjo6Y29tbWFuZAoKTXVzaWNhbFdvcmtSZWdpc3RlcmVkOjo6ZXZlbnQKTXVzaWNhbFdvcmtDbGFpbWVkOjo6ZXZlbnQKTXVzaWNhbFdvcmtGdWxseUNsYWltZWQ6OjpldmVudAoKTXVzaWNhbFdvcmtPdmVyY2xhaW1lZDo6OmVycm9yCk11c2ljYWxXb3JrQWxyZWFkeVJlZ2lzdGVyZWQ6OjplcnJvcgoKc3ViZ3JhcGggTXVzaWNhbFdvcmtbTXVzaWNhbFdvcmtdCmRpcmVjdGlvbiBMUgoKTm90UmVnaXN0ZXJlZFlldFtJcyBub3QgYWxyZWFkeSByZWdpc3RlcmVkXQoKRnVsbHlDbGFpbWVkW0lzIGZ1bGx5IGNsYWltZWRdCgpPdmVyY2xhaW1bSXMgb3ZlcmNsYWltZWRdCgoKZW5kCgpzdHlsZSBNdXNpY2FsV29yayBmaWxsOiNiZDlkNDA7CgoKUmVnaXN0ZXJNdXNpY2FsV29yay0uLU11c2ljYWxXb3JrCkNsYWltTXVzaWNhbFdvcmstLi1NdXNpY2FsV29yawoKCk11c2ljYWxXb3JrLS4tTXVzaWNhbFdvcmtSZWdpc3RlcmVkCk11c2ljYWxXb3JrLS4tTXVzaWNhbFdvcmtBbHJlYWR5UmVnaXN0ZXJlZAoKTXVzaWNhbFdvcmstLi1NdXNpY2FsV29ya0NsYWltZWQKTXVzaWNhbFdvcmstLi1NdXNpY2FsV29ya0Z1bGx5Q2xhaW1lZApNdXNpY2FsV29yay0uLU11c2ljYWxXb3JrT3ZlcmNsYWltZWQKCmxpbmtTdHlsZSAwIHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKbGlua1N0eWxlIDEgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgMiBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CmxpbmtTdHlsZSAzIHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKbGlua1N0eWxlIDQgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwpsaW5rU3R5bGUgNSBzdHJva2U6IzJiMzg0Nixjb2xvcjpyZWQ7CmxpbmtTdHlsZSA2IHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKCmNsYXNzRGVmIGV2ZW50IGZpbGw6I2Y1ODMxODsKY2xhc3NEZWYgYWdncmVnYXRlIGZpbGw6I2JkOWQ0MDsKY2xhc3NEZWYgY29tbWFuZCBmaWxsOiM0OGExZjA7CmNsYXNzRGVmIGVycm9yIGZpbGw6I2Y0NDMzNjs"},{}),null,16),Bt(u)]),_:1},16)}}},Kxe=G("h1",null,"Example Mapping",-1),Jxe=G("h4",null,"Already Registered exploration",-1),Qxe=G("div",{style:{color:"#f26d83"}},"1. What should happen if work is registered for the second time?",-1),ewe=[Qxe],twe=G("blockquote",null,[G("p",null,"It should not be allowed and may lead to ambiguity. We would like to be informed about such situation - J.")],-1),nwe=[twe],iwe=G("div",{style:{color:"#f26d83"}},"2. About what details you would like to be informed?",-1),rwe=[iwe],swe=G("blockquote",null,[G("p",null,"Musical work id and creator how tried it should be enough - J.")],-1),owe=[swe],awe={__name:"21",setup(r){const e={class:"text-white",layout:"two-cols",hideInToc:!0,srcSequence:"pages/example-mapping-detailed-invariant.md"};return Dn(Zn),(n,s)=>{const a=To,u=ds,d=Sh("click");return Ge(),Jn(ef,jr(zr(e)),{default:Xn(f=>[Kxe,Jxe,cr((Ge(),Ct("div",null,ewe)),[[d,1]]),cr((Ge(),Ct("div",null,nwe)),[[d,2]]),cr((Ge(),Ct("div",null,rwe)),[[d,3]]),cr((Ge(),Ct("div",null,owe)),[[d,4]])]),right:Xn(f=>[cr((Ge(),Ct("div",null,[Bt(a,pr({code:"Zmxvd2NoYXJ0IFRCIAoKc3ViZ3JhcGggR2l2ZW5bR2l2ZW5dCmRpcmVjdGlvbiBMUgoKTXVzaWNhbFdvcmtSZWdpc3RlcmVkW011c2ljYWxXb3JrUmVnaXN0ZXJlZDpcbi0gbXVzaWNhbFdvcmtJZDogVVVJRFxuLSByZWdpc3RlcmVkQnk6ICdib2ItbWFybGV5LTEyMzQnXG4tIHdvcmtUaXRsZTogJ09ORSBMT1ZFJ1xuLSBtdXNpY0dlbnJlOiBSZWdnYWVcbi0gcmVnaXN0ZXJlZEF0OiAnMTk4NC0wNC0xNicgXTo6OmV2ZW50CgplbmQKCgpzdWJncmFwaCBXaGVuW1doZW5dCmRpcmVjdGlvbiBMUgoKUmVnaXN0ZXJNdXNpY2FsV29ya1tSZWdpc3Rlck11c2ljYWxXb3JrOlxuLSBjcmVhdG9ySWQ6ICd6aWdneS1tYXJsZXktNTQzJ1xuLSB3b3JrVGl0bGU6ICdPTkUgTE9WRSdcbi0gbXVzaWNHZW5yZTogUmVnZ2FlXTo6OmNvbW1hbmQKCmVuZAoKCnN1YmdyYXBoIFRoZW5bVGhlbl0KZGlyZWN0aW9uIExSCgpNdXNpY2FsV29ya0FscmVhZHlSZWdpc3RlcmVkW011c2ljYWxXb3JrQWxyZWFkeVJlZ2lzdGVyZWQ6XG4tIG11c2ljYWxXb3JrSWQ6IFVVSURcbi0gcmVnaXN0cmF0aW9uUmVxdWVzdGVkQnk6ICd6aWdneS1tYXJsZXktNTQzJ106OjplcnJvcgoKZW5kCgpHaXZlbi0uLVdoZW4KV2hlbi0uLVRoZW4KCmxpbmtTdHlsZSAwIHN0cm9rZTojMmIzODQ2LGNvbG9yOnJlZDsKbGlua1N0eWxlIDEgc3Ryb2tlOiMyYjM4NDYsY29sb3I6cmVkOwoKY2xhc3NEZWYgZXZlbnQgZmlsbDojZjU4MzE4OwpjbGFzc0RlZiBjb21tYW5kIGZpbGw6IzQ4YTFmMDsKY2xhc3NEZWYgZXJyb3IgZmlsbDojZjQ0MzM2Ow"},{scale:.7}),null,16)])),[[d,5]]),Bt(u)]),_:1},16)}}},lwe=G("h1",null,"Example Mapping == Test Case",-1),cwe=G("h4",null,"Already Registered Exploration",-1),uwe=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"def"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"should not register already registered musical work"'),G("span",{style:{color:"var(--shiki-color-text)"}},"() {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        given:")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        musicalWorkRegistered("),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"bob-marley-1234"'),G("span",{style:{color:"var(--shiki-color-text)"}},", "),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"One Love"'),G("span",{style:{color:"var(--shiki-color-text)"}},", "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"MusicGenre.Reggae"),G("span",{style:{color:"var(--shiki-color-text)"}},")")]),Yt(`
`),G("span",{class:"line"}),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        when:")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        registerMusicalWork("),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"ziggy-marley-543"'),G("span",{style:{color:"var(--shiki-color-text)"}},", "),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"One Love"'),G("span",{style:{color:"var(--shiki-color-text)"}},", "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"MusicGenre.Reggae"),G("span",{style:{color:"var(--shiki-color-text)"}},")")]),Yt(`
`),G("span",{class:"line"}),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        then:")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"def"),G("span",{style:{color:"var(--shiki-color-text)"}}," musicalWorkAlreadyRegistered "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"="),G("span",{style:{color:"var(--shiki-color-text)"}}," thrown("),G("span",{style:{color:"var(--shiki-token-keyword)"}},"MusicalWorkAlreadyRegistered"),G("span",{style:{color:"var(--shiki-color-text)"}},")")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        musicalWorkAlreadyRegistered"),G("span",{style:{color:"var(--shiki-token-keyword)"}},"."),G("span",{style:{color:"var(--shiki-color-text)"}},"registrationRequestedBy "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"=="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"new"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"CreatorId"),G("span",{style:{color:"var(--shiki-color-text)"}},"("),G("span",{style:{color:"var(--shiki-token-string-expression)"}},'"ziggy-marley-543"'),G("span",{style:{color:"var(--shiki-color-text)"}},")")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    }")]),Yt(`
`),G("span",{class:"line"})])],-1),hwe={__name:"22",setup(r){const e={class:"text-white",layout:"full",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/invariant-coding-rule.md"};return Dn(Zn),(n,s)=>{const a=Qd,u=ds;return Ge(),Jn(g_,jr(zr(e)),{default:Xn(()=>[lwe,cwe,Bt(a,pr({maxHeight:"400px"},{ranges:["all"]}),{default:Xn(()=>[uwe]),_:1},16),Bt(u)]),_:1},16)}}},dwe=G("h1",null,"Invariant in Aggregate",-1),fwe=G("h1",null,"If Statements",-1),pwe=G("pre",{class:"slidev-code shiki",style:{"background-color":"var(--shiki-color-background)"}},[G("code",null,[G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"class"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"MusicalWork"),G("span",{style:{color:"var(--shiki-color-text)"}}," {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"private"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"MusicalWorkId"),G("span",{style:{color:"var(--shiki-color-text)"}}," id;")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"private"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"Status"),G("span",{style:{color:"var(--shiki-color-text)"}}," status "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-constant)"}},"Status"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"Unregistered"),G("span",{style:{color:"var(--shiki-color-text)"}},";")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"private"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"RegistrationDetails"),G("span",{style:{color:"var(--shiki-color-text)"}}," registrationDetails;")]),Yt(`
`),G("span",{class:"line"}),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"public"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"void"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"register"),G("span",{style:{color:"var(--shiki-color-text)"}},"("),G("span",{style:{color:"var(--shiki-token-keyword)"}},"CreatorId"),G("span",{style:{color:"var(--shiki-color-text)"}}," creatorId"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"WorkTitle"),G("span",{style:{color:"var(--shiki-color-text)"}}," title"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"MusicGenre"),G("span",{style:{color:"var(--shiki-color-text)"}}," musicGenre) {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"if"),G("span",{style:{color:"var(--shiki-color-text)"}}," ("),G("span",{style:{color:"var(--shiki-token-function)"}},"isRegistered()"),G("span",{style:{color:"var(--shiki-color-text)"}},") {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"            "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"throw"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"new"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"MusicalWorkAlreadyRegistered(id"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-token-function)"}}," creatorId)"),G("span",{style:{color:"var(--shiki-color-text)"}},";")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        }")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        "),G("span",{style:{color:"var(--shiki-token-constant)"}},"this"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"id"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-constant)"}},"MusicalWorkId"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-function)"}},"next"),G("span",{style:{color:"var(--shiki-color-text)"}},"();")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        "),G("span",{style:{color:"var(--shiki-token-constant)"}},"this"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"registrationDetails"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"new"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"RegistrationDetails(creatorId"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-token-function)"}}," title"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-token-function)"}}," musicGenre"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},","),G("span",{style:{color:"var(--shiki-token-function)"}}," "),G("span",{style:{color:"var(--shiki-token-constant)"}},"RegistrationDate"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-function)"}},"now())"),G("span",{style:{color:"var(--shiki-color-text)"}},";")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        "),G("span",{style:{color:"var(--shiki-token-constant)"}},"this"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"status"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-constant)"}},"Status"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"Registered"),G("span",{style:{color:"var(--shiki-color-text)"}},";")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    }")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    ")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"Boolean"),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-function)"}},"isRegistered"),G("span",{style:{color:"var(--shiki-color-text)"}},"() {")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"        "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"return"),G("span",{style:{color:"var(--shiki-color-text)"}}," status "),G("span",{style:{color:"var(--shiki-token-keyword)"}},"=="),G("span",{style:{color:"var(--shiki-color-text)"}}," "),G("span",{style:{color:"var(--shiki-token-constant)"}},"Status"),G("span",{style:{color:"var(--shiki-token-punctuation)"}},"."),G("span",{style:{color:"var(--shiki-token-constant)"}},"Registered"),G("span",{style:{color:"var(--shiki-color-text)"}},";")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"    }")]),Yt(`
`),G("span",{class:"line"},[G("span",{style:{color:"var(--shiki-color-text)"}},"}")]),Yt(`
`),G("span",{class:"line"})])],-1),mwe={__name:"23",setup(r){const e={class:"text-white",layout:"full",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/invariant-coding-rule.md"};return Dn(Zn),(n,s)=>{const a=To,u=Qd,d=a6,f=ds;return Ge(),Jn(g_,jr(zr(e)),{default:Xn(()=>[dwe,Bt(a,pr({code:"Zmxvd2NoYXJ0IExSIAoKTXVzaWNhbFdvcmtbTXVzaWNhbFdvcms6XG4tIGlkOiBVVUlEXG4tIHN0YXR1czogJ1JlZ2lzdGVyZWQnXG4tIHJlZ2lzdHJhdGlvbkRldGFpbHM6IFJlZ2lzdHJhdGlvbkRldGFpbHNdOjo6YWdncmVnYXRlClJlZ2lzdGVyTXVzaWNhbFdvcmtbUmVnaXN0ZXJNdXNpY2FsV29yazpcbi0gY3JlYXRvcklkOiAnYm9iLW1hcmxleS0xMjM0J1xuLSB3b3JrVGl0bGU6ICdPTkUgTE9WRSdcbi0gbXVzaWNHZW5yZTogUmVnZ2FlXTo6OmNvbW1hbmQKTXVzaWNhbFdvcmtBbHJlYWR5UmVnaXN0ZXJlZFtNdXNpY2FsV29ya0FscmVhZHlSZWdpc3RlcmVkOlxuLSBtdXNpY2FsV29ya0lkOiBVVUlEXG4tIHJlZ2lzdHJhdGlvblJlcXVlc3RlZEJ5OiAnemlnZ3ktbWFybGV5LTU0MyddOjo6ZXJyb3IKCgoKUmVnaXN0ZXJNdXNpY2FsV29yay0uLU11c2ljYWxXb3JrCk11c2ljYWxXb3JrLS4tTXVzaWNhbFdvcmtBbHJlYWR5UmVnaXN0ZXJlZAoKY2xhc3NEZWYgYWdncmVnYXRlIGZpbGw6I2JkOWQ0MDsKY2xhc3NEZWYgY29tbWFuZCBmaWxsOiM0OGExZjA7CmNsYXNzRGVmIGV2ZW50IGZpbGw6I2Y1ODMxODsKY2xhc3NEZWYgZXJyb3IgZmlsbDojZjQ0MzM2Ow"},{scale:.8}),null,16),Bt(d,null,{default:Xn(()=>[fwe,Bt(u,pr({maxHeight:"200px"},{ranges:["all"]}),{default:Xn(()=>[pwe]),_:1},16)]),_:1}),Bt(f)]),_:1},16)}}},gwe=G("h1",null,"Summary",-1),vwe=G("ol",null,[G("li",null,"Aggregate Root == Class"),G("li",null,"Command == Method"),G("li",null,"Value object == Immutable Class"),G("li",null,"Event == State change in class"),G("li",null,"Example Mapping == Test Case"),G("li",null,"Invariant == If statement")],-1),ywe=G("br",null,null,-1),_we=G("br",null,null,-1),bwe=G("div",{class:"animate-pulse",style:{color:"#f26d83","font-size":"100px"}},"CQS",-1),xwe=[ywe,_we,bwe],wwe={__name:"24",setup(r){const e={class:"text-white",layout:"new-section",lineNumbers:!0,highlighter:"shiki",srcSequence:"pages/cqs-summary.md"};return Dn(Zn),(n,s)=>{const a=o6,u=ds,d=Sh("click");return Ge(),Jn(Ah,jr(zr(e)),{default:Xn(()=>[gwe,Bt(a,null,{default:Xn(()=>[vwe]),_:1}),cr((Ge(),Ct("div",null,xwe)),[[d,7]]),Bt(u)]),_:1},16)}}},kwe={class:"slidev-layout center h-full grid place-content-center"},Cwe={class:"my-auto"},Swe={__name:"center",setup(r){return Dn(Zn),(e,n)=>(Ge(),Ct("div",kwe,[G("div",Cwe,[yr(e.$slots,"default")])]))}},Ewe=G("h1",null,"But can we do better?",-1),Twe={__name:"25",setup(r){const e={class:"text-white",layout:"center",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/cqs-summary.md"};return Dn(Zn),(n,s)=>(Ge(),Jn(Swe,jr(zr(e)),{default:Xn(()=>[Ewe]),_:1},16))}},Mwe=G("h1",null,"Thank you",-1),Awe=G("br",null,null,-1),Lwe=G("img",{src:"https://jakubiec.github.io/event-storming-to-code/qr-code-gh.png",class:"h-60 rounded shadow"},null,-1),Rwe=G("p",null,[G("a",{href:"https://github.com/jakubiec/event-storming-to-code",target:"_blank",rel:"noopener"},"GitHub Repository")],-1),Pwe=G("br",null,null,-1),Iwe=G("img",{src:"https://jakubiec.github.io/event-storming-to-code/qr-code-nms.png",class:"h-60 rounded shadow"},null,-1),Dwe=G("p",null,[G("a",{href:"https://push.fm/fl/nms-owib",target:"_blank",rel:"noopener"},"Support my band")],-1),Nwe={__name:"26",setup(r){const e={class:"text-white",layout:"two-cols",hideInToc:!0,srcSequence:"pages/end.md"};return Dn(Zn),(n,s)=>{const a=xV,u=ds;return Ge(),Jn(ef,jr(zr(e)),{default:Xn(d=>[Mwe,Awe,Lwe,Rwe]),right:Xn(d=>[G("h1",null,[Bt(a),Yt(),Bt(a),Yt(),Bt(a),Yt(),Bt(a),Yt(),Bt(a)]),Pwe,Iwe,Dwe,Bt(u)]),_:1},16)}}},Owe=[{path:"1",name:"page-1",component:_ye,meta:{theme:"penguin",colorSchema:"dark",themeConfig:{logoHeader:"https://jakubiec.github.io/event-storming-to-code/profile-photo-circle.png",eventUrl:"https://github.com/jakubiec/event-storming-to-code",eventLogo:"https://jakubiec.github.io/event-storming-to-code/github-mark.png"},layout:"intro",css:"unocss",class:"text-white",title:"Event Storming to Code",hideInToc:!0,slide:{raw:`---
theme: penguin
colorSchema: dark
themeConfig:
    logoHeader: 'https://jakubiec.github.io/event-storming-to-code/profile-photo-circle.png'
    eventUrl: 'https://github.com/jakubiec/event-storming-to-code'
    eventLogo: 'https://jakubiec.github.io/event-storming-to-code/github-mark.png'
    #twitter: '@kjakubiec1'
    #twitterUrl: 'https://twitter.com/kjakubiec1'
layout: intro
css: unocss
class: 'text-white'
title: Event Storming to Code
hideInToc: true
---

# Event Storming to Code

## Aggregates
`,title:"Event Storming to Code",level:1,content:`# Event Storming to Code

## Aggregates`,frontmatter:{theme:"penguin",colorSchema:"dark",themeConfig:{logoHeader:"https://jakubiec.github.io/event-storming-to-code/profile-photo-circle.png",eventUrl:"https://github.com/jakubiec/event-storming-to-code",eventLogo:"https://jakubiec.github.io/event-storming-to-code/github-mark.png"},layout:"intro",css:"unocss",class:"text-white",title:"Event Storming to Code",hideInToc:!0},index:0,start:0,end:20,notesHTML:"",filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/slides.md",id:0,no:1},__clicksElements:[],__preloaded:!1}},{path:"2",name:"page-2",component:Lye,meta:{layout:"presenter",presenterImage:"https://avatars.githubusercontent.com/u/5813175?v=4",themeConfig:{eventUrl:"https://github.com/jakubiec/event-storming-to-code",eventLogo:"https://jakubiec.github.io/event-storming-to-code/github-mark.png"},css:"unocss",class:"text-white",hideInToc:!0,title:"Konrad Jakubiec",srcSequence:"pages/presenter.md",slide:{raw:null,title:"Konrad Jakubiec",level:1,content:`# Konrad Jakubiec

## Tech lead at 

![ice](https://www.iceservices.com/wp-content/themes/ice/assets/img/iceservices-logo.png)

* 10 years of backend experience on JVM
* DDD practitioner 
* DDD speaker ([DDD Europe 2021 lighting talk](https://www.youtube.com/watch?v=QhcPk5zNk_Q))
* Lives in Gdynia since 2021
* Drummer at [No Man's Slave](https://www.facebook.com/nomansslave) band`,frontmatter:{layout:"presenter",presenterImage:"https://avatars.githubusercontent.com/u/5813175?v=4",themeConfig:{eventUrl:"https://github.com/jakubiec/event-storming-to-code",eventLogo:"https://jakubiec.github.io/event-storming-to-code/github-mark.png"},css:"unocss",class:"text-white",hideInToc:!0,title:"Konrad Jakubiec",srcSequence:"pages/presenter.md"},index:1,start:0,end:24,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/presenter.md",raw:`---
layout: presenter
presenterImage: 'https://avatars.githubusercontent.com/u/5813175?v=4'
themeConfig:
    eventUrl: 'https://github.com/jakubiec/event-storming-to-code'
    eventLogo: 'https://jakubiec.github.io/event-storming-to-code/github-mark.png'
css: unocss
class: 'text-white'
hideInToc: true
---

# Konrad Jakubiec

## Tech lead at 

![ice](https://www.iceservices.com/wp-content/themes/ice/assets/img/iceservices-logo.png)

* 10 years of backend experience on JVM
* DDD practitioner 
* DDD speaker ([DDD Europe 2021 lighting talk](https://www.youtube.com/watch?v=QhcPk5zNk_Q))
* Lives in Gdynia since 2021
* Drummer at [No Man's Slave](https://www.facebook.com/nomansslave) band

`,title:"Konrad Jakubiec",level:1,content:`# Konrad Jakubiec

## Tech lead at 

![ice](https://www.iceservices.com/wp-content/themes/ice/assets/img/iceservices-logo.png)

* 10 years of backend experience on JVM
* DDD practitioner 
* DDD speaker ([DDD Europe 2021 lighting talk](https://www.youtube.com/watch?v=QhcPk5zNk_Q))
* Lives in Gdynia since 2021
* Drummer at [No Man's Slave](https://www.facebook.com/nomansslave) band`,frontmatter:{layout:"presenter",presenterImage:"https://avatars.githubusercontent.com/u/5813175?v=4",themeConfig:{eventUrl:"https://github.com/jakubiec/event-storming-to-code",eventLogo:"https://jakubiec.github.io/event-storming-to-code/github-mark.png"},css:"unocss",class:"text-white",hideInToc:!0,title:"Konrad Jakubiec"},index:0,start:0,end:24},inline:{raw:`---
src: pages/presenter.md
---
`,content:"",frontmatter:{},index:1,start:20,end:24},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/presenter.md",notesHTML:"",id:1,no:2},__clicksElements:[],__preloaded:!1}},{path:"3",name:"page-3",component:Gye,meta:{class:"text-white",hideInToc:!0,title:"Agenda",srcSequence:"pages/agenda.md",slide:{raw:null,title:"Agenda",level:1,content:`# Agenda

<Toc />
<CurrentPage />`,frontmatter:{class:"text-white",hideInToc:!0,title:"Agenda",srcSequence:"pages/agenda.md"},index:2,start:0,end:8,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/agenda.md",raw:`---
class: 'text-white'
hideInToc: true
---
# Agenda

<Toc />
<CurrentPage />`,title:"Agenda",level:1,content:`# Agenda

<Toc />
<CurrentPage />`,frontmatter:{class:"text-white",hideInToc:!0,title:"Agenda"},index:0,start:0,end:8},inline:{raw:`---
src: pages/agenda.md
---
`,content:"",frontmatter:{},index:2,start:24,end:28},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/agenda.md",notesHTML:"",id:2,no:3},__clicksElements:[],__preloaded:!1}},{path:"4",name:"page-4",component:h_e,meta:{class:"text-white",layout:"new-section",title:"Example Domain",srcSequence:"pages/example-domain.md",slide:{raw:null,title:"Example Domain",level:1,content:`# Music Registration

<div>
<br />
<br />
<br />
<br />
<mdi-music class="text-9xl"/> <mdi-plus class="text-9xl animate-ping"/> <mdi-copyright class="text-9xl"/>
</div>

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Example Domain",srcSequence:"pages/example-domain.md"},index:3,start:0,end:16,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-domain.md",raw:`---
class: 'text-white'
layout: new-section
title: Example Domain
---
# Music Registration

<div>
<br />
<br />
<br />
<br />
<mdi-music class="text-9xl"/> <mdi-plus class="text-9xl animate-ping"/> <mdi-copyright class="text-9xl"/>
</div>

<CurrentPage />`,title:"Example Domain",level:1,content:`# Music Registration

<div>
<br />
<br />
<br />
<br />
<mdi-music class="text-9xl"/> <mdi-plus class="text-9xl animate-ping"/> <mdi-copyright class="text-9xl"/>
</div>

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Example Domain"},index:0,start:0,end:16},inline:{raw:`---
src: pages/example-domain.md
---
`,content:"",frontmatter:{},index:3,start:28,end:32},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-domain.md",notesHTML:"",id:3,no:4},__clicksElements:[],__preloaded:!1}},{path:"5",name:"page-5",component:I_e,meta:{class:"text-white",layout:"new-section",title:"Design Level Event Storming",srcSequence:"pages/event-storming.md",slide:{raw:null,title:"Design Level Event Storming",level:1,content:`# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Design Level Event Storming",srcSequence:"pages/event-storming.md"},index:4,start:0,end:60,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/event-storming.md",raw:`---
class: 'text-white'
layout: new-section
---
# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,title:"Design Level Event Storming",level:1,content:`# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Design Level Event Storming"},index:0,start:0,end:60},inline:{raw:`---
src: pages/event-storming.md
---
`,content:"",frontmatter:{},index:4,start:32,end:36},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/event-storming.md",notesHTML:"",id:4,no:5},__clicksElements:[],__preloaded:!1}},{path:"6",name:"page-6",component:O_e,meta:{class:"text-white",layout:"new-section",title:"Example Mapping",srcSequence:"pages/example-mapping.md",slide:{raw:null,title:"Example Mapping",level:1,content:`# Example Mapping
#### Register new Musical Work

\`\`\`mermaid{scale: 0.8}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Example Mapping",srcSequence:"pages/example-mapping.md"},index:5,start:0,end:45,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping.md",raw:`---
class: 'text-white'
layout: new-section
---
# Example Mapping
#### Register new Musical Work

\`\`\`mermaid{scale: 0.8}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,title:"Example Mapping",level:1,content:`# Example Mapping
#### Register new Musical Work

\`\`\`mermaid{scale: 0.8}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Example Mapping"},index:0,start:0,end:45},inline:{raw:`---
src: pages/example-mapping.md
---
`,content:"",frontmatter:{},index:5,start:36,end:40},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping.md",notesHTML:"",id:5,no:6},__clicksElements:[],__preloaded:!1}},{path:"7",name:"page-7",component:x2e,meta:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",srcSequence:"pages/command-coding-rule-template.md",slide:{raw:null,title:"Coding rules",level:1,content:`::default::

# Command

\`\`\`mermaid
flowchart TB 

RegisterMusicalWork:::command

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<v-clicks>

1. Where to put such method?
2. What about parameters?

</v-clicks>

::right::

# Method

\`\`\`java {all}
public void registerMusicalWork(...) {
    
      
}

\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",srcSequence:"pages/command-coding-rule-template.md"},index:6,start:0,end:44,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/command-coding-rule-template.md",raw:`---
class: 'text-white'
layout: two-cols
title: Coding rules
lineNumbers: true
highlighter: shiki
---

::default::

# Command

\`\`\`mermaid
flowchart TB 

RegisterMusicalWork:::command

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<v-clicks>

1. Where to put such method?
2. What about parameters?

</v-clicks>

::right::

# Method

\`\`\`java {all}
public void registerMusicalWork(...) {
    
      
}

\`\`\`

<CurrentPage />

`,title:"Coding rules",level:1,content:`::default::

# Command

\`\`\`mermaid
flowchart TB 

RegisterMusicalWork:::command

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<v-clicks>

1. Where to put such method?
2. What about parameters?

</v-clicks>

::right::

# Method

\`\`\`java {all}
public void registerMusicalWork(...) {
    
      
}

\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki"},index:0,start:0,end:44},inline:{raw:`---
src: pages/command-coding-rule-template.md
---
`,content:"",frontmatter:{},index:6,start:40,end:44},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/command-coding-rule-template.md",notesHTML:"",id:6,no:7},__clicksElements:[],__preloaded:!1}},{path:"8",name:"page-8",component:k2e,meta:{class:"text-white",layout:"new-section",title:"Design Level Event Storming",hideInToc:!0,srcSequence:"pages/event-storming.md",slide:{raw:null,title:"Design Level Event Storming",level:1,content:`# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Design Level Event Storming",hideInToc:!0,srcSequence:"pages/event-storming.md"},index:7,start:0,end:60,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/event-storming.md",raw:`---
class: 'text-white'
layout: new-section
---
# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,title:"Design Level Event Storming",level:1,content:`# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Design Level Event Storming"},index:0,start:0,end:60},inline:{raw:`---
src: pages/event-storming.md
hideInToc: true
---
`,content:"",frontmatter:{hideInToc:!0},index:7,start:44,end:49},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/event-storming.md",notesHTML:"",id:7,no:8},__clicksElements:[],__preloaded:!1}},{path:"9",name:"page-9",component:I2e,meta:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/aggregate-coding-rule.md",slide:{raw:null,title:"Coding rules",level:1,content:`::default::

# Aggregate Root

\`\`\`mermaid
flowchart TB 

MusicalWork[MusicalWork\\n\\n\\n]:::aggregate

classDef aggregate fill:#bd9d40;
\`\`\`

<div v-click="1">

# Command

\`\`\`mermaid
flowchart TB 

RegisterMusicalWork:::command

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

</div>


<div v-click="3" class="animate-pulse" style="color:#f26d83">

1. What about parameters?

</div>

::right::

# Class

\`\`\`java {all}
public class MusicalWork() {
    
      
}

\`\`\`

<div v-click="2">

# Method in Class

\`\`\`java{all}
public class MusicalWork() {
   
    public void register(...) {


    }
}

\`\`\`

</div>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/aggregate-coding-rule.md"},index:8,start:0,end:77,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/aggregate-coding-rule.md",raw:`---
class: 'text-white'
layout: two-cols
title: Coding rules
lineNumbers: true
highlighter: shiki
hideInToc: true
---

::default::

# Aggregate Root

\`\`\`mermaid
flowchart TB 

MusicalWork[MusicalWork\\n\\n\\n]:::aggregate

classDef aggregate fill:#bd9d40;
\`\`\`

<div v-click="1">

# Command

\`\`\`mermaid
flowchart TB 

RegisterMusicalWork:::command

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

</div>


<div v-click="3" class="animate-pulse" style="color:#f26d83">

1. What about parameters?

</div>

::right::

# Class

\`\`\`java {all}
public class MusicalWork() {
    
      
}

\`\`\`

<div v-click="2">

# Method in Class

\`\`\`java{all}
public class MusicalWork() {
   
    public void register(...) {


    }
}

\`\`\`

</div>


<CurrentPage />

`,title:"Coding rules",level:1,content:`::default::

# Aggregate Root

\`\`\`mermaid
flowchart TB 

MusicalWork[MusicalWork\\n\\n\\n]:::aggregate

classDef aggregate fill:#bd9d40;
\`\`\`

<div v-click="1">

# Command

\`\`\`mermaid
flowchart TB 

RegisterMusicalWork:::command

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

</div>


<div v-click="3" class="animate-pulse" style="color:#f26d83">

1. What about parameters?

</div>

::right::

# Class

\`\`\`java {all}
public class MusicalWork() {
    
      
}

\`\`\`

<div v-click="2">

# Method in Class

\`\`\`java{all}
public class MusicalWork() {
   
    public void register(...) {


    }
}

\`\`\`

</div>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0},index:0,start:0,end:77},inline:{raw:`---
src: pages/aggregate-coding-rule.md
---
`,content:"",frontmatter:{},index:8,start:49,end:53},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/aggregate-coding-rule.md",notesHTML:"",id:8,no:9},__clicksElements:[],__preloaded:!1}},{path:"10",name:"page-10",component:O2e,meta:{class:"text-white",layout:"new-section",title:"Example Mapping",hideInToc:!0,srcSequence:"pages/example-mapping.md",slide:{raw:null,title:"Example Mapping",level:1,content:`# Example Mapping
#### Register new Musical Work

\`\`\`mermaid{scale: 0.8}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Example Mapping",hideInToc:!0,srcSequence:"pages/example-mapping.md"},index:9,start:0,end:45,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping.md",raw:`---
class: 'text-white'
layout: new-section
---
# Example Mapping
#### Register new Musical Work

\`\`\`mermaid{scale: 0.8}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,title:"Example Mapping",level:1,content:`# Example Mapping
#### Register new Musical Work

\`\`\`mermaid{scale: 0.8}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Example Mapping"},index:0,start:0,end:45},inline:{raw:`---
src: pages/example-mapping.md
hideInToc: true
---
`,content:"",frontmatter:{hideInToc:!0},index:9,start:53,end:58},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping.md",notesHTML:"",id:9,no:10},__clicksElements:[],__preloaded:!1}},{path:"11",name:"page-11",component:Z2e,meta:{class:"text-white",layout:"two-cols",hideInToc:!0,title:"Example Mapping",srcSequence:"pages/example-mapping-detailed-command-questions.md",slide:{raw:null,title:"Example Mapping",level:1,content:`::default::

# Example Mapping
#### Register Musical Work Exploration


<div v-click="1">

<div style="color:#f26d83">1. What is required to register musical work?</div>

</div>

<div v-click="2">

<div style="color:#f26d83">2. Could you provide some example values used for registration?</div>

</div>

<div v-click="3">

> We need to know who (the creator), under what title and genre is want to register musical work - Jakub (Copyright Officer)
> 
</div>

<div v-click="5">

<br/>
<br/>
<br/>
<div class="animate-pulse" style="color:#f26d83">How to model creatorId, workTitle, musicGenre?</div>

</div>

::right::

<div v-click="4">

\`\`\`mermaid
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`
</div>

<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",hideInToc:!0,title:"Example Mapping",srcSequence:"pages/example-mapping-detailed-command-questions.md"},index:10,start:0,end:82,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping-detailed-command-questions.md",raw:`---
class: 'text-white'
layout: two-cols
hideInToc: true
---

::default::

# Example Mapping
#### Register Musical Work Exploration


<div v-click="1">

<div style="color:#f26d83">1. What is required to register musical work?</div>

</div>

<div v-click="2">

<div style="color:#f26d83">2. Could you provide some example values used for registration?</div>

</div>

<div v-click="3">

> We need to know who (the creator), under what title and genre is want to register musical work - Jakub (Copyright Officer)
> 
</div>

<div v-click="5">

<br/>
<br/>
<br/>
<div class="animate-pulse" style="color:#f26d83">How to model creatorId, workTitle, musicGenre?</div>

</div>

::right::

<div v-click="4">

\`\`\`mermaid
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`
</div>

<CurrentPage />`,title:"Example Mapping",level:1,content:`::default::

# Example Mapping
#### Register Musical Work Exploration


<div v-click="1">

<div style="color:#f26d83">1. What is required to register musical work?</div>

</div>

<div v-click="2">

<div style="color:#f26d83">2. Could you provide some example values used for registration?</div>

</div>

<div v-click="3">

> We need to know who (the creator), under what title and genre is want to register musical work - Jakub (Copyright Officer)
> 
</div>

<div v-click="5">

<br/>
<br/>
<br/>
<div class="animate-pulse" style="color:#f26d83">How to model creatorId, workTitle, musicGenre?</div>

</div>

::right::

<div v-click="4">

\`\`\`mermaid
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`
</div>

<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",hideInToc:!0,title:"Example Mapping"},index:0,start:0,end:82},inline:{raw:`---
src: pages/example-mapping-detailed-command-questions.md
---
`,content:"",frontmatter:{},index:10,start:58,end:62},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping-detailed-command-questions.md",notesHTML:"",id:10,no:11},__clicksElements:[],__preloaded:!1}},{path:"12",name:"page-12",component:hxe,meta:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/value-object-exploration.md",slide:{raw:null,title:"Coding rules",level:1,content:`::right::

<div v-click="7">

# Value object


\`\`\`mermaid
flowchart LR 

CreatorId[CreatorId:\\n- uniquely identifies Creator\\n- external id from copyright system\\n- doesn't change once assigned]:::vo
WorkTitle[WorkTitle:\\n- text provided by Creator\\n- always upper case]:::vo
MusicGenre[MusicGenre:\\n- a list of pre-defined values by industry\\n- changes very rarely]:::vo

classDef vo fill:#bd9d40;
\`\`\`

</div>

::default::

# Exploration


<div v-click="1">

<div style="color:#f26d83">1. What is the source of creator id? How frequent are changes?</div>

</div>

<div v-click="2">

> It comes from external system. Once assigned it doesn't change - J.

</div>

<div v-click="3">

<div style="color:#f26d83">2. Is work title any text?</div>

</div>

<div v-click="4">

> No, it's text provided by creator, and it's always represented in copyright in upper-case - J.

</div>


<div v-click="5">

<div style="color:#f26d83">3. Where do we can find possible values for music genre?</div>

</div>

<div v-click="6">

> That's easy - it's a standardised list of values- J.

</div>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/value-object-exploration.md"},index:11,start:0,end:74,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/value-object-exploration.md",raw:`---
class: 'text-white'
layout: two-cols
title: Coding rules
lineNumbers: true
highlighter: shiki
hideInToc: true
---

::right::

<div v-click="7">

# Value object


\`\`\`mermaid
flowchart LR 

CreatorId[CreatorId:\\n- uniquely identifies Creator\\n- external id from copyright system\\n- doesn't change once assigned]:::vo
WorkTitle[WorkTitle:\\n- text provided by Creator\\n- always upper case]:::vo
MusicGenre[MusicGenre:\\n- a list of pre-defined values by industry\\n- changes very rarely]:::vo

classDef vo fill:#bd9d40;
\`\`\`

</div>

::default::

# Exploration


<div v-click="1">

<div style="color:#f26d83">1. What is the source of creator id? How frequent are changes?</div>

</div>

<div v-click="2">

> It comes from external system. Once assigned it doesn't change - J.

</div>

<div v-click="3">

<div style="color:#f26d83">2. Is work title any text?</div>

</div>

<div v-click="4">

> No, it's text provided by creator, and it's always represented in copyright in upper-case - J.

</div>


<div v-click="5">

<div style="color:#f26d83">3. Where do we can find possible values for music genre?</div>

</div>

<div v-click="6">

> That's easy - it's a standardised list of values- J.

</div>


<CurrentPage />

`,title:"Coding rules",level:1,content:`::right::

<div v-click="7">

# Value object


\`\`\`mermaid
flowchart LR 

CreatorId[CreatorId:\\n- uniquely identifies Creator\\n- external id from copyright system\\n- doesn't change once assigned]:::vo
WorkTitle[WorkTitle:\\n- text provided by Creator\\n- always upper case]:::vo
MusicGenre[MusicGenre:\\n- a list of pre-defined values by industry\\n- changes very rarely]:::vo

classDef vo fill:#bd9d40;
\`\`\`

</div>

::default::

# Exploration


<div v-click="1">

<div style="color:#f26d83">1. What is the source of creator id? How frequent are changes?</div>

</div>

<div v-click="2">

> It comes from external system. Once assigned it doesn't change - J.

</div>

<div v-click="3">

<div style="color:#f26d83">2. Is work title any text?</div>

</div>

<div v-click="4">

> No, it's text provided by creator, and it's always represented in copyright in upper-case - J.

</div>


<div v-click="5">

<div style="color:#f26d83">3. Where do we can find possible values for music genre?</div>

</div>

<div v-click="6">

> That's easy - it's a standardised list of values- J.

</div>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0},index:0,start:0,end:74},inline:{raw:`---
src: pages/value-object-exploration.md
---
`,content:"",frontmatter:{},index:11,start:62,end:66},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/value-object-exploration.md",notesHTML:"",id:11,no:12},__clicksElements:[],__preloaded:!1}},{path:"13",name:"page-13",component:bxe,meta:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/value-object-coding-rule.md",slide:{raw:null,title:"Coding rules",level:1,content:`::default::

# Value object


\`\`\`mermaid
flowchart LR 

CreatorId[CreatorId:\\n- uniquely identifies Creator\\n- external id from copyright system\\n- doesn't change once assigned]:::vo
WorkTitle[WorkTitle:\\n- text provided by Creator\\n- always upper case]:::vo
MusicGenre[MusicGenre:\\n- a list of pre-defined values by industry\\n- changes very rarely]:::vo

classDef vo fill:#bd9d40;
\`\`\`


::right::

<div v-click="1">

# Immutable Class

\`\`\`java {all}
public record CreatorId(String value) { }
\`\`\`
<br/>
<br/>

\`\`\`java {all}
public record WorkTitle(String value) {

    public WorkTitle {
        value = value.toUpperCase();
    }
}
\`\`\`
<br />

\`\`\`java {all}
public enum MusicGenre {
    Pop, Reggae, Rock, Metal, 
    Jazz, Rap, Classic
}
\`\`\`

</div>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/value-object-coding-rule.md"},index:12,start:0,end:60,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/value-object-coding-rule.md",raw:`---
class: 'text-white'
layout: two-cols
title: Coding rules
lineNumbers: true
highlighter: shiki
hideInToc: true
---

::default::

# Value object


\`\`\`mermaid
flowchart LR 

CreatorId[CreatorId:\\n- uniquely identifies Creator\\n- external id from copyright system\\n- doesn't change once assigned]:::vo
WorkTitle[WorkTitle:\\n- text provided by Creator\\n- always upper case]:::vo
MusicGenre[MusicGenre:\\n- a list of pre-defined values by industry\\n- changes very rarely]:::vo

classDef vo fill:#bd9d40;
\`\`\`


::right::

<div v-click="1">

# Immutable Class

\`\`\`java {all}
public record CreatorId(String value) { }
\`\`\`
<br/>
<br/>

\`\`\`java {all}
public record WorkTitle(String value) {

    public WorkTitle {
        value = value.toUpperCase();
    }
}
\`\`\`
<br />

\`\`\`java {all}
public enum MusicGenre {
    Pop, Reggae, Rock, Metal, 
    Jazz, Rap, Classic
}
\`\`\`

</div>


<CurrentPage />

`,title:"Coding rules",level:1,content:`::default::

# Value object


\`\`\`mermaid
flowchart LR 

CreatorId[CreatorId:\\n- uniquely identifies Creator\\n- external id from copyright system\\n- doesn't change once assigned]:::vo
WorkTitle[WorkTitle:\\n- text provided by Creator\\n- always upper case]:::vo
MusicGenre[MusicGenre:\\n- a list of pre-defined values by industry\\n- changes very rarely]:::vo

classDef vo fill:#bd9d40;
\`\`\`


::right::

<div v-click="1">

# Immutable Class

\`\`\`java {all}
public record CreatorId(String value) { }
\`\`\`
<br/>
<br/>

\`\`\`java {all}
public record WorkTitle(String value) {

    public WorkTitle {
        value = value.toUpperCase();
    }
}
\`\`\`
<br />

\`\`\`java {all}
public enum MusicGenre {
    Pop, Reggae, Rock, Metal, 
    Jazz, Rap, Classic
}
\`\`\`

</div>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0},index:0,start:0,end:60},inline:{raw:`---
src: pages/value-object-coding-rule.md
---
`,content:"",frontmatter:{},index:12,start:66,end:70},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/value-object-coding-rule.md",notesHTML:"",id:12,no:13},__clicksElements:[],__preloaded:!1}},{path:"14",name:"page-14",component:Sxe,meta:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/command-coding-rule.md",slide:{raw:null,title:"Coding rules",level:1,content:`# Command on Aggregate

\`\`\`mermaid
flowchart LR 

MusicalWork[MusicalWork\\n\\n\\n\\n]:::aggregate
RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

RegisterMusicalWork-.-MusicalWork

classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
\`\`\`




<v-click>

# Method in Class

\`\`\`java{all}
public class MusicalWork() {
   
    public void register(CreatorId creatorId, WorkTitle title, MusicGenre genre) {


    }
}

\`\`\`
</v-click>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/command-coding-rule.md"},index:13,start:0,end:46,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/command-coding-rule.md",raw:`---
class: 'text-white'
layout: full
title: Coding rules
lineNumbers: true
highlighter: shiki
hideInToc: true
---

# Command on Aggregate

\`\`\`mermaid
flowchart LR 

MusicalWork[MusicalWork\\n\\n\\n\\n]:::aggregate
RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

RegisterMusicalWork-.-MusicalWork

classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
\`\`\`




<v-click>

# Method in Class

\`\`\`java{all}
public class MusicalWork() {
   
    public void register(CreatorId creatorId, WorkTitle title, MusicGenre genre) {


    }
}

\`\`\`
</v-click>


<CurrentPage />

`,title:"Coding rules",level:1,content:`# Command on Aggregate

\`\`\`mermaid
flowchart LR 

MusicalWork[MusicalWork\\n\\n\\n\\n]:::aggregate
RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

RegisterMusicalWork-.-MusicalWork

classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
\`\`\`




<v-click>

# Method in Class

\`\`\`java{all}
public class MusicalWork() {
   
    public void register(CreatorId creatorId, WorkTitle title, MusicGenre genre) {


    }
}

\`\`\`
</v-click>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0},index:0,start:0,end:46},inline:{raw:`---
src: pages/command-coding-rule.md
---
`,content:"",frontmatter:{},index:13,start:70,end:74},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/command-coding-rule.md",notesHTML:"",id:13,no:14},__clicksElements:[],__preloaded:!1}},{path:"15",name:"page-15",component:Txe,meta:{class:"text-white",layout:"new-section",title:"Design Level Event Storming",hideInToc:!0,srcSequence:"pages/event-storming.md",slide:{raw:null,title:"Design Level Event Storming",level:1,content:`# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Design Level Event Storming",hideInToc:!0,srcSequence:"pages/event-storming.md"},index:14,start:0,end:60,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/event-storming.md",raw:`---
class: 'text-white'
layout: new-section
---
# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,title:"Design Level Event Storming",level:1,content:`# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Design Level Event Storming"},index:0,start:0,end:60},inline:{raw:`---
src: pages/event-storming.md
hideInToc: true
---
`,content:"",frontmatter:{hideInToc:!0},index:14,start:74,end:79},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/event-storming.md",notesHTML:"",id:14,no:15},__clicksElements:[],__preloaded:!1}},{path:"16",name:"page-16",component:Bxe,meta:{class:"text-white",layout:"two-cols",hideInToc:!0,title:"Example Mapping",srcSequence:"pages/example-mapping-detailed-event.md",slide:{raw:null,title:"Example Mapping",level:1,content:`::default::

# Example Mapping
#### Musical Work Registered


<div v-click="1">

<div style="color:#f26d83">1. What does it mean that musical work is registered?</div>

</div>

<div v-click="2">

<div style="color:#f26d83">2. How can we reference a registered musical work?</div>

</div>

<div v-click="3">

<div style="color:#f26d83">3. What is changing after registration?</div>

</div>

<div v-click="4">

> After successful musical work registration, work status changes to registered, and we are able to locate work to see registration details like: title, genre, who and when registered it - Jakub (Copyright Officer)

</div>

::right::

<div v-click="5">

\`\`\`mermaid{scale: 0.8}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
\`\`\`
</div>

<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",hideInToc:!0,title:"Example Mapping",srcSequence:"pages/example-mapping-detailed-event.md"},index:15,start:0,end:78,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping-detailed-event.md",raw:`---
class: 'text-white'
layout: two-cols
hideInToc: true
---

::default::

# Example Mapping
#### Musical Work Registered


<div v-click="1">

<div style="color:#f26d83">1. What does it mean that musical work is registered?</div>

</div>

<div v-click="2">

<div style="color:#f26d83">2. How can we reference a registered musical work?</div>

</div>

<div v-click="3">

<div style="color:#f26d83">3. What is changing after registration?</div>

</div>

<div v-click="4">

> After successful musical work registration, work status changes to registered, and we are able to locate work to see registration details like: title, genre, who and when registered it - Jakub (Copyright Officer)

</div>

::right::

<div v-click="5">

\`\`\`mermaid{scale: 0.8}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
\`\`\`
</div>

<CurrentPage />`,title:"Example Mapping",level:1,content:`::default::

# Example Mapping
#### Musical Work Registered


<div v-click="1">

<div style="color:#f26d83">1. What does it mean that musical work is registered?</div>

</div>

<div v-click="2">

<div style="color:#f26d83">2. How can we reference a registered musical work?</div>

</div>

<div v-click="3">

<div style="color:#f26d83">3. What is changing after registration?</div>

</div>

<div v-click="4">

> After successful musical work registration, work status changes to registered, and we are able to locate work to see registration details like: title, genre, who and when registered it - Jakub (Copyright Officer)

</div>

::right::

<div v-click="5">

\`\`\`mermaid{scale: 0.8}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
\`\`\`
</div>

<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",hideInToc:!0,title:"Example Mapping"},index:0,start:0,end:78},inline:{raw:`---
src: pages/example-mapping-detailed-event.md
---

`,content:"",frontmatter:{},index:15,start:79,end:84},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping-detailed-event.md",notesHTML:"",id:15,no:16},__clicksElements:[],__preloaded:!1}},{path:"17",name:"page-17",component:zxe,meta:{class:"text-white",layout:"new-section",hideInToc:!0,title:"Example Mapping",srcSequence:"pages/example-mapping-detailed.md",slide:{raw:null,title:"Example Mapping",level:1,content:`::default::

# Example Mapping
#### Register new Musical Work 


\`\`\`mermaid{scale: 0.6}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
\`\`\`


<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",hideInToc:!0,title:"Example Mapping",srcSequence:"pages/example-mapping-detailed.md"},index:16,start:0,end:50,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping-detailed.md",raw:`---
class: 'text-white'
layout: new-section
hideInToc: true
---

::default::

# Example Mapping
#### Register new Musical Work 


\`\`\`mermaid{scale: 0.6}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
\`\`\`


<CurrentPage />`,title:"Example Mapping",level:1,content:`::default::

# Example Mapping
#### Register new Musical Work 


\`\`\`mermaid{scale: 0.6}
flowchart TB 

subgraph Given[Given]
direction LR

NoEvents

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
\`\`\`


<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",hideInToc:!0,title:"Example Mapping"},index:0,start:0,end:50},inline:{raw:`---
src: pages/example-mapping-detailed.md
---
`,content:"",frontmatter:{},index:16,start:84,end:88},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping-detailed.md",notesHTML:"",id:16,no:17},__clicksElements:[],__preloaded:!1}},{path:"18",name:"page-18",component:Hxe,meta:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/example-mapping-coding-rule.md",slide:{raw:null,title:"Coding rules",level:1,content:`# Example Mapping == Test Case


\`\`\`groovy{all}{maxHeight:'400px'}
    
    def "should register new musical work"() {
        given:
        noEvents()
        
        when:
        registerMusicalWork("bob-marley-1234", "One Love", MusicGenre.Reggae)
        
        then:
        expectsThatMusicalWorkRegistered(new CreatorId("bob-marley-1234"), new WorkTitle("ONE LOVE"), MusicGenre.Reggae)
    }
   
\`\`\`


<CurrentPage />`,frontmatter:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/example-mapping-coding-rule.md"},index:17,start:0,end:30,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping-coding-rule.md",raw:`---
class: 'text-white'
layout: full
title: Coding rules
lineNumbers: true
highlighter: shiki
hideInToc: true
---
# Example Mapping == Test Case


\`\`\`groovy{all}{maxHeight:'400px'}
    
    def "should register new musical work"() {
        given:
        noEvents()
        
        when:
        registerMusicalWork("bob-marley-1234", "One Love", MusicGenre.Reggae)
        
        then:
        expectsThatMusicalWorkRegistered(new CreatorId("bob-marley-1234"), new WorkTitle("ONE LOVE"), MusicGenre.Reggae)
    }
   
\`\`\`


<CurrentPage />

`,title:"Coding rules",level:1,content:`# Example Mapping == Test Case


\`\`\`groovy{all}{maxHeight:'400px'}
    
    def "should register new musical work"() {
        given:
        noEvents()
        
        when:
        registerMusicalWork("bob-marley-1234", "One Love", MusicGenre.Reggae)
        
        then:
        expectsThatMusicalWorkRegistered(new CreatorId("bob-marley-1234"), new WorkTitle("ONE LOVE"), MusicGenre.Reggae)
    }
   
\`\`\`


<CurrentPage />`,frontmatter:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0},index:0,start:0,end:30},inline:{raw:`---
src: pages/example-mapping-coding-rule.md
---
`,content:"",frontmatter:{},index:17,start:88,end:92},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping-coding-rule.md",notesHTML:"",id:17,no:18},__clicksElements:[],__preloaded:!1}},{path:"19",name:"page-19",component:qxe,meta:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/event-coding-rule.md",slide:{raw:null,title:"Coding rules",level:1,content:`# Event from Aggregate

\`\`\`mermaid{scale: 0.8}
flowchart LR 

MusicalWork[MusicalWork:\\n- id: UUID\\n- status: 'Unregistered'\\n- registrationDetails: RegistrationDetails]:::aggregate
RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command
MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event


RegisterMusicalWork-.-MusicalWork
MusicalWork-.-MusicalWorkRegistered

classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef event fill:#f58318;
\`\`\`




<v-click>

# State changes

\`\`\`java{all}{maxHeight:'200px'}
public class MusicalWork {
    private MusicalWorkId id;
    private Status status = Status.Unregistered;
    private RegistrationDetails registrationDetails;
    
    public void register(CreatorId creatorId, WorkTitle title, MusicGenre musicGenre) {
        this.id = MusicalWorkId.next();
        this.registrationDetails = new RegistrationDetails(creatorId, title, musicGenre, RegistrationDate.now());
        this.status = Status.Registered;
    }
    
    static enum Status {
        Unregistered, Registered
    } 
}
\`\`\`
</v-click>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/event-coding-rule.md"},index:18,start:0,end:57,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/event-coding-rule.md",raw:`---
class: 'text-white'
layout: full
title: Coding rules
lineNumbers: true
highlighter: shiki
hideInToc: true
---

# Event from Aggregate

\`\`\`mermaid{scale: 0.8}
flowchart LR 

MusicalWork[MusicalWork:\\n- id: UUID\\n- status: 'Unregistered'\\n- registrationDetails: RegistrationDetails]:::aggregate
RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command
MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event


RegisterMusicalWork-.-MusicalWork
MusicalWork-.-MusicalWorkRegistered

classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef event fill:#f58318;
\`\`\`




<v-click>

# State changes

\`\`\`java{all}{maxHeight:'200px'}
public class MusicalWork {
    private MusicalWorkId id;
    private Status status = Status.Unregistered;
    private RegistrationDetails registrationDetails;
    
    public void register(CreatorId creatorId, WorkTitle title, MusicGenre musicGenre) {
        this.id = MusicalWorkId.next();
        this.registrationDetails = new RegistrationDetails(creatorId, title, musicGenre, RegistrationDate.now());
        this.status = Status.Registered;
    }
    
    static enum Status {
        Unregistered, Registered
    } 
}
\`\`\`
</v-click>


<CurrentPage />

`,title:"Coding rules",level:1,content:`# Event from Aggregate

\`\`\`mermaid{scale: 0.8}
flowchart LR 

MusicalWork[MusicalWork:\\n- id: UUID\\n- status: 'Unregistered'\\n- registrationDetails: RegistrationDetails]:::aggregate
RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command
MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event


RegisterMusicalWork-.-MusicalWork
MusicalWork-.-MusicalWorkRegistered

classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef event fill:#f58318;
\`\`\`




<v-click>

# State changes

\`\`\`java{all}{maxHeight:'200px'}
public class MusicalWork {
    private MusicalWorkId id;
    private Status status = Status.Unregistered;
    private RegistrationDetails registrationDetails;
    
    public void register(CreatorId creatorId, WorkTitle title, MusicGenre musicGenre) {
        this.id = MusicalWorkId.next();
        this.registrationDetails = new RegistrationDetails(creatorId, title, musicGenre, RegistrationDate.now());
        this.status = Status.Registered;
    }
    
    static enum Status {
        Unregistered, Registered
    } 
}
\`\`\`
</v-click>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0},index:0,start:0,end:57},inline:{raw:`---
src: pages/event-coding-rule.md
---
`,content:"",frontmatter:{},index:18,start:92,end:96},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/event-coding-rule.md",notesHTML:"",id:18,no:19},__clicksElements:[],__preloaded:!1}},{path:"20",name:"page-20",component:Zxe,meta:{class:"text-white",layout:"new-section",title:"Design Level Event Storming",hideInToc:!0,srcSequence:"pages/event-storming.md",slide:{raw:null,title:"Design Level Event Storming",level:1,content:`# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Design Level Event Storming",hideInToc:!0,srcSequence:"pages/event-storming.md"},index:19,start:0,end:60,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/event-storming.md",raw:`---
class: 'text-white'
layout: new-section
---
# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,title:"Design Level Event Storming",level:1,content:`# Design Level Event Storming

\`\`\`mermaid
flowchart LR

RegisterMusicalWork:::command
ClaimMusicalWork:::command

MusicalWorkRegistered:::event
MusicalWorkClaimed:::event
MusicalWorkFullyClaimed:::event

MusicalWorkOverclaimed:::error
MusicalWorkAlreadyRegistered:::error

subgraph MusicalWork[MusicalWork]
direction LR

NotRegisteredYet[Is not already registered]

FullyClaimed[Is fully claimed]

Overclaim[Is overclaimed]


end

style MusicalWork fill:#bd9d40;


RegisterMusicalWork-.-MusicalWork
ClaimMusicalWork-.-MusicalWork


MusicalWork-.-MusicalWorkRegistered
MusicalWork-.-MusicalWorkAlreadyRegistered

MusicalWork-.-MusicalWorkClaimed
MusicalWork-.-MusicalWorkFullyClaimed
MusicalWork-.-MusicalWorkOverclaimed

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;
linkStyle 2 stroke:#2b3846,color:red;
linkStyle 3 stroke:#2b3846,color:red;
linkStyle 4 stroke:#2b3846,color:red;
linkStyle 5 stroke:#2b3846,color:red;
linkStyle 6 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Design Level Event Storming"},index:0,start:0,end:60},inline:{raw:`---
src: pages/event-storming.md
hideInToc: true
---
`,content:"",frontmatter:{hideInToc:!0},index:19,start:96,end:101},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/event-storming.md",notesHTML:"",id:19,no:20},__clicksElements:[],__preloaded:!1}},{path:"21",name:"page-21",component:awe,meta:{class:"text-white",layout:"two-cols",hideInToc:!0,title:"Example Mapping",srcSequence:"pages/example-mapping-detailed-invariant.md",slide:{raw:null,title:"Example Mapping",level:1,content:`::default::

# Example Mapping
#### Already Registered exploration


<div v-click="1">

<div style="color:#f26d83">1. What should happen if work is registered for the second time?</div>

</div>

<div v-click="2">

> It should not be allowed and may lead to ambiguity. We would like to be informed about such situation - J.

</div>


<div v-click="3">

<div style="color:#f26d83">2. About what details you would like to be informed?</div>

</div>

<div v-click="4">

> Musical work id and creator how tried it should be enough - J.

</div>

::right::

<div v-click="5">

\`\`\`mermaid{scale: 0.7}
flowchart TB 

subgraph Given[Given]
direction LR

MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'ziggy-marley-543'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkAlreadyRegistered[MusicalWorkAlreadyRegistered:\\n- musicalWorkId: UUID\\n- registrationRequestedBy: 'ziggy-marley-543']:::error

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`
</div>

<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",hideInToc:!0,title:"Example Mapping",srcSequence:"pages/example-mapping-detailed-invariant.md"},index:20,start:0,end:80,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping-detailed-invariant.md",raw:`---
class: 'text-white'
layout: two-cols
hideInToc: true
---

::default::

# Example Mapping
#### Already Registered exploration


<div v-click="1">

<div style="color:#f26d83">1. What should happen if work is registered for the second time?</div>

</div>

<div v-click="2">

> It should not be allowed and may lead to ambiguity. We would like to be informed about such situation - J.

</div>


<div v-click="3">

<div style="color:#f26d83">2. About what details you would like to be informed?</div>

</div>

<div v-click="4">

> Musical work id and creator how tried it should be enough - J.

</div>

::right::

<div v-click="5">

\`\`\`mermaid{scale: 0.7}
flowchart TB 

subgraph Given[Given]
direction LR

MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'ziggy-marley-543'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkAlreadyRegistered[MusicalWorkAlreadyRegistered:\\n- musicalWorkId: UUID\\n- registrationRequestedBy: 'ziggy-marley-543']:::error

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`
</div>

<CurrentPage />`,title:"Example Mapping",level:1,content:`::default::

# Example Mapping
#### Already Registered exploration


<div v-click="1">

<div style="color:#f26d83">1. What should happen if work is registered for the second time?</div>

</div>

<div v-click="2">

> It should not be allowed and may lead to ambiguity. We would like to be informed about such situation - J.

</div>


<div v-click="3">

<div style="color:#f26d83">2. About what details you would like to be informed?</div>

</div>

<div v-click="4">

> Musical work id and creator how tried it should be enough - J.

</div>

::right::

<div v-click="5">

\`\`\`mermaid{scale: 0.7}
flowchart TB 

subgraph Given[Given]
direction LR

MusicalWorkRegistered[MusicalWorkRegistered:\\n- musicalWorkId: UUID\\n- registeredBy: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae\\n- registeredAt: '1984-04-16' ]:::event

end


subgraph When[When]
direction LR

RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'ziggy-marley-543'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command

end


subgraph Then[Then]
direction LR

MusicalWorkAlreadyRegistered[MusicalWorkAlreadyRegistered:\\n- musicalWorkId: UUID\\n- registrationRequestedBy: 'ziggy-marley-543']:::error

end

Given-.-When
When-.-Then

linkStyle 0 stroke:#2b3846,color:red;
linkStyle 1 stroke:#2b3846,color:red;

classDef event fill:#f58318;
classDef command fill:#48a1f0;
classDef error fill:#f44336;
\`\`\`
</div>

<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",hideInToc:!0,title:"Example Mapping"},index:0,start:0,end:80},inline:{raw:`---
src: pages/example-mapping-detailed-invariant.md
---
`,content:"",frontmatter:{},index:20,start:101,end:105},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/example-mapping-detailed-invariant.md",notesHTML:"",id:20,no:21},__clicksElements:[],__preloaded:!1}},{path:"22",name:"page-22",component:hwe,meta:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/invariant-coding-rule.md",slide:{raw:null,title:"Coding rules",level:1,content:`# Example Mapping == Test Case
#### Already Registered Exploration


\`\`\`groovy{all}{maxHeight:'400px'}
    
    def "should not register already registered musical work"() {
        given:
        musicalWorkRegistered("bob-marley-1234", "One Love", MusicGenre.Reggae)

        when:
        registerMusicalWork("ziggy-marley-543", "One Love", MusicGenre.Reggae)

        then:
        def musicalWorkAlreadyRegistered = thrown(MusicalWorkAlreadyRegistered)
        musicalWorkAlreadyRegistered.registrationRequestedBy == new CreatorId("ziggy-marley-543")
    }
   
\`\`\`


<CurrentPage />`,frontmatter:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/invariant-coding-rule.md"},index:21,start:0,end:31,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/invariant-coding-rule.md",raw:`---
class: 'text-white'
layout: full
title: Coding rules
lineNumbers: true
highlighter: shiki
hideInToc: true
---
# Example Mapping == Test Case
#### Already Registered Exploration


\`\`\`groovy{all}{maxHeight:'400px'}
    
    def "should not register already registered musical work"() {
        given:
        musicalWorkRegistered("bob-marley-1234", "One Love", MusicGenre.Reggae)

        when:
        registerMusicalWork("ziggy-marley-543", "One Love", MusicGenre.Reggae)

        then:
        def musicalWorkAlreadyRegistered = thrown(MusicalWorkAlreadyRegistered)
        musicalWorkAlreadyRegistered.registrationRequestedBy == new CreatorId("ziggy-marley-543")
    }
   
\`\`\`


<CurrentPage />
`,title:"Coding rules",level:1,content:`# Example Mapping == Test Case
#### Already Registered Exploration


\`\`\`groovy{all}{maxHeight:'400px'}
    
    def "should not register already registered musical work"() {
        given:
        musicalWorkRegistered("bob-marley-1234", "One Love", MusicGenre.Reggae)

        when:
        registerMusicalWork("ziggy-marley-543", "One Love", MusicGenre.Reggae)

        then:
        def musicalWorkAlreadyRegistered = thrown(MusicalWorkAlreadyRegistered)
        musicalWorkAlreadyRegistered.registrationRequestedBy == new CreatorId("ziggy-marley-543")
    }
   
\`\`\`


<CurrentPage />`,frontmatter:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0},index:0,start:0,end:31},inline:{raw:`---
src: pages/invariant-coding-rule.md
---
`,content:"",frontmatter:{},index:21,start:105,end:109},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/invariant-coding-rule.md",notesHTML:"",id:21,no:22},__clicksElements:[],__preloaded:!1}},{path:"23",name:"page-23",component:mwe,meta:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/invariant-coding-rule.md",slide:{raw:`---
class: 'text-white'
layout: full
title: Coding rules
lineNumbers: true
highlighter: shiki
hideInToc: true
---
# Invariant in Aggregate

\`\`\`mermaid{scale: 0.8}
flowchart LR 

MusicalWork[MusicalWork:\\n- id: UUID\\n- status: 'Registered'\\n- registrationDetails: RegistrationDetails]:::aggregate
RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command
MusicalWorkAlreadyRegistered[MusicalWorkAlreadyRegistered:\\n- musicalWorkId: UUID\\n- registrationRequestedBy: 'ziggy-marley-543']:::error



RegisterMusicalWork-.-MusicalWork
MusicalWork-.-MusicalWorkAlreadyRegistered

classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef event fill:#f58318;
classDef error fill:#f44336;

\`\`\`




<v-click>

# If Statements

\`\`\`java{all}{maxHeight:'200px'}
public class MusicalWork {
    private MusicalWorkId id;
    private Status status = Status.Unregistered;
    private RegistrationDetails registrationDetails;

    public void register(CreatorId creatorId, WorkTitle title, MusicGenre musicGenre) {
        if (isRegistered()) {
            throw new MusicalWorkAlreadyRegistered(id, creatorId);
        }
        
        this.id = MusicalWorkId.next();
        this.registrationDetails = new RegistrationDetails(creatorId, title, musicGenre, RegistrationDate.now());
        this.status = Status.Registered;
    }
    
    Boolean isRegistered() {
        return status == Status.Registered;
    }
}
\`\`\`
</v-click>


<CurrentPage />
`,title:"Coding rules",level:1,content:`# Invariant in Aggregate

\`\`\`mermaid{scale: 0.8}
flowchart LR 

MusicalWork[MusicalWork:\\n- id: UUID\\n- status: 'Registered'\\n- registrationDetails: RegistrationDetails]:::aggregate
RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command
MusicalWorkAlreadyRegistered[MusicalWorkAlreadyRegistered:\\n- musicalWorkId: UUID\\n- registrationRequestedBy: 'ziggy-marley-543']:::error



RegisterMusicalWork-.-MusicalWork
MusicalWork-.-MusicalWorkAlreadyRegistered

classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef event fill:#f58318;
classDef error fill:#f44336;

\`\`\`




<v-click>

# If Statements

\`\`\`java{all}{maxHeight:'200px'}
public class MusicalWork {
    private MusicalWorkId id;
    private Status status = Status.Unregistered;
    private RegistrationDetails registrationDetails;

    public void register(CreatorId creatorId, WorkTitle title, MusicGenre musicGenre) {
        if (isRegistered()) {
            throw new MusicalWorkAlreadyRegistered(id, creatorId);
        }
        
        this.id = MusicalWorkId.next();
        this.registrationDetails = new RegistrationDetails(creatorId, title, musicGenre, RegistrationDate.now());
        this.status = Status.Registered;
    }
    
    Boolean isRegistered() {
        return status == Status.Registered;
    }
}
\`\`\`
</v-click>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/invariant-coding-rule.md"},index:22,start:31,end:93,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/invariant-coding-rule.md",raw:`---
class: 'text-white'
layout: full
title: Coding rules
lineNumbers: true
highlighter: shiki
hideInToc: true
---
# Invariant in Aggregate

\`\`\`mermaid{scale: 0.8}
flowchart LR 

MusicalWork[MusicalWork:\\n- id: UUID\\n- status: 'Registered'\\n- registrationDetails: RegistrationDetails]:::aggregate
RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command
MusicalWorkAlreadyRegistered[MusicalWorkAlreadyRegistered:\\n- musicalWorkId: UUID\\n- registrationRequestedBy: 'ziggy-marley-543']:::error



RegisterMusicalWork-.-MusicalWork
MusicalWork-.-MusicalWorkAlreadyRegistered

classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef event fill:#f58318;
classDef error fill:#f44336;

\`\`\`




<v-click>

# If Statements

\`\`\`java{all}{maxHeight:'200px'}
public class MusicalWork {
    private MusicalWorkId id;
    private Status status = Status.Unregistered;
    private RegistrationDetails registrationDetails;

    public void register(CreatorId creatorId, WorkTitle title, MusicGenre musicGenre) {
        if (isRegistered()) {
            throw new MusicalWorkAlreadyRegistered(id, creatorId);
        }
        
        this.id = MusicalWorkId.next();
        this.registrationDetails = new RegistrationDetails(creatorId, title, musicGenre, RegistrationDate.now());
        this.status = Status.Registered;
    }
    
    Boolean isRegistered() {
        return status == Status.Registered;
    }
}
\`\`\`
</v-click>


<CurrentPage />
`,title:"Coding rules",level:1,content:`# Invariant in Aggregate

\`\`\`mermaid{scale: 0.8}
flowchart LR 

MusicalWork[MusicalWork:\\n- id: UUID\\n- status: 'Registered'\\n- registrationDetails: RegistrationDetails]:::aggregate
RegisterMusicalWork[RegisterMusicalWork:\\n- creatorId: 'bob-marley-1234'\\n- workTitle: 'ONE LOVE'\\n- musicGenre: Reggae]:::command
MusicalWorkAlreadyRegistered[MusicalWorkAlreadyRegistered:\\n- musicalWorkId: UUID\\n- registrationRequestedBy: 'ziggy-marley-543']:::error



RegisterMusicalWork-.-MusicalWork
MusicalWork-.-MusicalWorkAlreadyRegistered

classDef aggregate fill:#bd9d40;
classDef command fill:#48a1f0;
classDef event fill:#f58318;
classDef error fill:#f44336;

\`\`\`




<v-click>

# If Statements

\`\`\`java{all}{maxHeight:'200px'}
public class MusicalWork {
    private MusicalWorkId id;
    private Status status = Status.Unregistered;
    private RegistrationDetails registrationDetails;

    public void register(CreatorId creatorId, WorkTitle title, MusicGenre musicGenre) {
        if (isRegistered()) {
            throw new MusicalWorkAlreadyRegistered(id, creatorId);
        }
        
        this.id = MusicalWorkId.next();
        this.registrationDetails = new RegistrationDetails(creatorId, title, musicGenre, RegistrationDate.now());
        this.status = Status.Registered;
    }
    
    Boolean isRegistered() {
        return status == Status.Registered;
    }
}
\`\`\`
</v-click>


<CurrentPage />`,frontmatter:{class:"text-white",layout:"full",title:"Coding rules",lineNumbers:!0,highlighter:"shiki",hideInToc:!0},index:1,start:31,end:93},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/invariant-coding-rule.md",notesHTML:"",id:22,no:23},__clicksElements:[],__preloaded:!1}},{path:"24",name:"page-24",component:wwe,meta:{class:"text-white",layout:"new-section",title:"Summary",lineNumbers:!0,highlighter:"shiki",srcSequence:"pages/cqs-summary.md",slide:{raw:null,title:"Summary",level:1,content:`# Summary

<v-clicks>

1. Aggregate Root == Class
2. Command == Method
3. Value object == Immutable Class
4. Event == State change in class
5. Example Mapping == Test Case
6. Invariant == If statement


</v-clicks>


<div v-click="7">
<br/>
<br/>

<div class="animate-pulse" style="color:#f26d83;font-size:100px">CQS</div>

</div>

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Summary",lineNumbers:!0,highlighter:"shiki",srcSequence:"pages/cqs-summary.md"},index:23,start:0,end:32,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/cqs-summary.md",raw:`---
class: 'text-white'
layout: new-section
title: Summary
lineNumbers: true
highlighter: shiki
---
# Summary

<v-clicks>

1. Aggregate Root == Class
2. Command == Method
3. Value object == Immutable Class
4. Event == State change in class
5. Example Mapping == Test Case
6. Invariant == If statement


</v-clicks>


<div v-click="7">
<br/>
<br/>

<div class="animate-pulse" style="color:#f26d83;font-size:100px">CQS</div>

</div>

<CurrentPage />
`,title:"Summary",level:1,content:`# Summary

<v-clicks>

1. Aggregate Root == Class
2. Command == Method
3. Value object == Immutable Class
4. Event == State change in class
5. Example Mapping == Test Case
6. Invariant == If statement


</v-clicks>


<div v-click="7">
<br/>
<br/>

<div class="animate-pulse" style="color:#f26d83;font-size:100px">CQS</div>

</div>

<CurrentPage />`,frontmatter:{class:"text-white",layout:"new-section",title:"Summary",lineNumbers:!0,highlighter:"shiki"},index:0,start:0,end:32},inline:{raw:`---
src: pages/cqs-summary.md
---
`,content:"",frontmatter:{},index:22,start:109,end:113},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/cqs-summary.md",notesHTML:"",id:23,no:24},__clicksElements:[],__preloaded:!1}},{path:"25",name:"page-25",component:Twe,meta:{class:"text-white",layout:"center",title:"Summary",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/cqs-summary.md",slide:{raw:`---
class: 'text-white'
layout: center
title: Summary
lineNumbers: true
highlighter: shiki
hideInToc: true
---
# But can we do better?


`,title:"Summary",level:1,content:"# But can we do better?",frontmatter:{class:"text-white",layout:"center",title:"Summary",lineNumbers:!0,highlighter:"shiki",hideInToc:!0,srcSequence:"pages/cqs-summary.md"},index:24,start:32,end:44,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/cqs-summary.md",raw:`---
class: 'text-white'
layout: center
title: Summary
lineNumbers: true
highlighter: shiki
hideInToc: true
---
# But can we do better?


`,title:"Summary",level:1,content:"# But can we do better?",frontmatter:{class:"text-white",layout:"center",title:"Summary",lineNumbers:!0,highlighter:"shiki",hideInToc:!0},index:1,start:32,end:44},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/cqs-summary.md",notesHTML:"",id:24,no:25},__clicksElements:[],__preloaded:!1}},{path:"26",name:"page-26",component:Nwe,meta:{class:"text-white",layout:"two-cols",title:"End",hideInToc:!0,srcSequence:"pages/end.md",slide:{raw:null,title:"End",level:1,content:`::default::

# Thank you
<br/>
<img src="https://jakubiec.github.io/event-storming-to-code/qr-code-gh.png" class="h-60 rounded shadow" />

[GitHub Repository](https://github.com/jakubiec/event-storming-to-code)


::right::
# <mdi-music/> <mdi-music/> <mdi-music/> <mdi-music/> <mdi-music/>
<br/>

<img src="https://jakubiec.github.io/event-storming-to-code/qr-code-nms.png" class="h-60 rounded shadow" />

[Support my band](https://push.fm/fl/nms-owib)

<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",title:"End",hideInToc:!0,srcSequence:"pages/end.md"},index:25,start:0,end:26,source:{filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/end.md",raw:`---
class: 'text-white'
layout: two-cols
title: End
hideInToc: true
---

::default::

# Thank you
<br/>
<img src="https://jakubiec.github.io/event-storming-to-code/qr-code-gh.png" class="h-60 rounded shadow" />

[GitHub Repository](https://github.com/jakubiec/event-storming-to-code)


::right::
# <mdi-music/> <mdi-music/> <mdi-music/> <mdi-music/> <mdi-music/>
<br/>

<img src="https://jakubiec.github.io/event-storming-to-code/qr-code-nms.png" class="h-60 rounded shadow" />

[Support my band](https://push.fm/fl/nms-owib)

<CurrentPage />
`,title:"End",level:1,content:`::default::

# Thank you
<br/>
<img src="https://jakubiec.github.io/event-storming-to-code/qr-code-gh.png" class="h-60 rounded shadow" />

[GitHub Repository](https://github.com/jakubiec/event-storming-to-code)


::right::
# <mdi-music/> <mdi-music/> <mdi-music/> <mdi-music/> <mdi-music/>
<br/>

<img src="https://jakubiec.github.io/event-storming-to-code/qr-code-nms.png" class="h-60 rounded shadow" />

[Support my band](https://push.fm/fl/nms-owib)

<CurrentPage />`,frontmatter:{class:"text-white",layout:"two-cols",title:"End",hideInToc:!0},index:0,start:0,end:26},inline:{raw:`---
src: pages/end.md
---`,content:"",frontmatter:{},index:23,start:113,end:116},filepath:"/home/runner/work/event-storming-to-code/event-storming-to-code/presentations/aggregates/pages/end.md",notesHTML:"",id:25,no:26},__clicksElements:[],__preloaded:!1}},{path:"27",component:Qve,meta:{layout:"end"}}],Ks=Owe,Fwe=[{name:"play",path:"/",component:Yve,children:[...Ks]},{name:"print",path:"/print",component:Zve},{path:"",redirect:{path:"/1"}},{path:"/:pathMatch(.*)",redirect:{path:"/1"}},{path:"/presenter/print",component:()=>Up(()=>import("./PresenterPrint.4af36fb1.js"),["assets/PresenterPrint.4af36fb1.js","assets/NoteViewer.vue_vue_type_script_setup_true_lang.b4b4b198.js"])},{name:"presenter",path:"/presenter/:no",component:()=>Up(()=>import("./Presenter.774b3cc2.js"),["assets/Presenter.774b3cc2.js","assets/NoteViewer.vue_vue_type_script_setup_true_lang.b4b4b198.js","assets/DrawingControls.vue_vue_type_script_setup_true_lang.6a3cb5a1.js","assets/Presenter.e29290d2.css"]),beforeEnter:r=>{if(!dy.remote||dy.remote===r.query.password)return!0;if(dy.remote&&r.query.password===void 0){const e=prompt("Enter password");if(dy.remote===e)return!0}return r.params.no?{path:`/${r.params.no}`}:{path:""}}},{path:"/presenter",redirect:{path:"/presenter/1"}}],tl=S0e({history:zme("/event-storming-to-code/"),routes:Fwe});function Bwe(r,e,{mode:n="replace"}={}){return Ht({get(){const s=tl.currentRoute.value.query[r];return s==null?e!=null?e:null:Array.isArray(s)?s.filter(Boolean):s},set(s){ko(()=>{tl[ft(n)]({query:{...tl.currentRoute.value.query,[r]:s}})})}})}const MV=Tn(0);ko(()=>{tl.afterEach(async()=>{await ko(),MV.value+=1})});const Lh=Ht(()=>tl.currentRoute.value),pg=Ht(()=>Lh.value.query.print!==void 0),Vwe=Ht(()=>Lh.value.query.print==="clicks"),dh=Ht(()=>Lh.value.query.embedded!==void 0),ru=Ht(()=>Lh.value.path.startsWith("/presenter")),Cy=Ht(()=>pg.value&&!Vwe.value),bT=Ht(()=>Lh.value.query.password),Wwe=Ht(()=>!ru.value&&(!wr.remote||bT.value===wr.remote)),bN=Bwe("clicks","0"),AV=Ht(()=>Ks.length-1),zwe=Ht(()=>Lh.value.path),Us=Ht(()=>parseInt(zwe.value.split(/\//g).slice(-1)[0])||1);Ht(()=>q3(Us.value));const Ja=Ht(()=>Ks.find(r=>r.path===`${Us.value}`));Ht(()=>{var r,e,n;return(n=(e=(r=Ja.value)==null?void 0:r.meta)==null?void 0:e.slide)==null?void 0:n.id});Ht(()=>{var r,e;return((e=(r=Ja.value)==null?void 0:r.meta)==null?void 0:e.layout)||(Us.value===1?"cover":"default")});const HS=Ht(()=>Ks.find(r=>r.path===`${Math.min(Ks.length,Us.value+1)}`)),Uwe=Ht(()=>{var r,e;return MV.value,((e=(r=Ja.value)==null?void 0:r.meta)==null?void 0:e.__clicksElements)||[]}),yc=Ht({get(){if(Cy.value)return 99999;let r=+(bN.value||0);return isNaN(r)&&(r=0),r},set(r){bN.value=r.toString()}}),y3=Ht(()=>{var r,e,n;return+((n=(e=(r=Ja.value)==null?void 0:r.meta)==null?void 0:e.clicks)!=null?n:Uwe.value.length)}),Gwe=Ht(()=>Us.value<Ks.length-1||yc.value<y3.value),Hwe=Ht(()=>Us.value>1||yc.value>0),Ywe=Ht(()=>Ks.filter(r=>{var e,n;return(n=(e=r.meta)==null?void 0:e.slide)==null?void 0:n.title}).reduce((r,e)=>(l6(r,e),r),[])),jwe=Ht(()=>c6(Ywe.value,Ja.value));Ht(()=>u6(jwe.value));function zd(){y3.value<=yc.value?Yy():yc.value+=1}async function Ud(){yc.value<=0?await jy():yc.value-=1}function q3(r){return ru.value?`/presenter/${r}`:`/${r}`}function Yy(){const r=Math.min(Ks.length,Us.value+1);return kg(r)}async function jy(r=!0){const e=Math.max(1,Us.value-1);await kg(e),r&&y3.value&&tl.replace({query:{...Lh.value.query,clicks:y3.value}})}function kg(r,e){return tl.push({path:q3(r),query:{...Lh.value.query,clicks:e}})}function $we(r){const e=Tn(0),{direction:n,distanceX:s,distanceY:a}=fme(r,{onSwipeStart(u){u.pointerType==="touch"&&(Uy.value||(e.value=rT()))},onSwipeEnd(u){if(u.pointerType!=="touch"||!e.value||Uy.value)return;const d=Math.abs(s.value),f=Math.abs(a.value);d/window.innerWidth>.3||d>100?n.value===mh.LEFT?zd():Ud():(f/window.innerHeight>.4||f>200)&&(n.value===mh.DOWN?jy():Yy())}})}async function xT(){const{saveAs:r}=await Up(()=>import("./FileSaver.min.fcab5df6.js").then(e=>e.F),[]);r(RB(wr.download)?wr.download:wr.exportFilename?`${wr.exportFilename}.pdf`:"/event-storming-to-code/slidev-exported.pdf",`${wr.title}.pdf`)}async function qwe(r){var e,n;if(r==null){const s=(n=(e=Ja.value)==null?void 0:e.meta)==null?void 0:n.slide;if(!(s!=null&&s.filepath))return!1;r=`${s.filepath}:${s.start}`}return await fetch(`/__open-in-editor?file=${encodeURIComponent(r)}`),!0}function l6(r,e,n=1){var a,u,d,f,g;const s=(u=(a=e.meta)==null?void 0:a.slide)==null?void 0:u.level;s&&s>n&&r.length>0?l6(r[r.length-1].children,e,n+1):r.push({children:[],level:n,path:e.path,hideInToc:Boolean((d=e.meta)==null?void 0:d.hideInToc),title:(g=(f=e.meta)==null?void 0:f.slide)==null?void 0:g.title})}function c6(r,e,n=!1,s){return r.map(a=>{const u={...a,active:a.path===(e==null?void 0:e.path),hasActiveParent:n};return u.children.length>0&&(u.children=c6(u.children,e,u.active||u.hasActiveParent,u)),s&&(u.active||u.activeParent)&&(s.activeParent=!0),u})}function u6(r,e=1){return r.filter(n=>!n.hideInToc).map(n=>({...n,children:u6(n.children,e+1)}))}function Xwe(){const r=wr.titleTemplate.replace("%s",wr.title||"Slidev");npe({title:r}),hpe(`${r} - shared`),mpe(`${r} - drawings`);function e(){ru.value&&(x9("page",+Us.value),x9("clicks",yc.value))}tl.afterEach(e),Ni(yc,e),dpe(n=>{(+n.page!=+Us.value||yc.value!==n.clicks)&&tl.replace({path:q3(n.page),query:{...tl.currentRoute.value.query,clicks:n.clicks||0}})})}const Zwe=yi({__name:"App",setup(r){return Dn(Zn),Xwe(),(e,n)=>{const s=Ch("RouterView"),a=Ch("StarportCarrier");return Ge(),Ct(ai,null,[Bt(s),Bt(a)],64)}}}),Kwe=new Map([["menu","gg-menu-right"],["close","gg-close"],["location","carbon-location"],["share","carbon-share"],["search","carbon-search"],["copy","carbon-copy"],["check","ic-outline-check"]]),Jwe=new Map([["twitter","carbon-logo-twitter"],["github","carbon-logo-github"],["dev-to","bx-bxl-dev-to"],["youtube","carbon-logo-youtube"],["twitch","bi-twitch"]]),Qwe=new Map([["code","carbon-code"],["repo","octicon-repo-24"],["star","carbon-star"],["fork","octicon-repo-forked-16"],["term","carbon-terminal"],["brush","carbon-brush-freehand"],["lamp","teenyicons-desklamp-outline"],["3d","carbon:chart-3d"],["art","heroicons:paint-brush"],["pull-request","tabler:git-pull-request"]]),e3e=new Map([["heart-outline","ant-design-heart-outlined"],["heart-fill","ant-design-heart-filled"],["baby-bottle","mdi-baby-bottle-outline"],["png","carbon-png"],["download","carbon-download"],["calendar","octicon-calendar"],["clock","octicon-clock"]]),LV=new Map([...Kwe,...Jwe,...Qwe,...e3e]),t3e=Array.from(LV.entries());[...t3e.map(([r,e])=>`i-${e}`)];const _3=yi({__name:"AsIcon",props:{name:{type:String,required:!0}},setup(r){const e=r,n=Ht(()=>LV.get(e.name));return(s,a)=>(Ge(),Ct("div",{class:er(`i-${ft(n)}`)},null,2))}}),n3e=Object.freeze(Object.defineProperty({__proto__:null,default:_3},Symbol.toStringTag,{value:"Module"})),i3e=yi({__name:"AsBadge",props:{label:{type:String},outline:{type:Boolean,default:!1},icon:{type:String}},setup(r){const e=r,n=Ht(()=>{const s=["rounded-lg text-sm font-bold py-0.5 px-1 ml-4"];return e.outline?s.push("border-secondary text-secondary border-1"):s.push("border-transparent border-1 bg-secondary text-secondary-100"),s});return(s,a)=>(Ge(),Ct("span",{class:er(["inline-flex items-center rounded-lg text-sm font-bold py-0.5 px-1 ml-4 f",ft(n)])},[r.icon?(Ge(),Jn(_3,{key:0,class:er({"mr-0.5":r.label}),name:r.icon},null,8,["class","name"])):pi("",!0),Yt(" "+Js(r.label),1)],2))}}),r3e=Object.freeze(Object.defineProperty({__proto__:null,default:i3e},Symbol.toStringTag,{value:"Module"}));var vh=(r=>(r.PRIMARY="primary",r.SECONDARY="secondary",r))(vh||{}),tu=(r=>(r.DEFAULT="default",r.BLOCK="block",r.SM="sm",r.MD="md",r.LG="lg",r))(tu||{});const s3e=[[/^btn-(?!.*(outline|flat|transparent|block|sm|md|lg|default))(.*)/,([,,r])=>`important-bg-${r}-400 text-white border-transparent hover:shadow-${r} hover:shadow-button focus:outline-none focus:ring-2 focus:ring-opacity-75 focus:ring-${r}-400`],[/^btn-outline-(.*)$/,([,r])=>`bg-transparent border-${r}-400 text-${r}-400 hover:text-${r}-500 hover:shadow-${r} hover:shadow-button focus:outline-none focus:ring-2 focus:ring-opacity-75 focus:ring-${r}-400`],[/^btn-flat-(.*)$/,([,r])=>`bg-gray-50 border-transparent text-${r}-400 hover:text-${r}-600`],[/^btn-transparent-(.*)$/,([,r])=>`bg-transparent border-transparent text-${r}-400 hover:text-${r}-600 dark:text-${r}-100`]];[...Object.values(vh).map(r=>`btn-${r}`),...Object.values(vh).map(r=>`btn-outline-${r}`),...Object.values(vh).map(r=>`btn-flat-${r}`),...Object.values(vh).map(r=>`btn-transparent-${r}`),...Object.values(tu).map(r=>`btn-${r}`)];Object.values(vh);var yp=!0,L0=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{},RV=0;if(L0.process&&L0.process.env&&L0.process.stdout){var Zx=L0.process.env,Kx=Zx.FORCE_COLOR,o3e=Zx.NODE_DISABLE_COLORS,a3e=Zx.NO_COLOR,YS=Zx.TERM;o3e||a3e||Kx==="0"?yp=!1:Kx==="1"||Kx==="2"||Kx==="3"?yp=!0:YS==="dumb"?yp=!1:"CI"in L0.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(function(r){return r in L0.process.env})?yp=!0:yp=process.stdout.isTTY,yp&&(RV=YS&&YS.endsWith("-256color")?2:1)}var xN={enabled:yp,supportLevel:RV};function tr(r,e,n){n===void 0&&(n=1);var s="\x1B["+r+"m",a="\x1B["+e+"m",u=new RegExp("\\x1b\\["+e+"m","g");return function(d){return xN.enabled&&xN.supportLevel>=n?s+(""+d).replace(u,s)+a:""+d}}tr(0,0);tr(1,22);tr(2,22);tr(3,23);tr(4,24);tr(7,27);tr(8,28);tr(9,29);tr(30,39);tr(31,39);tr(32,39);var l3e=tr(33,39);tr(34,39);tr(35,39);tr(36,39);tr(97,39);tr(90,39);tr(37,39);tr(91,39);tr(92,39);tr(93,39);tr(94,39);tr(95,39);tr(96,39);tr(40,49);tr(41,49);tr(42,49);tr(43,49);tr(44,49);tr(45,49);tr(46,49);tr(107,49);tr(100,49);tr(101,49);tr(102,49);tr(103,49);tr(104,49);tr(105,49);tr(106,49);tr(47,49);let Jv="[ AS-Use ]";function gc(r){r&&(Jv=r);function e(d,f){f?console.error(`${Jv} ${d}`,f):console.error(`${Jv} ${d}`)}function n(d){console.warn(l3e(`${Jv} ${d}`))}function s(d){console.info(`${Jv} ${d}`)}function a(d,f){}function u(d,f){}return{info:s,error:e,warn:n,log:a,table:u}}const h6=yi({__name:"AsButton",props:{disabled:Boolean,outline:Boolean,transparent:Boolean,flat:Boolean||String,link:String,label:{type:String,default:""},variant:{type:String,default:vh.PRIMARY,validator:r=>{const{error:e}=gc(),n=Object.values(vh).includes(r);return n||e(`Invalid button variant specified "${r}". Valid values are [${Object.values(vh)}]`),n}},size:{type:String,default:tu.DEFAULT,validator:r=>{const{error:e}=gc(),n=Object.values(tu).includes(r);return n||e(`Invalid button size specified "${r}". Valid values are [${Object.values(tu)}]`),n}},target:{type:String,default:"_blank"},icon:{type:String},iconRight:{type:String}},setup(r){const e=r,n=Ht(()=>{const a=["as-btn"];return e.variant&&(e.flat?a.push(`btn-flat-${e.variant.toLowerCase()}`):e.outline?a.push(`btn-outline-${e.variant.toLowerCase()}`):e.transparent?a.push(`btn-transparent-${e.variant.toLowerCase()}`):a.push(`btn-${e.variant.toLowerCase()}`)),e.size&&a.push({"py-2 px-4":e.size===tu.DEFAULT,"w-full py-2 px-5":e.size===tu.BLOCK,"text-xs py-1 px-2":e.size===tu.SM,"text-sm py-1.5 px-3":e.size===tu.MD,"text-lg py-2.5 px-5":e.size===tu.LG}),a}),s=Ht(()=>e.label!=="");return(a,u)=>(Ge(),Jn(hB(r.link?"a":"button"),{disabled:r.disabled,href:r.link||void 0,target:r.link?r.target:void 0,class:er(ft(n)),font:"sans semibold",border:"2 rounded-sm","transition-all":"","duration-300":"","disabled:opacity-20":"","cursor-pointer":"","decoration-none":""},{default:Xn(()=>[yr(a.$slots,"preffix",{},()=>[r.icon?(Ge(),Jn(_3,{key:0,name:r.icon,class:er(["bg-current",ft(s)?"mr-2":""])},null,8,["name","class"])):pi("",!0)]),yr(a.$slots,"default",{},()=>[Yt(Js(r.label),1)]),yr(a.$slots,"suffix",{},()=>[ft(s)&&r.iconRight?(Ge(),Jn(_3,{key:0,name:r.iconRight,class:er(["b-current",ft(s)?"ml-2":""])},null,8,["name","class"])):pi("",!0)])]),_:3},8,["disabled","href","target","class"]))}}),c3e=Object.freeze(Object.defineProperty({__proto__:null,default:h6},Symbol.toStringTag,{value:"Module"}));var Sy=(r=>(r.FILL="fill",r.CONTAIN="contain",r.COVER="cover",r))(Sy||{}),PV=(r=>(r.EAGER="eager",r.LAZY="lazy",r))(PV||{}),uc=(r=>(r.BOTTOM="bottom",r.FULL="full",r.OUTSIDE="outside",r))(uc||{});const wT=["16/9","4/3","1/1","2/3"];wT.map(r=>`aspect-${r}`);Object.values(Sy);Object.values(PV);Object.values(uc);const u3e=["src","alt"],d6=yi({__name:"AsImg",props:{aspectRatio:{type:String,validator:r=>{const{error:e}=gc(),n=wT.includes(r);return n||e(`Invalid image aspect-ratio specified "${r}". Valid values are [${wT}]`),n}},objectFit:{type:String,default:Sy.CONTAIN,validator:r=>{const{error:e}=gc(),n=Object.values(Sy).includes(r);return n||e(`Invalid object-ratio specified "${r}". Valid values are [${Object.values(Sy)}]`),n}},caption:String,captionMode:{type:String,default:uc.OUTSIDE,validator:r=>{const{error:e}=gc(),n=Object.values(uc).includes(r);return n||e(`Invalid image caption mode specified "${r}". Valid values are [${Object.values(uc)}]`),n}},captionType:{type:String,default:uc.OUTSIDE,validator:r=>{const{error:e}=gc(),n=Object.values(uc).includes(r);return n||e(`Invalid caption-type specified "${r}". Valid values are [${Object.values(uc)}]`),n}}},emits:["loaded","error"],setup(r,{emit:e}){const n=r,s=MB(),a=Ht(()=>({src:s.src,alt:s.alt})),u=Tn(!1),d=Tn(!0),{error:f}=gc(),g=Ht(()=>({objectFit:n.objectFit})),_=Ht(()=>({"w-full bg-gray-100 relative":!0,"overflow-hidden :before:bg-red-100 :before:block :before:absolute :before:inset-0 :before:bg-no-repeat :before:bg-center":u.value})),y=Tn(["as-img","relative","overflow-hidden","rounded","m-0",n.aspectRatio?`aspect-${n.aspectRatio}`:null]),w=Ht(()=>{switch(n.captionType){case uc.OUTSIDE:return["text-sm","py-4"];case uc.BOTTOM:return"absolute bg-black text-sm text-white bottom-0 bg-opacity-20 w-full p-4 text-center";case uc.FULL:return`absolute bg-black text-sm text-white inset-0 bg-opacity-20 w-full 
      p-4 text-center flex items-center justify-center`;default:return""}});function k(A){u.value=!1,d.value=!1,e("loaded",A)}function S(A){u.value=!0,d.value=!1;const{src:P}=A.target,R=`Image source ${P} not found`;e("error",R),f(R)}return(A,P)=>(Ge(),Ct("figure",{class:er(y.value)},[G("img",{src:ft(a).src,alt:ft(a).alt,class:er(ft(_)),style:Qs(ft(g)),onLoad:k,onError:S},null,46,u3e),r.caption||A.$slots.default?(Ge(),Ct("figcaption",{key:0,class:er(ft(w))},[yr(A.$slots,"default",{},()=>[Yt(Js(r.caption),1)])],2)):pi("",!0)],2))}}),h3e=Object.freeze(Object.defineProperty({__proto__:null,default:d6},Symbol.toStringTag,{value:"Module"})),d3e={class:"as-card",border:"1 gray-300 rounded",text:"primary-500 dark:gray-100 left",font:"sans","w-full":"","inline-flex":"","flex-col":"","cursor-pointer":""},f3e={key:1,font:"bold display",text:"base lg","p-4":"","m-0":""},p3e={key:2,"m-0":"","pl-4":"","font-typewrite":"","text-xs":""},m3e={"text-sm":"","p-4":""},g3e=G("footer",{flex:"","w-full":"","text-sm":"","justify-end":""},null,-1),v3e=yi({__name:"AsCard",props:{title:{type:String,default:""},subtitle:{type:String,default:""},media:{type:String,default:""},mediaAlt:{type:String,default:""},content:{type:String,default:""}},setup(r){return(e,n)=>(Ge(),Ct("div",d3e,[yr(e.$slots,"header",{},()=>[G("header",null,[r.media?(Ge(),Jn(d6,{key:0,"w-full":"","rounded-none":"",src:r.media,alt:r.mediaAlt,"aspect-ratio":"16/9"},null,8,["src","alt"])):pi("",!0),r.title?(Ge(),Ct("h2",f3e,[yr(e.$slots,"title",{},()=>[Yt(Js(r.title),1)])])):pi("",!0),r.subtitle?(Ge(),Ct("p",p3e,[yr(e.$slots,"subtitle",{},()=>[Yt(Js(r.subtitle),1)])])):pi("",!0)])]),yr(e.$slots,"content",{},()=>[G("div",m3e,Js(r.content),1)]),yr(e.$slots,"footer",{},()=>[g3e])]))}}),y3e=Object.freeze(Object.defineProperty({__proto__:null,default:v3e},Symbol.toStringTag,{value:"Module"}));var IV=typeof globalThis<"u"?globalThis:typeof{}<"u"?{}:typeof global<"u"?global:typeof self<"u"?self:{},qw={exports:{}};(function(r,e){(function(n,s){r.exports=s()})(IV,function(){return n={770:function(a,u,d){var f=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(u,"__esModule",{value:!0}),u.setDefaultDebugCall=u.createOnigScanner=u.createOnigString=u.loadWASM=u.OnigScanner=u.OnigString=void 0;const g=f(d(418));let _=null,y=!1;class w{constructor(O){const B=O.length,N=w._utf8ByteLength(O),V=N!==B,U=V?new Uint32Array(B+1):null;V&&(U[B]=N);const Y=V?new Uint32Array(N+1):null;V&&(Y[N]=B);const X=new Uint8Array(N);let $=0;for(let ee=0;ee<B;ee++){const ue=O.charCodeAt(ee);let Te=ue,De=!1;if(ue>=55296&&ue<=56319&&ee+1<B){const $e=O.charCodeAt(ee+1);$e>=56320&&$e<=57343&&(Te=65536+(ue-55296<<10)|$e-56320,De=!0)}V&&(U[ee]=$,De&&(U[ee+1]=$),Te<=127?Y[$+0]=ee:Te<=2047?(Y[$+0]=ee,Y[$+1]=ee):Te<=65535?(Y[$+0]=ee,Y[$+1]=ee,Y[$+2]=ee):(Y[$+0]=ee,Y[$+1]=ee,Y[$+2]=ee,Y[$+3]=ee)),Te<=127?X[$++]=Te:Te<=2047?(X[$++]=192|(1984&Te)>>>6,X[$++]=128|(63&Te)>>>0):Te<=65535?(X[$++]=224|(61440&Te)>>>12,X[$++]=128|(4032&Te)>>>6,X[$++]=128|(63&Te)>>>0):(X[$++]=240|(1835008&Te)>>>18,X[$++]=128|(258048&Te)>>>12,X[$++]=128|(4032&Te)>>>6,X[$++]=128|(63&Te)>>>0),De&&ee++}this.utf16Length=B,this.utf8Length=N,this.utf16Value=O,this.utf8Value=X,this.utf16OffsetToUtf8=U,this.utf8OffsetToUtf16=Y}static _utf8ByteLength(O){let B=0;for(let N=0,V=O.length;N<V;N++){const U=O.charCodeAt(N);let Y=U,X=!1;if(U>=55296&&U<=56319&&N+1<V){const $=O.charCodeAt(N+1);$>=56320&&$<=57343&&(Y=65536+(U-55296<<10)|$-56320,X=!0)}B+=Y<=127?1:Y<=2047?2:Y<=65535?3:4,X&&N++}return B}createString(O){const B=O._omalloc(this.utf8Length);return O.HEAPU8.set(this.utf8Value,B),B}}class k{constructor(O){if(this.id=++k.LAST_ID,!_)throw new Error("Must invoke loadWASM first.");this._onigBinding=_,this.content=O;const B=new w(O);this.utf16Length=B.utf16Length,this.utf8Length=B.utf8Length,this.utf16OffsetToUtf8=B.utf16OffsetToUtf8,this.utf8OffsetToUtf16=B.utf8OffsetToUtf16,this.utf8Length<1e4&&!k._sharedPtrInUse?(k._sharedPtr||(k._sharedPtr=_._omalloc(1e4)),k._sharedPtrInUse=!0,_.HEAPU8.set(B.utf8Value,k._sharedPtr),this.ptr=k._sharedPtr):this.ptr=B.createString(_)}convertUtf8OffsetToUtf16(O){return this.utf8OffsetToUtf16?O<0?0:O>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[O]:O}convertUtf16OffsetToUtf8(O){return this.utf16OffsetToUtf8?O<0?0:O>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[O]:O}dispose(){this.ptr===k._sharedPtr?k._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}u.OnigString=k,k.LAST_ID=0,k._sharedPtr=0,k._sharedPtrInUse=!1;class S{constructor(O){if(!_)throw new Error("Must invoke loadWASM first.");const B=[],N=[];for(let X=0,$=O.length;X<$;X++){const ee=new w(O[X]);B[X]=ee.createString(_),N[X]=ee.utf8Length}const V=_._omalloc(4*O.length);_.HEAPU32.set(B,V/4);const U=_._omalloc(4*O.length);_.HEAPU32.set(N,U/4);const Y=_._createOnigScanner(V,U,O.length);for(let X=0,$=O.length;X<$;X++)_._ofree(B[X]);_._ofree(U),_._ofree(V),Y===0&&function(X){throw new Error(X.UTF8ToString(X._getLastOnigError()))}(_),this._onigBinding=_,this._ptr=Y}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(O,B,N){let V=y,U=0;if(typeof N=="number"?(8&N&&(V=!0),U=N):typeof N=="boolean"&&(V=N),typeof O=="string"){O=new k(O);const Y=this._findNextMatchSync(O,B,V,U);return O.dispose(),Y}return this._findNextMatchSync(O,B,V,U)}_findNextMatchSync(O,B,N,V){const U=this._onigBinding;let Y;if(Y=N?U._findNextOnigScannerMatchDbg(this._ptr,O.id,O.ptr,O.utf8Length,O.convertUtf16OffsetToUtf8(B),V):U._findNextOnigScannerMatch(this._ptr,O.id,O.ptr,O.utf8Length,O.convertUtf16OffsetToUtf8(B),V),Y===0)return null;const X=U.HEAPU32;let $=Y/4;const ee=X[$++],ue=X[$++];let Te=[];for(let De=0;De<ue;De++){const $e=O.convertUtf8OffsetToUtf16(X[$++]),Ue=O.convertUtf8OffsetToUtf16(X[$++]);Te[De]={start:$e,end:Ue,length:Ue-$e}}return{index:ee,captureIndices:Te}}}u.OnigScanner=S;let A=!1,P=null;u.loadWASM=function(R){if(A)return P;let O,B,N,V;if(A=!0,function(U){return typeof U.instantiator=="function"}(R))O=R.instantiator,B=R.print;else{let U;(function(Y){return Y.data!==void 0})(R)?(U=R.data,B=R.print):U=R,O=function(Y){return typeof Response<"u"&&Y instanceof Response}(U)?typeof WebAssembly.instantiateStreaming=="function"?function(Y){return X=>WebAssembly.instantiateStreaming(Y,X)}(U):function(Y){return async X=>{const $=await Y.arrayBuffer();return WebAssembly.instantiate($,X)}}(U):function(Y){return X=>WebAssembly.instantiate(Y,X)}(U)}return P=new Promise((U,Y)=>{N=U,V=Y}),function(U,Y,X,$){g.default({print:Y,instantiateWasm:(ee,ue)=>{if(typeof performance>"u"){const Te=()=>Date.now();ee.env.emscripten_get_now=Te,ee.wasi_snapshot_preview1.emscripten_get_now=Te}return U(ee).then(Te=>ue(Te.instance),$),{}}}).then(ee=>{_=ee,X()})}(O,B,N,V),P},u.createOnigString=function(R){return new k(R)},u.createOnigScanner=function(R){return new S(R)},u.setDefaultDebugCall=function(R){y=R}},418:a=>{var u=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(d){var f,g,_=(d=d||{})!==void 0?d:{};_.ready=new Promise(function(Xe,nn){f=Xe,g=nn});var y,w={};for(y in _)_.hasOwnProperty(y)&&(w[y]=_[y]);var k,S=!1,A="";function P(Xe){return _.locateFile?_.locateFile(Xe,A):A+Xe}k=function(Xe){var nn;return typeof readbuffer=="function"?new Uint8Array(readbuffer(Xe)):(U(typeof(nn=read(Xe,"binary"))=="object"),nn)},typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var R=_.print||console.log.bind(console),O=_.printErr||console.warn.bind(console);for(y in w)w.hasOwnProperty(y)&&(_[y]=w[y]);w=null,_.arguments&&_.arguments,_.thisProgram&&_.thisProgram,_.quit&&_.quit;var B,N;_.wasmBinary&&(B=_.wasmBinary),_.noExitRuntime,typeof WebAssembly!="object"&&Vt("no native wasm support detected");var V=!1;function U(Xe,nn){Xe||Vt("Assertion failed: "+nn)}var Y,X,$,ee=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ue(Xe,nn,Nn){for(var Rn=nn+Nn,An=nn;Xe[An]&&!(An>=Rn);)++An;if(An-nn>16&&Xe.subarray&&ee)return ee.decode(Xe.subarray(nn,An));for(var kn="";nn<An;){var Qn=Xe[nn++];if(128&Qn){var ji=63&Xe[nn++];if((224&Qn)!=192){var br=63&Xe[nn++];if((Qn=(240&Qn)==224?(15&Qn)<<12|ji<<6|br:(7&Qn)<<18|ji<<12|br<<6|63&Xe[nn++])<65536)kn+=String.fromCharCode(Qn);else{var ut=Qn-65536;kn+=String.fromCharCode(55296|ut>>10,56320|1023&ut)}}else kn+=String.fromCharCode((31&Qn)<<6|ji)}else kn+=String.fromCharCode(Qn)}return kn}function Te(Xe,nn){return Xe?ue(X,Xe,nn):""}function De(Xe,nn){return Xe%nn>0&&(Xe+=nn-Xe%nn),Xe}function $e(Xe){Y=Xe,_.HEAP8=new Int8Array(Xe),_.HEAP16=new Int16Array(Xe),_.HEAP32=$=new Int32Array(Xe),_.HEAPU8=X=new Uint8Array(Xe),_.HEAPU16=new Uint16Array(Xe),_.HEAPU32=new Uint32Array(Xe),_.HEAPF32=new Float32Array(Xe),_.HEAPF64=new Float64Array(Xe)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le"),_.INITIAL_MEMORY;var Ue,it=[],tt=[],St=[],ve=[];function ne(){if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)gt(_.preRun.shift());At(it)}function me(){At(tt)}function qe(){At(St)}function Se(){if(_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;)Xt(_.postRun.shift());At(ve)}function gt(Xe){it.unshift(Xe)}function Xt(Xe){ve.unshift(Xe)}tt.push({func:function(){wn()}});var He=0,Fe=null;function pt(Xe){He++,_.monitorRunDependencies&&_.monitorRunDependencies(He)}function Rt(Xe){if(He--,_.monitorRunDependencies&&_.monitorRunDependencies(He),He==0&&Fe){var nn=Fe;Fe=null,nn()}}function Vt(Xe){_.onAbort&&_.onAbort(Xe),O(Xe+=""),V=!0,Xe="abort("+Xe+"). Build with -s ASSERTIONS=1 for more info.";var nn=new WebAssembly.RuntimeError(Xe);throw g(nn),nn}function Ke(Xe,nn){return String.prototype.startsWith?Xe.startsWith(nn):Xe.indexOf(nn)===0}_.preloadedImages={},_.preloadedAudios={};var Ot="data:application/octet-stream;base64,";function oe(Xe){return Ke(Xe,Ot)}var ye,We="onig.wasm";function at(Xe){try{if(Xe==We&&B)return new Uint8Array(B);if(k)return k(Xe);throw"both async and sync fetching of the wasm failed"}catch(nn){Vt(nn)}}function st(){return B||!S||typeof fetch!="function"?Promise.resolve().then(function(){return at(We)}):fetch(We,{credentials:"same-origin"}).then(function(Xe){if(!Xe.ok)throw"failed to load wasm binary file at '"+We+"'";return Xe.arrayBuffer()}).catch(function(){return at(We)})}function It(){var Xe={env:fn,wasi_snapshot_preview1:fn};function nn(An,kn){var Qn=An.exports;_.asm=Qn,$e((N=_.asm.memory).buffer),Ue=_.asm.__indirect_function_table,Rt()}function Nn(An){nn(An.instance)}function Rn(An){return st().then(function(kn){return WebAssembly.instantiate(kn,Xe)}).then(An,function(kn){O("failed to asynchronously prepare wasm: "+kn),Vt(kn)})}if(pt(),_.instantiateWasm)try{return _.instantiateWasm(Xe,nn)}catch(An){return O("Module.instantiateWasm callback failed with error: "+An),!1}return(B||typeof WebAssembly.instantiateStreaming!="function"||oe(We)||typeof fetch!="function"?Rn(Nn):fetch(We,{credentials:"same-origin"}).then(function(An){return WebAssembly.instantiateStreaming(An,Xe).then(Nn,function(kn){return O("wasm streaming compile failed: "+kn),O("falling back to ArrayBuffer instantiation"),Rn(Nn)})})).catch(g),{}}function At(Xe){for(;Xe.length>0;){var nn=Xe.shift();if(typeof nn!="function"){var Nn=nn.func;typeof Nn=="number"?nn.arg===void 0?Ue.get(Nn)():Ue.get(Nn)(nn.arg):Nn(nn.arg===void 0?null:nn.arg)}else nn(_)}}function Tt(Xe,nn,Nn){X.copyWithin(Xe,nn,nn+Nn)}function Ut(){return X.length}function Wt(Xe){try{return N.grow(Xe-Y.byteLength+65535>>>16),$e(N.buffer),1}catch{}}function we(Xe){var nn=Ut(),Nn=2147483648;if(Xe>Nn)return!1;for(var Rn=1;Rn<=4;Rn*=2){var An=nn*(1+.2/Rn);if(An=Math.min(An,Xe+100663296),Wt(Math.min(Nn,De(Math.max(Xe,An),65536))))return!0}return!1}oe(We)||(We=P(We)),ye=typeof dateNow<"u"?dateNow:function(){return performance.now()};var fe={mappings:{},buffers:[null,[],[]],printChar:function(Xe,nn){var Nn=fe.buffers[Xe];nn===0||nn===10?((Xe===1?R:O)(ue(Nn,0)),Nn.length=0):Nn.push(nn)},varargs:void 0,get:function(){return fe.varargs+=4,$[fe.varargs-4>>2]},getStr:function(Xe){return Te(Xe)},get64:function(Xe,nn){return Xe}};function lt(Xe,nn,Nn,Rn){for(var An=0,kn=0;kn<Nn;kn++){for(var Qn=$[nn+8*kn>>2],ji=$[nn+(8*kn+4)>>2],br=0;br<ji;br++)fe.printChar(Xe,X[Qn+br]);An+=ji}return $[Rn>>2]=An,0}function Nt(Xe){}var Gt,fn={emscripten_get_now:ye,emscripten_memcpy_big:Tt,emscripten_resize_heap:we,fd_write:lt,setTempRet0:Nt},wn=(It(),_.___wasm_call_ctors=function(){return(wn=_.___wasm_call_ctors=_.asm.__wasm_call_ctors).apply(null,arguments)});function vn(Xe){function nn(){Gt||(Gt=!0,_.calledRun=!0,V||(me(),qe(),f(_),_.onRuntimeInitialized&&_.onRuntimeInitialized(),Se()))}He>0||(ne(),He>0||(_.setStatus?(_.setStatus("Running..."),setTimeout(function(){setTimeout(function(){_.setStatus("")},1),nn()},1)):nn()))}if(_.___errno_location=function(){return(_.___errno_location=_.asm.__errno_location).apply(null,arguments)},_._omalloc=function(){return(_._omalloc=_.asm.omalloc).apply(null,arguments)},_._ofree=function(){return(_._ofree=_.asm.ofree).apply(null,arguments)},_._getLastOnigError=function(){return(_._getLastOnigError=_.asm.getLastOnigError).apply(null,arguments)},_._createOnigScanner=function(){return(_._createOnigScanner=_.asm.createOnigScanner).apply(null,arguments)},_._freeOnigScanner=function(){return(_._freeOnigScanner=_.asm.freeOnigScanner).apply(null,arguments)},_._findNextOnigScannerMatch=function(){return(_._findNextOnigScannerMatch=_.asm.findNextOnigScannerMatch).apply(null,arguments)},_._findNextOnigScannerMatchDbg=function(){return(_._findNextOnigScannerMatchDbg=_.asm.findNextOnigScannerMatchDbg).apply(null,arguments)},_.stackSave=function(){return(_.stackSave=_.asm.stackSave).apply(null,arguments)},_.stackRestore=function(){return(_.stackRestore=_.asm.stackRestore).apply(null,arguments)},_.stackAlloc=function(){return(_.stackAlloc=_.asm.stackAlloc).apply(null,arguments)},_.dynCall_jiji=function(){return(_.dynCall_jiji=_.asm.dynCall_jiji).apply(null,arguments)},_.UTF8ToString=Te,Fe=function Xe(){Gt||vn(),Gt||(Fe=Xe)},_.run=vn,_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.pop()();return vn(),d.ready});a.exports=u}},s={},function a(u){var d=s[u];if(d!==void 0)return d.exports;var f=s[u]={exports:{}};return n[u].call(f.exports,f,f.exports,a),f.exports}(770);var n,s})})(qw);var f6={exports:{}};(function(r,e){(function(n,s){r.exports=s()})(IV,function(){return function(n){var s={};function a(u){if(s[u])return s[u].exports;var d=s[u]={i:u,l:!1,exports:{}};return n[u].call(d.exports,d,d.exports,a),d.l=!0,d.exports}return a.m=n,a.c=s,a.d=function(u,d,f){a.o(u,d)||Object.defineProperty(u,d,{enumerable:!0,get:f})},a.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},a.t=function(u,d){if(1&d&&(u=a(u)),8&d||4&d&&typeof u=="object"&&u&&u.__esModule)return u;var f=Object.create(null);if(a.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:u}),2&d&&typeof u!="string")for(var g in u)a.d(f,g,function(_){return u[_]}.bind(null,g));return f},a.n=function(u){var d=u&&u.__esModule?function(){return u.default}:function(){return u};return a.d(d,"a",d),d},a.o=function(u,d){return Object.prototype.hasOwnProperty.call(u,d)},a.p="",a(a.s=3)}([function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0});var u=a(1),d=a(5),f=a(6),g=a(2),_=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()};s.createGrammar=function(ve,ne,me,qe,Se,gt){return new U(ve,ne,me,qe,Se,gt)};var y=function(ve){this.scopeName=ve};s.FullScopeDependency=y;var w=function(){function ve(ne,me){this.scopeName=ne,this.include=me}return ve.prototype.toKey=function(){return this.scopeName+"#"+this.include},ve}();s.PartialScopeDependency=w;var k=function(){function ve(){this.full=[],this.partial=[],this.visitedRule=new Set,this._seenFull=new Set,this._seenPartial=new Set}return ve.prototype.add=function(ne){ne instanceof y?this._seenFull.has(ne.scopeName)||(this._seenFull.add(ne.scopeName),this.full.push(ne)):this._seenPartial.has(ne.toKey())||(this._seenPartial.add(ne.toKey()),this.partial.push(ne))},ve}();function S(ve,ne,me,qe,Se){for(var gt=0,Xt=qe;gt<Xt.length;gt++){var He=Xt[gt];if(!ve.visitedRule.has(He)){ve.visitedRule.add(He);var Fe=He.repository?u.mergeObjects({},Se,He.repository):Se;Array.isArray(He.patterns)&&S(ve,ne,me,He.patterns,Fe);var pt=He.include;if(pt)if(pt==="$base"||pt===ne.scopeName)P(ve,ne,ne);else if(pt==="$self"||pt===me.scopeName)P(ve,ne,me);else if(pt.charAt(0)==="#")A(ve,ne,me,pt.substring(1),Fe);else{var Rt=pt.indexOf("#");if(Rt>=0){var Vt=pt.substring(0,Rt),Ke=pt.substring(Rt+1);Vt===ne.scopeName?A(ve,ne,ne,Ke,Fe):Vt===me.scopeName?A(ve,ne,me,Ke,Fe):ve.add(new w(Vt,pt.substring(Rt+1)))}else ve.add(new y(pt))}}}}function A(ve,ne,me,qe,Se){Se===void 0&&(Se=me.repository),Se&&Se[qe]&&S(ve,ne,me,[Se[qe]],Se)}function P(ve,ne,me){if(me.patterns&&Array.isArray(me.patterns)&&S(ve,ne,me,me.patterns,me.repository),me.injections){var qe=[];for(var Se in me.injections)qe.push(me.injections[Se]);S(ve,ne,me,qe,me.repository)}}function R(ve,ne){if(!ve)return!1;if(ve===ne)return!0;var me=ne.length;return ve.length>me&&ve.substr(0,me)===ne&&ve[me]==="."}function O(ve,ne){if(ne.length<ve.length)return!1;var me=0;return ve.every(function(qe){for(var Se=me;Se<ne.length;Se++)if(R(ne[Se],qe))return me=Se+1,!0;return!1})}function B(ve,ne,me,qe,Se){for(var gt=f.createMatchers(ne,O),Xt=d.RuleFactory.getCompiledRuleId(me,qe,Se.repository),He=0,Fe=gt;He<Fe.length;He++){var pt=Fe[He];ve.push({matcher:pt.matcher,ruleId:Xt,grammar:Se,priority:pt.priority})}}s.ScopeDependencyCollector=k,s.collectSpecificDependencies=A,s.collectDependencies=P;var N=function(ve,ne,me,qe){this.scopeName=ve,this.languageId=ne,this.tokenType=me,this.themeData=qe};s.ScopeMetadata=N;var V=function(){function ve(ne,me,qe){if(this._initialLanguage=ne,this._themeProvider=me,this._cache=new Map,this._defaultMetaData=new N("",this._initialLanguage,0,[this._themeProvider.getDefaults()]),this._embeddedLanguages=Object.create(null),qe)for(var Se=Object.keys(qe),gt=0,Xt=Se.length;gt<Xt;gt++){var He=Se[gt],Fe=qe[He];typeof Fe=="number"&&Fe!==0?this._embeddedLanguages[He]=Fe:console.warn("Invalid embedded language found at scope "+He+": <<"+Fe+">>")}var pt=Object.keys(this._embeddedLanguages).map(function(Rt){return ve._escapeRegExpCharacters(Rt)});pt.length===0?this._embeddedLanguagesRegex=null:(pt.sort(),pt.reverse(),this._embeddedLanguagesRegex=new RegExp("^(("+pt.join(")|(")+"))($|\\.)",""))}return ve.prototype.onDidChangeTheme=function(){this._cache=new Map,this._defaultMetaData=new N("",this._initialLanguage,0,[this._themeProvider.getDefaults()])},ve.prototype.getDefaultMetadata=function(){return this._defaultMetaData},ve._escapeRegExpCharacters=function(ne){return ne.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},ve.prototype.getMetadataForScope=function(ne){if(ne===null)return ve._NULL_SCOPE_METADATA;var me=this._cache.get(ne);return me||(me=this._doGetMetadataForScope(ne),this._cache.set(ne,me),me)},ve.prototype._doGetMetadataForScope=function(ne){var me=this._scopeToLanguage(ne),qe=this._toStandardTokenType(ne),Se=this._themeProvider.themeMatch(ne);return new N(ne,me,qe,Se)},ve.prototype._scopeToLanguage=function(ne){if(!ne||!this._embeddedLanguagesRegex)return 0;var me=ne.match(this._embeddedLanguagesRegex);if(!me)return 0;var qe=this._embeddedLanguages[me[1]]||0;return qe||0},ve.prototype._toStandardTokenType=function(ne){var me=ne.match(ve.STANDARD_TOKEN_TYPE_REGEXP);if(!me)return 0;switch(me[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"meta.embedded":return 8}throw new Error("Unexpected match for standard token type!")},ve._NULL_SCOPE_METADATA=new N("",0,0,null),ve.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/,ve}(),U=function(){function ve(ne,me,qe,Se,gt,Xt){if(this._scopeMetadataProvider=new V(me,gt,qe),this._onigLib=Xt,this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=gt,this._grammar=X(ne,null),this._injections=null,this._tokenTypeMatchers=[],Se)for(var He=0,Fe=Object.keys(Se);He<Fe.length;He++)for(var pt=Fe[He],Rt=0,Vt=f.createMatchers(pt,O);Rt<Vt.length;Rt++){var Ke=Vt[Rt];this._tokenTypeMatchers.push({matcher:Ke.matcher,type:Se[pt]})}}return ve.prototype.dispose=function(){for(var ne=0,me=this._ruleId2desc;ne<me.length;ne++){var qe=me[ne];qe&&qe.dispose()}},ve.prototype.createOnigScanner=function(ne){return this._onigLib.createOnigScanner(ne)},ve.prototype.createOnigString=function(ne){return this._onigLib.createOnigString(ne)},ve.prototype.onDidChangeTheme=function(){this._scopeMetadataProvider.onDidChangeTheme()},ve.prototype.getMetadataForScope=function(ne){return this._scopeMetadataProvider.getMetadataForScope(ne)},ve.prototype.getInjections=function(){var ne=this;if(this._injections===null){this._injections=[];var me=this._grammar.injections;if(me)for(var qe in me)B(this._injections,qe,me[qe],this,this._grammar);if(this._grammarRepository){var Se=this._grammarRepository.injections(this._grammar.scopeName);Se&&Se.forEach(function(gt){var Xt=ne.getExternalGrammar(gt);if(Xt){var He=Xt.injectionSelector;He&&B(ne._injections,He,Xt,ne,Xt)}})}this._injections.sort(function(gt,Xt){return gt.priority-Xt.priority})}return this._injections},ve.prototype.registerRule=function(ne){var me=++this._lastRuleId,qe=ne(me);return this._ruleId2desc[me]=qe,qe},ve.prototype.getRule=function(ne){return this._ruleId2desc[ne]},ve.prototype.getExternalGrammar=function(ne,me){if(this._includedGrammars[ne])return this._includedGrammars[ne];if(this._grammarRepository){var qe=this._grammarRepository.lookup(ne);if(qe)return this._includedGrammars[ne]=X(qe,me&&me.$base),this._includedGrammars[ne]}return null},ve.prototype.tokenizeLine=function(ne,me){var qe=this._tokenize(ne,me,!1);return{tokens:qe.lineTokens.getResult(qe.ruleStack,qe.lineLength),ruleStack:qe.ruleStack}},ve.prototype.tokenizeLine2=function(ne,me){var qe=this._tokenize(ne,me,!0);return{tokens:qe.lineTokens.getBinaryResult(qe.ruleStack,qe.lineLength),ruleStack:qe.ruleStack}},ve.prototype._tokenize=function(ne,me,qe){var Se;if(this._rootId===-1&&(this._rootId=d.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository)),me&&me!==Ue.NULL)Se=!1,me.reset();else{Se=!0;var gt=this._scopeMetadataProvider.getDefaultMetadata(),Xt=gt.themeData[0],He=De.set(0,gt.languageId,gt.tokenType,Xt.fontStyle,Xt.foreground,Xt.background),Fe=this.getRule(this._rootId).getName(null,null),pt=this._scopeMetadataProvider.getMetadataForScope(Fe),Rt=$e.mergeMetadata(He,null,pt),Vt=new $e(null,Fe===null?"unknown":Fe,Rt);me=new Ue(null,this._rootId,-1,-1,!1,null,Vt,Vt)}ne+=`
`;var Ke=this.createOnigString(ne),Ot=Ke.content.length,oe=new tt(qe,ne,this._tokenTypeMatchers),ye=Te(this,Ke,Se,0,me,oe,!0);return Y(Ke),{lineLength:Ot,lineTokens:oe,ruleStack:ye}},ve}();function Y(ve){typeof ve.dispose=="function"&&ve.dispose()}function X(ve,ne){return(ve=u.clone(ve)).repository=ve.repository||{},ve.repository.$self={$vscodeTextmateLocation:ve.$vscodeTextmateLocation,patterns:ve.patterns,name:ve.scopeName},ve.repository.$base=ne||ve.repository.$self,ve}function $(ve,ne,me,qe,Se,gt,Xt){if(gt.length!==0){for(var He=ne.content,Fe=Math.min(gt.length,Xt.length),pt=[],Rt=Xt[0].end,Vt=0;Vt<Fe;Vt++){var Ke=gt[Vt];if(Ke!==null){var Ot=Xt[Vt];if(Ot.length!==0){if(Ot.start>Rt)break;for(;pt.length>0&&pt[pt.length-1].endPos<=Ot.start;)Se.produceFromScopes(pt[pt.length-1].scopes,pt[pt.length-1].endPos),pt.pop();if(pt.length>0?Se.produceFromScopes(pt[pt.length-1].scopes,Ot.start):Se.produce(qe,Ot.start),Ke.retokenizeCapturedWithRuleId){var oe=Ke.getName(He,Xt),ye=qe.contentNameScopesList.push(ve,oe),We=Ke.getContentName(He,Xt),at=ye.push(ve,We),st=qe.push(Ke.retokenizeCapturedWithRuleId,Ot.start,-1,!1,null,ye,at),It=ve.createOnigString(He.substring(0,Ot.end));Te(ve,It,me&&Ot.start===0,Ot.start,st,Se,!1),Y(It)}else{var At=Ke.getName(He,Xt);if(At!==null){var Tt=(pt.length>0?pt[pt.length-1].scopes:qe.contentNameScopesList).push(ve,At);pt.push(new it(Tt,Ot.end))}}}}}for(;pt.length>0;)Se.produceFromScopes(pt[pt.length-1].scopes,pt[pt.length-1].endPos),pt.pop()}}function ee(ve){for(var ne=[],me=0,qe=ve.rules.length;me<qe;me++)ne.push("   - "+ve.rules[me]+": "+ve.debugRegExps[me]);return ne.join(`
`)}function ue(ve,ne,me,qe,Se,gt){var Xt=function(Vt,Ke,Ot,oe,ye,We){var at=ye.getRule(Vt),st=at.compile(Vt,ye.endRule,Ot,oe===We),It=0;g.DebugFlags.InDebugMode&&(It=_());var At=st.scanner.findNextMatchSync(Ke,oe);if(g.DebugFlags.InDebugMode){var Tt=_()-It;Tt>5&&console.warn("Rule "+at.debugName+" ("+at.id+") matching took "+Tt+" against '"+Ke+"'"),At&&console.log("matched rule id: "+st.rules[At.index]+" from "+At.captureIndices[0].start+" to "+At.captureIndices[0].end)}return At?{captureIndices:At.captureIndices,matchedRuleId:st.rules[At.index]}:null}(ve,ne,me,qe,Se,gt),He=ve.getInjections();if(He.length===0)return Xt;var Fe=function(Vt,Ke,Ot,oe,ye,We,at){for(var st,It=Number.MAX_VALUE,At=null,Tt=0,Ut=We.contentNameScopesList.generateScopes(),Wt=0,we=Vt.length;Wt<we;Wt++){var fe=Vt[Wt];if(fe.matcher(Ut)){var lt=Ke.getRule(fe.ruleId).compile(Ke,null,oe,ye===at),Nt=lt.scanner.findNextMatchSync(Ot,ye);if(g.DebugFlags.InDebugMode&&(console.log("  scanning for injections"),console.log(ee(lt))),Nt){var Gt=Nt.captureIndices[0].start;if(!(Gt>=It)&&(It=Gt,At=Nt.captureIndices,st=lt.rules[Nt.index],Tt=fe.priority,It===ye))break}}}return At?{priorityMatch:Tt===-1,captureIndices:At,matchedRuleId:st}:null}(He,ve,ne,me,qe,Se,gt);if(!Fe)return Xt;if(!Xt)return Fe;var pt=Xt.captureIndices[0].start,Rt=Fe.captureIndices[0].start;return Rt<pt||Fe.priorityMatch&&Rt===pt?Fe:Xt}function Te(ve,ne,me,qe,Se,gt,Xt){var He=ne.content.length,Fe=!1,pt=-1;if(Xt){var Rt=function(Ke,Ot,oe,ye,We,at){for(var st=We.beginRuleCapturedEOL?0:-1,It=[],At=We;At;At=At.pop()){var Tt=At.getRule(Ke);Tt instanceof d.BeginWhileRule&&It.push({rule:Tt,stack:At})}for(var Ut=It.pop();Ut;Ut=It.pop()){var Wt=Ut.rule.compileWhile(Ke,Ut.stack.endRule,oe,st===ye),we=Wt.scanner.findNextMatchSync(Ot,ye);if(g.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(ee(Wt))),!we){g.DebugFlags.InDebugMode&&console.log("  popping "+Ut.rule.debugName+" - "+Ut.rule.debugWhileRegExp),We=Ut.stack.pop();break}if(Wt.rules[we.index]!==-2){We=Ut.stack.pop();break}we.captureIndices&&we.captureIndices.length&&(at.produce(Ut.stack,we.captureIndices[0].start),$(Ke,Ot,oe,Ut.stack,at,Ut.rule.whileCaptures,we.captureIndices),at.produce(Ut.stack,we.captureIndices[0].end),st=we.captureIndices[0].end,we.captureIndices[0].end>ye&&(ye=we.captureIndices[0].end,oe=!1))}return{stack:We,linePos:ye,anchorPosition:st,isFirstLine:oe}}(ve,ne,me,qe,Se,gt);Se=Rt.stack,qe=Rt.linePos,me=Rt.isFirstLine,pt=Rt.anchorPosition}for(;!Fe;)Vt();function Vt(){g.DebugFlags.InDebugMode&&(console.log(""),console.log("@@scanNext "+qe+": |"+ne.content.substr(qe).replace(/\n$/,"\\n")+"|"));var Ke=ue(ve,ne,me,qe,Se,pt);if(!Ke)return g.DebugFlags.InDebugMode&&console.log("  no more matches."),gt.produce(Se,He),void(Fe=!0);var Ot=Ke.captureIndices,oe=Ke.matchedRuleId,ye=!!(Ot&&Ot.length>0)&&Ot[0].end>qe;if(oe===-1){var We=Se.getRule(ve);g.DebugFlags.InDebugMode&&console.log("  popping "+We.debugName+" - "+We.debugEndRegExp),gt.produce(Se,Ot[0].start),Se=Se.setContentNameScopesList(Se.nameScopesList),$(ve,ne,me,Se,gt,We.endCaptures,Ot),gt.produce(Se,Ot[0].end);var at=Se;if(Se=Se.pop(),pt=at.getAnchorPos(),!ye&&at.getEnterPos()===qe)return g.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),Se=at,gt.produce(Se,He),void(Fe=!0)}else{var st=ve.getRule(oe);gt.produce(Se,Ot[0].start);var It=Se,At=st.getName(ne.content,Ot),Tt=Se.contentNameScopesList.push(ve,At);if(Se=Se.push(oe,qe,pt,Ot[0].end===He,null,Tt,Tt),st instanceof d.BeginEndRule){var Ut=st;g.DebugFlags.InDebugMode&&console.log("  pushing "+Ut.debugName+" - "+Ut.debugBeginRegExp),$(ve,ne,me,Se,gt,Ut.beginCaptures,Ot),gt.produce(Se,Ot[0].end),pt=Ot[0].end;var Wt=Ut.getContentName(ne.content,Ot),we=Tt.push(ve,Wt);if(Se=Se.setContentNameScopesList(we),Ut.endHasBackReferences&&(Se=Se.setEndRule(Ut.getEndWithResolvedBackReferences(ne.content,Ot))),!ye&&It.hasSameRuleAs(Se))return g.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),Se=Se.pop(),gt.produce(Se,He),void(Fe=!0)}else if(st instanceof d.BeginWhileRule){if(Ut=st,g.DebugFlags.InDebugMode&&console.log("  pushing "+Ut.debugName),$(ve,ne,me,Se,gt,Ut.beginCaptures,Ot),gt.produce(Se,Ot[0].end),pt=Ot[0].end,Wt=Ut.getContentName(ne.content,Ot),we=Tt.push(ve,Wt),Se=Se.setContentNameScopesList(we),Ut.whileHasBackReferences&&(Se=Se.setEndRule(Ut.getWhileWithResolvedBackReferences(ne.content,Ot))),!ye&&It.hasSameRuleAs(Se))return g.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),Se=Se.pop(),gt.produce(Se,He),void(Fe=!0)}else{var fe=st;if(g.DebugFlags.InDebugMode&&console.log("  matched "+fe.debugName+" - "+fe.debugMatchRegExp),$(ve,ne,me,Se,gt,fe.captures,Ot),gt.produce(Se,Ot[0].end),Se=Se.pop(),!ye)return g.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),Se=Se.safePop(),gt.produce(Se,He),void(Fe=!0)}}Ot[0].end>qe&&(qe=Ot[0].end,me=!1)}return Se}s.Grammar=U;var De=function(){function ve(){}return ve.toBinaryStr=function(ne){for(var me=ne.toString(2);me.length<32;)me="0"+me;return me},ve.printMetadata=function(ne){var me=ve.getLanguageId(ne),qe=ve.getTokenType(ne),Se=ve.getFontStyle(ne),gt=ve.getForeground(ne),Xt=ve.getBackground(ne);console.log({languageId:me,tokenType:qe,fontStyle:Se,foreground:gt,background:Xt})},ve.getLanguageId=function(ne){return(255&ne)>>>0},ve.getTokenType=function(ne){return(1792&ne)>>>8},ve.getFontStyle=function(ne){return(14336&ne)>>>11},ve.getForeground=function(ne){return(8372224&ne)>>>14},ve.getBackground=function(ne){return(4286578688&ne)>>>23},ve.set=function(ne,me,qe,Se,gt,Xt){var He=ve.getLanguageId(ne),Fe=ve.getTokenType(ne),pt=ve.getFontStyle(ne),Rt=ve.getForeground(ne),Vt=ve.getBackground(ne);return me!==0&&(He=me),qe!==0&&(Fe=qe===8?0:qe),Se!==-1&&(pt=Se),gt!==0&&(Rt=gt),Xt!==0&&(Vt=Xt),(He<<0|Fe<<8|pt<<11|Rt<<14|Vt<<23)>>>0},ve}();s.StackElementMetadata=De;var $e=function(){function ve(ne,me,qe){this.parent=ne,this.scope=me,this.metadata=qe}return ve._equals=function(ne,me){for(;;){if(ne===me||!ne&&!me)return!0;if(!ne||!me||ne.scope!==me.scope||ne.metadata!==me.metadata)return!1;ne=ne.parent,me=me.parent}},ve.prototype.equals=function(ne){return ve._equals(this,ne)},ve._matchesScope=function(ne,me,qe){return me===ne||ne.substring(0,qe.length)===qe},ve._matches=function(ne,me){if(me===null)return!0;for(var qe=me.length,Se=0,gt=me[Se],Xt=gt+".";ne;){if(this._matchesScope(ne.scope,gt,Xt)){if(++Se===qe)return!0;Xt=(gt=me[Se])+"."}ne=ne.parent}return!1},ve.mergeMetadata=function(ne,me,qe){if(qe===null)return ne;var Se=-1,gt=0,Xt=0;if(qe.themeData!==null)for(var He=0,Fe=qe.themeData.length;He<Fe;He++){var pt=qe.themeData[He];if(this._matches(me,pt.parentScopes)){Se=pt.fontStyle,gt=pt.foreground,Xt=pt.background;break}}return De.set(ne,qe.languageId,qe.tokenType,Se,gt,Xt)},ve._push=function(ne,me,qe){for(var Se=0,gt=qe.length;Se<gt;Se++){var Xt=qe[Se],He=me.getMetadataForScope(Xt),Fe=ve.mergeMetadata(ne.metadata,ne,He);ne=new ve(ne,Xt,Fe)}return ne},ve.prototype.push=function(ne,me){return me===null?this:me.indexOf(" ")>=0?ve._push(this,ne,me.split(/ /g)):ve._push(this,ne,[me])},ve._generateScopes=function(ne){for(var me=[],qe=0;ne;)me[qe++]=ne.scope,ne=ne.parent;return me.reverse(),me},ve.prototype.generateScopes=function(){return ve._generateScopes(this)},ve}();s.ScopeListElement=$e;var Ue=function(){function ve(ne,me,qe,Se,gt,Xt,He,Fe){this.parent=ne,this.depth=this.parent?this.parent.depth+1:1,this.ruleId=me,this._enterPos=qe,this._anchorPos=Se,this.beginRuleCapturedEOL=gt,this.endRule=Xt,this.nameScopesList=He,this.contentNameScopesList=Fe}return ve._structuralEquals=function(ne,me){for(;;){if(ne===me||!ne&&!me)return!0;if(!ne||!me||ne.depth!==me.depth||ne.ruleId!==me.ruleId||ne.endRule!==me.endRule)return!1;ne=ne.parent,me=me.parent}},ve._equals=function(ne,me){return ne===me||!!this._structuralEquals(ne,me)&&ne.contentNameScopesList.equals(me.contentNameScopesList)},ve.prototype.clone=function(){return this},ve.prototype.equals=function(ne){return ne!==null&&ve._equals(this,ne)},ve._reset=function(ne){for(;ne;)ne._enterPos=-1,ne._anchorPos=-1,ne=ne.parent},ve.prototype.reset=function(){ve._reset(this)},ve.prototype.pop=function(){return this.parent},ve.prototype.safePop=function(){return this.parent?this.parent:this},ve.prototype.push=function(ne,me,qe,Se,gt,Xt,He){return new ve(this,ne,me,qe,Se,gt,Xt,He)},ve.prototype.getEnterPos=function(){return this._enterPos},ve.prototype.getAnchorPos=function(){return this._anchorPos},ve.prototype.getRule=function(ne){return ne.getRule(this.ruleId)},ve.prototype._writeString=function(ne,me){return this.parent&&(me=this.parent._writeString(ne,me)),ne[me++]="("+this.ruleId+", TODO-"+this.nameScopesList+", TODO-"+this.contentNameScopesList+")",me},ve.prototype.toString=function(){var ne=[];return this._writeString(ne,0),"["+ne.join(",")+"]"},ve.prototype.setContentNameScopesList=function(ne){return this.contentNameScopesList===ne?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,ne)},ve.prototype.setEndRule=function(ne){return this.endRule===ne?this:new ve(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,ne,this.nameScopesList,this.contentNameScopesList)},ve.prototype.hasSameRuleAs=function(ne){return this.ruleId===ne.ruleId},ve.NULL=new ve(null,0,0,0,!1,null,null,null),ve}();s.StackElement=Ue;var it=function(ve,ne){this.scopes=ve,this.endPos=ne};s.LocalStackElement=it;var tt=function(){function ve(ne,me,qe){this._emitBinaryTokens=ne,this._tokenTypeOverrides=qe,g.DebugFlags.InDebugMode?this._lineText=me:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}return ve.prototype.produce=function(ne,me){this.produceFromScopes(ne.contentNameScopesList,me)},ve.prototype.produceFromScopes=function(ne,me){if(!(this._lastTokenEndIndex>=me)){if(this._emitBinaryTokens){for(var qe=ne.metadata,Se=0,gt=this._tokenTypeOverrides;Se<gt.length;Se++){var Xt=gt[Se];Xt.matcher(ne.generateScopes())&&(qe=De.set(qe,0,St(Xt.type),-1,0,0))}return this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===qe||(this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(qe)),void(this._lastTokenEndIndex=me)}var He=ne.generateScopes();if(g.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,me).replace(/\n$/,"\\n")+"|");for(var Fe=0;Fe<He.length;Fe++)console.log("      * "+He[Fe])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:me,scopes:He}),this._lastTokenEndIndex=me}},ve.prototype.getResult=function(ne,me){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===me-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(ne,me),this._tokens[this._tokens.length-1].startIndex=0),this._tokens},ve.prototype.getBinaryResult=function(ne,me){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===me-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(ne,me),this._binaryTokens[this._binaryTokens.length-2]=0);for(var qe=new Uint32Array(this._binaryTokens.length),Se=0,gt=this._binaryTokens.length;Se<gt;Se++)qe[Se]=this._binaryTokens[Se];return qe},ve}();function St(ve){switch(ve){case 4:return 4;case 2:return 2;case 1:return 1;case 0:default:return 8}}},function(n,s,a){function u(g){return Array.isArray(g)?function(_){for(var y=[],w=0,k=_.length;w<k;w++)y[w]=u(_[w]);return y}(g):typeof g=="object"?function(_){var y={};for(var w in _)y[w]=u(_[w]);return y}(g):g}Object.defineProperty(s,"__esModule",{value:!0}),s.clone=function(g){return u(g)},s.mergeObjects=function(g){for(var _=[],y=1;y<arguments.length;y++)_[y-1]=arguments[y];return _.forEach(function(w){for(var k in w)g[k]=w[k]}),g},s.basename=function g(_){var y=~_.lastIndexOf("/")||~_.lastIndexOf("\\");return y===0?_:~y==_.length-1?g(_.substring(0,_.length-1)):_.substr(1+~y)};var d=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/,f=function(){function g(){}return g.hasCaptures=function(_){return _!==null&&d.test(_)},g.replaceCaptures=function(_,y,w){return _.replace(d,function(k,S,A,P){var R=w[parseInt(S||A,10)];if(!R)return k;for(var O=y.substring(R.start,R.end);O[0]===".";)O=O.substring(1);switch(P){case"downcase":return O.toLowerCase();case"upcase":return O.toUpperCase();default:return O}})},g}();s.RegexSource=f},function(n,s,a){(function(u){Object.defineProperty(s,"__esModule",{value:!0}),s.DebugFlags={InDebugMode:u!==void 0&&!!u.env.VSCODE_TEXTMATE_DEBUG}}).call(this,a(7))},function(n,s,a){var u=this&&this.__awaiter||function(k,S,A,P){return new(A||(A=Promise))(function(R,O){function B(U){try{V(P.next(U))}catch(Y){O(Y)}}function N(U){try{V(P.throw(U))}catch(Y){O(Y)}}function V(U){var Y;U.done?R(U.value):(Y=U.value,Y instanceof A?Y:new A(function(X){X(Y)})).then(B,N)}V((P=P.apply(k,S||[])).next())})},d=this&&this.__generator||function(k,S){var A,P,R,O,B={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return O={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function N(V){return function(U){return function(Y){if(A)throw new TypeError("Generator is already executing.");for(;B;)try{if(A=1,P&&(R=2&Y[0]?P.return:Y[0]?P.throw||((R=P.return)&&R.call(P),0):P.next)&&!(R=R.call(P,Y[1])).done)return R;switch(P=0,R&&(Y=[2&Y[0],R.value]),Y[0]){case 0:case 1:R=Y;break;case 4:return B.label++,{value:Y[1],done:!1};case 5:B.label++,P=Y[1],Y=[0];continue;case 7:Y=B.ops.pop(),B.trys.pop();continue;default:if(R=B.trys,!((R=R.length>0&&R[R.length-1])||Y[0]!==6&&Y[0]!==2)){B=0;continue}if(Y[0]===3&&(!R||Y[1]>R[0]&&Y[1]<R[3])){B.label=Y[1];break}if(Y[0]===6&&B.label<R[1]){B.label=R[1],R=Y;break}if(R&&B.label<R[2]){B.label=R[2],B.ops.push(Y);break}R[2]&&B.ops.pop(),B.trys.pop();continue}Y=S.call(k,B)}catch(X){Y=[6,X],P=0}finally{A=R=0}if(5&Y[0])throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}([V,U])}}};Object.defineProperty(s,"__esModule",{value:!0});var f=a(4),g=a(8),_=a(11),y=a(0),w=function(){function k(S){this._options=S,this._syncRegistry=new f.SyncRegistry(_.Theme.createFromRawTheme(S.theme,S.colorMap),S.onigLib),this._ensureGrammarCache=new Map}return k.prototype.dispose=function(){this._syncRegistry.dispose()},k.prototype.setTheme=function(S,A){this._syncRegistry.setTheme(_.Theme.createFromRawTheme(S,A))},k.prototype.getColorMap=function(){return this._syncRegistry.getColorMap()},k.prototype.loadGrammarWithEmbeddedLanguages=function(S,A,P){return this.loadGrammarWithConfiguration(S,A,{embeddedLanguages:P})},k.prototype.loadGrammarWithConfiguration=function(S,A,P){return this._loadGrammar(S,A,P.embeddedLanguages,P.tokenTypes)},k.prototype.loadGrammar=function(S){return this._loadGrammar(S,0,null,null)},k.prototype._doLoadSingleGrammar=function(S){return u(this,void 0,void 0,function(){var A,P;return d(this,function(R){switch(R.label){case 0:return[4,this._options.loadGrammar(S)];case 1:return(A=R.sent())&&(P=typeof this._options.getInjections=="function"?this._options.getInjections(S):void 0,this._syncRegistry.addGrammar(A,P)),[2]}})})},k.prototype._loadSingleGrammar=function(S){return u(this,void 0,void 0,function(){return d(this,function(A){return this._ensureGrammarCache.has(S)||this._ensureGrammarCache.set(S,this._doLoadSingleGrammar(S)),[2,this._ensureGrammarCache.get(S)]})})},k.prototype._collectDependenciesForDep=function(S,A,P){var R=this._syncRegistry.lookup(P.scopeName);if(R){P instanceof y.FullScopeDependency?y.collectDependencies(A,this._syncRegistry.lookup(S),R):y.collectSpecificDependencies(A,this._syncRegistry.lookup(S),R,P.include);var O=this._syncRegistry.injections(P.scopeName);if(O)for(var B=0,N=O;B<N.length;B++){var V=N[B];A.add(new y.FullScopeDependency(V))}}else if(P.scopeName===S)throw new Error("No grammar provided for <"+S+">")},k.prototype._loadGrammar=function(S,A,P,R){return u(this,void 0,void 0,function(){var O,B,N,V,U,Y,X,$,ee,ue,Te,De,$e=this;return d(this,function(Ue){switch(Ue.label){case 0:O=new Set,B=new Set,O.add(S),N=[new y.FullScopeDependency(S)],Ue.label=1;case 1:return N.length>0?(V=N,N=[],[4,Promise.all(V.map(function(it){return $e._loadSingleGrammar(it.scopeName)}))]):[3,3];case 2:for(Ue.sent(),U=new y.ScopeDependencyCollector,Y=0,X=V;Y<X.length;Y++)De=X[Y],this._collectDependenciesForDep(S,U,De);for($=0,ee=U.full;$<ee.length;$++)De=ee[$],O.has(De.scopeName)||(O.add(De.scopeName),N.push(De));for(ue=0,Te=U.partial;ue<Te.length;ue++)De=Te[ue],O.has(De.scopeName)||B.has(De.toKey())||(B.add(De.toKey()),N.push(De));return[3,1];case 3:return[2,this.grammarForScopeName(S,A,P,R)]}})})},k.prototype.addGrammar=function(S,A,P,R){return A===void 0&&(A=[]),P===void 0&&(P=0),R===void 0&&(R=null),u(this,void 0,void 0,function(){return d(this,function(O){switch(O.label){case 0:return this._syncRegistry.addGrammar(S,A),[4,this.grammarForScopeName(S.scopeName,P,R)];case 1:return[2,O.sent()]}})})},k.prototype.grammarForScopeName=function(S,A,P,R){return A===void 0&&(A=0),P===void 0&&(P=null),R===void 0&&(R=null),this._syncRegistry.grammarForScopeName(S,A,P,R)},k}();s.Registry=w,s.INITIAL=y.StackElement.NULL,s.parseRawGrammar=g.parseRawGrammar},function(n,s,a){var u=this&&this.__awaiter||function(_,y,w,k){return new(w||(w=Promise))(function(S,A){function P(B){try{O(k.next(B))}catch(N){A(N)}}function R(B){try{O(k.throw(B))}catch(N){A(N)}}function O(B){var N;B.done?S(B.value):(N=B.value,N instanceof w?N:new w(function(V){V(N)})).then(P,R)}O((k=k.apply(_,y||[])).next())})},d=this&&this.__generator||function(_,y){var w,k,S,A,P={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return A={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function R(O){return function(B){return function(N){if(w)throw new TypeError("Generator is already executing.");for(;P;)try{if(w=1,k&&(S=2&N[0]?k.return:N[0]?k.throw||((S=k.return)&&S.call(k),0):k.next)&&!(S=S.call(k,N[1])).done)return S;switch(k=0,S&&(N=[2&N[0],S.value]),N[0]){case 0:case 1:S=N;break;case 4:return P.label++,{value:N[1],done:!1};case 5:P.label++,k=N[1],N=[0];continue;case 7:N=P.ops.pop(),P.trys.pop();continue;default:if(S=P.trys,!((S=S.length>0&&S[S.length-1])||N[0]!==6&&N[0]!==2)){P=0;continue}if(N[0]===3&&(!S||N[1]>S[0]&&N[1]<S[3])){P.label=N[1];break}if(N[0]===6&&P.label<S[1]){P.label=S[1],S=N;break}if(S&&P.label<S[2]){P.label=S[2],P.ops.push(N);break}S[2]&&P.ops.pop(),P.trys.pop();continue}N=y.call(_,P)}catch(V){N=[6,V],k=0}finally{w=S=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([O,B])}}};Object.defineProperty(s,"__esModule",{value:!0});var f=a(0),g=function(){function _(y,w){this._theme=y,this._grammars={},this._rawGrammars={},this._injectionGrammars={},this._onigLibPromise=w}return _.prototype.dispose=function(){for(var y in this._grammars)this._grammars.hasOwnProperty(y)&&this._grammars[y].dispose()},_.prototype.setTheme=function(y){var w=this;this._theme=y,Object.keys(this._grammars).forEach(function(k){w._grammars[k].onDidChangeTheme()})},_.prototype.getColorMap=function(){return this._theme.getColorMap()},_.prototype.addGrammar=function(y,w){this._rawGrammars[y.scopeName]=y,w&&(this._injectionGrammars[y.scopeName]=w)},_.prototype.lookup=function(y){return this._rawGrammars[y]},_.prototype.injections=function(y){return this._injectionGrammars[y]},_.prototype.getDefaults=function(){return this._theme.getDefaults()},_.prototype.themeMatch=function(y){return this._theme.match(y)},_.prototype.grammarForScopeName=function(y,w,k,S){return u(this,void 0,void 0,function(){var A,P,R,O,B;return d(this,function(N){switch(N.label){case 0:return this._grammars[y]?[3,2]:(A=this._rawGrammars[y])?(P=this._grammars,R=y,O=f.createGrammar,B=[A,w,k,S,this],[4,this._onigLibPromise]):[2,null];case 1:P[R]=O.apply(void 0,B.concat([N.sent()])),N.label=2;case 2:return[2,this._grammars[y]]}})})},_}();s.SyncRegistry=g},function(n,s,a){var u,d=this&&this.__extends||(u=function(V,U){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var $ in X)X.hasOwnProperty($)&&(Y[$]=X[$])})(V,U)},function(V,U){function Y(){this.constructor=V}u(V,U),V.prototype=U===null?Object.create(U):(Y.prototype=U.prototype,new Y)});Object.defineProperty(s,"__esModule",{value:!0});var f=a(1),g=/\\(\d+)/,_=/\\(\d+)/g,y=function(){function V(U,Y,X){this.debugRegExps=Y,this.rules=X,this.scanner=U.createOnigScanner(Y)}return V.prototype.dispose=function(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()},V}();s.CompiledRule=y;var w=function(){function V(U,Y,X,$){this.$location=U,this.id=Y,this._name=X||null,this._nameIsCapturing=f.RegexSource.hasCaptures(this._name),this._contentName=$||null,this._contentNameIsCapturing=f.RegexSource.hasCaptures(this._contentName)}return Object.defineProperty(V.prototype,"debugName",{get:function(){var U=this.$location?f.basename(this.$location.filename)+":"+this.$location.line:"unknown";return this.constructor.name+"#"+this.id+" @ "+U},enumerable:!0,configurable:!0}),V.prototype.getName=function(U,Y){return this._nameIsCapturing&&this._name!==null&&U!==null&&Y!==null?f.RegexSource.replaceCaptures(this._name,U,Y):this._name},V.prototype.getContentName=function(U,Y){return this._contentNameIsCapturing&&this._contentName!==null?f.RegexSource.replaceCaptures(this._contentName,U,Y):this._contentName},V}();s.Rule=w;var k=function(V){function U(Y,X,$,ee,ue){var Te=V.call(this,Y,X,$,ee)||this;return Te.retokenizeCapturedWithRuleId=ue,Te}return d(U,V),U.prototype.dispose=function(){},U.prototype.collectPatternsRecursive=function(Y,X,$){throw new Error("Not supported!")},U.prototype.compile=function(Y,X,$,ee){throw new Error("Not supported!")},U}(w);s.CaptureRule=k;var S=function(){function V(U,Y,X){if(X===void 0&&(X=!0),X)if(U){for(var $=U.length,ee=0,ue=[],Te=!1,De=0;De<$;De++)if(U.charAt(De)==="\\"&&De+1<$){var $e=U.charAt(De+1);$e==="z"?(ue.push(U.substring(ee,De)),ue.push("$(?!\\n)(?<!\\n)"),ee=De+2):$e!=="A"&&$e!=="G"||(Te=!0),De++}this.hasAnchor=Te,ee===0?this.source=U:(ue.push(U.substring(ee,$)),this.source=ue.join(""))}else this.hasAnchor=!1,this.source=U;else this.hasAnchor=!1,this.source=U;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=Y,this.hasBackReferences=g.test(this.source)}return V.prototype.clone=function(){return new V(this.source,this.ruleId,!0)},V.prototype.setSource=function(U){this.source!==U&&(this.source=U,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))},V.prototype.resolveBackReferences=function(U,Y){var X=Y.map(function($){return U.substring($.start,$.end)});return _.lastIndex=0,this.source.replace(_,function($,ee){return(X[parseInt(ee,10)]||"").replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")})},V.prototype._buildAnchorCache=function(){var U,Y,X,$,ee=[],ue=[],Te=[],De=[];for(U=0,Y=this.source.length;U<Y;U++)X=this.source.charAt(U),ee[U]=X,ue[U]=X,Te[U]=X,De[U]=X,X==="\\"&&U+1<Y&&(($=this.source.charAt(U+1))==="A"?(ee[U+1]="\uFFFF",ue[U+1]="\uFFFF",Te[U+1]="A",De[U+1]="A"):$==="G"?(ee[U+1]="\uFFFF",ue[U+1]="G",Te[U+1]="\uFFFF",De[U+1]="G"):(ee[U+1]=$,ue[U+1]=$,Te[U+1]=$,De[U+1]=$),U++);return{A0_G0:ee.join(""),A0_G1:ue.join(""),A1_G0:Te.join(""),A1_G1:De.join("")}},V.prototype.resolveAnchors=function(U,Y){return this.hasAnchor&&this._anchorCache?U?Y?this._anchorCache.A1_G1:this._anchorCache.A1_G0:Y?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source},V}();s.RegExpSource=S;var A=function(){function V(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}return V.prototype.dispose=function(){this._disposeCaches()},V.prototype._disposeCaches=function(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)},V.prototype.push=function(U){this._items.push(U),this._hasAnchors=this._hasAnchors||U.hasAnchor},V.prototype.unshift=function(U){this._items.unshift(U),this._hasAnchors=this._hasAnchors||U.hasAnchor},V.prototype.length=function(){return this._items.length},V.prototype.setSource=function(U,Y){this._items[U].source!==Y&&(this._disposeCaches(),this._items[U].setSource(Y))},V.prototype.compile=function(U,Y,X){if(this._hasAnchors)return Y?X?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(U,Y,X)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(U,Y,X)),this._anchorCache.A1_G0):X?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(U,Y,X)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(U,Y,X)),this._anchorCache.A0_G0);if(!this._cached){var $=this._items.map(function(ee){return ee.source});this._cached=new y(U,$,this._items.map(function(ee){return ee.ruleId}))}return this._cached},V.prototype._resolveAnchors=function(U,Y,X){var $=this._items.map(function(ee){return ee.resolveAnchors(Y,X)});return new y(U,$,this._items.map(function(ee){return ee.ruleId}))},V}();s.RegExpSourceList=A;var P=function(V){function U(Y,X,$,ee,ue){var Te=V.call(this,Y,X,$,null)||this;return Te._match=new S(ee,Te.id),Te.captures=ue,Te._cachedCompiledPatterns=null,Te}return d(U,V),U.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)},Object.defineProperty(U.prototype,"debugMatchRegExp",{get:function(){return""+this._match.source},enumerable:!0,configurable:!0}),U.prototype.collectPatternsRecursive=function(Y,X,$){X.push(this._match)},U.prototype.compile=function(Y,X,$,ee){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new A,this.collectPatternsRecursive(Y,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(Y,$,ee)},U}(w);s.MatchRule=P;var R=function(V){function U(Y,X,$,ee,ue){var Te=V.call(this,Y,X,$,ee)||this;return Te.patterns=ue.patterns,Te.hasMissingPatterns=ue.hasMissingPatterns,Te._cachedCompiledPatterns=null,Te}return d(U,V),U.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)},U.prototype.collectPatternsRecursive=function(Y,X,$){var ee,ue;for(ee=0,ue=this.patterns.length;ee<ue;ee++)Y.getRule(this.patterns[ee]).collectPatternsRecursive(Y,X,!1)},U.prototype.compile=function(Y,X,$,ee){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new A,this.collectPatternsRecursive(Y,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(Y,$,ee)},U}(w);s.IncludeOnlyRule=R;var O=function(V){function U(Y,X,$,ee,ue,Te,De,$e,Ue,it){var tt=V.call(this,Y,X,$,ee)||this;return tt._begin=new S(ue,tt.id),tt.beginCaptures=Te,tt._end=new S(De||"\uFFFF",-1),tt.endHasBackReferences=tt._end.hasBackReferences,tt.endCaptures=$e,tt.applyEndPatternLast=Ue||!1,tt.patterns=it.patterns,tt.hasMissingPatterns=it.hasMissingPatterns,tt._cachedCompiledPatterns=null,tt}return d(U,V),U.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)},Object.defineProperty(U.prototype,"debugBeginRegExp",{get:function(){return""+this._begin.source},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"debugEndRegExp",{get:function(){return""+this._end.source},enumerable:!0,configurable:!0}),U.prototype.getEndWithResolvedBackReferences=function(Y,X){return this._end.resolveBackReferences(Y,X)},U.prototype.collectPatternsRecursive=function(Y,X,$){if($){var ee,ue=void 0;for(ue=0,ee=this.patterns.length;ue<ee;ue++)Y.getRule(this.patterns[ue]).collectPatternsRecursive(Y,X,!1)}else X.push(this._begin)},U.prototype.compile=function(Y,X,$,ee){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new A,this.collectPatternsRecursive(Y,this._cachedCompiledPatterns,!0),this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)),this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,X):this._cachedCompiledPatterns.setSource(0,X)),this._cachedCompiledPatterns.compile(Y,$,ee)},U}(w);s.BeginEndRule=O;var B=function(V){function U(Y,X,$,ee,ue,Te,De,$e,Ue){var it=V.call(this,Y,X,$,ee)||this;return it._begin=new S(ue,it.id),it.beginCaptures=Te,it.whileCaptures=$e,it._while=new S(De,-2),it.whileHasBackReferences=it._while.hasBackReferences,it.patterns=Ue.patterns,it.hasMissingPatterns=Ue.hasMissingPatterns,it._cachedCompiledPatterns=null,it._cachedCompiledWhilePatterns=null,it}return d(U,V),U.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)},Object.defineProperty(U.prototype,"debugBeginRegExp",{get:function(){return""+this._begin.source},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"debugWhileRegExp",{get:function(){return""+this._while.source},enumerable:!0,configurable:!0}),U.prototype.getWhileWithResolvedBackReferences=function(Y,X){return this._while.resolveBackReferences(Y,X)},U.prototype.collectPatternsRecursive=function(Y,X,$){if($){var ee,ue=void 0;for(ue=0,ee=this.patterns.length;ue<ee;ue++)Y.getRule(this.patterns[ue]).collectPatternsRecursive(Y,X,!1)}else X.push(this._begin)},U.prototype.compile=function(Y,X,$,ee){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new A,this.collectPatternsRecursive(Y,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(Y,$,ee)},U.prototype.compileWhile=function(Y,X,$,ee){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new A,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,X||"\uFFFF"),this._cachedCompiledWhilePatterns.compile(Y,$,ee)},U}(w);s.BeginWhileRule=B;var N=function(){function V(){}return V.createCaptureRule=function(U,Y,X,$,ee){return U.registerRule(function(ue){return new k(Y,ue,X,$,ee)})},V.getCompiledRuleId=function(U,Y,X){return U.id||Y.registerRule(function($){if(U.id=$,U.match)return new P(U.$vscodeTextmateLocation,U.id,U.name,U.match,V._compileCaptures(U.captures,Y,X));if(U.begin===void 0){U.repository&&(X=f.mergeObjects({},X,U.repository));var ee=U.patterns;return ee===void 0&&U.include&&(ee=[{include:U.include}]),new R(U.$vscodeTextmateLocation,U.id,U.name,U.contentName,V._compilePatterns(ee,Y,X))}return U.while?new B(U.$vscodeTextmateLocation,U.id,U.name,U.contentName,U.begin,V._compileCaptures(U.beginCaptures||U.captures,Y,X),U.while,V._compileCaptures(U.whileCaptures||U.captures,Y,X),V._compilePatterns(U.patterns,Y,X)):new O(U.$vscodeTextmateLocation,U.id,U.name,U.contentName,U.begin,V._compileCaptures(U.beginCaptures||U.captures,Y,X),U.end,V._compileCaptures(U.endCaptures||U.captures,Y,X),U.applyEndPatternLast,V._compilePatterns(U.patterns,Y,X))}),U.id},V._compileCaptures=function(U,Y,X){var $=[];if(U){var ee=0;for(var ue in U)ue!=="$vscodeTextmateLocation"&&(De=parseInt(ue,10))>ee&&(ee=De);for(var Te=0;Te<=ee;Te++)$[Te]=null;for(var ue in U)if(ue!=="$vscodeTextmateLocation"){var De=parseInt(ue,10),$e=0;U[ue].patterns&&($e=V.getCompiledRuleId(U[ue],Y,X)),$[De]=V.createCaptureRule(Y,U[ue].$vscodeTextmateLocation,U[ue].name,U[ue].contentName,$e)}}return $},V._compilePatterns=function(U,Y,X){var $=[];if(U)for(var ee=0,ue=U.length;ee<ue;ee++){var Te=U[ee],De=-1;if(Te.include)if(Te.include.charAt(0)==="#"){var $e=X[Te.include.substr(1)];$e&&(De=V.getCompiledRuleId($e,Y,X))}else if(Te.include==="$base"||Te.include==="$self")De=V.getCompiledRuleId(X[Te.include],Y,X);else{var Ue=null,it=null,tt=Te.include.indexOf("#");tt>=0?(Ue=Te.include.substring(0,tt),it=Te.include.substring(tt+1)):Ue=Te.include;var St=Y.getExternalGrammar(Ue,X);if(St)if(it){var ve=St.repository[it];ve&&(De=V.getCompiledRuleId(ve,Y,St.repository))}else De=V.getCompiledRuleId(St.repository.$self,Y,St.repository)}else De=V.getCompiledRuleId(Te,Y,X);if(De!==-1){var ne=Y.getRule(De),me=!1;if((ne instanceof R||ne instanceof O||ne instanceof B)&&ne.hasMissingPatterns&&ne.patterns.length===0&&(me=!0),me)continue;$.push(De)}}return{patterns:$,hasMissingPatterns:(U?U.length:0)!==$.length}},V}();s.RuleFactory=N},function(n,s,a){function u(d){return!!d&&!!d.match(/[\w\.:]+/)}Object.defineProperty(s,"__esModule",{value:!0}),s.createMatchers=function(d,f){for(var g,_,y,w=[],k=(y=(_=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g).exec(g=d),{next:function(){if(!y)return null;var B=y[0];return y=_.exec(g),B}}),S=k.next();S!==null;){var A=0;if(S.length===2&&S.charAt(1)===":"){switch(S.charAt(0)){case"R":A=1;break;case"L":A=-1;break;default:console.log("Unknown priority "+S+" in scope selector")}S=k.next()}var P=O();if(w.push({matcher:P,priority:A}),S!==",")break;S=k.next()}return w;function R(){if(S==="-"){S=k.next();var B=R();return function(U){return!!B&&!B(U)}}if(S==="("){S=k.next();var N=function(){for(var U=[],Y=O();Y&&(U.push(Y),S==="|"||S===",");){do S=k.next();while(S==="|"||S===",");Y=O()}return function(X){return U.some(function($){return $(X)})}}();return S===")"&&(S=k.next()),N}if(u(S)){var V=[];do V.push(S),S=k.next();while(u(S));return function(U){return f(V,U)}}return null}function O(){for(var B=[],N=R();N;)B.push(N),N=R();return function(V){return B.every(function(U){return U(V)})}}}},function(n,s){var a,u,d=n.exports={};function f(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}function _(B){if(a===setTimeout)return setTimeout(B,0);if((a===f||!a)&&setTimeout)return a=setTimeout,setTimeout(B,0);try{return a(B,0)}catch{try{return a.call(null,B,0)}catch{return a.call(this,B,0)}}}(function(){try{a=typeof setTimeout=="function"?setTimeout:f}catch{a=f}try{u=typeof clearTimeout=="function"?clearTimeout:g}catch{u=g}})();var y,w=[],k=!1,S=-1;function A(){k&&y&&(k=!1,y.length?w=y.concat(w):S=-1,w.length&&P())}function P(){if(!k){var B=_(A);k=!0;for(var N=w.length;N;){for(y=w,w=[];++S<N;)y&&y[S].run();S=-1,N=w.length}y=null,k=!1,function(V){if(u===clearTimeout)return clearTimeout(V);if((u===g||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(V);try{u(V)}catch{try{return u.call(null,V)}catch{return u.call(this,V)}}}(B)}}function R(B,N){this.fun=B,this.array=N}function O(){}d.nextTick=function(B){var N=new Array(arguments.length-1);if(arguments.length>1)for(var V=1;V<arguments.length;V++)N[V-1]=arguments[V];w.push(new R(B,N)),w.length!==1||k||_(P)},R.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=O,d.addListener=O,d.once=O,d.off=O,d.removeListener=O,d.removeAllListeners=O,d.emit=O,d.prependListener=O,d.prependOnceListener=O,d.listeners=function(B){return[]},d.binding=function(B){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(B){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0});var u=a(9),d=a(2),f=a(10);s.parseRawGrammar=function(g,_){return _===void 0&&(_=null),_!==null&&/\.json$/.test(_)?function(y,w){return d.DebugFlags.InDebugMode?f.parse(y,w,!0):JSON.parse(y)}(g,_):function(y,w){return d.DebugFlags.InDebugMode?u.parseWithLocation(y,w,"$vscodeTextmateLocation"):u.parse(y)}(g,_)}},function(n,s,a){function u(d,f,g){var _=d.length,y=0,w=1,k=0;function S(Ke){if(g===null)y+=Ke;else for(;Ke>0;)d.charCodeAt(y)===10?(y++,w++,k=0):(y++,k++),Ke--}function A(Ke){g===null?y=Ke:S(Ke-y)}function P(){for(;y<_;){var Ke=d.charCodeAt(y);if(Ke!==32&&Ke!==9&&Ke!==13&&Ke!==10)break;S(1)}}function R(Ke){return d.substr(y,Ke.length)===Ke&&(S(Ke.length),!0)}function O(Ke){var Ot=d.indexOf(Ke,y);A(Ot!==-1?Ot+Ke.length:_)}function B(Ke){var Ot=d.indexOf(Ke,y);if(Ot!==-1){var oe=d.substring(y,Ot);return A(Ot+Ke.length),oe}return oe=d.substr(y),A(_),oe}_>0&&d.charCodeAt(0)===65279&&(y=1);var N=0,V=null,U=[],Y=[],X=null;function $(Ke,Ot){U.push(N),Y.push(V),N=Ke,V=Ot}function ee(){if(U.length===0)return ue("illegal state stack");N=U.pop(),V=Y.pop()}function ue(Ke){throw new Error("Near offset "+y+": "+Ke+" ~~~"+d.substr(y,50)+"~~~")}var Te,De,$e,Ue=function(){if(X===null)return ue("missing <key>");var Ke={};g!==null&&(Ke[g]={filename:f,line:w,char:k}),V[X]=Ke,X=null,$(1,Ke)},it=function(){if(X===null)return ue("missing <key>");var Ke=[];V[X]=Ke,X=null,$(2,Ke)},tt=function(){var Ke={};g!==null&&(Ke[g]={filename:f,line:w,char:k}),V.push(Ke),$(1,Ke)},St=function(){var Ke=[];V.push(Ke),$(2,Ke)};function ve(){if(N!==1)return ue("unexpected </dict>");ee()}function ne(){return N===1||N!==2?ue("unexpected </array>"):void ee()}function me(Ke){if(N===1){if(X===null)return ue("missing <key>");V[X]=Ke,X=null}else N===2?V.push(Ke):V=Ke}function qe(Ke){if(isNaN(Ke))return ue("cannot parse float");if(N===1){if(X===null)return ue("missing <key>");V[X]=Ke,X=null}else N===2?V.push(Ke):V=Ke}function Se(Ke){if(isNaN(Ke))return ue("cannot parse integer");if(N===1){if(X===null)return ue("missing <key>");V[X]=Ke,X=null}else N===2?V.push(Ke):V=Ke}function gt(Ke){if(N===1){if(X===null)return ue("missing <key>");V[X]=Ke,X=null}else N===2?V.push(Ke):V=Ke}function Xt(Ke){if(N===1){if(X===null)return ue("missing <key>");V[X]=Ke,X=null}else N===2?V.push(Ke):V=Ke}function He(Ke){if(N===1){if(X===null)return ue("missing <key>");V[X]=Ke,X=null}else N===2?V.push(Ke):V=Ke}function Fe(Ke){if(Ke.isClosed)return"";var Ot=B("</");return O(">"),Ot.replace(/&#([0-9]+);/g,function(oe,ye){return String.fromCodePoint(parseInt(ye,10))}).replace(/&#x([0-9a-f]+);/g,function(oe,ye){return String.fromCodePoint(parseInt(ye,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(oe){switch(oe){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return oe})}for(;y<_&&(P(),!(y>=_));){var pt=d.charCodeAt(y);if(S(1),pt!==60)return ue("expected <");if(y>=_)return ue("unexpected end of input");var Rt=d.charCodeAt(y);if(Rt!==63)if(Rt!==33){if(Rt===47){if(S(1),P(),R("plist")){O(">");continue}if(R("dict")){O(">"),ve();continue}if(R("array")){O(">"),ne();continue}return ue("unexpected closed tag")}var Vt=(De=void 0,$e=void 0,De=B(">"),$e=!1,De.charCodeAt(De.length-1)===47&&($e=!0,De=De.substring(0,De.length-1)),{name:De.trim(),isClosed:$e});switch(Vt.name){case"dict":N===1?Ue():N===2?tt():(V={},g!==null&&(V[g]={filename:f,line:w,char:k}),$(1,V)),Vt.isClosed&&ve();continue;case"array":N===1?it():N===2?St():$(2,V=[]),Vt.isClosed&&ne();continue;case"key":Te=Fe(Vt),N!==1?ue("unexpected <key>"):X!==null?ue("too many <key>"):X=Te;continue;case"string":me(Fe(Vt));continue;case"real":qe(parseFloat(Fe(Vt)));continue;case"integer":Se(parseInt(Fe(Vt),10));continue;case"date":gt(new Date(Fe(Vt)));continue;case"data":Xt(Fe(Vt));continue;case"true":Fe(Vt),He(!0);continue;case"false":Fe(Vt),He(!1);continue}if(!/^plist/.test(Vt.name))return ue("unexpected opened tag "+Vt.name)}else{if(S(1),R("--")){O("-->");continue}O(">")}else S(1),O("?>")}return V}Object.defineProperty(s,"__esModule",{value:!0}),s.parseWithLocation=function(d,f,g){return u(d,f,g)},s.parse=function(d){return u(d,null,null)}},function(n,s,a){function u(_,y){throw new Error("Near offset "+_.pos+": "+y+" ~~~"+_.source.substr(_.pos,50)+"~~~")}Object.defineProperty(s,"__esModule",{value:!0}),s.parse=function(_,y,w){var k=new d(_),S=new f,A=0,P=null,R=[],O=[];function B(){R.push(A),O.push(P)}function N(){A=R.pop(),P=O.pop()}function V($){u(k,$)}for(;g(k,S);){if(A===0){if(P!==null&&V("too many constructs in root"),S.type===3){P={},w&&(P.$vscodeTextmateLocation=S.toLocation(y)),B(),A=1;continue}if(S.type===2){P=[],B(),A=4;continue}V("unexpected token in root")}if(A===2){if(S.type===5){N();continue}if(S.type===7){A=3;continue}V("expected , or }")}if(A===1||A===3){if(A===1&&S.type===5){N();continue}if(S.type===1){var U=S.value;if(g(k,S)&&S.type===6||V("expected colon"),g(k,S)||V("expected value"),A=2,S.type===1){P[U]=S.value;continue}if(S.type===8){P[U]=null;continue}if(S.type===9){P[U]=!0;continue}if(S.type===10){P[U]=!1;continue}if(S.type===11){P[U]=parseFloat(S.value);continue}if(S.type===2){var Y=[];P[U]=Y,B(),A=4,P=Y;continue}if(S.type===3){var X={};w&&(X.$vscodeTextmateLocation=S.toLocation(y)),P[U]=X,B(),A=1,P=X;continue}}V("unexpected token in dict")}if(A===5){if(S.type===4){N();continue}if(S.type===7){A=6;continue}V("expected , or ]")}if(A===4||A===6){if(A===4&&S.type===4){N();continue}if(A=5,S.type===1){P.push(S.value);continue}if(S.type===8){P.push(null);continue}if(S.type===9){P.push(!0);continue}if(S.type===10){P.push(!1);continue}if(S.type===11){P.push(parseFloat(S.value));continue}if(S.type===2){Y=[],P.push(Y),B(),A=4,P=Y;continue}if(S.type===3){X={},w&&(X.$vscodeTextmateLocation=S.toLocation(y)),P.push(X),B(),A=1,P=X;continue}V("unexpected token in array")}V("unknown state")}return O.length!==0&&V("unclosed constructs"),P};var d=function(_){this.source=_,this.pos=0,this.len=_.length,this.line=1,this.char=0},f=function(){function _(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}return _.prototype.toLocation=function(y){return{filename:y,line:this.line,char:this.char}},_}();function g(_,y){y.value=null,y.type=0,y.offset=-1,y.len=-1,y.line=-1,y.char=-1;for(var w,k=_.source,S=_.pos,A=_.len,P=_.line,R=_.char;;){if(S>=A)return!1;if((w=k.charCodeAt(S))!==32&&w!==9&&w!==13){if(w!==10)break;S++,P++,R=0}else S++,R++}if(y.offset=S,y.line=P,y.char=R,w===34){for(y.type=1,S++,R++;;){if(S>=A)return!1;if(w=k.charCodeAt(S),S++,R++,w!==92){if(w===34)break}else S++,R++}y.value=k.substring(y.offset+1,S-1).replace(/\\u([0-9A-Fa-f]{4})/g,function(O,B){return String.fromCodePoint(parseInt(B,16))}).replace(/\\(.)/g,function(O,B){switch(B){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:u(_,"invalid escape sequence")}throw new Error("unreachable")})}else if(w===91)y.type=2,S++,R++;else if(w===123)y.type=3,S++,R++;else if(w===93)y.type=4,S++,R++;else if(w===125)y.type=5,S++,R++;else if(w===58)y.type=6,S++,R++;else if(w===44)y.type=7,S++,R++;else if(w===110){if(y.type=8,S++,R++,(w=k.charCodeAt(S))!==117||(S++,R++,(w=k.charCodeAt(S))!==108)||(S++,R++,(w=k.charCodeAt(S))!==108))return!1;S++,R++}else if(w===116){if(y.type=9,S++,R++,(w=k.charCodeAt(S))!==114||(S++,R++,(w=k.charCodeAt(S))!==117)||(S++,R++,(w=k.charCodeAt(S))!==101))return!1;S++,R++}else if(w===102){if(y.type=10,S++,R++,(w=k.charCodeAt(S))!==97||(S++,R++,(w=k.charCodeAt(S))!==108)||(S++,R++,(w=k.charCodeAt(S))!==115)||(S++,R++,(w=k.charCodeAt(S))!==101))return!1;S++,R++}else for(y.type=11;;){if(S>=A)return!1;if(!((w=k.charCodeAt(S))===46||w>=48&&w<=57||w===101||w===69||w===45||w===43))break;S++,R++}return y.len=S-y.offset,y.value===null&&(y.value=k.substr(y.offset,y.len)),_.pos=S,_.line=P,_.char=R,!0}},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0});var u=function(P,R,O,B,N,V){this.scope=P,this.parentScopes=R,this.index=O,this.fontStyle=B,this.foreground=N,this.background=V};function d(P){return!!/^#[0-9a-f]{6}$/i.test(P)||!!/^#[0-9a-f]{8}$/i.test(P)||!!/^#[0-9a-f]{3}$/i.test(P)||!!/^#[0-9a-f]{4}$/i.test(P)}function f(P){if(!P)return[];if(!P.settings||!Array.isArray(P.settings))return[];for(var R=P.settings,O=[],B=0,N=0,V=R.length;N<V;N++){var U=R[N];if(U.settings){var Y=void 0;typeof U.scope=="string"?Y=U.scope.replace(/^[,]+/,"").replace(/[,]+$/,"").split(","):Y=Array.isArray(U.scope)?U.scope:[""];var X=-1;if(typeof U.settings.fontStyle=="string"){X=0;for(var $=0,ee=(De=U.settings.fontStyle.split(" ")).length;$<ee;$++)switch(De[$]){case"italic":X|=1;break;case"bold":X|=2;break;case"underline":X|=4}}var ue=null;typeof U.settings.foreground=="string"&&d(U.settings.foreground)&&(ue=U.settings.foreground);var Te=null;for(typeof U.settings.background=="string"&&d(U.settings.background)&&(Te=U.settings.background),$=0,ee=Y.length;$<ee;$++){var De,$e=(De=Y[$].trim().split(" "))[De.length-1],Ue=null;De.length>1&&(Ue=De.slice(0,De.length-1)).reverse(),O[B++]=new u($e,Ue,N,X,ue,Te)}}}return O}function g(P,R){P.sort(function(Te,De){var $e=w(Te.scope,De.scope);return $e!==0||($e=k(Te.parentScopes,De.parentScopes))!==0?$e:Te.index-De.index});for(var O=0,B="#000000",N="#ffffff";P.length>=1&&P[0].scope==="";){var V=P.shift();V.fontStyle!==-1&&(O=V.fontStyle),V.foreground!==null&&(B=V.foreground),V.background!==null&&(N=V.background)}for(var U=new _(R),Y=new S(0,null,O,U.getId(B),U.getId(N)),X=new A(new S(0,null,-1,0,0),[]),$=0,ee=P.length;$<ee;$++){var ue=P[$];X.insert(0,ue.scope,ue.parentScopes,ue.fontStyle,U.getId(ue.foreground),U.getId(ue.background))}return new y(U,Y,X)}s.ParsedThemeRule=u,s.parseTheme=f;var _=function(){function P(R){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(R)){this._isFrozen=!0;for(var O=0,B=R.length;O<B;O++)this._color2id[R[O]]=O,this._id2color[O]=R[O]}else this._isFrozen=!1}return P.prototype.getId=function(R){if(R===null)return 0;R=R.toUpperCase();var O=this._color2id[R];if(O)return O;if(this._isFrozen)throw new Error("Missing color in color map - "+R);return O=++this._lastColorId,this._color2id[R]=O,this._id2color[O]=R,O},P.prototype.getColorMap=function(){return this._id2color.slice(0)},P}();s.ColorMap=_;var y=function(){function P(R,O,B){this._colorMap=R,this._root=B,this._defaults=O,this._cache={}}return P.createFromRawTheme=function(R,O){return this.createFromParsedTheme(f(R),O)},P.createFromParsedTheme=function(R,O){return g(R,O)},P.prototype.getColorMap=function(){return this._colorMap.getColorMap()},P.prototype.getDefaults=function(){return this._defaults},P.prototype.match=function(R){return this._cache.hasOwnProperty(R)||(this._cache[R]=this._root.match(R)),this._cache[R]},P}();function w(P,R){return P<R?-1:P>R?1:0}function k(P,R){if(P===null&&R===null)return 0;if(!P)return-1;if(!R)return 1;var O=P.length,B=R.length;if(O===B){for(var N=0;N<O;N++){var V=w(P[N],R[N]);if(V!==0)return V}return 0}return O-B}s.Theme=y,s.strcmp=w,s.strArrCmp=k;var S=function(){function P(R,O,B,N,V){this.scopeDepth=R,this.parentScopes=O,this.fontStyle=B,this.foreground=N,this.background=V}return P.prototype.clone=function(){return new P(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)},P.cloneArr=function(R){for(var O=[],B=0,N=R.length;B<N;B++)O[B]=R[B].clone();return O},P.prototype.acceptOverwrite=function(R,O,B,N){this.scopeDepth>R?console.log("how did this happen?"):this.scopeDepth=R,O!==-1&&(this.fontStyle=O),B!==0&&(this.foreground=B),N!==0&&(this.background=N)},P}();s.ThemeTrieElementRule=S;var A=function(){function P(R,O,B){O===void 0&&(O=[]),B===void 0&&(B={}),this._mainRule=R,this._rulesWithParentScopes=O,this._children=B}return P._sortBySpecificity=function(R){return R.length===1||R.sort(this._cmpBySpecificity),R},P._cmpBySpecificity=function(R,O){if(R.scopeDepth===O.scopeDepth){var B=R.parentScopes,N=O.parentScopes,V=B===null?0:B.length,U=N===null?0:N.length;if(V===U)for(var Y=0;Y<V;Y++){var X=B[Y].length,$=N[Y].length;if(X!==$)return $-X}return U-V}return O.scopeDepth-R.scopeDepth},P.prototype.match=function(R){if(R==="")return P._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));var O,B,N=R.indexOf(".");return N===-1?(O=R,B=""):(O=R.substring(0,N),B=R.substring(N+1)),this._children.hasOwnProperty(O)?this._children[O].match(B):P._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))},P.prototype.insert=function(R,O,B,N,V,U){if(O!==""){var Y,X,$,ee=O.indexOf(".");ee===-1?(Y=O,X=""):(Y=O.substring(0,ee),X=O.substring(ee+1)),this._children.hasOwnProperty(Y)?$=this._children[Y]:($=new P(this._mainRule.clone(),S.cloneArr(this._rulesWithParentScopes)),this._children[Y]=$),$.insert(R+1,X,B,N,V,U)}else this._doInsertHere(R,B,N,V,U)},P.prototype._doInsertHere=function(R,O,B,N,V){if(O!==null){for(var U=0,Y=this._rulesWithParentScopes.length;U<Y;U++){var X=this._rulesWithParentScopes[U];if(k(X.parentScopes,O)===0)return void X.acceptOverwrite(R,B,N,V)}B===-1&&(B=this._mainRule.fontStyle),N===0&&(N=this._mainRule.foreground),V===0&&(V=this._mainRule.background),this._rulesWithParentScopes.push(new S(R,O,B,N,V))}else this._mainRule.acceptOverwrite(R,B,N,V)},P}();s.ThemeTrieElement=A}])})})(f6);const p6=[{id:"abap",scopeName:"source.abap",path:"abap.tmLanguage.json",samplePath:"abap.sample"},{id:"actionscript-3",scopeName:"source.actionscript.3",path:"actionscript-3.tmLanguage.json",samplePath:"actionscript-3.sample"},{id:"ada",scopeName:"source.ada",path:"ada.tmLanguage.json",samplePath:"ada.sample"},{id:"apache",scopeName:"source.apacheconf",path:"apache.tmLanguage.json"},{id:"apex",scopeName:"source.apex",path:"apex.tmLanguage.json",samplePath:"apex.sample"},{id:"apl",scopeName:"source.apl",path:"apl.tmLanguage.json",embeddedLangs:["html","xml","css","javascript","json"]},{id:"applescript",scopeName:"source.applescript",path:"applescript.tmLanguage.json",samplePath:"applescript.sample"},{id:"asm",scopeName:"source.asm.x86_64",path:"asm.tmLanguage.json",samplePath:"asm.sample"},{id:"astro",scopeName:"text.html.astro",path:"astro.tmLanguage.json",samplePath:"astro.sample",embeddedLangs:["css","javascript","less","sass","scss","stylus","typescript","tsx"]},{id:"awk",scopeName:"source.awk",path:"awk.tmLanguage.json",samplePath:"awk.sample"},{id:"ballerina",scopeName:"source.ballerina",path:"ballerina.tmLanguage.json",samplePath:"ballerina.sample"},{id:"bat",scopeName:"source.batchfile",path:"bat.tmLanguage.json",samplePath:"bat.sample",aliases:["batch"]},{id:"berry",scopeName:"source.berry",path:"berry.tmLanguage.json",samplePath:"berry.sample",aliases:["be"]},{id:"bibtex",scopeName:"text.bibtex",path:"bibtex.tmLanguage.json"},{id:"bicep",scopeName:"source.bicep",path:"bicep.tmLanguage.json",samplePath:"bicep.sample"},{id:"c",scopeName:"source.c",path:"c.tmLanguage.json",samplePath:"c.sample"},{id:"clojure",scopeName:"source.clojure",path:"clojure.tmLanguage.json",samplePath:"clojure.sample",aliases:["clj"]},{id:"cobol",scopeName:"source.cobol",path:"cobol.tmLanguage.json",samplePath:"cobol.sample",embeddedLangs:["sql","html","java"]},{id:"codeql",scopeName:"source.ql",path:"codeql.tmLanguage.json",samplePath:"codeql.sample",aliases:["ql"]},{id:"coffee",scopeName:"source.coffee",path:"coffee.tmLanguage.json",samplePath:"coffee.sample",embeddedLangs:["javascript"]},{id:"cpp",scopeName:"source.cpp",path:"cpp.tmLanguage.json",samplePath:"cpp.sample",embeddedLangs:["sql"]},{id:"crystal",scopeName:"source.crystal",path:"crystal.tmLanguage.json",samplePath:"crystal.sample",embeddedLangs:["html","sql","css","c","javascript","shellscript"]},{id:"csharp",scopeName:"source.cs",path:"csharp.tmLanguage.json",samplePath:"csharp.sample",aliases:["c#"]},{id:"css",scopeName:"source.css",path:"css.tmLanguage.json",samplePath:"css.sample"},{id:"cue",scopeName:"source.cue",path:"cue.tmLanguage.json",samplePath:"cue.sample"},{id:"d",scopeName:"source.d",path:"d.tmLanguage.json",samplePath:"d.sample"},{id:"dart",scopeName:"source.dart",path:"dart.tmLanguage.json",samplePath:"dart.sample"},{id:"diff",scopeName:"source.diff",path:"diff.tmLanguage.json",samplePath:"diff.sample"},{id:"docker",scopeName:"source.dockerfile",path:"docker.tmLanguage.json",samplePath:"docker.sample"},{id:"dream-maker",scopeName:"source.dm",path:"dream-maker.tmLanguage.json"},{id:"elixir",scopeName:"source.elixir",path:"elixir.tmLanguage.json",samplePath:"elixir.sample",embeddedLangs:["html"]},{id:"elm",scopeName:"source.elm",path:"elm.tmLanguage.json",samplePath:"elm.sample"},{id:"erb",scopeName:"text.html.erb",path:"erb.tmLanguage.json",samplePath:"erb.sample",embeddedLangs:["html","ruby"]},{id:"erlang",scopeName:"source.erlang",path:"erlang.tmLanguage.json",samplePath:"erlang.sample"},{id:"fish",scopeName:"source.fish",path:"fish.tmLanguage.json",samplePath:"fish.sample"},{id:"fsharp",scopeName:"source.fsharp",path:"fsharp.tmLanguage.json",samplePath:"fsharp.sample",aliases:["f#"],embeddedLangs:["markdown"]},{id:"gherkin",scopeName:"text.gherkin.feature",path:"gherkin.tmLanguage.json"},{id:"git-commit",scopeName:"text.git-commit",path:"git-commit.tmLanguage.json",embeddedLangs:["diff"]},{id:"git-rebase",scopeName:"text.git-rebase",path:"git-rebase.tmLanguage.json",embeddedLangs:["shellscript"]},{id:"gnuplot",scopeName:"source.gnuplot",path:"gnuplot.tmLanguage.json"},{id:"go",scopeName:"source.go",path:"go.tmLanguage.json",samplePath:"go.sample"},{id:"graphql",scopeName:"source.graphql",path:"graphql.tmLanguage.json",embeddedLangs:["javascript","typescript","jsx","tsx"]},{id:"groovy",scopeName:"source.groovy",path:"groovy.tmLanguage.json"},{id:"hack",scopeName:"source.hack",path:"hack.tmLanguage.json",embeddedLangs:["html","sql"]},{id:"haml",scopeName:"text.haml",path:"haml.tmLanguage.json",embeddedLangs:["ruby","javascript","sass","coffee","markdown","css"]},{id:"handlebars",scopeName:"text.html.handlebars",path:"handlebars.tmLanguage.json",aliases:["hbs"],embeddedLangs:["html","css","javascript","yaml"]},{id:"haskell",scopeName:"source.haskell",path:"haskell.tmLanguage.json"},{id:"hcl",scopeName:"source.hcl",path:"hcl.tmLanguage.json"},{id:"hlsl",scopeName:"source.hlsl",path:"hlsl.tmLanguage.json"},{id:"html",scopeName:"text.html.basic",path:"html.tmLanguage.json",samplePath:"html.sample",embeddedLangs:["javascript","css"]},{id:"ini",scopeName:"source.ini",path:"ini.tmLanguage.json"},{id:"java",scopeName:"source.java",path:"java.tmLanguage.json",samplePath:"java.sample"},{id:"javascript",scopeName:"source.js",path:"javascript.tmLanguage.json",samplePath:"javascript.sample",aliases:["js"]},{id:"jinja-html",scopeName:"text.html.jinja",path:"jinja-html.tmLanguage.json",embeddedLangs:["html"]},{id:"json",scopeName:"source.json",path:"json.tmLanguage.json"},{id:"jsonc",scopeName:"source.json.comments",path:"jsonc.tmLanguage.json"},{id:"jsonnet",scopeName:"source.jsonnet",path:"jsonnet.tmLanguage.json"},{id:"jssm",scopeName:"source.jssm",path:"jssm.tmLanguage.json",samplePath:"jssm.sample",aliases:["fsl"]},{id:"jsx",scopeName:"source.js.jsx",path:"jsx.tmLanguage.json"},{id:"julia",scopeName:"source.julia",path:"julia.tmLanguage.json",embeddedLangs:["cpp","python","javascript","r","sql"]},{id:"jupyter",scopeName:"source.jupyter",path:"jupyter.tmLanguage.json",embeddedLangs:["json"]},{id:"kotlin",scopeName:"source.kotlin",path:"kotlin.tmLanguage.json"},{id:"latex",scopeName:"text.tex.latex",path:"latex.tmLanguage.json",embeddedLangs:["tex","css","html","java","javascript","typescript","lua","python","julia","ruby","xml","yaml","cpp","haskell","scala","gnuplot"]},{id:"less",scopeName:"source.css.less",path:"less.tmLanguage.json",embeddedLangs:["css"]},{id:"lisp",scopeName:"source.lisp",path:"lisp.tmLanguage.json"},{id:"logo",scopeName:"source.logo",path:"logo.tmLanguage.json"},{id:"lua",scopeName:"source.lua",path:"lua.tmLanguage.json",embeddedLangs:["c"]},{id:"make",scopeName:"source.makefile",path:"make.tmLanguage.json",aliases:["makefile"]},{id:"markdown",scopeName:"text.html.markdown",path:"markdown.tmLanguage.json",aliases:["md"],embeddedLangs:["css","html","ini","java","lua","make","perl","r","ruby","php","sql","vb","xml","xsl","yaml","bat","clojure","coffee","c","cpp","diff","docker","git-commit","git-rebase","go","groovy","pug","javascript","json","jsonc","less","objective-c","swift","scss","raku","powershell","python","rust","scala","shellscript","typescript","tsx","csharp","fsharp","dart","handlebars","erlang","elixir","latex","bibtex"]},{id:"marko",scopeName:"text.marko",path:"marko.tmLanguage.json",samplePath:"marko.sample",embeddedLangs:["css","less","scss","javascript"]},{id:"matlab",scopeName:"source.matlab",path:"matlab.tmLanguage.json"},{id:"mdx",scopeName:"text.html.markdown.jsx",path:"mdx.tmLanguage.json",embeddedLangs:["jsx","markdown"]},{id:"nginx",scopeName:"source.nginx",path:"nginx.tmLanguage.json",embeddedLangs:["lua"]},{id:"nim",scopeName:"source.nim",path:"nim.tmLanguage.json",embeddedLangs:["c","html","xml","javascript","css","markdown"]},{id:"nix",scopeName:"source.nix",path:"nix.tmLanguage.json"},{id:"objective-c",scopeName:"source.objc",path:"objective-c.tmLanguage.json",aliases:["objc"]},{id:"objective-cpp",scopeName:"source.objcpp",path:"objective-cpp.tmLanguage.json"},{id:"ocaml",scopeName:"source.ocaml",path:"ocaml.tmLanguage.json"},{id:"pascal",scopeName:"source.pascal",path:"pascal.tmLanguage.json"},{id:"perl",scopeName:"source.perl",path:"perl.tmLanguage.json",embeddedLangs:["html","xml","css","javascript","sql"]},{id:"php",scopeName:"source.php",path:"php.tmLanguage.json",embeddedLangs:["html","xml","sql","javascript","json","css"]},{id:"plsql",scopeName:"source.plsql.oracle",path:"plsql.tmLanguage.json"},{id:"postcss",scopeName:"source.css.postcss",path:"postcss.tmLanguage.json"},{id:"powershell",scopeName:"source.powershell",path:"powershell.tmLanguage.json",aliases:["ps","ps1"]},{id:"prisma",scopeName:"source.prisma",path:"prisma.tmLanguage.json",samplePath:"prisma.sample"},{id:"prolog",scopeName:"source.prolog",path:"prolog.tmLanguage.json"},{id:"pug",scopeName:"text.pug",path:"pug.tmLanguage.json",aliases:["jade"],embeddedLangs:["javascript","css","sass","stylus","coffee","html"]},{id:"puppet",scopeName:"source.puppet",path:"puppet.tmLanguage.json"},{id:"purescript",scopeName:"source.purescript",path:"purescript.tmLanguage.json"},{id:"python",scopeName:"source.python",path:"python.tmLanguage.json",samplePath:"python.sample",aliases:["py"]},{id:"r",scopeName:"source.r",path:"r.tmLanguage.json"},{id:"raku",scopeName:"source.perl.6",path:"raku.tmLanguage.json",aliases:["perl6"]},{id:"razor",scopeName:"text.aspnetcorerazor",path:"razor.tmLanguage.json",embeddedLangs:["html","csharp"]},{id:"rel",scopeName:"source.rel",path:"rel.tmLanguage.json",samplePath:"rel.sample"},{id:"riscv",scopeName:"source.riscv",path:"riscv.tmLanguage.json"},{id:"ruby",scopeName:"source.ruby",path:"ruby.tmLanguage.json",samplePath:"ruby.sample",aliases:["rb"],embeddedLangs:["html","xml","sql","css","c","javascript","shellscript","lua"]},{id:"rust",scopeName:"source.rust",path:"rust.tmLanguage.json",aliases:["rs"]},{id:"sas",scopeName:"source.sas",path:"sas.tmLanguage.json",embeddedLangs:["sql"]},{id:"sass",scopeName:"source.sass",path:"sass.tmLanguage.json"},{id:"scala",scopeName:"source.scala",path:"scala.tmLanguage.json"},{id:"scheme",scopeName:"source.scheme",path:"scheme.tmLanguage.json"},{id:"scss",scopeName:"source.css.scss",path:"scss.tmLanguage.json",embeddedLangs:["css"]},{id:"shaderlab",scopeName:"source.shaderlab",path:"shaderlab.tmLanguage.json",aliases:["shader"],embeddedLangs:["hlsl"]},{id:"shellscript",scopeName:"source.shell",path:"shellscript.tmLanguage.json",aliases:["shell","bash","sh","zsh"],embeddedLangs:["ruby","python","applescript","html","markdown"]},{id:"smalltalk",scopeName:"source.smalltalk",path:"smalltalk.tmLanguage.json"},{id:"solidity",scopeName:"source.solidity",path:"solidity.tmLanguage.json"},{id:"sparql",scopeName:"source.sparql",path:"sparql.tmLanguage.json",samplePath:"sparql.sample",embeddedLangs:["turtle"]},{id:"sql",scopeName:"source.sql",path:"sql.tmLanguage.json"},{id:"ssh-config",scopeName:"source.ssh-config",path:"ssh-config.tmLanguage.json"},{id:"stata",scopeName:"source.stata",path:"stata.tmLanguage.json",samplePath:"stata.sample",embeddedLangs:["sql"]},{id:"stylus",scopeName:"source.stylus",path:"stylus.tmLanguage.json",aliases:["styl"]},{id:"svelte",scopeName:"source.svelte",path:"svelte.tmLanguage.json",embeddedLangs:["javascript","typescript","coffee","stylus","sass","css","scss","less","postcss","pug","markdown"]},{id:"swift",scopeName:"source.swift",path:"swift.tmLanguage.json"},{id:"system-verilog",scopeName:"source.systemverilog",path:"system-verilog.tmLanguage.json"},{id:"tasl",scopeName:"source.tasl",path:"tasl.tmLanguage.json",samplePath:"tasl.sample"},{id:"tcl",scopeName:"source.tcl",path:"tcl.tmLanguage.json"},{id:"tex",scopeName:"text.tex",path:"tex.tmLanguage.json",embeddedLangs:["r"]},{id:"toml",scopeName:"source.toml",path:"toml.tmLanguage.json"},{id:"tsx",scopeName:"source.tsx",path:"tsx.tmLanguage.json",samplePath:"tsx.sample"},{id:"turtle",scopeName:"source.turtle",path:"turtle.tmLanguage.json",samplePath:"turtle.sample"},{id:"twig",scopeName:"text.html.twig",path:"twig.tmLanguage.json",embeddedLangs:["css","javascript","php","python","ruby"]},{id:"typescript",scopeName:"source.ts",path:"typescript.tmLanguage.json",aliases:["ts"]},{id:"vb",scopeName:"source.asp.vb.net",path:"vb.tmLanguage.json",aliases:["cmd"]},{id:"verilog",scopeName:"source.verilog",path:"verilog.tmLanguage.json"},{id:"vhdl",scopeName:"source.vhdl",path:"vhdl.tmLanguage.json"},{id:"viml",scopeName:"source.viml",path:"viml.tmLanguage.json",aliases:["vim","vimscript"]},{id:"vue-html",scopeName:"text.html.vue-html",path:"vue-html.tmLanguage.json",embeddedLangs:["vue","javascript"]},{id:"vue",scopeName:"source.vue",path:"vue.tmLanguage.json",embeddedLangs:["json","markdown","pug","haml","vue-html","sass","scss","less","stylus","postcss","css","typescript","coffee","javascript"]},{id:"wasm",scopeName:"source.wat",path:"wasm.tmLanguage.json"},{id:"wenyan",scopeName:"source.wenyan",path:"wenyan.tmLanguage.json",aliases:["\u6587\u8A00"]},{id:"xml",scopeName:"text.xml",path:"xml.tmLanguage.json",embeddedLangs:["java"]},{id:"xsl",scopeName:"text.xml.xsl",path:"xsl.tmLanguage.json",embeddedLangs:["xml"]},{id:"yaml",scopeName:"source.yaml",path:"yaml.tmLanguage.json"},{id:"zenscript",scopeName:"source.zenscript",path:"zenscript.tmLanguage.json",samplePath:"zenscript.sample"}];var mg;(function(r){r[r.NotSet=-1]="NotSet",r[r.None=0]="None",r[r.Italic=1]="Italic",r[r.Bold=2]="Bold",r[r.Underline=4]="Underline"})(mg||(mg={}));class Za{static toBinaryStr(e){let n=e.toString(2);for(;n.length<32;)n="0"+n;return n}static printMetadata(e){let n=Za.getLanguageId(e),s=Za.getTokenType(e),a=Za.getFontStyle(e),u=Za.getForeground(e),d=Za.getBackground(e);console.log({languageId:n,tokenType:s,fontStyle:a,foreground:u,background:d})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static set(e,n,s,a,u,d){let f=Za.getLanguageId(e),g=Za.getTokenType(e),_=Za.getFontStyle(e),y=Za.getForeground(e),w=Za.getBackground(e);return n!==0&&(f=n),s!==0&&(g=s===8?0:s),a!==mg.NotSet&&(_=a),u!==0&&(y=u),d!==0&&(w=d),(f<<0|g<<8|_<<11|y<<14|w<<23)>>>0}}function _3e(r){return r.endsWith("/")||r.endsWith("\\")?r.slice(0,-1):r}function b3e(r){return r.startsWith("./")?r.slice(2):r}function x3e(r){const e=r.split(/[\/\\]/g);return e[e.length-2]}function w3e(...r){return r.map(_3e).map(b3e).join("/")}function k3e(r,e){const n=new Map;for(const s of r){const a=e(s);n.has(a)?n.get(a).push(s):n.set(a,[s])}return n}function C3e(r,e){e===void 0&&(e=!1);var n=r.length,s=0,a="",u=0,d=16,f=0,g=0,_=0,y=0,w=0;function k(N,V){for(var U=0,Y=0;U<N||!V;){var X=r.charCodeAt(s);if(X>=48&&X<=57)Y=Y*16+X-48;else if(X>=65&&X<=70)Y=Y*16+X-65+10;else if(X>=97&&X<=102)Y=Y*16+X-97+10;else break;s++,U++}return U<N&&(Y=-1),Y}function S(N){s=N,a="",u=0,d=16,w=0}function A(){var N=s;if(r.charCodeAt(s)===48)s++;else for(s++;s<r.length&&R0(r.charCodeAt(s));)s++;if(s<r.length&&r.charCodeAt(s)===46)if(s++,s<r.length&&R0(r.charCodeAt(s)))for(s++;s<r.length&&R0(r.charCodeAt(s));)s++;else return w=3,r.substring(N,s);var V=s;if(s<r.length&&(r.charCodeAt(s)===69||r.charCodeAt(s)===101))if(s++,(s<r.length&&r.charCodeAt(s)===43||r.charCodeAt(s)===45)&&s++,s<r.length&&R0(r.charCodeAt(s))){for(s++;s<r.length&&R0(r.charCodeAt(s));)s++;V=s}else w=3;return r.substring(N,V)}function P(){for(var N="",V=s;;){if(s>=n){N+=r.substring(V,s),w=2;break}var U=r.charCodeAt(s);if(U===34){N+=r.substring(V,s),s++;break}if(U===92){if(N+=r.substring(V,s),s++,s>=n){w=2;break}var Y=r.charCodeAt(s++);switch(Y){case 34:N+='"';break;case 92:N+="\\";break;case 47:N+="/";break;case 98:N+="\b";break;case 102:N+="\f";break;case 110:N+=`
`;break;case 114:N+="\r";break;case 116:N+="	";break;case 117:var X=k(4,!0);X>=0?N+=String.fromCharCode(X):w=4;break;default:w=5}V=s;continue}if(U>=0&&U<=31)if(Qv(U)){N+=r.substring(V,s),w=2;break}else w=6;s++}return N}function R(){if(a="",w=0,u=s,g=f,y=_,s>=n)return u=n,d=17;var N=r.charCodeAt(s);if(jS(N)){do s++,a+=String.fromCharCode(N),N=r.charCodeAt(s);while(jS(N));return d=15}if(Qv(N))return s++,a+=String.fromCharCode(N),N===13&&r.charCodeAt(s)===10&&(s++,a+=`
`),f++,_=s,d=14;switch(N){case 123:return s++,d=1;case 125:return s++,d=2;case 91:return s++,d=3;case 93:return s++,d=4;case 58:return s++,d=6;case 44:return s++,d=5;case 34:return s++,a=P(),d=10;case 47:var V=s-1;if(r.charCodeAt(s+1)===47){for(s+=2;s<n&&!Qv(r.charCodeAt(s));)s++;return a=r.substring(V,s),d=12}if(r.charCodeAt(s+1)===42){s+=2;for(var U=n-1,Y=!1;s<U;){var X=r.charCodeAt(s);if(X===42&&r.charCodeAt(s+1)===47){s+=2,Y=!0;break}s++,Qv(X)&&(X===13&&r.charCodeAt(s)===10&&s++,f++,_=s)}return Y||(s++,w=1),a=r.substring(V,s),d=13}return a+=String.fromCharCode(N),s++,d=16;case 45:if(a+=String.fromCharCode(N),s++,s===n||!R0(r.charCodeAt(s)))return d=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return a+=A(),d=11;default:for(;s<n&&O(N);)s++,N=r.charCodeAt(s);if(u!==s){switch(a=r.substring(u,s),a){case"true":return d=8;case"false":return d=9;case"null":return d=7}return d=16}return a+=String.fromCharCode(N),s++,d=16}}function O(N){if(jS(N)||Qv(N))return!1;switch(N){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function B(){var N;do N=R();while(N>=12&&N<=15);return N}return{setPosition:S,getPosition:function(){return s},scan:e?B:R,getToken:function(){return d},getTokenValue:function(){return a},getTokenOffset:function(){return u},getTokenLength:function(){return s-u},getTokenStartLine:function(){return g},getTokenStartCharacter:function(){return u-y},getTokenError:function(){return w}}}function jS(r){return r===32||r===9||r===11||r===12||r===160||r===5760||r>=8192&&r<=8203||r===8239||r===8287||r===12288||r===65279}function Qv(r){return r===10||r===13||r===8232||r===8233}function R0(r){return r>=48&&r<=57}var b3;(function(r){r.DEFAULT={allowTrailingComma:!1}})(b3||(b3={}));function S3e(r,e,n){e===void 0&&(e=[]),n===void 0&&(n=b3.DEFAULT);var s=null,a=[],u=[];function d(g){Array.isArray(a)?a.push(g):s!==null&&(a[s]=g)}var f={onObjectBegin:function(){var g={};d(g),u.push(a),a=g,s=null},onObjectProperty:function(g){s=g},onObjectEnd:function(){a=u.pop()},onArrayBegin:function(){var g=[];d(g),u.push(a),a=g,s=null},onArrayEnd:function(){a=u.pop()},onLiteralValue:d,onError:function(g,_,y){e.push({error:g,offset:_,length:y})}};return E3e(r,f,n),a[0]}function E3e(r,e,n){n===void 0&&(n=b3.DEFAULT);var s=C3e(r,!1);function a(ee){return ee?function(){return ee(s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter())}:function(){return!0}}function u(ee){return ee?function(ue){return ee(ue,s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter())}:function(){return!0}}var d=a(e.onObjectBegin),f=u(e.onObjectProperty),g=a(e.onObjectEnd),_=a(e.onArrayBegin),y=a(e.onArrayEnd),w=u(e.onLiteralValue),k=u(e.onSeparator),S=a(e.onComment),A=u(e.onError),P=n&&n.disallowComments,R=n&&n.allowTrailingComma;function O(){for(;;){var ee=s.scan();switch(s.getTokenError()){case 4:B(14);break;case 5:B(15);break;case 3:B(13);break;case 1:P||B(11);break;case 2:B(12);break;case 6:B(16);break}switch(ee){case 12:case 13:P?B(10):S();break;case 16:B(1);break;case 15:case 14:break;default:return ee}}}function B(ee,ue,Te){if(ue===void 0&&(ue=[]),Te===void 0&&(Te=[]),A(ee),ue.length+Te.length>0)for(var De=s.getToken();De!==17;){if(ue.indexOf(De)!==-1){O();break}else if(Te.indexOf(De)!==-1)break;De=O()}}function N(ee){var ue=s.getTokenValue();return ee?w(ue):f(ue),O(),!0}function V(){switch(s.getToken()){case 11:var ee=s.getTokenValue(),ue=Number(ee);isNaN(ue)&&(B(2),ue=0),w(ue);break;case 7:w(null);break;case 8:w(!0);break;case 9:w(!1);break;default:return!1}return O(),!0}function U(){return s.getToken()!==10?(B(3,[],[2,5]),!1):(N(!1),s.getToken()===6?(k(":"),O(),$()||B(4,[],[2,5])):B(5,[],[2,5]),!0)}function Y(){d(),O();for(var ee=!1;s.getToken()!==2&&s.getToken()!==17;){if(s.getToken()===5){if(ee||B(4,[],[]),k(","),O(),s.getToken()===2&&R)break}else ee&&B(6,[],[]);U()||B(4,[],[2,5]),ee=!0}return g(),s.getToken()!==2?B(7,[2],[]):O(),!0}function X(){_(),O();for(var ee=!1;s.getToken()!==4&&s.getToken()!==17;){if(s.getToken()===5){if(ee||B(4,[],[]),k(","),O(),s.getToken()===4&&R)break}else ee&&B(6,[],[]);$()||B(4,[],[4,5]),ee=!0}return y(),s.getToken()!==4?B(8,[4],[]):O(),!0}function $(){switch(s.getToken()){case 3:return X();case 1:return Y();case 10:return N(!0);default:return V()}}return O(),s.getToken()===17?n.allowEmptyContent?!0:(B(4,[],[]),!1):$()?(s.getToken()!==17&&B(9,[],[]),!0):(B(4,[],[]),!1)}var T3e=S3e;let kT="";function M3e(r){kT=r}let $S=null;async function A3e(){if(!$S){let r;r=qw.exports.loadWASM({data:await(globalThis.__shiki_fetch__||globalThis.fetch)(DV("dist/onig.wasm")).then(e=>e.arrayBuffer())}),$S=r.then(()=>({createOnigScanner(e){return qw.exports.createOnigScanner(e)},createOnigString(e){return qw.exports.createOnigString(e)}}))}return $S}function DV(r){return kT||console.warn("[Shiki] no CDN provider found, use `setCDN()` to specify the CDN for loading the resources before calling `getHighlighter()`"),`${kT}${r}`}async function L3e(r){const e=DV(r);return await(globalThis.__shiki_fetch__||globalThis.fetch)(e).then(n=>n.text())}async function NV(r){const e=[],n=T3e(await L3e(r),e,{allowTrailingComma:!0});if(e.length)throw e[0];return n}async function OV(r){let e=await NV(r);const n=FV(e);if(n.include){const s=await OV(w3e(x3e(r),n.include));s.settings&&(n.settings=s.settings.concat(n.settings)),s.bg&&!n.bg&&(n.bg=s.bg),s.colors&&(n.colors=Object.assign(Object.assign({},s.colors),n.colors)),delete n.include}return n}async function R3e(r){return await NV(r)}function P3e(r){r.settings||(r.settings=[]),!(r.settings[0]&&r.settings[0].settings&&!r.settings[0].scope)&&r.settings.unshift({settings:{foreground:r.fg,background:r.bg}})}function FV(r){const e=r.type||"dark",n=Object.assign(Object.assign({name:r.name,type:e},r),I3e(r));return r.include&&(n.include=r.include),r.tokenColors&&(n.settings=r.tokenColors,delete n.tokenColors),P3e(n),n}const wN={light:"#333333",dark:"#bbbbbb"},kN={light:"#fffffe",dark:"#1e1e1e"};function I3e(r){var e,n,s,a,u,d;let f,g,_=r.settings?r.settings:r.tokenColors;const y=_?_.find(w=>!w.name&&!w.scope):void 0;return!((e=y==null?void 0:y.settings)===null||e===void 0)&&e.foreground&&(f=y.settings.foreground),!((n=y==null?void 0:y.settings)===null||n===void 0)&&n.background&&(g=y.settings.background),!f&&!((a=(s=r)===null||s===void 0?void 0:s.colors)===null||a===void 0)&&a["editor.foreground"]&&(f=r.colors["editor.foreground"]),!g&&!((d=(u=r)===null||u===void 0?void 0:u.colors)===null||d===void 0)&&d["editor.background"]&&(g=r.colors["editor.background"]),f||(f=r.type==="light"?wN.light:wN.dark),g||(g=r.type==="light"?kN.light:kN.dark),{fg:f,bg:g}}class D3e{constructor(e,n){this.languagesPath="languages/",this.languageMap={},this.scopeToLangMap={},this._onigLibPromise=e,this._onigLibName=n}get onigLib(){return this._onigLibPromise}getOnigLibName(){return this._onigLibName}getLangRegistration(e){return this.languageMap[e]}async loadGrammar(e){const n=this.scopeToLangMap[e];if(!n)return null;if(n.grammar)return n.grammar;const s=await R3e(p6.includes(n)?`${this.languagesPath}${n.path}`:n.path);return n.grammar=s,s}addLanguage(e){this.languageMap[e.id]=e,e.aliases&&e.aliases.forEach(n=>{this.languageMap[n]=e}),this.scopeToLangMap[e.scopeName]=e}}function N3e(r,e,n,s,a){let u=n.split(/\r\n|\r|\n/),d=f6.exports.INITIAL,f=[],g=[];for(let _=0,y=u.length;_<y;_++){let w=u[_];if(w===""){f=[],g.push([]);continue}let k,S,A;a.includeExplanation&&(k=s.tokenizeLine(w,d),S=k.tokens,A=0);let P=s.tokenizeLine2(w,d),R=P.tokens.length/2;for(let O=0;O<R;O++){let B=P.tokens[2*O],N=O+1<R?P.tokens[2*O+2]:w.length;if(B===N)continue;let V=P.tokens[2*O+1],U=Za.getForeground(V),Y=e[U],X=Za.getFontStyle(V),$=[];if(a.includeExplanation){let ee=0;for(;B+ee<N;){let ue=S[A],Te=w.substring(ue.startIndex,ue.endIndex);ee+=Te.length,$.push({content:Te,scopes:O3e(r,ue.scopes)}),A++}}f.push({content:w.substring(B,N),color:Y,fontStyle:X,explanation:$})}g.push(f),f=[],d=P.ruleStack}return g}function O3e(r,e){let n=[];for(let s=0,a=e.length;s<a;s++){let u=e.slice(0,s),d=e[s];n[s]={scopeName:d,themeMatches:B3e(r,d,u)}}return n}function CN(r,e){let n=r+".";return r===e||e.substring(0,n.length)===n}function F3e(r,e,n,s){if(!CN(r,n))return!1;let a=e.length-1,u=s.length-1;for(;a>=0&&u>=0;)CN(e[a],s[u])&&a--,u--;return a===-1}function B3e(r,e,n){let s=[],a=0;for(let u=0,d=r.settings.length;u<d;u++){let f=r.settings[u],g;if(typeof f.scope=="string")g=f.scope.split(/,/).map(_=>_.trim());else if(Array.isArray(f.scope))g=f.scope;else continue;for(let _=0,y=g.length;_<y;_++){let w=g[_].split(/ /),k=w[w.length-1],S=w.slice(0,w.length-1);F3e(k,S,e,n)&&(s[a++]=f,_=y)}}return s}function V3e(r,e={}){var n;const s=e.bg||"#fff",a=k3e((n=e.lineOptions)!==null&&n!==void 0?n:[],d=>d.line);let u="";return u+=`<pre class="shiki" style="background-color: ${s}">`,e.langId&&(u+=`<div class="language-id">${e.langId}</div>`),u+="<code>",r.forEach((d,f)=>{var g;const _=f+1,y=(g=a.get(_))!==null&&g!==void 0?g:[],w=U3e(y).join(" ");u+=`<span class="${w}">`,d.forEach(k=>{const S=[`color: ${k.color||e.fg}`];k.fontStyle&mg.Italic&&S.push("font-style: italic"),k.fontStyle&mg.Bold&&S.push("font-weight: bold"),k.fontStyle&mg.Underline&&S.push("text-decoration: underline"),u+=`<span style="${S.join("; ")}">${z3e(k.content)}</span>`}),u+=`</span>
`}),u=u.replace(/\n*$/,""),u+="</code></pre>",u}const W3e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function z3e(r){return r.replace(/[&<>"']/g,e=>W3e[e])}function U3e(r){var e;const n=new Set(["line"]);for(const s of r)for(const a of(e=s.classes)!==null&&e!==void 0?e:[])n.add(a);return Array.from(n)}class G3e extends f6.exports.Registry{constructor(e){super(e),this._resolver=e,this.themesPath="themes/",this._resolvedThemes={},this._resolvedGrammars={}}getTheme(e){return typeof e=="string"?this._resolvedThemes[e]:e}async loadTheme(e){return typeof e=="string"?(this._resolvedThemes[e]||(this._resolvedThemes[e]=await OV(`${this.themesPath}${e}.json`)),this._resolvedThemes[e]):(e=FV(e),e.name&&(this._resolvedThemes[e.name]=e),e)}async loadThemes(e){return await Promise.all(e.map(n=>this.loadTheme(n)))}getLoadedThemes(){return Object.keys(this._resolvedThemes)}getGrammar(e){return this._resolvedGrammars[e]}async loadLanguage(e){const n=await this.loadGrammar(e.scopeName);this._resolvedGrammars[e.id]=n,e.aliases&&e.aliases.forEach(s=>{this._resolvedGrammars[s]=n})}async loadLanguages(e){for(const n of e)this._resolver.addLanguage(n);for(const n of e)await this.loadLanguage(n)}getLoadedLanguages(){return Object.keys(this._resolvedGrammars)}}function BV(r){return typeof r=="string"?p6.find(e=>{var n;return e.id===r||((n=e.aliases)===null||n===void 0?void 0:n.includes(r))}):r}function H3e(r){var e;let n=p6,s=r.themes||[];return!((e=r.langs)===null||e===void 0)&&e.length&&(n=r.langs.map(BV)),r.theme&&s.unshift(r.theme),s.length||(s=["nord"]),{_languages:n,_themes:s}}async function Y3e(r){var e,n;const{_languages:s,_themes:a}=H3e(r),u=new D3e(A3e(),"vscode-oniguruma"),d=new G3e(u);!((e=r.paths)===null||e===void 0)&&e.themes&&(d.themesPath=r.paths.themes),!((n=r.paths)===null||n===void 0)&&n.languages&&(u.languagesPath=r.paths.languages);const f=(await d.loadThemes(a))[0];let g;await d.loadLanguages(s);const _={"#000001":"var(--shiki-color-text)","#000002":"var(--shiki-color-background)","#000004":"var(--shiki-token-constant)","#000005":"var(--shiki-token-string)","#000006":"var(--shiki-token-comment)","#000007":"var(--shiki-token-keyword)","#000008":"var(--shiki-token-parameter)","#000009":"var(--shiki-token-function)","#000010":"var(--shiki-token-string-expression)","#000011":"var(--shiki-token-punctuation)","#000012":"var(--shiki-token-link)"};function y(U,Y){U.bg=_[U.bg]||U.bg,U.fg=_[U.fg]||U.fg,Y.forEach((X,$)=>{Y[$]=_[X]||X})}function w(U){const Y=U?d.getTheme(U):f;if(!Y)throw Error(`No theme registration for ${U}`);(!g||g.name!==Y.name)&&(d.setTheme(Y),g=Y);const X=d.getColorMap();return Y.name==="css-variables"&&y(Y,X),{_theme:Y,_colorMap:X}}function k(U){const Y=d.getGrammar(U);if(!Y)throw Error(`No language registration for ${U}`);return{_grammar:Y}}function S(U,Y="text",X,$={includeExplanation:!0}){if(j3e(Y))return[...U.split(/\r\n|\r|\n/).map(De=>[{content:De}])];const{_grammar:ee}=k(Y),{_theme:ue,_colorMap:Te}=w(X);return N3e(ue,Te,U,ee,$)}function A(U,Y="text",X){let $;typeof Y=="object"?$=Y:$={lang:Y,theme:X};const ee=S(U,$.lang,$.theme,{includeExplanation:!1}),{_theme:ue}=w($.theme);return V3e(ee,{fg:ue.fg,bg:ue.bg,lineOptions:$==null?void 0:$.lineOptions})}async function P(U){await d.loadTheme(U)}async function R(U){const Y=BV(U);u.addLanguage(Y),await d.loadLanguage(Y)}function O(){return d.getLoadedThemes()}function B(){return d.getLoadedLanguages()}function N(U){const{_theme:Y}=w(U);return Y.bg}function V(U){const{_theme:Y}=w(U);return Y.fg}return{codeToThemedTokens:S,codeToHtml:A,getTheme:U=>w(U)._theme,loadTheme:P,loadLanguage:R,getBackgroundColor:N,getForegroundColor:V,getLoadedThemes:O,getLoadedLanguages:B}}function j3e(r){return!r||["plaintext","txt","text"].includes(r)}const $3e="shikey",q3e="0.0.2",X3e="MIT",Z3e="Nicholas Berlette <nick@berlette.com>",K3e="module",J3e="pnpm@7.1.9",Q3e={access:"public",exports:{".":{types:"./dist/shiki.d.ts",node:"./dist/shiki.node.mjs",import:"./dist/shiki.mjs",default:"./dist/shiki.mjs"},"./shiki/*":"./dist/shiki/*","./package.json":"./package.json"}},e5e="Standalone build of shiki fully compatible with all ESM environments.",t5e="https://github.com/nberlette/shikey#readme",n5e="nberlette/shikey",i5e="https://github.com/nberlette/shikey#readme",r5e="https://github.com/nberlette/shikey/issues",s5e={preinstall:"npx -y only-allow pnpm",build:"unbuild",prepack:"nr build",test:"node test",lint:"eslint .","lint:fix":"eslint --fix .",clean:"npx -y rimraf gen dist",preversion:"nr lint:fix && nr lint && nr test","release:bump":"npx -y bumpp --commit '\u{1F4E6} %s' --tag --push --all","release:publish":"pnpm publish --access public",release:"nr release:bump && nr release:publish && nr clean"},o5e={extends:["@brlt"],rules:{"no-console":"off"},ignorePatterns:["gen","dist","node_modules"]},a5e="./dist/shiki.d.ts",l5e={".":{node:"./dist/shiki.node.mjs",default:"./dist/shiki.mjs"},"./shiki/*":"./dist/shiki/*"},c5e="./dist/shiki.node.mjs",u5e="./dist/shiki.mjs",h5e=["dist"],d5e={"@brlt/eslint-config":"0.0.4","@brlt/n":"0.1.1","@types/fs-extra":"9.0.13","@types/node":"17.0.40",eslint:"8.17.0","fs-extra":"10.1.0","node-fetch":"3.2.5",pathe:"0.3.0",shiki:"0.10.1",typescript:"4.7.3",unbuild:"0.7.4"},f5e={name:$3e,version:q3e,license:X3e,author:Z3e,type:K3e,packageManager:J3e,publishConfig:Q3e,description:e5e,homepage:t5e,repository:n5e,readme:i5e,bugs:r5e,scripts:s5e,eslintConfig:o5e,types:a5e,exports:l5e,main:c5e,module:u5e,files:h5e,devDependencies:d5e};M3e(`https://cdn.jsdelivr.net/npm/shikey@${f5e.version}/dist/assets/`);async function p5e(){return{highlighter:await Y3e({theme:"css-variables",langs:["javascript","typescript","html","json","bash","css","xml","yaml","markdown"]})}}const m5e=yi({__name:"AsCodeBlock",props:{language:{type:String},code:{type:String}},async setup(r){let e,n;const s=r,a=Tn(!1),{error:u}=gc(),d=Tn(!1),f=Ht(()=>s.language==="javascript"?"js":s.language==="typescript"?"ts":s.language);async function g(){try{await navigator.clipboard.writeText(s.code),d.value=!0,setTimeout(()=>{d.value=!1},2e3)}catch(k){u("There was an error copying content to clipboard",k)}}const{highlighter:_}=([e,n]=Nde(()=>p5e()),e=await e,n(),e),y=_.codeToHtml(s.code,{lang:f.value}),w=()=>po("div",{innerHTML:y.replace('class="shiki"','class="shiki not-prose"')});return(k,S)=>(Ge(),Ct("div",{class:"relative",onMouseenter:S[1]||(S[1]=A=>a.value=!0),onMouseleave:S[2]||(S[2]=A=>a.value=!1)},[Bt(bg,{name:"fade-language","enter-active-class":"opacity-1 transition-opacity duration-200","leave-active-class":"opacity-0 transition-opacity duration-200"},{default:Xn(()=>[cr(G("span",{class:"absolute top-1 right-1 px-3 text-primary-300"},Js(ft(f)),513),[[Vy,!a.value]])]),_:1}),Bt(bg,{name:"fade-copy","enter-active-class":"opacity-1 transition-opacity duration-200","leave-active-class":"opacity-0 transition-opacity duration-200"},{default:Xn(()=>[a.value?(Ge(),Jn(h6,{key:0,class:er(["absolute top-1 right-1",{"text-green-500":d.value}]),size:"sm",icon:d.value?"check":"copy",onClick:S[0]||(S[0]=A=>g())},null,8,["class","icon"])):pi("",!0)]),_:1}),Bt(w)],32))}}),g5e=Object.freeze(Object.defineProperty({__proto__:null,default:m5e},Symbol.toStringTag,{value:"Module"})),v5e=["aria-label","checked"],y5e={for:"dark-switch",relative:"","cursor-pointer":""},_5e=G("div",{class:"planet"},null,-1),b5e={class:"dots"},x5e=yi({__name:"AsDarkModeSwitch",props:{valueDark:{type:String,default:"dark"}},setup(r){const e=qpe(),n=$M(e),s=Tn(null),{focused:a}=lme(s);return(u,d)=>(Ge(),Ct("div",{relative:"","inline-block":"",class:er(["dark-mode-switch",{"outline-solid-blue-500":ft(a)}])},[G("input",{id:"dark-switch",ref_key:"inputRef",ref:s,type:"checkbox","w-2":"","h-2":"",absolute:"","opacity-0":"","aria-label":`Enable ${ft(e)?"light":"dark"} Mode`,"tab-index":"0",checked:!ft(e),onChange:d[0]||(d[0]=f=>ft(n)())},null,40,v5e),G("label",y5e,[_5e,G("div",b5e,[(Ge(),Ct(ai,null,Xp([0,45,90,135,180,225,270,315],f=>G("span",{key:`dot-${f}`,class:er(`dot-${f}`)},null,2)),64))])])],2))}}),w5e=Object.freeze(Object.defineProperty({__proto__:null,default:x5e},Symbol.toStringTag,{value:"Module"})),k5e={xmlns:"http://www.w3.org/2000/svg",width:"261",height:"158",fill:"none"},C5e=G("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-opacity":".25","stroke-width":"6",d:"M3 23 28.5 3 54 23 79.5 3 105 23l25.5-20L156 23l25.5-20L207 23l25.5-20L258 23M3 67l25.5-20L54 67l25.5-20L105 67l25.5-20L156 67l25.5-20L207 67l25.5-20L258 67M3 111l25.5-20L54 111l25.5-20 25.5 20 25.5-20 25.5 20 25.5-20 25.5 20 25.5-20 25.5 20M3 155l25.5-20L54 155l25.5-20 25.5 20 25.5-20 25.5 20 25.5-20 25.5 20 25.5-20 25.5 20"},null,-1),S5e=[C5e];function E5e(r,e){return Ge(),Ct("svg",k5e,S5e)}const T5e={render:E5e},M5e={xmlns:"http://www.w3.org/2000/svg",width:"230",height:"230",fill:"none"},A5e=G3('<circle cx="2.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle>',100),L5e=[A5e];function R5e(r,e){return Ge(),Ct("svg",M5e,L5e)}const P5e={render:R5e},I5e={xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"none"},D5e=G("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18",d:"M48.995 9v81.806M90.806 50H9"},null,-1),N5e=[D5e];function O5e(r,e){return Ge(),Ct("svg",I5e,N5e)}const F5e={render:O5e},B5e={xmlns:"http://www.w3.org/2000/svg",width:"98",height:"98",fill:"none"},V5e=G("circle",{cx:"49",cy:"49",r:"38",stroke:"currentColor","stroke-width":"22"},null,-1),W5e=[V5e];function z5e(r,e){return Ge(),Ct("svg",B5e,W5e)}const U5e={render:z5e},G5e={xmlns:"http://www.w3.org/2000/svg",width:"480",height:"432",fill:"none"},H5e=G3('<circle cx="2.5" cy="253.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="253.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="253.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="253.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="253.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="253.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="253.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="253.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="253.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="253.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="278.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="278.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="278.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="278.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="278.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="278.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="278.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="278.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="278.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="278.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="303.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="303.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="303.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="303.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="303.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="303.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="303.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="303.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="303.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="303.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="328.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="328.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="328.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="328.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="328.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="328.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="328.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="328.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="328.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="328.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="353.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="353.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="353.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="353.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="353.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="353.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="353.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="353.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="353.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="353.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="378.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="378.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="378.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="378.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="378.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="378.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="378.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="378.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="378.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="378.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="403.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="403.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="403.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="403.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="403.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="403.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="403.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="403.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="403.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="403.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="428.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="428.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="428.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="428.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="428.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="428.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="428.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="428.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="428.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="428.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="254.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="254.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="254.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="254.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="254.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="254.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="254.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="254.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="254.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="254.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="279.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="279.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="279.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="279.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="279.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="279.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="279.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="279.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="279.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="279.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="304.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="304.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="304.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="304.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="304.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="304.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="304.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="304.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="304.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="304.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="329.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="329.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="329.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="329.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="329.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="329.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="329.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="329.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="329.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="329.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="354.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="354.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="354.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="354.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="354.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="354.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="354.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="354.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="354.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="354.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="379.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="379.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="379.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="379.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="379.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="379.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="379.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="379.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="379.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="379.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="404.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="404.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="404.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="404.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="404.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="404.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="404.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="404.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="404.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="404.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="429.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="429.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="429.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="429.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="429.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="429.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="429.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="429.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="429.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="429.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="2.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="27.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="52.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="77.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="102.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="127.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="152.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="177.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="202.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="227.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="2.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="27.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="52.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="77.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="102.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="127.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="152.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="177.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="202.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="252.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="277.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="302.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="327.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="352.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="377.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="402.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="427.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="452.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle><circle cx="477.5" cy="227.5" r="2.5" fill="currentColor" fill-opacity=".42"></circle>',360),Y5e=[H5e];function j5e(r,e){return Ge(),Ct("svg",G5e,Y5e)}const $5e={render:j5e},q5e={xmlns:"http://www.w3.org/2000/svg",width:"322",height:"279",fill:"none"},X5e=G("path",{fill:"currentColor","fill-opacity":".3",d:"M92.5 38C73.3 18.8 22.833 4.667 0 0v278.5h322c-5.167-9.333-23.6-30-56-38-40.5-10-78.5-26.5-90-38.5s-32-44-39-79-20.5-61-44.5-85Z"},null,-1),Z5e=[X5e];function K5e(r,e){return Ge(),Ct("svg",q5e,Z5e)}const J5e={render:K5e},Q5e={xmlns:"http://www.w3.org/2000/svg",width:"317",height:"83",fill:"none"},eke=G("path",{fill:"currentColor",d:"M6.095 82.907c-2.434.194-4.475.175-6.095 0h6.095c16.096-1.282 49.361-11.864 91.405-48 60.5-52 137-53.5 219.5 48H6.095Z"},null,-1),tke=[eke];function nke(r,e){return Ge(),Ct("svg",Q5e,tke)}const ike={render:nke},rke={xmlns:"http://www.w3.org/2000/svg",width:"568",height:"819",fill:"none"},ske=G3('<path fill="url(#a)" fill-opacity=".08" d="M419.963 565.62c-43.931 19.576-117.938 2.091-169.303 22.062-50.975 19.992-79.698 77.421-121.106 101.029-41.798 23.588-96.691 13.724-145.31-11.811-48.251-25.127-90.638-65.556-92.442-113.64-2.193-48.103 35.42-103.901 36.494-162.37 1.075-58.469-34.736-120.408-21.23-155.214 13.506-34.806 76.37-43.258 129.492-67.04 53.102-23.394 96.504-62.895 139.059-63.424 42.944-.509 85.043 37.955 114.998 77.351 29.565 39.375 46.947 80.462 78.828 120.348 31.88 39.885 78.218 79.349 93.682 127.359 15.852 48.03 1.178 105.405-43.162 125.35Z"></path><defs><radialGradient id="a" cx="0" cy="0" r="1" gradientTransform="matrix(-287.5633 -14.87932 15.28563 -295.4158 184.619 411.739)" gradientUnits="userSpaceOnUse"><stop stop-color="#0ED7B5"></stop><stop offset="1" stop-color="#0E7490"></stop><stop offset="1" stop-color="#34D399" stop-opacity=".016"></stop><stop offset="1" stop-color="#34D399"></stop></radialGradient></defs>',2),oke=[ske];function ake(r,e){return Ge(),Ct("svg",rke,oke)}const lke={render:ake};var Xw=(r=>(r.ZIGZAG="zigzag",r.DOTS="dots",r.DOTS_2X="dots-2x",r.CROSS="cross",r.DONUT="donut",r.CURVE_BIG="curve-big",r.CURVE_SMALL="curve-small",r.BLOB="blob",r))(Xw||{});const cke={zigzag:T5e,dots:P5e,["dots-2x"]:$5e,cross:F5e,donut:U5e,["curve-big"]:J5e,["curve-small"]:ike,blob:lke},VV=yi({__name:"AsGraphic",props:{type:{type:String,default:Xw.DOTS,validator:r=>{const{error:e}=gc(),n=Object.values(Xw).includes(r);return n||e(`Invalid button variant specified "${r}". Valid values are [${Object.values(Xw)}]`),n}}},setup(r){const e=r,n=Ht(()=>{const{type:s}=e;return cke[s]});return(s,a)=>(Ge(),Jn(hB(ft(n))))}}),uke=Object.freeze(Object.defineProperty({__proto__:null,default:VV},Symbol.toStringTag,{value:"Module"})),hke={class:"relative z-70","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},dke={fixed:"","inset-0":"","bg-gray-500":"","bg-opacity-75":"","transition-opacity":""},fke={class:"fixed inset-0 z-70 overflow-y-auto"},pke={class:"flex min-h-full items-start justify-center p-4 text-center sm:items-center sm:p-0"},mke={"bg-white":"","dark:bg-primary-600":"","text-primary":"","dark:text-gray-400":""},gke={relative:"","px-4":"","pt-4":"","pb-4":"","sm:p-6":"","sm:pb-4":""},vke={class:"headline-3 sm:headline-2"},yke={"p-4":"","sm:p-6":""},_ke={class:"prose"},bke={class:"px-4 py-3 flex justify-end"},xke=yi({__name:"AsModal",props:{title:null,isOpen:{type:Boolean},content:null},emits:["update:isOpen"],setup(r,{emit:e}){const n=Tn();HB(n,s);function s(){e("update:isOpen",!1)}return(a,u)=>(Ge(),Ct("div",hke,[Bt(bg,{name:"fade-overlay","enter-active-class":"opacity-1 transition-opacity duration-200","leave-active-class":"opacity-0 transition-opacity duration-200"},{default:Xn(()=>[cr(G("div",dke,null,512),[[Vy,r.isOpen]])]),_:1}),Bt(bg,{name:"fade-overlay","enter-active-class":"opacity-1 translate-y-0 sm:scale-100 delay-200 transition-all duration-300","leave-active-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95 transition-all duration-200"},{default:Xn(()=>[cr(G("div",fke,[G("div",pke,[G("div",{ref_key:"modal",ref:n,relative:"",transform:"","overflow-hidden":"","rounded-lg":"","bg-white":"","dark:bg-primary-600":"","text-left":"","shadow-xl":"","transition-all":"","sm:my-8":"","w-full":"","sm:max-w-3xl":""},[G("div",mke,[G("header",gke,[yr(a.$slots,"header",{},()=>[G("h2",vke,Js(r.title),1)]),Bt(h6,{transparent:"","p-4":"",absolute:"",top:"2 sm:4",right:"2 sm:4",icon:"close",onClick:s})]),G("div",yke,[yr(a.$slots,"content",{},()=>[G("p",_ke,Js(r.content),1)])])]),G("footer",bke,[yr(a.$slots,"footer")])],512)])],512),[[Vy,r.isOpen]])]),_:3})]))}}),wke=Object.freeze(Object.defineProperty({__proto__:null,default:xke},Symbol.toStringTag,{value:"Module"})),kke={class:"as-particle-loader"},Cke=["width"],Ske=G3('<g id="el_K14KZpaUUf_an_uzCRZV8LL" data-animator-group="true" data-animator-type="0"><g id="el_K14KZpaUUf_an_s-u7Qoaha" data-animator-group="true" data-animator-type="1"><g id="el_K14KZpaUUf_an_Uii2MvB3j" data-animator-group="true" data-animator-type="2"><rect id="el_K14KZpaUUf" x="235" y="252" width="43" height="8"></rect></g></g></g><g id="el_8vVe818fyI_an_i79dpGMUM" data-animator-group="true" data-animator-type="0"><g id="el_8vVe818fyI_an_RqXqcMwvz" data-animator-group="true" data-animator-type="1"><g id="el_8vVe818fyI_an__bExq-HgO" data-animator-group="true" data-animator-type="2"><rect id="el_8vVe818fyI" x="235" y="252" width="43" height="8"></rect></g></g></g><g id="el_342UfSpg1o_an_mHoePAwO8" data-animator-group="true" data-animator-type="0"><g id="el_342UfSpg1o_an_fGrKAUpn5" data-animator-group="true" data-animator-type="1"><g id="el_342UfSpg1o_an_Lwb52Ncdm" data-animator-group="true" data-animator-type="2"><rect id="el_342UfSpg1o" x="235" y="252" width="43" height="8"></rect></g></g></g><g id="el_vOa8NPJOyR_an_dbg0acckc" data-animator-group="true" data-animator-type="0"><g id="el_vOa8NPJOyR_an_a65BtQ09x" data-animator-group="true" data-animator-type="1"><g id="el_vOa8NPJOyR_an_7sn-8duPi" data-animator-group="true" data-animator-type="2"><rect id="el_vOa8NPJOyR" x="235" y="252" width="43" height="8"></rect></g></g></g><g id="el_KGuutbv_2N_an_hlYQCkG6S" data-animator-group="true" data-animator-type="0"><g id="el_KGuutbv_2N_an_OQiHzDTaJ" data-animator-group="true" data-animator-type="1"><g id="el_KGuutbv_2N_an_fmnda5309" data-animator-group="true" data-animator-type="2"><rect id="el_KGuutbv_2N" x="235" y="252" width="43" height="8"></rect></g></g></g><g id="el_DZNZsi7r4u_an_EKe1640e7" data-animator-group="true" data-animator-type="0"><circle id="el_DZNZsi7r4u" cx="256.5" cy="255.5" r="22.5"></circle></g><g id="el_UTiwSL6G_B_an_8H8J4qQkh" data-animator-group="true" data-animator-type="0"><circle id="el_UTiwSL6G_B" cx="256.5" cy="255.5" r="22.5"></circle></g><g id="el_RD1ROxlE21_an_5QZ2F-FOJ" data-animator-group="true" data-animator-type="0"><circle id="el_RD1ROxlE21" cx="256.5" cy="255.5" r="22.5"></circle></g><g id="el_MYcMc4Akv4_an_pzn4i-FHd" data-animator-group="true" data-animator-type="0"><circle id="el_MYcMc4Akv4" cx="256.5" cy="255.5" r="22.5"></circle></g><g id="el_6YotClCzoX_an_qmt3IGADS" data-animator-group="true" data-animator-type="0"><circle id="el_6YotClCzoX" cx="256.5" cy="255.5" r="22.5"></circle></g>',10),Eke=[Ske],Tke=yi({__name:"AsParticleLoader",props:{size:{type:String,default:"1rem",validator:r=>{const{error:e}=gc(),n=/^([0-9]*\.?[0-9]+)(em|rem|px|%|)$/.test(r);return n||e(`Invalid size specified "${r}". Valid units are em|rem|px|%`),n}}},setup(r){return(e,n)=>(Ge(),Ct("i",kke,[(Ge(),Ct("svg",{id:"el_cwYysRMuh",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:r.size,fill:"currentColor",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},Eke,8,Cke))]))}}),Mke=Object.freeze(Object.defineProperty({__proto__:null,default:Tke},Symbol.toStringTag,{value:"Module"}));var CT=(r=>(r.ROW="row",r.REVERSE="reverse",r))(CT||{});const Ake={class:"relative w-full sm:w-1/2 py-4 min-h-300px sm:min-h-375px"},Lke=yi({__name:"AsTextImage",props:{media:{type:Object,default:null},direction:{type:String,default:CT.ROW}},setup(r){const e=r,n=Ht(()=>e.direction===CT.REVERSE);return(s,a)=>(Ge(),Ct("div",{class:er(["flex",ft(n)?"important-flex-col-reverse sm:important-flex-row-reverse":"important-flex-col sm:important-flex-row"])},[G("div",Ake,[Bt(VV,{class:er(["absolute top-16 scale-75",ft(n)?"right-0":"left-0"])},null,8,["class"]),G("div",{class:er(["absolute w-2/3 rounded-xl",ft(n)?"left-0":"right-0"])},[Bt(d6,{class:"shadow-lg",src:r.media.src,alt:r.media.alt,"aspect-ratio":r.media.aspectRatio},null,8,["src","alt","aspect-ratio"])],2)]),G("div",{class:er(["w-full sm:w-1/2 prose",ft(n)?"sm:pr-16":"sm:pl-16"])},[yr(s.$slots,"default")],2)],2))}}),Rke=Object.freeze(Object.defineProperty({__proto__:null,default:Lke},Symbol.toStringTag,{value:"Module"})),Pke={provider:"google",fonts:{sans:["Nunito","Nunito:400,700"],mono:["Fira Code","Fira Code:400,700"],display:["Gilroy"]}},Ike={scale:1.2,warn:!0,extraProperties:{display:"inline-block","vertical-align":"middle"}},Dke={DEFAULT:"#3E5166",50:"#B7C4D3",100:"#A7B7C9",200:"#879DB6",300:"#6784A3",400:"#516A86",500:"#3E5166",600:"#2B3846",700:"#171F27",800:"#040507",900:"#000000"},Nke={DEFAULT:"#34D399",50:"#F1FCF8",100:"#DCF7ED",200:"#B2EED8",300:"#88E5C3",400:"#5EDCAE",500:"#34D399",600:"#26AE7C",700:"#1D845F",800:"#145A41",900:"#0B3023"},_p={colors:{primary:Dke,secondary:Nke},breakpoints:{xs:"320px",sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},boxShadow:{active:"inset 4px 4px 2px 0 rgba(0, 0, 0, 0.08)",button:"4px 4px 1px 0px var(--un-shadow-color)"}},Oke=[["text-bg-md",{"background-image":"linear-gradient(to top, #99ffd580 54%, transparent 54%, transparent 100%)",width:"fit-content",transition:"all 400ms ease-in-out"}],["text-bg-sm",{"background-image":"linear-gradient(to top, #99ffd580 30%, transparent 30%, transparent 100%)",width:"fit-content",transition:"all 400ms ease-in-out"}],[/^line-height-(\d+)$/,([,r])=>({"line-height":`${parseInt(r)*.25}`})]],Fke=[{"headline-1":"font-display text-primary-400 dark:text-gray-200 text-4xl","headline-2":"font-display text-primary-400 dark:text-gray-200 text-2xl","headline-3":"font-display text-primary-400 dark:text-gray-200 text-xl"}],Bke=[...s3e,...Fke],qS={"font-family":"Gilroy"};var SN,EN,TN;const Vke={cssExtend:{h1:qS,h2:qS,h3:qS,p:{"font-family":"Nunito","font-size":"1.125rem"},code:{"font-family":"Fira Code","font-size":"0.875rem",color:`${(SN=_p==null?void 0:_p.colors)==null?void 0:SN.primary[500]} !important`},":not(pre)>code":{background:"#e8e8e8 !important",padding:"0.25rem 0.5rem !important"},blockquote:{padding:"1rem"},"code::after":{content:"none"},"code::before":{content:"none"},a:{color:(EN=_p==null?void 0:_p.colors)==null?void 0:EN.secondary[500],"font-weight":"bold","text-decoration":"none",transition:"color 400ms ease-in-out"},"a:hover":{color:(TN=_p==null?void 0:_p.colors)==null?void 0:TN.secondary[600],transition:"color 400ms ease-in-out"}}},Wke=Object.assign({"./components/as-badge/AsBadge.vue":r3e,"./components/as-button/AsButton.vue":c3e,"./components/as-card/AsCard.vue":y3e,"./components/as-codeblock/AsCodeBlock.vue":g5e,"./components/as-dark-mode-switch/AsDarkModeSwitch.vue":w5e,"./components/as-graphic/AsGraphic.vue":uke,"./components/as-icon/AsIcon.vue":n3e,"./components/as-img/AsImg.vue":h3e,"./components/as-modal/AsModal.vue":wke,"./components/as-particle-loader/AsParticleLoader.vue":Mke,"./components/as-text-image/AsTextImage.vue":Rke}),zke=Object.entries(Wke),Uke={unoconfig:{theme:_p,fonts:Pke,icons:Ike,shortcuts:Bke,typography:Vke,rules:Oke},install(r,e){const{info:n}=gc("[ AS \u{1F3A8}]");for(const[s,a]of zke){const u=s.replace(/^.*[\\/]/,"").replace(/\.vue$/,"");if(typeof e>"u")r.component(u,a.default);else{if(!(e instanceof Array))throw new TypeError("options must be an array");e.includes(u)&&r.component(u,a.default)}}n("\u2714")}},Gke=({app:r})=>{r.use(Uke)};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const X3="146",Hke={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Yke={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},WV=0,ST=1,zV=2,jke=3,$ke=0,m6=1,g6=2,tg=3,Gp=0,nl=1,yh=2,xh=0,Fp=1,ET=2,TT=3,MT=4,UV=5,Sp=100,GV=101,HV=102,AT=103,LT=104,YV=200,jV=201,$V=202,qV=203,v6=204,y6=205,XV=206,ZV=207,KV=208,JV=209,QV=210,eW=0,tW=1,nW=2,x3=3,iW=4,rW=5,sW=6,oW=7,v_=0,aW=1,lW=2,lu=0,cW=1,uW=2,hW=3,dW=4,fW=5,Z3=300,$d=301,qd=302,$y=303,qy=304,Rg=306,Xy=1e3,Uo=1001,Zy=1002,Ws=1003,w3=1004,qke=1004,k3=1005,Xke=1005,Es=1006,_6=1007,Zke=1007,Jp=1008,Kke=1008,Xd=1009,pW=1010,mW=1011,b6=1012,gW=1013,Id=1014,_h=1015,Cg=1016,vW=1017,yW=1018,Bp=1020,_W=1021,bW=1022,Qa=1023,xW=1024,wW=1025,Gd=1026,Hp=1027,kW=1028,CW=1029,SW=1030,EW=1031,TW=1033,Zw=33776,Kw=33777,Jw=33778,Qw=33779,RT=35840,PT=35841,IT=35842,DT=35843,MW=36196,NT=37492,OT=37496,FT=37808,BT=37809,VT=37810,WT=37811,zT=37812,UT=37813,GT=37814,HT=37815,YT=37816,jT=37817,$T=37818,qT=37819,XT=37820,ZT=37821,KT=36492,AW=2200,LW=2201,RW=2202,Ky=2300,Jy=2301,e3=2302,Lp=2400,Rp=2401,Qy=2402,K3=2500,x6=2501,Jke=0,Qke=1,e4e=2,Zd=3e3,as=3001,PW=3200,IW=3201,tf=0,DW=1,t4e="",nu="srgb",Dd="srgb-linear",n4e=0,t3=7680,i4e=7681,r4e=7682,s4e=7683,o4e=34055,a4e=34056,l4e=5386,c4e=512,u4e=513,h4e=514,d4e=515,f4e=516,p4e=517,m4e=518,NW=519,e_=35044,g4e=35048,v4e=35040,y4e=35045,_4e=35049,b4e=35041,x4e=35046,w4e=35050,k4e=35042,C4e="100",JT="300 es",C3=1035;class Rh{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(n)===-1&&s[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const s=this._listeners;return s[e]!==void 0&&s[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const u=a.indexOf(n);u!==-1&&a.splice(u,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const s=this._listeners[e.type];if(s!==void 0){e.target=this;const a=s.slice(0);for(let u=0,d=a.length;u<d;u++)a[u].call(this,e);e.target=null}}}const Vo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let MN=1234567;const Vp=Math.PI/180,t_=180/Math.PI;function il(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(Vo[r&255]+Vo[r>>8&255]+Vo[r>>16&255]+Vo[r>>24&255]+"-"+Vo[e&255]+Vo[e>>8&255]+"-"+Vo[e>>16&15|64]+Vo[e>>24&255]+"-"+Vo[n&63|128]+Vo[n>>8&255]+"-"+Vo[n>>16&255]+Vo[n>>24&255]+Vo[s&255]+Vo[s>>8&255]+Vo[s>>16&255]+Vo[s>>24&255]).toLowerCase()}function Ts(r,e,n){return Math.max(e,Math.min(n,r))}function w6(r,e){return(r%e+e)%e}function S4e(r,e,n,s,a){return s+(r-e)*(a-s)/(n-e)}function E4e(r,e,n){return r!==e?(n-r)/(e-r):0}function Ey(r,e,n){return(1-n)*r+n*e}function T4e(r,e,n,s){return Ey(r,e,1-Math.exp(-n*s))}function M4e(r,e=1){return e-Math.abs(w6(r,e*2)-e)}function A4e(r,e,n){return r<=e?0:r>=n?1:(r=(r-e)/(n-e),r*r*(3-2*r))}function L4e(r,e,n){return r<=e?0:r>=n?1:(r=(r-e)/(n-e),r*r*r*(r*(r*6-15)+10))}function R4e(r,e){return r+Math.floor(Math.random()*(e-r+1))}function P4e(r,e){return r+Math.random()*(e-r)}function I4e(r){return r*(.5-Math.random())}function D4e(r){r!==void 0&&(MN=r);let e=MN+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function N4e(r){return r*Vp}function O4e(r){return r*t_}function QT(r){return(r&r-1)===0&&r!==0}function OW(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function S3(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function F4e(r,e,n,s,a){const u=Math.cos,d=Math.sin,f=u(n/2),g=d(n/2),_=u((e+s)/2),y=d((e+s)/2),w=u((e-s)/2),k=d((e-s)/2),S=u((s-e)/2),A=d((s-e)/2);switch(a){case"XYX":r.set(f*y,g*w,g*k,f*_);break;case"YZY":r.set(g*k,f*y,g*w,f*_);break;case"ZXZ":r.set(g*w,g*k,f*y,f*_);break;case"XZX":r.set(f*y,g*A,g*S,f*_);break;case"YXY":r.set(g*S,f*y,g*A,f*_);break;case"ZYZ":r.set(g*A,g*S,f*y,f*_);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function bh(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Vr(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}var B4e=Object.freeze({__proto__:null,DEG2RAD:Vp,RAD2DEG:t_,generateUUID:il,clamp:Ts,euclideanModulo:w6,mapLinear:S4e,inverseLerp:E4e,lerp:Ey,damp:T4e,pingpong:M4e,smoothstep:A4e,smootherstep:L4e,randInt:R4e,randFloat:P4e,randFloatSpread:I4e,seededRandom:D4e,degToRad:N4e,radToDeg:O4e,isPowerOfTwo:QT,ceilPowerOfTwo:OW,floorPowerOfTwo:S3,setQuaternionFromProperEuler:F4e,normalize:Vr,denormalize:bh});class _n{constructor(e=0,n=0){_n.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,s=this.y,a=e.elements;return this.x=a[0]*n+a[3]*s+a[6],this.y=a[1]*n+a[4]*s+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,s=this.y-e.y;return n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const s=Math.cos(n),a=Math.sin(n),u=this.x-e.x,d=this.y-e.y;return this.x=u*s-d*a+e.x,this.y=u*a+d*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ca{constructor(){Ca.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,s,a,u,d,f,g,_){const y=this.elements;return y[0]=e,y[1]=a,y[2]=f,y[3]=n,y[4]=u,y[5]=g,y[6]=s,y[7]=d,y[8]=_,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,s=e.elements;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],this}extractBasis(e,n,s){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const s=e.elements,a=n.elements,u=this.elements,d=s[0],f=s[3],g=s[6],_=s[1],y=s[4],w=s[7],k=s[2],S=s[5],A=s[8],P=a[0],R=a[3],O=a[6],B=a[1],N=a[4],V=a[7],U=a[2],Y=a[5],X=a[8];return u[0]=d*P+f*B+g*U,u[3]=d*R+f*N+g*Y,u[6]=d*O+f*V+g*X,u[1]=_*P+y*B+w*U,u[4]=_*R+y*N+w*Y,u[7]=_*O+y*V+w*X,u[2]=k*P+S*B+A*U,u[5]=k*R+S*N+A*Y,u[8]=k*O+S*V+A*X,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],s=e[1],a=e[2],u=e[3],d=e[4],f=e[5],g=e[6],_=e[7],y=e[8];return n*d*y-n*f*_-s*u*y+s*f*g+a*u*_-a*d*g}invert(){const e=this.elements,n=e[0],s=e[1],a=e[2],u=e[3],d=e[4],f=e[5],g=e[6],_=e[7],y=e[8],w=y*d-f*_,k=f*g-y*u,S=_*u-d*g,A=n*w+s*k+a*S;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const P=1/A;return e[0]=w*P,e[1]=(a*_-y*s)*P,e[2]=(f*s-a*d)*P,e[3]=k*P,e[4]=(y*n-a*g)*P,e[5]=(a*u-f*n)*P,e[6]=S*P,e[7]=(s*g-_*n)*P,e[8]=(d*n-s*u)*P,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,s,a,u,d,f){const g=Math.cos(u),_=Math.sin(u);return this.set(s*g,s*_,-s*(g*d+_*f)+d+e,-a*_,a*g,-a*(-_*d+g*f)+f+n,0,0,1),this}scale(e,n){const s=this.elements;return s[0]*=e,s[3]*=e,s[6]*=e,s[1]*=n,s[4]*=n,s[7]*=n,this}rotate(e){const n=Math.cos(e),s=Math.sin(e),a=this.elements,u=a[0],d=a[3],f=a[6],g=a[1],_=a[4],y=a[7];return a[0]=n*u+s*g,a[3]=n*d+s*_,a[6]=n*f+s*y,a[1]=-s*u+n*g,a[4]=-s*d+n*_,a[7]=-s*f+n*y,this}translate(e,n){const s=this.elements;return s[0]+=e*s[2],s[3]+=e*s[5],s[6]+=e*s[8],s[1]+=n*s[2],s[4]+=n*s[5],s[7]+=n*s[8],this}equals(e){const n=this.elements,s=e.elements;for(let a=0;a<9;a++)if(n[a]!==s[a])return!1;return!0}fromArray(e,n=0){for(let s=0;s<9;s++)this.elements[s]=e[s+n];return this}toArray(e=[],n=0){const s=this.elements;return e[n]=s[0],e[n+1]=s[1],e[n+2]=s[2],e[n+3]=s[3],e[n+4]=s[4],e[n+5]=s[5],e[n+6]=s[6],e[n+7]=s[7],e[n+8]=s[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function FW(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const V4e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ng(r,e){return new V4e[r](e)}function n_(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Wp(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function n3(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}const XS={[nu]:{[Dd]:Wp},[Dd]:{[nu]:n3}},bl={legacyMode:!0,get workingColorSpace(){return Dd},set workingColorSpace(r){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(r,e,n){if(this.legacyMode||e===n||!e||!n)return r;if(XS[e]&&XS[e][n]!==void 0){const s=XS[e][n];return r.r=s(r.r),r.g=s(r.g),r.b=s(r.b),r}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(r,e){return this.convert(r,this.workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this.workingColorSpace)}},BW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xs={r:0,g:0,b:0},oc={h:0,s:0,l:0},Jx={h:0,s:0,l:0};function ZS(r,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(e-r)*6*n:n<1/2?e:n<2/3?r+(e-r)*6*(2/3-n):r}function Qx(r,e){return e.r=r.r,e.g=r.g,e.b=r.b,e}class qn{constructor(e,n,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&s===void 0?this.set(e):this.setRGB(e,n,s)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=nu){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,bl.toWorkingColorSpace(this,n),this}setRGB(e,n,s,a=Dd){return this.r=e,this.g=n,this.b=s,bl.toWorkingColorSpace(this,a),this}setHSL(e,n,s,a=Dd){if(e=w6(e,1),n=Ts(n,0,1),s=Ts(s,0,1),n===0)this.r=this.g=this.b=s;else{const u=s<=.5?s*(1+n):s+n-s*n,d=2*s-u;this.r=ZS(d,u,e+1/3),this.g=ZS(d,u,e),this.b=ZS(d,u,e-1/3)}return bl.toWorkingColorSpace(this,a),this}setStyle(e,n=nu){function s(u){u!==void 0&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let u;const d=a[1],f=a[2];switch(d){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return this.r=Math.min(255,parseInt(u[1],10))/255,this.g=Math.min(255,parseInt(u[2],10))/255,this.b=Math.min(255,parseInt(u[3],10))/255,bl.toWorkingColorSpace(this,n),s(u[4]),this;if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return this.r=Math.min(100,parseInt(u[1],10))/100,this.g=Math.min(100,parseInt(u[2],10))/100,this.b=Math.min(100,parseInt(u[3],10))/100,bl.toWorkingColorSpace(this,n),s(u[4]),this;break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f)){const g=parseFloat(u[1])/360,_=parseFloat(u[2])/100,y=parseFloat(u[3])/100;return s(u[4]),this.setHSL(g,_,y,n)}break}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const u=a[1],d=u.length;if(d===3)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,bl.toWorkingColorSpace(this,n),this;if(d===6)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,bl.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=nu){const s=BW[e.toLowerCase()];return s!==void 0?this.setHex(s,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Wp(e.r),this.g=Wp(e.g),this.b=Wp(e.b),this}copyLinearToSRGB(e){return this.r=n3(e.r),this.g=n3(e.g),this.b=n3(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=nu){return bl.fromWorkingColorSpace(Qx(this,Xs),e),Ts(Xs.r*255,0,255)<<16^Ts(Xs.g*255,0,255)<<8^Ts(Xs.b*255,0,255)<<0}getHexString(e=nu){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Dd){bl.fromWorkingColorSpace(Qx(this,Xs),n);const s=Xs.r,a=Xs.g,u=Xs.b,d=Math.max(s,a,u),f=Math.min(s,a,u);let g,_;const y=(f+d)/2;if(f===d)g=0,_=0;else{const w=d-f;switch(_=y<=.5?w/(d+f):w/(2-d-f),d){case s:g=(a-u)/w+(a<u?6:0);break;case a:g=(u-s)/w+2;break;case u:g=(s-a)/w+4;break}g/=6}return e.h=g,e.s=_,e.l=y,e}getRGB(e,n=Dd){return bl.fromWorkingColorSpace(Qx(this,Xs),n),e.r=Xs.r,e.g=Xs.g,e.b=Xs.b,e}getStyle(e=nu){return bl.fromWorkingColorSpace(Qx(this,Xs),e),e!==nu?`color(${e} ${Xs.r} ${Xs.g} ${Xs.b})`:`rgb(${Xs.r*255|0},${Xs.g*255|0},${Xs.b*255|0})`}offsetHSL(e,n,s){return this.getHSL(oc),oc.h+=e,oc.s+=n,oc.l+=s,this.setHSL(oc.h,oc.s,oc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,s){return this.r=e.r+(n.r-e.r)*s,this.g=e.g+(n.g-e.g)*s,this.b=e.b+(n.b-e.b)*s,this}lerpHSL(e,n){this.getHSL(oc),e.getHSL(Jx);const s=Ey(oc.h,Jx.h,n),a=Ey(oc.s,Jx.s,n),u=Ey(oc.l,Jx.l,n);return this.setHSL(s,a,u),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}qn.NAMES=BW;let P0;class k6{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{P0===void 0&&(P0=n_("canvas")),P0.width=e.width,P0.height=e.height;const s=P0.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=P0}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=n_("canvas");n.width=e.width,n.height=e.height;const s=n.getContext("2d");s.drawImage(e,0,0,e.width,e.height);const a=s.getImageData(0,0,e.width,e.height),u=a.data;for(let d=0;d<u.length;d++)u[d]=Wp(u[d]/255)*255;return s.putImageData(a,0,0),n}else if(e.data){const n=e.data.slice(0);for(let s=0;s<n.length;s++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[s]=Math.floor(Wp(n[s]/255)*255):n[s]=Wp(n[s]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Pp{constructor(e=null){this.isSource=!0,this.uuid=il(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const s={uuid:this.uuid,url:""},a=this.data;if(a!==null){let u;if(Array.isArray(a)){u=[];for(let d=0,f=a.length;d<f;d++)a[d].isDataTexture?u.push(KS(a[d].image)):u.push(KS(a[d]))}else u=KS(a);s.url=u}return n||(e.images[this.uuid]=s),s}}function KS(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?k6.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let W4e=0;class to extends Rh{constructor(e=to.DEFAULT_IMAGE,n=to.DEFAULT_MAPPING,s=Uo,a=Uo,u=Es,d=Jp,f=Qa,g=Xd,_=1,y=Zd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:W4e++}),this.uuid=il(),this.name="",this.source=new Pp(e),this.mipmaps=[],this.mapping=n,this.wrapS=s,this.wrapT=a,this.magFilter=u,this.minFilter=d,this.anisotropy=_,this.format=f,this.internalFormat=null,this.type=g,this.offset=new _n(0,0),this.repeat=new _n(1,1),this.center=new _n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ca,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=y,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),n||(e.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Z3)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Xy:e.x=e.x-Math.floor(e.x);break;case Uo:e.x=e.x<0?0:1;break;case Zy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Xy:e.y=e.y-Math.floor(e.y);break;case Uo:e.y=e.y<0?0:1;break;case Zy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}to.DEFAULT_IMAGE=null;to.DEFAULT_MAPPING=Z3;class Ar{constructor(e=0,n=0,s=0,a=1){Ar.prototype.isVector4=!0,this.x=e,this.y=n,this.z=s,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,s,a){return this.x=e,this.y=n,this.z=s,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,s=this.y,a=this.z,u=this.w,d=e.elements;return this.x=d[0]*n+d[4]*s+d[8]*a+d[12]*u,this.y=d[1]*n+d[5]*s+d[9]*a+d[13]*u,this.z=d[2]*n+d[6]*s+d[10]*a+d[14]*u,this.w=d[3]*n+d[7]*s+d[11]*a+d[15]*u,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,s,a,u;const g=e.elements,_=g[0],y=g[4],w=g[8],k=g[1],S=g[5],A=g[9],P=g[2],R=g[6],O=g[10];if(Math.abs(y-k)<.01&&Math.abs(w-P)<.01&&Math.abs(A-R)<.01){if(Math.abs(y+k)<.1&&Math.abs(w+P)<.1&&Math.abs(A+R)<.1&&Math.abs(_+S+O-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const N=(_+1)/2,V=(S+1)/2,U=(O+1)/2,Y=(y+k)/4,X=(w+P)/4,$=(A+R)/4;return N>V&&N>U?N<.01?(s=0,a=.707106781,u=.707106781):(s=Math.sqrt(N),a=Y/s,u=X/s):V>U?V<.01?(s=.707106781,a=0,u=.707106781):(a=Math.sqrt(V),s=Y/a,u=$/a):U<.01?(s=.707106781,a=.707106781,u=0):(u=Math.sqrt(U),s=X/u,a=$/u),this.set(s,a,u,n),this}let B=Math.sqrt((R-A)*(R-A)+(w-P)*(w-P)+(k-y)*(k-y));return Math.abs(B)<.001&&(B=1),this.x=(R-A)/B,this.y=(w-P)/B,this.z=(k-y)/B,this.w=Math.acos((_+S+O-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this.z=e.z+(n.z-e.z)*s,this.w=e.w+(n.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Tl extends Rh{constructor(e=1,n=1,s={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Ar(0,0,e,n),this.scissorTest=!1,this.viewport=new Ar(0,0,e,n);const a={width:e,height:n,depth:1};this.texture=new to(a,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=s.generateMipmaps!==void 0?s.generateMipmaps:!1,this.texture.internalFormat=s.internalFormat!==void 0?s.internalFormat:null,this.texture.minFilter=s.minFilter!==void 0?s.minFilter:Es,this.depthBuffer=s.depthBuffer!==void 0?s.depthBuffer:!0,this.stencilBuffer=s.stencilBuffer!==void 0?s.stencilBuffer:!1,this.depthTexture=s.depthTexture!==void 0?s.depthTexture:null,this.samples=s.samples!==void 0?s.samples:0}setSize(e,n,s=1){(this.width!==e||this.height!==n||this.depth!==s)&&(this.width=e,this.height=n,this.depth=s,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Pp(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class y_ extends to{constructor(e=null,n=1,s=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:s,depth:a},this.magFilter=Ws,this.minFilter=Ws,this.wrapR=Uo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class z4e extends Tl{constructor(e=1,n=1,s=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=s,this.texture=new y_(null,e,n,s),this.texture.isRenderTargetTexture=!0}}class J3 extends to{constructor(e=null,n=1,s=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:s,depth:a},this.magFilter=Ws,this.minFilter=Ws,this.wrapR=Uo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class U4e extends Tl{constructor(e=1,n=1,s=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=s,this.texture=new J3(null,e,n,s),this.texture.isRenderTargetTexture=!0}}class G4e extends Tl{constructor(e=1,n=1,s=1,a={}){super(e,n,a),this.isWebGLMultipleRenderTargets=!0;const u=this.texture;this.texture=[];for(let d=0;d<s;d++)this.texture[d]=u.clone(),this.texture[d].isRenderTargetTexture=!0}setSize(e,n,s=1){if(this.width!==e||this.height!==n||this.depth!==s){this.width=e,this.height=n,this.depth=s;for(let a=0,u=this.texture.length;a<u;a++)this.texture[a].image.width=e,this.texture[a].image.height=n,this.texture[a].image.depth=s;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,s=e.texture.length;n<s;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Ea{constructor(e=0,n=0,s=0,a=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=s,this._w=a}static slerpFlat(e,n,s,a,u,d,f){let g=s[a+0],_=s[a+1],y=s[a+2],w=s[a+3];const k=u[d+0],S=u[d+1],A=u[d+2],P=u[d+3];if(f===0){e[n+0]=g,e[n+1]=_,e[n+2]=y,e[n+3]=w;return}if(f===1){e[n+0]=k,e[n+1]=S,e[n+2]=A,e[n+3]=P;return}if(w!==P||g!==k||_!==S||y!==A){let R=1-f;const O=g*k+_*S+y*A+w*P,B=O>=0?1:-1,N=1-O*O;if(N>Number.EPSILON){const U=Math.sqrt(N),Y=Math.atan2(U,O*B);R=Math.sin(R*Y)/U,f=Math.sin(f*Y)/U}const V=f*B;if(g=g*R+k*V,_=_*R+S*V,y=y*R+A*V,w=w*R+P*V,R===1-f){const U=1/Math.sqrt(g*g+_*_+y*y+w*w);g*=U,_*=U,y*=U,w*=U}}e[n]=g,e[n+1]=_,e[n+2]=y,e[n+3]=w}static multiplyQuaternionsFlat(e,n,s,a,u,d){const f=s[a],g=s[a+1],_=s[a+2],y=s[a+3],w=u[d],k=u[d+1],S=u[d+2],A=u[d+3];return e[n]=f*A+y*w+g*S-_*k,e[n+1]=g*A+y*k+_*w-f*S,e[n+2]=_*A+y*S+f*k-g*w,e[n+3]=y*A-f*w-g*k-_*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,s,a){return this._x=e,this._y=n,this._z=s,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const s=e._x,a=e._y,u=e._z,d=e._order,f=Math.cos,g=Math.sin,_=f(s/2),y=f(a/2),w=f(u/2),k=g(s/2),S=g(a/2),A=g(u/2);switch(d){case"XYZ":this._x=k*y*w+_*S*A,this._y=_*S*w-k*y*A,this._z=_*y*A+k*S*w,this._w=_*y*w-k*S*A;break;case"YXZ":this._x=k*y*w+_*S*A,this._y=_*S*w-k*y*A,this._z=_*y*A-k*S*w,this._w=_*y*w+k*S*A;break;case"ZXY":this._x=k*y*w-_*S*A,this._y=_*S*w+k*y*A,this._z=_*y*A+k*S*w,this._w=_*y*w-k*S*A;break;case"ZYX":this._x=k*y*w-_*S*A,this._y=_*S*w+k*y*A,this._z=_*y*A-k*S*w,this._w=_*y*w+k*S*A;break;case"YZX":this._x=k*y*w+_*S*A,this._y=_*S*w+k*y*A,this._z=_*y*A-k*S*w,this._w=_*y*w-k*S*A;break;case"XZY":this._x=k*y*w-_*S*A,this._y=_*S*w-k*y*A,this._z=_*y*A+k*S*w,this._w=_*y*w+k*S*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const s=n/2,a=Math.sin(s);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,s=n[0],a=n[4],u=n[8],d=n[1],f=n[5],g=n[9],_=n[2],y=n[6],w=n[10],k=s+f+w;if(k>0){const S=.5/Math.sqrt(k+1);this._w=.25/S,this._x=(y-g)*S,this._y=(u-_)*S,this._z=(d-a)*S}else if(s>f&&s>w){const S=2*Math.sqrt(1+s-f-w);this._w=(y-g)/S,this._x=.25*S,this._y=(a+d)/S,this._z=(u+_)/S}else if(f>w){const S=2*Math.sqrt(1+f-s-w);this._w=(u-_)/S,this._x=(a+d)/S,this._y=.25*S,this._z=(g+y)/S}else{const S=2*Math.sqrt(1+w-s-f);this._w=(d-a)/S,this._x=(u+_)/S,this._y=(g+y)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let s=e.dot(n)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ts(this.dot(e),-1,1)))}rotateTowards(e,n){const s=this.angleTo(e);if(s===0)return this;const a=Math.min(1,n/s);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const s=e._x,a=e._y,u=e._z,d=e._w,f=n._x,g=n._y,_=n._z,y=n._w;return this._x=s*y+d*f+a*_-u*g,this._y=a*y+d*g+u*f-s*_,this._z=u*y+d*_+s*g-a*f,this._w=d*y-s*f-a*g-u*_,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const s=this._x,a=this._y,u=this._z,d=this._w;let f=d*e._w+s*e._x+a*e._y+u*e._z;if(f<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,f=-f):this.copy(e),f>=1)return this._w=d,this._x=s,this._y=a,this._z=u,this;const g=1-f*f;if(g<=Number.EPSILON){const S=1-n;return this._w=S*d+n*this._w,this._x=S*s+n*this._x,this._y=S*a+n*this._y,this._z=S*u+n*this._z,this.normalize(),this._onChangeCallback(),this}const _=Math.sqrt(g),y=Math.atan2(_,f),w=Math.sin((1-n)*y)/_,k=Math.sin(n*y)/_;return this._w=d*w+this._w*k,this._x=s*w+this._x*k,this._y=a*w+this._y*k,this._z=u*w+this._z*k,this._onChangeCallback(),this}slerpQuaternions(e,n,s){return this.copy(e).slerp(n,s)}random(){const e=Math.random(),n=Math.sqrt(1-e),s=Math.sqrt(e),a=2*Math.PI*Math.random(),u=2*Math.PI*Math.random();return this.set(n*Math.cos(a),s*Math.sin(u),s*Math.cos(u),n*Math.sin(a))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Re{constructor(e=0,n=0,s=0){Re.prototype.isVector3=!0,this.x=e,this.y=n,this.z=s}set(e,n,s){return s===void 0&&(s=this.z),this.x=e,this.y=n,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(AN.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(AN.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,s=this.y,a=this.z,u=e.elements;return this.x=u[0]*n+u[3]*s+u[6]*a,this.y=u[1]*n+u[4]*s+u[7]*a,this.z=u[2]*n+u[5]*s+u[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,s=this.y,a=this.z,u=e.elements,d=1/(u[3]*n+u[7]*s+u[11]*a+u[15]);return this.x=(u[0]*n+u[4]*s+u[8]*a+u[12])*d,this.y=(u[1]*n+u[5]*s+u[9]*a+u[13])*d,this.z=(u[2]*n+u[6]*s+u[10]*a+u[14])*d,this}applyQuaternion(e){const n=this.x,s=this.y,a=this.z,u=e.x,d=e.y,f=e.z,g=e.w,_=g*n+d*a-f*s,y=g*s+f*n-u*a,w=g*a+u*s-d*n,k=-u*n-d*s-f*a;return this.x=_*g+k*-u+y*-f-w*-d,this.y=y*g+k*-d+w*-u-_*-f,this.z=w*g+k*-f+_*-d-y*-u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,s=this.y,a=this.z,u=e.elements;return this.x=u[0]*n+u[4]*s+u[8]*a,this.y=u[1]*n+u[5]*s+u[9]*a,this.z=u[2]*n+u[6]*s+u[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this.z=e.z+(n.z-e.z)*s,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const s=e.x,a=e.y,u=e.z,d=n.x,f=n.y,g=n.z;return this.x=a*g-u*f,this.y=u*d-s*g,this.z=s*f-a*d,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const s=e.dot(this)/n;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return JS.copy(this).projectOnVector(e),this.sub(JS)}reflect(e){return this.sub(JS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const s=this.dot(e)/n;return Math.acos(Ts(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,s=this.y-e.y,a=this.z-e.z;return n*n+s*s+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,s){const a=Math.sin(n)*e;return this.x=a*Math.sin(s),this.y=Math.cos(n)*e,this.z=a*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,s){return this.x=e*Math.sin(n),this.y=s,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=s,this.z=a,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,s=Math.sqrt(1-e**2);return this.x=s*Math.cos(n),this.y=s*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const JS=new Re,AN=new Ea;class Qp{constructor(e=new Re(1/0,1/0,1/0),n=new Re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,s=1/0,a=1/0,u=-1/0,d=-1/0,f=-1/0;for(let g=0,_=e.length;g<_;g+=3){const y=e[g],w=e[g+1],k=e[g+2];y<n&&(n=y),w<s&&(s=w),k<a&&(a=k),y>u&&(u=y),w>d&&(d=w),k>f&&(f=k)}return this.min.set(n,s,a),this.max.set(u,d,f),this}setFromBufferAttribute(e){let n=1/0,s=1/0,a=1/0,u=-1/0,d=-1/0,f=-1/0;for(let g=0,_=e.count;g<_;g++){const y=e.getX(g),w=e.getY(g),k=e.getZ(g);y<n&&(n=y),w<s&&(s=w),k<a&&(a=k),y>u&&(u=y),w>d&&(d=w),k>f&&(f=k)}return this.min.set(n,s,a),this.max.set(u,d,f),this}setFromPoints(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const s=op.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const s=e.geometry;if(s!==void 0)if(n&&s.attributes!=null&&s.attributes.position!==void 0){const u=s.attributes.position;for(let d=0,f=u.count;d<f;d++)op.fromBufferAttribute(u,d).applyMatrix4(e.matrixWorld),this.expandByPoint(op)}else s.boundingBox===null&&s.computeBoundingBox(),QS.copy(s.boundingBox),QS.applyMatrix4(e.matrixWorld),this.union(QS);const a=e.children;for(let u=0,d=a.length;u<d;u++)this.expandByObject(a[u],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,op),op.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,s;return e.normal.x>0?(n=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),n<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ey),ew.subVectors(this.max,ey),I0.subVectors(e.a,ey),D0.subVectors(e.b,ey),N0.subVectors(e.c,ey),wd.subVectors(D0,I0),kd.subVectors(N0,D0),ap.subVectors(I0,N0);let n=[0,-wd.z,wd.y,0,-kd.z,kd.y,0,-ap.z,ap.y,wd.z,0,-wd.x,kd.z,0,-kd.x,ap.z,0,-ap.x,-wd.y,wd.x,0,-kd.y,kd.x,0,-ap.y,ap.x,0];return!eE(n,I0,D0,N0,ew)||(n=[1,0,0,0,1,0,0,0,1],!eE(n,I0,D0,N0,ew))?!1:(tw.crossVectors(wd,kd),n=[tw.x,tw.y,tw.z],eE(n,I0,D0,N0,ew))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return op.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(op).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(oh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),oh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),oh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),oh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),oh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),oh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),oh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),oh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(oh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oh=[new Re,new Re,new Re,new Re,new Re,new Re,new Re,new Re],op=new Re,QS=new Qp,I0=new Re,D0=new Re,N0=new Re,wd=new Re,kd=new Re,ap=new Re,ey=new Re,ew=new Re,tw=new Re,lp=new Re;function eE(r,e,n,s,a){for(let u=0,d=r.length-3;u<=d;u+=3){lp.fromArray(r,u);const f=a.x*Math.abs(lp.x)+a.y*Math.abs(lp.y)+a.z*Math.abs(lp.z),g=e.dot(lp),_=n.dot(lp),y=s.dot(lp);if(Math.max(-Math.max(g,_,y),Math.min(g,_,y))>f)return!1}return!0}const H4e=new Qp,ty=new Re,tE=new Re;class em{constructor(e=new Re,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const s=this.center;n!==void 0?s.copy(n):H4e.setFromPoints(e).getCenter(s);let a=0;for(let u=0,d=e.length;u<d;u++)a=Math.max(a,s.distanceToSquared(e[u]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const s=this.center.distanceToSquared(e);return n.copy(e),s>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ty.subVectors(e,this.center);const n=ty.lengthSq();if(n>this.radius*this.radius){const s=Math.sqrt(n),a=(s-this.radius)*.5;this.center.addScaledVector(ty,a/s),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(tE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ty.copy(e.center).add(tE)),this.expandByPoint(ty.copy(e.center).sub(tE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ah=new Re,nE=new Re,nw=new Re,Cd=new Re,iE=new Re,iw=new Re,rE=new Re;class __{constructor(e=new Re,n=new Re(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ah)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const s=n.dot(this.direction);return s<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(s).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=ah.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(ah.copy(this.direction).multiplyScalar(n).add(this.origin),ah.distanceToSquared(e))}distanceSqToSegment(e,n,s,a){nE.copy(e).add(n).multiplyScalar(.5),nw.copy(n).sub(e).normalize(),Cd.copy(this.origin).sub(nE);const u=e.distanceTo(n)*.5,d=-this.direction.dot(nw),f=Cd.dot(this.direction),g=-Cd.dot(nw),_=Cd.lengthSq(),y=Math.abs(1-d*d);let w,k,S,A;if(y>0)if(w=d*g-f,k=d*f-g,A=u*y,w>=0)if(k>=-A)if(k<=A){const P=1/y;w*=P,k*=P,S=w*(w+d*k+2*f)+k*(d*w+k+2*g)+_}else k=u,w=Math.max(0,-(d*k+f)),S=-w*w+k*(k+2*g)+_;else k=-u,w=Math.max(0,-(d*k+f)),S=-w*w+k*(k+2*g)+_;else k<=-A?(w=Math.max(0,-(-d*u+f)),k=w>0?-u:Math.min(Math.max(-u,-g),u),S=-w*w+k*(k+2*g)+_):k<=A?(w=0,k=Math.min(Math.max(-u,-g),u),S=k*(k+2*g)+_):(w=Math.max(0,-(d*u+f)),k=w>0?u:Math.min(Math.max(-u,-g),u),S=-w*w+k*(k+2*g)+_);else k=d>0?-u:u,w=Math.max(0,-(d*k+f)),S=-w*w+k*(k+2*g)+_;return s&&s.copy(this.direction).multiplyScalar(w).add(this.origin),a&&a.copy(nw).multiplyScalar(k).add(nE),S}intersectSphere(e,n){ah.subVectors(e.center,this.origin);const s=ah.dot(this.direction),a=ah.dot(ah)-s*s,u=e.radius*e.radius;if(a>u)return null;const d=Math.sqrt(u-a),f=s-d,g=s+d;return f<0&&g<0?null:f<0?this.at(g,n):this.at(f,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/n;return s>=0?s:null}intersectPlane(e,n){const s=this.distanceToPlane(e);return s===null?null:this.at(s,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let s,a,u,d,f,g;const _=1/this.direction.x,y=1/this.direction.y,w=1/this.direction.z,k=this.origin;return _>=0?(s=(e.min.x-k.x)*_,a=(e.max.x-k.x)*_):(s=(e.max.x-k.x)*_,a=(e.min.x-k.x)*_),y>=0?(u=(e.min.y-k.y)*y,d=(e.max.y-k.y)*y):(u=(e.max.y-k.y)*y,d=(e.min.y-k.y)*y),s>d||u>a||((u>s||isNaN(s))&&(s=u),(d<a||isNaN(a))&&(a=d),w>=0?(f=(e.min.z-k.z)*w,g=(e.max.z-k.z)*w):(f=(e.max.z-k.z)*w,g=(e.min.z-k.z)*w),s>g||f>a)||((f>s||s!==s)&&(s=f),(g<a||a!==a)&&(a=g),a<0)?null:this.at(s>=0?s:a,n)}intersectsBox(e){return this.intersectBox(e,ah)!==null}intersectTriangle(e,n,s,a,u){iE.subVectors(n,e),iw.subVectors(s,e),rE.crossVectors(iE,iw);let d=this.direction.dot(rE),f;if(d>0){if(a)return null;f=1}else if(d<0)f=-1,d=-d;else return null;Cd.subVectors(this.origin,e);const g=f*this.direction.dot(iw.crossVectors(Cd,iw));if(g<0)return null;const _=f*this.direction.dot(iE.cross(Cd));if(_<0||g+_>d)return null;const y=-f*Cd.dot(rE);return y<0?null:this.at(y/d,u)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Yi{constructor(){Yi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,s,a,u,d,f,g,_,y,w,k,S,A,P,R){const O=this.elements;return O[0]=e,O[4]=n,O[8]=s,O[12]=a,O[1]=u,O[5]=d,O[9]=f,O[13]=g,O[2]=_,O[6]=y,O[10]=w,O[14]=k,O[3]=S,O[7]=A,O[11]=P,O[15]=R,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yi().fromArray(this.elements)}copy(e){const n=this.elements,s=e.elements;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],this}copyPosition(e){const n=this.elements,s=e.elements;return n[12]=s[12],n[13]=s[13],n[14]=s[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,s){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,n,s){return this.set(e.x,n.x,s.x,0,e.y,n.y,s.y,0,e.z,n.z,s.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,s=e.elements,a=1/O0.setFromMatrixColumn(e,0).length(),u=1/O0.setFromMatrixColumn(e,1).length(),d=1/O0.setFromMatrixColumn(e,2).length();return n[0]=s[0]*a,n[1]=s[1]*a,n[2]=s[2]*a,n[3]=0,n[4]=s[4]*u,n[5]=s[5]*u,n[6]=s[6]*u,n[7]=0,n[8]=s[8]*d,n[9]=s[9]*d,n[10]=s[10]*d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,s=e.x,a=e.y,u=e.z,d=Math.cos(s),f=Math.sin(s),g=Math.cos(a),_=Math.sin(a),y=Math.cos(u),w=Math.sin(u);if(e.order==="XYZ"){const k=d*y,S=d*w,A=f*y,P=f*w;n[0]=g*y,n[4]=-g*w,n[8]=_,n[1]=S+A*_,n[5]=k-P*_,n[9]=-f*g,n[2]=P-k*_,n[6]=A+S*_,n[10]=d*g}else if(e.order==="YXZ"){const k=g*y,S=g*w,A=_*y,P=_*w;n[0]=k+P*f,n[4]=A*f-S,n[8]=d*_,n[1]=d*w,n[5]=d*y,n[9]=-f,n[2]=S*f-A,n[6]=P+k*f,n[10]=d*g}else if(e.order==="ZXY"){const k=g*y,S=g*w,A=_*y,P=_*w;n[0]=k-P*f,n[4]=-d*w,n[8]=A+S*f,n[1]=S+A*f,n[5]=d*y,n[9]=P-k*f,n[2]=-d*_,n[6]=f,n[10]=d*g}else if(e.order==="ZYX"){const k=d*y,S=d*w,A=f*y,P=f*w;n[0]=g*y,n[4]=A*_-S,n[8]=k*_+P,n[1]=g*w,n[5]=P*_+k,n[9]=S*_-A,n[2]=-_,n[6]=f*g,n[10]=d*g}else if(e.order==="YZX"){const k=d*g,S=d*_,A=f*g,P=f*_;n[0]=g*y,n[4]=P-k*w,n[8]=A*w+S,n[1]=w,n[5]=d*y,n[9]=-f*y,n[2]=-_*y,n[6]=S*w+A,n[10]=k-P*w}else if(e.order==="XZY"){const k=d*g,S=d*_,A=f*g,P=f*_;n[0]=g*y,n[4]=-w,n[8]=_*y,n[1]=k*w+P,n[5]=d*y,n[9]=S*w-A,n[2]=A*w-S,n[6]=f*y,n[10]=P*w+k}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Y4e,e,j4e)}lookAt(e,n,s){const a=this.elements;return ja.subVectors(e,n),ja.lengthSq()===0&&(ja.z=1),ja.normalize(),Sd.crossVectors(s,ja),Sd.lengthSq()===0&&(Math.abs(s.z)===1?ja.x+=1e-4:ja.z+=1e-4,ja.normalize(),Sd.crossVectors(s,ja)),Sd.normalize(),rw.crossVectors(ja,Sd),a[0]=Sd.x,a[4]=rw.x,a[8]=ja.x,a[1]=Sd.y,a[5]=rw.y,a[9]=ja.y,a[2]=Sd.z,a[6]=rw.z,a[10]=ja.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const s=e.elements,a=n.elements,u=this.elements,d=s[0],f=s[4],g=s[8],_=s[12],y=s[1],w=s[5],k=s[9],S=s[13],A=s[2],P=s[6],R=s[10],O=s[14],B=s[3],N=s[7],V=s[11],U=s[15],Y=a[0],X=a[4],$=a[8],ee=a[12],ue=a[1],Te=a[5],De=a[9],$e=a[13],Ue=a[2],it=a[6],tt=a[10],St=a[14],ve=a[3],ne=a[7],me=a[11],qe=a[15];return u[0]=d*Y+f*ue+g*Ue+_*ve,u[4]=d*X+f*Te+g*it+_*ne,u[8]=d*$+f*De+g*tt+_*me,u[12]=d*ee+f*$e+g*St+_*qe,u[1]=y*Y+w*ue+k*Ue+S*ve,u[5]=y*X+w*Te+k*it+S*ne,u[9]=y*$+w*De+k*tt+S*me,u[13]=y*ee+w*$e+k*St+S*qe,u[2]=A*Y+P*ue+R*Ue+O*ve,u[6]=A*X+P*Te+R*it+O*ne,u[10]=A*$+P*De+R*tt+O*me,u[14]=A*ee+P*$e+R*St+O*qe,u[3]=B*Y+N*ue+V*Ue+U*ve,u[7]=B*X+N*Te+V*it+U*ne,u[11]=B*$+N*De+V*tt+U*me,u[15]=B*ee+N*$e+V*St+U*qe,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],s=e[4],a=e[8],u=e[12],d=e[1],f=e[5],g=e[9],_=e[13],y=e[2],w=e[6],k=e[10],S=e[14],A=e[3],P=e[7],R=e[11],O=e[15];return A*(+u*g*w-a*_*w-u*f*k+s*_*k+a*f*S-s*g*S)+P*(+n*g*S-n*_*k+u*d*k-a*d*S+a*_*y-u*g*y)+R*(+n*_*w-n*f*S-u*d*w+s*d*S+u*f*y-s*_*y)+O*(-a*f*y-n*g*w+n*f*k+a*d*w-s*d*k+s*g*y)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,s){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=n,a[14]=s),this}invert(){const e=this.elements,n=e[0],s=e[1],a=e[2],u=e[3],d=e[4],f=e[5],g=e[6],_=e[7],y=e[8],w=e[9],k=e[10],S=e[11],A=e[12],P=e[13],R=e[14],O=e[15],B=w*R*_-P*k*_+P*g*S-f*R*S-w*g*O+f*k*O,N=A*k*_-y*R*_-A*g*S+d*R*S+y*g*O-d*k*O,V=y*P*_-A*w*_+A*f*S-d*P*S-y*f*O+d*w*O,U=A*w*g-y*P*g-A*f*k+d*P*k+y*f*R-d*w*R,Y=n*B+s*N+a*V+u*U;if(Y===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const X=1/Y;return e[0]=B*X,e[1]=(P*k*u-w*R*u-P*a*S+s*R*S+w*a*O-s*k*O)*X,e[2]=(f*R*u-P*g*u+P*a*_-s*R*_-f*a*O+s*g*O)*X,e[3]=(w*g*u-f*k*u-w*a*_+s*k*_+f*a*S-s*g*S)*X,e[4]=N*X,e[5]=(y*R*u-A*k*u+A*a*S-n*R*S-y*a*O+n*k*O)*X,e[6]=(A*g*u-d*R*u-A*a*_+n*R*_+d*a*O-n*g*O)*X,e[7]=(d*k*u-y*g*u+y*a*_-n*k*_-d*a*S+n*g*S)*X,e[8]=V*X,e[9]=(A*w*u-y*P*u-A*s*S+n*P*S+y*s*O-n*w*O)*X,e[10]=(d*P*u-A*f*u+A*s*_-n*P*_-d*s*O+n*f*O)*X,e[11]=(y*f*u-d*w*u-y*s*_+n*w*_+d*s*S-n*f*S)*X,e[12]=U*X,e[13]=(y*P*a-A*w*a+A*s*k-n*P*k-y*s*R+n*w*R)*X,e[14]=(A*f*a-d*P*a-A*s*g+n*P*g+d*s*R-n*f*R)*X,e[15]=(d*w*a-y*f*a+y*s*g-n*w*g-d*s*k+n*f*k)*X,this}scale(e){const n=this.elements,s=e.x,a=e.y,u=e.z;return n[0]*=s,n[4]*=a,n[8]*=u,n[1]*=s,n[5]*=a,n[9]*=u,n[2]*=s,n[6]*=a,n[10]*=u,n[3]*=s,n[7]*=a,n[11]*=u,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],s=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,s,a))}makeTranslation(e,n,s){return this.set(1,0,0,e,0,1,0,n,0,0,1,s,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,n,-s,0,0,s,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,0,s,0,0,1,0,0,-s,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,-s,0,0,s,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const s=Math.cos(n),a=Math.sin(n),u=1-s,d=e.x,f=e.y,g=e.z,_=u*d,y=u*f;return this.set(_*d+s,_*f-a*g,_*g+a*f,0,_*f+a*g,y*f+s,y*g-a*d,0,_*g-a*f,y*g+a*d,u*g*g+s,0,0,0,0,1),this}makeScale(e,n,s){return this.set(e,0,0,0,0,n,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,n,s,a,u,d){return this.set(1,s,u,0,e,1,d,0,n,a,1,0,0,0,0,1),this}compose(e,n,s){const a=this.elements,u=n._x,d=n._y,f=n._z,g=n._w,_=u+u,y=d+d,w=f+f,k=u*_,S=u*y,A=u*w,P=d*y,R=d*w,O=f*w,B=g*_,N=g*y,V=g*w,U=s.x,Y=s.y,X=s.z;return a[0]=(1-(P+O))*U,a[1]=(S+V)*U,a[2]=(A-N)*U,a[3]=0,a[4]=(S-V)*Y,a[5]=(1-(k+O))*Y,a[6]=(R+B)*Y,a[7]=0,a[8]=(A+N)*X,a[9]=(R-B)*X,a[10]=(1-(k+P))*X,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,n,s){const a=this.elements;let u=O0.set(a[0],a[1],a[2]).length();const d=O0.set(a[4],a[5],a[6]).length(),f=O0.set(a[8],a[9],a[10]).length();this.determinant()<0&&(u=-u),e.x=a[12],e.y=a[13],e.z=a[14],ac.copy(this);const _=1/u,y=1/d,w=1/f;return ac.elements[0]*=_,ac.elements[1]*=_,ac.elements[2]*=_,ac.elements[4]*=y,ac.elements[5]*=y,ac.elements[6]*=y,ac.elements[8]*=w,ac.elements[9]*=w,ac.elements[10]*=w,n.setFromRotationMatrix(ac),s.x=u,s.y=d,s.z=f,this}makePerspective(e,n,s,a,u,d){const f=this.elements,g=2*u/(n-e),_=2*u/(s-a),y=(n+e)/(n-e),w=(s+a)/(s-a),k=-(d+u)/(d-u),S=-2*d*u/(d-u);return f[0]=g,f[4]=0,f[8]=y,f[12]=0,f[1]=0,f[5]=_,f[9]=w,f[13]=0,f[2]=0,f[6]=0,f[10]=k,f[14]=S,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,n,s,a,u,d){const f=this.elements,g=1/(n-e),_=1/(s-a),y=1/(d-u),w=(n+e)*g,k=(s+a)*_,S=(d+u)*y;return f[0]=2*g,f[4]=0,f[8]=0,f[12]=-w,f[1]=0,f[5]=2*_,f[9]=0,f[13]=-k,f[2]=0,f[6]=0,f[10]=-2*y,f[14]=-S,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const n=this.elements,s=e.elements;for(let a=0;a<16;a++)if(n[a]!==s[a])return!1;return!0}fromArray(e,n=0){for(let s=0;s<16;s++)this.elements[s]=e[s+n];return this}toArray(e=[],n=0){const s=this.elements;return e[n]=s[0],e[n+1]=s[1],e[n+2]=s[2],e[n+3]=s[3],e[n+4]=s[4],e[n+5]=s[5],e[n+6]=s[6],e[n+7]=s[7],e[n+8]=s[8],e[n+9]=s[9],e[n+10]=s[10],e[n+11]=s[11],e[n+12]=s[12],e[n+13]=s[13],e[n+14]=s[14],e[n+15]=s[15],e}}const O0=new Re,ac=new Yi,Y4e=new Re(0,0,0),j4e=new Re(1,1,1),Sd=new Re,rw=new Re,ja=new Re,LN=new Yi,RN=new Ea;class Pg{constructor(e=0,n=0,s=0,a=Pg.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=s,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,s,a=this._order){return this._x=e,this._y=n,this._z=s,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,s=!0){const a=e.elements,u=a[0],d=a[4],f=a[8],g=a[1],_=a[5],y=a[9],w=a[2],k=a[6],S=a[10];switch(n){case"XYZ":this._y=Math.asin(Ts(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-y,S),this._z=Math.atan2(-d,u)):(this._x=Math.atan2(k,_),this._z=0);break;case"YXZ":this._x=Math.asin(-Ts(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(f,S),this._z=Math.atan2(g,_)):(this._y=Math.atan2(-w,u),this._z=0);break;case"ZXY":this._x=Math.asin(Ts(k,-1,1)),Math.abs(k)<.9999999?(this._y=Math.atan2(-w,S),this._z=Math.atan2(-d,_)):(this._y=0,this._z=Math.atan2(g,u));break;case"ZYX":this._y=Math.asin(-Ts(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(k,S),this._z=Math.atan2(g,u)):(this._x=0,this._z=Math.atan2(-d,_));break;case"YZX":this._z=Math.asin(Ts(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-y,_),this._y=Math.atan2(-w,u)):(this._x=0,this._y=Math.atan2(f,S));break;case"XZY":this._z=Math.asin(-Ts(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(k,_),this._y=Math.atan2(f,u)):(this._x=Math.atan2(-y,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,s===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,s){return LN.makeRotationFromQuaternion(e),this.setFromRotationMatrix(LN,n,s)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return RN.setFromEuler(this),this.setFromQuaternion(RN,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Pg.DefaultOrder="XYZ";Pg.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Q3{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let $4e=0;const PN=new Re,F0=new Ea,lh=new Yi,sw=new Re,ny=new Re,q4e=new Re,X4e=new Ea,IN=new Re(1,0,0),DN=new Re(0,1,0),NN=new Re(0,0,1),Z4e={type:"added"},ON={type:"removed"};class _r extends Rh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$4e++}),this.uuid=il(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_r.DefaultUp.clone();const e=new Re,n=new Pg,s=new Ea,a=new Re(1,1,1);function u(){s.setFromEuler(n,!1)}function d(){n.setFromQuaternion(s,void 0,!1)}n._onChange(u),s._onChange(d),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Yi},normalMatrix:{value:new Ca}}),this.matrix=new Yi,this.matrixWorld=new Yi,this.matrixAutoUpdate=_r.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=_r.DefaultMatrixWorldAutoUpdate,this.layers=new Q3,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return F0.setFromAxisAngle(e,n),this.quaternion.multiply(F0),this}rotateOnWorldAxis(e,n){return F0.setFromAxisAngle(e,n),this.quaternion.premultiply(F0),this}rotateX(e){return this.rotateOnAxis(IN,e)}rotateY(e){return this.rotateOnAxis(DN,e)}rotateZ(e){return this.rotateOnAxis(NN,e)}translateOnAxis(e,n){return PN.copy(e).applyQuaternion(this.quaternion),this.position.add(PN.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(IN,e)}translateY(e){return this.translateOnAxis(DN,e)}translateZ(e){return this.translateOnAxis(NN,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(lh.copy(this.matrixWorld).invert())}lookAt(e,n,s){e.isVector3?sw.copy(e):sw.set(e,n,s);const a=this.parent;this.updateWorldMatrix(!0,!1),ny.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lh.lookAt(ny,sw,this.up):lh.lookAt(sw,ny,this.up),this.quaternion.setFromRotationMatrix(lh),a&&(lh.extractRotation(a.matrixWorld),F0.setFromRotationMatrix(lh),this.quaternion.premultiply(F0.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Z4e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(ON)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(ON)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),lh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),lh.multiply(e.parent.matrixWorld)),e.applyMatrix4(lh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let s=0,a=this.children.length;s<a;s++){const d=this.children[s].getObjectByProperty(e,n);if(d!==void 0)return d}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ny,e,q4e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ny,X4e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let s=0,a=n.length;s<a;s++)n[s].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let s=0,a=n.length;s<a;s++)n[s].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let s=0,a=n.length;s<a;s++){const u=n[s];(u.matrixWorldAutoUpdate===!0||e===!0)&&u.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const s=this.parent;if(e===!0&&s!==null&&s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const a=this.children;for(let u=0,d=a.length;u<d;u++){const f=a[u];f.matrixWorldAutoUpdate===!0&&f.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",s={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON()));function u(f,g){return f[g.uuid]===void 0&&(f[g.uuid]=g.toJSON(e)),g.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=u(e.geometries,this.geometry);const f=this.geometry.parameters;if(f!==void 0&&f.shapes!==void 0){const g=f.shapes;if(Array.isArray(g))for(let _=0,y=g.length;_<y;_++){const w=g[_];u(e.shapes,w)}else u(e.shapes,g)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(u(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const f=[];for(let g=0,_=this.material.length;g<_;g++)f.push(u(e.materials,this.material[g]));a.material=f}else a.material=u(e.materials,this.material);if(this.children.length>0){a.children=[];for(let f=0;f<this.children.length;f++)a.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let f=0;f<this.animations.length;f++){const g=this.animations[f];a.animations.push(u(e.animations,g))}}if(n){const f=d(e.geometries),g=d(e.materials),_=d(e.textures),y=d(e.images),w=d(e.shapes),k=d(e.skeletons),S=d(e.animations),A=d(e.nodes);f.length>0&&(s.geometries=f),g.length>0&&(s.materials=g),_.length>0&&(s.textures=_),y.length>0&&(s.images=y),w.length>0&&(s.shapes=w),k.length>0&&(s.skeletons=k),S.length>0&&(s.animations=S),A.length>0&&(s.nodes=A)}return s.object=a,s;function d(f){const g=[];for(const _ in f){const y=f[_];delete y.metadata,g.push(y)}return g}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let s=0;s<e.children.length;s++){const a=e.children[s];this.add(a.clone())}return this}}_r.DefaultUp=new Re(0,1,0);_r.DefaultMatrixAutoUpdate=!0;_r.DefaultMatrixWorldAutoUpdate=!0;const lc=new Re,ch=new Re,sE=new Re,uh=new Re,B0=new Re,V0=new Re,FN=new Re,oE=new Re,aE=new Re,lE=new Re;class Cl{constructor(e=new Re,n=new Re,s=new Re){this.a=e,this.b=n,this.c=s}static getNormal(e,n,s,a){a.subVectors(s,n),lc.subVectors(e,n),a.cross(lc);const u=a.lengthSq();return u>0?a.multiplyScalar(1/Math.sqrt(u)):a.set(0,0,0)}static getBarycoord(e,n,s,a,u){lc.subVectors(a,n),ch.subVectors(s,n),sE.subVectors(e,n);const d=lc.dot(lc),f=lc.dot(ch),g=lc.dot(sE),_=ch.dot(ch),y=ch.dot(sE),w=d*_-f*f;if(w===0)return u.set(-2,-1,-1);const k=1/w,S=(_*g-f*y)*k,A=(d*y-f*g)*k;return u.set(1-S-A,A,S)}static containsPoint(e,n,s,a){return this.getBarycoord(e,n,s,a,uh),uh.x>=0&&uh.y>=0&&uh.x+uh.y<=1}static getUV(e,n,s,a,u,d,f,g){return this.getBarycoord(e,n,s,a,uh),g.set(0,0),g.addScaledVector(u,uh.x),g.addScaledVector(d,uh.y),g.addScaledVector(f,uh.z),g}static isFrontFacing(e,n,s,a){return lc.subVectors(s,n),ch.subVectors(e,n),lc.cross(ch).dot(a)<0}set(e,n,s){return this.a.copy(e),this.b.copy(n),this.c.copy(s),this}setFromPointsAndIndices(e,n,s,a){return this.a.copy(e[n]),this.b.copy(e[s]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,n,s,a){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,s),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return lc.subVectors(this.c,this.b),ch.subVectors(this.a,this.b),lc.cross(ch).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Cl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Cl.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,s,a,u){return Cl.getUV(e,this.a,this.b,this.c,n,s,a,u)}containsPoint(e){return Cl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Cl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const s=this.a,a=this.b,u=this.c;let d,f;B0.subVectors(a,s),V0.subVectors(u,s),oE.subVectors(e,s);const g=B0.dot(oE),_=V0.dot(oE);if(g<=0&&_<=0)return n.copy(s);aE.subVectors(e,a);const y=B0.dot(aE),w=V0.dot(aE);if(y>=0&&w<=y)return n.copy(a);const k=g*w-y*_;if(k<=0&&g>=0&&y<=0)return d=g/(g-y),n.copy(s).addScaledVector(B0,d);lE.subVectors(e,u);const S=B0.dot(lE),A=V0.dot(lE);if(A>=0&&S<=A)return n.copy(u);const P=S*_-g*A;if(P<=0&&_>=0&&A<=0)return f=_/(_-A),n.copy(s).addScaledVector(V0,f);const R=y*A-S*w;if(R<=0&&w-y>=0&&S-A>=0)return FN.subVectors(u,a),f=(w-y)/(w-y+(S-A)),n.copy(a).addScaledVector(FN,f);const O=1/(R+P+k);return d=P*O,f=k*O,n.copy(s).addScaledVector(B0,d).addScaledVector(V0,f)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let K4e=0;class Ho extends Rh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:K4e++}),this.uuid=il(),this.name="",this.type="Material",this.blending=Fp,this.side=Gp,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=v6,this.blendDst=y6,this.blendEquation=Sp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=x3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=NW,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=t3,this.stencilZFail=t3,this.stencilZPass=t3,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const s=e[n];if(s===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const a=this[n];if(a===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}a&&a.isColor?a.set(s):a&&a.isVector3&&s&&s.isVector3?a.copy(s):this[n]=s}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),this.roughness!==void 0&&(s.roughness=this.roughness),this.metalness!==void 0&&(s.metalness=this.metalness),this.sheen!==void 0&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(s.shininess=this.shininess),this.clearcoat!==void 0&&(s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(s.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(s.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(s.combine=this.combine)),this.envMapIntensity!==void 0&&(s.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(s.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(s.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(s.size=this.size),this.shadowSide!==null&&(s.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==Fp&&(s.blending=this.blending),this.side!==Gp&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),this.transparent===!0&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.colorWrite=this.colorWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(s.rotation=this.rotation),this.polygonOffset===!0&&(s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(s.linewidth=this.linewidth),this.dashSize!==void 0&&(s.dashSize=this.dashSize),this.gapSize!==void 0&&(s.gapSize=this.gapSize),this.scale!==void 0&&(s.scale=this.scale),this.dithering===!0&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(s.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(s.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(s.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(s.flatShading=this.flatShading),this.visible===!1&&(s.visible=!1),this.toneMapped===!1&&(s.toneMapped=!1),this.fog===!1&&(s.fog=!1),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData);function a(u){const d=[];for(const f in u){const g=u[f];delete g.metadata,d.push(g)}return d}if(n){const u=a(e.textures),d=a(e.images);u.length>0&&(s.textures=u),d.length>0&&(s.images=d)}return s}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let s=null;if(n!==null){const a=n.length;s=new Array(a);for(let u=0;u!==a;++u)s[u]=n[u].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class nf extends Ho{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=v_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Vs=new Re,ow=new _n;class Wr{constructor(e,n,s){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=s===!0,this.usage=e_,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,s){e*=this.itemSize,s*=n.itemSize;for(let a=0,u=this.itemSize;a<u;a++)this.array[e+a]=n.array[s+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,s=this.count;n<s;n++)ow.fromBufferAttribute(this,n),ow.applyMatrix3(e),this.setXY(n,ow.x,ow.y);else if(this.itemSize===3)for(let n=0,s=this.count;n<s;n++)Vs.fromBufferAttribute(this,n),Vs.applyMatrix3(e),this.setXYZ(n,Vs.x,Vs.y,Vs.z);return this}applyMatrix4(e){for(let n=0,s=this.count;n<s;n++)Vs.fromBufferAttribute(this,n),Vs.applyMatrix4(e),this.setXYZ(n,Vs.x,Vs.y,Vs.z);return this}applyNormalMatrix(e){for(let n=0,s=this.count;n<s;n++)Vs.fromBufferAttribute(this,n),Vs.applyNormalMatrix(e),this.setXYZ(n,Vs.x,Vs.y,Vs.z);return this}transformDirection(e){for(let n=0,s=this.count;n<s;n++)Vs.fromBufferAttribute(this,n),Vs.transformDirection(e),this.setXYZ(n,Vs.x,Vs.y,Vs.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=bh(n,this.array)),n}setX(e,n){return this.normalized&&(n=Vr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=bh(n,this.array)),n}setY(e,n){return this.normalized&&(n=Vr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=bh(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Vr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=bh(n,this.array)),n}setW(e,n){return this.normalized&&(n=Vr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,s){return e*=this.itemSize,this.normalized&&(n=Vr(n,this.array),s=Vr(s,this.array)),this.array[e+0]=n,this.array[e+1]=s,this}setXYZ(e,n,s,a){return e*=this.itemSize,this.normalized&&(n=Vr(n,this.array),s=Vr(s,this.array),a=Vr(a,this.array)),this.array[e+0]=n,this.array[e+1]=s,this.array[e+2]=a,this}setXYZW(e,n,s,a,u){return e*=this.itemSize,this.normalized&&(n=Vr(n,this.array),s=Vr(s,this.array),a=Vr(a,this.array),u=Vr(u,this.array)),this.array[e+0]=n,this.array[e+1]=s,this.array[e+2]=a,this.array[e+3]=u,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==e_&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class J4e extends Wr{constructor(e,n,s){super(new Int8Array(e),n,s)}}class Q4e extends Wr{constructor(e,n,s){super(new Uint8Array(e),n,s)}}class eCe extends Wr{constructor(e,n,s){super(new Uint8ClampedArray(e),n,s)}}class tCe extends Wr{constructor(e,n,s){super(new Int16Array(e),n,s)}}class C6 extends Wr{constructor(e,n,s){super(new Uint16Array(e),n,s)}}class nCe extends Wr{constructor(e,n,s){super(new Int32Array(e),n,s)}}class S6 extends Wr{constructor(e,n,s){super(new Uint32Array(e),n,s)}}class iCe extends Wr{constructor(e,n,s){super(new Uint16Array(e),n,s),this.isFloat16BufferAttribute=!0}}class ri extends Wr{constructor(e,n,s){super(new Float32Array(e),n,s)}}class rCe extends Wr{constructor(e,n,s){super(new Float64Array(e),n,s)}}let sCe=0;const _l=new Yi,cE=new _r,W0=new Re,$a=new Qp,iy=new Qp,fo=new Re;class ir extends Rh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sCe++}),this.uuid=il(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(FW(e)?S6:C6)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,s=0){this.groups.push({start:e,count:n,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const s=this.attributes.normal;if(s!==void 0){const u=new Ca().getNormalMatrix(e);s.applyNormalMatrix(u),s.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _l.makeRotationFromQuaternion(e),this.applyMatrix4(_l),this}rotateX(e){return _l.makeRotationX(e),this.applyMatrix4(_l),this}rotateY(e){return _l.makeRotationY(e),this.applyMatrix4(_l),this}rotateZ(e){return _l.makeRotationZ(e),this.applyMatrix4(_l),this}translate(e,n,s){return _l.makeTranslation(e,n,s),this.applyMatrix4(_l),this}scale(e,n,s){return _l.makeScale(e,n,s),this.applyMatrix4(_l),this}lookAt(e){return cE.lookAt(e),cE.updateMatrix(),this.applyMatrix4(cE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(W0).negate(),this.translate(W0.x,W0.y,W0.z),this}setFromPoints(e){const n=[];for(let s=0,a=e.length;s<a;s++){const u=e[s];n.push(u.x,u.y,u.z||0)}return this.setAttribute("position",new ri(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qp);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Re(-1/0,-1/0,-1/0),new Re(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const u=n[s];$a.setFromBufferAttribute(u),this.morphTargetsRelative?(fo.addVectors(this.boundingBox.min,$a.min),this.boundingBox.expandByPoint(fo),fo.addVectors(this.boundingBox.max,$a.max),this.boundingBox.expandByPoint(fo)):(this.boundingBox.expandByPoint($a.min),this.boundingBox.expandByPoint($a.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new em);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Re,1/0);return}if(e){const s=this.boundingSphere.center;if($a.setFromBufferAttribute(e),n)for(let u=0,d=n.length;u<d;u++){const f=n[u];iy.setFromBufferAttribute(f),this.morphTargetsRelative?(fo.addVectors($a.min,iy.min),$a.expandByPoint(fo),fo.addVectors($a.max,iy.max),$a.expandByPoint(fo)):($a.expandByPoint(iy.min),$a.expandByPoint(iy.max))}$a.getCenter(s);let a=0;for(let u=0,d=e.count;u<d;u++)fo.fromBufferAttribute(e,u),a=Math.max(a,s.distanceToSquared(fo));if(n)for(let u=0,d=n.length;u<d;u++){const f=n[u],g=this.morphTargetsRelative;for(let _=0,y=f.count;_<y;_++)fo.fromBufferAttribute(f,_),g&&(W0.fromBufferAttribute(e,_),fo.add(W0)),a=Math.max(a,s.distanceToSquared(fo))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const s=e.array,a=n.position.array,u=n.normal.array,d=n.uv.array,f=a.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Wr(new Float32Array(4*f),4));const g=this.getAttribute("tangent").array,_=[],y=[];for(let ue=0;ue<f;ue++)_[ue]=new Re,y[ue]=new Re;const w=new Re,k=new Re,S=new Re,A=new _n,P=new _n,R=new _n,O=new Re,B=new Re;function N(ue,Te,De){w.fromArray(a,ue*3),k.fromArray(a,Te*3),S.fromArray(a,De*3),A.fromArray(d,ue*2),P.fromArray(d,Te*2),R.fromArray(d,De*2),k.sub(w),S.sub(w),P.sub(A),R.sub(A);const $e=1/(P.x*R.y-R.x*P.y);!isFinite($e)||(O.copy(k).multiplyScalar(R.y).addScaledVector(S,-P.y).multiplyScalar($e),B.copy(S).multiplyScalar(P.x).addScaledVector(k,-R.x).multiplyScalar($e),_[ue].add(O),_[Te].add(O),_[De].add(O),y[ue].add(B),y[Te].add(B),y[De].add(B))}let V=this.groups;V.length===0&&(V=[{start:0,count:s.length}]);for(let ue=0,Te=V.length;ue<Te;++ue){const De=V[ue],$e=De.start,Ue=De.count;for(let it=$e,tt=$e+Ue;it<tt;it+=3)N(s[it+0],s[it+1],s[it+2])}const U=new Re,Y=new Re,X=new Re,$=new Re;function ee(ue){X.fromArray(u,ue*3),$.copy(X);const Te=_[ue];U.copy(Te),U.sub(X.multiplyScalar(X.dot(Te))).normalize(),Y.crossVectors($,Te);const $e=Y.dot(y[ue])<0?-1:1;g[ue*4]=U.x,g[ue*4+1]=U.y,g[ue*4+2]=U.z,g[ue*4+3]=$e}for(let ue=0,Te=V.length;ue<Te;++ue){const De=V[ue],$e=De.start,Ue=De.count;for(let it=$e,tt=$e+Ue;it<tt;it+=3)ee(s[it+0]),ee(s[it+1]),ee(s[it+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let s=this.getAttribute("normal");if(s===void 0)s=new Wr(new Float32Array(n.count*3),3),this.setAttribute("normal",s);else for(let k=0,S=s.count;k<S;k++)s.setXYZ(k,0,0,0);const a=new Re,u=new Re,d=new Re,f=new Re,g=new Re,_=new Re,y=new Re,w=new Re;if(e)for(let k=0,S=e.count;k<S;k+=3){const A=e.getX(k+0),P=e.getX(k+1),R=e.getX(k+2);a.fromBufferAttribute(n,A),u.fromBufferAttribute(n,P),d.fromBufferAttribute(n,R),y.subVectors(d,u),w.subVectors(a,u),y.cross(w),f.fromBufferAttribute(s,A),g.fromBufferAttribute(s,P),_.fromBufferAttribute(s,R),f.add(y),g.add(y),_.add(y),s.setXYZ(A,f.x,f.y,f.z),s.setXYZ(P,g.x,g.y,g.z),s.setXYZ(R,_.x,_.y,_.z)}else for(let k=0,S=n.count;k<S;k+=3)a.fromBufferAttribute(n,k+0),u.fromBufferAttribute(n,k+1),d.fromBufferAttribute(n,k+2),y.subVectors(d,u),w.subVectors(a,u),y.cross(w),s.setXYZ(k+0,y.x,y.y,y.z),s.setXYZ(k+1,y.x,y.y,y.z),s.setXYZ(k+2,y.x,y.y,y.z);this.normalizeNormals(),s.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,s=e.count;n<s;n++)fo.fromBufferAttribute(e,n),fo.normalize(),e.setXYZ(n,fo.x,fo.y,fo.z)}toNonIndexed(){function e(f,g){const _=f.array,y=f.itemSize,w=f.normalized,k=new _.constructor(g.length*y);let S=0,A=0;for(let P=0,R=g.length;P<R;P++){f.isInterleavedBufferAttribute?S=g[P]*f.data.stride+f.offset:S=g[P]*y;for(let O=0;O<y;O++)k[A++]=_[S++]}return new Wr(k,y,w)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new ir,s=this.index.array,a=this.attributes;for(const f in a){const g=a[f],_=e(g,s);n.setAttribute(f,_)}const u=this.morphAttributes;for(const f in u){const g=[],_=u[f];for(let y=0,w=_.length;y<w;y++){const k=_[y],S=e(k,s);g.push(S)}n.morphAttributes[f]=g}n.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let f=0,g=d.length;f<g;f++){const _=d[f];n.addGroup(_.start,_.count,_.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const g=this.parameters;for(const _ in g)g[_]!==void 0&&(e[_]=g[_]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const s=this.attributes;for(const g in s){const _=s[g];e.data.attributes[g]=_.toJSON(e.data)}const a={};let u=!1;for(const g in this.morphAttributes){const _=this.morphAttributes[g],y=[];for(let w=0,k=_.length;w<k;w++){const S=_[w];y.push(S.toJSON(e.data))}y.length>0&&(a[g]=y,u=!0)}u&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));const f=this.boundingSphere;return f!==null&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const s=e.index;s!==null&&this.setIndex(s.clone(n));const a=e.attributes;for(const _ in a){const y=a[_];this.setAttribute(_,y.clone(n))}const u=e.morphAttributes;for(const _ in u){const y=[],w=u[_];for(let k=0,S=w.length;k<S;k++)y.push(w[k].clone(n));this.morphAttributes[_]=y}this.morphTargetsRelative=e.morphTargetsRelative;const d=e.groups;for(let _=0,y=d.length;_<y;_++){const w=d[_];this.addGroup(w.start,w.count,w.materialIndex)}const f=e.boundingBox;f!==null&&(this.boundingBox=f.clone());const g=e.boundingSphere;return g!==null&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const BN=new Yi,z0=new __,uE=new em,Ed=new Re,Td=new Re,Md=new Re,hE=new Re,dE=new Re,fE=new Re,aw=new Re,lw=new Re,cw=new Re,uw=new _n,hw=new _n,dw=new _n,pE=new Re,fw=new Re;class So extends _r{constructor(e=new ir,n=new nf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,s=Object.keys(n);if(s.length>0){const a=n[s[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,d=a.length;u<d;u++){const f=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=u}}}}raycast(e,n){const s=this.geometry,a=this.material,u=this.matrixWorld;if(a===void 0||(s.boundingSphere===null&&s.computeBoundingSphere(),uE.copy(s.boundingSphere),uE.applyMatrix4(u),e.ray.intersectsSphere(uE)===!1)||(BN.copy(u).invert(),z0.copy(e.ray).applyMatrix4(BN),s.boundingBox!==null&&z0.intersectsBox(s.boundingBox)===!1))return;let d;const f=s.index,g=s.attributes.position,_=s.morphAttributes.position,y=s.morphTargetsRelative,w=s.attributes.uv,k=s.attributes.uv2,S=s.groups,A=s.drawRange;if(f!==null)if(Array.isArray(a))for(let P=0,R=S.length;P<R;P++){const O=S[P],B=a[O.materialIndex],N=Math.max(O.start,A.start),V=Math.min(f.count,Math.min(O.start+O.count,A.start+A.count));for(let U=N,Y=V;U<Y;U+=3){const X=f.getX(U),$=f.getX(U+1),ee=f.getX(U+2);d=pw(this,B,e,z0,g,_,y,w,k,X,$,ee),d&&(d.faceIndex=Math.floor(U/3),d.face.materialIndex=O.materialIndex,n.push(d))}}else{const P=Math.max(0,A.start),R=Math.min(f.count,A.start+A.count);for(let O=P,B=R;O<B;O+=3){const N=f.getX(O),V=f.getX(O+1),U=f.getX(O+2);d=pw(this,a,e,z0,g,_,y,w,k,N,V,U),d&&(d.faceIndex=Math.floor(O/3),n.push(d))}}else if(g!==void 0)if(Array.isArray(a))for(let P=0,R=S.length;P<R;P++){const O=S[P],B=a[O.materialIndex],N=Math.max(O.start,A.start),V=Math.min(g.count,Math.min(O.start+O.count,A.start+A.count));for(let U=N,Y=V;U<Y;U+=3){const X=U,$=U+1,ee=U+2;d=pw(this,B,e,z0,g,_,y,w,k,X,$,ee),d&&(d.faceIndex=Math.floor(U/3),d.face.materialIndex=O.materialIndex,n.push(d))}}else{const P=Math.max(0,A.start),R=Math.min(g.count,A.start+A.count);for(let O=P,B=R;O<B;O+=3){const N=O,V=O+1,U=O+2;d=pw(this,a,e,z0,g,_,y,w,k,N,V,U),d&&(d.faceIndex=Math.floor(O/3),n.push(d))}}}}function oCe(r,e,n,s,a,u,d,f){let g;if(e.side===nl?g=s.intersectTriangle(d,u,a,!0,f):g=s.intersectTriangle(a,u,d,e.side!==yh,f),g===null)return null;fw.copy(f),fw.applyMatrix4(r.matrixWorld);const _=n.ray.origin.distanceTo(fw);return _<n.near||_>n.far?null:{distance:_,point:fw.clone(),object:r}}function pw(r,e,n,s,a,u,d,f,g,_,y,w){Ed.fromBufferAttribute(a,_),Td.fromBufferAttribute(a,y),Md.fromBufferAttribute(a,w);const k=r.morphTargetInfluences;if(u&&k){aw.set(0,0,0),lw.set(0,0,0),cw.set(0,0,0);for(let A=0,P=u.length;A<P;A++){const R=k[A],O=u[A];R!==0&&(hE.fromBufferAttribute(O,_),dE.fromBufferAttribute(O,y),fE.fromBufferAttribute(O,w),d?(aw.addScaledVector(hE,R),lw.addScaledVector(dE,R),cw.addScaledVector(fE,R)):(aw.addScaledVector(hE.sub(Ed),R),lw.addScaledVector(dE.sub(Td),R),cw.addScaledVector(fE.sub(Md),R)))}Ed.add(aw),Td.add(lw),Md.add(cw)}r.isSkinnedMesh&&(r.boneTransform(_,Ed),r.boneTransform(y,Td),r.boneTransform(w,Md));const S=oCe(r,e,n,s,Ed,Td,Md,pE);if(S){f&&(uw.fromBufferAttribute(f,_),hw.fromBufferAttribute(f,y),dw.fromBufferAttribute(f,w),S.uv=Cl.getUV(pE,Ed,Td,Md,uw,hw,dw,new _n)),g&&(uw.fromBufferAttribute(g,_),hw.fromBufferAttribute(g,y),dw.fromBufferAttribute(g,w),S.uv2=Cl.getUV(pE,Ed,Td,Md,uw,hw,dw,new _n));const A={a:_,b:y,c:w,normal:new Re,materialIndex:0};Cl.getNormal(Ed,Td,Md,A.normal),S.face=A}return S}class rf extends ir{constructor(e=1,n=1,s=1,a=1,u=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:s,widthSegments:a,heightSegments:u,depthSegments:d};const f=this;a=Math.floor(a),u=Math.floor(u),d=Math.floor(d);const g=[],_=[],y=[],w=[];let k=0,S=0;A("z","y","x",-1,-1,s,n,e,d,u,0),A("z","y","x",1,-1,s,n,-e,d,u,1),A("x","z","y",1,1,e,s,n,a,d,2),A("x","z","y",1,-1,e,s,-n,a,d,3),A("x","y","z",1,-1,e,n,s,a,u,4),A("x","y","z",-1,-1,e,n,-s,a,u,5),this.setIndex(g),this.setAttribute("position",new ri(_,3)),this.setAttribute("normal",new ri(y,3)),this.setAttribute("uv",new ri(w,2));function A(P,R,O,B,N,V,U,Y,X,$,ee){const ue=V/X,Te=U/$,De=V/2,$e=U/2,Ue=Y/2,it=X+1,tt=$+1;let St=0,ve=0;const ne=new Re;for(let me=0;me<tt;me++){const qe=me*Te-$e;for(let Se=0;Se<it;Se++){const gt=Se*ue-De;ne[P]=gt*B,ne[R]=qe*N,ne[O]=Ue,_.push(ne.x,ne.y,ne.z),ne[P]=0,ne[R]=0,ne[O]=Y>0?1:-1,y.push(ne.x,ne.y,ne.z),w.push(Se/X),w.push(1-me/$),St+=1}}for(let me=0;me<$;me++)for(let qe=0;qe<X;qe++){const Se=k+qe+it*me,gt=k+qe+it*(me+1),Xt=k+(qe+1)+it*(me+1),He=k+(qe+1)+it*me;g.push(Se,gt,He),g.push(gt,Xt,He),ve+=6}f.addGroup(S,ve,ee),S+=ve,k+=St}}static fromJSON(e){return new rf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Sg(r){const e={};for(const n in r){e[n]={};for(const s in r[n]){const a=r[n][s];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?e[n][s]=a.clone():Array.isArray(a)?e[n][s]=a.slice():e[n][s]=a}}return e}function sa(r){const e={};for(let n=0;n<r.length;n++){const s=Sg(r[n]);for(const a in s)e[a]=s[a]}return e}function aCe(r){const e=[];for(let n=0;n<r.length;n++)e.push(r[n].clone());return e}const VW={clone:Sg,merge:sa};var lCe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cCe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class fu extends Ho{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=lCe,this.fragmentShader=cCe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sg(e.uniforms),this.uniformsGroups=aCe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const a in this.uniforms){const d=this.uniforms[a].value;d&&d.isTexture?n.uniforms[a]={type:"t",value:d.toJSON(e).uuid}:d&&d.isColor?n.uniforms[a]={type:"c",value:d.getHex()}:d&&d.isVector2?n.uniforms[a]={type:"v2",value:d.toArray()}:d&&d.isVector3?n.uniforms[a]={type:"v3",value:d.toArray()}:d&&d.isVector4?n.uniforms[a]={type:"v4",value:d.toArray()}:d&&d.isMatrix3?n.uniforms[a]={type:"m3",value:d.toArray()}:d&&d.isMatrix4?n.uniforms[a]={type:"m4",value:d.toArray()}:n.uniforms[a]={value:d}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const s={};for(const a in this.extensions)this.extensions[a]===!0&&(s[a]=!0);return Object.keys(s).length>0&&(n.extensions=s),n}}class e5 extends _r{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yi,this.projectionMatrix=new Yi,this.projectionMatrixInverse=new Yi}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class zs extends e5{constructor(e=50,n=1,s=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=a,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=t_*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Vp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return t_*2*Math.atan(Math.tan(Vp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,s,a,u,d){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=s,this.view.offsetY=a,this.view.width=u,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Vp*.5*this.fov)/this.zoom,s=2*n,a=this.aspect*s,u=-.5*a;const d=this.view;if(this.view!==null&&this.view.enabled){const g=d.fullWidth,_=d.fullHeight;u+=d.offsetX*a/g,n-=d.offsetY*s/_,a*=d.width/g,s*=d.height/_}const f=this.filmOffset;f!==0&&(u+=e*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+a,n,n-s,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const U0=90,G0=1;class WW extends _r{constructor(e,n,s){super(),this.type="CubeCamera",this.renderTarget=s;const a=new zs(U0,G0,e,n);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Re(1,0,0)),this.add(a);const u=new zs(U0,G0,e,n);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Re(-1,0,0)),this.add(u);const d=new zs(U0,G0,e,n);d.layers=this.layers,d.up.set(0,0,1),d.lookAt(new Re(0,1,0)),this.add(d);const f=new zs(U0,G0,e,n);f.layers=this.layers,f.up.set(0,0,-1),f.lookAt(new Re(0,-1,0)),this.add(f);const g=new zs(U0,G0,e,n);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new Re(0,0,1)),this.add(g);const _=new zs(U0,G0,e,n);_.layers=this.layers,_.up.set(0,-1,0),_.lookAt(new Re(0,0,-1)),this.add(_)}update(e,n){this.parent===null&&this.updateMatrixWorld();const s=this.renderTarget,[a,u,d,f,g,_]=this.children,y=e.getRenderTarget(),w=e.toneMapping,k=e.xr.enabled;e.toneMapping=lu,e.xr.enabled=!1;const S=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0),e.render(n,a),e.setRenderTarget(s,1),e.render(n,u),e.setRenderTarget(s,2),e.render(n,d),e.setRenderTarget(s,3),e.render(n,f),e.setRenderTarget(s,4),e.render(n,g),s.texture.generateMipmaps=S,e.setRenderTarget(s,5),e.render(n,_),e.setRenderTarget(y),e.toneMapping=w,e.xr.enabled=k,s.texture.needsPMREMUpdate=!0}}class b_ extends to{constructor(e,n,s,a,u,d,f,g,_,y){e=e!==void 0?e:[],n=n!==void 0?n:$d,super(e,n,s,a,u,d,f,g,_,y),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class zW extends Tl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const s={width:e,height:e,depth:1},a=[s,s,s,s,s,s];this.texture=new b_(a,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Es}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const s={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new rf(5,5,5),u=new fu({name:"CubemapFromEquirect",uniforms:Sg(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:nl,blending:xh});u.uniforms.tEquirect.value=n;const d=new So(a,u),f=n.minFilter;return n.minFilter===Jp&&(n.minFilter=Es),new WW(1,10,this).update(e,d),n.minFilter=f,d.geometry.dispose(),d.material.dispose(),this}clear(e,n,s,a){const u=e.getRenderTarget();for(let d=0;d<6;d++)e.setRenderTarget(this,d),e.clear(n,s,a);e.setRenderTarget(u)}}const mE=new Re,uCe=new Re,hCe=new Ca;class Pd{constructor(e=new Re(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,s,a){return this.normal.set(e,n,s),this.constant=a,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,s){const a=mE.subVectors(s,n).cross(uCe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const s=e.delta(mE),a=this.normal.dot(s);if(a===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const u=-(e.start.dot(this.normal)+this.constant)/a;return u<0||u>1?null:n.copy(s).multiplyScalar(u).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return n<0&&s>0||s<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const s=n||hCe.getNormalMatrix(e),a=this.coplanarPoint(mE).applyMatrix4(e),u=this.normal.applyMatrix3(s).normalize();return this.constant=-a.dot(u),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const H0=new em,mw=new Re;class t5{constructor(e=new Pd,n=new Pd,s=new Pd,a=new Pd,u=new Pd,d=new Pd){this.planes=[e,n,s,a,u,d]}set(e,n,s,a,u,d){const f=this.planes;return f[0].copy(e),f[1].copy(n),f[2].copy(s),f[3].copy(a),f[4].copy(u),f[5].copy(d),this}copy(e){const n=this.planes;for(let s=0;s<6;s++)n[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e){const n=this.planes,s=e.elements,a=s[0],u=s[1],d=s[2],f=s[3],g=s[4],_=s[5],y=s[6],w=s[7],k=s[8],S=s[9],A=s[10],P=s[11],R=s[12],O=s[13],B=s[14],N=s[15];return n[0].setComponents(f-a,w-g,P-k,N-R).normalize(),n[1].setComponents(f+a,w+g,P+k,N+R).normalize(),n[2].setComponents(f+u,w+_,P+S,N+O).normalize(),n[3].setComponents(f-u,w-_,P-S,N-O).normalize(),n[4].setComponents(f-d,w-y,P-A,N-B).normalize(),n[5].setComponents(f+d,w+y,P+A,N+B).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),H0.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(H0)}intersectsSprite(e){return H0.center.set(0,0,0),H0.radius=.7071067811865476,H0.applyMatrix4(e.matrixWorld),this.intersectsSphere(H0)}intersectsSphere(e){const n=this.planes,s=e.center,a=-e.radius;for(let u=0;u<6;u++)if(n[u].distanceToPoint(s)<a)return!1;return!0}intersectsBox(e){const n=this.planes;for(let s=0;s<6;s++){const a=n[s];if(mw.x=a.normal.x>0?e.max.x:e.min.x,mw.y=a.normal.y>0?e.max.y:e.min.y,mw.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(mw)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let s=0;s<6;s++)if(n[s].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function UW(){let r=null,e=!1,n=null,s=null;function a(u,d){n(u,d),s=r.requestAnimationFrame(a)}return{start:function(){e!==!0&&n!==null&&(s=r.requestAnimationFrame(a),e=!0)},stop:function(){r.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(u){n=u},setContext:function(u){r=u}}}function dCe(r,e){const n=e.isWebGL2,s=new WeakMap;function a(_,y){const w=_.array,k=_.usage,S=r.createBuffer();r.bindBuffer(y,S),r.bufferData(y,w,k),_.onUploadCallback();let A;if(w instanceof Float32Array)A=5126;else if(w instanceof Uint16Array)if(_.isFloat16BufferAttribute)if(n)A=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else A=5123;else if(w instanceof Int16Array)A=5122;else if(w instanceof Uint32Array)A=5125;else if(w instanceof Int32Array)A=5124;else if(w instanceof Int8Array)A=5120;else if(w instanceof Uint8Array)A=5121;else if(w instanceof Uint8ClampedArray)A=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+w);return{buffer:S,type:A,bytesPerElement:w.BYTES_PER_ELEMENT,version:_.version}}function u(_,y,w){const k=y.array,S=y.updateRange;r.bindBuffer(w,_),S.count===-1?r.bufferSubData(w,0,k):(n?r.bufferSubData(w,S.offset*k.BYTES_PER_ELEMENT,k,S.offset,S.count):r.bufferSubData(w,S.offset*k.BYTES_PER_ELEMENT,k.subarray(S.offset,S.offset+S.count)),S.count=-1)}function d(_){return _.isInterleavedBufferAttribute&&(_=_.data),s.get(_)}function f(_){_.isInterleavedBufferAttribute&&(_=_.data);const y=s.get(_);y&&(r.deleteBuffer(y.buffer),s.delete(_))}function g(_,y){if(_.isGLBufferAttribute){const k=s.get(_);(!k||k.version<_.version)&&s.set(_,{buffer:_.buffer,type:_.type,bytesPerElement:_.elementSize,version:_.version});return}_.isInterleavedBufferAttribute&&(_=_.data);const w=s.get(_);w===void 0?s.set(_,a(_,y)):w.version<_.version&&(u(w.buffer,_,y),w.version=_.version)}return{get:d,remove:f,update:g}}class Ig extends ir{constructor(e=1,n=1,s=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:s,heightSegments:a};const u=e/2,d=n/2,f=Math.floor(s),g=Math.floor(a),_=f+1,y=g+1,w=e/f,k=n/g,S=[],A=[],P=[],R=[];for(let O=0;O<y;O++){const B=O*k-d;for(let N=0;N<_;N++){const V=N*w-u;A.push(V,-B,0),P.push(0,0,1),R.push(N/f),R.push(1-O/g)}}for(let O=0;O<g;O++)for(let B=0;B<f;B++){const N=B+_*O,V=B+_*(O+1),U=B+1+_*(O+1),Y=B+1+_*O;S.push(N,V,Y),S.push(V,U,Y)}this.setIndex(S),this.setAttribute("position",new ri(A,3)),this.setAttribute("normal",new ri(P,3)),this.setAttribute("uv",new ri(R,2))}static fromJSON(e){return new Ig(e.width,e.height,e.widthSegments,e.heightSegments)}}var fCe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,pCe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,mCe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,gCe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,vCe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,yCe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_Ce="vec3 transformed = vec3( position );",bCe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,xCe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,wCe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,kCe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,CCe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,SCe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ECe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,TCe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,MCe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ACe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,LCe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,RCe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,PCe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,ICe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,DCe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,NCe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,OCe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,FCe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,BCe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,VCe="gl_FragColor = linearToOutputTexel( gl_FragColor );",WCe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,zCe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,UCe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,GCe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,HCe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,YCe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jCe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,$Ce=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,qCe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,XCe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ZCe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,KCe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,JCe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,QCe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,eSe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,tSe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,nSe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,iSe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,rSe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,sSe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,oSe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,aSe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,lSe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,cSe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,uSe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,hSe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,dSe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,fSe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,pSe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,mSe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,gSe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,vSe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ySe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_Se=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bSe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,xSe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,wSe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,kSe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,CSe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,SSe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,ESe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,TSe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,MSe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ASe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,LSe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,RSe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,PSe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,ISe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,DSe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,NSe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,OSe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,FSe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,BSe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,VSe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,WSe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,zSe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,USe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,GSe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,HSe=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,YSe=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,jSe=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,$Se=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,qSe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,XSe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,ZSe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,KSe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,JSe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,QSe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,eEe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tEe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,nEe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,iEe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,rEe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,sEe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,oEe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,aEe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,lEe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,cEe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,uEe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const hEe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,dEe=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,fEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pEe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,mEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gEe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vEe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,yEe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,_Ee=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,bEe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,xEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,wEe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,kEe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,CEe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,SEe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,EEe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TEe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MEe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AEe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,LEe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,REe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,PEe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,IEe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DEe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NEe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,OEe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FEe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BEe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VEe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,WEe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zEe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UEe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,GEe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HEe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ji={alphamap_fragment:fCe,alphamap_pars_fragment:pCe,alphatest_fragment:mCe,alphatest_pars_fragment:gCe,aomap_fragment:vCe,aomap_pars_fragment:yCe,begin_vertex:_Ce,beginnormal_vertex:bCe,bsdfs:xCe,iridescence_fragment:wCe,bumpmap_pars_fragment:kCe,clipping_planes_fragment:CCe,clipping_planes_pars_fragment:SCe,clipping_planes_pars_vertex:ECe,clipping_planes_vertex:TCe,color_fragment:MCe,color_pars_fragment:ACe,color_pars_vertex:LCe,color_vertex:RCe,common:PCe,cube_uv_reflection_fragment:ICe,defaultnormal_vertex:DCe,displacementmap_pars_vertex:NCe,displacementmap_vertex:OCe,emissivemap_fragment:FCe,emissivemap_pars_fragment:BCe,encodings_fragment:VCe,encodings_pars_fragment:WCe,envmap_fragment:zCe,envmap_common_pars_fragment:UCe,envmap_pars_fragment:GCe,envmap_pars_vertex:HCe,envmap_physical_pars_fragment:nSe,envmap_vertex:YCe,fog_vertex:jCe,fog_pars_vertex:$Ce,fog_fragment:qCe,fog_pars_fragment:XCe,gradientmap_pars_fragment:ZCe,lightmap_fragment:KCe,lightmap_pars_fragment:JCe,lights_lambert_fragment:QCe,lights_lambert_pars_fragment:eSe,lights_pars_begin:tSe,lights_toon_fragment:iSe,lights_toon_pars_fragment:rSe,lights_phong_fragment:sSe,lights_phong_pars_fragment:oSe,lights_physical_fragment:aSe,lights_physical_pars_fragment:lSe,lights_fragment_begin:cSe,lights_fragment_maps:uSe,lights_fragment_end:hSe,logdepthbuf_fragment:dSe,logdepthbuf_pars_fragment:fSe,logdepthbuf_pars_vertex:pSe,logdepthbuf_vertex:mSe,map_fragment:gSe,map_pars_fragment:vSe,map_particle_fragment:ySe,map_particle_pars_fragment:_Se,metalnessmap_fragment:bSe,metalnessmap_pars_fragment:xSe,morphcolor_vertex:wSe,morphnormal_vertex:kSe,morphtarget_pars_vertex:CSe,morphtarget_vertex:SSe,normal_fragment_begin:ESe,normal_fragment_maps:TSe,normal_pars_fragment:MSe,normal_pars_vertex:ASe,normal_vertex:LSe,normalmap_pars_fragment:RSe,clearcoat_normal_fragment_begin:PSe,clearcoat_normal_fragment_maps:ISe,clearcoat_pars_fragment:DSe,iridescence_pars_fragment:NSe,output_fragment:OSe,packing:FSe,premultiplied_alpha_fragment:BSe,project_vertex:VSe,dithering_fragment:WSe,dithering_pars_fragment:zSe,roughnessmap_fragment:USe,roughnessmap_pars_fragment:GSe,shadowmap_pars_fragment:HSe,shadowmap_pars_vertex:YSe,shadowmap_vertex:jSe,shadowmask_pars_fragment:$Se,skinbase_vertex:qSe,skinning_pars_vertex:XSe,skinning_vertex:ZSe,skinnormal_vertex:KSe,specularmap_fragment:JSe,specularmap_pars_fragment:QSe,tonemapping_fragment:eEe,tonemapping_pars_fragment:tEe,transmission_fragment:nEe,transmission_pars_fragment:iEe,uv_pars_fragment:rEe,uv_pars_vertex:sEe,uv_vertex:oEe,uv2_pars_fragment:aEe,uv2_pars_vertex:lEe,uv2_vertex:cEe,worldpos_vertex:uEe,background_vert:hEe,background_frag:dEe,backgroundCube_vert:fEe,backgroundCube_frag:pEe,cube_vert:mEe,cube_frag:gEe,depth_vert:vEe,depth_frag:yEe,distanceRGBA_vert:_Ee,distanceRGBA_frag:bEe,equirect_vert:xEe,equirect_frag:wEe,linedashed_vert:kEe,linedashed_frag:CEe,meshbasic_vert:SEe,meshbasic_frag:EEe,meshlambert_vert:TEe,meshlambert_frag:MEe,meshmatcap_vert:AEe,meshmatcap_frag:LEe,meshnormal_vert:REe,meshnormal_frag:PEe,meshphong_vert:IEe,meshphong_frag:DEe,meshphysical_vert:NEe,meshphysical_frag:OEe,meshtoon_vert:FEe,meshtoon_frag:BEe,points_vert:VEe,points_frag:WEe,shadow_vert:zEe,shadow_frag:UEe,sprite_vert:GEe,sprite_frag:HEe},Fn={common:{diffuse:{value:new qn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ca},uv2Transform:{value:new Ca},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ca}},sprite:{diffuse:{value:new qn(16777215)},opacity:{value:1},center:{value:new _n(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ca}}},fc={basic:{uniforms:sa([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.fog]),vertexShader:Ji.meshbasic_vert,fragmentShader:Ji.meshbasic_frag},lambert:{uniforms:sa([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,Fn.lights,{emissive:{value:new qn(0)}}]),vertexShader:Ji.meshlambert_vert,fragmentShader:Ji.meshlambert_frag},phong:{uniforms:sa([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,Fn.lights,{emissive:{value:new qn(0)},specular:{value:new qn(1118481)},shininess:{value:30}}]),vertexShader:Ji.meshphong_vert,fragmentShader:Ji.meshphong_frag},standard:{uniforms:sa([Fn.common,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.roughnessmap,Fn.metalnessmap,Fn.fog,Fn.lights,{emissive:{value:new qn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ji.meshphysical_vert,fragmentShader:Ji.meshphysical_frag},toon:{uniforms:sa([Fn.common,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.gradientmap,Fn.fog,Fn.lights,{emissive:{value:new qn(0)}}]),vertexShader:Ji.meshtoon_vert,fragmentShader:Ji.meshtoon_frag},matcap:{uniforms:sa([Fn.common,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,{matcap:{value:null}}]),vertexShader:Ji.meshmatcap_vert,fragmentShader:Ji.meshmatcap_frag},points:{uniforms:sa([Fn.points,Fn.fog]),vertexShader:Ji.points_vert,fragmentShader:Ji.points_frag},dashed:{uniforms:sa([Fn.common,Fn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ji.linedashed_vert,fragmentShader:Ji.linedashed_frag},depth:{uniforms:sa([Fn.common,Fn.displacementmap]),vertexShader:Ji.depth_vert,fragmentShader:Ji.depth_frag},normal:{uniforms:sa([Fn.common,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,{opacity:{value:1}}]),vertexShader:Ji.meshnormal_vert,fragmentShader:Ji.meshnormal_frag},sprite:{uniforms:sa([Fn.sprite,Fn.fog]),vertexShader:Ji.sprite_vert,fragmentShader:Ji.sprite_frag},background:{uniforms:{uvTransform:{value:new Ca},t2D:{value:null}},vertexShader:Ji.background_vert,fragmentShader:Ji.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Ji.backgroundCube_vert,fragmentShader:Ji.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ji.cube_vert,fragmentShader:Ji.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ji.equirect_vert,fragmentShader:Ji.equirect_frag},distanceRGBA:{uniforms:sa([Fn.common,Fn.displacementmap,{referencePosition:{value:new Re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ji.distanceRGBA_vert,fragmentShader:Ji.distanceRGBA_frag},shadow:{uniforms:sa([Fn.lights,Fn.fog,{color:{value:new qn(0)},opacity:{value:1}}]),vertexShader:Ji.shadow_vert,fragmentShader:Ji.shadow_frag}};fc.physical={uniforms:sa([fc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new _n(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new qn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new _n},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new qn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new qn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ji.meshphysical_vert,fragmentShader:Ji.meshphysical_frag};function YEe(r,e,n,s,a,u,d){const f=new qn(0);let g=u===!0?0:1,_,y,w=null,k=0,S=null;function A(R,O){let B=!1,N=O.isScene===!0?O.background:null;N&&N.isTexture&&(N=(O.backgroundBlurriness>0?n:e).get(N));const V=r.xr,U=V.getSession&&V.getSession();U&&U.environmentBlendMode==="additive"&&(N=null),N===null?P(f,g):N&&N.isColor&&(P(N,1),B=!0),(r.autoClear||B)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),N&&(N.isCubeTexture||N.mapping===Rg)?(y===void 0&&(y=new So(new rf(1,1,1),new fu({name:"BackgroundCubeMaterial",uniforms:Sg(fc.backgroundCube.uniforms),vertexShader:fc.backgroundCube.vertexShader,fragmentShader:fc.backgroundCube.fragmentShader,side:nl,depthTest:!1,depthWrite:!1,fog:!1})),y.geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(Y,X,$){this.matrixWorld.copyPosition($.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(y)),y.material.uniforms.envMap.value=N,y.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,y.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,(w!==N||k!==N.version||S!==r.toneMapping)&&(y.material.needsUpdate=!0,w=N,k=N.version,S=r.toneMapping),y.layers.enableAll(),R.unshift(y,y.geometry,y.material,0,0,null)):N&&N.isTexture&&(_===void 0&&(_=new So(new Ig(2,2),new fu({name:"BackgroundMaterial",uniforms:Sg(fc.background.uniforms),vertexShader:fc.background.vertexShader,fragmentShader:fc.background.fragmentShader,side:Gp,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),Object.defineProperty(_.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(_)),_.material.uniforms.t2D.value=N,N.matrixAutoUpdate===!0&&N.updateMatrix(),_.material.uniforms.uvTransform.value.copy(N.matrix),(w!==N||k!==N.version||S!==r.toneMapping)&&(_.material.needsUpdate=!0,w=N,k=N.version,S=r.toneMapping),_.layers.enableAll(),R.unshift(_,_.geometry,_.material,0,0,null))}function P(R,O){s.buffers.color.setClear(R.r,R.g,R.b,O,d)}return{getClearColor:function(){return f},setClearColor:function(R,O=1){f.set(R),g=O,P(f,g)},getClearAlpha:function(){return g},setClearAlpha:function(R){g=R,P(f,g)},render:A}}function jEe(r,e,n,s){const a=r.getParameter(34921),u=s.isWebGL2?null:e.get("OES_vertex_array_object"),d=s.isWebGL2||u!==null,f={},g=R(null);let _=g,y=!1;function w(Ue,it,tt,St,ve){let ne=!1;if(d){const me=P(St,tt,it);_!==me&&(_=me,S(_.object)),ne=O(Ue,St,tt,ve),ne&&B(Ue,St,tt,ve)}else{const me=it.wireframe===!0;(_.geometry!==St.id||_.program!==tt.id||_.wireframe!==me)&&(_.geometry=St.id,_.program=tt.id,_.wireframe=me,ne=!0)}ve!==null&&n.update(ve,34963),(ne||y)&&(y=!1,$(Ue,it,tt,St),ve!==null&&r.bindBuffer(34963,n.get(ve).buffer))}function k(){return s.isWebGL2?r.createVertexArray():u.createVertexArrayOES()}function S(Ue){return s.isWebGL2?r.bindVertexArray(Ue):u.bindVertexArrayOES(Ue)}function A(Ue){return s.isWebGL2?r.deleteVertexArray(Ue):u.deleteVertexArrayOES(Ue)}function P(Ue,it,tt){const St=tt.wireframe===!0;let ve=f[Ue.id];ve===void 0&&(ve={},f[Ue.id]=ve);let ne=ve[it.id];ne===void 0&&(ne={},ve[it.id]=ne);let me=ne[St];return me===void 0&&(me=R(k()),ne[St]=me),me}function R(Ue){const it=[],tt=[],St=[];for(let ve=0;ve<a;ve++)it[ve]=0,tt[ve]=0,St[ve]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:it,enabledAttributes:tt,attributeDivisors:St,object:Ue,attributes:{},index:null}}function O(Ue,it,tt,St){const ve=_.attributes,ne=it.attributes;let me=0;const qe=tt.getAttributes();for(const Se in qe)if(qe[Se].location>=0){const Xt=ve[Se];let He=ne[Se];if(He===void 0&&(Se==="instanceMatrix"&&Ue.instanceMatrix&&(He=Ue.instanceMatrix),Se==="instanceColor"&&Ue.instanceColor&&(He=Ue.instanceColor)),Xt===void 0||Xt.attribute!==He||He&&Xt.data!==He.data)return!0;me++}return _.attributesNum!==me||_.index!==St}function B(Ue,it,tt,St){const ve={},ne=it.attributes;let me=0;const qe=tt.getAttributes();for(const Se in qe)if(qe[Se].location>=0){let Xt=ne[Se];Xt===void 0&&(Se==="instanceMatrix"&&Ue.instanceMatrix&&(Xt=Ue.instanceMatrix),Se==="instanceColor"&&Ue.instanceColor&&(Xt=Ue.instanceColor));const He={};He.attribute=Xt,Xt&&Xt.data&&(He.data=Xt.data),ve[Se]=He,me++}_.attributes=ve,_.attributesNum=me,_.index=St}function N(){const Ue=_.newAttributes;for(let it=0,tt=Ue.length;it<tt;it++)Ue[it]=0}function V(Ue){U(Ue,0)}function U(Ue,it){const tt=_.newAttributes,St=_.enabledAttributes,ve=_.attributeDivisors;tt[Ue]=1,St[Ue]===0&&(r.enableVertexAttribArray(Ue),St[Ue]=1),ve[Ue]!==it&&((s.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ue,it),ve[Ue]=it)}function Y(){const Ue=_.newAttributes,it=_.enabledAttributes;for(let tt=0,St=it.length;tt<St;tt++)it[tt]!==Ue[tt]&&(r.disableVertexAttribArray(tt),it[tt]=0)}function X(Ue,it,tt,St,ve,ne){s.isWebGL2===!0&&(tt===5124||tt===5125)?r.vertexAttribIPointer(Ue,it,tt,ve,ne):r.vertexAttribPointer(Ue,it,tt,St,ve,ne)}function $(Ue,it,tt,St){if(s.isWebGL2===!1&&(Ue.isInstancedMesh||St.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;N();const ve=St.attributes,ne=tt.getAttributes(),me=it.defaultAttributeValues;for(const qe in ne){const Se=ne[qe];if(Se.location>=0){let gt=ve[qe];if(gt===void 0&&(qe==="instanceMatrix"&&Ue.instanceMatrix&&(gt=Ue.instanceMatrix),qe==="instanceColor"&&Ue.instanceColor&&(gt=Ue.instanceColor)),gt!==void 0){const Xt=gt.normalized,He=gt.itemSize,Fe=n.get(gt);if(Fe===void 0)continue;const pt=Fe.buffer,Rt=Fe.type,Vt=Fe.bytesPerElement;if(gt.isInterleavedBufferAttribute){const Ke=gt.data,Ot=Ke.stride,oe=gt.offset;if(Ke.isInstancedInterleavedBuffer){for(let ye=0;ye<Se.locationSize;ye++)U(Se.location+ye,Ke.meshPerAttribute);Ue.isInstancedMesh!==!0&&St._maxInstanceCount===void 0&&(St._maxInstanceCount=Ke.meshPerAttribute*Ke.count)}else for(let ye=0;ye<Se.locationSize;ye++)V(Se.location+ye);r.bindBuffer(34962,pt);for(let ye=0;ye<Se.locationSize;ye++)X(Se.location+ye,He/Se.locationSize,Rt,Xt,Ot*Vt,(oe+He/Se.locationSize*ye)*Vt)}else{if(gt.isInstancedBufferAttribute){for(let Ke=0;Ke<Se.locationSize;Ke++)U(Se.location+Ke,gt.meshPerAttribute);Ue.isInstancedMesh!==!0&&St._maxInstanceCount===void 0&&(St._maxInstanceCount=gt.meshPerAttribute*gt.count)}else for(let Ke=0;Ke<Se.locationSize;Ke++)V(Se.location+Ke);r.bindBuffer(34962,pt);for(let Ke=0;Ke<Se.locationSize;Ke++)X(Se.location+Ke,He/Se.locationSize,Rt,Xt,He*Vt,He/Se.locationSize*Ke*Vt)}}else if(me!==void 0){const Xt=me[qe];if(Xt!==void 0)switch(Xt.length){case 2:r.vertexAttrib2fv(Se.location,Xt);break;case 3:r.vertexAttrib3fv(Se.location,Xt);break;case 4:r.vertexAttrib4fv(Se.location,Xt);break;default:r.vertexAttrib1fv(Se.location,Xt)}}}}Y()}function ee(){De();for(const Ue in f){const it=f[Ue];for(const tt in it){const St=it[tt];for(const ve in St)A(St[ve].object),delete St[ve];delete it[tt]}delete f[Ue]}}function ue(Ue){if(f[Ue.id]===void 0)return;const it=f[Ue.id];for(const tt in it){const St=it[tt];for(const ve in St)A(St[ve].object),delete St[ve];delete it[tt]}delete f[Ue.id]}function Te(Ue){for(const it in f){const tt=f[it];if(tt[Ue.id]===void 0)continue;const St=tt[Ue.id];for(const ve in St)A(St[ve].object),delete St[ve];delete tt[Ue.id]}}function De(){$e(),y=!0,_!==g&&(_=g,S(_.object))}function $e(){g.geometry=null,g.program=null,g.wireframe=!1}return{setup:w,reset:De,resetDefaultState:$e,dispose:ee,releaseStatesOfGeometry:ue,releaseStatesOfProgram:Te,initAttributes:N,enableAttribute:V,disableUnusedAttributes:Y}}function $Ee(r,e,n,s){const a=s.isWebGL2;let u;function d(_){u=_}function f(_,y){r.drawArrays(u,_,y),n.update(y,u,1)}function g(_,y,w){if(w===0)return;let k,S;if(a)k=r,S="drawArraysInstanced";else if(k=e.get("ANGLE_instanced_arrays"),S="drawArraysInstancedANGLE",k===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}k[S](u,_,y,w),n.update(y,u,w)}this.setMode=d,this.render=f,this.renderInstances=g}function qEe(r,e,n){let s;function a(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const X=e.get("EXT_texture_filter_anisotropic");s=r.getParameter(X.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function u(X){if(X==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";X="mediump"}return X==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const d=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext;let f=n.precision!==void 0?n.precision:"highp";const g=u(f);g!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",g,"instead."),f=g);const _=d||e.has("WEBGL_draw_buffers"),y=n.logarithmicDepthBuffer===!0,w=r.getParameter(34930),k=r.getParameter(35660),S=r.getParameter(3379),A=r.getParameter(34076),P=r.getParameter(34921),R=r.getParameter(36347),O=r.getParameter(36348),B=r.getParameter(36349),N=k>0,V=d||e.has("OES_texture_float"),U=N&&V,Y=d?r.getParameter(36183):0;return{isWebGL2:d,drawBuffers:_,getMaxAnisotropy:a,getMaxPrecision:u,precision:f,logarithmicDepthBuffer:y,maxTextures:w,maxVertexTextures:k,maxTextureSize:S,maxCubemapSize:A,maxAttributes:P,maxVertexUniforms:R,maxVaryings:O,maxFragmentUniforms:B,vertexTextures:N,floatFragmentTextures:V,floatVertexTextures:U,maxSamples:Y}}function XEe(r){const e=this;let n=null,s=0,a=!1,u=!1;const d=new Pd,f=new Ca,g={value:null,needsUpdate:!1};this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(w,k,S){const A=w.length!==0||k||s!==0||a;return a=k,n=y(w,S,0),s=w.length,A},this.beginShadows=function(){u=!0,y(null)},this.endShadows=function(){u=!1,_()},this.setState=function(w,k,S){const A=w.clippingPlanes,P=w.clipIntersection,R=w.clipShadows,O=r.get(w);if(!a||A===null||A.length===0||u&&!R)u?y(null):_();else{const B=u?0:s,N=B*4;let V=O.clippingState||null;g.value=V,V=y(A,k,N,S);for(let U=0;U!==N;++U)V[U]=n[U];O.clippingState=V,this.numIntersection=P?this.numPlanes:0,this.numPlanes+=B}};function _(){g.value!==n&&(g.value=n,g.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function y(w,k,S,A){const P=w!==null?w.length:0;let R=null;if(P!==0){if(R=g.value,A!==!0||R===null){const O=S+P*4,B=k.matrixWorldInverse;f.getNormalMatrix(B),(R===null||R.length<O)&&(R=new Float32Array(O));for(let N=0,V=S;N!==P;++N,V+=4)d.copy(w[N]).applyMatrix4(B,f),d.normal.toArray(R,V),R[V+3]=d.constant}g.value=R,g.needsUpdate=!0}return e.numPlanes=P,e.numIntersection=0,R}}function ZEe(r){let e=new WeakMap;function n(d,f){return f===$y?d.mapping=$d:f===qy&&(d.mapping=qd),d}function s(d){if(d&&d.isTexture&&d.isRenderTargetTexture===!1){const f=d.mapping;if(f===$y||f===qy)if(e.has(d)){const g=e.get(d).texture;return n(g,d.mapping)}else{const g=d.image;if(g&&g.height>0){const _=new zW(g.height/2);return _.fromEquirectangularTexture(r,d),e.set(d,_),d.addEventListener("dispose",a),n(_.texture,d.mapping)}else return null}}return d}function a(d){const f=d.target;f.removeEventListener("dispose",a);const g=e.get(f);g!==void 0&&(e.delete(f),g.dispose())}function u(){e=new WeakMap}return{get:s,dispose:u}}class x_ extends e5{constructor(e=-1,n=1,s=1,a=-1,u=.1,d=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=s,this.bottom=a,this.near=u,this.far=d,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,s,a,u,d){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=s,this.view.offsetY=a,this.view.width=u,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let u=s-e,d=s+e,f=a+n,g=a-n;if(this.view!==null&&this.view.enabled){const _=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=_*this.view.offsetX,d=u+_*this.view.width,f-=y*this.view.offsetY,g=f-y*this.view.height}this.projectionMatrix.makeOrthographic(u,d,f,g,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const ig=4,VN=[.125,.215,.35,.446,.526,.582],Ep=20,gE=new x_,WN=new qn;let vE=null;const bp=(1+Math.sqrt(5))/2,Y0=1/bp,zN=[new Re(1,1,1),new Re(-1,1,1),new Re(1,1,-1),new Re(-1,1,-1),new Re(0,bp,Y0),new Re(0,bp,-Y0),new Re(Y0,0,bp),new Re(-Y0,0,bp),new Re(bp,Y0,0),new Re(-bp,Y0,0)];class eM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,s=.1,a=100){vE=this._renderer.getRenderTarget(),this._setSize(256);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,s,a,u),n>0&&this._blur(u,0,0,n),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=HN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=GN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(vE),e.scissorTest=!1,gw(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===$d||e.mapping===qd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),vE=this._renderer.getRenderTarget();const s=n||this._allocateTargets();return this._textureToCubeUV(e,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,s={magFilter:Es,minFilter:Es,generateMipmaps:!1,type:Cg,format:Qa,encoding:Zd,depthBuffer:!1},a=UN(e,n,s);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=UN(e,n,s);const{_lodMax:u}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=KEe(u)),this._blurMaterial=JEe(u,e,n)}return a}_compileMaterial(e){const n=new So(this._lodPlanes[0],e);this._renderer.compile(n,gE)}_sceneToCubeUV(e,n,s,a){const f=new zs(90,1,n,s),g=[1,-1,1,1,1,1],_=[1,1,1,-1,-1,-1],y=this._renderer,w=y.autoClear,k=y.toneMapping;y.getClearColor(WN),y.toneMapping=lu,y.autoClear=!1;const S=new nf({name:"PMREM.Background",side:nl,depthWrite:!1,depthTest:!1}),A=new So(new rf,S);let P=!1;const R=e.background;R?R.isColor&&(S.color.copy(R),e.background=null,P=!0):(S.color.copy(WN),P=!0);for(let O=0;O<6;O++){const B=O%3;B===0?(f.up.set(0,g[O],0),f.lookAt(_[O],0,0)):B===1?(f.up.set(0,0,g[O]),f.lookAt(0,_[O],0)):(f.up.set(0,g[O],0),f.lookAt(0,0,_[O]));const N=this._cubeSize;gw(a,B*N,O>2?N:0,N,N),y.setRenderTarget(a),P&&y.render(A,f),y.render(e,f)}A.geometry.dispose(),A.material.dispose(),y.toneMapping=k,y.autoClear=w,e.background=R}_textureToCubeUV(e,n){const s=this._renderer,a=e.mapping===$d||e.mapping===qd;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=HN()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=GN());const u=a?this._cubemapMaterial:this._equirectMaterial,d=new So(this._lodPlanes[0],u),f=u.uniforms;f.envMap.value=e;const g=this._cubeSize;gw(n,0,0,3*g,2*g),s.setRenderTarget(n),s.render(d,gE)}_applyPMREM(e){const n=this._renderer,s=n.autoClear;n.autoClear=!1;for(let a=1;a<this._lodPlanes.length;a++){const u=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),d=zN[(a-1)%zN.length];this._blur(e,a-1,a,u,d)}n.autoClear=s}_blur(e,n,s,a,u){const d=this._pingPongRenderTarget;this._halfBlur(e,d,n,s,a,"latitudinal",u),this._halfBlur(d,e,s,s,a,"longitudinal",u)}_halfBlur(e,n,s,a,u,d,f){const g=this._renderer,_=this._blurMaterial;d!=="latitudinal"&&d!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const y=3,w=new So(this._lodPlanes[a],_),k=_.uniforms,S=this._sizeLods[s]-1,A=isFinite(u)?Math.PI/(2*S):2*Math.PI/(2*Ep-1),P=u/A,R=isFinite(u)?1+Math.floor(y*P):Ep;R>Ep&&console.warn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${R} samples when the maximum is set to ${Ep}`);const O=[];let B=0;for(let X=0;X<Ep;++X){const $=X/P,ee=Math.exp(-$*$/2);O.push(ee),X===0?B+=ee:X<R&&(B+=2*ee)}for(let X=0;X<O.length;X++)O[X]=O[X]/B;k.envMap.value=e.texture,k.samples.value=R,k.weights.value=O,k.latitudinal.value=d==="latitudinal",f&&(k.poleAxis.value=f);const{_lodMax:N}=this;k.dTheta.value=A,k.mipInt.value=N-s;const V=this._sizeLods[a],U=3*V*(a>N-ig?a-N+ig:0),Y=4*(this._cubeSize-V);gw(n,U,Y,3*V,2*V),g.setRenderTarget(n),g.render(w,gE)}}function KEe(r){const e=[],n=[],s=[];let a=r;const u=r-ig+1+VN.length;for(let d=0;d<u;d++){const f=Math.pow(2,a);n.push(f);let g=1/f;d>r-ig?g=VN[d-r+ig-1]:d===0&&(g=0),s.push(g);const _=1/(f-2),y=-_,w=1+_,k=[y,y,w,y,w,w,y,y,w,w,y,w],S=6,A=6,P=3,R=2,O=1,B=new Float32Array(P*A*S),N=new Float32Array(R*A*S),V=new Float32Array(O*A*S);for(let Y=0;Y<S;Y++){const X=Y%3*2/3-1,$=Y>2?0:-1,ee=[X,$,0,X+2/3,$,0,X+2/3,$+1,0,X,$,0,X+2/3,$+1,0,X,$+1,0];B.set(ee,P*A*Y),N.set(k,R*A*Y);const ue=[Y,Y,Y,Y,Y,Y];V.set(ue,O*A*Y)}const U=new ir;U.setAttribute("position",new Wr(B,P)),U.setAttribute("uv",new Wr(N,R)),U.setAttribute("faceIndex",new Wr(V,O)),e.push(U),a>ig&&a--}return{lodPlanes:e,sizeLods:n,sigmas:s}}function UN(r,e,n){const s=new Tl(r,e,n);return s.texture.mapping=Rg,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function gw(r,e,n,s,a){r.viewport.set(e,n,s,a),r.scissor.set(e,n,s,a)}function JEe(r,e,n){const s=new Float32Array(Ep),a=new Re(0,1,0);return new fu({name:"SphericalGaussianBlur",defines:{n:Ep,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:E6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:xh,depthTest:!1,depthWrite:!1})}function GN(){return new fu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:E6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:xh,depthTest:!1,depthWrite:!1})}function HN(){return new fu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:E6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:xh,depthTest:!1,depthWrite:!1})}function E6(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function QEe(r){let e=new WeakMap,n=null;function s(f){if(f&&f.isTexture){const g=f.mapping,_=g===$y||g===qy,y=g===$d||g===qd;if(_||y)if(f.isRenderTargetTexture&&f.needsPMREMUpdate===!0){f.needsPMREMUpdate=!1;let w=e.get(f);return n===null&&(n=new eM(r)),w=_?n.fromEquirectangular(f,w):n.fromCubemap(f,w),e.set(f,w),w.texture}else{if(e.has(f))return e.get(f).texture;{const w=f.image;if(_&&w&&w.height>0||y&&w&&a(w)){n===null&&(n=new eM(r));const k=_?n.fromEquirectangular(f):n.fromCubemap(f);return e.set(f,k),f.addEventListener("dispose",u),k.texture}else return null}}}return f}function a(f){let g=0;const _=6;for(let y=0;y<_;y++)f[y]!==void 0&&g++;return g===_}function u(f){const g=f.target;g.removeEventListener("dispose",u);const _=e.get(g);_!==void 0&&(e.delete(g),_.dispose())}function d(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:s,dispose:d}}function eTe(r){const e={};function n(s){if(e[s]!==void 0)return e[s];let a;switch(s){case"WEBGL_depth_texture":a=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=r.getExtension(s)}return e[s]=a,a}return{has:function(s){return n(s)!==null},init:function(s){s.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(s){const a=n(s);return a===null&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),a}}}function tTe(r,e,n,s){const a={},u=new WeakMap;function d(w){const k=w.target;k.index!==null&&e.remove(k.index);for(const A in k.attributes)e.remove(k.attributes[A]);k.removeEventListener("dispose",d),delete a[k.id];const S=u.get(k);S&&(e.remove(S),u.delete(k)),s.releaseStatesOfGeometry(k),k.isInstancedBufferGeometry===!0&&delete k._maxInstanceCount,n.memory.geometries--}function f(w,k){return a[k.id]===!0||(k.addEventListener("dispose",d),a[k.id]=!0,n.memory.geometries++),k}function g(w){const k=w.attributes;for(const A in k)e.update(k[A],34962);const S=w.morphAttributes;for(const A in S){const P=S[A];for(let R=0,O=P.length;R<O;R++)e.update(P[R],34962)}}function _(w){const k=[],S=w.index,A=w.attributes.position;let P=0;if(S!==null){const B=S.array;P=S.version;for(let N=0,V=B.length;N<V;N+=3){const U=B[N+0],Y=B[N+1],X=B[N+2];k.push(U,Y,Y,X,X,U)}}else{const B=A.array;P=A.version;for(let N=0,V=B.length/3-1;N<V;N+=3){const U=N+0,Y=N+1,X=N+2;k.push(U,Y,Y,X,X,U)}}const R=new(FW(k)?S6:C6)(k,1);R.version=P;const O=u.get(w);O&&e.remove(O),u.set(w,R)}function y(w){const k=u.get(w);if(k){const S=w.index;S!==null&&k.version<S.version&&_(w)}else _(w);return u.get(w)}return{get:f,update:g,getWireframeAttribute:y}}function nTe(r,e,n,s){const a=s.isWebGL2;let u;function d(k){u=k}let f,g;function _(k){f=k.type,g=k.bytesPerElement}function y(k,S){r.drawElements(u,S,f,k*g),n.update(S,u,1)}function w(k,S,A){if(A===0)return;let P,R;if(a)P=r,R="drawElementsInstanced";else if(P=e.get("ANGLE_instanced_arrays"),R="drawElementsInstancedANGLE",P===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}P[R](u,S,f,k*g,A),n.update(S,u,A)}this.setMode=d,this.setIndex=_,this.render=y,this.renderInstances=w}function iTe(r){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function s(u,d,f){switch(n.calls++,d){case 4:n.triangles+=f*(u/3);break;case 1:n.lines+=f*(u/2);break;case 3:n.lines+=f*(u-1);break;case 2:n.lines+=f*u;break;case 0:n.points+=f*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d);break}}function a(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:a,update:s}}function rTe(r,e){return r[0]-e[0]}function sTe(r,e){return Math.abs(e[1])-Math.abs(r[1])}function oTe(r,e,n){const s={},a=new Float32Array(8),u=new WeakMap,d=new Ar,f=[];for(let _=0;_<8;_++)f[_]=[_,0];function g(_,y,w,k){const S=_.morphTargetInfluences;if(e.isWebGL2===!0){const A=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,P=A!==void 0?A.length:0;let R=u.get(y);if(R===void 0||R.count!==P){let it=function(){$e.dispose(),u.delete(y),y.removeEventListener("dispose",it)};R!==void 0&&R.texture.dispose();const N=y.morphAttributes.position!==void 0,V=y.morphAttributes.normal!==void 0,U=y.morphAttributes.color!==void 0,Y=y.morphAttributes.position||[],X=y.morphAttributes.normal||[],$=y.morphAttributes.color||[];let ee=0;N===!0&&(ee=1),V===!0&&(ee=2),U===!0&&(ee=3);let ue=y.attributes.position.count*ee,Te=1;ue>e.maxTextureSize&&(Te=Math.ceil(ue/e.maxTextureSize),ue=e.maxTextureSize);const De=new Float32Array(ue*Te*4*P),$e=new y_(De,ue,Te,P);$e.type=_h,$e.needsUpdate=!0;const Ue=ee*4;for(let tt=0;tt<P;tt++){const St=Y[tt],ve=X[tt],ne=$[tt],me=ue*Te*4*tt;for(let qe=0;qe<St.count;qe++){const Se=qe*Ue;N===!0&&(d.fromBufferAttribute(St,qe),De[me+Se+0]=d.x,De[me+Se+1]=d.y,De[me+Se+2]=d.z,De[me+Se+3]=0),V===!0&&(d.fromBufferAttribute(ve,qe),De[me+Se+4]=d.x,De[me+Se+5]=d.y,De[me+Se+6]=d.z,De[me+Se+7]=0),U===!0&&(d.fromBufferAttribute(ne,qe),De[me+Se+8]=d.x,De[me+Se+9]=d.y,De[me+Se+10]=d.z,De[me+Se+11]=ne.itemSize===4?d.w:1)}}R={count:P,texture:$e,size:new _n(ue,Te)},u.set(y,R),y.addEventListener("dispose",it)}let O=0;for(let N=0;N<S.length;N++)O+=S[N];const B=y.morphTargetsRelative?1:1-O;k.getUniforms().setValue(r,"morphTargetBaseInfluence",B),k.getUniforms().setValue(r,"morphTargetInfluences",S),k.getUniforms().setValue(r,"morphTargetsTexture",R.texture,n),k.getUniforms().setValue(r,"morphTargetsTextureSize",R.size)}else{const A=S===void 0?0:S.length;let P=s[y.id];if(P===void 0||P.length!==A){P=[];for(let V=0;V<A;V++)P[V]=[V,0];s[y.id]=P}for(let V=0;V<A;V++){const U=P[V];U[0]=V,U[1]=S[V]}P.sort(sTe);for(let V=0;V<8;V++)V<A&&P[V][1]?(f[V][0]=P[V][0],f[V][1]=P[V][1]):(f[V][0]=Number.MAX_SAFE_INTEGER,f[V][1]=0);f.sort(rTe);const R=y.morphAttributes.position,O=y.morphAttributes.normal;let B=0;for(let V=0;V<8;V++){const U=f[V],Y=U[0],X=U[1];Y!==Number.MAX_SAFE_INTEGER&&X?(R&&y.getAttribute("morphTarget"+V)!==R[Y]&&y.setAttribute("morphTarget"+V,R[Y]),O&&y.getAttribute("morphNormal"+V)!==O[Y]&&y.setAttribute("morphNormal"+V,O[Y]),a[V]=X,B+=X):(R&&y.hasAttribute("morphTarget"+V)===!0&&y.deleteAttribute("morphTarget"+V),O&&y.hasAttribute("morphNormal"+V)===!0&&y.deleteAttribute("morphNormal"+V),a[V]=0)}const N=y.morphTargetsRelative?1:1-B;k.getUniforms().setValue(r,"morphTargetBaseInfluence",N),k.getUniforms().setValue(r,"morphTargetInfluences",a)}}return{update:g}}function aTe(r,e,n,s){let a=new WeakMap;function u(g){const _=s.render.frame,y=g.geometry,w=e.get(g,y);return a.get(w)!==_&&(e.update(w),a.set(w,_)),g.isInstancedMesh&&(g.hasEventListener("dispose",f)===!1&&g.addEventListener("dispose",f),n.update(g.instanceMatrix,34962),g.instanceColor!==null&&n.update(g.instanceColor,34962)),w}function d(){a=new WeakMap}function f(g){const _=g.target;_.removeEventListener("dispose",f),n.remove(_.instanceMatrix),_.instanceColor!==null&&n.remove(_.instanceColor)}return{update:u,dispose:d}}const GW=new to,HW=new y_,YW=new J3,jW=new b_,YN=[],jN=[],$N=new Float32Array(16),qN=new Float32Array(9),XN=new Float32Array(4);function Dg(r,e,n){const s=r[0];if(s<=0||s>0)return r;const a=e*n;let u=YN[a];if(u===void 0&&(u=new Float32Array(a),YN[a]=u),e!==0){s.toArray(u,0);for(let d=1,f=0;d!==e;++d)f+=n,r[d].toArray(u,f)}return u}function no(r,e){if(r.length!==e.length)return!1;for(let n=0,s=r.length;n<s;n++)if(r[n]!==e[n])return!1;return!0}function io(r,e){for(let n=0,s=e.length;n<s;n++)r[n]=e[n]}function n5(r,e){let n=jN[e];n===void 0&&(n=new Int32Array(e),jN[e]=n);for(let s=0;s!==e;++s)n[s]=r.allocateTextureUnit();return n}function lTe(r,e){const n=this.cache;n[0]!==e&&(r.uniform1f(this.addr,e),n[0]=e)}function cTe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(no(n,e))return;r.uniform2fv(this.addr,e),io(n,e)}}function uTe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(no(n,e))return;r.uniform3fv(this.addr,e),io(n,e)}}function hTe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(no(n,e))return;r.uniform4fv(this.addr,e),io(n,e)}}function dTe(r,e){const n=this.cache,s=e.elements;if(s===void 0){if(no(n,e))return;r.uniformMatrix2fv(this.addr,!1,e),io(n,e)}else{if(no(n,s))return;XN.set(s),r.uniformMatrix2fv(this.addr,!1,XN),io(n,s)}}function fTe(r,e){const n=this.cache,s=e.elements;if(s===void 0){if(no(n,e))return;r.uniformMatrix3fv(this.addr,!1,e),io(n,e)}else{if(no(n,s))return;qN.set(s),r.uniformMatrix3fv(this.addr,!1,qN),io(n,s)}}function pTe(r,e){const n=this.cache,s=e.elements;if(s===void 0){if(no(n,e))return;r.uniformMatrix4fv(this.addr,!1,e),io(n,e)}else{if(no(n,s))return;$N.set(s),r.uniformMatrix4fv(this.addr,!1,$N),io(n,s)}}function mTe(r,e){const n=this.cache;n[0]!==e&&(r.uniform1i(this.addr,e),n[0]=e)}function gTe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(no(n,e))return;r.uniform2iv(this.addr,e),io(n,e)}}function vTe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(no(n,e))return;r.uniform3iv(this.addr,e),io(n,e)}}function yTe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(no(n,e))return;r.uniform4iv(this.addr,e),io(n,e)}}function _Te(r,e){const n=this.cache;n[0]!==e&&(r.uniform1ui(this.addr,e),n[0]=e)}function bTe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(no(n,e))return;r.uniform2uiv(this.addr,e),io(n,e)}}function xTe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(no(n,e))return;r.uniform3uiv(this.addr,e),io(n,e)}}function wTe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(no(n,e))return;r.uniform4uiv(this.addr,e),io(n,e)}}function kTe(r,e,n){const s=this.cache,a=n.allocateTextureUnit();s[0]!==a&&(r.uniform1i(this.addr,a),s[0]=a),n.setTexture2D(e||GW,a)}function CTe(r,e,n){const s=this.cache,a=n.allocateTextureUnit();s[0]!==a&&(r.uniform1i(this.addr,a),s[0]=a),n.setTexture3D(e||YW,a)}function STe(r,e,n){const s=this.cache,a=n.allocateTextureUnit();s[0]!==a&&(r.uniform1i(this.addr,a),s[0]=a),n.setTextureCube(e||jW,a)}function ETe(r,e,n){const s=this.cache,a=n.allocateTextureUnit();s[0]!==a&&(r.uniform1i(this.addr,a),s[0]=a),n.setTexture2DArray(e||HW,a)}function TTe(r){switch(r){case 5126:return lTe;case 35664:return cTe;case 35665:return uTe;case 35666:return hTe;case 35674:return dTe;case 35675:return fTe;case 35676:return pTe;case 5124:case 35670:return mTe;case 35667:case 35671:return gTe;case 35668:case 35672:return vTe;case 35669:case 35673:return yTe;case 5125:return _Te;case 36294:return bTe;case 36295:return xTe;case 36296:return wTe;case 35678:case 36198:case 36298:case 36306:case 35682:return kTe;case 35679:case 36299:case 36307:return CTe;case 35680:case 36300:case 36308:case 36293:return STe;case 36289:case 36303:case 36311:case 36292:return ETe}}function MTe(r,e){r.uniform1fv(this.addr,e)}function ATe(r,e){const n=Dg(e,this.size,2);r.uniform2fv(this.addr,n)}function LTe(r,e){const n=Dg(e,this.size,3);r.uniform3fv(this.addr,n)}function RTe(r,e){const n=Dg(e,this.size,4);r.uniform4fv(this.addr,n)}function PTe(r,e){const n=Dg(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,n)}function ITe(r,e){const n=Dg(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,n)}function DTe(r,e){const n=Dg(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,n)}function NTe(r,e){r.uniform1iv(this.addr,e)}function OTe(r,e){r.uniform2iv(this.addr,e)}function FTe(r,e){r.uniform3iv(this.addr,e)}function BTe(r,e){r.uniform4iv(this.addr,e)}function VTe(r,e){r.uniform1uiv(this.addr,e)}function WTe(r,e){r.uniform2uiv(this.addr,e)}function zTe(r,e){r.uniform3uiv(this.addr,e)}function UTe(r,e){r.uniform4uiv(this.addr,e)}function GTe(r,e,n){const s=this.cache,a=e.length,u=n5(n,a);no(s,u)||(r.uniform1iv(this.addr,u),io(s,u));for(let d=0;d!==a;++d)n.setTexture2D(e[d]||GW,u[d])}function HTe(r,e,n){const s=this.cache,a=e.length,u=n5(n,a);no(s,u)||(r.uniform1iv(this.addr,u),io(s,u));for(let d=0;d!==a;++d)n.setTexture3D(e[d]||YW,u[d])}function YTe(r,e,n){const s=this.cache,a=e.length,u=n5(n,a);no(s,u)||(r.uniform1iv(this.addr,u),io(s,u));for(let d=0;d!==a;++d)n.setTextureCube(e[d]||jW,u[d])}function jTe(r,e,n){const s=this.cache,a=e.length,u=n5(n,a);no(s,u)||(r.uniform1iv(this.addr,u),io(s,u));for(let d=0;d!==a;++d)n.setTexture2DArray(e[d]||HW,u[d])}function $Te(r){switch(r){case 5126:return MTe;case 35664:return ATe;case 35665:return LTe;case 35666:return RTe;case 35674:return PTe;case 35675:return ITe;case 35676:return DTe;case 5124:case 35670:return NTe;case 35667:case 35671:return OTe;case 35668:case 35672:return FTe;case 35669:case 35673:return BTe;case 5125:return VTe;case 36294:return WTe;case 36295:return zTe;case 36296:return UTe;case 35678:case 36198:case 36298:case 36306:case 35682:return GTe;case 35679:case 36299:case 36307:return HTe;case 35680:case 36300:case 36308:case 36293:return YTe;case 36289:case 36303:case 36311:case 36292:return jTe}}class qTe{constructor(e,n,s){this.id=e,this.addr=s,this.cache=[],this.setValue=TTe(n.type)}}class XTe{constructor(e,n,s){this.id=e,this.addr=s,this.cache=[],this.size=n.size,this.setValue=$Te(n.type)}}class ZTe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,s){const a=this.seq;for(let u=0,d=a.length;u!==d;++u){const f=a[u];f.setValue(e,n[f.id],s)}}}const yE=/(\w+)(\])?(\[|\.)?/g;function ZN(r,e){r.seq.push(e),r.map[e.id]=e}function KTe(r,e,n){const s=r.name,a=s.length;for(yE.lastIndex=0;;){const u=yE.exec(s),d=yE.lastIndex;let f=u[1];const g=u[2]==="]",_=u[3];if(g&&(f=f|0),_===void 0||_==="["&&d+2===a){ZN(n,_===void 0?new qTe(f,r,e):new XTe(f,r,e));break}else{let w=n.map[f];w===void 0&&(w=new ZTe(f),ZN(n,w)),n=w}}}class i3{constructor(e,n){this.seq=[],this.map={};const s=e.getProgramParameter(n,35718);for(let a=0;a<s;++a){const u=e.getActiveUniform(n,a),d=e.getUniformLocation(n,u.name);KTe(u,d,this)}}setValue(e,n,s,a){const u=this.map[n];u!==void 0&&u.setValue(e,s,a)}setOptional(e,n,s){const a=n[s];a!==void 0&&this.setValue(e,s,a)}static upload(e,n,s,a){for(let u=0,d=n.length;u!==d;++u){const f=n[u],g=s[f.id];g.needsUpdate!==!1&&f.setValue(e,g.value,a)}}static seqWithValue(e,n){const s=[];for(let a=0,u=e.length;a!==u;++a){const d=e[a];d.id in n&&s.push(d)}return s}}function KN(r,e,n){const s=r.createShader(e);return r.shaderSource(s,n),r.compileShader(s),s}let JTe=0;function QTe(r,e){const n=r.split(`
`),s=[],a=Math.max(e-6,0),u=Math.min(e+6,n.length);for(let d=a;d<u;d++){const f=d+1;s.push(`${f===e?">":" "} ${f}: ${n[d]}`)}return s.join(`
`)}function eMe(r){switch(r){case Zd:return["Linear","( value )"];case as:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function JN(r,e,n){const s=r.getShaderParameter(e,35713),a=r.getShaderInfoLog(e).trim();if(s&&a==="")return"";const u=/ERROR: 0:(\d+)/.exec(a);if(u){const d=parseInt(u[1]);return n.toUpperCase()+`

`+a+`

`+QTe(r.getShaderSource(e),d)}else return a}function tMe(r,e){const n=eMe(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function nMe(r,e){let n;switch(e){case cW:n="Linear";break;case uW:n="Reinhard";break;case hW:n="OptimizedCineon";break;case dW:n="ACESFilmic";break;case fW:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+r+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function iMe(r){return[r.extensionDerivatives||!!r.envMapCubeUVHeight||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(fy).join(`
`)}function rMe(r){const e=[];for(const n in r){const s=r[n];s!==!1&&e.push("#define "+n+" "+s)}return e.join(`
`)}function sMe(r,e){const n={},s=r.getProgramParameter(e,35721);for(let a=0;a<s;a++){const u=r.getActiveAttrib(e,a),d=u.name;let f=1;u.type===35674&&(f=2),u.type===35675&&(f=3),u.type===35676&&(f=4),n[d]={type:u.type,location:r.getAttribLocation(e,d),locationSize:f}}return n}function fy(r){return r!==""}function QN(r,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function eO(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const oMe=/^[ \t]*#include +<([\w\d./]+)>/gm;function tM(r){return r.replace(oMe,aMe)}function aMe(r,e){const n=Ji[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return tM(n)}const lMe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function tO(r){return r.replace(lMe,cMe)}function cMe(r,e,n,s){let a="";for(let u=parseInt(e);u<parseInt(n);u++)a+=s.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return a}function nO(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function uMe(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===m6?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===g6?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===tg&&(e="SHADOWMAP_TYPE_VSM"),e}function hMe(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case $d:case qd:e="ENVMAP_TYPE_CUBE";break;case Rg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dMe(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case qd:e="ENVMAP_MODE_REFRACTION";break}return e}function fMe(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case v_:e="ENVMAP_BLENDING_MULTIPLY";break;case aW:e="ENVMAP_BLENDING_MIX";break;case lW:e="ENVMAP_BLENDING_ADD";break}return e}function pMe(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,s=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:s,maxMip:n}}function mMe(r,e,n,s){const a=r.getContext(),u=n.defines;let d=n.vertexShader,f=n.fragmentShader;const g=uMe(n),_=hMe(n),y=dMe(n),w=fMe(n),k=pMe(n),S=n.isWebGL2?"":iMe(n),A=rMe(u),P=a.createProgram();let R,O,B=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(R=[A].filter(fy).join(`
`),R.length>0&&(R+=`
`),O=[S,A].filter(fy).join(`
`),O.length>0&&(O+=`
`)):(R=[nO(n),"#define SHADER_NAME "+n.shaderName,A,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+y:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+g:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(fy).join(`
`),O=[S,nO(n),"#define SHADER_NAME "+n.shaderName,A,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+_:"",n.envMap?"#define "+y:"",n.envMap?"#define "+w:"",k?"#define CUBEUV_TEXEL_WIDTH "+k.texelWidth:"",k?"#define CUBEUV_TEXEL_HEIGHT "+k.texelHeight:"",k?"#define CUBEUV_MAX_MIP "+k.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+g:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==lu?"#define TONE_MAPPING":"",n.toneMapping!==lu?Ji.tonemapping_pars_fragment:"",n.toneMapping!==lu?nMe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ji.encodings_pars_fragment,tMe("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(fy).join(`
`)),d=tM(d),d=QN(d,n),d=eO(d,n),f=tM(f),f=QN(f,n),f=eO(f,n),d=tO(d),f=tO(f),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(B=`#version 300 es
`,R=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+R,O=["#define varying in",n.glslVersion===JT?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===JT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+O);const N=B+R+d,V=B+O+f,U=KN(a,35633,N),Y=KN(a,35632,V);if(a.attachShader(P,U),a.attachShader(P,Y),n.index0AttributeName!==void 0?a.bindAttribLocation(P,0,n.index0AttributeName):n.morphTargets===!0&&a.bindAttribLocation(P,0,"position"),a.linkProgram(P),r.debug.checkShaderErrors){const ee=a.getProgramInfoLog(P).trim(),ue=a.getShaderInfoLog(U).trim(),Te=a.getShaderInfoLog(Y).trim();let De=!0,$e=!0;if(a.getProgramParameter(P,35714)===!1){De=!1;const Ue=JN(a,U,"vertex"),it=JN(a,Y,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(P,35715)+`

Program Info Log: `+ee+`
`+Ue+`
`+it)}else ee!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ee):(ue===""||Te==="")&&($e=!1);$e&&(this.diagnostics={runnable:De,programLog:ee,vertexShader:{log:ue,prefix:R},fragmentShader:{log:Te,prefix:O}})}a.deleteShader(U),a.deleteShader(Y);let X;this.getUniforms=function(){return X===void 0&&(X=new i3(a,P)),X};let $;return this.getAttributes=function(){return $===void 0&&($=sMe(a,P)),$},this.destroy=function(){s.releaseStatesOfProgram(this),a.deleteProgram(P),this.program=void 0},this.name=n.shaderName,this.id=JTe++,this.cacheKey=e,this.usedTimes=1,this.program=P,this.vertexShader=U,this.fragmentShader=Y,this}let gMe=0;class vMe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,s=e.fragmentShader,a=this._getShaderStage(n),u=this._getShaderStage(s),d=this._getShaderCacheForMaterial(e);return d.has(a)===!1&&(d.add(a),a.usedTimes++),d.has(u)===!1&&(d.add(u),u.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const s of n)s.usedTimes--,s.usedTimes===0&&this.shaderCache.delete(s.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let s=n.get(e);return s===void 0&&(s=new Set,n.set(e,s)),s}_getShaderStage(e){const n=this.shaderCache;let s=n.get(e);return s===void 0&&(s=new yMe(e),n.set(e,s)),s}}class yMe{constructor(e){this.id=gMe++,this.code=e,this.usedTimes=0}}function _Me(r,e,n,s,a,u,d){const f=new Q3,g=new vMe,_=[],y=a.isWebGL2,w=a.logarithmicDepthBuffer,k=a.vertexTextures;let S=a.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function P($,ee,ue,Te,De){const $e=Te.fog,Ue=De.geometry,it=$.isMeshStandardMaterial?Te.environment:null,tt=($.isMeshStandardMaterial?n:e).get($.envMap||it),St=!!tt&&tt.mapping===Rg?tt.image.height:null,ve=A[$.type];$.precision!==null&&(S=a.getMaxPrecision($.precision),S!==$.precision&&console.warn("THREE.WebGLProgram.getParameters:",$.precision,"not supported, using",S,"instead."));const ne=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,me=ne!==void 0?ne.length:0;let qe=0;Ue.morphAttributes.position!==void 0&&(qe=1),Ue.morphAttributes.normal!==void 0&&(qe=2),Ue.morphAttributes.color!==void 0&&(qe=3);let Se,gt,Xt,He;if(ve){const Ot=fc[ve];Se=Ot.vertexShader,gt=Ot.fragmentShader}else Se=$.vertexShader,gt=$.fragmentShader,g.update($),Xt=g.getVertexShaderID($),He=g.getFragmentShaderID($);const Fe=r.getRenderTarget(),pt=$.alphaTest>0,Rt=$.clearcoat>0,Vt=$.iridescence>0;return{isWebGL2:y,shaderID:ve,shaderName:$.type,vertexShader:Se,fragmentShader:gt,defines:$.defines,customVertexShaderID:Xt,customFragmentShaderID:He,isRawShaderMaterial:$.isRawShaderMaterial===!0,glslVersion:$.glslVersion,precision:S,instancing:De.isInstancedMesh===!0,instancingColor:De.isInstancedMesh===!0&&De.instanceColor!==null,supportsVertexTextures:k,outputEncoding:Fe===null?r.outputEncoding:Fe.isXRRenderTarget===!0?Fe.texture.encoding:Zd,map:!!$.map,matcap:!!$.matcap,envMap:!!tt,envMapMode:tt&&tt.mapping,envMapCubeUVHeight:St,lightMap:!!$.lightMap,aoMap:!!$.aoMap,emissiveMap:!!$.emissiveMap,bumpMap:!!$.bumpMap,normalMap:!!$.normalMap,objectSpaceNormalMap:$.normalMapType===DW,tangentSpaceNormalMap:$.normalMapType===tf,decodeVideoTexture:!!$.map&&$.map.isVideoTexture===!0&&$.map.encoding===as,clearcoat:Rt,clearcoatMap:Rt&&!!$.clearcoatMap,clearcoatRoughnessMap:Rt&&!!$.clearcoatRoughnessMap,clearcoatNormalMap:Rt&&!!$.clearcoatNormalMap,iridescence:Vt,iridescenceMap:Vt&&!!$.iridescenceMap,iridescenceThicknessMap:Vt&&!!$.iridescenceThicknessMap,displacementMap:!!$.displacementMap,roughnessMap:!!$.roughnessMap,metalnessMap:!!$.metalnessMap,specularMap:!!$.specularMap,specularIntensityMap:!!$.specularIntensityMap,specularColorMap:!!$.specularColorMap,opaque:$.transparent===!1&&$.blending===Fp,alphaMap:!!$.alphaMap,alphaTest:pt,gradientMap:!!$.gradientMap,sheen:$.sheen>0,sheenColorMap:!!$.sheenColorMap,sheenRoughnessMap:!!$.sheenRoughnessMap,transmission:$.transmission>0,transmissionMap:!!$.transmissionMap,thicknessMap:!!$.thicknessMap,combine:$.combine,vertexTangents:!!$.normalMap&&!!Ue.attributes.tangent,vertexColors:$.vertexColors,vertexAlphas:$.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,vertexUvs:!!$.map||!!$.bumpMap||!!$.normalMap||!!$.specularMap||!!$.alphaMap||!!$.emissiveMap||!!$.roughnessMap||!!$.metalnessMap||!!$.clearcoatMap||!!$.clearcoatRoughnessMap||!!$.clearcoatNormalMap||!!$.iridescenceMap||!!$.iridescenceThicknessMap||!!$.displacementMap||!!$.transmissionMap||!!$.thicknessMap||!!$.specularIntensityMap||!!$.specularColorMap||!!$.sheenColorMap||!!$.sheenRoughnessMap,uvsVertexOnly:!(!!$.map||!!$.bumpMap||!!$.normalMap||!!$.specularMap||!!$.alphaMap||!!$.emissiveMap||!!$.roughnessMap||!!$.metalnessMap||!!$.clearcoatNormalMap||!!$.iridescenceMap||!!$.iridescenceThicknessMap||$.transmission>0||!!$.transmissionMap||!!$.thicknessMap||!!$.specularIntensityMap||!!$.specularColorMap||$.sheen>0||!!$.sheenColorMap||!!$.sheenRoughnessMap)&&!!$.displacementMap,fog:!!$e,useFog:$.fog===!0,fogExp2:$e&&$e.isFogExp2,flatShading:!!$.flatShading,sizeAttenuation:$.sizeAttenuation,logarithmicDepthBuffer:w,skinning:De.isSkinnedMesh===!0,morphTargets:Ue.morphAttributes.position!==void 0,morphNormals:Ue.morphAttributes.normal!==void 0,morphColors:Ue.morphAttributes.color!==void 0,morphTargetsCount:me,morphTextureStride:qe,numDirLights:ee.directional.length,numPointLights:ee.point.length,numSpotLights:ee.spot.length,numSpotLightMaps:ee.spotLightMap.length,numRectAreaLights:ee.rectArea.length,numHemiLights:ee.hemi.length,numDirLightShadows:ee.directionalShadowMap.length,numPointLightShadows:ee.pointShadowMap.length,numSpotLightShadows:ee.spotShadowMap.length,numSpotLightShadowsWithMaps:ee.numSpotLightShadowsWithMaps,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:$.dithering,shadowMapEnabled:r.shadowMap.enabled&&ue.length>0,shadowMapType:r.shadowMap.type,toneMapping:$.toneMapped?r.toneMapping:lu,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:$.premultipliedAlpha,doubleSided:$.side===yh,flipSided:$.side===nl,useDepthPacking:!!$.depthPacking,depthPacking:$.depthPacking||0,index0AttributeName:$.index0AttributeName,extensionDerivatives:$.extensions&&$.extensions.derivatives,extensionFragDepth:$.extensions&&$.extensions.fragDepth,extensionDrawBuffers:$.extensions&&$.extensions.drawBuffers,extensionShaderTextureLOD:$.extensions&&$.extensions.shaderTextureLOD,rendererExtensionFragDepth:y||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:y||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:y||s.has("EXT_shader_texture_lod"),customProgramCacheKey:$.customProgramCacheKey()}}function R($){const ee=[];if($.shaderID?ee.push($.shaderID):(ee.push($.customVertexShaderID),ee.push($.customFragmentShaderID)),$.defines!==void 0)for(const ue in $.defines)ee.push(ue),ee.push($.defines[ue]);return $.isRawShaderMaterial===!1&&(O(ee,$),B(ee,$),ee.push(r.outputEncoding)),ee.push($.customProgramCacheKey),ee.join()}function O($,ee){$.push(ee.precision),$.push(ee.outputEncoding),$.push(ee.envMapMode),$.push(ee.envMapCubeUVHeight),$.push(ee.combine),$.push(ee.vertexUvs),$.push(ee.fogExp2),$.push(ee.sizeAttenuation),$.push(ee.morphTargetsCount),$.push(ee.morphAttributeCount),$.push(ee.numDirLights),$.push(ee.numPointLights),$.push(ee.numSpotLights),$.push(ee.numSpotLightMaps),$.push(ee.numHemiLights),$.push(ee.numRectAreaLights),$.push(ee.numDirLightShadows),$.push(ee.numPointLightShadows),$.push(ee.numSpotLightShadows),$.push(ee.numSpotLightShadowsWithMaps),$.push(ee.shadowMapType),$.push(ee.toneMapping),$.push(ee.numClippingPlanes),$.push(ee.numClipIntersection),$.push(ee.depthPacking)}function B($,ee){f.disableAll(),ee.isWebGL2&&f.enable(0),ee.supportsVertexTextures&&f.enable(1),ee.instancing&&f.enable(2),ee.instancingColor&&f.enable(3),ee.map&&f.enable(4),ee.matcap&&f.enable(5),ee.envMap&&f.enable(6),ee.lightMap&&f.enable(7),ee.aoMap&&f.enable(8),ee.emissiveMap&&f.enable(9),ee.bumpMap&&f.enable(10),ee.normalMap&&f.enable(11),ee.objectSpaceNormalMap&&f.enable(12),ee.tangentSpaceNormalMap&&f.enable(13),ee.clearcoat&&f.enable(14),ee.clearcoatMap&&f.enable(15),ee.clearcoatRoughnessMap&&f.enable(16),ee.clearcoatNormalMap&&f.enable(17),ee.iridescence&&f.enable(18),ee.iridescenceMap&&f.enable(19),ee.iridescenceThicknessMap&&f.enable(20),ee.displacementMap&&f.enable(21),ee.specularMap&&f.enable(22),ee.roughnessMap&&f.enable(23),ee.metalnessMap&&f.enable(24),ee.gradientMap&&f.enable(25),ee.alphaMap&&f.enable(26),ee.alphaTest&&f.enable(27),ee.vertexColors&&f.enable(28),ee.vertexAlphas&&f.enable(29),ee.vertexUvs&&f.enable(30),ee.vertexTangents&&f.enable(31),ee.uvsVertexOnly&&f.enable(32),$.push(f.mask),f.disableAll(),ee.fog&&f.enable(0),ee.useFog&&f.enable(1),ee.flatShading&&f.enable(2),ee.logarithmicDepthBuffer&&f.enable(3),ee.skinning&&f.enable(4),ee.morphTargets&&f.enable(5),ee.morphNormals&&f.enable(6),ee.morphColors&&f.enable(7),ee.premultipliedAlpha&&f.enable(8),ee.shadowMapEnabled&&f.enable(9),ee.physicallyCorrectLights&&f.enable(10),ee.doubleSided&&f.enable(11),ee.flipSided&&f.enable(12),ee.useDepthPacking&&f.enable(13),ee.dithering&&f.enable(14),ee.specularIntensityMap&&f.enable(15),ee.specularColorMap&&f.enable(16),ee.transmission&&f.enable(17),ee.transmissionMap&&f.enable(18),ee.thicknessMap&&f.enable(19),ee.sheen&&f.enable(20),ee.sheenColorMap&&f.enable(21),ee.sheenRoughnessMap&&f.enable(22),ee.decodeVideoTexture&&f.enable(23),ee.opaque&&f.enable(24),$.push(f.mask)}function N($){const ee=A[$.type];let ue;if(ee){const Te=fc[ee];ue=VW.clone(Te.uniforms)}else ue=$.uniforms;return ue}function V($,ee){let ue;for(let Te=0,De=_.length;Te<De;Te++){const $e=_[Te];if($e.cacheKey===ee){ue=$e,++ue.usedTimes;break}}return ue===void 0&&(ue=new mMe(r,ee,$,u),_.push(ue)),ue}function U($){if(--$.usedTimes===0){const ee=_.indexOf($);_[ee]=_[_.length-1],_.pop(),$.destroy()}}function Y($){g.remove($)}function X(){g.dispose()}return{getParameters:P,getProgramCacheKey:R,getUniforms:N,acquireProgram:V,releaseProgram:U,releaseShaderCache:Y,programs:_,dispose:X}}function bMe(){let r=new WeakMap;function e(u){let d=r.get(u);return d===void 0&&(d={},r.set(u,d)),d}function n(u){r.delete(u)}function s(u,d,f){r.get(u)[d]=f}function a(){r=new WeakMap}return{get:e,remove:n,update:s,dispose:a}}function xMe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function iO(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function rO(){const r=[];let e=0;const n=[],s=[],a=[];function u(){e=0,n.length=0,s.length=0,a.length=0}function d(w,k,S,A,P,R){let O=r[e];return O===void 0?(O={id:w.id,object:w,geometry:k,material:S,groupOrder:A,renderOrder:w.renderOrder,z:P,group:R},r[e]=O):(O.id=w.id,O.object=w,O.geometry=k,O.material=S,O.groupOrder=A,O.renderOrder=w.renderOrder,O.z=P,O.group=R),e++,O}function f(w,k,S,A,P,R){const O=d(w,k,S,A,P,R);S.transmission>0?s.push(O):S.transparent===!0?a.push(O):n.push(O)}function g(w,k,S,A,P,R){const O=d(w,k,S,A,P,R);S.transmission>0?s.unshift(O):S.transparent===!0?a.unshift(O):n.unshift(O)}function _(w,k){n.length>1&&n.sort(w||xMe),s.length>1&&s.sort(k||iO),a.length>1&&a.sort(k||iO)}function y(){for(let w=e,k=r.length;w<k;w++){const S=r[w];if(S.id===null)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}}return{opaque:n,transmissive:s,transparent:a,init:u,push:f,unshift:g,finish:y,sort:_}}function wMe(){let r=new WeakMap;function e(s,a){const u=r.get(s);let d;return u===void 0?(d=new rO,r.set(s,[d])):a>=u.length?(d=new rO,u.push(d)):d=u[a],d}function n(){r=new WeakMap}return{get:e,dispose:n}}function kMe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Re,color:new qn};break;case"SpotLight":n={position:new Re,direction:new Re,color:new qn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Re,color:new qn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Re,skyColor:new qn,groundColor:new qn};break;case"RectAreaLight":n={color:new qn,position:new Re,halfWidth:new Re,halfHeight:new Re};break}return r[e.id]=n,n}}}function CMe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _n};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _n};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _n,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=n,n}}}let SMe=0;function EMe(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function TMe(r,e){const n=new kMe,s=CMe(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let y=0;y<9;y++)a.probe.push(new Re);const u=new Re,d=new Yi,f=new Yi;function g(y,w){let k=0,S=0,A=0;for(let Te=0;Te<9;Te++)a.probe[Te].set(0,0,0);let P=0,R=0,O=0,B=0,N=0,V=0,U=0,Y=0,X=0,$=0;y.sort(EMe);const ee=w!==!0?Math.PI:1;for(let Te=0,De=y.length;Te<De;Te++){const $e=y[Te],Ue=$e.color,it=$e.intensity,tt=$e.distance,St=$e.shadow&&$e.shadow.map?$e.shadow.map.texture:null;if($e.isAmbientLight)k+=Ue.r*it*ee,S+=Ue.g*it*ee,A+=Ue.b*it*ee;else if($e.isLightProbe)for(let ve=0;ve<9;ve++)a.probe[ve].addScaledVector($e.sh.coefficients[ve],it);else if($e.isDirectionalLight){const ve=n.get($e);if(ve.color.copy($e.color).multiplyScalar($e.intensity*ee),$e.castShadow){const ne=$e.shadow,me=s.get($e);me.shadowBias=ne.bias,me.shadowNormalBias=ne.normalBias,me.shadowRadius=ne.radius,me.shadowMapSize=ne.mapSize,a.directionalShadow[P]=me,a.directionalShadowMap[P]=St,a.directionalShadowMatrix[P]=$e.shadow.matrix,V++}a.directional[P]=ve,P++}else if($e.isSpotLight){const ve=n.get($e);ve.position.setFromMatrixPosition($e.matrixWorld),ve.color.copy(Ue).multiplyScalar(it*ee),ve.distance=tt,ve.coneCos=Math.cos($e.angle),ve.penumbraCos=Math.cos($e.angle*(1-$e.penumbra)),ve.decay=$e.decay,a.spot[O]=ve;const ne=$e.shadow;if($e.map&&(a.spotLightMap[X]=$e.map,X++,ne.updateMatrices($e),$e.castShadow&&$++),a.spotLightMatrix[O]=ne.matrix,$e.castShadow){const me=s.get($e);me.shadowBias=ne.bias,me.shadowNormalBias=ne.normalBias,me.shadowRadius=ne.radius,me.shadowMapSize=ne.mapSize,a.spotShadow[O]=me,a.spotShadowMap[O]=St,Y++}O++}else if($e.isRectAreaLight){const ve=n.get($e);ve.color.copy(Ue).multiplyScalar(it),ve.halfWidth.set($e.width*.5,0,0),ve.halfHeight.set(0,$e.height*.5,0),a.rectArea[B]=ve,B++}else if($e.isPointLight){const ve=n.get($e);if(ve.color.copy($e.color).multiplyScalar($e.intensity*ee),ve.distance=$e.distance,ve.decay=$e.decay,$e.castShadow){const ne=$e.shadow,me=s.get($e);me.shadowBias=ne.bias,me.shadowNormalBias=ne.normalBias,me.shadowRadius=ne.radius,me.shadowMapSize=ne.mapSize,me.shadowCameraNear=ne.camera.near,me.shadowCameraFar=ne.camera.far,a.pointShadow[R]=me,a.pointShadowMap[R]=St,a.pointShadowMatrix[R]=$e.shadow.matrix,U++}a.point[R]=ve,R++}else if($e.isHemisphereLight){const ve=n.get($e);ve.skyColor.copy($e.color).multiplyScalar(it*ee),ve.groundColor.copy($e.groundColor).multiplyScalar(it*ee),a.hemi[N]=ve,N++}}B>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(a.rectAreaLTC1=Fn.LTC_FLOAT_1,a.rectAreaLTC2=Fn.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(a.rectAreaLTC1=Fn.LTC_HALF_1,a.rectAreaLTC2=Fn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=k,a.ambient[1]=S,a.ambient[2]=A;const ue=a.hash;(ue.directionalLength!==P||ue.pointLength!==R||ue.spotLength!==O||ue.rectAreaLength!==B||ue.hemiLength!==N||ue.numDirectionalShadows!==V||ue.numPointShadows!==U||ue.numSpotShadows!==Y||ue.numSpotMaps!==X)&&(a.directional.length=P,a.spot.length=O,a.rectArea.length=B,a.point.length=R,a.hemi.length=N,a.directionalShadow.length=V,a.directionalShadowMap.length=V,a.pointShadow.length=U,a.pointShadowMap.length=U,a.spotShadow.length=Y,a.spotShadowMap.length=Y,a.directionalShadowMatrix.length=V,a.pointShadowMatrix.length=U,a.spotLightMatrix.length=Y+X-$,a.spotLightMap.length=X,a.numSpotLightShadowsWithMaps=$,ue.directionalLength=P,ue.pointLength=R,ue.spotLength=O,ue.rectAreaLength=B,ue.hemiLength=N,ue.numDirectionalShadows=V,ue.numPointShadows=U,ue.numSpotShadows=Y,ue.numSpotMaps=X,a.version=SMe++)}function _(y,w){let k=0,S=0,A=0,P=0,R=0;const O=w.matrixWorldInverse;for(let B=0,N=y.length;B<N;B++){const V=y[B];if(V.isDirectionalLight){const U=a.directional[k];U.direction.setFromMatrixPosition(V.matrixWorld),u.setFromMatrixPosition(V.target.matrixWorld),U.direction.sub(u),U.direction.transformDirection(O),k++}else if(V.isSpotLight){const U=a.spot[A];U.position.setFromMatrixPosition(V.matrixWorld),U.position.applyMatrix4(O),U.direction.setFromMatrixPosition(V.matrixWorld),u.setFromMatrixPosition(V.target.matrixWorld),U.direction.sub(u),U.direction.transformDirection(O),A++}else if(V.isRectAreaLight){const U=a.rectArea[P];U.position.setFromMatrixPosition(V.matrixWorld),U.position.applyMatrix4(O),f.identity(),d.copy(V.matrixWorld),d.premultiply(O),f.extractRotation(d),U.halfWidth.set(V.width*.5,0,0),U.halfHeight.set(0,V.height*.5,0),U.halfWidth.applyMatrix4(f),U.halfHeight.applyMatrix4(f),P++}else if(V.isPointLight){const U=a.point[S];U.position.setFromMatrixPosition(V.matrixWorld),U.position.applyMatrix4(O),S++}else if(V.isHemisphereLight){const U=a.hemi[R];U.direction.setFromMatrixPosition(V.matrixWorld),U.direction.transformDirection(O),R++}}}return{setup:g,setupView:_,state:a}}function sO(r,e){const n=new TMe(r,e),s=[],a=[];function u(){s.length=0,a.length=0}function d(w){s.push(w)}function f(w){a.push(w)}function g(w){n.setup(s,w)}function _(w){n.setupView(s,w)}return{init:u,state:{lightsArray:s,shadowsArray:a,lights:n},setupLights:g,setupLightsView:_,pushLight:d,pushShadow:f}}function MMe(r,e){let n=new WeakMap;function s(u,d=0){const f=n.get(u);let g;return f===void 0?(g=new sO(r,e),n.set(u,[g])):d>=f.length?(g=new sO(r,e),f.push(g)):g=f[d],g}function a(){n=new WeakMap}return{get:s,dispose:a}}class T6 extends Ho{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=PW,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class M6 extends Ho{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Re,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const AMe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,LMe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function RMe(r,e,n){let s=new t5;const a=new _n,u=new _n,d=new Ar,f=new T6({depthPacking:IW}),g=new M6,_={},y=n.maxTextureSize,w={0:nl,1:Gp,2:yh},k=new fu({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _n},radius:{value:4}},vertexShader:AMe,fragmentShader:LMe}),S=k.clone();S.defines.HORIZONTAL_PASS=1;const A=new ir;A.setAttribute("position",new Wr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const P=new So(A,k),R=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=m6,this.render=function(V,U,Y){if(R.enabled===!1||R.autoUpdate===!1&&R.needsUpdate===!1||V.length===0)return;const X=r.getRenderTarget(),$=r.getActiveCubeFace(),ee=r.getActiveMipmapLevel(),ue=r.state;ue.setBlending(xh),ue.buffers.color.setClear(1,1,1,1),ue.buffers.depth.setTest(!0),ue.setScissorTest(!1);for(let Te=0,De=V.length;Te<De;Te++){const $e=V[Te],Ue=$e.shadow;if(Ue===void 0){console.warn("THREE.WebGLShadowMap:",$e,"has no shadow.");continue}if(Ue.autoUpdate===!1&&Ue.needsUpdate===!1)continue;a.copy(Ue.mapSize);const it=Ue.getFrameExtents();if(a.multiply(it),u.copy(Ue.mapSize),(a.x>y||a.y>y)&&(a.x>y&&(u.x=Math.floor(y/it.x),a.x=u.x*it.x,Ue.mapSize.x=u.x),a.y>y&&(u.y=Math.floor(y/it.y),a.y=u.y*it.y,Ue.mapSize.y=u.y)),Ue.map===null){const St=this.type!==tg?{minFilter:Ws,magFilter:Ws}:{};Ue.map=new Tl(a.x,a.y,St),Ue.map.texture.name=$e.name+".shadowMap",Ue.camera.updateProjectionMatrix()}r.setRenderTarget(Ue.map),r.clear();const tt=Ue.getViewportCount();for(let St=0;St<tt;St++){const ve=Ue.getViewport(St);d.set(u.x*ve.x,u.y*ve.y,u.x*ve.z,u.y*ve.w),ue.viewport(d),Ue.updateMatrices($e,St),s=Ue.getFrustum(),N(U,Y,Ue.camera,$e,this.type)}Ue.isPointLightShadow!==!0&&this.type===tg&&O(Ue,Y),Ue.needsUpdate=!1}R.needsUpdate=!1,r.setRenderTarget(X,$,ee)};function O(V,U){const Y=e.update(P);k.defines.VSM_SAMPLES!==V.blurSamples&&(k.defines.VSM_SAMPLES=V.blurSamples,S.defines.VSM_SAMPLES=V.blurSamples,k.needsUpdate=!0,S.needsUpdate=!0),V.mapPass===null&&(V.mapPass=new Tl(a.x,a.y)),k.uniforms.shadow_pass.value=V.map.texture,k.uniforms.resolution.value=V.mapSize,k.uniforms.radius.value=V.radius,r.setRenderTarget(V.mapPass),r.clear(),r.renderBufferDirect(U,null,Y,k,P,null),S.uniforms.shadow_pass.value=V.mapPass.texture,S.uniforms.resolution.value=V.mapSize,S.uniforms.radius.value=V.radius,r.setRenderTarget(V.map),r.clear(),r.renderBufferDirect(U,null,Y,S,P,null)}function B(V,U,Y,X,$,ee){let ue=null;const Te=Y.isPointLight===!0?V.customDistanceMaterial:V.customDepthMaterial;if(Te!==void 0?ue=Te:ue=Y.isPointLight===!0?g:f,r.localClippingEnabled&&U.clipShadows===!0&&Array.isArray(U.clippingPlanes)&&U.clippingPlanes.length!==0||U.displacementMap&&U.displacementScale!==0||U.alphaMap&&U.alphaTest>0){const De=ue.uuid,$e=U.uuid;let Ue=_[De];Ue===void 0&&(Ue={},_[De]=Ue);let it=Ue[$e];it===void 0&&(it=ue.clone(),Ue[$e]=it),ue=it}return ue.visible=U.visible,ue.wireframe=U.wireframe,ee===tg?ue.side=U.shadowSide!==null?U.shadowSide:U.side:ue.side=U.shadowSide!==null?U.shadowSide:w[U.side],ue.alphaMap=U.alphaMap,ue.alphaTest=U.alphaTest,ue.clipShadows=U.clipShadows,ue.clippingPlanes=U.clippingPlanes,ue.clipIntersection=U.clipIntersection,ue.displacementMap=U.displacementMap,ue.displacementScale=U.displacementScale,ue.displacementBias=U.displacementBias,ue.wireframeLinewidth=U.wireframeLinewidth,ue.linewidth=U.linewidth,Y.isPointLight===!0&&ue.isMeshDistanceMaterial===!0&&(ue.referencePosition.setFromMatrixPosition(Y.matrixWorld),ue.nearDistance=X,ue.farDistance=$),ue}function N(V,U,Y,X,$){if(V.visible===!1)return;if(V.layers.test(U.layers)&&(V.isMesh||V.isLine||V.isPoints)&&(V.castShadow||V.receiveShadow&&$===tg)&&(!V.frustumCulled||s.intersectsObject(V))){V.modelViewMatrix.multiplyMatrices(Y.matrixWorldInverse,V.matrixWorld);const Te=e.update(V),De=V.material;if(Array.isArray(De)){const $e=Te.groups;for(let Ue=0,it=$e.length;Ue<it;Ue++){const tt=$e[Ue],St=De[tt.materialIndex];if(St&&St.visible){const ve=B(V,St,X,Y.near,Y.far,$);r.renderBufferDirect(Y,null,Te,ve,V,tt)}}}else if(De.visible){const $e=B(V,De,X,Y.near,Y.far,$);r.renderBufferDirect(Y,null,Te,$e,V,null)}}const ue=V.children;for(let Te=0,De=ue.length;Te<De;Te++)N(ue[Te],U,Y,X,$)}}function PMe(r,e,n){const s=n.isWebGL2;function a(){let ut=!1;const en=new Ar;let mn=null;const On=new Ar(0,0,0,0);return{setMask:function(jn){mn!==jn&&!ut&&(r.colorMask(jn,jn,jn,jn),mn=jn)},setLocked:function(jn){ut=jn},setClear:function(jn,Xi,Rr,$r,mo){mo===!0&&(jn*=$r,Xi*=$r,Rr*=$r),en.set(jn,Xi,Rr,$r),On.equals(en)===!1&&(r.clearColor(jn,Xi,Rr,$r),On.copy(en))},reset:function(){ut=!1,mn=null,On.set(-1,0,0,0)}}}function u(){let ut=!1,en=null,mn=null,On=null;return{setTest:function(jn){jn?pt(2929):Rt(2929)},setMask:function(jn){en!==jn&&!ut&&(r.depthMask(jn),en=jn)},setFunc:function(jn){if(mn!==jn){switch(jn){case eW:r.depthFunc(512);break;case tW:r.depthFunc(519);break;case nW:r.depthFunc(513);break;case x3:r.depthFunc(515);break;case iW:r.depthFunc(514);break;case rW:r.depthFunc(518);break;case sW:r.depthFunc(516);break;case oW:r.depthFunc(517);break;default:r.depthFunc(515)}mn=jn}},setLocked:function(jn){ut=jn},setClear:function(jn){On!==jn&&(r.clearDepth(jn),On=jn)},reset:function(){ut=!1,en=null,mn=null,On=null}}}function d(){let ut=!1,en=null,mn=null,On=null,jn=null,Xi=null,Rr=null,$r=null,mo=null;return{setTest:function(mr){ut||(mr?pt(2960):Rt(2960))},setMask:function(mr){en!==mr&&!ut&&(r.stencilMask(mr),en=mr)},setFunc:function(mr,go,ro){(mn!==mr||On!==go||jn!==ro)&&(r.stencilFunc(mr,go,ro),mn=mr,On=go,jn=ro)},setOp:function(mr,go,ro){(Xi!==mr||Rr!==go||$r!==ro)&&(r.stencilOp(mr,go,ro),Xi=mr,Rr=go,$r=ro)},setLocked:function(mr){ut=mr},setClear:function(mr){mo!==mr&&(r.clearStencil(mr),mo=mr)},reset:function(){ut=!1,en=null,mn=null,On=null,jn=null,Xi=null,Rr=null,$r=null,mo=null}}}const f=new a,g=new u,_=new d,y=new WeakMap,w=new WeakMap;let k={},S={},A=new WeakMap,P=[],R=null,O=!1,B=null,N=null,V=null,U=null,Y=null,X=null,$=null,ee=!1,ue=null,Te=null,De=null,$e=null,Ue=null;const it=r.getParameter(35661);let tt=!1,St=0;const ve=r.getParameter(7938);ve.indexOf("WebGL")!==-1?(St=parseFloat(/^WebGL (\d)/.exec(ve)[1]),tt=St>=1):ve.indexOf("OpenGL ES")!==-1&&(St=parseFloat(/^OpenGL ES (\d)/.exec(ve)[1]),tt=St>=2);let ne=null,me={};const qe=r.getParameter(3088),Se=r.getParameter(2978),gt=new Ar().fromArray(qe),Xt=new Ar().fromArray(Se);function He(ut,en,mn){const On=new Uint8Array(4),jn=r.createTexture();r.bindTexture(ut,jn),r.texParameteri(ut,10241,9728),r.texParameteri(ut,10240,9728);for(let Xi=0;Xi<mn;Xi++)r.texImage2D(en+Xi,0,6408,1,1,0,6408,5121,On);return jn}const Fe={};Fe[3553]=He(3553,3553,1),Fe[34067]=He(34067,34069,6),f.setClear(0,0,0,1),g.setClear(1),_.setClear(0),pt(2929),g.setFunc(x3),st(!1),It(ST),pt(2884),We(xh);function pt(ut){k[ut]!==!0&&(r.enable(ut),k[ut]=!0)}function Rt(ut){k[ut]!==!1&&(r.disable(ut),k[ut]=!1)}function Vt(ut,en){return S[ut]!==en?(r.bindFramebuffer(ut,en),S[ut]=en,s&&(ut===36009&&(S[36160]=en),ut===36160&&(S[36009]=en)),!0):!1}function Ke(ut,en){let mn=P,On=!1;if(ut)if(mn=A.get(en),mn===void 0&&(mn=[],A.set(en,mn)),ut.isWebGLMultipleRenderTargets){const jn=ut.texture;if(mn.length!==jn.length||mn[0]!==36064){for(let Xi=0,Rr=jn.length;Xi<Rr;Xi++)mn[Xi]=36064+Xi;mn.length=jn.length,On=!0}}else mn[0]!==36064&&(mn[0]=36064,On=!0);else mn[0]!==1029&&(mn[0]=1029,On=!0);On&&(n.isWebGL2?r.drawBuffers(mn):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(mn))}function Ot(ut){return R!==ut?(r.useProgram(ut),R=ut,!0):!1}const oe={[Sp]:32774,[GV]:32778,[HV]:32779};if(s)oe[AT]=32775,oe[LT]=32776;else{const ut=e.get("EXT_blend_minmax");ut!==null&&(oe[AT]=ut.MIN_EXT,oe[LT]=ut.MAX_EXT)}const ye={[YV]:0,[jV]:1,[$V]:768,[v6]:770,[QV]:776,[KV]:774,[XV]:772,[qV]:769,[y6]:771,[JV]:775,[ZV]:773};function We(ut,en,mn,On,jn,Xi,Rr,$r){if(ut===xh){O===!0&&(Rt(3042),O=!1);return}if(O===!1&&(pt(3042),O=!0),ut!==UV){if(ut!==B||$r!==ee){if((N!==Sp||Y!==Sp)&&(r.blendEquation(32774),N=Sp,Y=Sp),$r)switch(ut){case Fp:r.blendFuncSeparate(1,771,1,771);break;case ET:r.blendFunc(1,1);break;case TT:r.blendFuncSeparate(0,769,0,1);break;case MT:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ut);break}else switch(ut){case Fp:r.blendFuncSeparate(770,771,1,771);break;case ET:r.blendFunc(770,1);break;case TT:r.blendFuncSeparate(0,769,0,1);break;case MT:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ut);break}V=null,U=null,X=null,$=null,B=ut,ee=$r}return}jn=jn||en,Xi=Xi||mn,Rr=Rr||On,(en!==N||jn!==Y)&&(r.blendEquationSeparate(oe[en],oe[jn]),N=en,Y=jn),(mn!==V||On!==U||Xi!==X||Rr!==$)&&(r.blendFuncSeparate(ye[mn],ye[On],ye[Xi],ye[Rr]),V=mn,U=On,X=Xi,$=Rr),B=ut,ee=null}function at(ut,en){ut.side===yh?Rt(2884):pt(2884);let mn=ut.side===nl;en&&(mn=!mn),st(mn),ut.blending===Fp&&ut.transparent===!1?We(xh):We(ut.blending,ut.blendEquation,ut.blendSrc,ut.blendDst,ut.blendEquationAlpha,ut.blendSrcAlpha,ut.blendDstAlpha,ut.premultipliedAlpha),g.setFunc(ut.depthFunc),g.setTest(ut.depthTest),g.setMask(ut.depthWrite),f.setMask(ut.colorWrite);const On=ut.stencilWrite;_.setTest(On),On&&(_.setMask(ut.stencilWriteMask),_.setFunc(ut.stencilFunc,ut.stencilRef,ut.stencilFuncMask),_.setOp(ut.stencilFail,ut.stencilZFail,ut.stencilZPass)),Tt(ut.polygonOffset,ut.polygonOffsetFactor,ut.polygonOffsetUnits),ut.alphaToCoverage===!0?pt(32926):Rt(32926)}function st(ut){ue!==ut&&(ut?r.frontFace(2304):r.frontFace(2305),ue=ut)}function It(ut){ut!==WV?(pt(2884),ut!==Te&&(ut===ST?r.cullFace(1029):ut===zV?r.cullFace(1028):r.cullFace(1032))):Rt(2884),Te=ut}function At(ut){ut!==De&&(tt&&r.lineWidth(ut),De=ut)}function Tt(ut,en,mn){ut?(pt(32823),($e!==en||Ue!==mn)&&(r.polygonOffset(en,mn),$e=en,Ue=mn)):Rt(32823)}function Ut(ut){ut?pt(3089):Rt(3089)}function Wt(ut){ut===void 0&&(ut=33984+it-1),ne!==ut&&(r.activeTexture(ut),ne=ut)}function we(ut,en,mn){mn===void 0&&(ne===null?mn=33984+it-1:mn=ne);let On=me[mn];On===void 0&&(On={type:void 0,texture:void 0},me[mn]=On),(On.type!==ut||On.texture!==en)&&(ne!==mn&&(r.activeTexture(mn),ne=mn),r.bindTexture(ut,en||Fe[ut]),On.type=ut,On.texture=en)}function fe(){const ut=me[ne];ut!==void 0&&ut.type!==void 0&&(r.bindTexture(ut.type,null),ut.type=void 0,ut.texture=void 0)}function lt(){try{r.compressedTexImage2D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}}function Nt(){try{r.compressedTexImage3D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}}function Gt(){try{r.texSubImage2D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}}function fn(){try{r.texSubImage3D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}}function wn(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}}function vn(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}}function Xe(){try{r.texStorage2D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}}function nn(){try{r.texStorage3D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}}function Nn(){try{r.texImage2D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}}function Rn(){try{r.texImage3D.apply(r,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}}function An(ut){gt.equals(ut)===!1&&(r.scissor(ut.x,ut.y,ut.z,ut.w),gt.copy(ut))}function kn(ut){Xt.equals(ut)===!1&&(r.viewport(ut.x,ut.y,ut.z,ut.w),Xt.copy(ut))}function Qn(ut,en){let mn=w.get(en);mn===void 0&&(mn=new WeakMap,w.set(en,mn));let On=mn.get(ut);On===void 0&&(On=r.getUniformBlockIndex(en,ut.name),mn.set(ut,On))}function ji(ut,en){const On=w.get(en).get(ut);y.get(ut)!==On&&(r.uniformBlockBinding(en,On,ut.__bindingPointIndex),y.set(ut,On))}function br(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),s===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),k={},ne=null,me={},S={},A=new WeakMap,P=[],R=null,O=!1,B=null,N=null,V=null,U=null,Y=null,X=null,$=null,ee=!1,ue=null,Te=null,De=null,$e=null,Ue=null,gt.set(0,0,r.canvas.width,r.canvas.height),Xt.set(0,0,r.canvas.width,r.canvas.height),f.reset(),g.reset(),_.reset()}return{buffers:{color:f,depth:g,stencil:_},enable:pt,disable:Rt,bindFramebuffer:Vt,drawBuffers:Ke,useProgram:Ot,setBlending:We,setMaterial:at,setFlipSided:st,setCullFace:It,setLineWidth:At,setPolygonOffset:Tt,setScissorTest:Ut,activeTexture:Wt,bindTexture:we,unbindTexture:fe,compressedTexImage2D:lt,compressedTexImage3D:Nt,texImage2D:Nn,texImage3D:Rn,updateUBOMapping:Qn,uniformBlockBinding:ji,texStorage2D:Xe,texStorage3D:nn,texSubImage2D:Gt,texSubImage3D:fn,compressedTexSubImage2D:wn,compressedTexSubImage3D:vn,scissor:An,viewport:kn,reset:br}}function IMe(r,e,n,s,a,u,d){const f=a.isWebGL2,g=a.maxTextures,_=a.maxCubemapSize,y=a.maxTextureSize,w=a.maxSamples,k=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,S=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),A=new WeakMap;let P;const R=new WeakMap;let O=!1;try{O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function B(we,fe){return O?new OffscreenCanvas(we,fe):n_("canvas")}function N(we,fe,lt,Nt){let Gt=1;if((we.width>Nt||we.height>Nt)&&(Gt=Nt/Math.max(we.width,we.height)),Gt<1||fe===!0)if(typeof HTMLImageElement<"u"&&we instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&we instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&we instanceof ImageBitmap){const fn=fe?S3:Math.floor,wn=fn(Gt*we.width),vn=fn(Gt*we.height);P===void 0&&(P=B(wn,vn));const Xe=lt?B(wn,vn):P;return Xe.width=wn,Xe.height=vn,Xe.getContext("2d").drawImage(we,0,0,wn,vn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+we.width+"x"+we.height+") to ("+wn+"x"+vn+")."),Xe}else return"data"in we&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+we.width+"x"+we.height+")."),we;return we}function V(we){return QT(we.width)&&QT(we.height)}function U(we){return f?!1:we.wrapS!==Uo||we.wrapT!==Uo||we.minFilter!==Ws&&we.minFilter!==Es}function Y(we,fe){return we.generateMipmaps&&fe&&we.minFilter!==Ws&&we.minFilter!==Es}function X(we){r.generateMipmap(we)}function $(we,fe,lt,Nt,Gt=!1){if(f===!1)return fe;if(we!==null){if(r[we]!==void 0)return r[we];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+we+"'")}let fn=fe;return fe===6403&&(lt===5126&&(fn=33326),lt===5131&&(fn=33325),lt===5121&&(fn=33321)),fe===33319&&(lt===5126&&(fn=33328),lt===5131&&(fn=33327),lt===5121&&(fn=33323)),fe===6408&&(lt===5126&&(fn=34836),lt===5131&&(fn=34842),lt===5121&&(fn=Nt===as&&Gt===!1?35907:32856),lt===32819&&(fn=32854),lt===32820&&(fn=32855)),(fn===33325||fn===33326||fn===33327||fn===33328||fn===34842||fn===34836)&&e.get("EXT_color_buffer_float"),fn}function ee(we,fe,lt){return Y(we,lt)===!0||we.isFramebufferTexture&&we.minFilter!==Ws&&we.minFilter!==Es?Math.log2(Math.max(fe.width,fe.height))+1:we.mipmaps!==void 0&&we.mipmaps.length>0?we.mipmaps.length:we.isCompressedTexture&&Array.isArray(we.image)?fe.mipmaps.length:1}function ue(we){return we===Ws||we===w3||we===k3?9728:9729}function Te(we){const fe=we.target;fe.removeEventListener("dispose",Te),$e(fe),fe.isVideoTexture&&A.delete(fe)}function De(we){const fe=we.target;fe.removeEventListener("dispose",De),it(fe)}function $e(we){const fe=s.get(we);if(fe.__webglInit===void 0)return;const lt=we.source,Nt=R.get(lt);if(Nt){const Gt=Nt[fe.__cacheKey];Gt.usedTimes--,Gt.usedTimes===0&&Ue(we),Object.keys(Nt).length===0&&R.delete(lt)}s.remove(we)}function Ue(we){const fe=s.get(we);r.deleteTexture(fe.__webglTexture);const lt=we.source,Nt=R.get(lt);delete Nt[fe.__cacheKey],d.memory.textures--}function it(we){const fe=we.texture,lt=s.get(we),Nt=s.get(fe);if(Nt.__webglTexture!==void 0&&(r.deleteTexture(Nt.__webglTexture),d.memory.textures--),we.depthTexture&&we.depthTexture.dispose(),we.isWebGLCubeRenderTarget)for(let Gt=0;Gt<6;Gt++)r.deleteFramebuffer(lt.__webglFramebuffer[Gt]),lt.__webglDepthbuffer&&r.deleteRenderbuffer(lt.__webglDepthbuffer[Gt]);else{if(r.deleteFramebuffer(lt.__webglFramebuffer),lt.__webglDepthbuffer&&r.deleteRenderbuffer(lt.__webglDepthbuffer),lt.__webglMultisampledFramebuffer&&r.deleteFramebuffer(lt.__webglMultisampledFramebuffer),lt.__webglColorRenderbuffer)for(let Gt=0;Gt<lt.__webglColorRenderbuffer.length;Gt++)lt.__webglColorRenderbuffer[Gt]&&r.deleteRenderbuffer(lt.__webglColorRenderbuffer[Gt]);lt.__webglDepthRenderbuffer&&r.deleteRenderbuffer(lt.__webglDepthRenderbuffer)}if(we.isWebGLMultipleRenderTargets)for(let Gt=0,fn=fe.length;Gt<fn;Gt++){const wn=s.get(fe[Gt]);wn.__webglTexture&&(r.deleteTexture(wn.__webglTexture),d.memory.textures--),s.remove(fe[Gt])}s.remove(fe),s.remove(we)}let tt=0;function St(){tt=0}function ve(){const we=tt;return we>=g&&console.warn("THREE.WebGLTextures: Trying to use "+we+" texture units while this GPU supports only "+g),tt+=1,we}function ne(we){const fe=[];return fe.push(we.wrapS),fe.push(we.wrapT),fe.push(we.wrapR||0),fe.push(we.magFilter),fe.push(we.minFilter),fe.push(we.anisotropy),fe.push(we.internalFormat),fe.push(we.format),fe.push(we.type),fe.push(we.generateMipmaps),fe.push(we.premultiplyAlpha),fe.push(we.flipY),fe.push(we.unpackAlignment),fe.push(we.encoding),fe.join()}function me(we,fe){const lt=s.get(we);if(we.isVideoTexture&&Ut(we),we.isRenderTargetTexture===!1&&we.version>0&&lt.__version!==we.version){const Nt=we.image;if(Nt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Nt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Rt(lt,we,fe);return}}n.bindTexture(3553,lt.__webglTexture,33984+fe)}function qe(we,fe){const lt=s.get(we);if(we.version>0&&lt.__version!==we.version){Rt(lt,we,fe);return}n.bindTexture(35866,lt.__webglTexture,33984+fe)}function Se(we,fe){const lt=s.get(we);if(we.version>0&&lt.__version!==we.version){Rt(lt,we,fe);return}n.bindTexture(32879,lt.__webglTexture,33984+fe)}function gt(we,fe){const lt=s.get(we);if(we.version>0&&lt.__version!==we.version){Vt(lt,we,fe);return}n.bindTexture(34067,lt.__webglTexture,33984+fe)}const Xt={[Xy]:10497,[Uo]:33071,[Zy]:33648},He={[Ws]:9728,[w3]:9984,[k3]:9986,[Es]:9729,[_6]:9985,[Jp]:9987};function Fe(we,fe,lt){if(lt?(r.texParameteri(we,10242,Xt[fe.wrapS]),r.texParameteri(we,10243,Xt[fe.wrapT]),(we===32879||we===35866)&&r.texParameteri(we,32882,Xt[fe.wrapR]),r.texParameteri(we,10240,He[fe.magFilter]),r.texParameteri(we,10241,He[fe.minFilter])):(r.texParameteri(we,10242,33071),r.texParameteri(we,10243,33071),(we===32879||we===35866)&&r.texParameteri(we,32882,33071),(fe.wrapS!==Uo||fe.wrapT!==Uo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(we,10240,ue(fe.magFilter)),r.texParameteri(we,10241,ue(fe.minFilter)),fe.minFilter!==Ws&&fe.minFilter!==Es&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Nt=e.get("EXT_texture_filter_anisotropic");if(fe.type===_h&&e.has("OES_texture_float_linear")===!1||f===!1&&fe.type===Cg&&e.has("OES_texture_half_float_linear")===!1)return;(fe.anisotropy>1||s.get(fe).__currentAnisotropy)&&(r.texParameterf(we,Nt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,a.getMaxAnisotropy())),s.get(fe).__currentAnisotropy=fe.anisotropy)}}function pt(we,fe){let lt=!1;we.__webglInit===void 0&&(we.__webglInit=!0,fe.addEventListener("dispose",Te));const Nt=fe.source;let Gt=R.get(Nt);Gt===void 0&&(Gt={},R.set(Nt,Gt));const fn=ne(fe);if(fn!==we.__cacheKey){Gt[fn]===void 0&&(Gt[fn]={texture:r.createTexture(),usedTimes:0},d.memory.textures++,lt=!0),Gt[fn].usedTimes++;const wn=Gt[we.__cacheKey];wn!==void 0&&(Gt[we.__cacheKey].usedTimes--,wn.usedTimes===0&&Ue(fe)),we.__cacheKey=fn,we.__webglTexture=Gt[fn].texture}return lt}function Rt(we,fe,lt){let Nt=3553;(fe.isDataArrayTexture||fe.isCompressedArrayTexture)&&(Nt=35866),fe.isData3DTexture&&(Nt=32879);const Gt=pt(we,fe),fn=fe.source;n.bindTexture(Nt,we.__webglTexture,33984+lt);const wn=s.get(fn);if(fn.version!==wn.__version||Gt===!0){n.activeTexture(33984+lt),r.pixelStorei(37440,fe.flipY),r.pixelStorei(37441,fe.premultiplyAlpha),r.pixelStorei(3317,fe.unpackAlignment),r.pixelStorei(37443,0);const vn=U(fe)&&V(fe.image)===!1;let Xe=N(fe.image,vn,!1,y);Xe=Wt(fe,Xe);const nn=V(Xe)||f,Nn=u.convert(fe.format,fe.encoding);let Rn=u.convert(fe.type),An=$(fe.internalFormat,Nn,Rn,fe.encoding,fe.isVideoTexture);Fe(Nt,fe,nn);let kn;const Qn=fe.mipmaps,ji=f&&fe.isVideoTexture!==!0,br=wn.__version===void 0||Gt===!0,ut=ee(fe,Xe,nn);if(fe.isDepthTexture)An=6402,f?fe.type===_h?An=36012:fe.type===Id?An=33190:fe.type===Bp?An=35056:An=33189:fe.type===_h&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),fe.format===Gd&&An===6402&&fe.type!==b6&&fe.type!==Id&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),fe.type=Id,Rn=u.convert(fe.type)),fe.format===Hp&&An===6402&&(An=34041,fe.type!==Bp&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),fe.type=Bp,Rn=u.convert(fe.type))),br&&(ji?n.texStorage2D(3553,1,An,Xe.width,Xe.height):n.texImage2D(3553,0,An,Xe.width,Xe.height,0,Nn,Rn,null));else if(fe.isDataTexture)if(Qn.length>0&&nn){ji&&br&&n.texStorage2D(3553,ut,An,Qn[0].width,Qn[0].height);for(let en=0,mn=Qn.length;en<mn;en++)kn=Qn[en],ji?n.texSubImage2D(3553,en,0,0,kn.width,kn.height,Nn,Rn,kn.data):n.texImage2D(3553,en,An,kn.width,kn.height,0,Nn,Rn,kn.data);fe.generateMipmaps=!1}else ji?(br&&n.texStorage2D(3553,ut,An,Xe.width,Xe.height),n.texSubImage2D(3553,0,0,0,Xe.width,Xe.height,Nn,Rn,Xe.data)):n.texImage2D(3553,0,An,Xe.width,Xe.height,0,Nn,Rn,Xe.data);else if(fe.isCompressedTexture)if(fe.isCompressedArrayTexture){ji&&br&&n.texStorage3D(35866,ut,An,Qn[0].width,Qn[0].height,Xe.depth);for(let en=0,mn=Qn.length;en<mn;en++)kn=Qn[en],fe.format!==Qa?Nn!==null?ji?n.compressedTexSubImage3D(35866,en,0,0,0,kn.width,kn.height,Xe.depth,Nn,kn.data,0,0):n.compressedTexImage3D(35866,en,An,kn.width,kn.height,Xe.depth,0,kn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ji?n.texSubImage3D(35866,en,0,0,0,kn.width,kn.height,Xe.depth,Nn,Rn,kn.data):n.texImage3D(35866,en,An,kn.width,kn.height,Xe.depth,0,Nn,Rn,kn.data)}else{ji&&br&&n.texStorage2D(3553,ut,An,Qn[0].width,Qn[0].height);for(let en=0,mn=Qn.length;en<mn;en++)kn=Qn[en],fe.format!==Qa?Nn!==null?ji?n.compressedTexSubImage2D(3553,en,0,0,kn.width,kn.height,Nn,kn.data):n.compressedTexImage2D(3553,en,An,kn.width,kn.height,0,kn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ji?n.texSubImage2D(3553,en,0,0,kn.width,kn.height,Nn,Rn,kn.data):n.texImage2D(3553,en,An,kn.width,kn.height,0,Nn,Rn,kn.data)}else if(fe.isDataArrayTexture)ji?(br&&n.texStorage3D(35866,ut,An,Xe.width,Xe.height,Xe.depth),n.texSubImage3D(35866,0,0,0,0,Xe.width,Xe.height,Xe.depth,Nn,Rn,Xe.data)):n.texImage3D(35866,0,An,Xe.width,Xe.height,Xe.depth,0,Nn,Rn,Xe.data);else if(fe.isData3DTexture)ji?(br&&n.texStorage3D(32879,ut,An,Xe.width,Xe.height,Xe.depth),n.texSubImage3D(32879,0,0,0,0,Xe.width,Xe.height,Xe.depth,Nn,Rn,Xe.data)):n.texImage3D(32879,0,An,Xe.width,Xe.height,Xe.depth,0,Nn,Rn,Xe.data);else if(fe.isFramebufferTexture){if(br)if(ji)n.texStorage2D(3553,ut,An,Xe.width,Xe.height);else{let en=Xe.width,mn=Xe.height;for(let On=0;On<ut;On++)n.texImage2D(3553,On,An,en,mn,0,Nn,Rn,null),en>>=1,mn>>=1}}else if(Qn.length>0&&nn){ji&&br&&n.texStorage2D(3553,ut,An,Qn[0].width,Qn[0].height);for(let en=0,mn=Qn.length;en<mn;en++)kn=Qn[en],ji?n.texSubImage2D(3553,en,0,0,Nn,Rn,kn):n.texImage2D(3553,en,An,Nn,Rn,kn);fe.generateMipmaps=!1}else ji?(br&&n.texStorage2D(3553,ut,An,Xe.width,Xe.height),n.texSubImage2D(3553,0,0,0,Nn,Rn,Xe)):n.texImage2D(3553,0,An,Nn,Rn,Xe);Y(fe,nn)&&X(Nt),wn.__version=fn.version,fe.onUpdate&&fe.onUpdate(fe)}we.__version=fe.version}function Vt(we,fe,lt){if(fe.image.length!==6)return;const Nt=pt(we,fe),Gt=fe.source;n.bindTexture(34067,we.__webglTexture,33984+lt);const fn=s.get(Gt);if(Gt.version!==fn.__version||Nt===!0){n.activeTexture(33984+lt),r.pixelStorei(37440,fe.flipY),r.pixelStorei(37441,fe.premultiplyAlpha),r.pixelStorei(3317,fe.unpackAlignment),r.pixelStorei(37443,0);const wn=fe.isCompressedTexture||fe.image[0].isCompressedTexture,vn=fe.image[0]&&fe.image[0].isDataTexture,Xe=[];for(let en=0;en<6;en++)!wn&&!vn?Xe[en]=N(fe.image[en],!1,!0,_):Xe[en]=vn?fe.image[en].image:fe.image[en],Xe[en]=Wt(fe,Xe[en]);const nn=Xe[0],Nn=V(nn)||f,Rn=u.convert(fe.format,fe.encoding),An=u.convert(fe.type),kn=$(fe.internalFormat,Rn,An,fe.encoding),Qn=f&&fe.isVideoTexture!==!0,ji=fn.__version===void 0||Nt===!0;let br=ee(fe,nn,Nn);Fe(34067,fe,Nn);let ut;if(wn){Qn&&ji&&n.texStorage2D(34067,br,kn,nn.width,nn.height);for(let en=0;en<6;en++){ut=Xe[en].mipmaps;for(let mn=0;mn<ut.length;mn++){const On=ut[mn];fe.format!==Qa?Rn!==null?Qn?n.compressedTexSubImage2D(34069+en,mn,0,0,On.width,On.height,Rn,On.data):n.compressedTexImage2D(34069+en,mn,kn,On.width,On.height,0,On.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Qn?n.texSubImage2D(34069+en,mn,0,0,On.width,On.height,Rn,An,On.data):n.texImage2D(34069+en,mn,kn,On.width,On.height,0,Rn,An,On.data)}}}else{ut=fe.mipmaps,Qn&&ji&&(ut.length>0&&br++,n.texStorage2D(34067,br,kn,Xe[0].width,Xe[0].height));for(let en=0;en<6;en++)if(vn){Qn?n.texSubImage2D(34069+en,0,0,0,Xe[en].width,Xe[en].height,Rn,An,Xe[en].data):n.texImage2D(34069+en,0,kn,Xe[en].width,Xe[en].height,0,Rn,An,Xe[en].data);for(let mn=0;mn<ut.length;mn++){const jn=ut[mn].image[en].image;Qn?n.texSubImage2D(34069+en,mn+1,0,0,jn.width,jn.height,Rn,An,jn.data):n.texImage2D(34069+en,mn+1,kn,jn.width,jn.height,0,Rn,An,jn.data)}}else{Qn?n.texSubImage2D(34069+en,0,0,0,Rn,An,Xe[en]):n.texImage2D(34069+en,0,kn,Rn,An,Xe[en]);for(let mn=0;mn<ut.length;mn++){const On=ut[mn];Qn?n.texSubImage2D(34069+en,mn+1,0,0,Rn,An,On.image[en]):n.texImage2D(34069+en,mn+1,kn,Rn,An,On.image[en])}}}Y(fe,Nn)&&X(34067),fn.__version=Gt.version,fe.onUpdate&&fe.onUpdate(fe)}we.__version=fe.version}function Ke(we,fe,lt,Nt,Gt){const fn=u.convert(lt.format,lt.encoding),wn=u.convert(lt.type),vn=$(lt.internalFormat,fn,wn,lt.encoding);s.get(fe).__hasExternalTextures||(Gt===32879||Gt===35866?n.texImage3D(Gt,0,vn,fe.width,fe.height,fe.depth,0,fn,wn,null):n.texImage2D(Gt,0,vn,fe.width,fe.height,0,fn,wn,null)),n.bindFramebuffer(36160,we),Tt(fe)?k.framebufferTexture2DMultisampleEXT(36160,Nt,Gt,s.get(lt).__webglTexture,0,At(fe)):(Gt===3553||Gt>=34069&&Gt<=34074)&&r.framebufferTexture2D(36160,Nt,Gt,s.get(lt).__webglTexture,0),n.bindFramebuffer(36160,null)}function Ot(we,fe,lt){if(r.bindRenderbuffer(36161,we),fe.depthBuffer&&!fe.stencilBuffer){let Nt=33189;if(lt||Tt(fe)){const Gt=fe.depthTexture;Gt&&Gt.isDepthTexture&&(Gt.type===_h?Nt=36012:Gt.type===Id&&(Nt=33190));const fn=At(fe);Tt(fe)?k.renderbufferStorageMultisampleEXT(36161,fn,Nt,fe.width,fe.height):r.renderbufferStorageMultisample(36161,fn,Nt,fe.width,fe.height)}else r.renderbufferStorage(36161,Nt,fe.width,fe.height);r.framebufferRenderbuffer(36160,36096,36161,we)}else if(fe.depthBuffer&&fe.stencilBuffer){const Nt=At(fe);lt&&Tt(fe)===!1?r.renderbufferStorageMultisample(36161,Nt,35056,fe.width,fe.height):Tt(fe)?k.renderbufferStorageMultisampleEXT(36161,Nt,35056,fe.width,fe.height):r.renderbufferStorage(36161,34041,fe.width,fe.height),r.framebufferRenderbuffer(36160,33306,36161,we)}else{const Nt=fe.isWebGLMultipleRenderTargets===!0?fe.texture:[fe.texture];for(let Gt=0;Gt<Nt.length;Gt++){const fn=Nt[Gt],wn=u.convert(fn.format,fn.encoding),vn=u.convert(fn.type),Xe=$(fn.internalFormat,wn,vn,fn.encoding),nn=At(fe);lt&&Tt(fe)===!1?r.renderbufferStorageMultisample(36161,nn,Xe,fe.width,fe.height):Tt(fe)?k.renderbufferStorageMultisampleEXT(36161,nn,Xe,fe.width,fe.height):r.renderbufferStorage(36161,Xe,fe.width,fe.height)}}r.bindRenderbuffer(36161,null)}function oe(we,fe){if(fe&&fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,we),!(fe.depthTexture&&fe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(fe.depthTexture).__webglTexture||fe.depthTexture.image.width!==fe.width||fe.depthTexture.image.height!==fe.height)&&(fe.depthTexture.image.width=fe.width,fe.depthTexture.image.height=fe.height,fe.depthTexture.needsUpdate=!0),me(fe.depthTexture,0);const Nt=s.get(fe.depthTexture).__webglTexture,Gt=At(fe);if(fe.depthTexture.format===Gd)Tt(fe)?k.framebufferTexture2DMultisampleEXT(36160,36096,3553,Nt,0,Gt):r.framebufferTexture2D(36160,36096,3553,Nt,0);else if(fe.depthTexture.format===Hp)Tt(fe)?k.framebufferTexture2DMultisampleEXT(36160,33306,3553,Nt,0,Gt):r.framebufferTexture2D(36160,33306,3553,Nt,0);else throw new Error("Unknown depthTexture format")}function ye(we){const fe=s.get(we),lt=we.isWebGLCubeRenderTarget===!0;if(we.depthTexture&&!fe.__autoAllocateDepthBuffer){if(lt)throw new Error("target.depthTexture not supported in Cube render targets");oe(fe.__webglFramebuffer,we)}else if(lt){fe.__webglDepthbuffer=[];for(let Nt=0;Nt<6;Nt++)n.bindFramebuffer(36160,fe.__webglFramebuffer[Nt]),fe.__webglDepthbuffer[Nt]=r.createRenderbuffer(),Ot(fe.__webglDepthbuffer[Nt],we,!1)}else n.bindFramebuffer(36160,fe.__webglFramebuffer),fe.__webglDepthbuffer=r.createRenderbuffer(),Ot(fe.__webglDepthbuffer,we,!1);n.bindFramebuffer(36160,null)}function We(we,fe,lt){const Nt=s.get(we);fe!==void 0&&Ke(Nt.__webglFramebuffer,we,we.texture,36064,3553),lt!==void 0&&ye(we)}function at(we){const fe=we.texture,lt=s.get(we),Nt=s.get(fe);we.addEventListener("dispose",De),we.isWebGLMultipleRenderTargets!==!0&&(Nt.__webglTexture===void 0&&(Nt.__webglTexture=r.createTexture()),Nt.__version=fe.version,d.memory.textures++);const Gt=we.isWebGLCubeRenderTarget===!0,fn=we.isWebGLMultipleRenderTargets===!0,wn=V(we)||f;if(Gt){lt.__webglFramebuffer=[];for(let vn=0;vn<6;vn++)lt.__webglFramebuffer[vn]=r.createFramebuffer()}else{if(lt.__webglFramebuffer=r.createFramebuffer(),fn)if(a.drawBuffers){const vn=we.texture;for(let Xe=0,nn=vn.length;Xe<nn;Xe++){const Nn=s.get(vn[Xe]);Nn.__webglTexture===void 0&&(Nn.__webglTexture=r.createTexture(),d.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(f&&we.samples>0&&Tt(we)===!1){const vn=fn?fe:[fe];lt.__webglMultisampledFramebuffer=r.createFramebuffer(),lt.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,lt.__webglMultisampledFramebuffer);for(let Xe=0;Xe<vn.length;Xe++){const nn=vn[Xe];lt.__webglColorRenderbuffer[Xe]=r.createRenderbuffer(),r.bindRenderbuffer(36161,lt.__webglColorRenderbuffer[Xe]);const Nn=u.convert(nn.format,nn.encoding),Rn=u.convert(nn.type),An=$(nn.internalFormat,Nn,Rn,nn.encoding,we.isXRRenderTarget===!0),kn=At(we);r.renderbufferStorageMultisample(36161,kn,An,we.width,we.height),r.framebufferRenderbuffer(36160,36064+Xe,36161,lt.__webglColorRenderbuffer[Xe])}r.bindRenderbuffer(36161,null),we.depthBuffer&&(lt.__webglDepthRenderbuffer=r.createRenderbuffer(),Ot(lt.__webglDepthRenderbuffer,we,!0)),n.bindFramebuffer(36160,null)}}if(Gt){n.bindTexture(34067,Nt.__webglTexture),Fe(34067,fe,wn);for(let vn=0;vn<6;vn++)Ke(lt.__webglFramebuffer[vn],we,fe,36064,34069+vn);Y(fe,wn)&&X(34067),n.unbindTexture()}else if(fn){const vn=we.texture;for(let Xe=0,nn=vn.length;Xe<nn;Xe++){const Nn=vn[Xe],Rn=s.get(Nn);n.bindTexture(3553,Rn.__webglTexture),Fe(3553,Nn,wn),Ke(lt.__webglFramebuffer,we,Nn,36064+Xe,3553),Y(Nn,wn)&&X(3553)}n.unbindTexture()}else{let vn=3553;(we.isWebGL3DRenderTarget||we.isWebGLArrayRenderTarget)&&(f?vn=we.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(vn,Nt.__webglTexture),Fe(vn,fe,wn),Ke(lt.__webglFramebuffer,we,fe,36064,vn),Y(fe,wn)&&X(vn),n.unbindTexture()}we.depthBuffer&&ye(we)}function st(we){const fe=V(we)||f,lt=we.isWebGLMultipleRenderTargets===!0?we.texture:[we.texture];for(let Nt=0,Gt=lt.length;Nt<Gt;Nt++){const fn=lt[Nt];if(Y(fn,fe)){const wn=we.isWebGLCubeRenderTarget?34067:3553,vn=s.get(fn).__webglTexture;n.bindTexture(wn,vn),X(wn),n.unbindTexture()}}}function It(we){if(f&&we.samples>0&&Tt(we)===!1){const fe=we.isWebGLMultipleRenderTargets?we.texture:[we.texture],lt=we.width,Nt=we.height;let Gt=16384;const fn=[],wn=we.stencilBuffer?33306:36096,vn=s.get(we),Xe=we.isWebGLMultipleRenderTargets===!0;if(Xe)for(let nn=0;nn<fe.length;nn++)n.bindFramebuffer(36160,vn.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+nn,36161,null),n.bindFramebuffer(36160,vn.__webglFramebuffer),r.framebufferTexture2D(36009,36064+nn,3553,null,0);n.bindFramebuffer(36008,vn.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,vn.__webglFramebuffer);for(let nn=0;nn<fe.length;nn++){fn.push(36064+nn),we.depthBuffer&&fn.push(wn);const Nn=vn.__ignoreDepthValues!==void 0?vn.__ignoreDepthValues:!1;if(Nn===!1&&(we.depthBuffer&&(Gt|=256),we.stencilBuffer&&(Gt|=1024)),Xe&&r.framebufferRenderbuffer(36008,36064,36161,vn.__webglColorRenderbuffer[nn]),Nn===!0&&(r.invalidateFramebuffer(36008,[wn]),r.invalidateFramebuffer(36009,[wn])),Xe){const Rn=s.get(fe[nn]).__webglTexture;r.framebufferTexture2D(36009,36064,3553,Rn,0)}r.blitFramebuffer(0,0,lt,Nt,0,0,lt,Nt,Gt,9728),S&&r.invalidateFramebuffer(36008,fn)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),Xe)for(let nn=0;nn<fe.length;nn++){n.bindFramebuffer(36160,vn.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+nn,36161,vn.__webglColorRenderbuffer[nn]);const Nn=s.get(fe[nn]).__webglTexture;n.bindFramebuffer(36160,vn.__webglFramebuffer),r.framebufferTexture2D(36009,36064+nn,3553,Nn,0)}n.bindFramebuffer(36009,vn.__webglMultisampledFramebuffer)}}function At(we){return Math.min(w,we.samples)}function Tt(we){const fe=s.get(we);return f&&we.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&fe.__useRenderToTexture!==!1}function Ut(we){const fe=d.render.frame;A.get(we)!==fe&&(A.set(we,fe),we.update())}function Wt(we,fe){const lt=we.encoding,Nt=we.format,Gt=we.type;return we.isCompressedTexture===!0||we.isVideoTexture===!0||we.format===C3||lt!==Zd&&(lt===as?f===!1?e.has("EXT_sRGB")===!0&&Nt===Qa?(we.format=C3,we.minFilter=Es,we.generateMipmaps=!1):fe=k6.sRGBToLinear(fe):(Nt!==Qa||Gt!==Xd)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",lt)),fe}this.allocateTextureUnit=ve,this.resetTextureUnits=St,this.setTexture2D=me,this.setTexture2DArray=qe,this.setTexture3D=Se,this.setTextureCube=gt,this.rebindTextures=We,this.setupRenderTarget=at,this.updateRenderTargetMipmap=st,this.updateMultisampleRenderTarget=It,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=Ke,this.useMultisampledRTT=Tt}function $W(r,e,n){const s=n.isWebGL2;function a(u,d=null){let f;if(u===Xd)return 5121;if(u===vW)return 32819;if(u===yW)return 32820;if(u===pW)return 5120;if(u===mW)return 5122;if(u===b6)return 5123;if(u===gW)return 5124;if(u===Id)return 5125;if(u===_h)return 5126;if(u===Cg)return s?5131:(f=e.get("OES_texture_half_float"),f!==null?f.HALF_FLOAT_OES:null);if(u===_W)return 6406;if(u===Qa)return 6408;if(u===xW)return 6409;if(u===wW)return 6410;if(u===Gd)return 6402;if(u===Hp)return 34041;if(u===kW)return 6403;if(u===bW)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(u===C3)return f=e.get("EXT_sRGB"),f!==null?f.SRGB_ALPHA_EXT:null;if(u===CW)return 36244;if(u===SW)return 33319;if(u===EW)return 33320;if(u===TW)return 36249;if(u===Zw||u===Kw||u===Jw||u===Qw)if(d===as)if(f=e.get("WEBGL_compressed_texture_s3tc_srgb"),f!==null){if(u===Zw)return f.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(u===Kw)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(u===Jw)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(u===Qw)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(f=e.get("WEBGL_compressed_texture_s3tc"),f!==null){if(u===Zw)return f.COMPRESSED_RGB_S3TC_DXT1_EXT;if(u===Kw)return f.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(u===Jw)return f.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(u===Qw)return f.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(u===RT||u===PT||u===IT||u===DT)if(f=e.get("WEBGL_compressed_texture_pvrtc"),f!==null){if(u===RT)return f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(u===PT)return f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(u===IT)return f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(u===DT)return f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(u===MW)return f=e.get("WEBGL_compressed_texture_etc1"),f!==null?f.COMPRESSED_RGB_ETC1_WEBGL:null;if(u===NT||u===OT)if(f=e.get("WEBGL_compressed_texture_etc"),f!==null){if(u===NT)return d===as?f.COMPRESSED_SRGB8_ETC2:f.COMPRESSED_RGB8_ETC2;if(u===OT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:f.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(u===FT||u===BT||u===VT||u===WT||u===zT||u===UT||u===GT||u===HT||u===YT||u===jT||u===$T||u===qT||u===XT||u===ZT)if(f=e.get("WEBGL_compressed_texture_astc"),f!==null){if(u===FT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:f.COMPRESSED_RGBA_ASTC_4x4_KHR;if(u===BT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:f.COMPRESSED_RGBA_ASTC_5x4_KHR;if(u===VT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:f.COMPRESSED_RGBA_ASTC_5x5_KHR;if(u===WT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:f.COMPRESSED_RGBA_ASTC_6x5_KHR;if(u===zT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:f.COMPRESSED_RGBA_ASTC_6x6_KHR;if(u===UT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:f.COMPRESSED_RGBA_ASTC_8x5_KHR;if(u===GT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:f.COMPRESSED_RGBA_ASTC_8x6_KHR;if(u===HT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:f.COMPRESSED_RGBA_ASTC_8x8_KHR;if(u===YT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:f.COMPRESSED_RGBA_ASTC_10x5_KHR;if(u===jT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:f.COMPRESSED_RGBA_ASTC_10x6_KHR;if(u===$T)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:f.COMPRESSED_RGBA_ASTC_10x8_KHR;if(u===qT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:f.COMPRESSED_RGBA_ASTC_10x10_KHR;if(u===XT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:f.COMPRESSED_RGBA_ASTC_12x10_KHR;if(u===ZT)return d===as?f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:f.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(u===KT)if(f=e.get("EXT_texture_compression_bptc"),f!==null){if(u===KT)return d===as?f.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:f.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return u===Bp?s?34042:(f=e.get("WEBGL_depth_texture"),f!==null?f.UNSIGNED_INT_24_8_WEBGL:null):r[u]!==void 0?r[u]:null}return{convert:a}}class qW extends zs{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class rg extends _r{constructor(){super(),this.isGroup=!0,this.type="Group"}}const DMe={type:"move"};class _E{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new rg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new rg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new rg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Re),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,s){let a=null,u=null,d=null;const f=this._targetRay,g=this._grip,_=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(_&&e.hand){d=!0;for(const P of e.hand.values()){const R=n.getJointPose(P,s);if(_.joints[P.jointName]===void 0){const B=new rg;B.matrixAutoUpdate=!1,B.visible=!1,_.joints[P.jointName]=B,_.add(B)}const O=_.joints[P.jointName];R!==null&&(O.matrix.fromArray(R.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale),O.jointRadius=R.radius),O.visible=R!==null}const y=_.joints["index-finger-tip"],w=_.joints["thumb-tip"],k=y.position.distanceTo(w.position),S=.02,A=.005;_.inputState.pinching&&k>S+A?(_.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!_.inputState.pinching&&k<=S-A&&(_.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else g!==null&&e.gripSpace&&(u=n.getPose(e.gripSpace,s),u!==null&&(g.matrix.fromArray(u.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),u.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(u.linearVelocity)):g.hasLinearVelocity=!1,u.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(u.angularVelocity)):g.hasAngularVelocity=!1));f!==null&&(a=n.getPose(e.targetRaySpace,s),a===null&&u!==null&&(a=u),a!==null&&(f.matrix.fromArray(a.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),a.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(a.linearVelocity)):f.hasLinearVelocity=!1,a.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(a.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(DMe)))}return f!==null&&(f.visible=a!==null),g!==null&&(g.visible=u!==null),_!==null&&(_.visible=d!==null),this}}class XW extends to{constructor(e,n,s,a,u,d,f,g,_,y){if(y=y!==void 0?y:Gd,y!==Gd&&y!==Hp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");s===void 0&&y===Gd&&(s=Id),s===void 0&&y===Hp&&(s=Bp),super(null,a,u,d,f,g,y,s,_),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=f!==void 0?f:Ws,this.minFilter=g!==void 0?g:Ws,this.flipY=!1,this.generateMipmaps=!1}}class NMe extends Rh{constructor(e,n){super();const s=this;let a=null,u=1,d=null,f="local-floor",g=null,_=null,y=null,w=null,k=null,S=null;const A=n.getContextAttributes();let P=null,R=null;const O=[],B=[],N=new zs;N.layers.enable(1),N.viewport=new Ar;const V=new zs;V.layers.enable(2),V.viewport=new Ar;const U=[N,V],Y=new qW;Y.layers.enable(1),Y.layers.enable(2);let X=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ne){let me=O[ne];return me===void 0&&(me=new _E,O[ne]=me),me.getTargetRaySpace()},this.getControllerGrip=function(ne){let me=O[ne];return me===void 0&&(me=new _E,O[ne]=me),me.getGripSpace()},this.getHand=function(ne){let me=O[ne];return me===void 0&&(me=new _E,O[ne]=me),me.getHandSpace()};function ee(ne){const me=B.indexOf(ne.inputSource);if(me===-1)return;const qe=O[me];qe!==void 0&&qe.dispatchEvent({type:ne.type,data:ne.inputSource})}function ue(){a.removeEventListener("select",ee),a.removeEventListener("selectstart",ee),a.removeEventListener("selectend",ee),a.removeEventListener("squeeze",ee),a.removeEventListener("squeezestart",ee),a.removeEventListener("squeezeend",ee),a.removeEventListener("end",ue),a.removeEventListener("inputsourceschange",Te);for(let ne=0;ne<O.length;ne++){const me=B[ne];me!==null&&(B[ne]=null,O[ne].disconnect(me))}X=null,$=null,e.setRenderTarget(P),k=null,w=null,y=null,a=null,R=null,ve.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ne){u=ne,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ne){f=ne,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return g||d},this.setReferenceSpace=function(ne){g=ne},this.getBaseLayer=function(){return w!==null?w:k},this.getBinding=function(){return y},this.getFrame=function(){return S},this.getSession=function(){return a},this.setSession=async function(ne){if(a=ne,a!==null){if(P=e.getRenderTarget(),a.addEventListener("select",ee),a.addEventListener("selectstart",ee),a.addEventListener("selectend",ee),a.addEventListener("squeeze",ee),a.addEventListener("squeezestart",ee),a.addEventListener("squeezeend",ee),a.addEventListener("end",ue),a.addEventListener("inputsourceschange",Te),A.xrCompatible!==!0&&await n.makeXRCompatible(),a.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const me={antialias:a.renderState.layers===void 0?A.antialias:!0,alpha:A.alpha,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:u};k=new XRWebGLLayer(a,n,me),a.updateRenderState({baseLayer:k}),R=new Tl(k.framebufferWidth,k.framebufferHeight,{format:Qa,type:Xd,encoding:e.outputEncoding,stencilBuffer:A.stencil})}else{let me=null,qe=null,Se=null;A.depth&&(Se=A.stencil?35056:33190,me=A.stencil?Hp:Gd,qe=A.stencil?Bp:Id);const gt={colorFormat:32856,depthFormat:Se,scaleFactor:u};y=new XRWebGLBinding(a,n),w=y.createProjectionLayer(gt),a.updateRenderState({layers:[w]}),R=new Tl(w.textureWidth,w.textureHeight,{format:Qa,type:Xd,depthTexture:new XW(w.textureWidth,w.textureHeight,qe,void 0,void 0,void 0,void 0,void 0,void 0,me),stencilBuffer:A.stencil,encoding:e.outputEncoding,samples:A.antialias?4:0});const Xt=e.properties.get(R);Xt.__ignoreDepthValues=w.ignoreDepthValues}R.isXRRenderTarget=!0,this.setFoveation(1),g=null,d=await a.requestReferenceSpace(f),ve.setContext(a),ve.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}};function Te(ne){for(let me=0;me<ne.removed.length;me++){const qe=ne.removed[me],Se=B.indexOf(qe);Se>=0&&(B[Se]=null,O[Se].dispatchEvent({type:"disconnected",data:qe}))}for(let me=0;me<ne.added.length;me++){const qe=ne.added[me];let Se=B.indexOf(qe);if(Se===-1){for(let Xt=0;Xt<O.length;Xt++)if(Xt>=B.length){B.push(qe),Se=Xt;break}else if(B[Xt]===null){B[Xt]=qe,Se=Xt;break}if(Se===-1)break}const gt=O[Se];gt&&gt.dispatchEvent({type:"connected",data:qe})}}const De=new Re,$e=new Re;function Ue(ne,me,qe){De.setFromMatrixPosition(me.matrixWorld),$e.setFromMatrixPosition(qe.matrixWorld);const Se=De.distanceTo($e),gt=me.projectionMatrix.elements,Xt=qe.projectionMatrix.elements,He=gt[14]/(gt[10]-1),Fe=gt[14]/(gt[10]+1),pt=(gt[9]+1)/gt[5],Rt=(gt[9]-1)/gt[5],Vt=(gt[8]-1)/gt[0],Ke=(Xt[8]+1)/Xt[0],Ot=He*Vt,oe=He*Ke,ye=Se/(-Vt+Ke),We=ye*-Vt;me.matrixWorld.decompose(ne.position,ne.quaternion,ne.scale),ne.translateX(We),ne.translateZ(ye),ne.matrixWorld.compose(ne.position,ne.quaternion,ne.scale),ne.matrixWorldInverse.copy(ne.matrixWorld).invert();const at=He+ye,st=Fe+ye,It=Ot-We,At=oe+(Se-We),Tt=pt*Fe/st*at,Ut=Rt*Fe/st*at;ne.projectionMatrix.makePerspective(It,At,Tt,Ut,at,st)}function it(ne,me){me===null?ne.matrixWorld.copy(ne.matrix):ne.matrixWorld.multiplyMatrices(me.matrixWorld,ne.matrix),ne.matrixWorldInverse.copy(ne.matrixWorld).invert()}this.updateCamera=function(ne){if(a===null)return;Y.near=V.near=N.near=ne.near,Y.far=V.far=N.far=ne.far,(X!==Y.near||$!==Y.far)&&(a.updateRenderState({depthNear:Y.near,depthFar:Y.far}),X=Y.near,$=Y.far);const me=ne.parent,qe=Y.cameras;it(Y,me);for(let gt=0;gt<qe.length;gt++)it(qe[gt],me);Y.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),ne.matrix.copy(Y.matrix),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale);const Se=ne.children;for(let gt=0,Xt=Se.length;gt<Xt;gt++)Se[gt].updateMatrixWorld(!0);qe.length===2?Ue(Y,N,V):Y.projectionMatrix.copy(N.projectionMatrix)},this.getCamera=function(){return Y},this.getFoveation=function(){if(w!==null)return w.fixedFoveation;if(k!==null)return k.fixedFoveation},this.setFoveation=function(ne){w!==null&&(w.fixedFoveation=ne),k!==null&&k.fixedFoveation!==void 0&&(k.fixedFoveation=ne)};let tt=null;function St(ne,me){if(_=me.getViewerPose(g||d),S=me,_!==null){const qe=_.views;k!==null&&(e.setRenderTargetFramebuffer(R,k.framebuffer),e.setRenderTarget(R));let Se=!1;qe.length!==Y.cameras.length&&(Y.cameras.length=0,Se=!0);for(let gt=0;gt<qe.length;gt++){const Xt=qe[gt];let He=null;if(k!==null)He=k.getViewport(Xt);else{const pt=y.getViewSubImage(w,Xt);He=pt.viewport,gt===0&&(e.setRenderTargetTextures(R,pt.colorTexture,w.ignoreDepthValues?void 0:pt.depthStencilTexture),e.setRenderTarget(R))}let Fe=U[gt];Fe===void 0&&(Fe=new zs,Fe.layers.enable(gt),Fe.viewport=new Ar,U[gt]=Fe),Fe.matrix.fromArray(Xt.transform.matrix),Fe.projectionMatrix.fromArray(Xt.projectionMatrix),Fe.viewport.set(He.x,He.y,He.width,He.height),gt===0&&Y.matrix.copy(Fe.matrix),Se===!0&&Y.cameras.push(Fe)}}for(let qe=0;qe<O.length;qe++){const Se=B[qe],gt=O[qe];Se!==null&&gt!==void 0&&gt.update(Se,me,g||d)}tt&&tt(ne,me),S=null}const ve=new UW;ve.setAnimationLoop(St),this.setAnimationLoop=function(ne){tt=ne},this.dispose=function(){}}}function OMe(r,e){function n(P,R){P.fogColor.value.copy(R.color),R.isFog?(P.fogNear.value=R.near,P.fogFar.value=R.far):R.isFogExp2&&(P.fogDensity.value=R.density)}function s(P,R,O,B,N){R.isMeshBasicMaterial||R.isMeshLambertMaterial?a(P,R):R.isMeshToonMaterial?(a(P,R),y(P,R)):R.isMeshPhongMaterial?(a(P,R),_(P,R)):R.isMeshStandardMaterial?(a(P,R),w(P,R),R.isMeshPhysicalMaterial&&k(P,R,N)):R.isMeshMatcapMaterial?(a(P,R),S(P,R)):R.isMeshDepthMaterial?a(P,R):R.isMeshDistanceMaterial?(a(P,R),A(P,R)):R.isMeshNormalMaterial?a(P,R):R.isLineBasicMaterial?(u(P,R),R.isLineDashedMaterial&&d(P,R)):R.isPointsMaterial?f(P,R,O,B):R.isSpriteMaterial?g(P,R):R.isShadowMaterial?(P.color.value.copy(R.color),P.opacity.value=R.opacity):R.isShaderMaterial&&(R.uniformsNeedUpdate=!1)}function a(P,R){P.opacity.value=R.opacity,R.color&&P.diffuse.value.copy(R.color),R.emissive&&P.emissive.value.copy(R.emissive).multiplyScalar(R.emissiveIntensity),R.map&&(P.map.value=R.map),R.alphaMap&&(P.alphaMap.value=R.alphaMap),R.bumpMap&&(P.bumpMap.value=R.bumpMap,P.bumpScale.value=R.bumpScale,R.side===nl&&(P.bumpScale.value*=-1)),R.displacementMap&&(P.displacementMap.value=R.displacementMap,P.displacementScale.value=R.displacementScale,P.displacementBias.value=R.displacementBias),R.emissiveMap&&(P.emissiveMap.value=R.emissiveMap),R.normalMap&&(P.normalMap.value=R.normalMap,P.normalScale.value.copy(R.normalScale),R.side===nl&&P.normalScale.value.negate()),R.specularMap&&(P.specularMap.value=R.specularMap),R.alphaTest>0&&(P.alphaTest.value=R.alphaTest);const O=e.get(R).envMap;if(O&&(P.envMap.value=O,P.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,P.reflectivity.value=R.reflectivity,P.ior.value=R.ior,P.refractionRatio.value=R.refractionRatio),R.lightMap){P.lightMap.value=R.lightMap;const V=r.physicallyCorrectLights!==!0?Math.PI:1;P.lightMapIntensity.value=R.lightMapIntensity*V}R.aoMap&&(P.aoMap.value=R.aoMap,P.aoMapIntensity.value=R.aoMapIntensity);let B;R.map?B=R.map:R.specularMap?B=R.specularMap:R.displacementMap?B=R.displacementMap:R.normalMap?B=R.normalMap:R.bumpMap?B=R.bumpMap:R.roughnessMap?B=R.roughnessMap:R.metalnessMap?B=R.metalnessMap:R.alphaMap?B=R.alphaMap:R.emissiveMap?B=R.emissiveMap:R.clearcoatMap?B=R.clearcoatMap:R.clearcoatNormalMap?B=R.clearcoatNormalMap:R.clearcoatRoughnessMap?B=R.clearcoatRoughnessMap:R.iridescenceMap?B=R.iridescenceMap:R.iridescenceThicknessMap?B=R.iridescenceThicknessMap:R.specularIntensityMap?B=R.specularIntensityMap:R.specularColorMap?B=R.specularColorMap:R.transmissionMap?B=R.transmissionMap:R.thicknessMap?B=R.thicknessMap:R.sheenColorMap?B=R.sheenColorMap:R.sheenRoughnessMap&&(B=R.sheenRoughnessMap),B!==void 0&&(B.isWebGLRenderTarget&&(B=B.texture),B.matrixAutoUpdate===!0&&B.updateMatrix(),P.uvTransform.value.copy(B.matrix));let N;R.aoMap?N=R.aoMap:R.lightMap&&(N=R.lightMap),N!==void 0&&(N.isWebGLRenderTarget&&(N=N.texture),N.matrixAutoUpdate===!0&&N.updateMatrix(),P.uv2Transform.value.copy(N.matrix))}function u(P,R){P.diffuse.value.copy(R.color),P.opacity.value=R.opacity}function d(P,R){P.dashSize.value=R.dashSize,P.totalSize.value=R.dashSize+R.gapSize,P.scale.value=R.scale}function f(P,R,O,B){P.diffuse.value.copy(R.color),P.opacity.value=R.opacity,P.size.value=R.size*O,P.scale.value=B*.5,R.map&&(P.map.value=R.map),R.alphaMap&&(P.alphaMap.value=R.alphaMap),R.alphaTest>0&&(P.alphaTest.value=R.alphaTest);let N;R.map?N=R.map:R.alphaMap&&(N=R.alphaMap),N!==void 0&&(N.matrixAutoUpdate===!0&&N.updateMatrix(),P.uvTransform.value.copy(N.matrix))}function g(P,R){P.diffuse.value.copy(R.color),P.opacity.value=R.opacity,P.rotation.value=R.rotation,R.map&&(P.map.value=R.map),R.alphaMap&&(P.alphaMap.value=R.alphaMap),R.alphaTest>0&&(P.alphaTest.value=R.alphaTest);let O;R.map?O=R.map:R.alphaMap&&(O=R.alphaMap),O!==void 0&&(O.matrixAutoUpdate===!0&&O.updateMatrix(),P.uvTransform.value.copy(O.matrix))}function _(P,R){P.specular.value.copy(R.specular),P.shininess.value=Math.max(R.shininess,1e-4)}function y(P,R){R.gradientMap&&(P.gradientMap.value=R.gradientMap)}function w(P,R){P.roughness.value=R.roughness,P.metalness.value=R.metalness,R.roughnessMap&&(P.roughnessMap.value=R.roughnessMap),R.metalnessMap&&(P.metalnessMap.value=R.metalnessMap),e.get(R).envMap&&(P.envMapIntensity.value=R.envMapIntensity)}function k(P,R,O){P.ior.value=R.ior,R.sheen>0&&(P.sheenColor.value.copy(R.sheenColor).multiplyScalar(R.sheen),P.sheenRoughness.value=R.sheenRoughness,R.sheenColorMap&&(P.sheenColorMap.value=R.sheenColorMap),R.sheenRoughnessMap&&(P.sheenRoughnessMap.value=R.sheenRoughnessMap)),R.clearcoat>0&&(P.clearcoat.value=R.clearcoat,P.clearcoatRoughness.value=R.clearcoatRoughness,R.clearcoatMap&&(P.clearcoatMap.value=R.clearcoatMap),R.clearcoatRoughnessMap&&(P.clearcoatRoughnessMap.value=R.clearcoatRoughnessMap),R.clearcoatNormalMap&&(P.clearcoatNormalScale.value.copy(R.clearcoatNormalScale),P.clearcoatNormalMap.value=R.clearcoatNormalMap,R.side===nl&&P.clearcoatNormalScale.value.negate())),R.iridescence>0&&(P.iridescence.value=R.iridescence,P.iridescenceIOR.value=R.iridescenceIOR,P.iridescenceThicknessMinimum.value=R.iridescenceThicknessRange[0],P.iridescenceThicknessMaximum.value=R.iridescenceThicknessRange[1],R.iridescenceMap&&(P.iridescenceMap.value=R.iridescenceMap),R.iridescenceThicknessMap&&(P.iridescenceThicknessMap.value=R.iridescenceThicknessMap)),R.transmission>0&&(P.transmission.value=R.transmission,P.transmissionSamplerMap.value=O.texture,P.transmissionSamplerSize.value.set(O.width,O.height),R.transmissionMap&&(P.transmissionMap.value=R.transmissionMap),P.thickness.value=R.thickness,R.thicknessMap&&(P.thicknessMap.value=R.thicknessMap),P.attenuationDistance.value=R.attenuationDistance,P.attenuationColor.value.copy(R.attenuationColor)),P.specularIntensity.value=R.specularIntensity,P.specularColor.value.copy(R.specularColor),R.specularIntensityMap&&(P.specularIntensityMap.value=R.specularIntensityMap),R.specularColorMap&&(P.specularColorMap.value=R.specularColorMap)}function S(P,R){R.matcap&&(P.matcap.value=R.matcap)}function A(P,R){P.referencePosition.value.copy(R.referencePosition),P.nearDistance.value=R.nearDistance,P.farDistance.value=R.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function FMe(r,e,n,s){let a={},u={},d=[];const f=n.isWebGL2?r.getParameter(35375):0;function g(B,N){const V=N.program;s.uniformBlockBinding(B,V)}function _(B,N){let V=a[B.id];V===void 0&&(A(B),V=y(B),a[B.id]=V,B.addEventListener("dispose",R));const U=N.program;s.updateUBOMapping(B,U);const Y=e.render.frame;u[B.id]!==Y&&(k(B),u[B.id]=Y)}function y(B){const N=w();B.__bindingPointIndex=N;const V=r.createBuffer(),U=B.__size,Y=B.usage;return r.bindBuffer(35345,V),r.bufferData(35345,U,Y),r.bindBuffer(35345,null),r.bindBufferBase(35345,N,V),V}function w(){for(let B=0;B<f;B++)if(d.indexOf(B)===-1)return d.push(B),B;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function k(B){const N=a[B.id],V=B.uniforms,U=B.__cache;r.bindBuffer(35345,N);for(let Y=0,X=V.length;Y<X;Y++){const $=V[Y];if(S($,Y,U)===!0){const ee=$.value,ue=$.__offset;typeof ee=="number"?($.__data[0]=ee,r.bufferSubData(35345,ue,$.__data)):($.value.isMatrix3?($.__data[0]=$.value.elements[0],$.__data[1]=$.value.elements[1],$.__data[2]=$.value.elements[2],$.__data[3]=$.value.elements[0],$.__data[4]=$.value.elements[3],$.__data[5]=$.value.elements[4],$.__data[6]=$.value.elements[5],$.__data[7]=$.value.elements[0],$.__data[8]=$.value.elements[6],$.__data[9]=$.value.elements[7],$.__data[10]=$.value.elements[8],$.__data[11]=$.value.elements[0]):ee.toArray($.__data),r.bufferSubData(35345,ue,$.__data))}}r.bindBuffer(35345,null)}function S(B,N,V){const U=B.value;if(V[N]===void 0)return typeof U=="number"?V[N]=U:V[N]=U.clone(),!0;if(typeof U=="number"){if(V[N]!==U)return V[N]=U,!0}else{const Y=V[N];if(Y.equals(U)===!1)return Y.copy(U),!0}return!1}function A(B){const N=B.uniforms;let V=0;const U=16;let Y=0;for(let X=0,$=N.length;X<$;X++){const ee=N[X],ue=P(ee);if(ee.__data=new Float32Array(ue.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=V,X>0){Y=V%U;const Te=U-Y;Y!==0&&Te-ue.boundary<0&&(V+=U-Y,ee.__offset=V)}V+=ue.storage}return Y=V%U,Y>0&&(V+=U-Y),B.__size=V,B.__cache={},this}function P(B){const N=B.value,V={boundary:0,storage:0};return typeof N=="number"?(V.boundary=4,V.storage=4):N.isVector2?(V.boundary=8,V.storage=8):N.isVector3||N.isColor?(V.boundary=16,V.storage=12):N.isVector4?(V.boundary=16,V.storage=16):N.isMatrix3?(V.boundary=48,V.storage=48):N.isMatrix4?(V.boundary=64,V.storage=64):N.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",N),V}function R(B){const N=B.target;N.removeEventListener("dispose",R);const V=d.indexOf(N.__bindingPointIndex);d.splice(V,1),r.deleteBuffer(a[N.id]),delete a[N.id],delete u[N.id]}function O(){for(const B in a)r.deleteBuffer(a[B]);d=[],a={},u={}}return{bind:g,update:_,dispose:O}}function BMe(){const r=n_("canvas");return r.style.display="block",r}function A6(r={}){this.isWebGLRenderer=!0;const e=r.canvas!==void 0?r.canvas:BMe(),n=r.context!==void 0?r.context:null,s=r.depth!==void 0?r.depth:!0,a=r.stencil!==void 0?r.stencil:!0,u=r.antialias!==void 0?r.antialias:!1,d=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,f=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,g=r.powerPreference!==void 0?r.powerPreference:"default",_=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let y;n!==null?y=n.getContextAttributes().alpha:y=r.alpha!==void 0?r.alpha:!1;let w=null,k=null;const S=[],A=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Zd,this.physicallyCorrectLights=!1,this.toneMapping=lu,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const P=this;let R=!1,O=0,B=0,N=null,V=-1,U=null;const Y=new Ar,X=new Ar;let $=null,ee=e.width,ue=e.height,Te=1,De=null,$e=null;const Ue=new Ar(0,0,ee,ue),it=new Ar(0,0,ee,ue);let tt=!1;const St=new t5;let ve=!1,ne=!1,me=null;const qe=new Yi,Se=new _n,gt=new Re,Xt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function He(){return N===null?Te:1}let Fe=n;function pt(Ae,Lt){for(let Zt=0;Zt<Ae.length;Zt++){const Mt=Ae[Zt],on=e.getContext(Mt,Lt);if(on!==null)return on}return null}try{const Ae={alpha:!0,depth:s,stencil:a,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:g,failIfMajorPerformanceCaveat:_};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${X3}`),e.addEventListener("webglcontextlost",An,!1),e.addEventListener("webglcontextrestored",kn,!1),e.addEventListener("webglcontextcreationerror",Qn,!1),Fe===null){const Lt=["webgl2","webgl","experimental-webgl"];if(P.isWebGL1Renderer===!0&&Lt.shift(),Fe=pt(Lt,Ae),Fe===null)throw pt(Lt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Fe.getShaderPrecisionFormat===void 0&&(Fe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ae){throw console.error("THREE.WebGLRenderer: "+Ae.message),Ae}let Rt,Vt,Ke,Ot,oe,ye,We,at,st,It,At,Tt,Ut,Wt,we,fe,lt,Nt,Gt,fn,wn,vn,Xe,nn;function Nn(){Rt=new eTe(Fe),Vt=new qEe(Fe,Rt,r),Rt.init(Vt),vn=new $W(Fe,Rt,Vt),Ke=new PMe(Fe,Rt,Vt),Ot=new iTe,oe=new bMe,ye=new IMe(Fe,Rt,Ke,oe,Vt,vn,Ot),We=new ZEe(P),at=new QEe(P),st=new dCe(Fe,Vt),Xe=new jEe(Fe,Rt,st,Vt),It=new tTe(Fe,st,Ot,Xe),At=new aTe(Fe,It,st,Ot),Gt=new oTe(Fe,Vt,ye),fe=new XEe(oe),Tt=new _Me(P,We,at,Rt,Vt,Xe,fe),Ut=new OMe(P,oe),Wt=new wMe,we=new MMe(Rt,Vt),Nt=new YEe(P,We,at,Ke,At,y,d),lt=new RMe(P,At,Vt),nn=new FMe(Fe,Ot,Vt,Ke),fn=new $Ee(Fe,Rt,Ot,Vt),wn=new nTe(Fe,Rt,Ot,Vt),Ot.programs=Tt.programs,P.capabilities=Vt,P.extensions=Rt,P.properties=oe,P.renderLists=Wt,P.shadowMap=lt,P.state=Ke,P.info=Ot}Nn();const Rn=new NMe(P,Fe);this.xr=Rn,this.getContext=function(){return Fe},this.getContextAttributes=function(){return Fe.getContextAttributes()},this.forceContextLoss=function(){const Ae=Rt.get("WEBGL_lose_context");Ae&&Ae.loseContext()},this.forceContextRestore=function(){const Ae=Rt.get("WEBGL_lose_context");Ae&&Ae.restoreContext()},this.getPixelRatio=function(){return Te},this.setPixelRatio=function(Ae){Ae!==void 0&&(Te=Ae,this.setSize(ee,ue,!1))},this.getSize=function(Ae){return Ae.set(ee,ue)},this.setSize=function(Ae,Lt,Zt){if(Rn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ee=Ae,ue=Lt,e.width=Math.floor(Ae*Te),e.height=Math.floor(Lt*Te),Zt!==!1&&(e.style.width=Ae+"px",e.style.height=Lt+"px"),this.setViewport(0,0,Ae,Lt)},this.getDrawingBufferSize=function(Ae){return Ae.set(ee*Te,ue*Te).floor()},this.setDrawingBufferSize=function(Ae,Lt,Zt){ee=Ae,ue=Lt,Te=Zt,e.width=Math.floor(Ae*Zt),e.height=Math.floor(Lt*Zt),this.setViewport(0,0,Ae,Lt)},this.getCurrentViewport=function(Ae){return Ae.copy(Y)},this.getViewport=function(Ae){return Ae.copy(Ue)},this.setViewport=function(Ae,Lt,Zt,Mt){Ae.isVector4?Ue.set(Ae.x,Ae.y,Ae.z,Ae.w):Ue.set(Ae,Lt,Zt,Mt),Ke.viewport(Y.copy(Ue).multiplyScalar(Te).floor())},this.getScissor=function(Ae){return Ae.copy(it)},this.setScissor=function(Ae,Lt,Zt,Mt){Ae.isVector4?it.set(Ae.x,Ae.y,Ae.z,Ae.w):it.set(Ae,Lt,Zt,Mt),Ke.scissor(X.copy(it).multiplyScalar(Te).floor())},this.getScissorTest=function(){return tt},this.setScissorTest=function(Ae){Ke.setScissorTest(tt=Ae)},this.setOpaqueSort=function(Ae){De=Ae},this.setTransparentSort=function(Ae){$e=Ae},this.getClearColor=function(Ae){return Ae.copy(Nt.getClearColor())},this.setClearColor=function(){Nt.setClearColor.apply(Nt,arguments)},this.getClearAlpha=function(){return Nt.getClearAlpha()},this.setClearAlpha=function(){Nt.setClearAlpha.apply(Nt,arguments)},this.clear=function(Ae=!0,Lt=!0,Zt=!0){let Mt=0;Ae&&(Mt|=16384),Lt&&(Mt|=256),Zt&&(Mt|=1024),Fe.clear(Mt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",An,!1),e.removeEventListener("webglcontextrestored",kn,!1),e.removeEventListener("webglcontextcreationerror",Qn,!1),Wt.dispose(),we.dispose(),oe.dispose(),We.dispose(),at.dispose(),At.dispose(),Xe.dispose(),nn.dispose(),Tt.dispose(),Rn.dispose(),Rn.removeEventListener("sessionstart",On),Rn.removeEventListener("sessionend",jn),me&&(me.dispose(),me=null),Xi.stop()};function An(Ae){Ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function kn(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const Ae=Ot.autoReset,Lt=lt.enabled,Zt=lt.autoUpdate,Mt=lt.needsUpdate,on=lt.type;Nn(),Ot.autoReset=Ae,lt.enabled=Lt,lt.autoUpdate=Zt,lt.needsUpdate=Mt,lt.type=on}function Qn(Ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ae.statusMessage)}function ji(Ae){const Lt=Ae.target;Lt.removeEventListener("dispose",ji),br(Lt)}function br(Ae){ut(Ae),oe.remove(Ae)}function ut(Ae){const Lt=oe.get(Ae).programs;Lt!==void 0&&(Lt.forEach(function(Zt){Tt.releaseProgram(Zt)}),Ae.isShaderMaterial&&Tt.releaseShaderCache(Ae))}this.renderBufferDirect=function(Ae,Lt,Zt,Mt,on,oi){Lt===null&&(Lt=Xt);const wi=on.isMesh&&on.matrixWorld.determinant()<0,ki=of(Ae,Lt,Zt,Mt,on);Ke.setMaterial(Mt,wi);let Mi=Zt.index;const rr=Zt.attributes.position;if(Mi===null){if(rr===void 0||rr.count===0)return}else if(Mi.count===0)return;let Ui=1;Mt.wireframe===!0&&(Mi=It.getWireframeAttribute(Zt),Ui=2),Xe.setup(on,Mt,ki,Zt,Mi);let Zi,kr=fn;Mi!==null&&(Zi=st.get(Mi),kr=wn,kr.setIndex(Zi));const Ma=Mi!==null?Mi.count:rr.count,Mo=Zt.drawRange.start*Ui,Gs=Zt.drawRange.count*Ui,Cr=oi!==null?oi.start*Ui:0,or=oi!==null?oi.count*Ui:1/0,Aa=Math.max(Mo,Cr),Dr=Math.min(Ma,Mo+Gs,Cr+or)-1,Hs=Math.max(0,Dr-Aa+1);if(Hs!==0){if(on.isMesh)Mt.wireframe===!0?(Ke.setLineWidth(Mt.wireframeLinewidth*He()),kr.setMode(1)):kr.setMode(4);else if(on.isLine){let Yo=Mt.linewidth;Yo===void 0&&(Yo=1),Ke.setLineWidth(Yo*He()),on.isLineSegments?kr.setMode(1):on.isLineLoop?kr.setMode(2):kr.setMode(3)}else on.isPoints?kr.setMode(0):on.isSprite&&kr.setMode(4);if(on.isInstancedMesh)kr.renderInstances(Aa,Hs,on.count);else if(Zt.isInstancedBufferGeometry){const Yo=Math.min(Zt.instanceCount,Zt._maxInstanceCount);kr.renderInstances(Aa,Hs,Yo)}else kr.render(Aa,Hs)}},this.compile=function(Ae,Lt){function Zt(Mt,on,oi){Mt.transparent===!0&&Mt.side===yh?(Mt.side=nl,Mt.needsUpdate=!0,ro(Mt,on,oi),Mt.side=Gp,Mt.needsUpdate=!0,ro(Mt,on,oi),Mt.side=yh):ro(Mt,on,oi)}k=we.get(Ae),k.init(),A.push(k),Ae.traverseVisible(function(Mt){Mt.isLight&&Mt.layers.test(Lt.layers)&&(k.pushLight(Mt),Mt.castShadow&&k.pushShadow(Mt))}),k.setupLights(P.physicallyCorrectLights),Ae.traverse(function(Mt){const on=Mt.material;if(on)if(Array.isArray(on))for(let oi=0;oi<on.length;oi++){const wi=on[oi];Zt(wi,Ae,Mt)}else Zt(on,Ae,Mt)}),A.pop(),k=null};let en=null;function mn(Ae){en&&en(Ae)}function On(){Xi.stop()}function jn(){Xi.start()}const Xi=new UW;Xi.setAnimationLoop(mn),typeof self<"u"&&Xi.setContext(self),this.setAnimationLoop=function(Ae){en=Ae,Rn.setAnimationLoop(Ae),Ae===null?Xi.stop():Xi.start()},Rn.addEventListener("sessionstart",On),Rn.addEventListener("sessionend",jn),this.render=function(Ae,Lt){if(Lt!==void 0&&Lt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),Lt.parent===null&&Lt.matrixWorldAutoUpdate===!0&&Lt.updateMatrixWorld(),Rn.enabled===!0&&Rn.isPresenting===!0&&(Rn.cameraAutoUpdate===!0&&Rn.updateCamera(Lt),Lt=Rn.getCamera()),Ae.isScene===!0&&Ae.onBeforeRender(P,Ae,Lt,N),k=we.get(Ae,A.length),k.init(),A.push(k),qe.multiplyMatrices(Lt.projectionMatrix,Lt.matrixWorldInverse),St.setFromProjectionMatrix(qe),ne=this.localClippingEnabled,ve=fe.init(this.clippingPlanes,ne,Lt),w=Wt.get(Ae,S.length),w.init(),S.push(w),Rr(Ae,Lt,0,P.sortObjects),w.finish(),P.sortObjects===!0&&w.sort(De,$e),ve===!0&&fe.beginShadows();const Zt=k.state.shadowsArray;if(lt.render(Zt,Ae,Lt),ve===!0&&fe.endShadows(),this.info.autoReset===!0&&this.info.reset(),Nt.render(w,Ae),k.setupLights(P.physicallyCorrectLights),Lt.isArrayCamera){const Mt=Lt.cameras;for(let on=0,oi=Mt.length;on<oi;on++){const wi=Mt[on];$r(w,Ae,wi,wi.viewport)}}else $r(w,Ae,Lt);N!==null&&(ye.updateMultisampleRenderTarget(N),ye.updateRenderTargetMipmap(N)),Ae.isScene===!0&&Ae.onAfterRender(P,Ae,Lt),Xe.resetDefaultState(),V=-1,U=null,A.pop(),A.length>0?k=A[A.length-1]:k=null,S.pop(),S.length>0?w=S[S.length-1]:w=null};function Rr(Ae,Lt,Zt,Mt){if(Ae.visible===!1)return;if(Ae.layers.test(Lt.layers)){if(Ae.isGroup)Zt=Ae.renderOrder;else if(Ae.isLOD)Ae.autoUpdate===!0&&Ae.update(Lt);else if(Ae.isLight)k.pushLight(Ae),Ae.castShadow&&k.pushShadow(Ae);else if(Ae.isSprite){if(!Ae.frustumCulled||St.intersectsSprite(Ae)){Mt&&gt.setFromMatrixPosition(Ae.matrixWorld).applyMatrix4(qe);const wi=At.update(Ae),ki=Ae.material;ki.visible&&w.push(Ae,wi,ki,Zt,gt.z,null)}}else if((Ae.isMesh||Ae.isLine||Ae.isPoints)&&(Ae.isSkinnedMesh&&Ae.skeleton.frame!==Ot.render.frame&&(Ae.skeleton.update(),Ae.skeleton.frame=Ot.render.frame),!Ae.frustumCulled||St.intersectsObject(Ae))){Mt&&gt.setFromMatrixPosition(Ae.matrixWorld).applyMatrix4(qe);const wi=At.update(Ae),ki=Ae.material;if(Array.isArray(ki)){const Mi=wi.groups;for(let rr=0,Ui=Mi.length;rr<Ui;rr++){const Zi=Mi[rr],kr=ki[Zi.materialIndex];kr&&kr.visible&&w.push(Ae,wi,kr,Zt,gt.z,Zi)}}else ki.visible&&w.push(Ae,wi,ki,Zt,gt.z,null)}}const oi=Ae.children;for(let wi=0,ki=oi.length;wi<ki;wi++)Rr(oi[wi],Lt,Zt,Mt)}function $r(Ae,Lt,Zt,Mt){const on=Ae.opaque,oi=Ae.transmissive,wi=Ae.transparent;k.setupLightsView(Zt),oi.length>0&&mo(on,Lt,Zt),Mt&&Ke.viewport(Y.copy(Mt)),on.length>0&&mr(on,Lt,Zt),oi.length>0&&mr(oi,Lt,Zt),wi.length>0&&mr(wi,Lt,Zt),Ke.buffers.depth.setTest(!0),Ke.buffers.depth.setMask(!0),Ke.buffers.color.setMask(!0),Ke.setPolygonOffset(!1)}function mo(Ae,Lt,Zt){const Mt=Vt.isWebGL2;me===null&&(me=new Tl(1,1,{generateMipmaps:!0,type:Rt.has("EXT_color_buffer_half_float")?Cg:Xd,minFilter:Jp,samples:Mt&&u===!0?4:0})),P.getDrawingBufferSize(Se),Mt?me.setSize(Se.x,Se.y):me.setSize(S3(Se.x),S3(Se.y));const on=P.getRenderTarget();P.setRenderTarget(me),P.clear();const oi=P.toneMapping;P.toneMapping=lu,mr(Ae,Lt,Zt),P.toneMapping=oi,ye.updateMultisampleRenderTarget(me),ye.updateRenderTargetMipmap(me),P.setRenderTarget(on)}function mr(Ae,Lt,Zt){const Mt=Lt.isScene===!0?Lt.overrideMaterial:null;for(let on=0,oi=Ae.length;on<oi;on++){const wi=Ae[on],ki=wi.object,Mi=wi.geometry,rr=Mt===null?wi.material:Mt,Ui=wi.group;ki.layers.test(Zt.layers)&&go(ki,Lt,Zt,Mi,rr,Ui)}}function go(Ae,Lt,Zt,Mt,on,oi){Ae.onBeforeRender(P,Lt,Zt,Mt,on,oi),Ae.modelViewMatrix.multiplyMatrices(Zt.matrixWorldInverse,Ae.matrixWorld),Ae.normalMatrix.getNormalMatrix(Ae.modelViewMatrix),on.onBeforeRender(P,Lt,Zt,Mt,Ae,oi),on.transparent===!0&&on.side===yh?(on.side=nl,on.needsUpdate=!0,P.renderBufferDirect(Zt,Lt,Mt,on,Ae,oi),on.side=Gp,on.needsUpdate=!0,P.renderBufferDirect(Zt,Lt,Mt,on,Ae,oi),on.side=yh):P.renderBufferDirect(Zt,Lt,Mt,on,Ae,oi),Ae.onAfterRender(P,Lt,Zt,Mt,on,oi)}function ro(Ae,Lt,Zt){Lt.isScene!==!0&&(Lt=Xt);const Mt=oe.get(Ae),on=k.state.lights,oi=k.state.shadowsArray,wi=on.state.version,ki=Tt.getParameters(Ae,on.state,oi,Lt,Zt),Mi=Tt.getProgramCacheKey(ki);let rr=Mt.programs;Mt.environment=Ae.isMeshStandardMaterial?Lt.environment:null,Mt.fog=Lt.fog,Mt.envMap=(Ae.isMeshStandardMaterial?at:We).get(Ae.envMap||Mt.environment),rr===void 0&&(Ae.addEventListener("dispose",ji),rr=new Map,Mt.programs=rr);let Ui=rr.get(Mi);if(Ui!==void 0){if(Mt.currentProgram===Ui&&Mt.lightsStateVersion===wi)return Ih(Ae,ki),Ui}else ki.uniforms=Tt.getUniforms(Ae),Ae.onBuild(Zt,ki,P),Ae.onBeforeCompile(ki,P),Ui=Tt.acquireProgram(ki,Mi),rr.set(Mi,Ui),Mt.uniforms=ki.uniforms;const Zi=Mt.uniforms;(!Ae.isShaderMaterial&&!Ae.isRawShaderMaterial||Ae.clipping===!0)&&(Zi.clippingPlanes=fe.uniform),Ih(Ae,ki),Mt.needsLights=gu(Ae),Mt.lightsStateVersion=wi,Mt.needsLights&&(Zi.ambientLightColor.value=on.state.ambient,Zi.lightProbe.value=on.state.probe,Zi.directionalLights.value=on.state.directional,Zi.directionalLightShadows.value=on.state.directionalShadow,Zi.spotLights.value=on.state.spot,Zi.spotLightShadows.value=on.state.spotShadow,Zi.rectAreaLights.value=on.state.rectArea,Zi.ltc_1.value=on.state.rectAreaLTC1,Zi.ltc_2.value=on.state.rectAreaLTC2,Zi.pointLights.value=on.state.point,Zi.pointLightShadows.value=on.state.pointShadow,Zi.hemisphereLights.value=on.state.hemi,Zi.directionalShadowMap.value=on.state.directionalShadowMap,Zi.directionalShadowMatrix.value=on.state.directionalShadowMatrix,Zi.spotShadowMap.value=on.state.spotShadowMap,Zi.spotLightMatrix.value=on.state.spotLightMatrix,Zi.spotLightMap.value=on.state.spotLightMap,Zi.pointShadowMap.value=on.state.pointShadowMap,Zi.pointShadowMatrix.value=on.state.pointShadowMatrix);const kr=Ui.getUniforms(),Ma=i3.seqWithValue(kr.seq,Zi);return Mt.currentProgram=Ui,Mt.uniformsList=Ma,Ui}function Ih(Ae,Lt){const Zt=oe.get(Ae);Zt.outputEncoding=Lt.outputEncoding,Zt.instancing=Lt.instancing,Zt.skinning=Lt.skinning,Zt.morphTargets=Lt.morphTargets,Zt.morphNormals=Lt.morphNormals,Zt.morphColors=Lt.morphColors,Zt.morphTargetsCount=Lt.morphTargetsCount,Zt.numClippingPlanes=Lt.numClippingPlanes,Zt.numIntersection=Lt.numClipIntersection,Zt.vertexAlphas=Lt.vertexAlphas,Zt.vertexTangents=Lt.vertexTangents,Zt.toneMapping=Lt.toneMapping}function of(Ae,Lt,Zt,Mt,on){Lt.isScene!==!0&&(Lt=Xt),ye.resetTextureUnits();const oi=Lt.fog,wi=Mt.isMeshStandardMaterial?Lt.environment:null,ki=N===null?P.outputEncoding:N.isXRRenderTarget===!0?N.texture.encoding:Zd,Mi=(Mt.isMeshStandardMaterial?at:We).get(Mt.envMap||wi),rr=Mt.vertexColors===!0&&!!Zt.attributes.color&&Zt.attributes.color.itemSize===4,Ui=!!Mt.normalMap&&!!Zt.attributes.tangent,Zi=!!Zt.morphAttributes.position,kr=!!Zt.morphAttributes.normal,Ma=!!Zt.morphAttributes.color,Mo=Mt.toneMapped?P.toneMapping:lu,Gs=Zt.morphAttributes.position||Zt.morphAttributes.normal||Zt.morphAttributes.color,Cr=Gs!==void 0?Gs.length:0,or=oe.get(Mt),Aa=k.state.lights;if(ve===!0&&(ne===!0||Ae!==U)){const _s=Ae===U&&Mt.id===V;fe.setState(Mt,Ae,_s)}let Dr=!1;Mt.version===or.__version?(or.needsLights&&or.lightsStateVersion!==Aa.state.version||or.outputEncoding!==ki||on.isInstancedMesh&&or.instancing===!1||!on.isInstancedMesh&&or.instancing===!0||on.isSkinnedMesh&&or.skinning===!1||!on.isSkinnedMesh&&or.skinning===!0||or.envMap!==Mi||Mt.fog===!0&&or.fog!==oi||or.numClippingPlanes!==void 0&&(or.numClippingPlanes!==fe.numPlanes||or.numIntersection!==fe.numIntersection)||or.vertexAlphas!==rr||or.vertexTangents!==Ui||or.morphTargets!==Zi||or.morphNormals!==kr||or.morphColors!==Ma||or.toneMapping!==Mo||Vt.isWebGL2===!0&&or.morphTargetsCount!==Cr)&&(Dr=!0):(Dr=!0,or.__version=Mt.version);let Hs=or.currentProgram;Dr===!0&&(Hs=ro(Mt,Lt,on));let Yo=!1,La=!1,ca=!1;const Nr=Hs.getUniforms(),ua=or.uniforms;if(Ke.useProgram(Hs.program)&&(Yo=!0,La=!0,ca=!0),Mt.id!==V&&(V=Mt.id,La=!0),Yo||U!==Ae){if(Nr.setValue(Fe,"projectionMatrix",Ae.projectionMatrix),Vt.logarithmicDepthBuffer&&Nr.setValue(Fe,"logDepthBufFC",2/(Math.log(Ae.far+1)/Math.LN2)),U!==Ae&&(U=Ae,La=!0,ca=!0),Mt.isShaderMaterial||Mt.isMeshPhongMaterial||Mt.isMeshToonMaterial||Mt.isMeshStandardMaterial||Mt.envMap){const _s=Nr.map.cameraPosition;_s!==void 0&&_s.setValue(Fe,gt.setFromMatrixPosition(Ae.matrixWorld))}(Mt.isMeshPhongMaterial||Mt.isMeshToonMaterial||Mt.isMeshLambertMaterial||Mt.isMeshBasicMaterial||Mt.isMeshStandardMaterial||Mt.isShaderMaterial)&&Nr.setValue(Fe,"isOrthographic",Ae.isOrthographicCamera===!0),(Mt.isMeshPhongMaterial||Mt.isMeshToonMaterial||Mt.isMeshLambertMaterial||Mt.isMeshBasicMaterial||Mt.isMeshStandardMaterial||Mt.isShaderMaterial||Mt.isShadowMaterial||on.isSkinnedMesh)&&Nr.setValue(Fe,"viewMatrix",Ae.matrixWorldInverse)}if(on.isSkinnedMesh){Nr.setOptional(Fe,on,"bindMatrix"),Nr.setOptional(Fe,on,"bindMatrixInverse");const _s=on.skeleton;_s&&(Vt.floatVertexTextures?(_s.boneTexture===null&&_s.computeBoneTexture(),Nr.setValue(Fe,"boneTexture",_s.boneTexture,ye),Nr.setValue(Fe,"boneTextureSize",_s.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ll=Zt.morphAttributes;if((Ll.position!==void 0||Ll.normal!==void 0||Ll.color!==void 0&&Vt.isWebGL2===!0)&&Gt.update(on,Zt,Mt,Hs),(La||or.receiveShadow!==on.receiveShadow)&&(or.receiveShadow=on.receiveShadow,Nr.setValue(Fe,"receiveShadow",on.receiveShadow)),Mt.isMeshGouraudMaterial&&Mt.envMap!==null&&(ua.envMap.value=Mi,ua.flipEnvMap.value=Mi.isCubeTexture&&Mi.isRenderTargetTexture===!1?-1:1),La&&(Nr.setValue(Fe,"toneMappingExposure",P.toneMappingExposure),or.needsLights&&Dh(ua,ca),oi&&Mt.fog===!0&&Ut.refreshFogUniforms(ua,oi),Ut.refreshMaterialUniforms(ua,Mt,Te,ue,me),i3.upload(Fe,or.uniformsList,ua,ye)),Mt.isShaderMaterial&&Mt.uniformsNeedUpdate===!0&&(i3.upload(Fe,or.uniformsList,ua,ye),Mt.uniformsNeedUpdate=!1),Mt.isSpriteMaterial&&Nr.setValue(Fe,"center",on.center),Nr.setValue(Fe,"modelViewMatrix",on.modelViewMatrix),Nr.setValue(Fe,"normalMatrix",on.normalMatrix),Nr.setValue(Fe,"modelMatrix",on.matrixWorld),Mt.isShaderMaterial||Mt.isRawShaderMaterial){const _s=Mt.uniformsGroups;for(let Rl=0,kc=_s.length;Rl<kc;Rl++)if(Vt.isWebGL2){const Ur=_s[Rl];nn.update(Ur,Hs),nn.bind(Ur,Hs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Hs}function Dh(Ae,Lt){Ae.ambientLightColor.needsUpdate=Lt,Ae.lightProbe.needsUpdate=Lt,Ae.directionalLights.needsUpdate=Lt,Ae.directionalLightShadows.needsUpdate=Lt,Ae.pointLights.needsUpdate=Lt,Ae.pointLightShadows.needsUpdate=Lt,Ae.spotLights.needsUpdate=Lt,Ae.spotLightShadows.needsUpdate=Lt,Ae.rectAreaLights.needsUpdate=Lt,Ae.hemisphereLights.needsUpdate=Lt}function gu(Ae){return Ae.isMeshLambertMaterial||Ae.isMeshToonMaterial||Ae.isMeshPhongMaterial||Ae.isMeshStandardMaterial||Ae.isShadowMaterial||Ae.isShaderMaterial&&Ae.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(Ae,Lt,Zt){oe.get(Ae.texture).__webglTexture=Lt,oe.get(Ae.depthTexture).__webglTexture=Zt;const Mt=oe.get(Ae);Mt.__hasExternalTextures=!0,Mt.__hasExternalTextures&&(Mt.__autoAllocateDepthBuffer=Zt===void 0,Mt.__autoAllocateDepthBuffer||Rt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Mt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ae,Lt){const Zt=oe.get(Ae);Zt.__webglFramebuffer=Lt,Zt.__useDefaultFramebuffer=Lt===void 0},this.setRenderTarget=function(Ae,Lt=0,Zt=0){N=Ae,O=Lt,B=Zt;let Mt=!0,on=null,oi=!1,wi=!1;if(Ae){const Mi=oe.get(Ae);Mi.__useDefaultFramebuffer!==void 0?(Ke.bindFramebuffer(36160,null),Mt=!1):Mi.__webglFramebuffer===void 0?ye.setupRenderTarget(Ae):Mi.__hasExternalTextures&&ye.rebindTextures(Ae,oe.get(Ae.texture).__webglTexture,oe.get(Ae.depthTexture).__webglTexture);const rr=Ae.texture;(rr.isData3DTexture||rr.isDataArrayTexture||rr.isCompressedArrayTexture)&&(wi=!0);const Ui=oe.get(Ae).__webglFramebuffer;Ae.isWebGLCubeRenderTarget?(on=Ui[Lt],oi=!0):Vt.isWebGL2&&Ae.samples>0&&ye.useMultisampledRTT(Ae)===!1?on=oe.get(Ae).__webglMultisampledFramebuffer:on=Ui,Y.copy(Ae.viewport),X.copy(Ae.scissor),$=Ae.scissorTest}else Y.copy(Ue).multiplyScalar(Te).floor(),X.copy(it).multiplyScalar(Te).floor(),$=tt;if(Ke.bindFramebuffer(36160,on)&&Vt.drawBuffers&&Mt&&Ke.drawBuffers(Ae,on),Ke.viewport(Y),Ke.scissor(X),Ke.setScissorTest($),oi){const Mi=oe.get(Ae.texture);Fe.framebufferTexture2D(36160,36064,34069+Lt,Mi.__webglTexture,Zt)}else if(wi){const Mi=oe.get(Ae.texture),rr=Lt||0;Fe.framebufferTextureLayer(36160,36064,Mi.__webglTexture,Zt||0,rr)}V=-1},this.readRenderTargetPixels=function(Ae,Lt,Zt,Mt,on,oi,wi){if(!(Ae&&Ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ki=oe.get(Ae).__webglFramebuffer;if(Ae.isWebGLCubeRenderTarget&&wi!==void 0&&(ki=ki[wi]),ki){Ke.bindFramebuffer(36160,ki);try{const Mi=Ae.texture,rr=Mi.format,Ui=Mi.type;if(rr!==Qa&&vn.convert(rr)!==Fe.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Zi=Ui===Cg&&(Rt.has("EXT_color_buffer_half_float")||Vt.isWebGL2&&Rt.has("EXT_color_buffer_float"));if(Ui!==Xd&&vn.convert(Ui)!==Fe.getParameter(35738)&&!(Ui===_h&&(Vt.isWebGL2||Rt.has("OES_texture_float")||Rt.has("WEBGL_color_buffer_float")))&&!Zi){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Lt>=0&&Lt<=Ae.width-Mt&&Zt>=0&&Zt<=Ae.height-on&&Fe.readPixels(Lt,Zt,Mt,on,vn.convert(rr),vn.convert(Ui),oi)}finally{const Mi=N!==null?oe.get(N).__webglFramebuffer:null;Ke.bindFramebuffer(36160,Mi)}}},this.copyFramebufferToTexture=function(Ae,Lt,Zt=0){const Mt=Math.pow(2,-Zt),on=Math.floor(Lt.image.width*Mt),oi=Math.floor(Lt.image.height*Mt);ye.setTexture2D(Lt,0),Fe.copyTexSubImage2D(3553,Zt,0,0,Ae.x,Ae.y,on,oi),Ke.unbindTexture()},this.copyTextureToTexture=function(Ae,Lt,Zt,Mt=0){const on=Lt.image.width,oi=Lt.image.height,wi=vn.convert(Zt.format),ki=vn.convert(Zt.type);ye.setTexture2D(Zt,0),Fe.pixelStorei(37440,Zt.flipY),Fe.pixelStorei(37441,Zt.premultiplyAlpha),Fe.pixelStorei(3317,Zt.unpackAlignment),Lt.isDataTexture?Fe.texSubImage2D(3553,Mt,Ae.x,Ae.y,on,oi,wi,ki,Lt.image.data):Lt.isCompressedTexture?Fe.compressedTexSubImage2D(3553,Mt,Ae.x,Ae.y,Lt.mipmaps[0].width,Lt.mipmaps[0].height,wi,Lt.mipmaps[0].data):Fe.texSubImage2D(3553,Mt,Ae.x,Ae.y,wi,ki,Lt.image),Mt===0&&Zt.generateMipmaps&&Fe.generateMipmap(3553),Ke.unbindTexture()},this.copyTextureToTexture3D=function(Ae,Lt,Zt,Mt,on=0){if(P.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const oi=Ae.max.x-Ae.min.x+1,wi=Ae.max.y-Ae.min.y+1,ki=Ae.max.z-Ae.min.z+1,Mi=vn.convert(Mt.format),rr=vn.convert(Mt.type);let Ui;if(Mt.isData3DTexture)ye.setTexture3D(Mt,0),Ui=32879;else if(Mt.isDataArrayTexture)ye.setTexture2DArray(Mt,0),Ui=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Fe.pixelStorei(37440,Mt.flipY),Fe.pixelStorei(37441,Mt.premultiplyAlpha),Fe.pixelStorei(3317,Mt.unpackAlignment);const Zi=Fe.getParameter(3314),kr=Fe.getParameter(32878),Ma=Fe.getParameter(3316),Mo=Fe.getParameter(3315),Gs=Fe.getParameter(32877),Cr=Zt.isCompressedTexture?Zt.mipmaps[0]:Zt.image;Fe.pixelStorei(3314,Cr.width),Fe.pixelStorei(32878,Cr.height),Fe.pixelStorei(3316,Ae.min.x),Fe.pixelStorei(3315,Ae.min.y),Fe.pixelStorei(32877,Ae.min.z),Zt.isDataTexture||Zt.isData3DTexture?Fe.texSubImage3D(Ui,on,Lt.x,Lt.y,Lt.z,oi,wi,ki,Mi,rr,Cr.data):Zt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Fe.compressedTexSubImage3D(Ui,on,Lt.x,Lt.y,Lt.z,oi,wi,ki,Mi,Cr.data)):Fe.texSubImage3D(Ui,on,Lt.x,Lt.y,Lt.z,oi,wi,ki,Mi,rr,Cr),Fe.pixelStorei(3314,Zi),Fe.pixelStorei(32878,kr),Fe.pixelStorei(3316,Ma),Fe.pixelStorei(3315,Mo),Fe.pixelStorei(32877,Gs),on===0&&Mt.generateMipmaps&&Fe.generateMipmap(Ui),Ke.unbindTexture()},this.initTexture=function(Ae){Ae.isCubeTexture?ye.setTextureCube(Ae,0):Ae.isData3DTexture?ye.setTexture3D(Ae,0):Ae.isDataArrayTexture||Ae.isCompressedArrayTexture?ye.setTexture2DArray(Ae,0):ye.setTexture2D(Ae,0),Ke.unbindTexture()},this.resetState=function(){O=0,B=0,N=null,Ke.reset(),Xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class ZW extends A6{}ZW.prototype.isWebGL1Renderer=!0;class i5{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new qn(e),this.density=n}clone(){return new i5(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class r5{constructor(e,n=1,s=1e3){this.isFog=!0,this.name="",this.color=new qn(e),this.near=n,this.far=s}clone(){return new r5(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class L6 extends _r{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.backgroundBlurriness=this.backgroundBlurriness),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class s5{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=e_,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=il()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,s){e*=this.stride,s*=n.stride;for(let a=0,u=this.stride;a<u;a++)this.array[e+a]=n.array[s+a];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=il()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(n,this.stride);return s.setUsage(this.usage),s}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=il()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ia=new Re;class Yp{constructor(e,n,s,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=s,this.normalized=a===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,s=this.data.count;n<s;n++)ia.fromBufferAttribute(this,n),ia.applyMatrix4(e),this.setXYZ(n,ia.x,ia.y,ia.z);return this}applyNormalMatrix(e){for(let n=0,s=this.count;n<s;n++)ia.fromBufferAttribute(this,n),ia.applyNormalMatrix(e),this.setXYZ(n,ia.x,ia.y,ia.z);return this}transformDirection(e){for(let n=0,s=this.count;n<s;n++)ia.fromBufferAttribute(this,n),ia.transformDirection(e),this.setXYZ(n,ia.x,ia.y,ia.z);return this}setX(e,n){return this.normalized&&(n=Vr(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Vr(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Vr(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Vr(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=bh(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=bh(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=bh(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=bh(n,this.array)),n}setXY(e,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Vr(n,this.array),s=Vr(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this}setXYZ(e,n,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=Vr(n,this.array),s=Vr(s,this.array),a=Vr(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this.data.array[e+2]=a,this}setXYZW(e,n,s,a,u){return e=e*this.data.stride+this.offset,this.normalized&&(n=Vr(n,this.array),s=Vr(s,this.array),a=Vr(a,this.array),u=Vr(u,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this.data.array[e+2]=a,this.data.array[e+3]=u,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)n.push(this.data.array[a+u])}return new Wr(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Yp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)n.push(this.data.array[a+u])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class R6 extends Ho{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new qn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let j0;const ry=new Re,$0=new Re,q0=new Re,X0=new _n,sy=new _n,KW=new Yi,vw=new Re,oy=new Re,yw=new Re,oO=new _n,bE=new _n,aO=new _n;class JW extends _r{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",j0===void 0){j0=new ir;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),s=new s5(n,5);j0.setIndex([0,1,2,0,2,3]),j0.setAttribute("position",new Yp(s,3,0,!1)),j0.setAttribute("uv",new Yp(s,2,3,!1))}this.geometry=j0,this.material=e!==void 0?e:new R6,this.center=new _n(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),$0.setFromMatrixScale(this.matrixWorld),KW.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),q0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&$0.multiplyScalar(-q0.z);const s=this.material.rotation;let a,u;s!==0&&(u=Math.cos(s),a=Math.sin(s));const d=this.center;_w(vw.set(-.5,-.5,0),q0,d,$0,a,u),_w(oy.set(.5,-.5,0),q0,d,$0,a,u),_w(yw.set(.5,.5,0),q0,d,$0,a,u),oO.set(0,0),bE.set(1,0),aO.set(1,1);let f=e.ray.intersectTriangle(vw,oy,yw,!1,ry);if(f===null&&(_w(oy.set(-.5,.5,0),q0,d,$0,a,u),bE.set(0,1),f=e.ray.intersectTriangle(vw,yw,oy,!1,ry),f===null))return;const g=e.ray.origin.distanceTo(ry);g<e.near||g>e.far||n.push({distance:g,point:ry.clone(),uv:Cl.getUV(ry,vw,oy,yw,oO,bE,aO,new _n),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function _w(r,e,n,s,a,u){X0.subVectors(r,n).addScalar(.5).multiply(s),a!==void 0?(sy.x=u*X0.x-a*X0.y,sy.y=a*X0.x+u*X0.y):sy.copy(X0),r.copy(e),r.x+=sy.x,r.y+=sy.y,r.applyMatrix4(KW)}const bw=new Re,lO=new Re;class QW extends _r{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let s=0,a=n.length;s<a;s++){const u=n[s];this.addLevel(u.object.clone(),u.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0){n=Math.abs(n);const s=this.levels;let a;for(a=0;a<s.length&&!(n<s[a].distance);a++);return s.splice(a,0,{distance:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let s,a;for(s=1,a=n.length;s<a&&!(e<n[s].distance);s++);return n[s-1].object}return null}raycast(e,n){if(this.levels.length>0){bw.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(bw);this.getObjectForDistance(a).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){bw.setFromMatrixPosition(e.matrixWorld),lO.setFromMatrixPosition(this.matrixWorld);const s=bw.distanceTo(lO)/e.zoom;n[0].object.visible=!0;let a,u;for(a=1,u=n.length;a<u&&s>=n[a].distance;a++)n[a-1].object.visible=!1,n[a].object.visible=!0;for(this._currentLevel=a-1;a<u;a++)n[a].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const s=this.levels;for(let a=0,u=s.length;a<u;a++){const d=s[a];n.object.levels.push({object:d.object.uuid,distance:d.distance})}return n}}const cO=new Re,uO=new Ar,hO=new Ar,VMe=new Re,dO=new Yi;class ez extends So{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Yi,this.bindMatrixInverse=new Yi}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ar,n=this.geometry.attributes.skinWeight;for(let s=0,a=n.count;s<a;s++){e.fromBufferAttribute(n,s);const u=1/e.manhattanLength();u!==1/0?e.multiplyScalar(u):e.set(1,0,0,0),n.setXYZW(s,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const s=this.skeleton,a=this.geometry;uO.fromBufferAttribute(a.attributes.skinIndex,e),hO.fromBufferAttribute(a.attributes.skinWeight,e),cO.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let u=0;u<4;u++){const d=hO.getComponent(u);if(d!==0){const f=uO.getComponent(u);dO.multiplyMatrices(s.bones[f].matrixWorld,s.boneInverses[f]),n.addScaledVector(VMe.copy(cO).applyMatrix4(dO),d)}}return n.applyMatrix4(this.bindMatrixInverse)}}class P6 extends _r{constructor(){super(),this.isBone=!0,this.type="Bone"}}class gg extends to{constructor(e=null,n=1,s=1,a,u,d,f,g,_=Ws,y=Ws,w,k){super(null,d,f,g,_,y,a,u,w,k),this.isDataTexture=!0,this.image={data:e,width:n,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const fO=new Yi,WMe=new Yi;class o5{constructor(e=[],n=[]){this.uuid=il(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let s=0,a=this.bones.length;s<a;s++)this.boneInverses.push(new Yi)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const s=new Yi;this.bones[e]&&s.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(s)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const s=this.bones[e];s&&s.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const s=this.bones[e];s&&(s.parent&&s.parent.isBone?(s.matrix.copy(s.parent.matrixWorld).invert(),s.matrix.multiply(s.matrixWorld)):s.matrix.copy(s.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale))}}update(){const e=this.bones,n=this.boneInverses,s=this.boneMatrices,a=this.boneTexture;for(let u=0,d=e.length;u<d;u++){const f=e[u]?e[u].matrixWorld:WMe;fO.multiplyMatrices(f,n[u]),fO.toArray(s,u*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new o5(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=OW(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const s=new gg(n,e,e,Qa,_h);return s.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=s,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,s=this.bones.length;n<s;n++){const a=this.bones[n];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let s=0,a=e.bones.length;s<a;s++){const u=e.bones[s];let d=n[u];d===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",u),d=new P6),this.bones.push(d),this.boneInverses.push(new Yi().fromArray(e.boneInverses[s]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,s=this.boneInverses;for(let a=0,u=n.length;a<u;a++){const d=n[a];e.bones.push(d.uuid);const f=s[a];e.boneInverses.push(f.toArray())}return e}}class Eg extends Wr{constructor(e,n,s,a=1){super(e,n,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const pO=new Yi,mO=new Yi,xw=[],zMe=new Yi,ay=new So;class tz extends So{constructor(e,n,s){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Eg(new Float32Array(s*16),16),this.instanceColor=null,this.count=s,this.frustumCulled=!1;for(let a=0;a<s;a++)this.setMatrixAt(a,zMe)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const s=this.matrixWorld,a=this.count;if(ay.geometry=this.geometry,ay.material=this.material,ay.material!==void 0)for(let u=0;u<a;u++){this.getMatrixAt(u,pO),mO.multiplyMatrices(s,pO),ay.matrixWorld=mO,ay.raycast(e,xw);for(let d=0,f=xw.length;d<f;d++){const g=xw[d];g.instanceId=u,g.object=this,n.push(g)}xw.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Eg(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class la extends Ho{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const gO=new Re,vO=new Re,yO=new Yi,xE=new __,ww=new em;class Kd extends _r{constructor(e=new ir,n=new la){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,s=[0];for(let a=1,u=n.count;a<u;a++)gO.fromBufferAttribute(n,a-1),vO.fromBufferAttribute(n,a),s[a]=s[a-1],s[a]+=gO.distanceTo(vO);e.setAttribute("lineDistance",new ri(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const s=this.geometry,a=this.matrixWorld,u=e.params.Line.threshold,d=s.drawRange;if(s.boundingSphere===null&&s.computeBoundingSphere(),ww.copy(s.boundingSphere),ww.applyMatrix4(a),ww.radius+=u,e.ray.intersectsSphere(ww)===!1)return;yO.copy(a).invert(),xE.copy(e.ray).applyMatrix4(yO);const f=u/((this.scale.x+this.scale.y+this.scale.z)/3),g=f*f,_=new Re,y=new Re,w=new Re,k=new Re,S=this.isLineSegments?2:1,A=s.index,R=s.attributes.position;if(A!==null){const O=Math.max(0,d.start),B=Math.min(A.count,d.start+d.count);for(let N=O,V=B-1;N<V;N+=S){const U=A.getX(N),Y=A.getX(N+1);if(_.fromBufferAttribute(R,U),y.fromBufferAttribute(R,Y),xE.distanceSqToSegment(_,y,k,w)>g)continue;k.applyMatrix4(this.matrixWorld);const $=e.ray.origin.distanceTo(k);$<e.near||$>e.far||n.push({distance:$,point:w.clone().applyMatrix4(this.matrixWorld),index:N,face:null,faceIndex:null,object:this})}}else{const O=Math.max(0,d.start),B=Math.min(R.count,d.start+d.count);for(let N=O,V=B-1;N<V;N+=S){if(_.fromBufferAttribute(R,N),y.fromBufferAttribute(R,N+1),xE.distanceSqToSegment(_,y,k,w)>g)continue;k.applyMatrix4(this.matrixWorld);const Y=e.ray.origin.distanceTo(k);Y<e.near||Y>e.far||n.push({distance:Y,point:w.clone().applyMatrix4(this.matrixWorld),index:N,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,s=Object.keys(n);if(s.length>0){const a=n[s[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,d=a.length;u<d;u++){const f=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=u}}}}}const _O=new Re,bO=new Re;class mu extends Kd{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,s=[];for(let a=0,u=n.count;a<u;a+=2)_O.fromBufferAttribute(n,a),bO.fromBufferAttribute(n,a+1),s[a]=a===0?0:s[a-1],s[a+1]=s[a]+_O.distanceTo(bO);e.setAttribute("lineDistance",new ri(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class nz extends Kd{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class I6 extends Ho{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new qn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const xO=new Yi,nM=new __,kw=new em,Cw=new Re;class iz extends _r{constructor(e=new ir,n=new I6){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const s=this.geometry,a=this.matrixWorld,u=e.params.Points.threshold,d=s.drawRange;if(s.boundingSphere===null&&s.computeBoundingSphere(),kw.copy(s.boundingSphere),kw.applyMatrix4(a),kw.radius+=u,e.ray.intersectsSphere(kw)===!1)return;xO.copy(a).invert(),nM.copy(e.ray).applyMatrix4(xO);const f=u/((this.scale.x+this.scale.y+this.scale.z)/3),g=f*f,_=s.index,w=s.attributes.position;if(_!==null){const k=Math.max(0,d.start),S=Math.min(_.count,d.start+d.count);for(let A=k,P=S;A<P;A++){const R=_.getX(A);Cw.fromBufferAttribute(w,R),wO(Cw,R,g,a,e,n,this)}}else{const k=Math.max(0,d.start),S=Math.min(w.count,d.start+d.count);for(let A=k,P=S;A<P;A++)Cw.fromBufferAttribute(w,A),wO(Cw,A,g,a,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,s=Object.keys(n);if(s.length>0){const a=n[s[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,d=a.length;u<d;u++){const f=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=u}}}}}function wO(r,e,n,s,a,u,d){const f=nM.distanceSqToPoint(r);if(f<n){const g=new Re;nM.closestPointToPoint(r,g),g.applyMatrix4(s);const _=a.ray.origin.distanceTo(g);if(_<a.near||_>a.far)return;u.push({distance:_,distanceToRay:Math.sqrt(f),point:g,index:e,face:null,object:d})}}class UMe extends to{constructor(e,n,s,a,u,d,f,g,_){super(e,n,s,a,u,d,f,g,_),this.isVideoTexture=!0,this.minFilter=d!==void 0?d:Es,this.magFilter=u!==void 0?u:Es,this.generateMipmaps=!1;const y=this;function w(){y.needsUpdate=!0,e.requestVideoFrameCallback(w)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(w)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class GMe extends to{constructor(e,n,s){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=s,this.magFilter=Ws,this.minFilter=Ws,this.generateMipmaps=!1,this.needsUpdate=!0}}class D6 extends to{constructor(e,n,s,a,u,d,f,g,_,y,w,k){super(null,d,f,g,_,y,a,u,w,k),this.isCompressedTexture=!0,this.image={width:n,height:s},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class HMe extends D6{constructor(e,n,s,a,u,d){super(e,n,s,u,d),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=Uo}}class YMe extends to{constructor(e,n,s,a,u,d,f,g,_){super(e,n,s,a,u,d,f,g,_),this.isCanvasTexture=!0,this.needsUpdate=!0}}class xc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const s=this.getUtoTmapping(e);return this.getPoint(s,n)}getPoints(e=5){const n=[];for(let s=0;s<=e;s++)n.push(this.getPoint(s/e));return n}getSpacedPoints(e=5){const n=[];for(let s=0;s<=e;s++)n.push(this.getPointAt(s/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let s,a=this.getPoint(0),u=0;n.push(0);for(let d=1;d<=e;d++)s=this.getPoint(d/e),u+=s.distanceTo(a),n.push(u),a=s;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const s=this.getLengths();let a=0;const u=s.length;let d;n?d=n:d=e*s[u-1];let f=0,g=u-1,_;for(;f<=g;)if(a=Math.floor(f+(g-f)/2),_=s[a]-d,_<0)f=a+1;else if(_>0)g=a-1;else{g=a;break}if(a=g,s[a]===d)return a/(u-1);const y=s[a],k=s[a+1]-y,S=(d-y)/k;return(a+S)/(u-1)}getTangent(e,n){let a=e-1e-4,u=e+1e-4;a<0&&(a=0),u>1&&(u=1);const d=this.getPoint(a),f=this.getPoint(u),g=n||(d.isVector2?new _n:new Re);return g.copy(f).sub(d).normalize(),g}getTangentAt(e,n){const s=this.getUtoTmapping(e);return this.getTangent(s,n)}computeFrenetFrames(e,n){const s=new Re,a=[],u=[],d=[],f=new Re,g=new Yi;for(let S=0;S<=e;S++){const A=S/e;a[S]=this.getTangentAt(A,new Re)}u[0]=new Re,d[0]=new Re;let _=Number.MAX_VALUE;const y=Math.abs(a[0].x),w=Math.abs(a[0].y),k=Math.abs(a[0].z);y<=_&&(_=y,s.set(1,0,0)),w<=_&&(_=w,s.set(0,1,0)),k<=_&&s.set(0,0,1),f.crossVectors(a[0],s).normalize(),u[0].crossVectors(a[0],f),d[0].crossVectors(a[0],u[0]);for(let S=1;S<=e;S++){if(u[S]=u[S-1].clone(),d[S]=d[S-1].clone(),f.crossVectors(a[S-1],a[S]),f.length()>Number.EPSILON){f.normalize();const A=Math.acos(Ts(a[S-1].dot(a[S]),-1,1));u[S].applyMatrix4(g.makeRotationAxis(f,A))}d[S].crossVectors(a[S],u[S])}if(n===!0){let S=Math.acos(Ts(u[0].dot(u[e]),-1,1));S/=e,a[0].dot(f.crossVectors(u[0],u[e]))>0&&(S=-S);for(let A=1;A<=e;A++)u[A].applyMatrix4(g.makeRotationAxis(a[A],S*A)),d[A].crossVectors(a[A],u[A])}return{tangents:a,normals:u,binormals:d}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class a5 extends xc{constructor(e=0,n=0,s=1,a=1,u=0,d=Math.PI*2,f=!1,g=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=s,this.yRadius=a,this.aStartAngle=u,this.aEndAngle=d,this.aClockwise=f,this.aRotation=g}getPoint(e,n){const s=n||new _n,a=Math.PI*2;let u=this.aEndAngle-this.aStartAngle;const d=Math.abs(u)<Number.EPSILON;for(;u<0;)u+=a;for(;u>a;)u-=a;u<Number.EPSILON&&(d?u=0:u=a),this.aClockwise===!0&&!d&&(u===a?u=-a:u=u-a);const f=this.aStartAngle+e*u;let g=this.aX+this.xRadius*Math.cos(f),_=this.aY+this.yRadius*Math.sin(f);if(this.aRotation!==0){const y=Math.cos(this.aRotation),w=Math.sin(this.aRotation),k=g-this.aX,S=_-this.aY;g=k*y-S*w+this.aX,_=k*w+S*y+this.aY}return s.set(g,_)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class rz extends a5{constructor(e,n,s,a,u,d){super(e,n,s,s,a,u,d),this.isArcCurve=!0,this.type="ArcCurve"}}function N6(){let r=0,e=0,n=0,s=0;function a(u,d,f,g){r=u,e=f,n=-3*u+3*d-2*f-g,s=2*u-2*d+f+g}return{initCatmullRom:function(u,d,f,g,_){a(d,f,_*(f-u),_*(g-d))},initNonuniformCatmullRom:function(u,d,f,g,_,y,w){let k=(d-u)/_-(f-u)/(_+y)+(f-d)/y,S=(f-d)/y-(g-d)/(y+w)+(g-f)/w;k*=y,S*=y,a(d,f,k,S)},calc:function(u){const d=u*u,f=d*u;return r+e*u+n*d+s*f}}}const Sw=new Re,wE=new N6,kE=new N6,CE=new N6;class sz extends xc{constructor(e=[],n=!1,s="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=s,this.tension=a}getPoint(e,n=new Re){const s=n,a=this.points,u=a.length,d=(u-(this.closed?0:1))*e;let f=Math.floor(d),g=d-f;this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/u)+1)*u:g===0&&f===u-1&&(f=u-2,g=1);let _,y;this.closed||f>0?_=a[(f-1)%u]:(Sw.subVectors(a[0],a[1]).add(a[0]),_=Sw);const w=a[f%u],k=a[(f+1)%u];if(this.closed||f+2<u?y=a[(f+2)%u]:(Sw.subVectors(a[u-1],a[u-2]).add(a[u-1]),y=Sw),this.curveType==="centripetal"||this.curveType==="chordal"){const S=this.curveType==="chordal"?.5:.25;let A=Math.pow(_.distanceToSquared(w),S),P=Math.pow(w.distanceToSquared(k),S),R=Math.pow(k.distanceToSquared(y),S);P<1e-4&&(P=1),A<1e-4&&(A=P),R<1e-4&&(R=P),wE.initNonuniformCatmullRom(_.x,w.x,k.x,y.x,A,P,R),kE.initNonuniformCatmullRom(_.y,w.y,k.y,y.y,A,P,R),CE.initNonuniformCatmullRom(_.z,w.z,k.z,y.z,A,P,R)}else this.curveType==="catmullrom"&&(wE.initCatmullRom(_.x,w.x,k.x,y.x,this.tension),kE.initCatmullRom(_.y,w.y,k.y,y.y,this.tension),CE.initCatmullRom(_.z,w.z,k.z,y.z,this.tension));return s.set(wE.calc(g),kE.calc(g),CE.calc(g)),s}copy(e){super.copy(e),this.points=[];for(let n=0,s=e.points.length;n<s;n++){const a=e.points[n];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,s=this.points.length;n<s;n++){const a=this.points[n];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,s=e.points.length;n<s;n++){const a=e.points[n];this.points.push(new Re().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function kO(r,e,n,s,a){const u=(s-e)*.5,d=(a-n)*.5,f=r*r,g=r*f;return(2*n-2*s+u+d)*g+(-3*n+3*s-2*u-d)*f+u*r+n}function jMe(r,e){const n=1-r;return n*n*e}function $Me(r,e){return 2*(1-r)*r*e}function qMe(r,e){return r*r*e}function Ty(r,e,n,s){return jMe(r,e)+$Me(r,n)+qMe(r,s)}function XMe(r,e){const n=1-r;return n*n*n*e}function ZMe(r,e){const n=1-r;return 3*n*n*r*e}function KMe(r,e){return 3*(1-r)*r*r*e}function JMe(r,e){return r*r*r*e}function My(r,e,n,s,a){return XMe(r,e)+ZMe(r,n)+KMe(r,s)+JMe(r,a)}class O6 extends xc{constructor(e=new _n,n=new _n,s=new _n,a=new _n){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=s,this.v3=a}getPoint(e,n=new _n){const s=n,a=this.v0,u=this.v1,d=this.v2,f=this.v3;return s.set(My(e,a.x,u.x,d.x,f.x),My(e,a.y,u.y,d.y,f.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class oz extends xc{constructor(e=new Re,n=new Re,s=new Re,a=new Re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=s,this.v3=a}getPoint(e,n=new Re){const s=n,a=this.v0,u=this.v1,d=this.v2,f=this.v3;return s.set(My(e,a.x,u.x,d.x,f.x),My(e,a.y,u.y,d.y,f.y),My(e,a.z,u.z,d.z,f.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class l5 extends xc{constructor(e=new _n,n=new _n){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new _n){const s=n;return e===1?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const s=n||new _n;return s.copy(this.v2).sub(this.v1).normalize(),s}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class az extends xc{constructor(e=new Re,n=new Re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new Re){const s=n;return e===1?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class F6 extends xc{constructor(e=new _n,n=new _n,s=new _n){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=s}getPoint(e,n=new _n){const s=n,a=this.v0,u=this.v1,d=this.v2;return s.set(Ty(e,a.x,u.x,d.x),Ty(e,a.y,u.y,d.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class B6 extends xc{constructor(e=new Re,n=new Re,s=new Re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=s}getPoint(e,n=new Re){const s=n,a=this.v0,u=this.v1,d=this.v2;return s.set(Ty(e,a.x,u.x,d.x),Ty(e,a.y,u.y,d.y),Ty(e,a.z,u.z,d.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class V6 extends xc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new _n){const s=n,a=this.points,u=(a.length-1)*e,d=Math.floor(u),f=u-d,g=a[d===0?d:d-1],_=a[d],y=a[d>a.length-2?a.length-1:d+1],w=a[d>a.length-3?a.length-1:d+2];return s.set(kO(f,g.x,_.x,y.x,w.x),kO(f,g.y,_.y,y.y,w.y)),s}copy(e){super.copy(e),this.points=[];for(let n=0,s=e.points.length;n<s;n++){const a=e.points[n];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,s=this.points.length;n<s;n++){const a=this.points[n];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,s=e.points.length;n<s;n++){const a=e.points[n];this.points.push(new _n().fromArray(a))}return this}}var W6=Object.freeze({__proto__:null,ArcCurve:rz,CatmullRomCurve3:sz,CubicBezierCurve:O6,CubicBezierCurve3:oz,EllipseCurve:a5,LineCurve:l5,LineCurve3:az,QuadraticBezierCurve:F6,QuadraticBezierCurve3:B6,SplineCurve:V6});class lz extends xc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new l5(n,e))}getPoint(e,n){const s=e*this.getLength(),a=this.getCurveLengths();let u=0;for(;u<a.length;){if(a[u]>=s){const d=a[u]-s,f=this.curves[u],g=f.getLength(),_=g===0?0:1-d/g;return f.getPointAt(_,n)}u++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let s=0,a=this.curves.length;s<a;s++)n+=this.curves[s].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let s=0;s<=e;s++)n.push(this.getPoint(s/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let s;for(let a=0,u=this.curves;a<u.length;a++){const d=u[a],f=d.isEllipseCurve?e*2:d.isLineCurve||d.isLineCurve3?1:d.isSplineCurve?e*d.points.length:e,g=d.getPoints(f);for(let _=0;_<g.length;_++){const y=g[_];s&&s.equals(y)||(n.push(y),s=y)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,s=e.curves.length;n<s;n++){const a=e.curves[n];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,s=this.curves.length;n<s;n++){const a=this.curves[n];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,s=e.curves.length;n<s;n++){const a=e.curves[n];this.curves.push(new W6[a.type]().fromJSON(a))}return this}}class i_ extends lz{constructor(e){super(),this.type="Path",this.currentPoint=new _n,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,s=e.length;n<s;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const s=new l5(this.currentPoint.clone(),new _n(e,n));return this.curves.push(s),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,s,a){const u=new F6(this.currentPoint.clone(),new _n(e,n),new _n(s,a));return this.curves.push(u),this.currentPoint.set(s,a),this}bezierCurveTo(e,n,s,a,u,d){const f=new O6(this.currentPoint.clone(),new _n(e,n),new _n(s,a),new _n(u,d));return this.curves.push(f),this.currentPoint.set(u,d),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),s=new V6(n);return this.curves.push(s),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,s,a,u,d){const f=this.currentPoint.x,g=this.currentPoint.y;return this.absarc(e+f,n+g,s,a,u,d),this}absarc(e,n,s,a,u,d){return this.absellipse(e,n,s,s,a,u,d),this}ellipse(e,n,s,a,u,d,f,g){const _=this.currentPoint.x,y=this.currentPoint.y;return this.absellipse(e+_,n+y,s,a,u,d,f,g),this}absellipse(e,n,s,a,u,d,f,g){const _=new a5(e,n,s,a,u,d,f,g);if(this.curves.length>0){const w=_.getPoint(0);w.equals(this.currentPoint)||this.lineTo(w.x,w.y)}this.curves.push(_);const y=_.getPoint(1);return this.currentPoint.copy(y),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ng extends ir{constructor(e=[new _n(0,-.5),new _n(.5,0),new _n(0,.5)],n=12,s=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:s,phiLength:a},n=Math.floor(n),a=Ts(a,0,Math.PI*2);const u=[],d=[],f=[],g=[],_=[],y=1/n,w=new Re,k=new _n,S=new Re,A=new Re,P=new Re;let R=0,O=0;for(let B=0;B<=e.length-1;B++)switch(B){case 0:R=e[B+1].x-e[B].x,O=e[B+1].y-e[B].y,S.x=O*1,S.y=-R,S.z=O*0,P.copy(S),S.normalize(),g.push(S.x,S.y,S.z);break;case e.length-1:g.push(P.x,P.y,P.z);break;default:R=e[B+1].x-e[B].x,O=e[B+1].y-e[B].y,S.x=O*1,S.y=-R,S.z=O*0,A.copy(S),S.x+=P.x,S.y+=P.y,S.z+=P.z,S.normalize(),g.push(S.x,S.y,S.z),P.copy(A)}for(let B=0;B<=n;B++){const N=s+B*y*a,V=Math.sin(N),U=Math.cos(N);for(let Y=0;Y<=e.length-1;Y++){w.x=e[Y].x*V,w.y=e[Y].y,w.z=e[Y].x*U,d.push(w.x,w.y,w.z),k.x=B/n,k.y=Y/(e.length-1),f.push(k.x,k.y);const X=g[3*Y+0]*V,$=g[3*Y+1],ee=g[3*Y+0]*U;_.push(X,$,ee)}}for(let B=0;B<n;B++)for(let N=0;N<e.length-1;N++){const V=N+B*e.length,U=V,Y=V+e.length,X=V+e.length+1,$=V+1;u.push(U,Y,$),u.push(X,$,Y)}this.setIndex(u),this.setAttribute("position",new ri(d,3)),this.setAttribute("uv",new ri(f,2)),this.setAttribute("normal",new ri(_,3))}static fromJSON(e){return new Ng(e.points,e.segments,e.phiStart,e.phiLength)}}class w_ extends Ng{constructor(e=1,n=1,s=4,a=8){const u=new i_;u.absarc(0,-n/2,e,Math.PI*1.5,0),u.absarc(0,n/2,e,0,Math.PI*.5),super(u.getPoints(s),a),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:s,radialSegments:a}}static fromJSON(e){return new w_(e.radius,e.length,e.capSegments,e.radialSegments)}}class k_ extends ir{constructor(e=1,n=8,s=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:s,thetaLength:a},n=Math.max(3,n);const u=[],d=[],f=[],g=[],_=new Re,y=new _n;d.push(0,0,0),f.push(0,0,1),g.push(.5,.5);for(let w=0,k=3;w<=n;w++,k+=3){const S=s+w/n*a;_.x=e*Math.cos(S),_.y=e*Math.sin(S),d.push(_.x,_.y,_.z),f.push(0,0,1),y.x=(d[k]/e+1)/2,y.y=(d[k+1]/e+1)/2,g.push(y.x,y.y)}for(let w=1;w<=n;w++)u.push(w,w+1,0);this.setIndex(u),this.setAttribute("position",new ri(d,3)),this.setAttribute("normal",new ri(f,3)),this.setAttribute("uv",new ri(g,2))}static fromJSON(e){return new k_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class tm extends ir{constructor(e=1,n=1,s=1,a=8,u=1,d=!1,f=0,g=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:s,radialSegments:a,heightSegments:u,openEnded:d,thetaStart:f,thetaLength:g};const _=this;a=Math.floor(a),u=Math.floor(u);const y=[],w=[],k=[],S=[];let A=0;const P=[],R=s/2;let O=0;B(),d===!1&&(e>0&&N(!0),n>0&&N(!1)),this.setIndex(y),this.setAttribute("position",new ri(w,3)),this.setAttribute("normal",new ri(k,3)),this.setAttribute("uv",new ri(S,2));function B(){const V=new Re,U=new Re;let Y=0;const X=(n-e)/s;for(let $=0;$<=u;$++){const ee=[],ue=$/u,Te=ue*(n-e)+e;for(let De=0;De<=a;De++){const $e=De/a,Ue=$e*g+f,it=Math.sin(Ue),tt=Math.cos(Ue);U.x=Te*it,U.y=-ue*s+R,U.z=Te*tt,w.push(U.x,U.y,U.z),V.set(it,X,tt).normalize(),k.push(V.x,V.y,V.z),S.push($e,1-ue),ee.push(A++)}P.push(ee)}for(let $=0;$<a;$++)for(let ee=0;ee<u;ee++){const ue=P[ee][$],Te=P[ee+1][$],De=P[ee+1][$+1],$e=P[ee][$+1];y.push(ue,Te,$e),y.push(Te,De,$e),Y+=6}_.addGroup(O,Y,0),O+=Y}function N(V){const U=A,Y=new _n,X=new Re;let $=0;const ee=V===!0?e:n,ue=V===!0?1:-1;for(let De=1;De<=a;De++)w.push(0,R*ue,0),k.push(0,ue,0),S.push(.5,.5),A++;const Te=A;for(let De=0;De<=a;De++){const Ue=De/a*g+f,it=Math.cos(Ue),tt=Math.sin(Ue);X.x=ee*tt,X.y=R*ue,X.z=ee*it,w.push(X.x,X.y,X.z),k.push(0,ue,0),Y.x=it*.5+.5,Y.y=tt*.5*ue+.5,S.push(Y.x,Y.y),A++}for(let De=0;De<a;De++){const $e=U+De,Ue=Te+De;V===!0?y.push(Ue,Ue+1,$e):y.push(Ue+1,Ue,$e),$+=3}_.addGroup(O,$,V===!0?1:2),O+=$}}static fromJSON(e){return new tm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class C_ extends tm{constructor(e=1,n=1,s=8,a=1,u=!1,d=0,f=Math.PI*2){super(0,e,n,s,a,u,d,f),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:s,heightSegments:a,openEnded:u,thetaStart:d,thetaLength:f}}static fromJSON(e){return new C_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ph extends ir{constructor(e=[],n=[],s=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:s,detail:a};const u=[],d=[];f(a),_(s),y(),this.setAttribute("position",new ri(u,3)),this.setAttribute("normal",new ri(u.slice(),3)),this.setAttribute("uv",new ri(d,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function f(B){const N=new Re,V=new Re,U=new Re;for(let Y=0;Y<n.length;Y+=3)S(n[Y+0],N),S(n[Y+1],V),S(n[Y+2],U),g(N,V,U,B)}function g(B,N,V,U){const Y=U+1,X=[];for(let $=0;$<=Y;$++){X[$]=[];const ee=B.clone().lerp(V,$/Y),ue=N.clone().lerp(V,$/Y),Te=Y-$;for(let De=0;De<=Te;De++)De===0&&$===Y?X[$][De]=ee:X[$][De]=ee.clone().lerp(ue,De/Te)}for(let $=0;$<Y;$++)for(let ee=0;ee<2*(Y-$)-1;ee++){const ue=Math.floor(ee/2);ee%2===0?(k(X[$][ue+1]),k(X[$+1][ue]),k(X[$][ue])):(k(X[$][ue+1]),k(X[$+1][ue+1]),k(X[$+1][ue]))}}function _(B){const N=new Re;for(let V=0;V<u.length;V+=3)N.x=u[V+0],N.y=u[V+1],N.z=u[V+2],N.normalize().multiplyScalar(B),u[V+0]=N.x,u[V+1]=N.y,u[V+2]=N.z}function y(){const B=new Re;for(let N=0;N<u.length;N+=3){B.x=u[N+0],B.y=u[N+1],B.z=u[N+2];const V=R(B)/2/Math.PI+.5,U=O(B)/Math.PI+.5;d.push(V,1-U)}A(),w()}function w(){for(let B=0;B<d.length;B+=6){const N=d[B+0],V=d[B+2],U=d[B+4],Y=Math.max(N,V,U),X=Math.min(N,V,U);Y>.9&&X<.1&&(N<.2&&(d[B+0]+=1),V<.2&&(d[B+2]+=1),U<.2&&(d[B+4]+=1))}}function k(B){u.push(B.x,B.y,B.z)}function S(B,N){const V=B*3;N.x=e[V+0],N.y=e[V+1],N.z=e[V+2]}function A(){const B=new Re,N=new Re,V=new Re,U=new Re,Y=new _n,X=new _n,$=new _n;for(let ee=0,ue=0;ee<u.length;ee+=9,ue+=6){B.set(u[ee+0],u[ee+1],u[ee+2]),N.set(u[ee+3],u[ee+4],u[ee+5]),V.set(u[ee+6],u[ee+7],u[ee+8]),Y.set(d[ue+0],d[ue+1]),X.set(d[ue+2],d[ue+3]),$.set(d[ue+4],d[ue+5]),U.copy(B).add(N).add(V).divideScalar(3);const Te=R(U);P(Y,ue+0,B,Te),P(X,ue+2,N,Te),P($,ue+4,V,Te)}}function P(B,N,V,U){U<0&&B.x===1&&(d[N]=B.x-1),V.x===0&&V.z===0&&(d[N]=U/2/Math.PI+.5)}function R(B){return Math.atan2(B.z,-B.x)}function O(B){return Math.atan2(-B.y,Math.sqrt(B.x*B.x+B.z*B.z))}}static fromJSON(e){return new Ph(e.vertices,e.indices,e.radius,e.details)}}class S_ extends Ph{constructor(e=1,n=0){const s=(1+Math.sqrt(5))/2,a=1/s,u=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-s,0,-a,s,0,a,-s,0,a,s,-a,-s,0,-a,s,0,a,-s,0,a,s,0,-s,0,-a,s,0,-a,-s,0,a,s,0,a],d=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(u,d,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new S_(e.radius,e.detail)}}const Ew=new Re,Tw=new Re,SE=new Re,Mw=new Cl;class cz extends ir{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const a=Math.pow(10,4),u=Math.cos(Vp*n),d=e.getIndex(),f=e.getAttribute("position"),g=d?d.count:f.count,_=[0,0,0],y=["a","b","c"],w=new Array(3),k={},S=[];for(let A=0;A<g;A+=3){d?(_[0]=d.getX(A),_[1]=d.getX(A+1),_[2]=d.getX(A+2)):(_[0]=A,_[1]=A+1,_[2]=A+2);const{a:P,b:R,c:O}=Mw;if(P.fromBufferAttribute(f,_[0]),R.fromBufferAttribute(f,_[1]),O.fromBufferAttribute(f,_[2]),Mw.getNormal(SE),w[0]=`${Math.round(P.x*a)},${Math.round(P.y*a)},${Math.round(P.z*a)}`,w[1]=`${Math.round(R.x*a)},${Math.round(R.y*a)},${Math.round(R.z*a)}`,w[2]=`${Math.round(O.x*a)},${Math.round(O.y*a)},${Math.round(O.z*a)}`,!(w[0]===w[1]||w[1]===w[2]||w[2]===w[0]))for(let B=0;B<3;B++){const N=(B+1)%3,V=w[B],U=w[N],Y=Mw[y[B]],X=Mw[y[N]],$=`${V}_${U}`,ee=`${U}_${V}`;ee in k&&k[ee]?(SE.dot(k[ee].normal)<=u&&(S.push(Y.x,Y.y,Y.z),S.push(X.x,X.y,X.z)),k[ee]=null):$ in k||(k[$]={index0:_[B],index1:_[N],normal:SE.clone()})}}for(const A in k)if(k[A]){const{index0:P,index1:R}=k[A];Ew.fromBufferAttribute(f,P),Tw.fromBufferAttribute(f,R),S.push(Ew.x,Ew.y,Ew.z),S.push(Tw.x,Tw.y,Tw.z)}this.setAttribute("position",new ri(S,3))}}}class zp extends i_{constructor(e){super(e),this.uuid=il(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let s=0,a=this.holes.length;s<a;s++)n[s]=this.holes[s].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,s=e.holes.length;n<s;n++){const a=e.holes[n];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,s=this.holes.length;n<s;n++){const a=this.holes[n];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,s=e.holes.length;n<s;n++){const a=e.holes[n];this.holes.push(new i_().fromJSON(a))}return this}}const QMe={triangulate:function(r,e,n=2){const s=e&&e.length,a=s?e[0]*n:r.length;let u=uz(r,0,a,n,!0);const d=[];if(!u||u.next===u.prev)return d;let f,g,_,y,w,k,S;if(s&&(u=r6e(r,e,u,n)),r.length>80*n){f=_=r[0],g=y=r[1];for(let A=n;A<a;A+=n)w=r[A],k=r[A+1],w<f&&(f=w),k<g&&(g=k),w>_&&(_=w),k>y&&(y=k);S=Math.max(_-f,y-g),S=S!==0?32767/S:0}return r_(u,d,n,f,g,S,0),d}};function uz(r,e,n,s,a){let u,d;if(a===m6e(r,e,n,s)>0)for(u=e;u<n;u+=s)d=CO(u,r[u],r[u+1],d);else for(u=n-s;u>=e;u-=s)d=CO(u,r[u],r[u+1],d);return d&&c5(d,d.next)&&(o_(d),d=d.next),d}function jp(r,e){if(!r)return r;e||(e=r);let n=r,s;do if(s=!1,!n.steiner&&(c5(n,n.next)||hs(n.prev,n,n.next)===0)){if(o_(n),n=e=n.prev,n===n.next)break;s=!0}else n=n.next;while(s||n!==e);return e}function r_(r,e,n,s,a,u,d){if(!r)return;!d&&u&&c6e(r,s,a,u);let f=r,g,_;for(;r.prev!==r.next;){if(g=r.prev,_=r.next,u?t6e(r,s,a,u):e6e(r)){e.push(g.i/n|0),e.push(r.i/n|0),e.push(_.i/n|0),o_(r),r=_.next,f=_.next;continue}if(r=_,r===f){d?d===1?(r=n6e(jp(r),e,n),r_(r,e,n,s,a,u,2)):d===2&&i6e(r,e,n,s,a,u):r_(jp(r),e,n,s,a,u,1);break}}}function e6e(r){const e=r.prev,n=r,s=r.next;if(hs(e,n,s)>=0)return!1;const a=e.x,u=n.x,d=s.x,f=e.y,g=n.y,_=s.y,y=a<u?a<d?a:d:u<d?u:d,w=f<g?f<_?f:_:g<_?g:_,k=a>u?a>d?a:d:u>d?u:d,S=f>g?f>_?f:_:g>_?g:_;let A=s.next;for(;A!==e;){if(A.x>=y&&A.x<=k&&A.y>=w&&A.y<=S&&sg(a,f,u,g,d,_,A.x,A.y)&&hs(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function t6e(r,e,n,s){const a=r.prev,u=r,d=r.next;if(hs(a,u,d)>=0)return!1;const f=a.x,g=u.x,_=d.x,y=a.y,w=u.y,k=d.y,S=f<g?f<_?f:_:g<_?g:_,A=y<w?y<k?y:k:w<k?w:k,P=f>g?f>_?f:_:g>_?g:_,R=y>w?y>k?y:k:w>k?w:k,O=iM(S,A,e,n,s),B=iM(P,R,e,n,s);let N=r.prevZ,V=r.nextZ;for(;N&&N.z>=O&&V&&V.z<=B;){if(N.x>=S&&N.x<=P&&N.y>=A&&N.y<=R&&N!==a&&N!==d&&sg(f,y,g,w,_,k,N.x,N.y)&&hs(N.prev,N,N.next)>=0||(N=N.prevZ,V.x>=S&&V.x<=P&&V.y>=A&&V.y<=R&&V!==a&&V!==d&&sg(f,y,g,w,_,k,V.x,V.y)&&hs(V.prev,V,V.next)>=0))return!1;V=V.nextZ}for(;N&&N.z>=O;){if(N.x>=S&&N.x<=P&&N.y>=A&&N.y<=R&&N!==a&&N!==d&&sg(f,y,g,w,_,k,N.x,N.y)&&hs(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;V&&V.z<=B;){if(V.x>=S&&V.x<=P&&V.y>=A&&V.y<=R&&V!==a&&V!==d&&sg(f,y,g,w,_,k,V.x,V.y)&&hs(V.prev,V,V.next)>=0)return!1;V=V.nextZ}return!0}function n6e(r,e,n){let s=r;do{const a=s.prev,u=s.next.next;!c5(a,u)&&hz(a,s,s.next,u)&&s_(a,u)&&s_(u,a)&&(e.push(a.i/n|0),e.push(s.i/n|0),e.push(u.i/n|0),o_(s),o_(s.next),s=r=u),s=s.next}while(s!==r);return jp(s)}function i6e(r,e,n,s,a,u){let d=r;do{let f=d.next.next;for(;f!==d.prev;){if(d.i!==f.i&&d6e(d,f)){let g=dz(d,f);d=jp(d,d.next),g=jp(g,g.next),r_(d,e,n,s,a,u,0),r_(g,e,n,s,a,u,0);return}f=f.next}d=d.next}while(d!==r)}function r6e(r,e,n,s){const a=[];let u,d,f,g,_;for(u=0,d=e.length;u<d;u++)f=e[u]*s,g=u<d-1?e[u+1]*s:r.length,_=uz(r,f,g,s,!1),_===_.next&&(_.steiner=!0),a.push(h6e(_));for(a.sort(s6e),u=0;u<a.length;u++)n=o6e(a[u],n);return n}function s6e(r,e){return r.x-e.x}function o6e(r,e){const n=a6e(r,e);if(!n)return e;const s=dz(n,r);return jp(s,s.next),jp(n,n.next)}function a6e(r,e){let n=e,s=-1/0,a;const u=r.x,d=r.y;do{if(d<=n.y&&d>=n.next.y&&n.next.y!==n.y){const k=n.x+(d-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(k<=u&&k>s&&(s=k,a=n.x<n.next.x?n:n.next,k===u))return a}n=n.next}while(n!==e);if(!a)return null;const f=a,g=a.x,_=a.y;let y=1/0,w;n=a;do u>=n.x&&n.x>=g&&u!==n.x&&sg(d<_?u:s,d,g,_,d<_?s:u,d,n.x,n.y)&&(w=Math.abs(d-n.y)/(u-n.x),s_(n,r)&&(w<y||w===y&&(n.x>a.x||n.x===a.x&&l6e(a,n)))&&(a=n,y=w)),n=n.next;while(n!==f);return a}function l6e(r,e){return hs(r.prev,r,e.prev)<0&&hs(e.next,r,r.next)<0}function c6e(r,e,n,s){let a=r;do a.z===0&&(a.z=iM(a.x,a.y,e,n,s)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==r);a.prevZ.nextZ=null,a.prevZ=null,u6e(a)}function u6e(r){let e,n,s,a,u,d,f,g,_=1;do{for(n=r,r=null,u=null,d=0;n;){for(d++,s=n,f=0,e=0;e<_&&(f++,s=s.nextZ,!!s);e++);for(g=_;f>0||g>0&&s;)f!==0&&(g===0||!s||n.z<=s.z)?(a=n,n=n.nextZ,f--):(a=s,s=s.nextZ,g--),u?u.nextZ=a:r=a,a.prevZ=u,u=a;n=s}u.nextZ=null,_*=2}while(d>1);return r}function iM(r,e,n,s,a){return r=(r-n)*a|0,e=(e-s)*a|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function h6e(r){let e=r,n=r;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==r);return n}function sg(r,e,n,s,a,u,d,f){return(a-d)*(e-f)>=(r-d)*(u-f)&&(r-d)*(s-f)>=(n-d)*(e-f)&&(n-d)*(u-f)>=(a-d)*(s-f)}function d6e(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!f6e(r,e)&&(s_(r,e)&&s_(e,r)&&p6e(r,e)&&(hs(r.prev,r,e.prev)||hs(r,e.prev,e))||c5(r,e)&&hs(r.prev,r,r.next)>0&&hs(e.prev,e,e.next)>0)}function hs(r,e,n){return(e.y-r.y)*(n.x-e.x)-(e.x-r.x)*(n.y-e.y)}function c5(r,e){return r.x===e.x&&r.y===e.y}function hz(r,e,n,s){const a=Lw(hs(r,e,n)),u=Lw(hs(r,e,s)),d=Lw(hs(n,s,r)),f=Lw(hs(n,s,e));return!!(a!==u&&d!==f||a===0&&Aw(r,n,e)||u===0&&Aw(r,s,e)||d===0&&Aw(n,r,s)||f===0&&Aw(n,e,s))}function Aw(r,e,n){return e.x<=Math.max(r.x,n.x)&&e.x>=Math.min(r.x,n.x)&&e.y<=Math.max(r.y,n.y)&&e.y>=Math.min(r.y,n.y)}function Lw(r){return r>0?1:r<0?-1:0}function f6e(r,e){let n=r;do{if(n.i!==r.i&&n.next.i!==r.i&&n.i!==e.i&&n.next.i!==e.i&&hz(n,n.next,r,e))return!0;n=n.next}while(n!==r);return!1}function s_(r,e){return hs(r.prev,r,r.next)<0?hs(r,e,r.next)>=0&&hs(r,r.prev,e)>=0:hs(r,e,r.prev)<0||hs(r,r.next,e)<0}function p6e(r,e){let n=r,s=!1;const a=(r.x+e.x)/2,u=(r.y+e.y)/2;do n.y>u!=n.next.y>u&&n.next.y!==n.y&&a<(n.next.x-n.x)*(u-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==r);return s}function dz(r,e){const n=new rM(r.i,r.x,r.y),s=new rM(e.i,e.x,e.y),a=r.next,u=e.prev;return r.next=e,e.prev=r,n.next=a,a.prev=n,s.next=n,n.prev=s,u.next=s,s.prev=u,s}function CO(r,e,n,s){const a=new rM(r,e,n);return s?(a.next=s.next,a.prev=s,s.next.prev=a,s.next=a):(a.prev=a,a.next=a),a}function o_(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function rM(r,e,n){this.i=r,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function m6e(r,e,n,s){let a=0;for(let u=e,d=n-s;u<n;u+=s)a+=(r[d]-r[u])*(r[u+1]+r[d+1]),d=u;return a}class cu{static area(e){const n=e.length;let s=0;for(let a=n-1,u=0;u<n;a=u++)s+=e[a].x*e[u].y-e[u].x*e[a].y;return s*.5}static isClockWise(e){return cu.area(e)<0}static triangulateShape(e,n){const s=[],a=[],u=[];SO(e),EO(s,e);let d=e.length;n.forEach(SO);for(let g=0;g<n.length;g++)a.push(d),d+=n[g].length,EO(s,n[g]);const f=QMe.triangulate(s,a);for(let g=0;g<f.length;g+=3)u.push(f.slice(g,g+3));return u}}function SO(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function EO(r,e){for(let n=0;n<e.length;n++)r.push(e[n].x),r.push(e[n].y)}class E_ extends ir{constructor(e=new zp([new _n(.5,.5),new _n(-.5,.5),new _n(-.5,-.5),new _n(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const s=this,a=[],u=[];for(let f=0,g=e.length;f<g;f++){const _=e[f];d(_)}this.setAttribute("position",new ri(a,3)),this.setAttribute("uv",new ri(u,2)),this.computeVertexNormals();function d(f){const g=[],_=n.curveSegments!==void 0?n.curveSegments:12,y=n.steps!==void 0?n.steps:1,w=n.depth!==void 0?n.depth:1;let k=n.bevelEnabled!==void 0?n.bevelEnabled:!0,S=n.bevelThickness!==void 0?n.bevelThickness:.2,A=n.bevelSize!==void 0?n.bevelSize:S-.1,P=n.bevelOffset!==void 0?n.bevelOffset:0,R=n.bevelSegments!==void 0?n.bevelSegments:3;const O=n.extrudePath,B=n.UVGenerator!==void 0?n.UVGenerator:g6e;let N,V=!1,U,Y,X,$;O&&(N=O.getSpacedPoints(y),V=!0,k=!1,U=O.computeFrenetFrames(y,!1),Y=new Re,X=new Re,$=new Re),k||(R=0,S=0,A=0,P=0);const ee=f.extractPoints(_);let ue=ee.shape;const Te=ee.holes;if(!cu.isClockWise(ue)){ue=ue.reverse();for(let oe=0,ye=Te.length;oe<ye;oe++){const We=Te[oe];cu.isClockWise(We)&&(Te[oe]=We.reverse())}}const $e=cu.triangulateShape(ue,Te),Ue=ue;for(let oe=0,ye=Te.length;oe<ye;oe++){const We=Te[oe];ue=ue.concat(We)}function it(oe,ye,We){return ye||console.error("THREE.ExtrudeGeometry: vec does not exist"),ye.clone().multiplyScalar(We).add(oe)}const tt=ue.length,St=$e.length;function ve(oe,ye,We){let at,st,It;const At=oe.x-ye.x,Tt=oe.y-ye.y,Ut=We.x-oe.x,Wt=We.y-oe.y,we=At*At+Tt*Tt,fe=At*Wt-Tt*Ut;if(Math.abs(fe)>Number.EPSILON){const lt=Math.sqrt(we),Nt=Math.sqrt(Ut*Ut+Wt*Wt),Gt=ye.x-Tt/lt,fn=ye.y+At/lt,wn=We.x-Wt/Nt,vn=We.y+Ut/Nt,Xe=((wn-Gt)*Wt-(vn-fn)*Ut)/(At*Wt-Tt*Ut);at=Gt+At*Xe-oe.x,st=fn+Tt*Xe-oe.y;const nn=at*at+st*st;if(nn<=2)return new _n(at,st);It=Math.sqrt(nn/2)}else{let lt=!1;At>Number.EPSILON?Ut>Number.EPSILON&&(lt=!0):At<-Number.EPSILON?Ut<-Number.EPSILON&&(lt=!0):Math.sign(Tt)===Math.sign(Wt)&&(lt=!0),lt?(at=-Tt,st=At,It=Math.sqrt(we)):(at=At,st=Tt,It=Math.sqrt(we/2))}return new _n(at/It,st/It)}const ne=[];for(let oe=0,ye=Ue.length,We=ye-1,at=oe+1;oe<ye;oe++,We++,at++)We===ye&&(We=0),at===ye&&(at=0),ne[oe]=ve(Ue[oe],Ue[We],Ue[at]);const me=[];let qe,Se=ne.concat();for(let oe=0,ye=Te.length;oe<ye;oe++){const We=Te[oe];qe=[];for(let at=0,st=We.length,It=st-1,At=at+1;at<st;at++,It++,At++)It===st&&(It=0),At===st&&(At=0),qe[at]=ve(We[at],We[It],We[At]);me.push(qe),Se=Se.concat(qe)}for(let oe=0;oe<R;oe++){const ye=oe/R,We=S*Math.cos(ye*Math.PI/2),at=A*Math.sin(ye*Math.PI/2)+P;for(let st=0,It=Ue.length;st<It;st++){const At=it(Ue[st],ne[st],at);pt(At.x,At.y,-We)}for(let st=0,It=Te.length;st<It;st++){const At=Te[st];qe=me[st];for(let Tt=0,Ut=At.length;Tt<Ut;Tt++){const Wt=it(At[Tt],qe[Tt],at);pt(Wt.x,Wt.y,-We)}}}const gt=A+P;for(let oe=0;oe<tt;oe++){const ye=k?it(ue[oe],Se[oe],gt):ue[oe];V?(X.copy(U.normals[0]).multiplyScalar(ye.x),Y.copy(U.binormals[0]).multiplyScalar(ye.y),$.copy(N[0]).add(X).add(Y),pt($.x,$.y,$.z)):pt(ye.x,ye.y,0)}for(let oe=1;oe<=y;oe++)for(let ye=0;ye<tt;ye++){const We=k?it(ue[ye],Se[ye],gt):ue[ye];V?(X.copy(U.normals[oe]).multiplyScalar(We.x),Y.copy(U.binormals[oe]).multiplyScalar(We.y),$.copy(N[oe]).add(X).add(Y),pt($.x,$.y,$.z)):pt(We.x,We.y,w/y*oe)}for(let oe=R-1;oe>=0;oe--){const ye=oe/R,We=S*Math.cos(ye*Math.PI/2),at=A*Math.sin(ye*Math.PI/2)+P;for(let st=0,It=Ue.length;st<It;st++){const At=it(Ue[st],ne[st],at);pt(At.x,At.y,w+We)}for(let st=0,It=Te.length;st<It;st++){const At=Te[st];qe=me[st];for(let Tt=0,Ut=At.length;Tt<Ut;Tt++){const Wt=it(At[Tt],qe[Tt],at);V?pt(Wt.x,Wt.y+N[y-1].y,N[y-1].x+We):pt(Wt.x,Wt.y,w+We)}}}Xt(),He();function Xt(){const oe=a.length/3;if(k){let ye=0,We=tt*ye;for(let at=0;at<St;at++){const st=$e[at];Rt(st[2]+We,st[1]+We,st[0]+We)}ye=y+R*2,We=tt*ye;for(let at=0;at<St;at++){const st=$e[at];Rt(st[0]+We,st[1]+We,st[2]+We)}}else{for(let ye=0;ye<St;ye++){const We=$e[ye];Rt(We[2],We[1],We[0])}for(let ye=0;ye<St;ye++){const We=$e[ye];Rt(We[0]+tt*y,We[1]+tt*y,We[2]+tt*y)}}s.addGroup(oe,a.length/3-oe,0)}function He(){const oe=a.length/3;let ye=0;Fe(Ue,ye),ye+=Ue.length;for(let We=0,at=Te.length;We<at;We++){const st=Te[We];Fe(st,ye),ye+=st.length}s.addGroup(oe,a.length/3-oe,1)}function Fe(oe,ye){let We=oe.length;for(;--We>=0;){const at=We;let st=We-1;st<0&&(st=oe.length-1);for(let It=0,At=y+R*2;It<At;It++){const Tt=tt*It,Ut=tt*(It+1),Wt=ye+at+Tt,we=ye+st+Tt,fe=ye+st+Ut,lt=ye+at+Ut;Vt(Wt,we,fe,lt)}}}function pt(oe,ye,We){g.push(oe),g.push(ye),g.push(We)}function Rt(oe,ye,We){Ke(oe),Ke(ye),Ke(We);const at=a.length/3,st=B.generateTopUV(s,a,at-3,at-2,at-1);Ot(st[0]),Ot(st[1]),Ot(st[2])}function Vt(oe,ye,We,at){Ke(oe),Ke(ye),Ke(at),Ke(ye),Ke(We),Ke(at);const st=a.length/3,It=B.generateSideWallUV(s,a,st-6,st-3,st-2,st-1);Ot(It[0]),Ot(It[1]),Ot(It[3]),Ot(It[1]),Ot(It[2]),Ot(It[3])}function Ke(oe){a.push(g[oe*3+0]),a.push(g[oe*3+1]),a.push(g[oe*3+2])}function Ot(oe){u.push(oe.x),u.push(oe.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,s=this.parameters.options;return v6e(n,s,e)}static fromJSON(e,n){const s=[];for(let u=0,d=e.shapes.length;u<d;u++){const f=n[e.shapes[u]];s.push(f)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new W6[a.type]().fromJSON(a)),new E_(s,e.options)}}const g6e={generateTopUV:function(r,e,n,s,a){const u=e[n*3],d=e[n*3+1],f=e[s*3],g=e[s*3+1],_=e[a*3],y=e[a*3+1];return[new _n(u,d),new _n(f,g),new _n(_,y)]},generateSideWallUV:function(r,e,n,s,a,u){const d=e[n*3],f=e[n*3+1],g=e[n*3+2],_=e[s*3],y=e[s*3+1],w=e[s*3+2],k=e[a*3],S=e[a*3+1],A=e[a*3+2],P=e[u*3],R=e[u*3+1],O=e[u*3+2];return Math.abs(f-y)<Math.abs(d-_)?[new _n(d,1-g),new _n(_,1-w),new _n(k,1-A),new _n(P,1-O)]:[new _n(f,1-g),new _n(y,1-w),new _n(S,1-A),new _n(R,1-O)]}};function v6e(r,e,n){if(n.shapes=[],Array.isArray(r))for(let s=0,a=r.length;s<a;s++){const u=r[s];n.shapes.push(u.uuid)}else n.shapes.push(r.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class T_ extends Ph{constructor(e=1,n=0){const s=(1+Math.sqrt(5))/2,a=[-1,s,0,1,s,0,-1,-s,0,1,-s,0,0,-1,s,0,1,s,0,-1,-s,0,1,-s,s,0,-1,s,0,1,-s,0,-1,-s,0,1],u=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,u,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new T_(e.radius,e.detail)}}class Og extends Ph{constructor(e=1,n=0){const s=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(s,a,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Og(e.radius,e.detail)}}class M_ extends ir{constructor(e=.5,n=1,s=8,a=1,u=0,d=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:s,phiSegments:a,thetaStart:u,thetaLength:d},s=Math.max(3,s),a=Math.max(1,a);const f=[],g=[],_=[],y=[];let w=e;const k=(n-e)/a,S=new Re,A=new _n;for(let P=0;P<=a;P++){for(let R=0;R<=s;R++){const O=u+R/s*d;S.x=w*Math.cos(O),S.y=w*Math.sin(O),g.push(S.x,S.y,S.z),_.push(0,0,1),A.x=(S.x/n+1)/2,A.y=(S.y/n+1)/2,y.push(A.x,A.y)}w+=k}for(let P=0;P<a;P++){const R=P*(s+1);for(let O=0;O<s;O++){const B=O+R,N=B,V=B+s+1,U=B+s+2,Y=B+1;f.push(N,V,Y),f.push(V,U,Y)}}this.setIndex(f),this.setAttribute("position",new ri(g,3)),this.setAttribute("normal",new ri(_,3)),this.setAttribute("uv",new ri(y,2))}static fromJSON(e){return new M_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class A_ extends ir{constructor(e=new zp([new _n(0,.5),new _n(-.5,-.5),new _n(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const s=[],a=[],u=[],d=[];let f=0,g=0;if(Array.isArray(e)===!1)_(e);else for(let y=0;y<e.length;y++)_(e[y]),this.addGroup(f,g,y),f+=g,g=0;this.setIndex(s),this.setAttribute("position",new ri(a,3)),this.setAttribute("normal",new ri(u,3)),this.setAttribute("uv",new ri(d,2));function _(y){const w=a.length/3,k=y.extractPoints(n);let S=k.shape;const A=k.holes;cu.isClockWise(S)===!1&&(S=S.reverse());for(let R=0,O=A.length;R<O;R++){const B=A[R];cu.isClockWise(B)===!0&&(A[R]=B.reverse())}const P=cu.triangulateShape(S,A);for(let R=0,O=A.length;R<O;R++){const B=A[R];S=S.concat(B)}for(let R=0,O=S.length;R<O;R++){const B=S[R];a.push(B.x,B.y,0),u.push(0,0,1),d.push(B.x,B.y)}for(let R=0,O=P.length;R<O;R++){const B=P[R],N=B[0]+w,V=B[1]+w,U=B[2]+w;s.push(N,V,U),g+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return y6e(n,e)}static fromJSON(e,n){const s=[];for(let a=0,u=e.shapes.length;a<u;a++){const d=n[e.shapes[a]];s.push(d)}return new A_(s,e.curveSegments)}}function y6e(r,e){if(e.shapes=[],Array.isArray(r))for(let n=0,s=r.length;n<s;n++){const a=r[n];e.shapes.push(a.uuid)}else e.shapes.push(r.uuid);return e}class Fg extends ir{constructor(e=1,n=32,s=16,a=0,u=Math.PI*2,d=0,f=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:s,phiStart:a,phiLength:u,thetaStart:d,thetaLength:f},n=Math.max(3,Math.floor(n)),s=Math.max(2,Math.floor(s));const g=Math.min(d+f,Math.PI);let _=0;const y=[],w=new Re,k=new Re,S=[],A=[],P=[],R=[];for(let O=0;O<=s;O++){const B=[],N=O/s;let V=0;O==0&&d==0?V=.5/n:O==s&&g==Math.PI&&(V=-.5/n);for(let U=0;U<=n;U++){const Y=U/n;w.x=-e*Math.cos(a+Y*u)*Math.sin(d+N*f),w.y=e*Math.cos(d+N*f),w.z=e*Math.sin(a+Y*u)*Math.sin(d+N*f),A.push(w.x,w.y,w.z),k.copy(w).normalize(),P.push(k.x,k.y,k.z),R.push(Y+V,1-N),B.push(_++)}y.push(B)}for(let O=0;O<s;O++)for(let B=0;B<n;B++){const N=y[O][B+1],V=y[O][B],U=y[O+1][B],Y=y[O+1][B+1];(O!==0||d>0)&&S.push(N,V,Y),(O!==s-1||g<Math.PI)&&S.push(V,U,Y)}this.setIndex(S),this.setAttribute("position",new ri(A,3)),this.setAttribute("normal",new ri(P,3)),this.setAttribute("uv",new ri(R,2))}static fromJSON(e){return new Fg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class L_ extends Ph{constructor(e=1,n=0){const s=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(s,a,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new L_(e.radius,e.detail)}}class R_ extends ir{constructor(e=1,n=.4,s=8,a=6,u=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:s,tubularSegments:a,arc:u},s=Math.floor(s),a=Math.floor(a);const d=[],f=[],g=[],_=[],y=new Re,w=new Re,k=new Re;for(let S=0;S<=s;S++)for(let A=0;A<=a;A++){const P=A/a*u,R=S/s*Math.PI*2;w.x=(e+n*Math.cos(R))*Math.cos(P),w.y=(e+n*Math.cos(R))*Math.sin(P),w.z=n*Math.sin(R),f.push(w.x,w.y,w.z),y.x=e*Math.cos(P),y.y=e*Math.sin(P),k.subVectors(w,y).normalize(),g.push(k.x,k.y,k.z),_.push(A/a),_.push(S/s)}for(let S=1;S<=s;S++)for(let A=1;A<=a;A++){const P=(a+1)*S+A-1,R=(a+1)*(S-1)+A-1,O=(a+1)*(S-1)+A,B=(a+1)*S+A;d.push(P,R,B),d.push(R,O,B)}this.setIndex(d),this.setAttribute("position",new ri(f,3)),this.setAttribute("normal",new ri(g,3)),this.setAttribute("uv",new ri(_,2))}static fromJSON(e){return new R_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class P_ extends ir{constructor(e=1,n=.4,s=64,a=8,u=2,d=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:s,radialSegments:a,p:u,q:d},s=Math.floor(s),a=Math.floor(a);const f=[],g=[],_=[],y=[],w=new Re,k=new Re,S=new Re,A=new Re,P=new Re,R=new Re,O=new Re;for(let N=0;N<=s;++N){const V=N/s*u*Math.PI*2;B(V,u,d,e,S),B(V+.01,u,d,e,A),R.subVectors(A,S),O.addVectors(A,S),P.crossVectors(R,O),O.crossVectors(P,R),P.normalize(),O.normalize();for(let U=0;U<=a;++U){const Y=U/a*Math.PI*2,X=-n*Math.cos(Y),$=n*Math.sin(Y);w.x=S.x+(X*O.x+$*P.x),w.y=S.y+(X*O.y+$*P.y),w.z=S.z+(X*O.z+$*P.z),g.push(w.x,w.y,w.z),k.subVectors(w,S).normalize(),_.push(k.x,k.y,k.z),y.push(N/s),y.push(U/a)}}for(let N=1;N<=s;N++)for(let V=1;V<=a;V++){const U=(a+1)*(N-1)+(V-1),Y=(a+1)*N+(V-1),X=(a+1)*N+V,$=(a+1)*(N-1)+V;f.push(U,Y,$),f.push(Y,X,$)}this.setIndex(f),this.setAttribute("position",new ri(g,3)),this.setAttribute("normal",new ri(_,3)),this.setAttribute("uv",new ri(y,2));function B(N,V,U,Y,X){const $=Math.cos(N),ee=Math.sin(N),ue=U/V*N,Te=Math.cos(ue);X.x=Y*(2+Te)*.5*$,X.y=Y*(2+Te)*ee*.5,X.z=Y*Math.sin(ue)*.5}}static fromJSON(e){return new P_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class I_ extends ir{constructor(e=new B6(new Re(-1,-1,0),new Re(-1,1,0),new Re(1,1,0)),n=64,s=1,a=8,u=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:s,radialSegments:a,closed:u};const d=e.computeFrenetFrames(n,u);this.tangents=d.tangents,this.normals=d.normals,this.binormals=d.binormals;const f=new Re,g=new Re,_=new _n;let y=new Re;const w=[],k=[],S=[],A=[];P(),this.setIndex(A),this.setAttribute("position",new ri(w,3)),this.setAttribute("normal",new ri(k,3)),this.setAttribute("uv",new ri(S,2));function P(){for(let N=0;N<n;N++)R(N);R(u===!1?n:0),B(),O()}function R(N){y=e.getPointAt(N/n,y);const V=d.normals[N],U=d.binormals[N];for(let Y=0;Y<=a;Y++){const X=Y/a*Math.PI*2,$=Math.sin(X),ee=-Math.cos(X);g.x=ee*V.x+$*U.x,g.y=ee*V.y+$*U.y,g.z=ee*V.z+$*U.z,g.normalize(),k.push(g.x,g.y,g.z),f.x=y.x+s*g.x,f.y=y.y+s*g.y,f.z=y.z+s*g.z,w.push(f.x,f.y,f.z)}}function O(){for(let N=1;N<=n;N++)for(let V=1;V<=a;V++){const U=(a+1)*(N-1)+(V-1),Y=(a+1)*N+(V-1),X=(a+1)*N+V,$=(a+1)*(N-1)+V;A.push(U,Y,$),A.push(Y,X,$)}}function B(){for(let N=0;N<=n;N++)for(let V=0;V<=a;V++)_.x=N/n,_.y=V/a,S.push(_.x,_.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new I_(new W6[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class fz extends ir{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],s=new Set,a=new Re,u=new Re;if(e.index!==null){const d=e.attributes.position,f=e.index;let g=e.groups;g.length===0&&(g=[{start:0,count:f.count,materialIndex:0}]);for(let _=0,y=g.length;_<y;++_){const w=g[_],k=w.start,S=w.count;for(let A=k,P=k+S;A<P;A+=3)for(let R=0;R<3;R++){const O=f.getX(A+R),B=f.getX(A+(R+1)%3);a.fromBufferAttribute(d,O),u.fromBufferAttribute(d,B),TO(a,u,s)===!0&&(n.push(a.x,a.y,a.z),n.push(u.x,u.y,u.z))}}}else{const d=e.attributes.position;for(let f=0,g=d.count/3;f<g;f++)for(let _=0;_<3;_++){const y=3*f+_,w=3*f+(_+1)%3;a.fromBufferAttribute(d,y),u.fromBufferAttribute(d,w),TO(a,u,s)===!0&&(n.push(a.x,a.y,a.z),n.push(u.x,u.y,u.z))}}this.setAttribute("position",new ri(n,3))}}}function TO(r,e,n){const s=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return n.has(s)===!0||n.has(a)===!0?!1:(n.add(s),n.add(a),!0)}var MO=Object.freeze({__proto__:null,BoxGeometry:rf,CapsuleGeometry:w_,CircleGeometry:k_,ConeGeometry:C_,CylinderGeometry:tm,DodecahedronGeometry:S_,EdgesGeometry:cz,ExtrudeGeometry:E_,IcosahedronGeometry:T_,LatheGeometry:Ng,OctahedronGeometry:Og,PlaneGeometry:Ig,PolyhedronGeometry:Ph,RingGeometry:M_,ShapeGeometry:A_,SphereGeometry:Fg,TetrahedronGeometry:L_,TorusGeometry:R_,TorusKnotGeometry:P_,TubeGeometry:I_,WireframeGeometry:fz});class pz extends Ho{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new qn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class mz extends fu{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class z6 extends Ho{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new qn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tf,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gz extends z6{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _n(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ts(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new qn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new qn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new qn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class vz extends Ho{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new qn(16777215),this.specular=new qn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tf,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=v_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yz extends Ho{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new qn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tf,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class _z extends Ho{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tf,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class bz extends Ho{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new qn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tf,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=v_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xz extends Ho{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new qn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tf,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wz extends la{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function kl(r,e,n){return U6(r)?new r.constructor(r.subarray(e,n!==void 0?n:r.length)):r.slice(e,n)}function Ip(r,e,n){return!r||!n&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function U6(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function kz(r){function e(a,u){return r[a]-r[u]}const n=r.length,s=new Array(n);for(let a=0;a!==n;++a)s[a]=a;return s.sort(e),s}function sM(r,e,n){const s=r.length,a=new r.constructor(s);for(let u=0,d=0;d!==s;++u){const f=n[u]*e;for(let g=0;g!==e;++g)a[d++]=r[f+g]}return a}function G6(r,e,n,s){let a=1,u=r[0];for(;u!==void 0&&u[s]===void 0;)u=r[a++];if(u===void 0)return;let d=u[s];if(d!==void 0)if(Array.isArray(d))do d=u[s],d!==void 0&&(e.push(u.time),n.push.apply(n,d)),u=r[a++];while(u!==void 0);else if(d.toArray!==void 0)do d=u[s],d!==void 0&&(e.push(u.time),d.toArray(n,n.length)),u=r[a++];while(u!==void 0);else do d=u[s],d!==void 0&&(e.push(u.time),n.push(d)),u=r[a++];while(u!==void 0)}function _6e(r,e,n,s,a=30){const u=r.clone();u.name=e;const d=[];for(let g=0;g<u.tracks.length;++g){const _=u.tracks[g],y=_.getValueSize(),w=[],k=[];for(let S=0;S<_.times.length;++S){const A=_.times[S]*a;if(!(A<n||A>=s)){w.push(_.times[S]);for(let P=0;P<y;++P)k.push(_.values[S*y+P])}}w.length!==0&&(_.times=Ip(w,_.times.constructor),_.values=Ip(k,_.values.constructor),d.push(_))}u.tracks=d;let f=1/0;for(let g=0;g<u.tracks.length;++g)f>u.tracks[g].times[0]&&(f=u.tracks[g].times[0]);for(let g=0;g<u.tracks.length;++g)u.tracks[g].shift(-1*f);return u.resetDuration(),u}function b6e(r,e=0,n=r,s=30){s<=0&&(s=30);const a=n.tracks.length,u=e/s;for(let d=0;d<a;++d){const f=n.tracks[d],g=f.ValueTypeName;if(g==="bool"||g==="string")continue;const _=r.tracks.find(function(O){return O.name===f.name&&O.ValueTypeName===g});if(_===void 0)continue;let y=0;const w=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=w/3);let k=0;const S=_.getValueSize();_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(k=S/3);const A=f.times.length-1;let P;if(u<=f.times[0]){const O=y,B=w-y;P=kl(f.values,O,B)}else if(u>=f.times[A]){const O=A*w+y,B=O+w-y;P=kl(f.values,O,B)}else{const O=f.createInterpolant(),B=y,N=w-y;O.evaluate(u),P=kl(O.resultBuffer,B,N)}g==="quaternion"&&new Ea().fromArray(P).normalize().conjugate().toArray(P);const R=_.times.length;for(let O=0;O<R;++O){const B=O*S+k;if(g==="quaternion")Ea.multiplyQuaternionsFlat(_.values,B,P,0,_.values,B);else{const N=S-k*2;for(let V=0;V<N;++V)_.values[B+V]-=P[V]}}}return r.blendMode=x6,r}var x6e=Object.freeze({__proto__:null,arraySlice:kl,convertArray:Ip,isTypedArray:U6,getKeyframeOrder:kz,sortedArray:sM,flattenJSON:G6,subclip:_6e,makeClipAdditive:b6e});class D_{constructor(e,n,s,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new n.constructor(s),this.sampleValues=n,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let s=this._cachedIndex,a=n[s],u=n[s-1];e:{t:{let d;n:{i:if(!(e<a)){for(let f=s+2;;){if(a===void 0){if(e<u)break i;return s=n.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===f)break;if(u=a,a=n[++s],e<a)break t}d=n.length;break n}if(!(e>=u)){const f=n[1];e<f&&(s=2,u=f);for(let g=s-2;;){if(u===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===g)break;if(a=u,u=n[--s-1],e>=u)break t}d=s,s=0;break n}break e}for(;s<d;){const f=s+d>>>1;e<n[f]?d=f:s=f+1}if(a=n[s],u=n[s-1],u===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return s=n.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,u,a)}return this.interpolate_(s,u,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=e*a;for(let d=0;d!==a;++d)n[d]=s[u+d];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Cz extends D_{constructor(e,n,s,a){super(e,n,s,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Lp,endingEnd:Lp}}intervalChanged_(e,n,s){const a=this.parameterPositions;let u=e-2,d=e+1,f=a[u],g=a[d];if(f===void 0)switch(this.getSettings_().endingStart){case Rp:u=e,f=2*n-s;break;case Qy:u=a.length-2,f=n+a[u]-a[u+1];break;default:u=e,f=s}if(g===void 0)switch(this.getSettings_().endingEnd){case Rp:d=e,g=2*s-n;break;case Qy:d=1,g=s+a[1]-a[0];break;default:d=e-1,g=n}const _=(s-n)*.5,y=this.valueSize;this._weightPrev=_/(n-f),this._weightNext=_/(g-s),this._offsetPrev=u*y,this._offsetNext=d*y}interpolate_(e,n,s,a){const u=this.resultBuffer,d=this.sampleValues,f=this.valueSize,g=e*f,_=g-f,y=this._offsetPrev,w=this._offsetNext,k=this._weightPrev,S=this._weightNext,A=(s-n)/(a-n),P=A*A,R=P*A,O=-k*R+2*k*P-k*A,B=(1+k)*R+(-1.5-2*k)*P+(-.5+k)*A+1,N=(-1-S)*R+(1.5+S)*P+.5*A,V=S*R-S*P;for(let U=0;U!==f;++U)u[U]=O*d[y+U]+B*d[_+U]+N*d[g+U]+V*d[w+U];return u}}class H6 extends D_{constructor(e,n,s,a){super(e,n,s,a)}interpolate_(e,n,s,a){const u=this.resultBuffer,d=this.sampleValues,f=this.valueSize,g=e*f,_=g-f,y=(s-n)/(a-n),w=1-y;for(let k=0;k!==f;++k)u[k]=d[_+k]*w+d[g+k]*y;return u}}class Sz extends D_{constructor(e,n,s,a){super(e,n,s,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class wc{constructor(e,n,s,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ip(n,this.TimeBufferType),this.values=Ip(s,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let s;if(n.toJSON!==this.toJSON)s=n.toJSON(e);else{s={name:e.name,times:Ip(e.times,Array),values:Ip(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(s.interpolation=a)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new Sz(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new H6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Cz(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Ky:n=this.InterpolantFactoryMethodDiscrete;break;case Jy:n=this.InterpolantFactoryMethodLinear;break;case e3:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(s);return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ky;case this.InterpolantFactoryMethodLinear:return Jy;case this.InterpolantFactoryMethodSmooth:return e3}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let s=0,a=n.length;s!==a;++s)n[s]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let s=0,a=n.length;s!==a;++s)n[s]*=e}return this}trim(e,n){const s=this.times,a=s.length;let u=0,d=a-1;for(;u!==a&&s[u]<e;)++u;for(;d!==-1&&s[d]>n;)--d;if(++d,u!==0||d!==a){u>=d&&(d=Math.max(d,1),u=d-1);const f=this.getValueSize();this.times=kl(s,u,d),this.values=kl(this.values,u*f,d*f)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const s=this.times,a=this.values,u=s.length;u===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let d=null;for(let f=0;f!==u;f++){const g=s[f];if(typeof g=="number"&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,g),e=!1;break}if(d!==null&&d>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,g,d),e=!1;break}d=g}if(a!==void 0&&U6(a))for(let f=0,g=a.length;f!==g;++f){const _=a[f];if(isNaN(_)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,_),e=!1;break}}return e}optimize(){const e=kl(this.times),n=kl(this.values),s=this.getValueSize(),a=this.getInterpolation()===e3,u=e.length-1;let d=1;for(let f=1;f<u;++f){let g=!1;const _=e[f],y=e[f+1];if(_!==y&&(f!==1||_!==e[0]))if(a)g=!0;else{const w=f*s,k=w-s,S=w+s;for(let A=0;A!==s;++A){const P=n[w+A];if(P!==n[k+A]||P!==n[S+A]){g=!0;break}}}if(g){if(f!==d){e[d]=e[f];const w=f*s,k=d*s;for(let S=0;S!==s;++S)n[k+S]=n[w+S]}++d}}if(u>0){e[d]=e[u];for(let f=u*s,g=d*s,_=0;_!==s;++_)n[g+_]=n[f+_];++d}return d!==e.length?(this.times=kl(e,0,d),this.values=kl(n,0,d*s)):(this.times=e,this.values=n),this}clone(){const e=kl(this.times,0),n=kl(this.values,0),s=this.constructor,a=new s(this.name,e,n);return a.createInterpolant=this.createInterpolant,a}}wc.prototype.TimeBufferType=Float32Array;wc.prototype.ValueBufferType=Float32Array;wc.prototype.DefaultInterpolation=Jy;class nm extends wc{}nm.prototype.ValueTypeName="bool";nm.prototype.ValueBufferType=Array;nm.prototype.DefaultInterpolation=Ky;nm.prototype.InterpolantFactoryMethodLinear=void 0;nm.prototype.InterpolantFactoryMethodSmooth=void 0;class Y6 extends wc{}Y6.prototype.ValueTypeName="color";class a_ extends wc{}a_.prototype.ValueTypeName="number";class Ez extends D_{constructor(e,n,s,a){super(e,n,s,a)}interpolate_(e,n,s,a){const u=this.resultBuffer,d=this.sampleValues,f=this.valueSize,g=(s-n)/(a-n);let _=e*f;for(let y=_+f;_!==y;_+=4)Ea.slerpFlat(u,0,d,_-f,d,_,g);return u}}class Bg extends wc{InterpolantFactoryMethodLinear(e){return new Ez(this.times,this.values,this.getValueSize(),e)}}Bg.prototype.ValueTypeName="quaternion";Bg.prototype.DefaultInterpolation=Jy;Bg.prototype.InterpolantFactoryMethodSmooth=void 0;class im extends wc{}im.prototype.ValueTypeName="string";im.prototype.ValueBufferType=Array;im.prototype.DefaultInterpolation=Ky;im.prototype.InterpolantFactoryMethodLinear=void 0;im.prototype.InterpolantFactoryMethodSmooth=void 0;class l_ extends wc{}l_.prototype.ValueTypeName="vector";class c_{constructor(e,n=-1,s,a=K3){this.name=e,this.tracks=s,this.duration=n,this.blendMode=a,this.uuid=il(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],s=e.tracks,a=1/(e.fps||1);for(let d=0,f=s.length;d!==f;++d)n.push(k6e(s[d]).scale(a));const u=new this(e.name,e.duration,n,e.blendMode);return u.uuid=e.uuid,u}static toJSON(e){const n=[],s=e.tracks,a={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let u=0,d=s.length;u!==d;++u)n.push(wc.toJSON(s[u]));return a}static CreateFromMorphTargetSequence(e,n,s,a){const u=n.length,d=[];for(let f=0;f<u;f++){let g=[],_=[];g.push((f+u-1)%u,f,(f+1)%u),_.push(0,1,0);const y=kz(g);g=sM(g,1,y),_=sM(_,1,y),!a&&g[0]===0&&(g.push(u),_.push(_[0])),d.push(new a_(".morphTargetInfluences["+n[f].name+"]",g,_).scale(1/s))}return new this(e,-1,d)}static findByName(e,n){let s=e;if(!Array.isArray(e)){const a=e;s=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<s.length;a++)if(s[a].name===n)return s[a];return null}static CreateClipsFromMorphTargetSequences(e,n,s){const a={},u=/^([\w-]*?)([\d]+)$/;for(let f=0,g=e.length;f<g;f++){const _=e[f],y=_.name.match(u);if(y&&y.length>1){const w=y[1];let k=a[w];k||(a[w]=k=[]),k.push(_)}}const d=[];for(const f in a)d.push(this.CreateFromMorphTargetSequence(f,a[f],n,s));return d}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(w,k,S,A,P){if(S.length!==0){const R=[],O=[];G6(S,R,O,A),R.length!==0&&P.push(new w(k,R,O))}},a=[],u=e.name||"default",d=e.fps||30,f=e.blendMode;let g=e.length||-1;const _=e.hierarchy||[];for(let w=0;w<_.length;w++){const k=_[w].keys;if(!(!k||k.length===0))if(k[0].morphTargets){const S={};let A;for(A=0;A<k.length;A++)if(k[A].morphTargets)for(let P=0;P<k[A].morphTargets.length;P++)S[k[A].morphTargets[P]]=-1;for(const P in S){const R=[],O=[];for(let B=0;B!==k[A].morphTargets.length;++B){const N=k[A];R.push(N.time),O.push(N.morphTarget===P?1:0)}a.push(new a_(".morphTargetInfluence["+P+"]",R,O))}g=S.length*d}else{const S=".bones["+n[w].name+"]";s(l_,S+".position",k,"pos",a),s(Bg,S+".quaternion",k,"rot",a),s(l_,S+".scale",k,"scl",a)}}return a.length===0?null:new this(u,g,a,f)}resetDuration(){const e=this.tracks;let n=0;for(let s=0,a=e.length;s!==a;++s){const u=this.tracks[s];n=Math.max(n,u.times[u.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function w6e(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return a_;case"vector":case"vector2":case"vector3":case"vector4":return l_;case"color":return Y6;case"quaternion":return Bg;case"bool":case"boolean":return nm;case"string":return im}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function k6e(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=w6e(r.type);if(r.times===void 0){const n=[],s=[];G6(r.keys,n,s,"value"),r.times=n,r.values=s}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const $p={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class j6{constructor(e,n,s){const a=this;let u=!1,d=0,f=0,g;const _=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=s,this.itemStart=function(y){f++,u===!1&&a.onStart!==void 0&&a.onStart(y,d,f),u=!0},this.itemEnd=function(y){d++,a.onProgress!==void 0&&a.onProgress(y,d,f),d===f&&(u=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(y){a.onError!==void 0&&a.onError(y)},this.resolveURL=function(y){return g?g(y):y},this.setURLModifier=function(y){return g=y,this},this.addHandler=function(y,w){return _.push(y,w),this},this.removeHandler=function(y){const w=_.indexOf(y);return w!==-1&&_.splice(w,2),this},this.getHandler=function(y){for(let w=0,k=_.length;w<k;w+=2){const S=_[w],A=_[w+1];if(S.global&&(S.lastIndex=0),S.test(y))return A}return null}}}const Tz=new j6;class rl{constructor(e){this.manager=e!==void 0?e:Tz,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const s=this;return new Promise(function(a,u){s.load(e,a,n,u)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const hh={};class C6e extends Error{constructor(e,n){super(e),this.response=n}}class Th extends rl{constructor(e){super(e)}load(e,n,s,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const u=$p.get(e);if(u!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(u),this.manager.itemEnd(e)},0),u;if(hh[e]!==void 0){hh[e].push({onLoad:n,onProgress:s,onError:a});return}hh[e]=[],hh[e].push({onLoad:n,onProgress:s,onError:a});const d=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),f=this.mimeType,g=this.responseType;fetch(d).then(_=>{if(_.status===200||_.status===0){if(_.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||_.body===void 0||_.body.getReader===void 0)return _;const y=hh[e],w=_.body.getReader(),k=_.headers.get("Content-Length"),S=k?parseInt(k):0,A=S!==0;let P=0;const R=new ReadableStream({start(O){B();function B(){w.read().then(({done:N,value:V})=>{if(N)O.close();else{P+=V.byteLength;const U=new ProgressEvent("progress",{lengthComputable:A,loaded:P,total:S});for(let Y=0,X=y.length;Y<X;Y++){const $=y[Y];$.onProgress&&$.onProgress(U)}O.enqueue(V),B()}})}}});return new Response(R)}else throw new C6e(`fetch for "${_.url}" responded with ${_.status}: ${_.statusText}`,_)}).then(_=>{switch(g){case"arraybuffer":return _.arrayBuffer();case"blob":return _.blob();case"document":return _.text().then(y=>new DOMParser().parseFromString(y,f));case"json":return _.json();default:if(f===void 0)return _.text();{const w=/charset="?([^;"\s]*)"?/i.exec(f),k=w&&w[1]?w[1].toLowerCase():void 0,S=new TextDecoder(k);return _.arrayBuffer().then(A=>S.decode(A))}}}).then(_=>{$p.add(e,_);const y=hh[e];delete hh[e];for(let w=0,k=y.length;w<k;w++){const S=y[w];S.onLoad&&S.onLoad(_)}}).catch(_=>{const y=hh[e];if(y===void 0)throw this.manager.itemError(e),_;delete hh[e];for(let w=0,k=y.length;w<k;w++){const S=y[w];S.onError&&S.onError(_)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class S6e extends rl{constructor(e){super(e)}load(e,n,s,a){const u=this,d=new Th(this.manager);d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(f){try{n(u.parse(JSON.parse(f)))}catch(g){a?a(g):console.error(g),u.manager.itemError(e)}},s,a)}parse(e){const n=[];for(let s=0;s<e.length;s++){const a=c_.parse(e[s]);n.push(a)}return n}}class E6e extends rl{constructor(e){super(e)}load(e,n,s,a){const u=this,d=[],f=new D6,g=new Th(this.manager);g.setPath(this.path),g.setResponseType("arraybuffer"),g.setRequestHeader(this.requestHeader),g.setWithCredentials(u.withCredentials);let _=0;function y(w){g.load(e[w],function(k){const S=u.parse(k,!0);d[w]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},_+=1,_===6&&(S.mipmapCount===1&&(f.minFilter=Es),f.image=d,f.format=S.format,f.needsUpdate=!0,n&&n(f))},s,a)}if(Array.isArray(e))for(let w=0,k=e.length;w<k;++w)y(w);else g.load(e,function(w){const k=u.parse(w,!0);if(k.isCubemap){const S=k.mipmaps.length/k.mipmapCount;for(let A=0;A<S;A++){d[A]={mipmaps:[]};for(let P=0;P<k.mipmapCount;P++)d[A].mipmaps.push(k.mipmaps[A*k.mipmapCount+P]),d[A].format=k.format,d[A].width=k.width,d[A].height=k.height}f.image=d}else f.image.width=k.width,f.image.height=k.height,f.mipmaps=k.mipmaps;k.mipmapCount===1&&(f.minFilter=Es),f.format=k.format,f.needsUpdate=!0,n&&n(f)},s,a);return f}}class u_ extends rl{constructor(e){super(e)}load(e,n,s,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const u=this,d=$p.get(e);if(d!==void 0)return u.manager.itemStart(e),setTimeout(function(){n&&n(d),u.manager.itemEnd(e)},0),d;const f=n_("img");function g(){y(),$p.add(e,this),n&&n(this),u.manager.itemEnd(e)}function _(w){y(),a&&a(w),u.manager.itemError(e),u.manager.itemEnd(e)}function y(){f.removeEventListener("load",g,!1),f.removeEventListener("error",_,!1)}return f.addEventListener("load",g,!1),f.addEventListener("error",_,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(f.crossOrigin=this.crossOrigin),u.manager.itemStart(e),f.src=e,f}}class T6e extends rl{constructor(e){super(e)}load(e,n,s,a){const u=new b_,d=new u_(this.manager);d.setCrossOrigin(this.crossOrigin),d.setPath(this.path);let f=0;function g(_){d.load(e[_],function(y){u.images[_]=y,f++,f===6&&(u.needsUpdate=!0,n&&n(u))},void 0,a)}for(let _=0;_<e.length;++_)g(_);return u}}class M6e extends rl{constructor(e){super(e)}load(e,n,s,a){const u=this,d=new gg,f=new Th(this.manager);return f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setPath(this.path),f.setWithCredentials(u.withCredentials),f.load(e,function(g){const _=u.parse(g);!_||(_.image!==void 0?d.image=_.image:_.data!==void 0&&(d.image.width=_.width,d.image.height=_.height,d.image.data=_.data),d.wrapS=_.wrapS!==void 0?_.wrapS:Uo,d.wrapT=_.wrapT!==void 0?_.wrapT:Uo,d.magFilter=_.magFilter!==void 0?_.magFilter:Es,d.minFilter=_.minFilter!==void 0?_.minFilter:Es,d.anisotropy=_.anisotropy!==void 0?_.anisotropy:1,_.encoding!==void 0&&(d.encoding=_.encoding),_.flipY!==void 0&&(d.flipY=_.flipY),_.format!==void 0&&(d.format=_.format),_.type!==void 0&&(d.type=_.type),_.mipmaps!==void 0&&(d.mipmaps=_.mipmaps,d.minFilter=Jp),_.mipmapCount===1&&(d.minFilter=Es),_.generateMipmaps!==void 0&&(d.generateMipmaps=_.generateMipmaps),d.needsUpdate=!0,n&&n(d,_))},s,a),d}}class A6e extends rl{constructor(e){super(e)}load(e,n,s,a){const u=new to,d=new u_(this.manager);return d.setCrossOrigin(this.crossOrigin),d.setPath(this.path),d.load(e,function(f){u.image=f,u.needsUpdate=!0,n!==void 0&&n(u)},s,a),u}}class sf extends _r{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new qn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class Mz extends sf{constructor(e,n,s){super(e,s),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_r.DefaultUp),this.updateMatrix(),this.groundColor=new qn(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const EE=new Yi,AO=new Re,LO=new Re;class $6{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _n(512,512),this.map=null,this.mapPass=null,this.matrix=new Yi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new t5,this._frameExtents=new _n(1,1),this._viewportCount=1,this._viewports=[new Ar(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,s=this.matrix;AO.setFromMatrixPosition(e.matrixWorld),n.position.copy(AO),LO.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(LO),n.updateMatrixWorld(),EE.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(EE),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(EE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class L6e extends $6{constructor(){super(new zs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,s=t_*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,u=e.distance||n.far;(s!==n.fov||a!==n.aspect||u!==n.far)&&(n.fov=s,n.aspect=a,n.far=u,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Az extends sf{constructor(e,n,s=0,a=Math.PI/3,u=0,d=1){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_r.DefaultUp),this.updateMatrix(),this.target=new _r,this.distance=s,this.angle=a,this.penumbra=u,this.decay=d,this.map=null,this.shadow=new L6e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const RO=new Yi,ly=new Re,TE=new Re;class R6e extends $6{constructor(){super(new zs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _n(4,2),this._viewportCount=6,this._viewports=[new Ar(2,1,1,1),new Ar(0,1,1,1),new Ar(3,1,1,1),new Ar(1,1,1,1),new Ar(3,0,1,1),new Ar(1,0,1,1)],this._cubeDirections=[new Re(1,0,0),new Re(-1,0,0),new Re(0,0,1),new Re(0,0,-1),new Re(0,1,0),new Re(0,-1,0)],this._cubeUps=[new Re(0,1,0),new Re(0,1,0),new Re(0,1,0),new Re(0,1,0),new Re(0,0,1),new Re(0,0,-1)]}updateMatrices(e,n=0){const s=this.camera,a=this.matrix,u=e.distance||s.far;u!==s.far&&(s.far=u,s.updateProjectionMatrix()),ly.setFromMatrixPosition(e.matrixWorld),s.position.copy(ly),TE.copy(s.position),TE.add(this._cubeDirections[n]),s.up.copy(this._cubeUps[n]),s.lookAt(TE),s.updateMatrixWorld(),a.makeTranslation(-ly.x,-ly.y,-ly.z),RO.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(RO)}}class Lz extends sf{constructor(e,n,s=0,a=1){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=a,this.shadow=new R6e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class P6e extends $6{constructor(){super(new x_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Rz extends sf{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_r.DefaultUp),this.updateMatrix(),this.target=new _r,this.shadow=new P6e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Pz extends sf{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Iz extends sf{constructor(e,n,s=10,a=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=s,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Dz{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Re)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const s=e.x,a=e.y,u=e.z,d=this.coefficients;return n.copy(d[0]).multiplyScalar(.282095),n.addScaledVector(d[1],.488603*a),n.addScaledVector(d[2],.488603*u),n.addScaledVector(d[3],.488603*s),n.addScaledVector(d[4],1.092548*(s*a)),n.addScaledVector(d[5],1.092548*(a*u)),n.addScaledVector(d[6],.315392*(3*u*u-1)),n.addScaledVector(d[7],1.092548*(s*u)),n.addScaledVector(d[8],.546274*(s*s-a*a)),n}getIrradianceAt(e,n){const s=e.x,a=e.y,u=e.z,d=this.coefficients;return n.copy(d[0]).multiplyScalar(.886227),n.addScaledVector(d[1],2*.511664*a),n.addScaledVector(d[2],2*.511664*u),n.addScaledVector(d[3],2*.511664*s),n.addScaledVector(d[4],2*.429043*s*a),n.addScaledVector(d[5],2*.429043*a*u),n.addScaledVector(d[6],.743125*u*u-.247708),n.addScaledVector(d[7],2*.429043*s*u),n.addScaledVector(d[8],.429043*(s*s-a*a)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let s=0;s<9;s++)this.coefficients[s].addScaledVector(e.coefficients[s],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let s=0;s<9;s++)this.coefficients[s].lerp(e.coefficients[s],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const s=this.coefficients;for(let a=0;a<9;a++)s[a].fromArray(e,n+a*3);return this}toArray(e=[],n=0){const s=this.coefficients;for(let a=0;a<9;a++)s[a].toArray(e,n+a*3);return e}static getBasisAt(e,n){const s=e.x,a=e.y,u=e.z;n[0]=.282095,n[1]=.488603*a,n[2]=.488603*u,n[3]=.488603*s,n[4]=1.092548*s*a,n[5]=1.092548*a*u,n[6]=.315392*(3*u*u-1),n[7]=1.092548*s*u,n[8]=.546274*(s*s-a*a)}}class u5 extends sf{constructor(e=new Dz,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class h5 extends rl{constructor(e){super(e),this.textures={}}load(e,n,s,a){const u=this,d=new Th(u.manager);d.setPath(u.path),d.setRequestHeader(u.requestHeader),d.setWithCredentials(u.withCredentials),d.load(e,function(f){try{n(u.parse(JSON.parse(f)))}catch(g){a?a(g):console.error(g),u.manager.itemError(e)}},s,a)}parse(e){const n=this.textures;function s(u){return n[u]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",u),n[u]}const a=h5.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new qn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==1&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const u in e.uniforms){const d=e.uniforms[u];switch(a.uniforms[u]={},d.type){case"t":a.uniforms[u].value=s(d.value);break;case"c":a.uniforms[u].value=new qn().setHex(d.value);break;case"v2":a.uniforms[u].value=new _n().fromArray(d.value);break;case"v3":a.uniforms[u].value=new Re().fromArray(d.value);break;case"v4":a.uniforms[u].value=new Ar().fromArray(d.value);break;case"m3":a.uniforms[u].value=new Ca().fromArray(d.value);break;case"m4":a.uniforms[u].value=new Yi().fromArray(d.value);break;default:a.uniforms[u].value=d.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const u in e.extensions)a.extensions[u]=e.extensions[u];if(e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=s(e.map)),e.matcap!==void 0&&(a.matcap=s(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=s(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=s(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=s(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let u=e.normalScale;Array.isArray(u)===!1&&(u=[u,u]),a.normalScale=new _n().fromArray(u)}return e.displacementMap!==void 0&&(a.displacementMap=s(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=s(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=s(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=s(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=s(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=s(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=s(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=s(e.envMap)),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=s(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=s(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=s(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=s(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=s(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=s(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new _n().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=s(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=s(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=s(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=s(e.thicknessMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=s(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=s(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:pz,SpriteMaterial:R6,RawShaderMaterial:mz,ShaderMaterial:fu,PointsMaterial:I6,MeshPhysicalMaterial:gz,MeshStandardMaterial:z6,MeshPhongMaterial:vz,MeshToonMaterial:yz,MeshNormalMaterial:_z,MeshLambertMaterial:bz,MeshDepthMaterial:T6,MeshDistanceMaterial:M6,MeshBasicMaterial:nf,MeshMatcapMaterial:xz,LineDashedMaterial:wz,LineBasicMaterial:la,Material:Ho};return new n[e]}}class oM{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let s=0,a=e.length;s<a;s++)n+=String.fromCharCode(e[s]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class Nz extends ir{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Oz extends rl{constructor(e){super(e)}load(e,n,s,a){const u=this,d=new Th(u.manager);d.setPath(u.path),d.setRequestHeader(u.requestHeader),d.setWithCredentials(u.withCredentials),d.load(e,function(f){try{n(u.parse(JSON.parse(f)))}catch(g){a?a(g):console.error(g),u.manager.itemError(e)}},s,a)}parse(e){const n={},s={};function a(S,A){if(n[A]!==void 0)return n[A];const R=S.interleavedBuffers[A],O=u(S,R.buffer),B=ng(R.type,O),N=new s5(B,R.stride);return N.uuid=R.uuid,n[A]=N,N}function u(S,A){if(s[A]!==void 0)return s[A];const R=S.arrayBuffers[A],O=new Uint32Array(R).buffer;return s[A]=O,O}const d=e.isInstancedBufferGeometry?new Nz:new ir,f=e.data.index;if(f!==void 0){const S=ng(f.type,f.array);d.setIndex(new Wr(S,1))}const g=e.data.attributes;for(const S in g){const A=g[S];let P;if(A.isInterleavedBufferAttribute){const R=a(e.data,A.data);P=new Yp(R,A.itemSize,A.offset,A.normalized)}else{const R=ng(A.type,A.array),O=A.isInstancedBufferAttribute?Eg:Wr;P=new O(R,A.itemSize,A.normalized)}A.name!==void 0&&(P.name=A.name),A.usage!==void 0&&P.setUsage(A.usage),A.updateRange!==void 0&&(P.updateRange.offset=A.updateRange.offset,P.updateRange.count=A.updateRange.count),d.setAttribute(S,P)}const _=e.data.morphAttributes;if(_)for(const S in _){const A=_[S],P=[];for(let R=0,O=A.length;R<O;R++){const B=A[R];let N;if(B.isInterleavedBufferAttribute){const V=a(e.data,B.data);N=new Yp(V,B.itemSize,B.offset,B.normalized)}else{const V=ng(B.type,B.array);N=new Wr(V,B.itemSize,B.normalized)}B.name!==void 0&&(N.name=B.name),P.push(N)}d.morphAttributes[S]=P}e.data.morphTargetsRelative&&(d.morphTargetsRelative=!0);const w=e.data.groups||e.data.drawcalls||e.data.offsets;if(w!==void 0)for(let S=0,A=w.length;S!==A;++S){const P=w[S];d.addGroup(P.start,P.count,P.materialIndex)}const k=e.data.boundingSphere;if(k!==void 0){const S=new Re;k.center!==void 0&&S.fromArray(k.center),d.boundingSphere=new em(S,k.radius)}return e.name&&(d.name=e.name),e.userData&&(d.userData=e.userData),d}}class I6e extends rl{constructor(e){super(e)}load(e,n,s,a){const u=this,d=this.path===""?oM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||d;const f=new Th(this.manager);f.setPath(this.path),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(g){let _=null;try{_=JSON.parse(g)}catch(w){a!==void 0&&a(w),console.error("THREE:ObjectLoader: Can't parse "+e+".",w.message);return}const y=_.metadata;if(y===void 0||y.type===void 0||y.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}u.parse(_,n)},s,a)}async loadAsync(e,n){const s=this,a=this.path===""?oM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const u=new Th(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials);const d=await u.loadAsync(e,n),f=JSON.parse(d),g=f.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await s.parseAsync(f)}parse(e,n){const s=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),u=this.parseGeometries(e.geometries,a),d=this.parseImages(e.images,function(){n!==void 0&&n(_)}),f=this.parseTextures(e.textures,d),g=this.parseMaterials(e.materials,f),_=this.parseObject(e.object,u,g,f,s),y=this.parseSkeletons(e.skeletons,_);if(this.bindSkeletons(_,y),n!==void 0){let w=!1;for(const k in d)if(d[k].data instanceof HTMLImageElement){w=!0;break}w===!1&&n(_)}return _}async parseAsync(e){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,s),u=await this.parseImagesAsync(e.images),d=this.parseTextures(e.textures,u),f=this.parseMaterials(e.materials,d),g=this.parseObject(e.object,a,f,d,n),_=this.parseSkeletons(e.skeletons,g);return this.bindSkeletons(g,_),g}parseShapes(e){const n={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const u=new zp().fromJSON(e[s]);n[u.uuid]=u}return n}parseSkeletons(e,n){const s={},a={};if(n.traverse(function(u){u.isBone&&(a[u.uuid]=u)}),e!==void 0)for(let u=0,d=e.length;u<d;u++){const f=new o5().fromJSON(e[u],a);s[f.uuid]=f}return s}parseGeometries(e,n){const s={};if(e!==void 0){const a=new Oz;for(let u=0,d=e.length;u<d;u++){let f;const g=e[u];switch(g.type){case"BufferGeometry":case"InstancedBufferGeometry":f=a.parse(g);break;default:g.type in MO?f=MO[g.type].fromJSON(g,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${g.type}"`)}f.uuid=g.uuid,g.name!==void 0&&(f.name=g.name),f.isBufferGeometry===!0&&g.userData!==void 0&&(f.userData=g.userData),s[g.uuid]=f}}return s}parseMaterials(e,n){const s={},a={};if(e!==void 0){const u=new h5;u.setTextures(n);for(let d=0,f=e.length;d<f;d++){const g=e[d];s[g.uuid]===void 0&&(s[g.uuid]=u.parse(g)),a[g.uuid]=s[g.uuid]}}return a}parseAnimations(e){const n={};if(e!==void 0)for(let s=0;s<e.length;s++){const a=e[s],u=c_.parse(a);n[u.uuid]=u}return n}parseImages(e,n){const s=this,a={};let u;function d(g){return s.manager.itemStart(g),u.load(g,function(){s.manager.itemEnd(g)},void 0,function(){s.manager.itemError(g),s.manager.itemEnd(g)})}function f(g){if(typeof g=="string"){const _=g,y=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(_)?_:s.resourcePath+_;return d(y)}else return g.data?{data:ng(g.type,g.data),width:g.width,height:g.height}:null}if(e!==void 0&&e.length>0){const g=new j6(n);u=new u_(g),u.setCrossOrigin(this.crossOrigin);for(let _=0,y=e.length;_<y;_++){const w=e[_],k=w.url;if(Array.isArray(k)){const S=[];for(let A=0,P=k.length;A<P;A++){const R=k[A],O=f(R);O!==null&&(O instanceof HTMLImageElement?S.push(O):S.push(new gg(O.data,O.width,O.height)))}a[w.uuid]=new Pp(S)}else{const S=f(w.url);a[w.uuid]=new Pp(S)}}}return a}async parseImagesAsync(e){const n=this,s={};let a;async function u(d){if(typeof d=="string"){const f=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;return await a.loadAsync(g)}else return d.data?{data:ng(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){a=new u_(this.manager),a.setCrossOrigin(this.crossOrigin);for(let d=0,f=e.length;d<f;d++){const g=e[d],_=g.url;if(Array.isArray(_)){const y=[];for(let w=0,k=_.length;w<k;w++){const S=_[w],A=await u(S);A!==null&&(A instanceof HTMLImageElement?y.push(A):y.push(new gg(A.data,A.width,A.height)))}s[g.uuid]=new Pp(y)}else{const y=await u(g.url);s[g.uuid]=new Pp(y)}}}return s}parseTextures(e,n){function s(u,d){return typeof u=="number"?u:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",u),d[u])}const a={};if(e!==void 0)for(let u=0,d=e.length;u<d;u++){const f=e[u];f.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',f.uuid),n[f.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",f.image);const g=n[f.image],_=g.data;let y;Array.isArray(_)?(y=new b_,_.length===6&&(y.needsUpdate=!0)):(_&&_.data?y=new gg:y=new to,_&&(y.needsUpdate=!0)),y.source=g,y.uuid=f.uuid,f.name!==void 0&&(y.name=f.name),f.mapping!==void 0&&(y.mapping=s(f.mapping,D6e)),f.offset!==void 0&&y.offset.fromArray(f.offset),f.repeat!==void 0&&y.repeat.fromArray(f.repeat),f.center!==void 0&&y.center.fromArray(f.center),f.rotation!==void 0&&(y.rotation=f.rotation),f.wrap!==void 0&&(y.wrapS=s(f.wrap[0],PO),y.wrapT=s(f.wrap[1],PO)),f.format!==void 0&&(y.format=f.format),f.type!==void 0&&(y.type=f.type),f.encoding!==void 0&&(y.encoding=f.encoding),f.minFilter!==void 0&&(y.minFilter=s(f.minFilter,IO)),f.magFilter!==void 0&&(y.magFilter=s(f.magFilter,IO)),f.anisotropy!==void 0&&(y.anisotropy=f.anisotropy),f.flipY!==void 0&&(y.flipY=f.flipY),f.premultiplyAlpha!==void 0&&(y.premultiplyAlpha=f.premultiplyAlpha),f.unpackAlignment!==void 0&&(y.unpackAlignment=f.unpackAlignment),f.userData!==void 0&&(y.userData=f.userData),a[f.uuid]=y}return a}parseObject(e,n,s,a,u){let d;function f(k){return n[k]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",k),n[k]}function g(k){if(k!==void 0){if(Array.isArray(k)){const S=[];for(let A=0,P=k.length;A<P;A++){const R=k[A];s[R]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",R),S.push(s[R])}return S}return s[k]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",k),s[k]}}function _(k){return a[k]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",k),a[k]}let y,w;switch(e.type){case"Scene":d=new L6,e.background!==void 0&&(Number.isInteger(e.background)?d.background=new qn(e.background):d.background=_(e.background)),e.environment!==void 0&&(d.environment=_(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?d.fog=new r5(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(d.fog=new i5(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(d.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":d=new zs(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(d.focus=e.focus),e.zoom!==void 0&&(d.zoom=e.zoom),e.filmGauge!==void 0&&(d.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(d.filmOffset=e.filmOffset),e.view!==void 0&&(d.view=Object.assign({},e.view));break;case"OrthographicCamera":d=new x_(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(d.zoom=e.zoom),e.view!==void 0&&(d.view=Object.assign({},e.view));break;case"AmbientLight":d=new Pz(e.color,e.intensity);break;case"DirectionalLight":d=new Rz(e.color,e.intensity);break;case"PointLight":d=new Lz(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":d=new Iz(e.color,e.intensity,e.width,e.height);break;case"SpotLight":d=new Az(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":d=new Mz(e.color,e.groundColor,e.intensity);break;case"LightProbe":d=new u5().fromJSON(e);break;case"SkinnedMesh":y=f(e.geometry),w=g(e.material),d=new ez(y,w),e.bindMode!==void 0&&(d.bindMode=e.bindMode),e.bindMatrix!==void 0&&d.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(d.skeleton=e.skeleton);break;case"Mesh":y=f(e.geometry),w=g(e.material),d=new So(y,w);break;case"InstancedMesh":y=f(e.geometry),w=g(e.material);const k=e.count,S=e.instanceMatrix,A=e.instanceColor;d=new tz(y,w,k),d.instanceMatrix=new Eg(new Float32Array(S.array),16),A!==void 0&&(d.instanceColor=new Eg(new Float32Array(A.array),A.itemSize));break;case"LOD":d=new QW;break;case"Line":d=new Kd(f(e.geometry),g(e.material));break;case"LineLoop":d=new nz(f(e.geometry),g(e.material));break;case"LineSegments":d=new mu(f(e.geometry),g(e.material));break;case"PointCloud":case"Points":d=new iz(f(e.geometry),g(e.material));break;case"Sprite":d=new JW(g(e.material));break;case"Group":d=new rg;break;case"Bone":d=new P6;break;default:d=new _r}if(d.uuid=e.uuid,e.name!==void 0&&(d.name=e.name),e.matrix!==void 0?(d.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(d.matrixAutoUpdate=e.matrixAutoUpdate),d.matrixAutoUpdate&&d.matrix.decompose(d.position,d.quaternion,d.scale)):(e.position!==void 0&&d.position.fromArray(e.position),e.rotation!==void 0&&d.rotation.fromArray(e.rotation),e.quaternion!==void 0&&d.quaternion.fromArray(e.quaternion),e.scale!==void 0&&d.scale.fromArray(e.scale)),e.castShadow!==void 0&&(d.castShadow=e.castShadow),e.receiveShadow!==void 0&&(d.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(d.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(d.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(d.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&d.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(d.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(d.visible=e.visible),e.frustumCulled!==void 0&&(d.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(d.renderOrder=e.renderOrder),e.userData!==void 0&&(d.userData=e.userData),e.layers!==void 0&&(d.layers.mask=e.layers),e.children!==void 0){const k=e.children;for(let S=0;S<k.length;S++)d.add(this.parseObject(k[S],n,s,a,u))}if(e.animations!==void 0){const k=e.animations;for(let S=0;S<k.length;S++){const A=k[S];d.animations.push(u[A])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(d.autoUpdate=e.autoUpdate);const k=e.levels;for(let S=0;S<k.length;S++){const A=k[S],P=d.getObjectByProperty("uuid",A.object);P!==void 0&&d.addLevel(P,A.distance)}}return d}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(s){if(s.isSkinnedMesh===!0&&s.skeleton!==void 0){const a=n[s.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",s.skeleton):s.bind(a,s.bindMatrix)}})}}const D6e={UVMapping:Z3,CubeReflectionMapping:$d,CubeRefractionMapping:qd,EquirectangularReflectionMapping:$y,EquirectangularRefractionMapping:qy,CubeUVReflectionMapping:Rg},PO={RepeatWrapping:Xy,ClampToEdgeWrapping:Uo,MirroredRepeatWrapping:Zy},IO={NearestFilter:Ws,NearestMipmapNearestFilter:w3,NearestMipmapLinearFilter:k3,LinearFilter:Es,LinearMipmapNearestFilter:_6,LinearMipmapLinearFilter:Jp};class N6e extends rl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,s,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const u=this,d=$p.get(e);if(d!==void 0)return u.manager.itemStart(e),setTimeout(function(){n&&n(d),u.manager.itemEnd(e)},0),d;const f={};f.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",f.headers=this.requestHeader,fetch(e,f).then(function(g){return g.blob()}).then(function(g){return createImageBitmap(g,Object.assign(u.options,{colorSpaceConversion:"none"}))}).then(function(g){$p.add(e,g),n&&n(g),u.manager.itemEnd(e)}).catch(function(g){a&&a(g),u.manager.itemError(e),u.manager.itemEnd(e)}),u.manager.itemStart(e)}}let Rw;class q6{static getContext(){return Rw===void 0&&(Rw=new(window.AudioContext||window.webkitAudioContext)),Rw}static setContext(e){Rw=e}}class O6e extends rl{constructor(e){super(e)}load(e,n,s,a){const u=this,d=new Th(this.manager);d.setResponseType("arraybuffer"),d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(f){try{const g=f.slice(0);q6.getContext().decodeAudioData(g,function(y){n(y)})}catch(g){a?a(g):console.error(g),u.manager.itemError(e)}},s,a)}}class F6e extends u5{constructor(e,n,s=1){super(void 0,s),this.isHemisphereLightProbe=!0;const a=new qn().set(e),u=new qn().set(n),d=new Re(a.r,a.g,a.b),f=new Re(u.r,u.g,u.b),g=Math.sqrt(Math.PI),_=g*Math.sqrt(.75);this.sh.coefficients[0].copy(d).add(f).multiplyScalar(g),this.sh.coefficients[1].copy(d).sub(f).multiplyScalar(_)}}class B6e extends u5{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const s=new qn().set(e);this.sh.coefficients[0].set(s.r,s.g,s.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const DO=new Yi,NO=new Yi,cp=new Yi;class V6e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new zs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new zs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,cp.copy(e.projectionMatrix);const a=n.eyeSep/2,u=a*n.near/n.focus,d=n.near*Math.tan(Vp*n.fov*.5)/n.zoom;let f,g;NO.elements[12]=-a,DO.elements[12]=a,f=-d*n.aspect+u,g=d*n.aspect+u,cp.elements[0]=2*n.near/(g-f),cp.elements[8]=(g+f)/(g-f),this.cameraL.projectionMatrix.copy(cp),f=-d*n.aspect-u,g=d*n.aspect-u,cp.elements[0]=2*n.near/(g-f),cp.elements[8]=(g+f)/(g-f),this.cameraR.projectionMatrix.copy(cp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(NO),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(DO)}}class X6{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=OO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=OO();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function OO(){return(typeof performance>"u"?Date:performance).now()}const up=new Re,FO=new Ea,W6e=new Re,hp=new Re;class z6e extends _r{constructor(){super(),this.type="AudioListener",this.context=q6.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new X6}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,s=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(up,FO,W6e),hp.set(0,0,-1).applyQuaternion(FO),n.positionX){const a=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(up.x,a),n.positionY.linearRampToValueAtTime(up.y,a),n.positionZ.linearRampToValueAtTime(up.z,a),n.forwardX.linearRampToValueAtTime(hp.x,a),n.forwardY.linearRampToValueAtTime(hp.y,a),n.forwardZ.linearRampToValueAtTime(hp.z,a),n.upX.linearRampToValueAtTime(s.x,a),n.upY.linearRampToValueAtTime(s.y,a),n.upZ.linearRampToValueAtTime(s.z,a)}else n.setPosition(up.x,up.y,up.z),n.setOrientation(hp.x,hp.y,hp.z,s.x,s.y,s.z)}}class Fz extends _r{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const dp=new Re,BO=new Ea,U6e=new Re,fp=new Re;class G6e extends Fz{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,s){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=s,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(dp,BO,U6e),fp.set(0,0,1).applyQuaternion(BO);const n=this.panner;if(n.positionX){const s=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(dp.x,s),n.positionY.linearRampToValueAtTime(dp.y,s),n.positionZ.linearRampToValueAtTime(dp.z,s),n.orientationX.linearRampToValueAtTime(fp.x,s),n.orientationY.linearRampToValueAtTime(fp.y,s),n.orientationZ.linearRampToValueAtTime(fp.z,s)}else n.setPosition(dp.x,dp.y,dp.z),n.setOrientation(fp.x,fp.y,fp.z)}}class H6e{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let s=0;s<n.length;s++)e+=n[s];return e/n.length}}class Bz{constructor(e,n,s){this.binding=e,this.valueSize=s;let a,u,d;switch(n){case"quaternion":a=this._slerp,u=this._slerpAdditive,d=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(s*6),this._workIndex=5;break;case"string":case"bool":a=this._select,u=this._select,d=this._setAdditiveIdentityOther,this.buffer=new Array(s*5);break;default:a=this._lerp,u=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(s*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=u,this._setIdentity=d,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const s=this.buffer,a=this.valueSize,u=e*a+a;let d=this.cumulativeWeight;if(d===0){for(let f=0;f!==a;++f)s[u+f]=s[f];d=n}else{d+=n;const f=n/d;this._mixBufferRegion(s,u,0,f,a)}this.cumulativeWeight=d}accumulateAdditive(e){const n=this.buffer,s=this.valueSize,a=s*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,a,0,e,s),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,s=this.buffer,a=e*n+n,u=this.cumulativeWeight,d=this.cumulativeWeightAdditive,f=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,u<1){const g=n*this._origIndex;this._mixBufferRegion(s,a,g,1-u,n)}d>0&&this._mixBufferRegionAdditive(s,a,this._addIndex*n,1,n);for(let g=n,_=n+n;g!==_;++g)if(s[g]!==s[g+n]){f.setValue(s,a);break}}saveOriginalState(){const e=this.binding,n=this.buffer,s=this.valueSize,a=s*this._origIndex;e.getValue(n,a);for(let u=s,d=a;u!==d;++u)n[u]=n[a+u%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let s=e;s<n;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[n+s]=this.buffer[e+s]}_select(e,n,s,a,u){if(a>=.5)for(let d=0;d!==u;++d)e[n+d]=e[s+d]}_slerp(e,n,s,a){Ea.slerpFlat(e,n,e,n,e,s,a)}_slerpAdditive(e,n,s,a,u){const d=this._workIndex*u;Ea.multiplyQuaternionsFlat(e,d,e,n,e,s),Ea.slerpFlat(e,n,e,n,e,d,a)}_lerp(e,n,s,a,u){const d=1-a;for(let f=0;f!==u;++f){const g=n+f;e[g]=e[g]*d+e[s+f]*a}}_lerpAdditive(e,n,s,a,u){for(let d=0;d!==u;++d){const f=n+d;e[f]=e[f]+e[s+d]*a}}}const Z6="\\[\\]\\.:\\/",Y6e=new RegExp("["+Z6+"]","g"),K6="[^"+Z6+"]",j6e="[^"+Z6.replace("\\.","")+"]",$6e=/((?:WC+[\/:])*)/.source.replace("WC",K6),q6e=/(WCOD+)?/.source.replace("WCOD",j6e),X6e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",K6),Z6e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",K6),K6e=new RegExp("^"+$6e+q6e+X6e+Z6e+"$"),J6e=["material","materials","bones","map"];class Q6e{constructor(e,n,s){const a=s||fr.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,a)}getValue(e,n){this.bind();const s=this._targetGroup.nCachedObjects_,a=this._bindings[s];a!==void 0&&a.getValue(e,n)}setValue(e,n){const s=this._bindings;for(let a=this._targetGroup.nCachedObjects_,u=s.length;a!==u;++a)s[a].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=e.length;n!==s;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=e.length;n!==s;++n)e[n].unbind()}}class fr{constructor(e,n,s){this.path=n,this.parsedPath=s||fr.parseTrackName(n),this.node=fr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,s){return e&&e.isAnimationObjectGroup?new fr.Composite(e,n,s):new fr(e,n,s)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Y6e,"")}static parseTrackName(e){const n=K6e.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const s={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},a=s.nodeName&&s.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const u=s.nodeName.substring(a+1);J6e.indexOf(u)!==-1&&(s.nodeName=s.nodeName.substring(0,a),s.objectName=u)}if(s.propertyName===null||s.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return s}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const s=e.skeleton.getBoneByName(n);if(s!==void 0)return s}if(e.children){const s=function(u){for(let d=0;d<u.length;d++){const f=u[d];if(f.name===n||f.uuid===n)return f;const g=s(f.children);if(g)return g}return null},a=s(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const s=this.resolvedProperty;for(let a=0,u=s.length;a!==u;++a)e[n++]=s[a]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const s=this.resolvedProperty;for(let a=0,u=s.length;a!==u;++a)s[a]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const s=this.resolvedProperty;for(let a=0,u=s.length;a!==u;++a)s[a]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const s=this.resolvedProperty;for(let a=0,u=s.length;a!==u;++a)s[a]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,s=n.objectName,a=n.propertyName;let u=n.propertyIndex;if(e||(e=fr.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(s){let _=n.objectIndex;switch(s){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let y=0;y<e.length;y++)if(e[y].name===_){_=y;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[s]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[s]}if(_!==void 0){if(e[_]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[_]}}const d=e[a];if(d===void 0){const _=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+_+"."+a+" but it wasn't found.",e);return}let f=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?f=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(f=this.Versioning.MatrixWorldNeedsUpdate);let g=this.BindingType.Direct;if(u!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[u]!==void 0&&(u=e.morphTargetDictionary[u])}g=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=u}else d.fromArray!==void 0&&d.toArray!==void 0?(g=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(g=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=a;this.getValue=this.GetterByBindingType[g],this.setValue=this.SetterByBindingTypeAndVersioning[g][f]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}fr.Composite=Q6e;fr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};fr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};fr.prototype.GetterByBindingType=[fr.prototype._getValue_direct,fr.prototype._getValue_array,fr.prototype._getValue_arrayElement,fr.prototype._getValue_toArray];fr.prototype.SetterByBindingTypeAndVersioning=[[fr.prototype._setValue_direct,fr.prototype._setValue_direct_setNeedsUpdate,fr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_array,fr.prototype._setValue_array_setNeedsUpdate,fr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_arrayElement,fr.prototype._setValue_arrayElement_setNeedsUpdate,fr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_fromArray,fr.prototype._setValue_fromArray_setNeedsUpdate,fr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class eAe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=il(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let s=0,a=arguments.length;s!==a;++s)e[arguments[s].uuid]=s;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,s=this._paths,a=this._parsedPaths,u=this._bindings,d=u.length;let f,g=e.length,_=this.nCachedObjects_;for(let y=0,w=arguments.length;y!==w;++y){const k=arguments[y],S=k.uuid;let A=n[S];if(A===void 0){A=g++,n[S]=A,e.push(k);for(let P=0,R=d;P!==R;++P)u[P].push(new fr(k,s[P],a[P]))}else if(A<_){f=e[A];const P=--_,R=e[P];n[R.uuid]=A,e[A]=R,n[S]=P,e[P]=k;for(let O=0,B=d;O!==B;++O){const N=u[O],V=N[P];let U=N[A];N[A]=V,U===void 0&&(U=new fr(k,s[O],a[O])),N[P]=U}}else e[A]!==f&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=_}remove(){const e=this._objects,n=this._indicesByUUID,s=this._bindings,a=s.length;let u=this.nCachedObjects_;for(let d=0,f=arguments.length;d!==f;++d){const g=arguments[d],_=g.uuid,y=n[_];if(y!==void 0&&y>=u){const w=u++,k=e[w];n[k.uuid]=y,e[y]=k,n[_]=w,e[w]=g;for(let S=0,A=a;S!==A;++S){const P=s[S],R=P[w],O=P[y];P[y]=R,P[w]=O}}}this.nCachedObjects_=u}uncache(){const e=this._objects,n=this._indicesByUUID,s=this._bindings,a=s.length;let u=this.nCachedObjects_,d=e.length;for(let f=0,g=arguments.length;f!==g;++f){const _=arguments[f],y=_.uuid,w=n[y];if(w!==void 0)if(delete n[y],w<u){const k=--u,S=e[k],A=--d,P=e[A];n[S.uuid]=w,e[w]=S,n[P.uuid]=k,e[k]=P,e.pop();for(let R=0,O=a;R!==O;++R){const B=s[R],N=B[k],V=B[A];B[w]=N,B[k]=V,B.pop()}}else{const k=--d,S=e[k];k>0&&(n[S.uuid]=w),e[w]=S,e.pop();for(let A=0,P=a;A!==P;++A){const R=s[A];R[w]=R[k],R.pop()}}}this.nCachedObjects_=u}subscribe_(e,n){const s=this._bindingsIndicesByPath;let a=s[e];const u=this._bindings;if(a!==void 0)return u[a];const d=this._paths,f=this._parsedPaths,g=this._objects,_=g.length,y=this.nCachedObjects_,w=new Array(_);a=u.length,s[e]=a,d.push(e),f.push(n),u.push(w);for(let k=y,S=g.length;k!==S;++k){const A=g[k];w[k]=new fr(A,e,n)}return w}unsubscribe_(e){const n=this._bindingsIndicesByPath,s=n[e];if(s!==void 0){const a=this._paths,u=this._parsedPaths,d=this._bindings,f=d.length-1,g=d[f],_=e[f];n[_]=s,d[s]=g,d.pop(),u[s]=u[f],u.pop(),a[s]=a[f],a.pop()}}}class tAe{constructor(e,n,s=null,a=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=s,this.blendMode=a;const u=n.tracks,d=u.length,f=new Array(d),g={endingStart:Lp,endingEnd:Lp};for(let _=0;_!==d;++_){const y=u[_].createInterpolant(null);f[_]=y,y.settings=g}this._interpolantSettings=g,this._interpolants=f,this._propertyBindings=new Array(d),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LW,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,s){if(e.fadeOut(n),this.fadeIn(n),s){const a=this._clip.duration,u=e._clip.duration,d=u/a,f=a/u;e.warp(1,d,n),this.warp(f,1,n)}return this}crossFadeTo(e,n,s){return e.crossFadeFrom(this,n,s)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,s){const a=this._mixer,u=a.time,d=this.timeScale;let f=this._timeScaleInterpolant;f===null&&(f=a._lendControlInterpolant(),this._timeScaleInterpolant=f);const g=f.parameterPositions,_=f.sampleValues;return g[0]=u,g[1]=u+s,_[0]=e/d,_[1]=n/d,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,s,a){if(!this.enabled){this._updateWeight(e);return}const u=this._startTime;if(u!==null){const g=(e-u)*s;g<0||s===0?n=0:(this._startTime=null,n=s*g)}n*=this._updateTimeScale(e);const d=this._updateTime(n),f=this._updateWeight(e);if(f>0){const g=this._interpolants,_=this._propertyBindings;switch(this.blendMode){case x6:for(let y=0,w=g.length;y!==w;++y)g[y].evaluate(d),_[y].accumulateAdditive(f);break;case K3:default:for(let y=0,w=g.length;y!==w;++y)g[y].evaluate(d),_[y].accumulate(a,f)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const s=this._weightInterpolant;if(s!==null){const a=s.evaluate(e)[0];n*=a,e>s.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const s=this._timeScaleInterpolant;if(s!==null){const a=s.evaluate(e)[0];n*=a,e>s.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,s=this.loop;let a=this.time+e,u=this._loopCount;const d=s===RW;if(e===0)return u===-1?a:d&&(u&1)===1?n-a:a;if(s===AW){u===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=n)a=n;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(u===-1&&(e>=0?(u=0,this._setEndings(!0,this.repetitions===0,d)):this._setEndings(this.repetitions===0,!0,d)),a>=n||a<0){const f=Math.floor(a/n);a-=n*f,u+=Math.abs(f);const g=this.repetitions-u;if(g<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?n:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(g===1){const _=e<0;this._setEndings(_,!_,d)}else this._setEndings(!1,!1,d);this._loopCount=u,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f})}}else this.time=a;if(d&&(u&1)===1)return n-a}return a}_setEndings(e,n,s){const a=this._interpolantSettings;s?(a.endingStart=Rp,a.endingEnd=Rp):(e?a.endingStart=this.zeroSlopeAtStart?Rp:Lp:a.endingStart=Qy,n?a.endingEnd=this.zeroSlopeAtEnd?Rp:Lp:a.endingEnd=Qy)}_scheduleFading(e,n,s){const a=this._mixer,u=a.time;let d=this._weightInterpolant;d===null&&(d=a._lendControlInterpolant(),this._weightInterpolant=d);const f=d.parameterPositions,g=d.sampleValues;return f[0]=u,g[0]=n,f[1]=u+e,g[1]=s,this}}const nAe=new Float32Array(1);class iAe extends Rh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const s=e._localRoot||this._root,a=e._clip.tracks,u=a.length,d=e._propertyBindings,f=e._interpolants,g=s.uuid,_=this._bindingsByRootAndName;let y=_[g];y===void 0&&(y={},_[g]=y);for(let w=0;w!==u;++w){const k=a[w],S=k.name;let A=y[S];if(A!==void 0)++A.referenceCount,d[w]=A;else{if(A=d[w],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,g,S));continue}const P=n&&n._propertyBindings[w].binding.parsedPath;A=new Bz(fr.create(s,S,P),k.ValueTypeName,k.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,g,S),d[w]=A}f[w].resultBuffer=A.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const s=(e._localRoot||this._root).uuid,a=e._clip.uuid,u=this._actionsByClip[a];this._bindAction(e,u&&u.knownActions[0]),this._addInactiveAction(e,a,s)}const n=e._propertyBindings;for(let s=0,a=n.length;s!==a;++s){const u=n[s];u.useCount++===0&&(this._lendBinding(u),u.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let s=0,a=n.length;s!==a;++s){const u=n[s];--u.useCount===0&&(u.restoreOriginalState(),this._takeBackBinding(u))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,s){const a=this._actions,u=this._actionsByClip;let d=u[n];if(d===void 0)d={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,u[n]=d;else{const f=d.knownActions;e._byClipCacheIndex=f.length,f.push(e)}e._cacheIndex=a.length,a.push(e),d.actionByRoot[s]=e}_removeInactiveAction(e){const n=this._actions,s=n[n.length-1],a=e._cacheIndex;s._cacheIndex=a,n[a]=s,n.pop(),e._cacheIndex=null;const u=e._clip.uuid,d=this._actionsByClip,f=d[u],g=f.knownActions,_=g[g.length-1],y=e._byClipCacheIndex;_._byClipCacheIndex=y,g[y]=_,g.pop(),e._byClipCacheIndex=null;const w=f.actionByRoot,k=(e._localRoot||this._root).uuid;delete w[k],g.length===0&&delete d[u],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let s=0,a=n.length;s!==a;++s){const u=n[s];--u.referenceCount===0&&this._removeInactiveBinding(u)}}_lendAction(e){const n=this._actions,s=e._cacheIndex,a=this._nActiveActions++,u=n[a];e._cacheIndex=a,n[a]=e,u._cacheIndex=s,n[s]=u}_takeBackAction(e){const n=this._actions,s=e._cacheIndex,a=--this._nActiveActions,u=n[a];e._cacheIndex=a,n[a]=e,u._cacheIndex=s,n[s]=u}_addInactiveBinding(e,n,s){const a=this._bindingsByRootAndName,u=this._bindings;let d=a[n];d===void 0&&(d={},a[n]=d),d[s]=e,e._cacheIndex=u.length,u.push(e)}_removeInactiveBinding(e){const n=this._bindings,s=e.binding,a=s.rootNode.uuid,u=s.path,d=this._bindingsByRootAndName,f=d[a],g=n[n.length-1],_=e._cacheIndex;g._cacheIndex=_,n[_]=g,n.pop(),delete f[u],Object.keys(f).length===0&&delete d[a]}_lendBinding(e){const n=this._bindings,s=e._cacheIndex,a=this._nActiveBindings++,u=n[a];e._cacheIndex=a,n[a]=e,u._cacheIndex=s,n[s]=u}_takeBackBinding(e){const n=this._bindings,s=e._cacheIndex,a=--this._nActiveBindings,u=n[a];e._cacheIndex=a,n[a]=e,u._cacheIndex=s,n[s]=u}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let s=e[n];return s===void 0&&(s=new H6(new Float32Array(2),new Float32Array(2),1,nAe),s.__cacheIndex=n,e[n]=s),s}_takeBackControlInterpolant(e){const n=this._controlInterpolants,s=e.__cacheIndex,a=--this._nActiveControlInterpolants,u=n[a];e.__cacheIndex=a,n[a]=e,u.__cacheIndex=s,n[s]=u}clipAction(e,n,s){const a=n||this._root,u=a.uuid;let d=typeof e=="string"?c_.findByName(a,e):e;const f=d!==null?d.uuid:e,g=this._actionsByClip[f];let _=null;if(s===void 0&&(d!==null?s=d.blendMode:s=K3),g!==void 0){const w=g.actionByRoot[u];if(w!==void 0&&w.blendMode===s)return w;_=g.knownActions[0],d===null&&(d=_._clip)}if(d===null)return null;const y=new tAe(this,d,n,s);return this._bindAction(y,_),this._addInactiveAction(y,f,u),y}existingAction(e,n){const s=n||this._root,a=s.uuid,u=typeof e=="string"?c_.findByName(s,e):e,d=u?u.uuid:e,f=this._actionsByClip[d];return f!==void 0&&f.actionByRoot[a]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let s=n-1;s>=0;--s)e[s].stop();return this}update(e){e*=this.timeScale;const n=this._actions,s=this._nActiveActions,a=this.time+=e,u=Math.sign(e),d=this._accuIndex^=1;for(let _=0;_!==s;++_)n[_]._update(a,e,u,d);const f=this._bindings,g=this._nActiveBindings;for(let _=0;_!==g;++_)f[_].apply(d);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,s=e.uuid,a=this._actionsByClip,u=a[s];if(u!==void 0){const d=u.knownActions;for(let f=0,g=d.length;f!==g;++f){const _=d[f];this._deactivateAction(_);const y=_._cacheIndex,w=n[n.length-1];_._cacheIndex=null,_._byClipCacheIndex=null,w._cacheIndex=y,n[y]=w,n.pop(),this._removeInactiveBindingsForAction(_)}delete a[s]}}uncacheRoot(e){const n=e.uuid,s=this._actionsByClip;for(const d in s){const f=s[d].actionByRoot,g=f[n];g!==void 0&&(this._deactivateAction(g),this._removeInactiveAction(g))}const a=this._bindingsByRootAndName,u=a[n];if(u!==void 0)for(const d in u){const f=u[d];f.restoreOriginalState(),this._removeInactiveBinding(f)}}uncacheAction(e,n){const s=this.existingAction(e,n);s!==null&&(this._deactivateAction(s),this._removeInactiveAction(s))}}class J6{constructor(e){this.value=e}clone(){return new J6(this.value.clone===void 0?this.value:this.value.clone())}}let rAe=0;class sAe extends Rh{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:rAe++}),this.name="",this.usage=e_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let s=0,a=n.length;s<a;s++)this.uniforms.push(n[s].clone());return this}clone(){return new this.constructor().copy(this)}}class oAe extends s5{constructor(e,n,s=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class aAe{constructor(e,n,s,a,u){this.isGLBufferAttribute=!0,this.buffer=e,this.type=n,this.itemSize=s,this.elementSize=a,this.count=u,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class lAe{constructor(e,n,s=0,a=1/0){this.ray=new __(e,n),this.near=s,this.far=a,this.camera=null,this.layers=new Q3,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,s=[]){return aM(e,this,s,n),s.sort(VO),s}intersectObjects(e,n=!0,s=[]){for(let a=0,u=e.length;a<u;a++)aM(e[a],this,s,n);return s.sort(VO),s}}function VO(r,e){return r.distance-e.distance}function aM(r,e,n,s){if(r.layers.test(e.layers)&&r.raycast(e,n),s===!0){const a=r.children;for(let u=0,d=a.length;u<d;u++)aM(a[u],e,n,!0)}}class cAe{constructor(e=1,n=0,s=0){return this.radius=e,this.phi=n,this.theta=s,this}set(e,n,s){return this.radius=e,this.phi=n,this.theta=s,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,s){return this.radius=Math.sqrt(e*e+n*n+s*s),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,s),this.phi=Math.acos(Ts(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class uAe{constructor(e=1,n=0,s=0){return this.radius=e,this.theta=n,this.y=s,this}set(e,n,s){return this.radius=e,this.theta=n,this.y=s,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,s){return this.radius=Math.sqrt(e*e+s*s),this.theta=Math.atan2(e,s),this.y=n,this}clone(){return new this.constructor().copy(this)}}const WO=new _n;class hAe{constructor(e=new _n(1/0,1/0),n=new _n(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const s=WO.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return WO.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const zO=new Re,Pw=new Re;class dAe{constructor(e=new Re,n=new Re){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){zO.subVectors(e,this.start),Pw.subVectors(this.end,this.start);const s=Pw.dot(Pw);let u=Pw.dot(zO)/s;return n&&(u=Ts(u,0,1)),u}closestPointToPoint(e,n,s){const a=this.closestPointToPointParameter(e,n);return this.delta(s).multiplyScalar(a).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const UO=new Re;class fAe extends _r{constructor(e,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const s=new ir,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let d=0,f=1,g=32;d<g;d++,f++){const _=d/g*Math.PI*2,y=f/g*Math.PI*2;a.push(Math.cos(_),Math.sin(_),1,Math.cos(y),Math.sin(y),1)}s.setAttribute("position",new ri(a,3));const u=new la({fog:!1,toneMapped:!1});this.cone=new mu(s,u),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),UO.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(UO),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ad=new Re,Iw=new Yi,ME=new Yi;class pAe extends mu{constructor(e){const n=Vz(e),s=new ir,a=[],u=[],d=new qn(0,0,1),f=new qn(0,1,0);for(let _=0;_<n.length;_++){const y=n[_];y.parent&&y.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),u.push(d.r,d.g,d.b),u.push(f.r,f.g,f.b))}s.setAttribute("position",new ri(a,3)),s.setAttribute("color",new ri(u,3));const g=new la({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(s,g),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,s=this.geometry,a=s.getAttribute("position");ME.copy(this.root.matrixWorld).invert();for(let u=0,d=0;u<n.length;u++){const f=n[u];f.parent&&f.parent.isBone&&(Iw.multiplyMatrices(ME,f.matrixWorld),Ad.setFromMatrixPosition(Iw),a.setXYZ(d,Ad.x,Ad.y,Ad.z),Iw.multiplyMatrices(ME,f.parent.matrixWorld),Ad.setFromMatrixPosition(Iw),a.setXYZ(d+1,Ad.x,Ad.y,Ad.z),d+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Vz(r){const e=[];r.isBone===!0&&e.push(r);for(let n=0;n<r.children.length;n++)e.push.apply(e,Vz(r.children[n]));return e}class mAe extends So{constructor(e,n,s){const a=new Fg(n,4,2),u=new nf({wireframe:!0,fog:!1,toneMapped:!1});super(a,u),this.light=e,this.light.updateMatrixWorld(),this.color=s,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const gAe=new Re,GO=new qn,HO=new qn;class vAe extends _r{constructor(e,n,s){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=s;const a=new Og(n);a.rotateY(Math.PI*.5),this.material=new nf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const u=a.getAttribute("position"),d=new Float32Array(u.count*3);a.setAttribute("color",new Wr(d,3)),this.add(new So(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");GO.copy(this.light.color),HO.copy(this.light.groundColor);for(let s=0,a=n.count;s<a;s++){const u=s<a/2?GO:HO;n.setXYZ(s,u.r,u.g,u.b)}n.needsUpdate=!0}e.lookAt(gAe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class yAe extends mu{constructor(e=10,n=10,s=4473924,a=8947848){s=new qn(s),a=new qn(a);const u=n/2,d=e/n,f=e/2,g=[],_=[];for(let k=0,S=0,A=-f;k<=n;k++,A+=d){g.push(-f,0,A,f,0,A),g.push(A,0,-f,A,0,f);const P=k===u?s:a;P.toArray(_,S),S+=3,P.toArray(_,S),S+=3,P.toArray(_,S),S+=3,P.toArray(_,S),S+=3}const y=new ir;y.setAttribute("position",new ri(g,3)),y.setAttribute("color",new ri(_,3));const w=new la({vertexColors:!0,toneMapped:!1});super(y,w),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class _Ae extends mu{constructor(e=10,n=16,s=8,a=64,u=4473924,d=8947848){u=new qn(u),d=new qn(d);const f=[],g=[];if(n>1)for(let w=0;w<n;w++){const k=w/n*(Math.PI*2),S=Math.sin(k)*e,A=Math.cos(k)*e;f.push(0,0,0),f.push(S,0,A);const P=w&1?u:d;g.push(P.r,P.g,P.b),g.push(P.r,P.g,P.b)}for(let w=0;w<s;w++){const k=w&1?u:d,S=e-e/s*w;for(let A=0;A<a;A++){let P=A/a*(Math.PI*2),R=Math.sin(P)*S,O=Math.cos(P)*S;f.push(R,0,O),g.push(k.r,k.g,k.b),P=(A+1)/a*(Math.PI*2),R=Math.sin(P)*S,O=Math.cos(P)*S,f.push(R,0,O),g.push(k.r,k.g,k.b)}}const _=new ir;_.setAttribute("position",new ri(f,3)),_.setAttribute("color",new ri(g,3));const y=new la({vertexColors:!0,toneMapped:!1});super(_,y),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const YO=new Re,Dw=new Re,jO=new Re;class bAe extends _r{constructor(e,n,s){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,n===void 0&&(n=1);let a=new ir;a.setAttribute("position",new ri([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const u=new la({fog:!1,toneMapped:!1});this.lightPlane=new Kd(a,u),this.add(this.lightPlane),a=new ir,a.setAttribute("position",new ri([0,0,0,0,0,1],3)),this.targetLine=new Kd(a,u),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){YO.setFromMatrixPosition(this.light.matrixWorld),Dw.setFromMatrixPosition(this.light.target.matrixWorld),jO.subVectors(Dw,YO),this.lightPlane.lookAt(Dw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Dw),this.targetLine.scale.z=jO.length()}}const Nw=new Re,ys=new e5;class xAe extends mu{constructor(e){const n=new ir,s=new la({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],u=[],d={};f("n1","n2"),f("n2","n4"),f("n4","n3"),f("n3","n1"),f("f1","f2"),f("f2","f4"),f("f4","f3"),f("f3","f1"),f("n1","f1"),f("n2","f2"),f("n3","f3"),f("n4","f4"),f("p","n1"),f("p","n2"),f("p","n3"),f("p","n4"),f("u1","u2"),f("u2","u3"),f("u3","u1"),f("c","t"),f("p","c"),f("cn1","cn2"),f("cn3","cn4"),f("cf1","cf2"),f("cf3","cf4");function f(A,P){g(A),g(P)}function g(A){a.push(0,0,0),u.push(0,0,0),d[A]===void 0&&(d[A]=[]),d[A].push(a.length/3-1)}n.setAttribute("position",new ri(a,3)),n.setAttribute("color",new ri(u,3)),super(n,s),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update();const _=new qn(16755200),y=new qn(16711680),w=new qn(43775),k=new qn(16777215),S=new qn(3355443);this.setColors(_,y,w,k,S)}setColors(e,n,s,a,u){const f=this.geometry.getAttribute("color");f.setXYZ(0,e.r,e.g,e.b),f.setXYZ(1,e.r,e.g,e.b),f.setXYZ(2,e.r,e.g,e.b),f.setXYZ(3,e.r,e.g,e.b),f.setXYZ(4,e.r,e.g,e.b),f.setXYZ(5,e.r,e.g,e.b),f.setXYZ(6,e.r,e.g,e.b),f.setXYZ(7,e.r,e.g,e.b),f.setXYZ(8,e.r,e.g,e.b),f.setXYZ(9,e.r,e.g,e.b),f.setXYZ(10,e.r,e.g,e.b),f.setXYZ(11,e.r,e.g,e.b),f.setXYZ(12,e.r,e.g,e.b),f.setXYZ(13,e.r,e.g,e.b),f.setXYZ(14,e.r,e.g,e.b),f.setXYZ(15,e.r,e.g,e.b),f.setXYZ(16,e.r,e.g,e.b),f.setXYZ(17,e.r,e.g,e.b),f.setXYZ(18,e.r,e.g,e.b),f.setXYZ(19,e.r,e.g,e.b),f.setXYZ(20,e.r,e.g,e.b),f.setXYZ(21,e.r,e.g,e.b),f.setXYZ(22,e.r,e.g,e.b),f.setXYZ(23,e.r,e.g,e.b),f.setXYZ(24,n.r,n.g,n.b),f.setXYZ(25,n.r,n.g,n.b),f.setXYZ(26,n.r,n.g,n.b),f.setXYZ(27,n.r,n.g,n.b),f.setXYZ(28,n.r,n.g,n.b),f.setXYZ(29,n.r,n.g,n.b),f.setXYZ(30,n.r,n.g,n.b),f.setXYZ(31,n.r,n.g,n.b),f.setXYZ(32,s.r,s.g,s.b),f.setXYZ(33,s.r,s.g,s.b),f.setXYZ(34,s.r,s.g,s.b),f.setXYZ(35,s.r,s.g,s.b),f.setXYZ(36,s.r,s.g,s.b),f.setXYZ(37,s.r,s.g,s.b),f.setXYZ(38,a.r,a.g,a.b),f.setXYZ(39,a.r,a.g,a.b),f.setXYZ(40,u.r,u.g,u.b),f.setXYZ(41,u.r,u.g,u.b),f.setXYZ(42,u.r,u.g,u.b),f.setXYZ(43,u.r,u.g,u.b),f.setXYZ(44,u.r,u.g,u.b),f.setXYZ(45,u.r,u.g,u.b),f.setXYZ(46,u.r,u.g,u.b),f.setXYZ(47,u.r,u.g,u.b),f.setXYZ(48,u.r,u.g,u.b),f.setXYZ(49,u.r,u.g,u.b),f.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,s=1,a=1;ys.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ss("c",n,e,ys,0,0,-1),Ss("t",n,e,ys,0,0,1),Ss("n1",n,e,ys,-s,-a,-1),Ss("n2",n,e,ys,s,-a,-1),Ss("n3",n,e,ys,-s,a,-1),Ss("n4",n,e,ys,s,a,-1),Ss("f1",n,e,ys,-s,-a,1),Ss("f2",n,e,ys,s,-a,1),Ss("f3",n,e,ys,-s,a,1),Ss("f4",n,e,ys,s,a,1),Ss("u1",n,e,ys,s*.7,a*1.1,-1),Ss("u2",n,e,ys,-s*.7,a*1.1,-1),Ss("u3",n,e,ys,0,a*2,-1),Ss("cf1",n,e,ys,-s,0,1),Ss("cf2",n,e,ys,s,0,1),Ss("cf3",n,e,ys,0,-a,1),Ss("cf4",n,e,ys,0,a,1),Ss("cn1",n,e,ys,-s,0,-1),Ss("cn2",n,e,ys,s,0,-1),Ss("cn3",n,e,ys,0,-a,-1),Ss("cn4",n,e,ys,0,a,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ss(r,e,n,s,a,u,d){Nw.set(a,u,d).unproject(s);const f=e[r];if(f!==void 0){const g=n.getAttribute("position");for(let _=0,y=f.length;_<y;_++)g.setXYZ(f[_],Nw.x,Nw.y,Nw.z)}}const Ow=new Qp;class wAe extends mu{constructor(e,n=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(8*3),u=new ir;u.setIndex(new Wr(s,1)),u.setAttribute("position",new Wr(a,3)),super(u,new la({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Ow.setFromObject(this.object),Ow.isEmpty())return;const n=Ow.min,s=Ow.max,a=this.geometry.attributes.position,u=a.array;u[0]=s.x,u[1]=s.y,u[2]=s.z,u[3]=n.x,u[4]=s.y,u[5]=s.z,u[6]=n.x,u[7]=n.y,u[8]=s.z,u[9]=s.x,u[10]=n.y,u[11]=s.z,u[12]=s.x,u[13]=s.y,u[14]=n.z,u[15]=n.x,u[16]=s.y,u[17]=n.z,u[18]=n.x,u[19]=n.y,u[20]=n.z,u[21]=s.x,u[22]=n.y,u[23]=n.z,a.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class kAe extends mu{constructor(e,n=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],u=new ir;u.setIndex(new Wr(s,1)),u.setAttribute("position",new ri(a,3)),super(u,new la({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class CAe extends Kd{constructor(e,n=1,s=16776960){const a=s,u=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],d=new ir;d.setAttribute("position",new ri(u,3)),d.computeBoundingSphere(),super(d,new la({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const f=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],g=new ir;g.setAttribute("position",new ri(f,3)),g.computeBoundingSphere(),this.add(new So(g,new nf({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const $O=new Re;let Fw,AE;class SAe extends _r{constructor(e=new Re(0,0,1),n=new Re(0,0,0),s=1,a=16776960,u=s*.2,d=u*.2){super(),this.type="ArrowHelper",Fw===void 0&&(Fw=new ir,Fw.setAttribute("position",new ri([0,0,0,0,1,0],3)),AE=new tm(0,.5,1,5,1),AE.translate(0,-.5,0)),this.position.copy(n),this.line=new Kd(Fw,new la({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new So(AE,new nf({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(s,u,d)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$O.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle($O,n)}}setLength(e,n=e*.2,s=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(s,n,s),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class EAe extends mu{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],s=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new ir;a.setAttribute("position",new ri(n,3)),a.setAttribute("color",new ri(s,3));const u=new la({vertexColors:!0,toneMapped:!1});super(a,u),this.type="AxesHelper"}setColors(e,n,s){const a=new qn,u=this.geometry.attributes.color.array;return a.set(e),a.toArray(u,0),a.toArray(u,3),a.set(n),a.toArray(u,6),a.toArray(u,9),a.set(s),a.toArray(u,12),a.toArray(u,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class TAe{constructor(){this.type="ShapePath",this.color=new qn,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new i_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,s,a){return this.currentPath.quadraticCurveTo(e,n,s,a),this}bezierCurveTo(e,n,s,a,u,d){return this.currentPath.bezierCurveTo(e,n,s,a,u,d),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(O){const B=[];for(let N=0,V=O.length;N<V;N++){const U=O[N],Y=new zp;Y.curves=U.curves,B.push(Y)}return B}function s(O,B){const N=B.length;let V=!1;for(let U=N-1,Y=0;Y<N;U=Y++){let X=B[U],$=B[Y],ee=$.x-X.x,ue=$.y-X.y;if(Math.abs(ue)>Number.EPSILON){if(ue<0&&(X=B[Y],ee=-ee,$=B[U],ue=-ue),O.y<X.y||O.y>$.y)continue;if(O.y===X.y){if(O.x===X.x)return!0}else{const Te=ue*(O.x-X.x)-ee*(O.y-X.y);if(Te===0)return!0;if(Te<0)continue;V=!V}}else{if(O.y!==X.y)continue;if($.x<=O.x&&O.x<=X.x||X.x<=O.x&&O.x<=$.x)return!0}}return V}const a=cu.isClockWise,u=this.subPaths;if(u.length===0)return[];let d,f,g;const _=[];if(u.length===1)return f=u[0],g=new zp,g.curves=f.curves,_.push(g),_;let y=!a(u[0].getPoints());y=e?!y:y;const w=[],k=[];let S=[],A=0,P;k[A]=void 0,S[A]=[];for(let O=0,B=u.length;O<B;O++)f=u[O],P=f.getPoints(),d=a(P),d=e?!d:d,d?(!y&&k[A]&&A++,k[A]={s:new zp,p:P},k[A].s.curves=f.curves,y&&A++,S[A]=[]):S[A].push({h:f,p:P[0]});if(!k[0])return n(u);if(k.length>1){let O=!1,B=0;for(let N=0,V=k.length;N<V;N++)w[N]=[];for(let N=0,V=k.length;N<V;N++){const U=S[N];for(let Y=0;Y<U.length;Y++){const X=U[Y];let $=!0;for(let ee=0;ee<k.length;ee++)s(X.p,k[ee].p)&&(N!==ee&&B++,$?($=!1,w[ee].push(X)):O=!0);$&&w[N].push(X)}}B>0&&O===!1&&(S=w)}let R;for(let O=0,B=k.length;O<B;O++){g=k[O].s,_.push(g),R=S[O];for(let N=0,V=R.length;N<V;N++)g.holes.push(R[N].h)}return _}}const gh=MAe();function MAe(){const r=new ArrayBuffer(4),e=new Float32Array(r),n=new Uint32Array(r),s=new Uint32Array(512),a=new Uint32Array(512);for(let g=0;g<256;++g){const _=g-127;_<-27?(s[g]=0,s[g|256]=32768,a[g]=24,a[g|256]=24):_<-14?(s[g]=1024>>-_-14,s[g|256]=1024>>-_-14|32768,a[g]=-_-1,a[g|256]=-_-1):_<=15?(s[g]=_+15<<10,s[g|256]=_+15<<10|32768,a[g]=13,a[g|256]=13):_<128?(s[g]=31744,s[g|256]=64512,a[g]=24,a[g|256]=24):(s[g]=31744,s[g|256]=64512,a[g]=13,a[g|256]=13)}const u=new Uint32Array(2048),d=new Uint32Array(64),f=new Uint32Array(64);for(let g=1;g<1024;++g){let _=g<<13,y=0;for(;(_&8388608)===0;)_<<=1,y-=8388608;_&=-8388609,y+=947912704,u[g]=_|y}for(let g=1024;g<2048;++g)u[g]=939524096+(g-1024<<13);for(let g=1;g<31;++g)d[g]=g<<23;d[31]=1199570944,d[32]=2147483648;for(let g=33;g<63;++g)d[g]=2147483648+(g-32<<23);d[63]=3347054592;for(let g=1;g<64;++g)g!==32&&(f[g]=1024);return{floatView:e,uint32View:n,baseTable:s,shiftTable:a,mantissaTable:u,exponentTable:d,offsetTable:f}}function AAe(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Ts(r,-65504,65504),gh.floatView[0]=r;const e=gh.uint32View[0],n=e>>23&511;return gh.baseTable[n]+((e&8388607)>>gh.shiftTable[n])}function LAe(r){const e=r>>10;return gh.uint32View[0]=gh.mantissaTable[gh.offsetTable[e]+(r&1023)]+gh.exponentTable[e],gh.floatView[0]}var RAe=Object.freeze({__proto__:null,toHalfFloat:AAe,fromHalfFloat:LAe});function PAe(){console.error("THREE.ImmediateRenderObject has been removed.")}class IAe extends Tl{constructor(e,n,s){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,n,s),this.samples=4}}class DAe extends y_{constructor(e,n,s,a){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,n,s,a)}}class NAe extends J3{constructor(e,n,s,a){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,n,s,a)}}class OAe extends rf{constructor(e,n,s,a,u,d){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,s,a,u,d)}}class FAe extends w_{constructor(e,n,s,a){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,s,a)}}class BAe extends k_{constructor(e,n,s,a){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,s,a)}}class VAe extends C_{constructor(e,n,s,a,u,d,f){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,s,a,u,d,f)}}class WAe extends tm{constructor(e,n,s,a,u,d,f,g){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,s,a,u,d,f,g)}}class zAe extends S_{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class UAe extends E_{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class GAe extends T_{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class HAe extends Ng{constructor(e,n,s,a){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,s,a)}}class YAe extends Og{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class jAe extends Ig{constructor(e,n,s,a){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,s,a)}}class $Ae extends Ph{constructor(e,n,s,a){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,s,a)}}class qAe extends M_{constructor(e,n,s,a,u,d){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,s,a,u,d)}}class XAe extends A_{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class ZAe extends Fg{constructor(e,n,s,a,u,d,f){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,s,a,u,d,f)}}class KAe extends L_{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class JAe extends R_{constructor(e,n,s,a,u){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,s,a,u)}}class QAe extends P_{constructor(e,n,s,a,u,d){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,s,a,u,d)}}class e8e extends I_{constructor(e,n,s,a,u){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,s,a,u)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:X3}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=X3);const t8e=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:dW,AddEquation:Sp,AddOperation:lW,AdditiveAnimationBlendMode:x6,AdditiveBlending:ET,AlphaFormat:_W,AlwaysDepth:tW,AlwaysStencilFunc:NW,AmbientLight:Pz,AmbientLightProbe:B6e,AnimationClip:c_,AnimationLoader:S6e,AnimationMixer:iAe,AnimationObjectGroup:eAe,AnimationUtils:x6e,ArcCurve:rz,ArrayCamera:qW,ArrowHelper:SAe,Audio:Fz,AudioAnalyser:H6e,AudioContext:q6,AudioListener:z6e,AudioLoader:O6e,AxesHelper:EAe,BackSide:nl,BasicDepthPacking:PW,BasicShadowMap:$ke,Bone:P6,BooleanKeyframeTrack:nm,Box2:hAe,Box3:Qp,Box3Helper:kAe,BoxBufferGeometry:OAe,BoxGeometry:rf,BoxHelper:wAe,BufferAttribute:Wr,BufferGeometry:ir,BufferGeometryLoader:Oz,ByteType:pW,Cache:$p,Camera:e5,CameraHelper:xAe,CanvasTexture:YMe,CapsuleBufferGeometry:FAe,CapsuleGeometry:w_,CatmullRomCurve3:sz,CineonToneMapping:hW,CircleBufferGeometry:BAe,CircleGeometry:k_,ClampToEdgeWrapping:Uo,Clock:X6,Color:qn,ColorKeyframeTrack:Y6,ColorManagement:bl,CompressedArrayTexture:HMe,CompressedTexture:D6,CompressedTextureLoader:E6e,ConeBufferGeometry:VAe,ConeGeometry:C_,CubeCamera:WW,CubeReflectionMapping:$d,CubeRefractionMapping:qd,CubeTexture:b_,CubeTextureLoader:T6e,CubeUVReflectionMapping:Rg,CubicBezierCurve:O6,CubicBezierCurve3:oz,CubicInterpolant:Cz,CullFaceBack:ST,CullFaceFront:zV,CullFaceFrontBack:jke,CullFaceNone:WV,Curve:xc,CurvePath:lz,CustomBlending:UV,CustomToneMapping:fW,CylinderBufferGeometry:WAe,CylinderGeometry:tm,Cylindrical:uAe,Data3DTexture:J3,DataArrayTexture:y_,DataTexture:gg,DataTexture2DArray:DAe,DataTexture3D:NAe,DataTextureLoader:M6e,DataUtils:RAe,DecrementStencilOp:s4e,DecrementWrapStencilOp:a4e,DefaultLoadingManager:Tz,DepthFormat:Gd,DepthStencilFormat:Hp,DepthTexture:XW,DirectionalLight:Rz,DirectionalLightHelper:bAe,DiscreteInterpolant:Sz,DodecahedronBufferGeometry:zAe,DodecahedronGeometry:S_,DoubleSide:yh,DstAlphaFactor:XV,DstColorFactor:KV,DynamicCopyUsage:w4e,DynamicDrawUsage:g4e,DynamicReadUsage:_4e,EdgesGeometry:cz,EllipseCurve:a5,EqualDepth:iW,EqualStencilFunc:h4e,EquirectangularReflectionMapping:$y,EquirectangularRefractionMapping:qy,Euler:Pg,EventDispatcher:Rh,ExtrudeBufferGeometry:UAe,ExtrudeGeometry:E_,FileLoader:Th,Float16BufferAttribute:iCe,Float32BufferAttribute:ri,Float64BufferAttribute:rCe,FloatType:_h,Fog:r5,FogExp2:i5,FramebufferTexture:GMe,FrontSide:Gp,Frustum:t5,GLBufferAttribute:aAe,GLSL1:C4e,GLSL3:JT,GreaterDepth:sW,GreaterEqualDepth:rW,GreaterEqualStencilFunc:m4e,GreaterStencilFunc:f4e,GridHelper:yAe,Group:rg,HalfFloatType:Cg,HemisphereLight:Mz,HemisphereLightHelper:vAe,HemisphereLightProbe:F6e,IcosahedronBufferGeometry:GAe,IcosahedronGeometry:T_,ImageBitmapLoader:N6e,ImageLoader:u_,ImageUtils:k6,ImmediateRenderObject:PAe,IncrementStencilOp:r4e,IncrementWrapStencilOp:o4e,InstancedBufferAttribute:Eg,InstancedBufferGeometry:Nz,InstancedInterleavedBuffer:oAe,InstancedMesh:tz,Int16BufferAttribute:tCe,Int32BufferAttribute:nCe,Int8BufferAttribute:J4e,IntType:gW,InterleavedBuffer:s5,InterleavedBufferAttribute:Yp,Interpolant:D_,InterpolateDiscrete:Ky,InterpolateLinear:Jy,InterpolateSmooth:e3,InvertStencilOp:l4e,KeepStencilOp:t3,KeyframeTrack:wc,LOD:QW,LatheBufferGeometry:HAe,LatheGeometry:Ng,Layers:Q3,LessDepth:nW,LessEqualDepth:x3,LessEqualStencilFunc:d4e,LessStencilFunc:u4e,Light:sf,LightProbe:u5,Line:Kd,Line3:dAe,LineBasicMaterial:la,LineCurve:l5,LineCurve3:az,LineDashedMaterial:wz,LineLoop:nz,LineSegments:mu,LinearEncoding:Zd,LinearFilter:Es,LinearInterpolant:H6,LinearMipMapLinearFilter:Kke,LinearMipMapNearestFilter:Zke,LinearMipmapLinearFilter:Jp,LinearMipmapNearestFilter:_6,LinearSRGBColorSpace:Dd,LinearToneMapping:cW,Loader:rl,LoaderUtils:oM,LoadingManager:j6,LoopOnce:AW,LoopPingPong:RW,LoopRepeat:LW,LuminanceAlphaFormat:wW,LuminanceFormat:xW,MOUSE:Hke,Material:Ho,MaterialLoader:h5,MathUtils:B4e,Matrix3:Ca,Matrix4:Yi,MaxEquation:LT,Mesh:So,MeshBasicMaterial:nf,MeshDepthMaterial:T6,MeshDistanceMaterial:M6,MeshLambertMaterial:bz,MeshMatcapMaterial:xz,MeshNormalMaterial:_z,MeshPhongMaterial:vz,MeshPhysicalMaterial:gz,MeshStandardMaterial:z6,MeshToonMaterial:yz,MinEquation:AT,MirroredRepeatWrapping:Zy,MixOperation:aW,MultiplyBlending:MT,MultiplyOperation:v_,NearestFilter:Ws,NearestMipMapLinearFilter:Xke,NearestMipMapNearestFilter:qke,NearestMipmapLinearFilter:k3,NearestMipmapNearestFilter:w3,NeverDepth:eW,NeverStencilFunc:c4e,NoBlending:xh,NoColorSpace:t4e,NoToneMapping:lu,NormalAnimationBlendMode:K3,NormalBlending:Fp,NotEqualDepth:oW,NotEqualStencilFunc:p4e,NumberKeyframeTrack:a_,Object3D:_r,ObjectLoader:I6e,ObjectSpaceNormalMap:DW,OctahedronBufferGeometry:YAe,OctahedronGeometry:Og,OneFactor:jV,OneMinusDstAlphaFactor:ZV,OneMinusDstColorFactor:JV,OneMinusSrcAlphaFactor:y6,OneMinusSrcColorFactor:qV,OrthographicCamera:x_,PCFShadowMap:m6,PCFSoftShadowMap:g6,PMREMGenerator:eM,Path:i_,PerspectiveCamera:zs,Plane:Pd,PlaneBufferGeometry:jAe,PlaneGeometry:Ig,PlaneHelper:CAe,PointLight:Lz,PointLightHelper:mAe,Points:iz,PointsMaterial:I6,PolarGridHelper:_Ae,PolyhedronBufferGeometry:$Ae,PolyhedronGeometry:Ph,PositionalAudio:G6e,PropertyBinding:fr,PropertyMixer:Bz,QuadraticBezierCurve:F6,QuadraticBezierCurve3:B6,Quaternion:Ea,QuaternionKeyframeTrack:Bg,QuaternionLinearInterpolant:Ez,REVISION:X3,RGBADepthPacking:IW,RGBAFormat:Qa,RGBAIntegerFormat:TW,RGBA_ASTC_10x10_Format:qT,RGBA_ASTC_10x5_Format:YT,RGBA_ASTC_10x6_Format:jT,RGBA_ASTC_10x8_Format:$T,RGBA_ASTC_12x10_Format:XT,RGBA_ASTC_12x12_Format:ZT,RGBA_ASTC_4x4_Format:FT,RGBA_ASTC_5x4_Format:BT,RGBA_ASTC_5x5_Format:VT,RGBA_ASTC_6x5_Format:WT,RGBA_ASTC_6x6_Format:zT,RGBA_ASTC_8x5_Format:UT,RGBA_ASTC_8x6_Format:GT,RGBA_ASTC_8x8_Format:HT,RGBA_BPTC_Format:KT,RGBA_ETC2_EAC_Format:OT,RGBA_PVRTC_2BPPV1_Format:DT,RGBA_PVRTC_4BPPV1_Format:IT,RGBA_S3TC_DXT1_Format:Kw,RGBA_S3TC_DXT3_Format:Jw,RGBA_S3TC_DXT5_Format:Qw,RGBFormat:bW,RGB_ETC1_Format:MW,RGB_ETC2_Format:NT,RGB_PVRTC_2BPPV1_Format:PT,RGB_PVRTC_4BPPV1_Format:RT,RGB_S3TC_DXT1_Format:Zw,RGFormat:SW,RGIntegerFormat:EW,RawShaderMaterial:mz,Ray:__,Raycaster:lAe,RectAreaLight:Iz,RedFormat:kW,RedIntegerFormat:CW,ReinhardToneMapping:uW,RepeatWrapping:Xy,ReplaceStencilOp:i4e,ReverseSubtractEquation:HV,RingBufferGeometry:qAe,RingGeometry:M_,SRGBColorSpace:nu,Scene:L6,ShaderChunk:Ji,ShaderLib:fc,ShaderMaterial:fu,ShadowMaterial:pz,Shape:zp,ShapeBufferGeometry:XAe,ShapeGeometry:A_,ShapePath:TAe,ShapeUtils:cu,ShortType:mW,Skeleton:o5,SkeletonHelper:pAe,SkinnedMesh:ez,Source:Pp,Sphere:em,SphereBufferGeometry:ZAe,SphereGeometry:Fg,Spherical:cAe,SphericalHarmonics3:Dz,SplineCurve:V6,SpotLight:Az,SpotLightHelper:fAe,Sprite:JW,SpriteMaterial:R6,SrcAlphaFactor:v6,SrcAlphaSaturateFactor:QV,SrcColorFactor:$V,StaticCopyUsage:x4e,StaticDrawUsage:e_,StaticReadUsage:y4e,StereoCamera:V6e,StreamCopyUsage:k4e,StreamDrawUsage:v4e,StreamReadUsage:b4e,StringKeyframeTrack:im,SubtractEquation:GV,SubtractiveBlending:TT,TOUCH:Yke,TangentSpaceNormalMap:tf,TetrahedronBufferGeometry:KAe,TetrahedronGeometry:L_,Texture:to,TextureLoader:A6e,TorusBufferGeometry:JAe,TorusGeometry:R_,TorusKnotBufferGeometry:QAe,TorusKnotGeometry:P_,Triangle:Cl,TriangleFanDrawMode:e4e,TriangleStripDrawMode:Qke,TrianglesDrawMode:Jke,TubeBufferGeometry:e8e,TubeGeometry:I_,UVMapping:Z3,Uint16BufferAttribute:C6,Uint32BufferAttribute:S6,Uint8BufferAttribute:Q4e,Uint8ClampedBufferAttribute:eCe,Uniform:J6,UniformsGroup:sAe,UniformsLib:Fn,UniformsUtils:VW,UnsignedByteType:Xd,UnsignedInt248Type:Bp,UnsignedIntType:Id,UnsignedShort4444Type:vW,UnsignedShort5551Type:yW,UnsignedShortType:b6,VSMShadowMap:tg,Vector2:_n,Vector3:Re,Vector4:Ar,VectorKeyframeTrack:l_,VideoTexture:UMe,WebGL1Renderer:ZW,WebGL3DRenderTarget:U4e,WebGLArrayRenderTarget:z4e,WebGLCubeRenderTarget:zW,WebGLMultipleRenderTargets:G4e,WebGLMultisampleRenderTarget:IAe,WebGLRenderTarget:Tl,WebGLRenderer:A6,WebGLUtils:$W,WireframeGeometry:fz,WrapAroundEnding:Qy,ZeroCurvatureEnding:Lp,ZeroFactor:YV,ZeroSlopeEnding:Rp,ZeroStencilOp:n4e,_SRGBAFormat:C3,sRGBEncoding:as},Symbol.toStringTag,{value:"Module"}));function n8e(r,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in r)){const u=Object.getOwnPropertyDescriptor(s,a);u&&Object.defineProperty(r,a,u.get?u:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}var py=(r=>(r.Perspective="Perspective",r.Orthographic="Orthographic",r))(py||{});const cy={cameras:[]},i8e=45;let Z0;function Q6(){const{width:r,height:e}=ZM();function n(f="Perspective",g){if(f==="Perspective"){const{near:_,far:y,fov:w}=g||{near:.1,far:1e3,fov:i8e};Z0=new zs(w,s.value,_,y),cy.cameras.push(Z0)}else{const{left:_,right:y,top:w,bottom:k,near:S,far:A}=g||{left:-100,right:100,top:100,bottom:-100,near:.1,far:1e3};Z0=new x_(_,y,w,k,S,A),cy.cameras.push(Z0)}return cy.cameras.push(Z0),Z0}const s=Ht(()=>r.value/e.value),a=Ht(()=>cy.cameras[0]);function u(){a.value instanceof zs&&(a.value.aspect=s.value),a.value.updateProjectionMatrix()}function d(f){cy.cameras.push(f),f instanceof zs&&(f.aspect=s.value),f.updateProjectionMatrix()}return Ni(s,u),{activeCamera:a,createCamera:n,updateCamera:u,pushCamera:d}}let LE={...t8e};function r8e(){return{extend:r=>{LE=Object.assign(LE,r)},catalogue:LE}}const s8e=r=>typeof r<"u",o8e=r=>!!r&&r.constructor===Array;function Wz(r){return typeof r=="number"?[r,r,r]:r instanceof Re?[r.x,r.y,r.z]:r}function a8e(r){return r instanceof qn?r:Array.isArray(r)?new qn(...r):new qn(r)}const qO="[TresJS \u25B2 \u25A0 \u25CF] ";function eA(){function r(s,a){console.error(`${qO} ${s}`,a)}function e(s){console.warn(`${qO} ${s}`)}function n(s,a){}return{logError:r,logWarning:e,logMessage:n}}const Bw=new L6,RE=Tn(!1);function d5(){const{logMessage:r}=eA();function e(){Bw==null||Bw.clear(),RE.value=!RE.value,r("clear Scene",Bw)}return{isSceneReset:RE,clearScene:e,scene:Bw}}const l8e=["rotation","scale","position"];function c8e(){const{catalogue:r}=r8e(),{logMessage:e,logError:n}=eA();function s(){return Object.entries(r).filter(([a,u])=>{var d,f;return(f=(d=u==null?void 0:u.prototype)==null?void 0:d.constructor)==null?void 0:f.toString().includes("class")}).map(([a,u])=>{const d=yi({name:a,setup(f,{slots:g,attrs:_,...y}){e(a,{props:f,slots:g,attrs:_,ctx:y});let w;const{scene:k}=d5(),{pushCamera:S}=Q6();function A(){if((g==null?void 0:g.default)&&(g==null?void 0:g.default())){const R=g.default().map(O=>{var B;let N;return(B=O==null?void 0:O.props)!=null&&B.args?N=new r[O.type.name](...O.props.args):N=new r[O.type.name],O!=null&&O.props&&P(O.props,N),N});w=new u(...R)}else _.args?w=new u(..._.args):w=new u;P(_,w),a==="PerspectiveCamera"||a==="OrtographicCamera"?S(w):k==null||k.add(w),e("Instance added",k),y.expose(w)}function P(R,O){Object.entries(R).forEach(([B,N])=>{const V=B.replace(/(-\w)/g,U=>U[1].toUpperCase());if(!(V==="args"||N===void 0)){l8e.includes(B)&&N&&(N=Wz(N));try{O[V]&&s8e(O[V].set)?o8e(N)?O[V].set(...N):O[V].set(N):(N===""&&(N=!0),O[V]=N)}catch(U){n(`There was an error setting ${V} property`,U)}}}),R.ref&&(R.ref=O)}return A(),()=>{}}});return[a,d]})}return{createComponentInstances:s}}let XO;function ZO(r,e,n){const s=new X6,{scene:a}=d5(),u=()=>{const f=s.getElapsedTime(),g=s.getDelta();a&&(e&&e(g,f),r(g,f),n&&n(g,f)),XO=requestAnimationFrame(u)};u();function d(){cancelAnimationFrame(XO)}return{disposeLoop:d}}const Vw=Yr({});function zz(){function r(n){return Vw[n]}function e(n,s){Vw[n]=s}return{state:Vw,...XF(Vw),getState:r,setState:e}}var Uz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function u8e(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var KO={exports:{}};/*! Tweakpane 3.1.0 (c) 2016 cocopon, licensed under the MIT license. */(function(r,e){(function(n,s){s(e)})(Uz,function(n){class s{constructor(v){const[C,z]=v.split("-"),ae=C.split(".");this.major=parseInt(ae[0],10),this.minor=parseInt(ae[1],10),this.patch=parseInt(ae[2],10),this.prerelease=z!=null?z:null}toString(){const v=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[v,this.prerelease].join("-"):v}}class a{constructor(v){this.controller_=v}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(v){this.controller_.viewProps.set("disabled",v)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(v){this.controller_.viewProps.set("hidden",v)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class u{constructor(v){this.target=v}}class d extends u{constructor(v,C,z,ae){super(v),this.value=C,this.presetKey=z,this.last=ae!=null?ae:!0}}class f extends u{constructor(v,C,z){super(v),this.value=C,this.presetKey=z}}class g extends u{constructor(v,C){super(v),this.expanded=C}}class _ extends u{constructor(v,C){super(v),this.index=C}}function y(T){return T==null}function w(T,v){if(T.length!==v.length)return!1;for(let C=0;C<T.length;C++)if(T[C]!==v[C])return!1;return!0}const k={alreadydisposed:()=>"View has been already disposed",invalidparams:T=>`Invalid parameters for '${T.name}'`,nomatchingcontroller:T=>`No matching controller for '${T.key}'`,nomatchingview:T=>`No matching view for '${JSON.stringify(T.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:T=>`Property '${T.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class S{constructor(v){var C;this.message=(C=k[v.type](v.context))!==null&&C!==void 0?C:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=v.type}static alreadyDisposed(){return new S({type:"alreadydisposed"})}static notBindable(){return new S({type:"notbindable"})}static propertyNotFound(v){return new S({type:"propertynotfound",context:{name:v}})}static shouldNeverHappen(){return new S({type:"shouldneverhappen"})}}class A{constructor(v,C,z){this.obj_=v,this.key_=C,this.presetKey_=z!=null?z:C}static isBindable(v){return!(v===null||typeof v!="object")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(v){this.obj_[this.key_]=v}writeProperty(v,C){const z=this.read();if(!A.isBindable(z))throw S.notBindable();if(!(v in z))throw S.propertyNotFound(v);z[v]=C}}class P extends a{get label(){return this.controller_.props.get("label")}set label(v){this.controller_.props.set("label",v)}get title(){var v;return(v=this.controller_.valueController.props.get("title"))!==null&&v!==void 0?v:""}set title(v){this.controller_.valueController.props.set("title",v)}on(v,C){const z=C.bind(this);return this.controller_.valueController.emitter.on(v,()=>{z(new u(this))}),this}}class R{constructor(){this.observers_={}}on(v,C){let z=this.observers_[v];return z||(z=this.observers_[v]=[]),z.push({handler:C}),this}off(v,C){const z=this.observers_[v];return z&&(this.observers_[v]=z.filter(ae=>ae.handler!==C)),this}emit(v,C){const z=this.observers_[v];!z||z.forEach(ae=>{ae.handler(C)})}}const O="tp";function B(T){return(v,C)=>[O,"-",T,"v",v?`_${v}`:"",C?`-${C}`:""].join("")}function N(T,v){return C=>v(T(C))}function V(T){return T.rawValue}function U(T,v){T.emitter.on("change",N(V,v)),v(T.rawValue)}function Y(T,v,C){U(T.value(v),C)}function X(T,v,C){C?T.classList.add(v):T.classList.remove(v)}function $(T,v){return C=>{X(T,v,C)}}function ee(T,v){U(T,C=>{v.textContent=C!=null?C:""})}const ue=B("btn");class Te{constructor(v,C){this.element=v.createElement("div"),this.element.classList.add(ue()),C.viewProps.bindClassModifiers(this.element);const z=v.createElement("button");z.classList.add(ue("b")),C.viewProps.bindDisabled(z),this.element.appendChild(z),this.buttonElement=z;const ae=v.createElement("div");ae.classList.add(ue("t")),ee(C.props.value("title"),ae),this.buttonElement.appendChild(ae)}}class De{constructor(v,C){this.emitter=new R,this.onClick_=this.onClick_.bind(this),this.props=C.props,this.viewProps=C.viewProps,this.view=new Te(v,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class $e{constructor(v,C){var z;this.constraint_=C==null?void 0:C.constraint,this.equals_=(z=C==null?void 0:C.equals)!==null&&z!==void 0?z:(ae,Ye)=>ae===Ye,this.emitter=new R,this.rawValue_=v}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(v){this.setRawValue(v,{forceEmit:!1,last:!0})}setRawValue(v,C){const z=C!=null?C:{forceEmit:!1,last:!0},ae=this.constraint_?this.constraint_.constrain(v):v;!!this.equals_(this.rawValue_,ae)&&!z.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=ae,this.emitter.emit("change",{options:z,rawValue:ae,sender:this}))}}class Ue{constructor(v){this.emitter=new R,this.value_=v}get rawValue(){return this.value_}set rawValue(v){this.setRawValue(v,{forceEmit:!1,last:!0})}setRawValue(v,C){const z=C!=null?C:{forceEmit:!1,last:!0};this.value_===v&&!z.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=v,this.emitter.emit("change",{options:z,rawValue:this.value_,sender:this}))}}function it(T,v){const C=v==null?void 0:v.constraint,z=v==null?void 0:v.equals;return!C&&!z?new Ue(T):new $e(T,v)}class tt{constructor(v){this.emitter=new R,this.valMap_=v;for(const C in this.valMap_)this.valMap_[C].emitter.on("change",()=>{this.emitter.emit("change",{key:C,sender:this})})}static createCore(v){return Object.keys(v).reduce((C,z)=>Object.assign(C,{[z]:it(v[z])}),{})}static fromObject(v){const C=this.createCore(v);return new tt(C)}get(v){return this.valMap_[v].rawValue}set(v,C){this.valMap_[v].rawValue=C}value(v){return this.valMap_[v]}}function St(T,v){return Object.keys(v).reduce((z,ae)=>{if(z===void 0)return;const Ye=v[ae],wt=Ye(T[ae]);return wt.succeeded?Object.assign(Object.assign({},z),{[ae]:wt.value}):void 0},{})}function ve(T,v){return T.reduce((C,z)=>{if(C===void 0)return;const ae=v(z);if(!(!ae.succeeded||ae.value===void 0))return[...C,ae.value]},[])}function ne(T){return T===null?!1:typeof T=="object"}function me(T){return v=>C=>{if(!v&&C===void 0)return{succeeded:!1,value:void 0};if(v&&C===void 0)return{succeeded:!0,value:void 0};const z=T(C);return z!==void 0?{succeeded:!0,value:z}:{succeeded:!1,value:void 0}}}function qe(T){return{custom:v=>me(v)(T),boolean:me(v=>typeof v=="boolean"?v:void 0)(T),number:me(v=>typeof v=="number"?v:void 0)(T),string:me(v=>typeof v=="string"?v:void 0)(T),function:me(v=>typeof v=="function"?v:void 0)(T),constant:v=>me(C=>C===v?v:void 0)(T),raw:me(v=>v)(T),object:v=>me(C=>{if(ne(C))return St(C,v)})(T),array:v=>me(C=>{if(Array.isArray(C))return ve(C,v)})(T)}}const Se={optional:qe(!0),required:qe(!1)};function gt(T,v){const C=Se.required.object(v)(T);return C.succeeded?C.value:void 0}function Xt(T){return T&&T.parentElement&&T.parentElement.removeChild(T),null}function He(){return["veryfirst","first","last","verylast"]}const Fe=B(""),pt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Rt{constructor(v){this.parent_=null,this.blade=v.blade,this.view=v.view,this.viewProps=v.viewProps;const C=this.view.element;this.blade.value("positions").emitter.on("change",()=>{He().forEach(z=>{C.classList.remove(Fe(void 0,pt[z]))}),this.blade.get("positions").forEach(z=>{C.classList.add(Fe(void 0,pt[z]))})}),this.viewProps.handleDispose(()=>{Xt(C)})}get parent(){return this.parent_}}const Vt="http://www.w3.org/2000/svg";function Ke(T){T.offsetHeight}function Ot(T,v){const C=T.style.transition;T.style.transition="none",v(),T.style.transition=C}function oe(T){return T.ontouchstart!==void 0}function ye(){return new Function("return this")()}function We(){return ye().document}function at(T){const v=T.ownerDocument.defaultView;return v&&"document"in v?T.getContext("2d"):null}const st={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function It(T,v){const C=T.createElementNS(Vt,"svg");return C.innerHTML=st[v],C}function At(T,v,C){T.insertBefore(v,T.children[C])}function Tt(T){T.parentElement&&T.parentElement.removeChild(T)}function Ut(T){for(;T.children.length>0;)T.removeChild(T.children[0])}function Wt(T){for(;T.childNodes.length>0;)T.removeChild(T.childNodes[0])}function we(T){return T.relatedTarget?T.relatedTarget:"explicitOriginalTarget"in T?T.explicitOriginalTarget:null}const fe=B("lbl");function lt(T,v){const C=T.createDocumentFragment();return v.split(`
`).map(z=>T.createTextNode(z)).forEach((z,ae)=>{ae>0&&C.appendChild(T.createElement("br")),C.appendChild(z)}),C}class Nt{constructor(v,C){this.element=v.createElement("div"),this.element.classList.add(fe()),C.viewProps.bindClassModifiers(this.element);const z=v.createElement("div");z.classList.add(fe("l")),Y(C.props,"label",Ye=>{y(Ye)?this.element.classList.add(fe(void 0,"nol")):(this.element.classList.remove(fe(void 0,"nol")),Wt(z),z.appendChild(lt(v,Ye)))}),this.element.appendChild(z),this.labelElement=z;const ae=v.createElement("div");ae.classList.add(fe("v")),this.element.appendChild(ae),this.valueElement=ae}}class Gt extends Rt{constructor(v,C){const z=C.valueController.viewProps;super(Object.assign(Object.assign({},C),{view:new Nt(v,{props:C.props,viewProps:z}),viewProps:z})),this.props=C.props,this.valueController=C.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const fn={id:"button",type:"blade",accept(T){const v=Se,C=gt(T,{title:v.required.string,view:v.required.constant("button"),label:v.optional.string});return C?{params:C}:null},controller(T){return new Gt(T.document,{blade:T.blade,props:tt.fromObject({label:T.params.label}),valueController:new De(T.document,{props:tt.fromObject({title:T.params.title}),viewProps:T.viewProps})})},api(T){return!(T.controller instanceof Gt)||!(T.controller.valueController instanceof De)?null:new P(T.controller)}};class wn extends Rt{constructor(v){super(v),this.value=v.value}}function vn(){return new tt({positions:it([],{equals:w})})}class Xe extends tt{constructor(v){super(v)}static create(v){const C={completed:!0,expanded:v,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},z=tt.createCore(C);return new Xe(z)}get styleExpanded(){var v;return(v=this.get("temporaryExpanded"))!==null&&v!==void 0?v:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const v=this.get("expandedHeight");return this.get("shouldFixHeight")&&!y(v)?`${v}px`:"auto"}bindExpandedClass(v,C){const z=()=>{this.styleExpanded?v.classList.add(C):v.classList.remove(C)};Y(this,"expanded",z),Y(this,"temporaryExpanded",z)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function nn(T,v){let C=0;return Ot(v,()=>{T.set("expandedHeight",null),T.set("temporaryExpanded",!0),Ke(v),C=v.clientHeight,T.set("temporaryExpanded",null),Ke(v)}),C}function Nn(T,v){v.style.height=T.styleHeight}function Rn(T,v){T.value("expanded").emitter.on("beforechange",()=>{T.set("completed",!1),y(T.get("expandedHeight"))&&T.set("expandedHeight",nn(T,v)),T.set("shouldFixHeight",!0),Ke(v)}),T.emitter.on("change",()=>{Nn(T,v)}),Nn(T,v),v.addEventListener("transitionend",C=>{C.propertyName==="height"&&T.cleanUpTransition()})}class An extends a{constructor(v,C){super(v),this.rackApi_=C}}function kn(T,v){return T.addBlade(Object.assign(Object.assign({},v),{view:"button"}))}function Qn(T,v){return T.addBlade(Object.assign(Object.assign({},v),{view:"folder"}))}function ji(T,v){const C=v!=null?v:{};return T.addBlade(Object.assign(Object.assign({},C),{view:"separator"}))}function br(T,v){return T.addBlade(Object.assign(Object.assign({},v),{view:"tab"}))}class ut{constructor(v){this.emitter=new R,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=v}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(v){for(const C of this.allItems())if(v(C))return C;return null}includes(v){return this.cache_.has(v)}add(v,C){if(this.includes(v))throw S.shouldNeverHappen();const z=C!==void 0?C:this.items_.length;this.items_.splice(z,0,v),this.cache_.add(v);const ae=this.extract_(v);ae&&(ae.emitter.on("add",this.onSubListAdd_),ae.emitter.on("remove",this.onSubListRemove_),ae.allItems().forEach(Ye=>{this.cache_.add(Ye)})),this.emitter.emit("add",{index:z,item:v,root:this,target:this})}remove(v){const C=this.items_.indexOf(v);if(C<0)return;this.items_.splice(C,1),this.cache_.delete(v);const z=this.extract_(v);z&&(z.emitter.off("add",this.onSubListAdd_),z.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:C,item:v,root:this,target:this})}onSubListAdd_(v){this.cache_.add(v.item),this.emitter.emit("add",{index:v.index,item:v.item,root:this,target:v.target})}onSubListRemove_(v){this.cache_.delete(v.item),this.emitter.emit("remove",{index:v.index,item:v.item,root:this,target:v.target})}}class en extends a{constructor(v){super(v),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new R,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(v){this.controller_.props.set("label",v)}on(v,C){const z=C.bind(this);return this.emitter_.on(v,ae=>{z(ae.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(v){const C=v.sender.target.read();this.emitter_.emit("change",{event:new d(this,C,this.controller_.binding.target.presetKey,v.options.last)})}}class mn extends Gt{constructor(v,C){super(v,C),this.binding=C.binding}}class On extends a{constructor(v){super(v),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new R,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(v){this.controller_.props.set("label",v)}on(v,C){const z=C.bind(this);return this.emitter_.on(v,ae=>{z(ae.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(v){const C=v.sender.target.read();this.emitter_.emit("update",{event:new f(this,C,this.controller_.binding.target.presetKey)})}}class jn extends Gt{constructor(v,C){super(v,C),this.binding=C.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function Xi(T){return T instanceof mo?T.apiSet_:T instanceof An?T.rackApi_.apiSet_:null}function Rr(T,v){const C=T.find(z=>z.controller_===v);if(!C)throw S.shouldNeverHappen();return C}function $r(T,v,C){if(!A.isBindable(T))throw S.notBindable();return new A(T,v,C)}class mo extends a{constructor(v,C){super(v),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new R,this.apiSet_=new ut(Xi),this.pool_=C;const z=this.controller_.rack;z.emitter.on("add",this.onRackAdd_),z.emitter.on("remove",this.onRackRemove_),z.emitter.on("inputchange",this.onRackInputChange_),z.emitter.on("monitorupdate",this.onRackMonitorUpdate_),z.children.forEach(ae=>{this.setUpApi_(ae)})}get children(){return this.controller_.rack.children.map(v=>Rr(this.apiSet_,v))}addInput(v,C,z){const ae=z!=null?z:{},Ye=this.controller_.view.element.ownerDocument,wt=this.pool_.createInput(Ye,$r(v,C,ae.presetKey),ae),yn=new en(wt);return this.add(yn,ae.index)}addMonitor(v,C,z){const ae=z!=null?z:{},Ye=this.controller_.view.element.ownerDocument,wt=this.pool_.createMonitor(Ye,$r(v,C),ae),yn=new On(wt);return this.add(yn,ae.index)}addFolder(v){return Qn(this,v)}addButton(v){return kn(this,v)}addSeparator(v){return ji(this,v)}addTab(v){return br(this,v)}add(v,C){this.controller_.rack.add(v.controller_,C);const z=this.apiSet_.find(ae=>ae.controller_===v.controller_);return z&&this.apiSet_.remove(z),this.apiSet_.add(v),v}remove(v){this.controller_.rack.remove(v.controller_)}addBlade(v){const C=this.controller_.view.element.ownerDocument,z=this.pool_.createBlade(C,v),ae=this.pool_.createBladeApi(z);return this.add(ae,v.index)}on(v,C){const z=C.bind(this);return this.emitter_.on(v,ae=>{z(ae.event)}),this}setUpApi_(v){this.apiSet_.find(C=>C.controller_===v)||this.apiSet_.add(this.pool_.createBladeApi(v))}onRackAdd_(v){this.setUpApi_(v.bladeController)}onRackRemove_(v){if(v.isRoot){const C=Rr(this.apiSet_,v.bladeController);this.apiSet_.remove(C)}}onRackInputChange_(v){const C=v.bladeController;if(C instanceof mn){const z=Rr(this.apiSet_,C),ae=C.binding;this.emitter_.emit("change",{event:new d(z,ae.target.read(),ae.target.presetKey,v.options.last)})}else if(C instanceof wn){const z=Rr(this.apiSet_,C);this.emitter_.emit("change",{event:new d(z,C.value.rawValue,void 0,v.options.last)})}}onRackMonitorUpdate_(v){if(!(v.bladeController instanceof jn))throw S.shouldNeverHappen();const C=Rr(this.apiSet_,v.bladeController),z=v.bladeController.binding;this.emitter_.emit("update",{event:new f(C,z.target.read(),z.target.presetKey)})}}class mr extends An{constructor(v,C){super(v,new mo(v.rackController,C)),this.emitter_=new R,this.controller_.foldable.value("expanded").emitter.on("change",z=>{this.emitter_.emit("fold",{event:new g(this,z.sender.rawValue)})}),this.rackApi_.on("change",z=>{this.emitter_.emit("change",{event:z})}),this.rackApi_.on("update",z=>{this.emitter_.emit("update",{event:z})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(v){this.controller_.foldable.set("expanded",v)}get title(){return this.controller_.props.get("title")}set title(v){this.controller_.props.set("title",v)}get children(){return this.rackApi_.children}addInput(v,C,z){return this.rackApi_.addInput(v,C,z)}addMonitor(v,C,z){return this.rackApi_.addMonitor(v,C,z)}addFolder(v){return this.rackApi_.addFolder(v)}addButton(v){return this.rackApi_.addButton(v)}addSeparator(v){return this.rackApi_.addSeparator(v)}addTab(v){return this.rackApi_.addTab(v)}add(v,C){return this.rackApi_.add(v,C)}remove(v){this.rackApi_.remove(v)}addBlade(v){return this.rackApi_.addBlade(v)}on(v,C){const z=C.bind(this);return this.emitter_.on(v,ae=>{z(ae.event)}),this}}class go extends Rt{constructor(v){super({blade:v.blade,view:v.view,viewProps:v.rackController.viewProps}),this.rackController=v.rackController}}class ro{constructor(v,C){const z=B(C.viewName);this.element=v.createElement("div"),this.element.classList.add(z()),C.viewProps.bindClassModifiers(this.element)}}function Ih(T,v){for(let C=0;C<T.length;C++){const z=T[C];if(z instanceof mn&&z.binding===v)return z}return null}function of(T,v){for(let C=0;C<T.length;C++){const z=T[C];if(z instanceof jn&&z.binding===v)return z}return null}function Dh(T,v){for(let C=0;C<T.length;C++){const z=T[C];if(z instanceof wn&&z.value===v)return z}return null}function gu(T){return T instanceof Zt?T.rack:T instanceof go?T.rackController.rack:null}function Ae(T){const v=gu(T);return v?v.bcSet_:null}class Lt{constructor(v){var C;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new R,this.blade_=v!=null?v:null,(C=this.blade_)===null||C===void 0||C.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new ut(Ae),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(v,C){v.parent&&v.parent.remove(v),v.parent_=this,this.bcSet_.add(v,C)}remove(v){v.parent_=null,this.bcSet_.remove(v)}find(v){return this.bcSet_.allItems().filter(C=>C instanceof v)}onSetAdd_(v){this.updatePositions_();const C=v.target===v.root;if(this.emitter.emit("add",{bladeController:v.item,index:v.index,isRoot:C,sender:this}),!C)return;const z=v.item;if(z.viewProps.emitter.on("change",this.onChildViewPropsChange_),z.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),z.viewProps.handleDispose(this.onChildDispose_),z instanceof mn)z.binding.emitter.on("change",this.onChildInputChange_);else if(z instanceof jn)z.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(z instanceof wn)z.value.emitter.on("change",this.onChildValueChange_);else{const ae=gu(z);if(ae){const Ye=ae.emitter;Ye.on("layout",this.onDescendantLayout_),Ye.on("inputchange",this.onDescendantInputChange_),Ye.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(v){this.updatePositions_();const C=v.target===v.root;if(this.emitter.emit("remove",{bladeController:v.item,isRoot:C,sender:this}),!C)return;const z=v.item;if(z instanceof mn)z.binding.emitter.off("change",this.onChildInputChange_);else if(z instanceof jn)z.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(z instanceof wn)z.value.emitter.off("change",this.onChildValueChange_);else{const ae=gu(z);if(ae){const Ye=ae.emitter;Ye.off("layout",this.onDescendantLayout_),Ye.off("inputchange",this.onDescendantInputChange_),Ye.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const v=this.bcSet_.items.filter(ae=>!ae.viewProps.get("hidden")),C=v[0],z=v[v.length-1];this.bcSet_.items.forEach(ae=>{const Ye=[];ae===C&&(Ye.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&Ye.push("veryfirst")),ae===z&&(Ye.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&Ye.push("verylast")),ae.blade.set("positions",Ye)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(v){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(v=>v.viewProps.get("disposed")).forEach(v=>{this.bcSet_.remove(v)})}onChildInputChange_(v){const C=Ih(this.find(mn),v.sender);if(!C)throw S.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:C,options:v.options,sender:this})}onChildMonitorUpdate_(v){const C=of(this.find(jn),v.sender);if(!C)throw S.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:C,sender:this})}onChildValueChange_(v){const C=Dh(this.find(wn),v.sender);if(!C)throw S.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:C,options:v.options,sender:this})}onDescendantLayout_(v){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(v){this.emitter.emit("inputchange",{bladeController:v.bladeController,options:v.options,sender:this})}onDescendantMonitorUpdate_(v){this.emitter.emit("monitorupdate",{bladeController:v.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Zt extends Rt{constructor(v,C){super(Object.assign(Object.assign({},C),{view:new ro(v,{viewName:"brk",viewProps:C.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const z=new Lt(C.root?void 0:C.blade);z.emitter.on("add",this.onRackAdd_),z.emitter.on("remove",this.onRackRemove_),this.rack=z,this.viewProps.handleDispose(()=>{for(let ae=this.rack.children.length-1;ae>=0;ae--)this.rack.children[ae].viewProps.set("disposed",!0)})}onRackAdd_(v){!v.isRoot||At(this.view.element,v.bladeController.view.element,v.index)}onRackRemove_(v){!v.isRoot||Tt(v.bladeController.view.element)}}const Mt=B("cnt");class on{constructor(v,C){var z;this.className_=B((z=C.viewName)!==null&&z!==void 0?z:"fld"),this.element=v.createElement("div"),this.element.classList.add(this.className_(),Mt()),C.viewProps.bindClassModifiers(this.element),this.foldable_=C.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Y(this.foldable_,"completed",$(this.element,this.className_(void 0,"cpl")));const ae=v.createElement("button");ae.classList.add(this.className_("b")),Y(C.props,"title",li=>{y(li)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),C.viewProps.bindDisabled(ae),this.element.appendChild(ae),this.buttonElement=ae;const Ye=v.createElement("div");Ye.classList.add(this.className_("t")),ee(C.props.value("title"),Ye),this.buttonElement.appendChild(Ye),this.titleElement=Ye;const wt=v.createElement("div");wt.classList.add(this.className_("m")),this.buttonElement.appendChild(wt);const yn=C.containerElement;yn.classList.add(this.className_("c")),this.element.appendChild(yn),this.containerElement=yn}}class oi extends go{constructor(v,C){var z;const ae=Xe.create((z=C.expanded)!==null&&z!==void 0?z:!0),Ye=new Zt(v,{blade:C.blade,root:C.root,viewProps:C.viewProps});super(Object.assign(Object.assign({},C),{rackController:Ye,view:new on(v,{containerElement:Ye.view.element,foldable:ae,props:C.props,viewName:C.root?"rot":void 0,viewProps:C.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=C.props,this.foldable=ae,Rn(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const wi={id:"folder",type:"blade",accept(T){const v=Se,C=gt(T,{title:v.required.string,view:v.required.constant("folder"),expanded:v.optional.boolean});return C?{params:C}:null},controller(T){return new oi(T.document,{blade:T.blade,expanded:T.params.expanded,props:tt.fromObject({title:T.params.title}),viewProps:T.viewProps})},api(T){return T.controller instanceof oi?new mr(T.controller,T.pool):null}};class ki extends wn{constructor(v,C){const z=C.valueController.viewProps;super(Object.assign(Object.assign({},C),{value:C.valueController.value,view:new Nt(v,{props:C.props,viewProps:z}),viewProps:z})),this.props=C.props,this.valueController=C.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Mi extends a{}const rr=B("spr");class Ui{constructor(v,C){this.element=v.createElement("div"),this.element.classList.add(rr()),C.viewProps.bindClassModifiers(this.element);const z=v.createElement("hr");z.classList.add(rr("r")),this.element.appendChild(z)}}class Zi extends Rt{constructor(v,C){super(Object.assign(Object.assign({},C),{view:new Ui(v,{viewProps:C.viewProps})}))}}const kr={id:"separator",type:"blade",accept(T){const v=gt(T,{view:Se.required.constant("separator")});return v?{params:v}:null},controller(T){return new Zi(T.document,{blade:T.blade,viewProps:T.viewProps})},api(T){return T.controller instanceof Zi?new Mi(T.controller):null}},Ma=B("");function Mo(T,v){return $(T,Ma(void 0,v))}class Gs extends tt{constructor(v){super(v)}static create(v){var C,z;const ae=v!=null?v:{},Ye={disabled:(C=ae.disabled)!==null&&C!==void 0?C:!1,disposed:!1,hidden:(z=ae.hidden)!==null&&z!==void 0?z:!1},wt=tt.createCore(Ye);return new Gs(wt)}bindClassModifiers(v){Y(this,"disabled",Mo(v,"disabled")),Y(this,"hidden",Mo(v,"hidden"))}bindDisabled(v){Y(this,"disabled",C=>{v.disabled=C})}bindTabIndex(v){Y(this,"disabled",C=>{v.tabIndex=C?-1:0})}handleDispose(v){this.value("disposed").emitter.on("change",C=>{C&&v()})}}const Cr=B("tbi");class or{constructor(v,C){this.element=v.createElement("div"),this.element.classList.add(Cr()),C.viewProps.bindClassModifiers(this.element),Y(C.props,"selected",Ye=>{Ye?this.element.classList.add(Cr(void 0,"sel")):this.element.classList.remove(Cr(void 0,"sel"))});const z=v.createElement("button");z.classList.add(Cr("b")),C.viewProps.bindDisabled(z),this.element.appendChild(z),this.buttonElement=z;const ae=v.createElement("div");ae.classList.add(Cr("t")),ee(C.props.value("title"),ae),this.buttonElement.appendChild(ae),this.titleElement=ae}}class Aa{constructor(v,C){this.emitter=new R,this.onClick_=this.onClick_.bind(this),this.props=C.props,this.viewProps=C.viewProps,this.view=new or(v,{props:C.props,viewProps:C.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Dr{constructor(v,C){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Aa(v,{props:C.itemProps,viewProps:Gs.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Zt(v,{blade:vn(),viewProps:Gs.create()}),this.props=C.props,Y(this.props,"selected",z=>{this.itemController.props.set("selected",z),this.contentController.viewProps.set("hidden",!z)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class Hs{constructor(v,C){this.controller_=v,this.rackApi_=C}get title(){var v;return(v=this.controller_.itemController.props.get("title"))!==null&&v!==void 0?v:""}set title(v){this.controller_.itemController.props.set("title",v)}get selected(){return this.controller_.props.get("selected")}set selected(v){this.controller_.props.set("selected",v)}get children(){return this.rackApi_.children}addButton(v){return this.rackApi_.addButton(v)}addFolder(v){return this.rackApi_.addFolder(v)}addSeparator(v){return this.rackApi_.addSeparator(v)}addTab(v){return this.rackApi_.addTab(v)}add(v,C){this.rackApi_.add(v,C)}remove(v){this.rackApi_.remove(v)}addInput(v,C,z){return this.rackApi_.addInput(v,C,z)}addMonitor(v,C,z){return this.rackApi_.addMonitor(v,C,z)}addBlade(v){return this.rackApi_.addBlade(v)}}class Yo extends An{constructor(v,C){super(v,new mo(v.rackController,C)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new R,this.pageApiMap_=new Map,this.rackApi_.on("change",z=>{this.emitter_.emit("change",{event:z})}),this.rackApi_.on("update",z=>{this.emitter_.emit("update",{event:z})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(z=>{this.setUpPageApi_(z)})}get pages(){return this.controller_.pageSet.items.map(v=>{const C=this.pageApiMap_.get(v);if(!C)throw S.shouldNeverHappen();return C})}addPage(v){const C=this.controller_.view.element.ownerDocument,z=new Dr(C,{itemProps:tt.fromObject({selected:!1,title:v.title}),props:tt.fromObject({selected:!1})});this.controller_.add(z,v.index);const ae=this.pageApiMap_.get(z);if(!ae)throw S.shouldNeverHappen();return ae}removePage(v){this.controller_.remove(v)}on(v,C){const z=C.bind(this);return this.emitter_.on(v,ae=>{z(ae.event)}),this}setUpPageApi_(v){const C=this.rackApi_.apiSet_.find(ae=>ae.controller_===v.contentController);if(!C)throw S.shouldNeverHappen();const z=new Hs(v,C);this.pageApiMap_.set(v,z)}onPageAdd_(v){this.setUpPageApi_(v.item)}onPageRemove_(v){if(!this.pageApiMap_.get(v.item))throw S.shouldNeverHappen();this.pageApiMap_.delete(v.item)}onSelect_(v){this.emitter_.emit("select",{event:new _(this,v.rawValue)})}}const La=-1;class ca{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=it(!0),this.selectedIndex=it(La),this.items_=[]}add(v,C){const z=C!=null?C:this.items_.length;this.items_.splice(z,0,v),v.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(v){const C=this.items_.indexOf(v);C<0||(this.items_.splice(C,1),v.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=La,this.empty.rawValue=!0;return}const v=this.items_.findIndex(C=>C.rawValue);v<0?(this.items_.forEach((C,z)=>{C.rawValue=z===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((C,z)=>{C.rawValue=z===v}),this.selectedIndex.rawValue=v),this.empty.rawValue=!1}onItemSelectedChange_(v){if(v.rawValue){const C=this.items_.findIndex(z=>z===v.sender);this.items_.forEach((z,ae)=>{z.rawValue=ae===C}),this.selectedIndex.rawValue=C}else this.keepSelection_()}}const Nr=B("tab");class ua{constructor(v,C){this.element=v.createElement("div"),this.element.classList.add(Nr(),Mt()),C.viewProps.bindClassModifiers(this.element),U(C.empty,$(this.element,Nr(void 0,"nop")));const z=v.createElement("div");z.classList.add(Nr("i")),this.element.appendChild(z),this.itemsElement=z;const ae=C.contentsElement;ae.classList.add(Nr("c")),this.element.appendChild(ae),this.contentsElement=ae}}class Ll extends go{constructor(v,C){const z=new Zt(v,{blade:C.blade,viewProps:C.viewProps}),ae=new ca;super({blade:C.blade,rackController:z,view:new ua(v,{contentsElement:z.view.element,empty:ae.empty,viewProps:C.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new ut(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=ae}get pageSet(){return this.pageSet_}add(v,C){this.pageSet_.add(v,C)}remove(v){this.pageSet_.remove(this.pageSet_.items[v])}onPageAdd_(v){const C=v.item;At(this.view.itemsElement,C.itemController.view.element,v.index),this.rackController.rack.add(C.contentController,v.index),this.tab.add(C.props.value("selected"))}onPageRemove_(v){const C=v.item;Tt(C.itemController.view.element),this.rackController.rack.remove(C.contentController),this.tab.remove(C.props.value("selected"))}}const _s={id:"tab",type:"blade",accept(T){const v=Se,C=gt(T,{pages:v.required.array(v.required.object({title:v.required.string})),view:v.required.constant("tab")});return!C||C.pages.length===0?null:{params:C}},controller(T){const v=new Ll(T.document,{blade:T.blade,viewProps:T.viewProps});return T.params.pages.forEach(C=>{const z=new Dr(T.document,{itemProps:tt.fromObject({selected:!1,title:C.title}),props:tt.fromObject({selected:!1})});v.add(z)}),v},api(T){return T.controller instanceof Ll?new Yo(T.controller,T.pool):null}};function Rl(T,v){const C=T.accept(v.params);if(!C)return null;const z=Se.optional.boolean(v.params.disabled).value,ae=Se.optional.boolean(v.params.hidden).value;return T.controller({blade:vn(),document:v.document,params:Object.assign(Object.assign({},C.params),{disabled:z,hidden:ae}),viewProps:Gs.create({disabled:z,hidden:ae})})}class kc{constructor(){this.disabled=!1,this.emitter=new R}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Ur{constructor(v,C){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=v,this.emitter=new R,this.interval_=C,this.setTimer_()}get disabled(){return this.disabled_}set disabled(v){this.disabled_=v,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const v=this.doc_.defaultView;v&&v.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const v=this.doc_.defaultView;v&&(this.timerId_=v.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class jo{constructor(v){this.constraints=v}constrain(v){return this.constraints.reduce((C,z)=>z.constrain(C),v)}}function so(T,v){if(T instanceof v)return T;if(T instanceof jo){const C=T.constraints.reduce((z,ae)=>z||(ae instanceof v?ae:null),null);if(C)return C}return null}class As{constructor(v){this.options=v}constrain(v){const C=this.options;return C.length===0||C.filter(z=>z.value===v).length>0?v:C[0].value}}class Cc{constructor(v){this.maxValue=v.max,this.minValue=v.min}constrain(v){let C=v;return y(this.minValue)||(C=Math.max(C,this.minValue)),y(this.maxValue)||(C=Math.min(C,this.maxValue)),C}}class Nh{constructor(v,C=0){this.step=v,this.origin=C}constrain(v){const C=this.origin%this.step,z=Math.round((v-C)/this.step);return C+z*this.step}}const Sc=B("lst");class af{constructor(v,C){this.onValueChange_=this.onValueChange_.bind(this),this.props_=C.props,this.element=v.createElement("div"),this.element.classList.add(Sc()),C.viewProps.bindClassModifiers(this.element);const z=v.createElement("select");z.classList.add(Sc("s")),Y(this.props_,"options",Ye=>{Ut(z),Ye.forEach((wt,yn)=>{const li=v.createElement("option");li.dataset.index=String(yn),li.textContent=wt.text,li.value=String(wt.value),z.appendChild(li)})}),C.viewProps.bindDisabled(z),this.element.appendChild(z),this.selectElement=z;const ae=v.createElement("div");ae.classList.add(Sc("m")),ae.appendChild(It(v,"dropdown")),this.element.appendChild(ae),C.value.emitter.on("change",this.onValueChange_),this.value_=C.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class Ec{constructor(v,C){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=C.props,this.value=C.value,this.viewProps=C.viewProps,this.view=new af(v,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(v){const C=v.currentTarget.selectedOptions.item(0);if(!C)return;const z=Number(C.dataset.index);this.value.rawValue=this.props.get("options")[z].value}}const Oh=B("pop");class rm{constructor(v,C){this.element=v.createElement("div"),this.element.classList.add(Oh()),C.viewProps.bindClassModifiers(this.element),U(C.shows,$(this.element,Oh(void 0,"v")))}}class lf{constructor(v,C){this.shows=it(!1),this.viewProps=C.viewProps,this.view=new rm(v,{shows:this.shows,viewProps:this.viewProps})}}const sm=B("txt");class Wg{constructor(v,C){this.onChange_=this.onChange_.bind(this),this.element=v.createElement("div"),this.element.classList.add(sm()),C.viewProps.bindClassModifiers(this.element),this.props_=C.props,this.props_.emitter.on("change",this.onChange_);const z=v.createElement("input");z.classList.add(sm("i")),z.type="text",C.viewProps.bindDisabled(z),this.element.appendChild(z),this.inputElement=z,C.value.emitter.on("change",this.onChange_),this.value_=C.value,this.refresh()}refresh(){const v=this.props_.get("formatter");this.inputElement.value=v(this.value_.rawValue)}onChange_(){this.refresh()}}class Fh{constructor(v,C){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=C.parser,this.props=C.props,this.value=C.value,this.viewProps=C.viewProps,this.view=new Wg(v,{props:C.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(v){const C=v.currentTarget.value,z=this.parser_(C);y(z)||(this.value.rawValue=z),this.view.refresh()}}function zg(T){return String(T)}function om(T){return T==="false"?!1:!!T}function am(T){return zg(T)}class Ug{constructor(v){this.text=v}evaluate(){return Number(this.text)}toString(){return this.text}}const Gg={"**":(T,v)=>Math.pow(T,v),"*":(T,v)=>T*v,"/":(T,v)=>T/v,"%":(T,v)=>T%v,"+":(T,v)=>T+v,"-":(T,v)=>T-v,"<<":(T,v)=>T<<v,">>":(T,v)=>T>>v,">>>":(T,v)=>T>>>v,"&":(T,v)=>T&v,"^":(T,v)=>T^v,"|":(T,v)=>T|v};class Hg{constructor(v,C,z){this.left=C,this.operator=v,this.right=z}evaluate(){const v=Gg[this.operator];if(!v)throw new Error(`unexpected binary operator: '${this.operator}`);return v(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const lm={"+":T=>T,"-":T=>-T,"~":T=>~T};class Yg{constructor(v,C){this.operator=v,this.expression=C}evaluate(){const v=lm[this.operator];if(!v)throw new Error(`unexpected unary operator: '${this.operator}`);return v(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function cf(T){return(v,C)=>{for(let z=0;z<T.length;z++){const ae=T[z](v,C);if(ae!=="")return ae}return""}}function Pl(T,v){var C;const z=T.substr(v).match(/^\s+/);return(C=z&&z[0])!==null&&C!==void 0?C:""}function jg(T,v){const C=T.substr(v,1);return C.match(/^[1-9]$/)?C:""}function vu(T,v){var C;const z=T.substr(v).match(/^[0-9]+/);return(C=z&&z[0])!==null&&C!==void 0?C:""}function $g(T,v){const C=vu(T,v);if(C!=="")return C;const z=T.substr(v,1);if(v+=1,z!=="-"&&z!=="+")return"";const ae=vu(T,v);return ae===""?"":z+ae}function ha(T,v){const C=T.substr(v,1);if(v+=1,C.toLowerCase()!=="e")return"";const z=$g(T,v);return z===""?"":C+z}function cm(T,v){const C=T.substr(v,1);if(C==="0")return C;const z=jg(T,v);return v+=z.length,z===""?"":z+vu(T,v)}function qg(T,v){const C=cm(T,v);if(v+=C.length,C==="")return"";const z=T.substr(v,1);if(v+=z.length,z!==".")return"";const ae=vu(T,v);return v+=ae.length,C+z+ae+ha(T,v)}function Xg(T,v){const C=T.substr(v,1);if(v+=C.length,C!==".")return"";const z=vu(T,v);return v+=z.length,z===""?"":C+z+ha(T,v)}function Zg(T,v){const C=cm(T,v);return v+=C.length,C===""?"":C+ha(T,v)}const Kg=cf([qg,Xg,Zg]);function um(T,v){var C;const z=T.substr(v).match(/^[01]+/);return(C=z&&z[0])!==null&&C!==void 0?C:""}function Jg(T,v){const C=T.substr(v,2);if(v+=C.length,C.toLowerCase()!=="0b")return"";const z=um(T,v);return z===""?"":C+z}function Qg(T,v){var C;const z=T.substr(v).match(/^[0-7]+/);return(C=z&&z[0])!==null&&C!==void 0?C:""}function Ao(T,v){const C=T.substr(v,2);if(v+=C.length,C.toLowerCase()!=="0o")return"";const z=Qg(T,v);return z===""?"":C+z}function e1(T,v){var C;const z=T.substr(v).match(/^[0-9a-f]+/i);return(C=z&&z[0])!==null&&C!==void 0?C:""}function t1(T,v){const C=T.substr(v,2);if(v+=C.length,C.toLowerCase()!=="0x")return"";const z=e1(T,v);return z===""?"":C+z}const uf=cf([Jg,Ao,t1]),hm=cf([uf,Kg]);function sl(T,v){const C=hm(T,v);return v+=C.length,C===""?null:{evaluable:new Ug(C),cursor:v}}function dm(T,v){const C=T.substr(v,1);if(v+=C.length,C!=="(")return null;const z=Bh(T,v);if(!z)return null;v=z.cursor,v+=Pl(T,v).length;const ae=T.substr(v,1);return v+=ae.length,ae!==")"?null:{evaluable:z.evaluable,cursor:v}}function n1(T,v){var C;return(C=sl(T,v))!==null&&C!==void 0?C:dm(T,v)}function hf(T,v){const C=n1(T,v);if(C)return C;const z=T.substr(v,1);if(v+=z.length,z!=="+"&&z!=="-"&&z!=="~")return null;const ae=hf(T,v);return ae?(v=ae.cursor,{cursor:v,evaluable:new Yg(z,ae.evaluable)}):null}function df(T,v,C){C+=Pl(v,C).length;const z=T.filter(ae=>v.startsWith(ae,C))[0];return z?(C+=z.length,C+=Pl(v,C).length,{cursor:C,operator:z}):null}function qr(T,v){return(C,z)=>{const ae=T(C,z);if(!ae)return null;z=ae.cursor;let Ye=ae.evaluable;for(;;){const wt=df(v,C,z);if(!wt)break;z=wt.cursor;const yn=T(C,z);if(!yn)return null;z=yn.cursor,Ye=new Hg(wt.operator,Ye,yn.evaluable)}return Ye?{cursor:z,evaluable:Ye}:null}}const yu=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((T,v)=>qr(T,v),hf);function Bh(T,v){return v+=Pl(T,v).length,yu(T,v)}function dn(T){const v=Bh(T,0);return!v||v.cursor+Pl(T,v.cursor).length!==T.length?null:v.evaluable}function Lo(T){var v;const C=dn(T);return(v=C==null?void 0:C.evaluate())!==null&&v!==void 0?v:null}function vo(T){if(typeof T=="number")return T;if(typeof T=="string"){const v=Lo(T);if(!y(v))return v}return 0}function Vh(T){return String(T)}function Or(T){return v=>v.toFixed(Math.max(Math.min(T,20),0))}const Tc=Or(0);function ol(T){return Tc(T)+"%"}function al(T){return String(T)}function Ro(T){return T}function $o(T,v){for(;T.length<v;)T.push(void 0)}function ff(T){const v=[];return $o(v,T),it(v)}function i1(T){const v=T.indexOf(void 0);return v<0?T:T.slice(0,v)}function r1(T,v){const C=[...i1(T),v];return C.length>T.length?C.splice(0,C.length-T.length):$o(C,T.length),C}function _u({primary:T,secondary:v,forward:C,backward:z}){let ae=!1;function Ye(wt){ae||(ae=!0,wt(),ae=!1)}T.emitter.on("change",wt=>{Ye(()=>{v.setRawValue(C(T,v),wt.options)})}),v.emitter.on("change",wt=>{Ye(()=>{T.setRawValue(z(T,v),wt.options)}),Ye(()=>{v.setRawValue(C(T,v),wt.options)})}),Ye(()=>{v.setRawValue(C(T,v),{forceEmit:!1,last:!0})})}function Ys(T,v){const C=T*(v.altKey?.1:1)*(v.shiftKey?10:1);return v.upKey?+C:v.downKey?-C:0}function bu(T){return{altKey:T.altKey,downKey:T.key==="ArrowDown",shiftKey:T.shiftKey,upKey:T.key==="ArrowUp"}}function Ra(T){return{altKey:T.altKey,downKey:T.key==="ArrowLeft",shiftKey:T.shiftKey,upKey:T.key==="ArrowRight"}}function fm(T){return T==="ArrowUp"||T==="ArrowDown"}function Wh(T){return fm(T)||T==="ArrowLeft"||T==="ArrowRight"}function pf(T,v){var C,z;const ae=v.ownerDocument.defaultView,Ye=v.getBoundingClientRect();return{x:T.pageX-(((C=ae&&ae.scrollX)!==null&&C!==void 0?C:0)+Ye.left),y:T.pageY-(((z=ae&&ae.scrollY)!==null&&z!==void 0?z:0)+Ye.top)}}class qo{constructor(v){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=v,this.emitter=new R,v.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),v.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),v.addEventListener("touchend",this.onTouchEnd_),v.addEventListener("mousedown",this.onMouseDown_)}computePosition_(v){const C=this.elem_.getBoundingClientRect();return{bounds:{width:C.width,height:C.height},point:v?{x:v.x,y:v.y}:null}}onMouseDown_(v){var C;v.preventDefault(),(C=v.currentTarget)===null||C===void 0||C.focus();const z=this.elem_.ownerDocument;z.addEventListener("mousemove",this.onDocumentMouseMove_),z.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:v.altKey,data:this.computePosition_(pf(v,this.elem_)),sender:this,shiftKey:v.shiftKey})}onDocumentMouseMove_(v){this.emitter.emit("move",{altKey:v.altKey,data:this.computePosition_(pf(v,this.elem_)),sender:this,shiftKey:v.shiftKey})}onDocumentMouseUp_(v){const C=this.elem_.ownerDocument;C.removeEventListener("mousemove",this.onDocumentMouseMove_),C.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:v.altKey,data:this.computePosition_(pf(v,this.elem_)),sender:this,shiftKey:v.shiftKey})}onTouchStart_(v){v.preventDefault();const C=v.targetTouches.item(0),z=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:v.altKey,data:this.computePosition_(C?{x:C.clientX-z.left,y:C.clientY-z.top}:void 0),sender:this,shiftKey:v.shiftKey}),this.lastTouch_=C}onTouchMove_(v){const C=v.targetTouches.item(0),z=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:v.altKey,data:this.computePosition_(C?{x:C.clientX-z.left,y:C.clientY-z.top}:void 0),sender:this,shiftKey:v.shiftKey}),this.lastTouch_=C}onTouchEnd_(v){var C;const z=(C=v.targetTouches.item(0))!==null&&C!==void 0?C:this.lastTouch_,ae=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:v.altKey,data:this.computePosition_(z?{x:z.clientX-ae.left,y:z.clientY-ae.top}:void 0),sender:this,shiftKey:v.shiftKey})}}function Sr(T,v,C,z,ae){const Ye=(T-v)/(C-v);return z+Ye*(ae-z)}function Pa(T){return String(T.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function ns(T,v,C){return Math.min(Math.max(T,v),C)}function xu(T,v){return(T%v+v)%v}const Pr=B("txt");class zh{constructor(v,C){this.onChange_=this.onChange_.bind(this),this.props_=C.props,this.props_.emitter.on("change",this.onChange_),this.element=v.createElement("div"),this.element.classList.add(Pr(),Pr(void 0,"num")),C.arrayPosition&&this.element.classList.add(Pr(void 0,C.arrayPosition)),C.viewProps.bindClassModifiers(this.element);const z=v.createElement("input");z.classList.add(Pr("i")),z.type="text",C.viewProps.bindDisabled(z),this.element.appendChild(z),this.inputElement=z,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=C.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Pr()),this.inputElement.classList.add(Pr("i"));const ae=v.createElement("div");ae.classList.add(Pr("k")),this.element.appendChild(ae),this.knobElement=ae;const Ye=v.createElementNS(Vt,"svg");Ye.classList.add(Pr("g")),this.knobElement.appendChild(Ye);const wt=v.createElementNS(Vt,"path");wt.classList.add(Pr("gb")),Ye.appendChild(wt),this.guideBodyElem_=wt;const yn=v.createElementNS(Vt,"path");yn.classList.add(Pr("gh")),Ye.appendChild(yn),this.guideHeadElem_=yn;const li=v.createElement("div");li.classList.add(B("tt")()),this.knobElement.appendChild(li),this.tooltipElem_=li,C.value.emitter.on("change",this.onChange_),this.value=C.value,this.refresh()}onDraggingChange_(v){if(v.rawValue===null){this.element.classList.remove(Pr(void 0,"drg"));return}this.element.classList.add(Pr(void 0,"drg"));const C=v.rawValue/this.props_.get("draggingScale"),z=C+(C>0?-1:C<0?1:0),ae=ns(-z,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${z+ae},0 L${z},4 L${z+ae},8`,`M ${C},-1 L${C},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${C},4`);const Ye=this.props_.get("formatter");this.tooltipElem_.textContent=Ye(this.value.rawValue),this.tooltipElem_.style.left=`${C}px`}refresh(){const v=this.props_.get("formatter");this.inputElement.value=v(this.value.rawValue)}onChange_(){this.refresh()}}class Xr{constructor(v,C){var z;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=C.baseStep,this.parser_=C.parser,this.props=C.props,this.sliderProps_=(z=C.sliderProps)!==null&&z!==void 0?z:null,this.value=C.value,this.viewProps=C.viewProps,this.dragging_=it(null),this.view=new zh(v,{arrayPosition:C.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const ae=new qo(this.view.knobElement);ae.emitter.on("down",this.onPointerDown_),ae.emitter.on("move",this.onPointerMove_),ae.emitter.on("up",this.onPointerUp_)}constrainValue_(v){var C,z;const ae=(C=this.sliderProps_)===null||C===void 0?void 0:C.get("minValue"),Ye=(z=this.sliderProps_)===null||z===void 0?void 0:z.get("maxValue");let wt=v;return ae!==void 0&&(wt=Math.max(wt,ae)),Ye!==void 0&&(wt=Math.min(wt,Ye)),wt}onInputChange_(v){const C=v.currentTarget.value,z=this.parser_(C);y(z)||(this.value.rawValue=this.constrainValue_(z)),this.view.refresh()}onInputKeyDown_(v){const C=Ys(this.baseStep_,bu(v));C!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+C),{forceEmit:!1,last:!1})}onInputKeyUp_(v){Ys(this.baseStep_,bu(v))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(v){if(!v.point)return null;const C=v.point.x-v.bounds.width/2;return this.constrainValue_(this.originRawValue_+C*this.props.get("draggingScale"))}onPointerMove_(v){const C=this.computeDraggingValue_(v.data);C!==null&&(this.value.setRawValue(C,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(v){const C=this.computeDraggingValue_(v.data);C!==null&&(this.value.setRawValue(C,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Mc=B("sld");class s1{constructor(v,C){this.onChange_=this.onChange_.bind(this),this.props_=C.props,this.props_.emitter.on("change",this.onChange_),this.element=v.createElement("div"),this.element.classList.add(Mc()),C.viewProps.bindClassModifiers(this.element);const z=v.createElement("div");z.classList.add(Mc("t")),C.viewProps.bindTabIndex(z),this.element.appendChild(z),this.trackElement=z;const ae=v.createElement("div");ae.classList.add(Mc("k")),this.trackElement.appendChild(ae),this.knobElement=ae,C.value.emitter.on("change",this.onChange_),this.value=C.value,this.update_()}update_(){const v=ns(Sr(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${v}%`}onChange_(){this.update_()}}class ll{constructor(v,C){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=C.baseStep,this.value=C.value,this.viewProps=C.viewProps,this.props=C.props,this.view=new s1(v,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qo(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(v,C){!v.point||this.value.setRawValue(Sr(ns(v.point.x,0,v.bounds.width),0,v.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),C)}onPointerDownOrMove_(v){this.handlePointerEvent_(v.data,{forceEmit:!1,last:!1})}onPointerUp_(v){this.handlePointerEvent_(v.data,{forceEmit:!0,last:!0})}onKeyDown_(v){const C=Ys(this.baseStep_,Ra(v));C!==0&&this.value.setRawValue(this.value.rawValue+C,{forceEmit:!1,last:!1})}onKeyUp_(v){Ys(this.baseStep_,Ra(v))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ac=B("sldtxt");class Il{constructor(v,C){this.element=v.createElement("div"),this.element.classList.add(Ac());const z=v.createElement("div");z.classList.add(Ac("s")),this.sliderView_=C.sliderView,z.appendChild(this.sliderView_.element),this.element.appendChild(z);const ae=v.createElement("div");ae.classList.add(Ac("t")),this.textView_=C.textView,ae.appendChild(this.textView_.element),this.element.appendChild(ae)}}class Ia{constructor(v,C){this.value=C.value,this.viewProps=C.viewProps,this.sliderC_=new ll(v,{baseStep:C.baseStep,props:C.sliderProps,value:C.value,viewProps:this.viewProps}),this.textC_=new Xr(v,{baseStep:C.baseStep,parser:C.parser,props:C.textProps,sliderProps:C.sliderProps,value:C.value,viewProps:C.viewProps}),this.view=new Il(v,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Lc(T,v){T.write(v)}function wu(T){const v=Se;if(Array.isArray(T))return v.required.array(v.required.object({text:v.required.string,value:v.required.raw}))(T).value;if(typeof T=="object")return v.required.raw(T).value}function pm(T){if(T==="inline"||T==="popup")return T}function fs(T){const v=Se;return v.required.object({max:v.optional.number,min:v.optional.number,step:v.optional.number})(T).value}function mf(T){if(Array.isArray(T))return T;const v=[];return Object.keys(T).forEach(C=>{v.push({text:C,value:T[C]})}),v}function Rc(T){return y(T)?null:new As(mf(T))}function ku(T){const v=T?so(T,As):null;return v?v.options:null}function Cu(T){const v=T?so(T,Nh):null;return v?v.step:null}function Uh(T,v){const C=T&&so(T,Nh);return C?Pa(C.step):Math.max(Pa(v),2)}function Da(T){const v=Cu(T);return v!=null?v:1}function Na(T,v){var C;const z=T&&so(T,Nh),ae=Math.abs((C=z==null?void 0:z.step)!==null&&C!==void 0?C:v);return ae===0?.1:Math.pow(10,Math.floor(Math.log10(ae))-1)}const Su=B("ckb");class Gh{constructor(v,C){this.onValueChange_=this.onValueChange_.bind(this),this.element=v.createElement("div"),this.element.classList.add(Su()),C.viewProps.bindClassModifiers(this.element);const z=v.createElement("label");z.classList.add(Su("l")),this.element.appendChild(z);const ae=v.createElement("input");ae.classList.add(Su("i")),ae.type="checkbox",z.appendChild(ae),this.inputElement=ae,C.viewProps.bindDisabled(this.inputElement);const Ye=v.createElement("div");Ye.classList.add(Su("w")),z.appendChild(Ye);const wt=It(v,"check");Ye.appendChild(wt),C.value.emitter.on("change",this.onValueChange_),this.value=C.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class mm{constructor(v,C){this.onInputChange_=this.onInputChange_.bind(this),this.value=C.value,this.viewProps=C.viewProps,this.view=new Gh(v,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(v){const C=v.currentTarget;this.value.rawValue=C.checked}}function Pc(T){const v=[],C=Rc(T.options);return C&&v.push(C),new jo(v)}const gm={id:"input-bool",type:"input",accept:(T,v)=>{if(typeof T!="boolean")return null;const C=gt(v,{options:Se.optional.custom(wu)});return C?{initialValue:T,params:C}:null},binding:{reader:T=>om,constraint:T=>Pc(T.params),writer:T=>Lc},controller:T=>{var v;const C=T.document,z=T.value,ae=T.constraint;return ae&&so(ae,As)?new Ec(C,{props:tt.fromObject({options:(v=ku(ae))!==null&&v!==void 0?v:[]}),value:z,viewProps:T.viewProps}):new mm(C,{value:z,viewProps:T.viewProps})}},Dl=B("col");class J{constructor(v,C){this.element=v.createElement("div"),this.element.classList.add(Dl()),C.foldable.bindExpandedClass(this.element,Dl(void 0,"expanded")),Y(C.foldable,"completed",$(this.element,Dl(void 0,"cpl")));const z=v.createElement("div");z.classList.add(Dl("h")),this.element.appendChild(z);const ae=v.createElement("div");ae.classList.add(Dl("s")),z.appendChild(ae),this.swatchElement=ae;const Ye=v.createElement("div");if(Ye.classList.add(Dl("t")),z.appendChild(Ye),this.textElement=Ye,C.pickerLayout==="inline"){const wt=v.createElement("div");wt.classList.add(Dl("p")),this.element.appendChild(wt),this.pickerElement=wt}else this.pickerElement=null}}function D(T,v,C){const z=ns(T/255,0,1),ae=ns(v/255,0,1),Ye=ns(C/255,0,1),wt=Math.max(z,ae,Ye),yn=Math.min(z,ae,Ye),li=wt-yn;let _i=0,Gi=0;const $i=(yn+wt)/2;return li!==0&&(Gi=li/(1-Math.abs(wt+yn-1)),z===wt?_i=(ae-Ye)/li:ae===wt?_i=2+(Ye-z)/li:_i=4+(z-ae)/li,_i=_i/6+(_i<0?1:0)),[_i*360,Gi*100,$i*100]}function j(T,v,C){const z=(T%360+360)%360,ae=ns(v/100,0,1),Ye=ns(C/100,0,1),wt=(1-Math.abs(2*Ye-1))*ae,yn=wt*(1-Math.abs(z/60%2-1)),li=Ye-wt/2;let _i,Gi,$i;return z>=0&&z<60?[_i,Gi,$i]=[wt,yn,0]:z>=60&&z<120?[_i,Gi,$i]=[yn,wt,0]:z>=120&&z<180?[_i,Gi,$i]=[0,wt,yn]:z>=180&&z<240?[_i,Gi,$i]=[0,yn,wt]:z>=240&&z<300?[_i,Gi,$i]=[yn,0,wt]:[_i,Gi,$i]=[wt,0,yn],[(_i+li)*255,(Gi+li)*255,($i+li)*255]}function ie(T,v,C){const z=ns(T/255,0,1),ae=ns(v/255,0,1),Ye=ns(C/255,0,1),wt=Math.max(z,ae,Ye),yn=Math.min(z,ae,Ye),li=wt-yn;let _i;li===0?_i=0:wt===z?_i=60*(((ae-Ye)/li%6+6)%6):wt===ae?_i=60*((Ye-z)/li+2):_i=60*((z-ae)/li+4);const Gi=wt===0?0:li/wt,$i=wt;return[_i,Gi*100,$i*100]}function Ne(T,v,C){const z=xu(T,360),ae=ns(v/100,0,1),Ye=ns(C/100,0,1),wt=Ye*ae,yn=wt*(1-Math.abs(z/60%2-1)),li=Ye-wt;let _i,Gi,$i;return z>=0&&z<60?[_i,Gi,$i]=[wt,yn,0]:z>=60&&z<120?[_i,Gi,$i]=[yn,wt,0]:z>=120&&z<180?[_i,Gi,$i]=[0,wt,yn]:z>=180&&z<240?[_i,Gi,$i]=[0,yn,wt]:z>=240&&z<300?[_i,Gi,$i]=[yn,0,wt]:[_i,Gi,$i]=[wt,0,yn],[(_i+li)*255,(Gi+li)*255,($i+li)*255]}function xt(T,v,C){const z=C+v*(100-Math.abs(2*C-100))/200;return[T,z!==0?v*(100-Math.abs(2*C-100))/z:0,C+v*(100-Math.abs(2*C-100))/(2*100)]}function $t(T,v,C){const z=100-Math.abs(C*(200-v)/100-100);return[T,z!==0?v*C/z:0,C*(200-v)/(2*100)]}function In(T){return[T[0],T[1],T[2]]}function gr(T,v){return[T[0],T[1],T[2],v]}const is={hsl:{hsl:(T,v,C)=>[T,v,C],hsv:xt,rgb:j},hsv:{hsl:$t,hsv:(T,v,C)=>[T,v,C],rgb:Ne},rgb:{hsl:D,hsv:ie,rgb:(T,v,C)=>[T,v,C]}};function yo(T,v){return[v==="float"?1:T==="rgb"?255:360,v==="float"?1:T==="rgb"?255:100,v==="float"?1:T==="rgb"?255:100]}function Ic(T,v,C){var z;const ae=yo(v,C);return[v==="rgb"?ns(T[0],0,ae[0]):xu(T[0],ae[0]),ns(T[1],0,ae[1]),ns(T[2],0,ae[2]),ns((z=T[3])!==null&&z!==void 0?z:1,0,1)]}function gf(T,v,C,z){const ae=yo(v,C),Ye=yo(v,z);return T.map((wt,yn)=>wt/ae[yn]*Ye[yn])}function o1(T,v,C){const z=gf(T,v.mode,v.type,"int"),ae=is[v.mode][C.mode](...z);return gf(ae,C.mode,"int",C.type)}function vm(T,v){return typeof T!="object"||y(T)?!1:v in T&&typeof T[v]=="number"}class nr{constructor(v,C,z="int"){this.mode=C,this.type=z,this.comps_=Ic(v,C,z)}static black(v="int"){return new nr([0,0,0],"rgb",v)}static fromObject(v,C="int"){const z="a"in v?[v.r,v.g,v.b,v.a]:[v.r,v.g,v.b];return new nr(z,"rgb",C)}static toRgbaObject(v,C="int"){return v.toRgbaObject(C)}static isRgbColorObject(v){return vm(v,"r")&&vm(v,"g")&&vm(v,"b")}static isRgbaColorObject(v){return this.isRgbColorObject(v)&&vm(v,"a")}static isColorObject(v){return this.isRgbColorObject(v)}static equals(v,C){if(v.mode!==C.mode)return!1;const z=v.comps_,ae=C.comps_;for(let Ye=0;Ye<z.length;Ye++)if(z[Ye]!==ae[Ye])return!1;return!0}getComponents(v,C="int"){return gr(o1(In(this.comps_),{mode:this.mode,type:this.type},{mode:v!=null?v:this.mode,type:C}),this.comps_[3])}toRgbaObject(v="int"){const C=this.getComponents("rgb",v);return{r:C[0],g:C[1],b:C[2],a:C[3]}}}const da=B("colp");class ym{constructor(v,C){this.alphaViews_=null,this.element=v.createElement("div"),this.element.classList.add(da());const z=v.createElement("div");z.classList.add(da("hsv"));const ae=v.createElement("div");ae.classList.add(da("sv")),this.svPaletteView_=C.svPaletteView,ae.appendChild(this.svPaletteView_.element),z.appendChild(ae);const Ye=v.createElement("div");Ye.classList.add(da("h")),this.hPaletteView_=C.hPaletteView,Ye.appendChild(this.hPaletteView_.element),z.appendChild(Ye),this.element.appendChild(z);const wt=v.createElement("div");if(wt.classList.add(da("rgb")),this.textView_=C.textView,wt.appendChild(this.textView_.element),this.element.appendChild(wt),C.alphaViews){this.alphaViews_={palette:C.alphaViews.palette,text:C.alphaViews.text};const yn=v.createElement("div");yn.classList.add(da("a"));const li=v.createElement("div");li.classList.add(da("ap")),li.appendChild(this.alphaViews_.palette.element),yn.appendChild(li);const _i=v.createElement("div");_i.classList.add(da("at")),_i.appendChild(this.alphaViews_.text.element),yn.appendChild(_i),this.element.appendChild(yn)}}get allFocusableElements(){const v=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(C=>C.inputElement)];return this.alphaViews_&&v.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),v}}function m5(T){return T==="int"?"int":T==="float"?"float":void 0}function a1(T){const v=Se;return gt(T,{alpha:v.optional.boolean,color:v.optional.object({alpha:v.optional.boolean,type:v.optional.custom(m5)}),expanded:v.optional.boolean,picker:v.optional.custom(pm)})}function Eu(T){return T?.1:1}function Tu(T){var v;return(v=T.color)===null||v===void 0?void 0:v.type}function Oa(T,v){return T.alpha===v.alpha&&T.mode===v.mode&&T.notation===v.notation&&T.type===v.type}function fa(T,v){const C=T.match(/^(.+)%$/);return Math.min(C?parseFloat(C[1])*.01*v:parseFloat(T),v)}const l1={deg:T=>T,grad:T=>T*360/400,rad:T=>T*360/(2*Math.PI),turn:T=>T*360};function _m(T){const v=T.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!v)return parseFloat(T);const C=parseFloat(v[1]),z=v[2];return l1[z](C)}function V_(T){const v=T.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!v)return null;const C=[fa(v[1],255),fa(v[2],255),fa(v[3],255)];return isNaN(C[0])||isNaN(C[1])||isNaN(C[2])?null:C}function W_(T){return v=>{const C=V_(v);return C?new nr(C,"rgb",T):null}}function c1(T){const v=T.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!v)return null;const C=[fa(v[1],255),fa(v[2],255),fa(v[3],255),fa(v[4],1)];return isNaN(C[0])||isNaN(C[1])||isNaN(C[2])||isNaN(C[3])?null:C}function bm(T){return v=>{const C=c1(v);return C?new nr(C,"rgb",T):null}}function z_(T){const v=T.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!v)return null;const C=[_m(v[1]),fa(v[2],100),fa(v[3],100)];return isNaN(C[0])||isNaN(C[1])||isNaN(C[2])?null:C}function u1(T){return v=>{const C=z_(v);return C?new nr(C,"hsl",T):null}}function xm(T){const v=T.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!v)return null;const C=[_m(v[1]),fa(v[2],100),fa(v[3],100),fa(v[4],1)];return isNaN(C[0])||isNaN(C[1])||isNaN(C[2])||isNaN(C[3])?null:C}function h1(T){return v=>{const C=xm(v);return C?new nr(C,"hsl",T):null}}function vf(T){const v=T.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(v)return[parseInt(v[1]+v[1],16),parseInt(v[2]+v[2],16),parseInt(v[3]+v[3],16)];const C=T.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return C?[parseInt(C[1],16),parseInt(C[2],16),parseInt(C[3],16)]:null}function g5(T){const v=vf(T);return v?new nr(v,"rgb","int"):null}function U_(T){const v=T.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(v)return[parseInt(v[1]+v[1],16),parseInt(v[2]+v[2],16),parseInt(v[3]+v[3],16),Sr(parseInt(v[4]+v[4],16),0,255,0,1)];const C=T.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return C?[parseInt(C[1],16),parseInt(C[2],16),parseInt(C[3],16),Sr(parseInt(C[4],16),0,255,0,1)]:null}function G_(T){const v=U_(T);return v?new nr(v,"rgb","int"):null}function H_(T){const v=T.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!v)return null;const C=[parseFloat(v[1]),parseFloat(v[2]),parseFloat(v[3])];return isNaN(C[0])||isNaN(C[1])||isNaN(C[2])?null:C}function Y_(T){return v=>{const C=H_(v);return C?new nr(C,"rgb",T):null}}function j_(T){const v=T.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!v)return null;const C=[parseFloat(v[1]),parseFloat(v[2]),parseFloat(v[3]),parseFloat(v[4])];return isNaN(C[0])||isNaN(C[1])||isNaN(C[2])||isNaN(C[3])?null:C}function $_(T){return v=>{const C=j_(v);return C?new nr(C,"rgb",T):null}}const Hh=[{parser:vf,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:U_,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:V_,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:c1,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:z_,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:xm,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:H_,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:j_,result:{alpha:!0,mode:"rgb",notation:"object"}}];function yf(T){return Hh.reduce((v,{parser:C,result:z})=>v||(C(T)?z:null),null)}function Mu(T,v="int"){const C=yf(T);return C?C.notation==="hex"&&v!=="float"?Object.assign(Object.assign({},C),{type:"int"}):C.notation==="func"?Object.assign(Object.assign({},C),{type:v}):null:null}const d1={int:[g5,G_,W_("int"),bm("int"),u1("int"),h1("int"),Y_("int"),$_("int")],float:[W_("float"),bm("float"),u1("float"),h1("float"),Y_("float"),$_("float")]};function wm(T){const v=d1[T];return C=>{if(typeof C!="string")return nr.black(T);const z=v.reduce((ae,Ye)=>ae||Ye(C),null);return z!=null?z:nr.black(T)}}function Au(T){const v=d1[T];return C=>v.reduce((z,ae)=>z||ae(C),null)}function _f(T){const v=ns(Math.floor(T),0,255).toString(16);return v.length===1?`0${v}`:v}function Dc(T,v="#"){const C=In(T.getComponents("rgb")).map(_f).join("");return`${v}${C}`}function Yh(T,v="#"){const C=T.getComponents("rgb"),z=[C[0],C[1],C[2],C[3]*255].map(_f).join("");return`${v}${z}`}function jh(T,v){const C=Or(v==="float"?2:0);return`rgb(${In(T.getComponents("rgb",v)).map(z=>C(z)).join(", ")})`}function q_(T){return v=>jh(v,T)}function $h(T,v){const C=Or(2),z=Or(v==="float"?2:0);return`rgba(${T.getComponents("rgb",v).map((ae,Ye)=>(Ye===3?C:z)(ae)).join(", ")})`}function v5(T){return v=>$h(v,T)}function km(T){const v=[Or(0),ol,ol];return`hsl(${In(T.getComponents("hsl")).map((C,z)=>v[z](C)).join(", ")})`}function X_(T){const v=[Or(0),ol,ol,Or(2)];return`hsla(${T.getComponents("hsl").map((C,z)=>v[z](C)).join(", ")})`}function Z_(T,v){const C=Or(v==="float"?2:0),z=["r","g","b"];return`{${In(T.getComponents("rgb",v)).map((ae,Ye)=>`${z[Ye]}: ${C(ae)}`).join(", ")}}`}function K_(T){return v=>Z_(v,T)}function J_(T,v){const C=Or(2),z=Or(v==="float"?2:0),ae=["r","g","b","a"];return`{${T.getComponents("rgb",v).map((Ye,wt)=>{const yn=wt===3?C:z;return`${ae[wt]}: ${yn(Ye)}`}).join(", ")}}`}function y5(T){return v=>J_(v,T)}const f1=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Dc},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Yh},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:km},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:X_},...["int","float"].reduce((T,v)=>[...T,{format:{alpha:!1,mode:"rgb",notation:"func",type:v},stringifier:q_(v)},{format:{alpha:!0,mode:"rgb",notation:"func",type:v},stringifier:v5(v)},{format:{alpha:!1,mode:"rgb",notation:"object",type:v},stringifier:K_(v)},{format:{alpha:!0,mode:"rgb",notation:"object",type:v},stringifier:y5(v)}],[])];function Cm(T){return f1.reduce((v,C)=>v||(Oa(C.format,T)?C.stringifier:null),null)}const bf=B("apl");class _5{constructor(v,C){this.onValueChange_=this.onValueChange_.bind(this),this.value=C.value,this.value.emitter.on("change",this.onValueChange_),this.element=v.createElement("div"),this.element.classList.add(bf()),C.viewProps.bindTabIndex(this.element);const z=v.createElement("div");z.classList.add(bf("b")),this.element.appendChild(z);const ae=v.createElement("div");ae.classList.add(bf("c")),z.appendChild(ae),this.colorElem_=ae;const Ye=v.createElement("div");Ye.classList.add(bf("m")),this.element.appendChild(Ye),this.markerElem_=Ye;const wt=v.createElement("div");wt.classList.add(bf("p")),this.markerElem_.appendChild(wt),this.previewElem_=wt,this.update_()}update_(){const v=this.value.rawValue,C=v.getComponents("rgb"),z=new nr([C[0],C[1],C[2],0],"rgb"),ae=new nr([C[0],C[1],C[2],255],"rgb"),Ye=["to right",$h(z),$h(ae)];this.colorElem_.style.background=`linear-gradient(${Ye.join(",")})`,this.previewElem_.style.backgroundColor=$h(v);const wt=Sr(C[3],0,1,0,100);this.markerElem_.style.left=`${wt}%`}onValueChange_(){this.update_()}}class Q_{constructor(v,C){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=C.value,this.viewProps=C.viewProps,this.view=new _5(v,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qo(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(v,C){if(!v.point)return;const z=v.point.x/v.bounds.width,ae=this.value.rawValue,[Ye,wt,yn]=ae.getComponents("hsv");this.value.setRawValue(new nr([Ye,wt,yn,z],"hsv"),C)}onPointerDown_(v){this.handlePointerEvent_(v.data,{forceEmit:!1,last:!1})}onPointerMove_(v){this.handlePointerEvent_(v.data,{forceEmit:!1,last:!1})}onPointerUp_(v){this.handlePointerEvent_(v.data,{forceEmit:!0,last:!0})}onKeyDown_(v){const C=Ys(Eu(!0),Ra(v));if(C===0)return;const z=this.value.rawValue,[ae,Ye,wt,yn]=z.getComponents("hsv");this.value.setRawValue(new nr([ae,Ye,wt,yn+C],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(v){Ys(Eu(!0),Ra(v))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Lu=B("coltxt");function p1(T){const v=T.createElement("select"),C=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return v.appendChild(C.reduce((z,ae)=>{const Ye=T.createElement("option");return Ye.textContent=ae.text,Ye.value=ae.value,z.appendChild(Ye),z},T.createDocumentFragment())),v}class Sm{constructor(v,C){this.element=v.createElement("div"),this.element.classList.add(Lu());const z=v.createElement("div");z.classList.add(Lu("m")),this.modeElem_=p1(v),this.modeElem_.classList.add(Lu("ms")),z.appendChild(this.modeSelectElement);const ae=v.createElement("div");ae.classList.add(Lu("mm")),ae.appendChild(It(v,"dropdown")),z.appendChild(ae),this.element.appendChild(z);const Ye=v.createElement("div");Ye.classList.add(Lu("w")),this.element.appendChild(Ye),this.textsElem_=Ye,this.textViews_=C.textViews,this.applyTextViews_(),U(C.colorMode,wt=>{this.modeElem_.value=wt})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(v){this.textViews_=v,this.applyTextViews_()}applyTextViews_(){Ut(this.textsElem_);const v=this.element.ownerDocument;this.textViews_.forEach(C=>{const z=v.createElement("div");z.classList.add(Lu("c")),z.appendChild(C.element),this.textsElem_.appendChild(z)})}}function eb(T){return Or(T==="float"?2:0)}function m1(T,v,C){const z=yo(T,v)[C];return new Cc({min:0,max:z})}function qh(T,v,C){return new Xr(T,{arrayPosition:C===0?"fst":C===3-1?"lst":"mid",baseStep:Eu(!1),parser:v.parser,props:tt.fromObject({draggingScale:v.colorType==="float"?.01:1,formatter:eb(v.colorType)}),value:it(0,{constraint:m1(v.colorMode,v.colorType,C)}),viewProps:v.viewProps})}class Em{constructor(v,C){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=C.colorType,this.parser_=C.parser,this.value=C.value,this.viewProps=C.viewProps,this.colorMode=it(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(v),this.view=new Sm(v,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(v){const C={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},z=[qh(v,C,0),qh(v,C,1),qh(v,C,2)];return z.forEach((ae,Ye)=>{_u({primary:this.value,secondary:ae.value,forward:wt=>wt.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[Ye],backward:(wt,yn)=>{const li=this.colorMode.rawValue,_i=wt.rawValue.getComponents(li,this.colorType_);return _i[Ye]=yn.rawValue,new nr(gr(In(_i),_i[3]),li,this.colorType_)}})}),z}onModeSelectChange_(v){const C=v.currentTarget;this.colorMode.rawValue=C.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const xf=B("hpl");class cl{constructor(v,C){this.onValueChange_=this.onValueChange_.bind(this),this.value=C.value,this.value.emitter.on("change",this.onValueChange_),this.element=v.createElement("div"),this.element.classList.add(xf()),C.viewProps.bindTabIndex(this.element);const z=v.createElement("div");z.classList.add(xf("c")),this.element.appendChild(z);const ae=v.createElement("div");ae.classList.add(xf("m")),this.element.appendChild(ae),this.markerElem_=ae,this.update_()}update_(){const v=this.value.rawValue,[C]=v.getComponents("hsv");this.markerElem_.style.backgroundColor=jh(new nr([C,100,100],"hsv"));const z=Sr(C,0,360,0,100);this.markerElem_.style.left=`${z}%`}onValueChange_(){this.update_()}}class Fa{constructor(v,C){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=C.value,this.viewProps=C.viewProps,this.view=new cl(v,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qo(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(v,C){if(!v.point)return;const z=Sr(ns(v.point.x,0,v.bounds.width),0,v.bounds.width,0,359),ae=this.value.rawValue,[,Ye,wt,yn]=ae.getComponents("hsv");this.value.setRawValue(new nr([z,Ye,wt,yn],"hsv"),C)}onPointerDown_(v){this.handlePointerEvent_(v.data,{forceEmit:!1,last:!1})}onPointerMove_(v){this.handlePointerEvent_(v.data,{forceEmit:!1,last:!1})}onPointerUp_(v){this.handlePointerEvent_(v.data,{forceEmit:!0,last:!0})}onKeyDown_(v){const C=Ys(Eu(!1),Ra(v));if(C===0)return;const z=this.value.rawValue,[ae,Ye,wt,yn]=z.getComponents("hsv");this.value.setRawValue(new nr([ae+C,Ye,wt,yn],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(v){Ys(Eu(!1),Ra(v))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const g1=B("svp"),tb=64;class b5{constructor(v,C){this.onValueChange_=this.onValueChange_.bind(this),this.value=C.value,this.value.emitter.on("change",this.onValueChange_),this.element=v.createElement("div"),this.element.classList.add(g1()),C.viewProps.bindTabIndex(this.element);const z=v.createElement("canvas");z.height=tb,z.width=tb,z.classList.add(g1("c")),this.element.appendChild(z),this.canvasElement=z;const ae=v.createElement("div");ae.classList.add(g1("m")),this.element.appendChild(ae),this.markerElem_=ae,this.update_()}update_(){const v=at(this.canvasElement);if(!v)return;const C=this.value.rawValue.getComponents("hsv"),z=this.canvasElement.width,ae=this.canvasElement.height,Ye=v.getImageData(0,0,z,ae),wt=Ye.data;for(let _i=0;_i<ae;_i++)for(let Gi=0;Gi<z;Gi++){const $i=Sr(Gi,0,z,0,100),oo=Sr(_i,0,ae,100,0),Xo=Ne(C[0],$i,oo),Wc=(_i*z+Gi)*4;wt[Wc]=Xo[0],wt[Wc+1]=Xo[1],wt[Wc+2]=Xo[2],wt[Wc+3]=255}v.putImageData(Ye,0,0);const yn=Sr(C[1],0,100,0,100);this.markerElem_.style.left=`${yn}%`;const li=Sr(C[2],0,100,100,0);this.markerElem_.style.top=`${li}%`}onValueChange_(){this.update_()}}class x5{constructor(v,C){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=C.value,this.viewProps=C.viewProps,this.view=new b5(v,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qo(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(v,C){if(!v.point)return;const z=Sr(v.point.x,0,v.bounds.width,0,100),ae=Sr(v.point.y,0,v.bounds.height,100,0),[Ye,,,wt]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new nr([Ye,z,ae,wt],"hsv"),C)}onPointerDown_(v){this.handlePointerEvent_(v.data,{forceEmit:!1,last:!1})}onPointerMove_(v){this.handlePointerEvent_(v.data,{forceEmit:!1,last:!1})}onPointerUp_(v){this.handlePointerEvent_(v.data,{forceEmit:!0,last:!0})}onKeyDown_(v){Wh(v.key)&&v.preventDefault();const[C,z,ae,Ye]=this.value.rawValue.getComponents("hsv"),wt=Eu(!1),yn=Ys(wt,Ra(v)),li=Ys(wt,bu(v));yn===0&&li===0||this.value.setRawValue(new nr([C,z+yn,ae+li,Ye],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(v){const C=Eu(!1),z=Ys(C,Ra(v)),ae=Ys(C,bu(v));z===0&&ae===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class w5{constructor(v,C){this.value=C.value,this.viewProps=C.viewProps,this.hPaletteC_=new Fa(v,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new x5(v,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=C.supportsAlpha?{palette:new Q_(v,{value:this.value,viewProps:this.viewProps}),text:new Xr(v,{parser:Lo,baseStep:.1,props:tt.fromObject({draggingScale:.01,formatter:Or(2)}),value:it(0,{constraint:new Cc({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&_u({primary:this.value,secondary:this.alphaIcs_.text.value,forward:z=>z.rawValue.getComponents()[3],backward:(z,ae)=>{const Ye=z.rawValue.getComponents();return Ye[3]=ae.rawValue,new nr(Ye,z.rawValue.mode)}}),this.textC_=new Em(v,{colorType:C.colorType,parser:Lo,value:this.value,viewProps:this.viewProps}),this.view=new ym(v,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:C.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const v1=B("colsw");class y1{constructor(v,C){this.onValueChange_=this.onValueChange_.bind(this),C.value.emitter.on("change",this.onValueChange_),this.value=C.value,this.element=v.createElement("div"),this.element.classList.add(v1()),C.viewProps.bindClassModifiers(this.element);const z=v.createElement("div");z.classList.add(v1("sw")),this.element.appendChild(z),this.swatchElem_=z;const ae=v.createElement("button");ae.classList.add(v1("b")),C.viewProps.bindDisabled(ae),this.element.appendChild(ae),this.buttonElement=ae,this.update_()}update_(){const v=this.value.rawValue;this.swatchElem_.style.backgroundColor=Yh(v)}onValueChange_(){this.update_()}}class nb{constructor(v,C){this.value=C.value,this.viewProps=C.viewProps,this.view=new y1(v,{value:this.value,viewProps:this.viewProps})}}class _1{constructor(v,C){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=C.value,this.viewProps=C.viewProps,this.foldable_=Xe.create(C.expanded),this.swatchC_=new nb(v,{value:this.value,viewProps:this.viewProps});const z=this.swatchC_.view.buttonElement;z.addEventListener("blur",this.onButtonBlur_),z.addEventListener("click",this.onButtonClick_),this.textC_=new Fh(v,{parser:C.parser,props:tt.fromObject({formatter:C.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new J(v,{foldable:this.foldable_,pickerLayout:C.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=C.pickerLayout==="popup"?new lf(v,{viewProps:this.viewProps}):null;const ae=new w5(v,{colorType:C.colorType,supportsAlpha:C.supportsAlpha,value:this.value,viewProps:this.viewProps});ae.view.allFocusableElements.forEach(Ye=>{Ye.addEventListener("blur",this.onPopupChildBlur_),Ye.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=ae,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(ae.view.element),_u({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:Ye=>Ye.rawValue,backward:(Ye,wt)=>wt.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Rn(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(v){if(!this.popC_)return;const C=this.view.element,z=v.relatedTarget;(!z||!C.contains(z))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(v){if(!this.popC_)return;const C=this.popC_.view.element,z=we(v);z&&C.contains(z)||z&&z===this.swatchC_.view.buttonElement&&!oe(C.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(v){this.popC_?v.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&v.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function k5(T,v){return nr.isColorObject(T)?nr.fromObject(T,v):nr.black(v)}function C5(T){return In(T.getComponents("rgb")).reduce((v,C)=>v<<8|Math.floor(C)&255,0)}function S5(T){return T.getComponents("rgb").reduce((v,C,z)=>{const ae=Math.floor(z===3?C*255:C)&255;return v<<8|ae},0)>>>0}function E5(T){return new nr([T>>16&255,T>>8&255,T&255],"rgb")}function T5(T){return new nr([T>>24&255,T>>16&255,T>>8&255,Sr(T&255,0,255,0,1)],"rgb")}function M5(T){return typeof T!="number"?nr.black():E5(T)}function A5(T){return typeof T!="number"?nr.black():T5(T)}function L5(T){const v=Cm(T);return v?(C,z)=>{Lc(C,v(z))}:null}function R5(T){const v=T?S5:C5;return(C,z)=>{Lc(C,v(z))}}function P5(T,v,C){const z=v.toRgbaObject(C);T.writeProperty("r",z.r),T.writeProperty("g",z.g),T.writeProperty("b",z.b),T.writeProperty("a",z.a)}function I5(T,v,C){const z=v.toRgbaObject(C);T.writeProperty("r",z.r),T.writeProperty("g",z.g),T.writeProperty("b",z.b)}function D5(T,v){return(C,z)=>{T?P5(C,z,v):I5(C,z,v)}}function b1(T){var v;return!!((T==null?void 0:T.alpha)||((v=T==null?void 0:T.color)===null||v===void 0?void 0:v.alpha))}function N5(T){return T?v=>Yh(v,"0x"):v=>Dc(v,"0x")}function O5(T){return"color"in T||"view"in T&&T.view==="color"}const F5={id:"input-color-number",type:"input",accept:(T,v)=>{if(typeof T!="number"||!O5(v))return null;const C=a1(v);return C?{initialValue:T,params:C}:null},binding:{reader:T=>b1(T.params)?A5:M5,equals:nr.equals,writer:T=>R5(b1(T.params))},controller:T=>{const v=b1(T.params),C="expanded"in T.params?T.params.expanded:void 0,z="picker"in T.params?T.params.picker:void 0;return new _1(T.document,{colorType:"int",expanded:C!=null?C:!1,formatter:N5(v),parser:Au("int"),pickerLayout:z!=null?z:"popup",supportsAlpha:v,value:T.value,viewProps:T.viewProps})}};function B5(T){return nr.isRgbaColorObject(T)}function V5(T){return v=>k5(v,T)}function W5(T,v){return C=>T?J_(C,v):Z_(C,v)}const z5={id:"input-color-object",type:"input",accept:(T,v)=>{if(!nr.isColorObject(T))return null;const C=a1(v);return C?{initialValue:T,params:C}:null},binding:{reader:T=>V5(Tu(T.params)),equals:nr.equals,writer:T=>D5(B5(T.initialValue),Tu(T.params))},controller:T=>{var v;const C=nr.isRgbaColorObject(T.initialValue),z="expanded"in T.params?T.params.expanded:void 0,ae="picker"in T.params?T.params.picker:void 0,Ye=(v=Tu(T.params))!==null&&v!==void 0?v:"int";return new _1(T.document,{colorType:Ye,expanded:z!=null?z:!1,formatter:W5(C,Ye),parser:Au(Ye),pickerLayout:ae!=null?ae:"popup",supportsAlpha:C,value:T.value,viewProps:T.viewProps})}},U5={id:"input-color-string",type:"input",accept:(T,v)=>{if(typeof T!="string"||"view"in v&&v.view==="text")return null;const C=Mu(T,Tu(v));if(!C||!Cm(C))return null;const z=a1(v);return z?{initialValue:T,params:z}:null},binding:{reader:T=>{var v;return wm((v=Tu(T.params))!==null&&v!==void 0?v:"int")},equals:nr.equals,writer:T=>{const v=Mu(T.initialValue,Tu(T.params));if(!v)throw S.shouldNeverHappen();const C=L5(v);if(!C)throw S.notBindable();return C}},controller:T=>{const v=Mu(T.initialValue,Tu(T.params));if(!v)throw S.shouldNeverHappen();const C=Cm(v);if(!C)throw S.shouldNeverHappen();const z="expanded"in T.params?T.params.expanded:void 0,ae="picker"in T.params?T.params.picker:void 0;return new _1(T.document,{colorType:v.type,expanded:z!=null?z:!1,formatter:C,parser:Au(v.type),pickerLayout:ae!=null?ae:"popup",supportsAlpha:v.alpha,value:T.value,viewProps:T.viewProps})}};class Nc{constructor(v){this.components=v.components,this.asm_=v.assembly}constrain(v){const C=this.asm_.toComponents(v).map((z,ae)=>{var Ye,wt;return(wt=(Ye=this.components[ae])===null||Ye===void 0?void 0:Ye.constrain(z))!==null&&wt!==void 0?wt:z});return this.asm_.fromComponents(C)}}const ib=B("pndtxt");class G5{constructor(v,C){this.textViews=C.textViews,this.element=v.createElement("div"),this.element.classList.add(ib()),this.textViews.forEach(z=>{const ae=v.createElement("div");ae.classList.add(ib("a")),ae.appendChild(z.element),this.element.appendChild(ae)})}}function H5(T,v,C){return new Xr(T,{arrayPosition:C===0?"fst":C===v.axes.length-1?"lst":"mid",baseStep:v.axes[C].baseStep,parser:v.parser,props:v.axes[C].textProps,value:it(0,{constraint:v.axes[C].constraint}),viewProps:v.viewProps})}class x1{constructor(v,C){this.value=C.value,this.viewProps=C.viewProps,this.acs_=C.axes.map((z,ae)=>H5(v,C,ae)),this.acs_.forEach((z,ae)=>{_u({primary:this.value,secondary:z.value,forward:Ye=>C.assembly.toComponents(Ye.rawValue)[ae],backward:(Ye,wt)=>{const yn=C.assembly.toComponents(Ye.rawValue);return yn[ae]=wt.rawValue,C.assembly.fromComponents(yn)}})}),this.view=new G5(v,{textViews:this.acs_.map(z=>z.view)})}}function rb(T,v){return"step"in T&&!y(T.step)?new Nh(T.step,v):null}function sb(T){return"max"in T&&!y(T.max)||"min"in T&&!y(T.min)?new Cc({max:T.max,min:T.min}):null}function Y5(T,v){const C=[],z=rb(T,v);z&&C.push(z);const ae=sb(T);ae&&C.push(ae);const Ye=Rc(T.options);return Ye&&C.push(Ye),new jo(C)}function j5(T){const v=T?so(T,Cc):null;return v?[v.minValue,v.maxValue]:[void 0,void 0]}function $5(T){const[v,C]=j5(T);return[v!=null?v:0,C!=null?C:100]}const q5={id:"input-number",type:"input",accept:(T,v)=>{if(typeof T!="number")return null;const C=Se,z=gt(v,{format:C.optional.function,max:C.optional.number,min:C.optional.number,options:C.optional.custom(wu),step:C.optional.number});return z?{initialValue:T,params:z}:null},binding:{reader:T=>vo,constraint:T=>Y5(T.params,T.initialValue),writer:T=>Lc},controller:T=>{var v,C;const z=T.value,ae=T.constraint;if(ae&&so(ae,As))return new Ec(T.document,{props:tt.fromObject({options:(v=ku(ae))!==null&&v!==void 0?v:[]}),value:z,viewProps:T.viewProps});const Ye=(C="format"in T.params?T.params.format:void 0)!==null&&C!==void 0?C:Or(Uh(ae,z.rawValue));if(ae&&so(ae,Cc)){const[wt,yn]=$5(ae);return new Ia(T.document,{baseStep:Da(ae),parser:Lo,sliderProps:tt.fromObject({maxValue:yn,minValue:wt}),textProps:tt.fromObject({draggingScale:Na(ae,z.rawValue),formatter:Ye}),value:z,viewProps:T.viewProps})}return new Xr(T.document,{baseStep:Da(ae),parser:Lo,props:tt.fromObject({draggingScale:Na(ae,z.rawValue),formatter:Ye}),value:z,viewProps:T.viewProps})}};class Oc{constructor(v=0,C=0){this.x=v,this.y=C}getComponents(){return[this.x,this.y]}static isObject(v){if(y(v))return!1;const C=v.x,z=v.y;return!(typeof C!="number"||typeof z!="number")}static equals(v,C){return v.x===C.x&&v.y===C.y}toObject(){return{x:this.x,y:this.y}}}const w1={toComponents:T=>T.getComponents(),fromComponents:T=>new Oc(...T)},Xh=B("p2d");class X5{constructor(v,C){this.element=v.createElement("div"),this.element.classList.add(Xh()),C.viewProps.bindClassModifiers(this.element),U(C.expanded,$(this.element,Xh(void 0,"expanded")));const z=v.createElement("div");z.classList.add(Xh("h")),this.element.appendChild(z);const ae=v.createElement("button");ae.classList.add(Xh("b")),ae.appendChild(It(v,"p2dpad")),C.viewProps.bindDisabled(ae),z.appendChild(ae),this.buttonElement=ae;const Ye=v.createElement("div");if(Ye.classList.add(Xh("t")),z.appendChild(Ye),this.textElement=Ye,C.pickerLayout==="inline"){const wt=v.createElement("div");wt.classList.add(Xh("p")),this.element.appendChild(wt),this.pickerElement=wt}else this.pickerElement=null}}const Fc=B("p2dp");class Z5{constructor(v,C){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=C.invertsY,this.maxValue_=C.maxValue,this.element=v.createElement("div"),this.element.classList.add(Fc()),C.layout==="popup"&&this.element.classList.add(Fc(void 0,"p"));const z=v.createElement("div");z.classList.add(Fc("p")),C.viewProps.bindTabIndex(z),this.element.appendChild(z),this.padElement=z;const ae=v.createElementNS(Vt,"svg");ae.classList.add(Fc("g")),this.padElement.appendChild(ae),this.svgElem_=ae;const Ye=v.createElementNS(Vt,"line");Ye.classList.add(Fc("ax")),Ye.setAttributeNS(null,"x1","0"),Ye.setAttributeNS(null,"y1","50%"),Ye.setAttributeNS(null,"x2","100%"),Ye.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(Ye);const wt=v.createElementNS(Vt,"line");wt.classList.add(Fc("ax")),wt.setAttributeNS(null,"x1","50%"),wt.setAttributeNS(null,"y1","0"),wt.setAttributeNS(null,"x2","50%"),wt.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(wt);const yn=v.createElementNS(Vt,"line");yn.classList.add(Fc("l")),yn.setAttributeNS(null,"x1","50%"),yn.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(yn),this.lineElem_=yn;const li=v.createElement("div");li.classList.add(Fc("m")),this.padElement.appendChild(li),this.markerElem_=li,C.value.emitter.on("change",this.onValueChange_),this.value=C.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[v,C]=this.value.rawValue.getComponents(),z=this.maxValue_,ae=Sr(v,-z,+z,0,100),Ye=Sr(C,-z,+z,0,100),wt=this.invertsY_?100-Ye:Ye;this.lineElem_.setAttributeNS(null,"x2",`${ae}%`),this.lineElem_.setAttributeNS(null,"y2",`${wt}%`),this.markerElem_.style.left=`${ae}%`,this.markerElem_.style.top=`${wt}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function ob(T,v,C){return[Ys(v[0],Ra(T)),Ys(v[1],bu(T))*(C?1:-1)]}class K5{constructor(v,C){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=C.value,this.viewProps=C.viewProps,this.baseSteps_=C.baseSteps,this.maxValue_=C.maxValue,this.invertsY_=C.invertsY,this.view=new Z5(v,{invertsY:this.invertsY_,layout:C.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qo(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(v,C){if(!v.point)return;const z=this.maxValue_,ae=Sr(v.point.x,0,v.bounds.width,-z,+z),Ye=Sr(this.invertsY_?v.bounds.height-v.point.y:v.point.y,0,v.bounds.height,-z,+z);this.value.setRawValue(new Oc(ae,Ye),C)}onPointerDown_(v){this.handlePointerEvent_(v.data,{forceEmit:!1,last:!1})}onPointerMove_(v){this.handlePointerEvent_(v.data,{forceEmit:!1,last:!1})}onPointerUp_(v){this.handlePointerEvent_(v.data,{forceEmit:!0,last:!0})}onPadKeyDown_(v){Wh(v.key)&&v.preventDefault();const[C,z]=ob(v,this.baseSteps_,this.invertsY_);C===0&&z===0||this.value.setRawValue(new Oc(this.value.rawValue.x+C,this.value.rawValue.y+z),{forceEmit:!1,last:!1})}onPadKeyUp_(v){const[C,z]=ob(v,this.baseSteps_,this.invertsY_);C===0&&z===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class J5{constructor(v,C){var z,ae;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=C.value,this.viewProps=C.viewProps,this.foldable_=Xe.create(C.expanded),this.popC_=C.pickerLayout==="popup"?new lf(v,{viewProps:this.viewProps}):null;const Ye=new K5(v,{baseSteps:[C.axes[0].baseStep,C.axes[1].baseStep],invertsY:C.invertsY,layout:C.pickerLayout,maxValue:C.maxValue,value:this.value,viewProps:this.viewProps});Ye.view.allFocusableElements.forEach(wt=>{wt.addEventListener("blur",this.onPopupChildBlur_),wt.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=Ye,this.textC_=new x1(v,{assembly:w1,axes:C.axes,parser:C.parser,value:this.value,viewProps:this.viewProps}),this.view=new X5(v,{expanded:this.foldable_.value("expanded"),pickerLayout:C.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(z=this.view.buttonElement)===null||z===void 0||z.addEventListener("blur",this.onPadButtonBlur_),(ae=this.view.buttonElement)===null||ae===void 0||ae.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),_u({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:wt=>wt.rawValue,backward:(wt,yn)=>yn.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Rn(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(v){if(!this.popC_)return;const C=this.view.element,z=v.relatedTarget;(!z||!C.contains(z))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(v){if(!this.popC_)return;const C=this.popC_.view.element,z=we(v);z&&C.contains(z)||z&&z===this.view.buttonElement&&!oe(C.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(v){this.popC_?v.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&v.key==="Escape"&&this.view.buttonElement.focus()}}function Q5(T){return Oc.isObject(T)?new Oc(T.x,T.y):new Oc}function ek(T,v){T.writeProperty("x",v.x),T.writeProperty("y",v.y)}function Nl(T,v){if(!T)return;const C=[],z=rb(T,v);z&&C.push(z);const ae=sb(T);return ae&&C.push(ae),new jo(C)}function tk(T,v){return new Nc({assembly:w1,components:[Nl("x"in T?T.x:void 0,v.x),Nl("y"in T?T.y:void 0,v.y)]})}function ab(T,v){var C,z;const ae=T&&so(T,Cc);if(ae)return Math.max(Math.abs((C=ae.minValue)!==null&&C!==void 0?C:0),Math.abs((z=ae.maxValue)!==null&&z!==void 0?z:0));const Ye=Da(T);return Math.max(Math.abs(Ye)*10,Math.abs(v)*10)}function nk(T,v){const C=v instanceof Nc?v.components[0]:void 0,z=v instanceof Nc?v.components[1]:void 0,ae=ab(C,T.x),Ye=ab(z,T.y);return Math.max(ae,Ye)}function lb(T,v){return{baseStep:Da(v),constraint:v,textProps:tt.fromObject({draggingScale:Na(v,T),formatter:Or(Uh(v,T))})}}function ik(T){if(!("y"in T))return!1;const v=T.y;return v&&"inverted"in v?!!v.inverted:!1}const rk={id:"input-point2d",type:"input",accept:(T,v)=>{if(!Oc.isObject(T))return null;const C=Se,z=gt(v,{expanded:C.optional.boolean,picker:C.optional.custom(pm),x:C.optional.custom(fs),y:C.optional.object({inverted:C.optional.boolean,max:C.optional.number,min:C.optional.number,step:C.optional.number})});return z?{initialValue:T,params:z}:null},binding:{reader:T=>Q5,constraint:T=>tk(T.params,T.initialValue),equals:Oc.equals,writer:T=>ek},controller:T=>{const v=T.document,C=T.value,z=T.constraint;if(!(z instanceof Nc))throw S.shouldNeverHappen();const ae="expanded"in T.params?T.params.expanded:void 0,Ye="picker"in T.params?T.params.picker:void 0;return new J5(v,{axes:[lb(C.rawValue.x,z.components[0]),lb(C.rawValue.y,z.components[1])],expanded:ae!=null?ae:!1,invertsY:ik(T.params),maxValue:nk(C.rawValue,z),parser:Lo,pickerLayout:Ye!=null?Ye:"popup",value:C,viewProps:T.viewProps})}};class Po{constructor(v=0,C=0,z=0){this.x=v,this.y=C,this.z=z}getComponents(){return[this.x,this.y,this.z]}static isObject(v){if(y(v))return!1;const C=v.x,z=v.y,ae=v.z;return!(typeof C!="number"||typeof z!="number"||typeof ae!="number")}static equals(v,C){return v.x===C.x&&v.y===C.y&&v.z===C.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const k1={toComponents:T=>T.getComponents(),fromComponents:T=>new Po(...T)};function Ol(T){return Po.isObject(T)?new Po(T.x,T.y,T.z):new Po}function sk(T,v){T.writeProperty("x",v.x),T.writeProperty("y",v.y),T.writeProperty("z",v.z)}function ok(T,v){return new Nc({assembly:k1,components:[Nl("x"in T?T.x:void 0,v.x),Nl("y"in T?T.y:void 0,v.y),Nl("z"in T?T.z:void 0,v.z)]})}function C1(T,v){return{baseStep:Da(v),constraint:v,textProps:tt.fromObject({draggingScale:Na(v,T),formatter:Or(Uh(v,T))})}}const ak={id:"input-point3d",type:"input",accept:(T,v)=>{if(!Po.isObject(T))return null;const C=Se,z=gt(v,{x:C.optional.custom(fs),y:C.optional.custom(fs),z:C.optional.custom(fs)});return z?{initialValue:T,params:z}:null},binding:{reader:T=>Ol,constraint:T=>ok(T.params,T.initialValue),equals:Po.equals,writer:T=>sk},controller:T=>{const v=T.value,C=T.constraint;if(!(C instanceof Nc))throw S.shouldNeverHappen();return new x1(T.document,{assembly:k1,axes:[C1(v.rawValue.x,C.components[0]),C1(v.rawValue.y,C.components[1]),C1(v.rawValue.z,C.components[2])],parser:Lo,value:v,viewProps:T.viewProps})}};class Bc{constructor(v=0,C=0,z=0,ae=0){this.x=v,this.y=C,this.z=z,this.w=ae}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(v){if(y(v))return!1;const C=v.x,z=v.y,ae=v.z,Ye=v.w;return!(typeof C!="number"||typeof z!="number"||typeof ae!="number"||typeof Ye!="number")}static equals(v,C){return v.x===C.x&&v.y===C.y&&v.z===C.z&&v.w===C.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Tm={toComponents:T=>T.getComponents(),fromComponents:T=>new Bc(...T)};function Ru(T){return Bc.isObject(T)?new Bc(T.x,T.y,T.z,T.w):new Bc}function lk(T,v){T.writeProperty("x",v.x),T.writeProperty("y",v.y),T.writeProperty("z",v.z),T.writeProperty("w",v.w)}function S1(T,v){return new Nc({assembly:Tm,components:[Nl("x"in T?T.x:void 0,v.x),Nl("y"in T?T.y:void 0,v.y),Nl("z"in T?T.z:void 0,v.z),Nl("w"in T?T.w:void 0,v.w)]})}function E1(T,v){return{baseStep:Da(v),constraint:v,textProps:tt.fromObject({draggingScale:Na(v,T),formatter:Or(Uh(v,T))})}}const ck={id:"input-point4d",type:"input",accept:(T,v)=>{if(!Bc.isObject(T))return null;const C=Se,z=gt(v,{x:C.optional.custom(fs),y:C.optional.custom(fs),z:C.optional.custom(fs),w:C.optional.custom(fs)});return z?{initialValue:T,params:z}:null},binding:{reader:T=>Ru,constraint:T=>S1(T.params,T.initialValue),equals:Bc.equals,writer:T=>lk},controller:T=>{const v=T.value,C=T.constraint;if(!(C instanceof Nc))throw S.shouldNeverHappen();return new x1(T.document,{assembly:Tm,axes:v.rawValue.getComponents().map((z,ae)=>E1(z,C.components[ae])),parser:Lo,value:v,viewProps:T.viewProps})}};function uk(T){const v=[],C=Rc(T.options);return C&&v.push(C),new jo(v)}const hk={id:"input-string",type:"input",accept:(T,v)=>{if(typeof T!="string")return null;const C=gt(v,{options:Se.optional.custom(wu)});return C?{initialValue:T,params:C}:null},binding:{reader:T=>al,constraint:T=>uk(T.params),writer:T=>Lc},controller:T=>{var v;const C=T.document,z=T.value,ae=T.constraint;return ae&&so(ae,As)?new Ec(C,{props:tt.fromObject({options:(v=ku(ae))!==null&&v!==void 0?v:[]}),value:z,viewProps:T.viewProps}):new Fh(C,{parser:Ye=>Ye,props:tt.fromObject({formatter:Ro}),value:z,viewProps:T.viewProps})}},wf={monitor:{defaultInterval:200,defaultLineCount:3}},cb=B("mll");class Mm{constructor(v,C){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=C.formatter,this.element=v.createElement("div"),this.element.classList.add(cb()),C.viewProps.bindClassModifiers(this.element);const z=v.createElement("textarea");z.classList.add(cb("i")),z.style.height=`calc(var(--bld-us) * ${C.lineCount})`,z.readOnly=!0,C.viewProps.bindDisabled(z),this.element.appendChild(z),this.textareaElem_=z,C.value.emitter.on("change",this.onValueUpdate_),this.value=C.value,this.update_()}update_(){const v=this.textareaElem_,C=v.scrollTop===v.scrollHeight-v.clientHeight,z=[];this.value.rawValue.forEach(ae=>{ae!==void 0&&z.push(this.formatter_(ae))}),v.textContent=z.join(`
`),C&&(v.scrollTop=v.scrollHeight)}onValueUpdate_(){this.update_()}}class Vc{constructor(v,C){this.value=C.value,this.viewProps=C.viewProps,this.view=new Mm(v,{formatter:C.formatter,lineCount:C.lineCount,value:this.value,viewProps:this.viewProps})}}const ub=B("sgl");class dk{constructor(v,C){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=C.formatter,this.element=v.createElement("div"),this.element.classList.add(ub()),C.viewProps.bindClassModifiers(this.element);const z=v.createElement("input");z.classList.add(ub("i")),z.readOnly=!0,z.type="text",C.viewProps.bindDisabled(z),this.element.appendChild(z),this.inputElement=z,C.value.emitter.on("change",this.onValueUpdate_),this.value=C.value,this.update_()}update_(){const v=this.value.rawValue,C=v[v.length-1];this.inputElement.value=C!==void 0?this.formatter_(C):""}onValueUpdate_(){this.update_()}}class T1{constructor(v,C){this.value=C.value,this.viewProps=C.viewProps,this.view=new dk(v,{formatter:C.formatter,value:this.value,viewProps:this.viewProps})}}const Am={id:"monitor-bool",type:"monitor",accept:(T,v)=>{if(typeof T!="boolean")return null;const C=gt(v,{lineCount:Se.optional.number});return C?{initialValue:T,params:C}:null},binding:{reader:T=>om},controller:T=>{var v;return T.value.rawValue.length===1?new T1(T.document,{formatter:am,value:T.value,viewProps:T.viewProps}):new Vc(T.document,{formatter:am,lineCount:(v=T.params.lineCount)!==null&&v!==void 0?v:wf.monitor.defaultLineCount,value:T.value,viewProps:T.viewProps})}},ul=B("grl");class fk{constructor(v,C){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=v.createElement("div"),this.element.classList.add(ul()),C.viewProps.bindClassModifiers(this.element),this.formatter_=C.formatter,this.props_=C.props,this.cursor_=C.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const z=v.createElementNS(Vt,"svg");z.classList.add(ul("g")),z.style.height=`calc(var(--bld-us) * ${C.lineCount})`,this.element.appendChild(z),this.svgElem_=z;const ae=v.createElementNS(Vt,"polyline");this.svgElem_.appendChild(ae),this.lineElem_=ae;const Ye=v.createElement("div");Ye.classList.add(ul("t"),B("tt")()),this.element.appendChild(Ye),this.tooltipElem_=Ye,C.value.emitter.on("change",this.onValueUpdate_),this.value=C.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const v=this.svgElem_.getBoundingClientRect(),C=this.value.rawValue.length-1,z=this.props_.get("minValue"),ae=this.props_.get("maxValue"),Ye=[];this.value.rawValue.forEach((Gi,$i)=>{if(Gi===void 0)return;const oo=Sr($i,0,C,0,v.width),Xo=Sr(Gi,z,ae,v.height,0);Ye.push([oo,Xo].join(","))}),this.lineElem_.setAttributeNS(null,"points",Ye.join(" "));const wt=this.tooltipElem_,yn=this.value.rawValue[this.cursor_.rawValue];if(yn===void 0){wt.classList.remove(ul("t","a"));return}const li=Sr(this.cursor_.rawValue,0,C,0,v.width),_i=Sr(yn,z,ae,v.height,0);wt.style.left=`${li}px`,wt.style.top=`${_i}px`,wt.textContent=`${this.formatter_(yn)}`,wt.classList.contains(ul("t","a"))||(wt.classList.add(ul("t","a"),ul("t","in")),Ke(wt),wt.classList.remove(ul("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class hb{constructor(v,C){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=C.props,this.value=C.value,this.viewProps=C.viewProps,this.cursor_=it(-1),this.view=new fk(v,{cursor:this.cursor_,formatter:C.formatter,lineCount:C.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!oe(v))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const z=new qo(this.view.element);z.emitter.on("down",this.onGraphPointerDown_),z.emitter.on("move",this.onGraphPointerMove_),z.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(v){const C=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Sr(v.offsetX,0,C.width,0,this.value.rawValue.length))}onGraphPointerDown_(v){this.onGraphPointerMove_(v)}onGraphPointerMove_(v){if(!v.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Sr(v.data.point.x,0,v.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function M1(T){return"format"in T&&!y(T.format)?T.format:Or(2)}function db(T){var v;return T.value.rawValue.length===1?new T1(T.document,{formatter:M1(T.params),value:T.value,viewProps:T.viewProps}):new Vc(T.document,{formatter:M1(T.params),lineCount:(v=T.params.lineCount)!==null&&v!==void 0?v:wf.monitor.defaultLineCount,value:T.value,viewProps:T.viewProps})}function fb(T){var v,C,z;return new hb(T.document,{formatter:M1(T.params),lineCount:(v=T.params.lineCount)!==null&&v!==void 0?v:wf.monitor.defaultLineCount,props:tt.fromObject({maxValue:(C="max"in T.params?T.params.max:null)!==null&&C!==void 0?C:100,minValue:(z="min"in T.params?T.params.min:null)!==null&&z!==void 0?z:0}),value:T.value,viewProps:T.viewProps})}function A1(T){return"view"in T&&T.view==="graph"}const pb={id:"monitor-number",type:"monitor",accept:(T,v)=>{if(typeof T!="number")return null;const C=Se,z=gt(v,{format:C.optional.function,lineCount:C.optional.number,max:C.optional.number,min:C.optional.number,view:C.optional.string});return z?{initialValue:T,params:z}:null},binding:{defaultBufferSize:T=>A1(T)?64:1,reader:T=>vo},controller:T=>A1(T.params)?fb(T):db(T)},mb={id:"monitor-string",type:"monitor",accept:(T,v)=>{if(typeof T!="string")return null;const C=Se,z=gt(v,{lineCount:C.optional.number,multiline:C.optional.boolean});return z?{initialValue:T,params:z}:null},binding:{reader:T=>al},controller:T=>{var v;const C=T.value;return C.rawValue.length>1||"multiline"in T.params&&T.params.multiline?new Vc(T.document,{formatter:Ro,lineCount:(v=T.params.lineCount)!==null&&v!==void 0?v:wf.monitor.defaultLineCount,value:C,viewProps:T.viewProps}):new T1(T.document,{formatter:Ro,value:C,viewProps:T.viewProps})}};class pk{constructor(v){this.onValueChange_=this.onValueChange_.bind(this),this.reader=v.reader,this.writer=v.writer,this.emitter=new R,this.value=v.value,this.value.emitter.on("change",this.onValueChange_),this.target=v.target,this.read()}read(){const v=this.target.read();v!==void 0&&(this.value.rawValue=this.reader(v))}write_(v){this.writer(this.target,v)}onValueChange_(v){this.write_(v.rawValue),this.emitter.emit("change",{options:v.options,rawValue:v.rawValue,sender:this})}}function Lm(T,v){const C=T.accept(v.target.read(),v.params);if(y(C))return null;const z=Se,ae={target:v.target,initialValue:C.initialValue,params:C.params},Ye=T.binding.reader(ae),wt=T.binding.constraint?T.binding.constraint(ae):void 0,yn=it(Ye(C.initialValue),{constraint:wt,equals:T.binding.equals}),li=new pk({reader:Ye,target:v.target,value:yn,writer:T.binding.writer(ae)}),_i=z.optional.boolean(v.params.disabled).value,Gi=z.optional.boolean(v.params.hidden).value,$i=T.controller({constraint:wt,document:v.document,initialValue:C.initialValue,params:C.params,value:li.value,viewProps:Gs.create({disabled:_i,hidden:Gi})}),oo=z.optional.string(v.params.label).value;return new mn(v.document,{binding:li,blade:vn(),props:tt.fromObject({label:oo!=null?oo:v.target.key}),valueController:$i})}class gb{constructor(v){this.onTick_=this.onTick_.bind(this),this.reader_=v.reader,this.target=v.target,this.emitter=new R,this.value=v.value,this.ticker=v.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const v=this.target.read();if(v===void 0)return;const C=this.value.rawValue,z=this.reader_(v);this.value.rawValue=r1(C,z),this.emitter.emit("update",{rawValue:z,sender:this})}onTick_(v){this.read()}}function vb(T,v){return v===0?new kc:new Ur(T,v!=null?v:wf.monitor.defaultInterval)}function mk(T,v){var C,z,ae;const Ye=Se,wt=T.accept(v.target.read(),v.params);if(y(wt))return null;const yn={target:v.target,initialValue:wt.initialValue,params:wt.params},li=T.binding.reader(yn),_i=(z=(C=Ye.optional.number(v.params.bufferSize).value)!==null&&C!==void 0?C:T.binding.defaultBufferSize&&T.binding.defaultBufferSize(wt.params))!==null&&z!==void 0?z:1,Gi=Ye.optional.number(v.params.interval).value,$i=new gb({reader:li,target:v.target,ticker:vb(v.document,Gi),value:ff(_i)}),oo=Ye.optional.boolean(v.params.disabled).value,Xo=Ye.optional.boolean(v.params.hidden).value,Wc=T.controller({document:v.document,params:wt.params,value:$i.value,viewProps:Gs.create({disabled:oo,hidden:Xo})}),kb=(ae=Ye.optional.string(v.params.label).value)!==null&&ae!==void 0?ae:v.target.key;return new jn(v.document,{binding:$i,blade:vn(),props:tt.fromObject({label:kb}),valueController:Wc})}class gk{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(v){v.type==="blade"?this.pluginsMap_.blades.unshift(v):v.type==="input"?this.pluginsMap_.inputs.unshift(v):v.type==="monitor"&&this.pluginsMap_.monitors.unshift(v)}createInput(v,C,z){const ae=C.read();if(y(ae))throw new S({context:{key:C.key},type:"nomatchingcontroller"});const Ye=this.pluginsMap_.inputs.reduce((wt,yn)=>wt!=null?wt:Lm(yn,{document:v,target:C,params:z}),null);if(Ye)return Ye;throw new S({context:{key:C.key},type:"nomatchingcontroller"})}createMonitor(v,C,z){const ae=this.pluginsMap_.monitors.reduce((Ye,wt)=>Ye!=null?Ye:mk(wt,{document:v,params:z,target:C}),null);if(ae)return ae;throw new S({context:{key:C.key},type:"nomatchingcontroller"})}createBlade(v,C){const z=this.pluginsMap_.blades.reduce((ae,Ye)=>ae!=null?ae:Rl(Ye,{document:v,params:C}),null);if(!z)throw new S({type:"nomatchingview",context:{params:C}});return z}createBladeApi(v){if(v instanceof mn)return new en(v);if(v instanceof jn)return new On(v);if(v instanceof Zt)return new mo(v,this);const C=this.pluginsMap_.blades.reduce((z,ae)=>z!=null?z:ae.api({controller:v,pool:this}),null);if(!C)throw S.shouldNeverHappen();return C}}function vk(){const T=new gk;return[rk,ak,ck,hk,q5,U5,z5,F5,gm,Am,mb,pb,fn,wi,kr,_s].forEach(v=>{T.register(v)}),T}class yb extends a{constructor(v){super(v),this.emitter_=new R,this.controller_.valueController.value.emitter.on("change",C=>{this.emitter_.emit("change",{event:new d(this,C.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(v){this.controller_.props.set("label",v)}get options(){return this.controller_.valueController.props.get("options")}set options(v){this.controller_.valueController.props.set("options",v)}get value(){return this.controller_.valueController.value.rawValue}set value(v){this.controller_.valueController.value.rawValue=v}on(v,C){const z=C.bind(this);return this.emitter_.on(v,ae=>{z(ae.event)}),this}}class Rm extends a{constructor(v){super(v),this.emitter_=new R,this.controller_.valueController.value.emitter.on("change",C=>{this.emitter_.emit("change",{event:new d(this,C.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(v){this.controller_.props.set("label",v)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(v){this.controller_.valueController.sliderController.props.set("maxValue",v)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(v){this.controller_.valueController.sliderController.props.set("minValue",v)}get value(){return this.controller_.valueController.value.rawValue}set value(v){this.controller_.valueController.value.rawValue=v}on(v,C){const z=C.bind(this);return this.emitter_.on(v,ae=>{z(ae.event)}),this}}class L1 extends a{constructor(v){super(v),this.emitter_=new R,this.controller_.valueController.value.emitter.on("change",C=>{this.emitter_.emit("change",{event:new d(this,C.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(v){this.controller_.props.set("label",v)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(v){this.controller_.valueController.props.set("formatter",v)}get value(){return this.controller_.valueController.value.rawValue}set value(v){this.controller_.valueController.value.rawValue=v}on(v,C){const z=C.bind(this);return this.emitter_.on(v,ae=>{z(ae.event)}),this}}const _b=function(){return{id:"list",type:"blade",accept(T){const v=Se,C=gt(T,{options:v.required.custom(wu),value:v.required.raw,view:v.required.constant("list"),label:v.optional.string});return C?{params:C}:null},controller(T){const v=new Ec(T.document,{props:tt.fromObject({options:mf(T.params.options)}),value:it(T.params.value),viewProps:T.viewProps});return new ki(T.document,{blade:T.blade,props:tt.fromObject({label:T.params.label}),valueController:v})},api(T){return!(T.controller instanceof ki)||!(T.controller.valueController instanceof Ec)?null:new yb(T.controller)}}}();function yk(T){return T.reduce((v,C)=>Object.assign(v,{[C.presetKey]:C.read()}),{})}function _k(T,v){T.forEach(C=>{const z=v[C.presetKey];z!==void 0&&C.write(z)})}class bb extends mr{constructor(v,C){super(v,C)}get element(){return this.controller_.view.element}importPreset(v){const C=this.controller_.rackController.rack.find(mn).map(z=>z.binding.target);_k(C,v),this.refresh()}exportPreset(){const v=this.controller_.rackController.rack.find(mn).map(C=>C.binding.target);return yk(v)}refresh(){this.controller_.rackController.rack.find(mn).forEach(v=>{v.binding.read()}),this.controller_.rackController.rack.find(jn).forEach(v=>{v.binding.read()})}}class Zh extends oi{constructor(v,C){super(v,{expanded:C.expanded,blade:C.blade,props:C.props,root:!0,viewProps:C.viewProps})}}const R1={id:"slider",type:"blade",accept(T){const v=Se,C=gt(T,{max:v.required.number,min:v.required.number,view:v.required.constant("slider"),format:v.optional.function,label:v.optional.string,value:v.optional.number});return C?{params:C}:null},controller(T){var v,C;const z=(v=T.params.value)!==null&&v!==void 0?v:0,ae=new Ia(T.document,{baseStep:1,parser:Lo,sliderProps:tt.fromObject({maxValue:T.params.max,minValue:T.params.min}),textProps:tt.fromObject({draggingScale:Na(void 0,z),formatter:(C=T.params.format)!==null&&C!==void 0?C:Vh}),value:it(z),viewProps:T.viewProps});return new ki(T.document,{blade:T.blade,props:tt.fromObject({label:T.params.label}),valueController:ae})},api(T){return!(T.controller instanceof ki)||!(T.controller.valueController instanceof Ia)?null:new Rm(T.controller)}},bk=function(){return{id:"text",type:"blade",accept(T){const v=Se,C=gt(T,{parse:v.required.function,value:v.required.raw,view:v.required.constant("text"),format:v.optional.function,label:v.optional.string});return C?{params:C}:null},controller(T){var v;const C=new Fh(T.document,{parser:T.params.parse,props:tt.fromObject({formatter:(v=T.params.format)!==null&&v!==void 0?v:z=>String(z)}),value:it(T.params.value),viewProps:T.viewProps});return new ki(T.document,{blade:T.blade,props:tt.fromObject({label:T.params.label}),valueController:C})},api(T){return!(T.controller instanceof ki)||!(T.controller.valueController instanceof Fh)?null:new L1(T.controller)}}}();function xk(T){const v=T.createElement("div");return v.classList.add(B("dfw")()),T.body&&T.body.appendChild(v),v}function xb(T,v,C){if(T.querySelector(`style[data-tp-style=${v}]`))return;const z=T.createElement("style");z.dataset.tpStyle=v,z.textContent=C,T.head.appendChild(z)}class wb extends bb{constructor(v){var C,z;const ae=v!=null?v:{},Ye=(C=ae.document)!==null&&C!==void 0?C:We(),wt=vk(),yn=new Zh(Ye,{expanded:ae.expanded,blade:vn(),props:tt.fromObject({title:ae.title}),viewProps:Gs.create()});super(yn,wt),this.pool_=wt,this.containerElem_=(z=ae.container)!==null&&z!==void 0?z:xk(Ye),this.containerElem_.appendChild(this.element),this.doc_=Ye,this.usesDefaultWrapper_=!ae.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw S.alreadyDisposed();return this.doc_}dispose(){const v=this.containerElem_;if(!v)throw S.alreadyDisposed();if(this.usesDefaultWrapper_){const C=v.parentElement;C&&C.removeChild(v)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(v){("plugin"in v?[v.plugin]:"plugins"in v?v.plugins:[]).forEach(C=>{this.pool_.register(C),this.embedPluginStyle_(C)})}embedPluginStyle_(v){v.css&&xb(this.document,`plugin-${v.id}`,v.css)}setUpDefaultPlugins_(){xb(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(v=>{this.embedPluginStyle_(v)}),this.registerPlugin({plugins:[R1,_b,_s,bk]})}}const wk=new s("3.1.0");n.BladeApi=a,n.ButtonApi=P,n.FolderApi=mr,n.InputBindingApi=en,n.ListApi=yb,n.MonitorBindingApi=On,n.Pane=wb,n.SeparatorApi=Mi,n.SliderApi=Rm,n.TabApi=Yo,n.TabPageApi=Hs,n.TextApi=L1,n.TpChangeEvent=d,n.VERSION=wk,Object.defineProperty(n,"__esModule",{value:!0})})})(KO,KO.exports);var E3={exports:{}};(function(r,e){(function(n,s){s(e)})(Uz,function(n){class s{constructor(D){this.controller_=D}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(D){this.controller_.viewProps.set("disabled",D)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(D){this.controller_.viewProps.set("hidden",D)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class a{constructor(D){this.target=D}}class u extends a{constructor(D,j,ie,Ne){super(D),this.value=j,this.presetKey=ie,this.last=Ne!=null?Ne:!0}}function d(J){return J==null}const f={alreadydisposed:()=>"View has been already disposed",invalidparams:J=>`Invalid parameters for '${J.name}'`,nomatchingcontroller:J=>`No matching controller for '${J.key}'`,nomatchingview:J=>`No matching view for '${JSON.stringify(J.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:J=>`Property '${J.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class g{constructor(D){var j;this.message=(j=f[D.type](D.context))!==null&&j!==void 0?j:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=D.type}static alreadyDisposed(){return new g({type:"alreadydisposed"})}static notBindable(){return new g({type:"notbindable"})}static propertyNotFound(D){return new g({type:"propertynotfound",context:{name:D}})}static shouldNeverHappen(){return new g({type:"shouldneverhappen"})}}class _{constructor(){this.observers_={}}on(D,j){let ie=this.observers_[D];return ie||(ie=this.observers_[D]=[]),ie.push({handler:j}),this}off(D,j){const ie=this.observers_[D];return ie&&(this.observers_[D]=ie.filter(Ne=>Ne.handler!==j)),this}emit(D,j){const ie=this.observers_[D];!ie||ie.forEach(Ne=>{Ne.handler(j)})}}const y="tp";function w(J){return(D,j)=>[y,"-",J,"v",D?`_${D}`:"",j?`-${j}`:""].join("")}function k(J,D){return j=>D(J(j))}function S(J){return J.rawValue}function A(J,D){J.emitter.on("change",k(S,D)),D(J.rawValue)}function P(J,D,j){A(J.value(D),j)}function R(J,D,j){j?J.classList.add(D):J.classList.remove(D)}function O(J,D){return j=>{R(J,D,j)}}function B(J,D){A(J,j=>{D.textContent=j!=null?j:""})}const N=w("btn");class V{constructor(D,j){this.element=D.createElement("div"),this.element.classList.add(N()),j.viewProps.bindClassModifiers(this.element);const ie=D.createElement("button");ie.classList.add(N("b")),j.viewProps.bindDisabled(ie),this.element.appendChild(ie),this.buttonElement=ie;const Ne=D.createElement("div");Ne.classList.add(N("t")),B(j.props.value("title"),Ne),this.buttonElement.appendChild(Ne)}}class U{constructor(D,j){this.emitter=new _,this.onClick_=this.onClick_.bind(this),this.props=j.props,this.viewProps=j.viewProps,this.view=new V(D,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Y{constructor(D,j){var ie;this.constraint_=j==null?void 0:j.constraint,this.equals_=(ie=j==null?void 0:j.equals)!==null&&ie!==void 0?ie:(Ne,xt)=>Ne===xt,this.emitter=new _,this.rawValue_=D}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(D){this.setRawValue(D,{forceEmit:!1,last:!0})}setRawValue(D,j){const ie=j!=null?j:{forceEmit:!1,last:!0},Ne=this.constraint_?this.constraint_.constrain(D):D;!!this.equals_(this.rawValue_,Ne)&&!ie.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=Ne,this.emitter.emit("change",{options:ie,rawValue:Ne,sender:this}))}}class X{constructor(D){this.emitter=new _,this.value_=D}get rawValue(){return this.value_}set rawValue(D){this.setRawValue(D,{forceEmit:!1,last:!0})}setRawValue(D,j){const ie=j!=null?j:{forceEmit:!1,last:!0};this.value_===D&&!ie.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=D,this.emitter.emit("change",{options:ie,rawValue:this.value_,sender:this}))}}function $(J,D){const j=D==null?void 0:D.constraint,ie=D==null?void 0:D.equals;return!j&&!ie?new X(J):new Y(J,D)}class ee{constructor(D){this.emitter=new _,this.valMap_=D;for(const j in this.valMap_)this.valMap_[j].emitter.on("change",()=>{this.emitter.emit("change",{key:j,sender:this})})}static createCore(D){return Object.keys(D).reduce((j,ie)=>Object.assign(j,{[ie]:$(D[ie])}),{})}static fromObject(D){const j=this.createCore(D);return new ee(j)}get(D){return this.valMap_[D].rawValue}set(D,j){this.valMap_[D].rawValue=j}value(D){return this.valMap_[D]}}function ue(J,D){return Object.keys(D).reduce((ie,Ne)=>{if(ie===void 0)return;const xt=D[Ne],$t=xt(J[Ne]);return $t.succeeded?Object.assign(Object.assign({},ie),{[Ne]:$t.value}):void 0},{})}function Te(J,D){return J.reduce((j,ie)=>{if(j===void 0)return;const Ne=D(ie);if(!(!Ne.succeeded||Ne.value===void 0))return[...j,Ne.value]},[])}function De(J){return J===null?!1:typeof J=="object"}function $e(J){return D=>j=>{if(!D&&j===void 0)return{succeeded:!1,value:void 0};if(D&&j===void 0)return{succeeded:!0,value:void 0};const ie=J(j);return ie!==void 0?{succeeded:!0,value:ie}:{succeeded:!1,value:void 0}}}function Ue(J){return{custom:D=>$e(D)(J),boolean:$e(D=>typeof D=="boolean"?D:void 0)(J),number:$e(D=>typeof D=="number"?D:void 0)(J),string:$e(D=>typeof D=="string"?D:void 0)(J),function:$e(D=>typeof D=="function"?D:void 0)(J),constant:D=>$e(j=>j===D?D:void 0)(J),raw:$e(D=>D)(J),object:D=>$e(j=>{if(De(j))return ue(j,D)})(J),array:D=>$e(j=>{if(Array.isArray(j))return Te(j,D)})(J)}}const it={optional:Ue(!0),required:Ue(!1)};function tt(J,D){const j=it.required.object(D)(J);return j.succeeded?j.value:void 0}function St(J){return J&&J.parentElement&&J.parentElement.removeChild(J),null}function ve(){return["veryfirst","first","last","verylast"]}const ne=w(""),me={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class qe{constructor(D){this.parent_=null,this.blade=D.blade,this.view=D.view,this.viewProps=D.viewProps;const j=this.view.element;this.blade.value("positions").emitter.on("change",()=>{ve().forEach(ie=>{j.classList.remove(ne(void 0,me[ie]))}),this.blade.get("positions").forEach(ie=>{j.classList.add(ne(void 0,me[ie]))})}),this.viewProps.handleDispose(()=>{St(j)})}get parent(){return this.parent_}}const Se="http://www.w3.org/2000/svg";function gt(J){J.offsetHeight}function Xt(J,D){const j=J.style.transition;J.style.transition="none",D(),J.style.transition=j}function He(J){return J.ontouchstart!==void 0}function Fe(J){for(;J.childNodes.length>0;)J.removeChild(J.childNodes[0])}function pt(J){return J.relatedTarget?J.relatedTarget:"explicitOriginalTarget"in J?J.explicitOriginalTarget:null}const Rt=w("lbl");function Vt(J,D){const j=J.createDocumentFragment();return D.split(`
`).map(ie=>J.createTextNode(ie)).forEach((ie,Ne)=>{Ne>0&&j.appendChild(J.createElement("br")),j.appendChild(ie)}),j}class Ke{constructor(D,j){this.element=D.createElement("div"),this.element.classList.add(Rt()),j.viewProps.bindClassModifiers(this.element);const ie=D.createElement("div");ie.classList.add(Rt("l")),P(j.props,"label",xt=>{d(xt)?this.element.classList.add(Rt(void 0,"nol")):(this.element.classList.remove(Rt(void 0,"nol")),Fe(ie),ie.appendChild(Vt(D,xt)))}),this.element.appendChild(ie),this.labelElement=ie;const Ne=D.createElement("div");Ne.classList.add(Rt("v")),this.element.appendChild(Ne),this.valueElement=Ne}}class Ot extends qe{constructor(D,j){const ie=j.valueController.viewProps;super(Object.assign(Object.assign({},j),{view:new Ke(D,{props:j.props,viewProps:ie}),viewProps:ie})),this.props=j.props,this.valueController=j.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class oe extends qe{constructor(D){super(D),this.value=D.value}}class ye extends ee{constructor(D){super(D)}static create(D){const j={completed:!0,expanded:D,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},ie=ee.createCore(j);return new ye(ie)}get styleExpanded(){var D;return(D=this.get("temporaryExpanded"))!==null&&D!==void 0?D:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const D=this.get("expandedHeight");return this.get("shouldFixHeight")&&!d(D)?`${D}px`:"auto"}bindExpandedClass(D,j){const ie=()=>{this.styleExpanded?D.classList.add(j):D.classList.remove(j)};P(this,"expanded",ie),P(this,"temporaryExpanded",ie)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function We(J){return ye.create(J)}function at(J,D){let j=0;return Xt(D,()=>{J.set("expandedHeight",null),J.set("temporaryExpanded",!0),gt(D),j=D.clientHeight,J.set("temporaryExpanded",null),gt(D)}),j}function st(J,D){D.style.height=J.styleHeight}function It(J,D){J.value("expanded").emitter.on("beforechange",()=>{J.set("completed",!1),d(J.get("expandedHeight"))&&J.set("expandedHeight",at(J,D)),J.set("shouldFixHeight",!0),gt(D)}),J.emitter.on("change",()=>{st(J,D)}),st(J,D),D.addEventListener("transitionend",j=>{j.propertyName==="height"&&J.cleanUpTransition()})}class At{constructor(D,j){const ie=w(j.viewName);this.element=D.createElement("div"),this.element.classList.add(ie()),j.viewProps.bindClassModifiers(this.element)}}class Tt extends oe{constructor(D,j){const ie=j.valueController.viewProps;super(Object.assign(Object.assign({},j),{value:j.valueController.value,view:new Ke(D,{props:j.props,viewProps:ie}),viewProps:ie})),this.props=j.props,this.valueController=j.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const Ut=w("");function Wt(J,D){return O(J,Ut(void 0,D))}class we extends ee{constructor(D){super(D)}static create(D){var j,ie;const Ne=D!=null?D:{},xt={disabled:(j=Ne.disabled)!==null&&j!==void 0?j:!1,disposed:!1,hidden:(ie=Ne.hidden)!==null&&ie!==void 0?ie:!1},$t=ee.createCore(xt);return new we($t)}bindClassModifiers(D){P(this,"disabled",Wt(D,"disabled")),P(this,"hidden",Wt(D,"hidden"))}bindDisabled(D){P(this,"disabled",j=>{D.disabled=j})}bindTabIndex(D){P(this,"disabled",j=>{D.tabIndex=j?-1:0})}handleDispose(D){this.value("disposed").emitter.on("change",j=>{j&&D()})}}class fe{constructor(){this.disabled=!1,this.emitter=new _}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class lt{constructor(D,j){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=D,this.emitter=new _,this.interval_=j,this.setTimer_()}get disabled(){return this.disabled_}set disabled(D){this.disabled_=D,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const D=this.doc_.defaultView;D&&D.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const D=this.doc_.defaultView;D&&(this.timerId_=D.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Nt{constructor(D){this.constraints=D}constrain(D){return this.constraints.reduce((j,ie)=>ie.constrain(j),D)}}function Gt(J,D){if(J instanceof D)return J;if(J instanceof Nt){const j=J.constraints.reduce((ie,Ne)=>ie||(Ne instanceof D?Ne:null),null);if(j)return j}return null}class fn{constructor(D){this.maxValue=D.max,this.minValue=D.min}constrain(D){let j=D;return d(this.minValue)||(j=Math.max(j,this.minValue)),d(this.maxValue)||(j=Math.min(j,this.maxValue)),j}}class wn{constructor(D,j=0){this.step=D,this.origin=j}constrain(D){const j=this.origin%this.step,ie=Math.round((D-j)/this.step);return j+ie*this.step}}const vn=w("pop");class Xe{constructor(D,j){this.element=D.createElement("div"),this.element.classList.add(vn()),j.viewProps.bindClassModifiers(this.element),A(j.shows,O(this.element,vn(void 0,"v")))}}class nn{constructor(D,j){this.shows=$(!1),this.viewProps=j.viewProps,this.view=new Xe(D,{shows:this.shows,viewProps:this.viewProps})}}const Nn=w("txt");class Rn{constructor(D,j){this.onChange_=this.onChange_.bind(this),this.element=D.createElement("div"),this.element.classList.add(Nn()),j.viewProps.bindClassModifiers(this.element),this.props_=j.props,this.props_.emitter.on("change",this.onChange_);const ie=D.createElement("input");ie.classList.add(Nn("i")),ie.type="text",j.viewProps.bindDisabled(ie),this.element.appendChild(ie),this.inputElement=ie,j.value.emitter.on("change",this.onChange_),this.value_=j.value,this.refresh()}refresh(){const D=this.props_.get("formatter");this.inputElement.value=D(this.value_.rawValue)}onChange_(){this.refresh()}}class An{constructor(D,j){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=j.parser,this.props=j.props,this.value=j.value,this.viewProps=j.viewProps,this.view=new Rn(D,{props:j.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(D){const j=D.currentTarget.value,ie=this.parser_(j);d(ie)||(this.value.rawValue=ie),this.view.refresh()}}function kn(J){return J==="false"?!1:!!J}class Qn{constructor(D){this.text=D}evaluate(){return Number(this.text)}toString(){return this.text}}const ji={"**":(J,D)=>Math.pow(J,D),"*":(J,D)=>J*D,"/":(J,D)=>J/D,"%":(J,D)=>J%D,"+":(J,D)=>J+D,"-":(J,D)=>J-D,"<<":(J,D)=>J<<D,">>":(J,D)=>J>>D,">>>":(J,D)=>J>>>D,"&":(J,D)=>J&D,"^":(J,D)=>J^D,"|":(J,D)=>J|D};class br{constructor(D,j,ie){this.left=j,this.operator=D,this.right=ie}evaluate(){const D=ji[this.operator];if(!D)throw new Error(`unexpected binary operator: '${this.operator}`);return D(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const ut={"+":J=>J,"-":J=>-J,"~":J=>~J};class en{constructor(D,j){this.operator=D,this.expression=j}evaluate(){const D=ut[this.operator];if(!D)throw new Error(`unexpected unary operator: '${this.operator}`);return D(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function mn(J){return(D,j)=>{for(let ie=0;ie<J.length;ie++){const Ne=J[ie](D,j);if(Ne!=="")return Ne}return""}}function On(J,D){var j;const ie=J.substr(D).match(/^\s+/);return(j=ie&&ie[0])!==null&&j!==void 0?j:""}function jn(J,D){const j=J.substr(D,1);return j.match(/^[1-9]$/)?j:""}function Xi(J,D){var j;const ie=J.substr(D).match(/^[0-9]+/);return(j=ie&&ie[0])!==null&&j!==void 0?j:""}function Rr(J,D){const j=Xi(J,D);if(j!=="")return j;const ie=J.substr(D,1);if(D+=1,ie!=="-"&&ie!=="+")return"";const Ne=Xi(J,D);return Ne===""?"":ie+Ne}function $r(J,D){const j=J.substr(D,1);if(D+=1,j.toLowerCase()!=="e")return"";const ie=Rr(J,D);return ie===""?"":j+ie}function mo(J,D){const j=J.substr(D,1);if(j==="0")return j;const ie=jn(J,D);return D+=ie.length,ie===""?"":ie+Xi(J,D)}function mr(J,D){const j=mo(J,D);if(D+=j.length,j==="")return"";const ie=J.substr(D,1);if(D+=ie.length,ie!==".")return"";const Ne=Xi(J,D);return D+=Ne.length,j+ie+Ne+$r(J,D)}function go(J,D){const j=J.substr(D,1);if(D+=j.length,j!==".")return"";const ie=Xi(J,D);return D+=ie.length,ie===""?"":j+ie+$r(J,D)}function ro(J,D){const j=mo(J,D);return D+=j.length,j===""?"":j+$r(J,D)}const Ih=mn([mr,go,ro]);function of(J,D){var j;const ie=J.substr(D).match(/^[01]+/);return(j=ie&&ie[0])!==null&&j!==void 0?j:""}function Dh(J,D){const j=J.substr(D,2);if(D+=j.length,j.toLowerCase()!=="0b")return"";const ie=of(J,D);return ie===""?"":j+ie}function gu(J,D){var j;const ie=J.substr(D).match(/^[0-7]+/);return(j=ie&&ie[0])!==null&&j!==void 0?j:""}function Ae(J,D){const j=J.substr(D,2);if(D+=j.length,j.toLowerCase()!=="0o")return"";const ie=gu(J,D);return ie===""?"":j+ie}function Lt(J,D){var j;const ie=J.substr(D).match(/^[0-9a-f]+/i);return(j=ie&&ie[0])!==null&&j!==void 0?j:""}function Zt(J,D){const j=J.substr(D,2);if(D+=j.length,j.toLowerCase()!=="0x")return"";const ie=Lt(J,D);return ie===""?"":j+ie}const Mt=mn([Dh,Ae,Zt]),on=mn([Mt,Ih]);function oi(J,D){const j=on(J,D);return D+=j.length,j===""?null:{evaluable:new Qn(j),cursor:D}}function wi(J,D){const j=J.substr(D,1);if(D+=j.length,j!=="(")return null;const ie=kr(J,D);if(!ie)return null;D=ie.cursor,D+=On(J,D).length;const Ne=J.substr(D,1);return D+=Ne.length,Ne!==")"?null:{evaluable:ie.evaluable,cursor:D}}function ki(J,D){var j;return(j=oi(J,D))!==null&&j!==void 0?j:wi(J,D)}function Mi(J,D){const j=ki(J,D);if(j)return j;const ie=J.substr(D,1);if(D+=ie.length,ie!=="+"&&ie!=="-"&&ie!=="~")return null;const Ne=Mi(J,D);return Ne?(D=Ne.cursor,{cursor:D,evaluable:new en(ie,Ne.evaluable)}):null}function rr(J,D,j){j+=On(D,j).length;const ie=J.filter(Ne=>D.startsWith(Ne,j))[0];return ie?(j+=ie.length,j+=On(D,j).length,{cursor:j,operator:ie}):null}function Ui(J,D){return(j,ie)=>{const Ne=J(j,ie);if(!Ne)return null;ie=Ne.cursor;let xt=Ne.evaluable;for(;;){const $t=rr(D,j,ie);if(!$t)break;ie=$t.cursor;const In=J(j,ie);if(!In)return null;ie=In.cursor,xt=new br($t.operator,xt,In.evaluable)}return xt?{cursor:ie,evaluable:xt}:null}}const Zi=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((J,D)=>Ui(J,D),Mi);function kr(J,D){return D+=On(J,D).length,Zi(J,D)}function Ma(J){const D=kr(J,0);return!D||D.cursor+On(J,D.cursor).length!==J.length?null:D.evaluable}function Mo(J){var D;const j=Ma(J);return(D=j==null?void 0:j.evaluate())!==null&&D!==void 0?D:null}function Gs(J){if(typeof J=="number")return J;if(typeof J=="string"){const D=Mo(J);if(!d(D))return D}return 0}function Cr(J){return D=>D.toFixed(Math.max(Math.min(J,20),0))}function or(J){return String(J)}function Aa(J,D){for(;J.length<D;)J.push(void 0)}function Dr(J){const D=[];return Aa(D,J),$(D)}function Hs(J){const D=J.indexOf(void 0);return D<0?J:J.slice(0,D)}function Yo(J,D){const j=[...Hs(J),D];return j.length>J.length?j.splice(0,j.length-J.length):Aa(j,J.length),j}function La({primary:J,secondary:D,forward:j,backward:ie}){let Ne=!1;function xt($t){Ne||(Ne=!0,$t(),Ne=!1)}J.emitter.on("change",$t=>{xt(()=>{D.setRawValue(j(J,D),$t.options)})}),D.emitter.on("change",$t=>{xt(()=>{J.setRawValue(ie(J,D),$t.options)}),xt(()=>{D.setRawValue(j(J,D),$t.options)})}),xt(()=>{D.setRawValue(j(J,D),{forceEmit:!1,last:!0})})}function ca(J,D){const j=J*(D.altKey?.1:1)*(D.shiftKey?10:1);return D.upKey?+j:D.downKey?-j:0}function Nr(J){return{altKey:J.altKey,downKey:J.key==="ArrowDown",shiftKey:J.shiftKey,upKey:J.key==="ArrowUp"}}function ua(J){return{altKey:J.altKey,downKey:J.key==="ArrowLeft",shiftKey:J.shiftKey,upKey:J.key==="ArrowRight"}}function Ll(J){return J==="ArrowUp"||J==="ArrowDown"}function _s(J){return Ll(J)||J==="ArrowLeft"||J==="ArrowRight"}function Rl(J,D){var j,ie;const Ne=D.ownerDocument.defaultView,xt=D.getBoundingClientRect();return{x:J.pageX-(((j=Ne&&Ne.scrollX)!==null&&j!==void 0?j:0)+xt.left),y:J.pageY-(((ie=Ne&&Ne.scrollY)!==null&&ie!==void 0?ie:0)+xt.top)}}class kc{constructor(D){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=D,this.emitter=new _,D.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),D.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),D.addEventListener("touchend",this.onTouchEnd_),D.addEventListener("mousedown",this.onMouseDown_)}computePosition_(D){const j=this.elem_.getBoundingClientRect();return{bounds:{width:j.width,height:j.height},point:D?{x:D.x,y:D.y}:null}}onMouseDown_(D){var j;D.preventDefault(),(j=D.currentTarget)===null||j===void 0||j.focus();const ie=this.elem_.ownerDocument;ie.addEventListener("mousemove",this.onDocumentMouseMove_),ie.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:D.altKey,data:this.computePosition_(Rl(D,this.elem_)),sender:this,shiftKey:D.shiftKey})}onDocumentMouseMove_(D){this.emitter.emit("move",{altKey:D.altKey,data:this.computePosition_(Rl(D,this.elem_)),sender:this,shiftKey:D.shiftKey})}onDocumentMouseUp_(D){const j=this.elem_.ownerDocument;j.removeEventListener("mousemove",this.onDocumentMouseMove_),j.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:D.altKey,data:this.computePosition_(Rl(D,this.elem_)),sender:this,shiftKey:D.shiftKey})}onTouchStart_(D){D.preventDefault();const j=D.targetTouches.item(0),ie=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:D.altKey,data:this.computePosition_(j?{x:j.clientX-ie.left,y:j.clientY-ie.top}:void 0),sender:this,shiftKey:D.shiftKey}),this.lastTouch_=j}onTouchMove_(D){const j=D.targetTouches.item(0),ie=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:D.altKey,data:this.computePosition_(j?{x:j.clientX-ie.left,y:j.clientY-ie.top}:void 0),sender:this,shiftKey:D.shiftKey}),this.lastTouch_=j}onTouchEnd_(D){var j;const ie=(j=D.targetTouches.item(0))!==null&&j!==void 0?j:this.lastTouch_,Ne=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:D.altKey,data:this.computePosition_(ie?{x:ie.clientX-Ne.left,y:ie.clientY-Ne.top}:void 0),sender:this,shiftKey:D.shiftKey})}}function Ur(J,D,j,ie,Ne){const xt=(J-D)/(j-D);return ie+xt*(Ne-ie)}function jo(J){return String(J.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function so(J,D,j){return Math.min(Math.max(J,D),j)}const As=w("txt");class Cc{constructor(D,j){this.onChange_=this.onChange_.bind(this),this.props_=j.props,this.props_.emitter.on("change",this.onChange_),this.element=D.createElement("div"),this.element.classList.add(As(),As(void 0,"num")),j.arrayPosition&&this.element.classList.add(As(void 0,j.arrayPosition)),j.viewProps.bindClassModifiers(this.element);const ie=D.createElement("input");ie.classList.add(As("i")),ie.type="text",j.viewProps.bindDisabled(ie),this.element.appendChild(ie),this.inputElement=ie,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=j.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(As()),this.inputElement.classList.add(As("i"));const Ne=D.createElement("div");Ne.classList.add(As("k")),this.element.appendChild(Ne),this.knobElement=Ne;const xt=D.createElementNS(Se,"svg");xt.classList.add(As("g")),this.knobElement.appendChild(xt);const $t=D.createElementNS(Se,"path");$t.classList.add(As("gb")),xt.appendChild($t),this.guideBodyElem_=$t;const In=D.createElementNS(Se,"path");In.classList.add(As("gh")),xt.appendChild(In),this.guideHeadElem_=In;const gr=D.createElement("div");gr.classList.add(w("tt")()),this.knobElement.appendChild(gr),this.tooltipElem_=gr,j.value.emitter.on("change",this.onChange_),this.value=j.value,this.refresh()}onDraggingChange_(D){if(D.rawValue===null){this.element.classList.remove(As(void 0,"drg"));return}this.element.classList.add(As(void 0,"drg"));const j=D.rawValue/this.props_.get("draggingScale"),ie=j+(j>0?-1:j<0?1:0),Ne=so(-ie,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${ie+Ne},0 L${ie},4 L${ie+Ne},8`,`M ${j},-1 L${j},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${j},4`);const xt=this.props_.get("formatter");this.tooltipElem_.textContent=xt(this.value.rawValue),this.tooltipElem_.style.left=`${j}px`}refresh(){const D=this.props_.get("formatter");this.inputElement.value=D(this.value.rawValue)}onChange_(){this.refresh()}}class Nh{constructor(D,j){var ie;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=j.baseStep,this.parser_=j.parser,this.props=j.props,this.sliderProps_=(ie=j.sliderProps)!==null&&ie!==void 0?ie:null,this.value=j.value,this.viewProps=j.viewProps,this.dragging_=$(null),this.view=new Cc(D,{arrayPosition:j.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const Ne=new kc(this.view.knobElement);Ne.emitter.on("down",this.onPointerDown_),Ne.emitter.on("move",this.onPointerMove_),Ne.emitter.on("up",this.onPointerUp_)}constrainValue_(D){var j,ie;const Ne=(j=this.sliderProps_)===null||j===void 0?void 0:j.get("minValue"),xt=(ie=this.sliderProps_)===null||ie===void 0?void 0:ie.get("maxValue");let $t=D;return Ne!==void 0&&($t=Math.max($t,Ne)),xt!==void 0&&($t=Math.min($t,xt)),$t}onInputChange_(D){const j=D.currentTarget.value,ie=this.parser_(j);d(ie)||(this.value.rawValue=this.constrainValue_(ie)),this.view.refresh()}onInputKeyDown_(D){const j=ca(this.baseStep_,Nr(D));j!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+j),{forceEmit:!1,last:!1})}onInputKeyUp_(D){ca(this.baseStep_,Nr(D))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(D){if(!D.point)return null;const j=D.point.x-D.bounds.width/2;return this.constrainValue_(this.originRawValue_+j*this.props.get("draggingScale"))}onPointerMove_(D){const j=this.computeDraggingValue_(D.data);j!==null&&(this.value.setRawValue(j,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(D){const j=this.computeDraggingValue_(D.data);j!==null&&(this.value.setRawValue(j,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}function Sc(J,D){J.write(D)}function af(J){const D=J?Gt(J,wn):null;return D?D.step:null}function Ec(J,D){const j=J&&Gt(J,wn);return j?jo(j.step):Math.max(jo(D),2)}function Oh(J){const D=af(J);return D!=null?D:1}function rm(J,D){var j;const ie=J&&Gt(J,wn),Ne=Math.abs((j=ie==null?void 0:ie.step)!==null&&j!==void 0?j:D);return Ne===0?.1:Math.pow(10,Math.floor(Math.log10(Ne))-1)}function lf(J){return[J[0],J[1],J[2]]}function sm(J,D){const j=Cr(D==="float"?2:0);return`rgb(${lf(J.getComponents("rgb",D)).map(ie=>j(ie)).join(", ")})`}function Wg(J){return D=>sm(D,J)}function Fh(J,D){const j=Cr(2),ie=Cr(D==="float"?2:0);return`rgba(${J.getComponents("rgb",D).map((Ne,xt)=>(xt===3?j:ie)(Ne)).join(", ")})`}function zg(J){return D=>Fh(D,J)}function om(J,D){const j=Cr(D==="float"?2:0),ie=["r","g","b"];return`{${lf(J.getComponents("rgb",D)).map((Ne,xt)=>`${ie[xt]}: ${j(Ne)}`).join(", ")}}`}function am(J){return D=>om(D,J)}function Ug(J,D){const j=Cr(2),ie=Cr(D==="float"?2:0),Ne=["r","g","b","a"];return`{${J.getComponents("rgb",D).map((xt,$t)=>{const In=$t===3?j:ie;return`${Ne[$t]}: ${In(xt)}`}).join(", ")}}`}function Gg(J){return D=>Ug(D,J)}[...["int","float"].reduce((J,D)=>[...J,{format:{alpha:!1,mode:"rgb",notation:"func",type:D},stringifier:Wg(D)},{format:{alpha:!0,mode:"rgb",notation:"func",type:D},stringifier:zg(D)},{format:{alpha:!1,mode:"rgb",notation:"object",type:D},stringifier:am(D)},{format:{alpha:!0,mode:"rgb",notation:"object",type:D},stringifier:Gg(D)}],[])];class Hg{constructor(D){this.components=D.components,this.asm_=D.assembly}constrain(D){const j=this.asm_.toComponents(D).map((ie,Ne)=>{var xt,$t;return($t=(xt=this.components[Ne])===null||xt===void 0?void 0:xt.constrain(ie))!==null&&$t!==void 0?$t:ie});return this.asm_.fromComponents(j)}}const lm=w("pndtxt");class Yg{constructor(D,j){this.textViews=j.textViews,this.element=D.createElement("div"),this.element.classList.add(lm()),this.textViews.forEach(ie=>{const Ne=D.createElement("div");Ne.classList.add(lm("a")),Ne.appendChild(ie.element),this.element.appendChild(Ne)})}}function cf(J,D,j){return new Nh(J,{arrayPosition:j===0?"fst":j===D.axes.length-1?"lst":"mid",baseStep:D.axes[j].baseStep,parser:D.parser,props:D.axes[j].textProps,value:$(0,{constraint:D.axes[j].constraint}),viewProps:D.viewProps})}class Pl{constructor(D,j){this.value=j.value,this.viewProps=j.viewProps,this.acs_=j.axes.map((ie,Ne)=>cf(D,j,Ne)),this.acs_.forEach((ie,Ne)=>{La({primary:this.value,secondary:ie.value,forward:xt=>j.assembly.toComponents(xt.rawValue)[Ne],backward:(xt,$t)=>{const In=j.assembly.toComponents(xt.rawValue);return In[Ne]=$t.rawValue,j.assembly.fromComponents(In)}})}),this.view=new Yg(D,{textViews:this.acs_.map(ie=>ie.view)})}}function jg(J,D){return"step"in J&&!d(J.step)?new wn(J.step,D):null}function vu(J){return"max"in J&&!d(J.max)||"min"in J&&!d(J.min)?new fn({max:J.max,min:J.min}):null}const $g={monitor:{defaultInterval:200,defaultLineCount:3}},ha=w("grl");class cm{constructor(D,j){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=D.createElement("div"),this.element.classList.add(ha()),j.viewProps.bindClassModifiers(this.element),this.formatter_=j.formatter,this.props_=j.props,this.cursor_=j.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const ie=D.createElementNS(Se,"svg");ie.classList.add(ha("g")),ie.style.height=`calc(var(--bld-us) * ${j.lineCount})`,this.element.appendChild(ie),this.svgElem_=ie;const Ne=D.createElementNS(Se,"polyline");this.svgElem_.appendChild(Ne),this.lineElem_=Ne;const xt=D.createElement("div");xt.classList.add(ha("t"),w("tt")()),this.element.appendChild(xt),this.tooltipElem_=xt,j.value.emitter.on("change",this.onValueUpdate_),this.value=j.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const D=this.svgElem_.getBoundingClientRect(),j=this.value.rawValue.length-1,ie=this.props_.get("minValue"),Ne=this.props_.get("maxValue"),xt=[];this.value.rawValue.forEach((yo,Ic)=>{if(yo===void 0)return;const gf=Ur(Ic,0,j,0,D.width),o1=Ur(yo,ie,Ne,D.height,0);xt.push([gf,o1].join(","))}),this.lineElem_.setAttributeNS(null,"points",xt.join(" "));const $t=this.tooltipElem_,In=this.value.rawValue[this.cursor_.rawValue];if(In===void 0){$t.classList.remove(ha("t","a"));return}const gr=Ur(this.cursor_.rawValue,0,j,0,D.width),is=Ur(In,ie,Ne,D.height,0);$t.style.left=`${gr}px`,$t.style.top=`${is}px`,$t.textContent=`${this.formatter_(In)}`,$t.classList.contains(ha("t","a"))||($t.classList.add(ha("t","a"),ha("t","in")),gt($t),$t.classList.remove(ha("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class qg{constructor(D,j){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=j.props,this.value=j.value,this.viewProps=j.viewProps,this.cursor_=$(-1),this.view=new cm(D,{cursor:this.cursor_,formatter:j.formatter,lineCount:j.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!He(D))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const ie=new kc(this.view.element);ie.emitter.on("down",this.onGraphPointerDown_),ie.emitter.on("move",this.onGraphPointerMove_),ie.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(D){const j=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Ur(D.offsetX,0,j.width,0,this.value.rawValue.length))}onGraphPointerDown_(D){this.onGraphPointerMove_(D)}onGraphPointerMove_(D){if(!D.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Ur(D.data.point.x,0,D.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}class Xg{constructor(D){this.controller_=D}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(D){this.controller_.viewProps.set("disabled",D)}get title(){var D;return(D=this.controller_.props.get("title"))!==null&&D!==void 0?D:""}set title(D){this.controller_.props.set("title",D)}on(D,j){const ie=j.bind(this);return this.controller_.emitter.on(D,()=>{ie(new a(this))}),this}}class Zg extends a{constructor(D,j,ie){super(D),this.cell=j,this.index=ie}}class Kg extends s{constructor(D){super(D),this.cellToApiMap_=new Map,this.emitter_=new _;const j=this.controller_.valueController;j.cellControllers.forEach((ie,Ne)=>{const xt=new Xg(ie);this.cellToApiMap_.set(ie,xt),ie.emitter.on("click",()=>{const $t=Ne%j.size[0],In=Math.floor(Ne/j.size[0]);this.emitter_.emit("click",{event:new Zg(this,xt,[$t,In])})})})}cell(D,j){const ie=this.controller_.valueController,Ne=ie.cellControllers[j*ie.size[0]+D];return this.cellToApiMap_.get(Ne)}on(D,j){const ie=j.bind(this);return this.emitter_.on(D,Ne=>{ie(Ne.event)}),this}}class um{constructor(D,j){this.size=j.size;const[ie,Ne]=this.size,xt=[];for(let $t=0;$t<Ne;$t++)for(let In=0;In<ie;In++){const gr=new U(D,{props:ee.fromObject(Object.assign({},j.cellConfig(In,$t))),viewProps:we.create()});xt.push(gr)}this.cellCs_=xt,this.viewProps=we.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach($t=>{$t.viewProps.set("disposed",!0)})}),this.view=new At(D,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${ie}, 1fr)`,this.cellCs_.forEach($t=>{this.view.element.appendChild($t.view.element)})}get cellControllers(){return this.cellCs_}}const Jg={id:"buttongrid",type:"blade",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept(J){const D=it,j=tt(J,{cells:D.required.function,size:D.required.array(D.required.number),view:D.required.constant("buttongrid"),label:D.optional.string});return j?{params:j}:null},controller(J){return new Ot(J.document,{blade:J.blade,props:ee.fromObject({label:J.params.label}),valueController:new um(J.document,{cellConfig:J.params.cells,size:J.params.size})})},api(J){return!(J.controller instanceof Ot)||!(J.controller.valueController instanceof um)?null:new Kg(J.controller)}};class Qg extends s{get label(){return this.controller_.props.get("label")}set label(D){this.controller_.props.set("label",D)}get value(){return this.controller_.valueController.value.rawValue}set value(D){this.controller_.valueController.value.rawValue=D}on(D,j){const ie=j.bind(this);return this.controller_.valueController.value.emitter.on(D,Ne=>{ie(new u(this,Ne.rawValue,void 0,Ne.options.last))}),this}}function Ao(J,D,j){return J*(1-j)+D*j}const e1=20,t1=.001,uf=100;function hm(J,D){let j=.25,ie=.5,Ne=-1;for(let xt=0;xt<e1;xt++){const[$t,In]=J.curve(ie);if(ie+=j*($t<D?1:-1),Ne=In,j*=.5,Math.abs(D-$t)<t1)break}return Ne}class sl{constructor(D=0,j=0,ie=1,Ne=1){this.cache_=[],this.comps_=[D,j,ie,Ne]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(D){return d(D)||!Array.isArray(D)?!1:typeof D[0]=="number"&&typeof D[1]=="number"&&typeof D[2]=="number"&&typeof D[3]=="number"}static equals(D,j){return D.x1===j.x1&&D.y1===j.y1&&D.x2===j.x2&&D.y2===j.y2}curve(D){const j=Ao(0,this.x1,D),ie=Ao(0,this.y1,D),Ne=Ao(this.x1,this.x2,D),xt=Ao(this.y1,this.y2,D),$t=Ao(this.x2,1,D),In=Ao(this.y2,1,D),gr=Ao(j,Ne,D),is=Ao(ie,xt,D),yo=Ao(Ne,$t,D),Ic=Ao(xt,In,D);return[Ao(gr,yo,D),Ao(is,Ic,D)]}y(D){if(this.cache_.length===0){const j=[];for(let ie=0;ie<uf;ie++)j.push(hm(this,Ur(ie,0,uf-1,0,1)));this.cache_=j}return this.cache_[Math.round(Ur(so(D,0,1),0,1,0,uf-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const dm={toComponents:J=>J.toObject(),fromComponents:J=>new sl(...J)};function n1(J){const D=Cr(2);return`cubic-bezier(${J.toObject().map(j=>D(j)).join(", ")})`}const hf=[0,.5,.5,1];function df(J){const D=J.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!D)return new sl(...hf);const j=[D[1],D[2],D[3],D[4]].reduce((ie,Ne)=>{if(!ie)return null;const xt=Number(Ne);return isNaN(xt)?null:[...ie,xt]},[]);return new sl(...j!=null?j:hf)}const qr=w("cbz");class yu{constructor(D,j){this.element=D.createElement("div"),this.element.classList.add(qr()),j.viewProps.bindClassModifiers(this.element),j.foldable.bindExpandedClass(this.element,qr(void 0,"expanded")),P(j.foldable,"completed",O(this.element,qr(void 0,"cpl")));const ie=D.createElement("div");ie.classList.add(qr("h")),this.element.appendChild(ie);const Ne=D.createElement("button");Ne.classList.add(qr("b")),j.viewProps.bindDisabled(Ne);const xt=D.createElementNS(Se,"svg");xt.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',Ne.appendChild(xt),ie.appendChild(Ne),this.buttonElement=Ne;const $t=D.createElement("div");if($t.classList.add(qr("t")),ie.appendChild($t),this.textElement=$t,j.pickerLayout==="inline"){const In=D.createElement("div");In.classList.add(qr("p")),this.element.appendChild(In),this.pickerElement=In}else this.pickerElement=null}}const Bh=w("cbzp");class dn{constructor(D,j){this.element=D.createElement("div"),this.element.classList.add(Bh()),j.viewProps.bindClassModifiers(this.element);const ie=D.createElement("div");ie.classList.add(Bh("g")),this.element.appendChild(ie),this.graphElement=ie;const Ne=D.createElement("div");Ne.classList.add(Bh("t")),this.element.appendChild(Ne),this.textElement=Ne}}function Lo(J,D){const j=new MutationObserver(Ne=>{for(const xt of Ne)xt.type==="childList"&&xt.addedNodes.forEach($t=>{!$t.contains($t)||(D(),j.disconnect())})}),ie=J.ownerDocument;j.observe(ie.body,{attributes:!0,childList:!0,subtree:!0})}const vo=w("cbzg");function Vh(J,D){return j=>D(J(j))}class Or{constructor(D,j){this.element=D.createElement("div"),this.element.classList.add(vo()),j.viewProps.bindClassModifiers(this.element),j.viewProps.bindTabIndex(this.element);const ie=D.createElement("div");ie.classList.add(vo("p")),this.element.appendChild(ie),this.previewElement=ie;const Ne=D.createElementNS(Se,"svg");Ne.classList.add(vo("g")),this.element.appendChild(Ne),this.svgElem_=Ne;const xt=D.createElementNS(Se,"path");xt.classList.add(vo("u")),this.svgElem_.appendChild(xt),this.guideElem_=xt;const $t=D.createElementNS(Se,"polyline");$t.classList.add(vo("l")),this.svgElem_.appendChild($t),this.lineElem_=$t,this.handleElems_=[D.createElement("div"),D.createElement("div")],this.handleElems_.forEach(In=>{In.classList.add(vo("h")),this.element.appendChild(In)}),this.vectorElems_=[D.createElementNS(Se,"line"),D.createElementNS(Se,"line")],this.vectorElems_.forEach(In=>{In.classList.add(vo("v")),this.svgElem_.appendChild(In)}),this.value_=j.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=j.selection,this.handleElems_.forEach((In,gr)=>{A(this.sel_,Vh(is=>is===gr,O(In,vo("h","sel"))))}),Lo(this.element,()=>{this.refresh()})}getVertMargin_(D){return D*.25}valueToPosition(D,j){const ie=this.element.getBoundingClientRect(),Ne=ie.width,xt=ie.height,$t=this.getVertMargin_(xt);return{x:Ur(D,0,1,0,Ne),y:Ur(j,0,1,xt-$t,$t)}}positionToValue(D,j){const ie=this.element.getBoundingClientRect(),Ne=ie.width,xt=ie.height,$t=this.getVertMargin_(xt);return{x:so(Ur(D,0,Ne,0,1),0,1),y:Ur(j,xt-$t,$t,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(xt=>{const $t=this.valueToPosition(0,xt),In=this.valueToPosition(1,xt);return[`M ${$t.x},${$t.y}`,`L ${In.x},${In.y}`].join(" ")}).join(" "));const D=this.value_.rawValue,j=[];let ie=0;for(;;){const xt=this.valueToPosition(...D.curve(ie));if(j.push([xt.x,xt.y].join(",")),ie>=1)break;ie=Math.min(ie+.05,1)}this.lineElem_.setAttributeNS(null,"points",j.join(" "));const Ne=D.toObject();[0,1].forEach(xt=>{const $t=this.valueToPosition(xt,xt),In=this.valueToPosition(Ne[xt*2],Ne[xt*2+1]),gr=this.vectorElems_[xt];gr.setAttributeNS(null,"x1",String($t.x)),gr.setAttributeNS(null,"y1",String($t.y)),gr.setAttributeNS(null,"x2",String(In.x)),gr.setAttributeNS(null,"y2",String(In.y));const is=this.handleElems_[xt];is.style.left=`${In.x}px`,is.style.top=`${In.y}px`})}onValueChange_(){this.refresh()}}const Tc=24,ol=400,al=1e3,Ro=w("cbzprv");class $o{constructor(D,j){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=D.createElement("div"),this.element.classList.add(Ro()),j.viewProps.bindClassModifiers(this.element);const ie=D.createElementNS(Se,"svg");ie.classList.add(Ro("g")),this.element.appendChild(ie),this.svgElem_=ie;const Ne=D.createElementNS(Se,"path");Ne.classList.add(Ro("t")),this.svgElem_.appendChild(Ne),this.ticksElem_=Ne;const xt=D.createElement("div");xt.classList.add(Ro("m")),this.element.appendChild(xt),this.markerElem_=xt,this.value_=j.value,this.value_.emitter.on("change",this.onValueChange_),j.viewProps.handleDispose(this.onDispose_),Lo(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(Ro("m","a")),this.startTime_=new Date().getTime()+ol,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(Ro("m","a"))}onDispose_(){this.stop()}updateMarker_(D){const j=this.value_.rawValue.y(so(D,0,1));this.markerElem_.style.left=`${j*100}%`}refresh(){const D=this.svgElem_.getBoundingClientRect(),j=D.width,ie=D.height,Ne=[],xt=this.value_.rawValue;for(let $t=0;$t<Tc;$t++){const In=Ur($t,0,Tc-1,0,1),gr=Ur(xt.y(In),0,1,0,j);Ne.push(`M ${gr},0 v${ie}`)}this.ticksElem_.setAttributeNS(null,"d",Ne.join(" "))}onTimer_(){if(this.startTime_===null)return;const D=new Date().getTime()-this.startTime_,j=D/al;this.updateMarker_(j),D>al+ol&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function ff(J,D,j,ie){const Ne=j-J,xt=ie-D;return Math.sqrt(Ne*Ne+xt*xt)}function i1(J,D,j,ie){const Ne=ff(J,D,j,ie),xt=Math.atan2(ie-D,j-J),$t=Math.round(xt/(Math.PI/4))*Math.PI/4;return{x:J+Math.cos($t)*Ne,y:D+Math.sin($t)*Ne}}class r1{constructor(D,j){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=j.baseStep,this.value=j.value,this.sel_=$(0),this.viewProps=j.viewProps,this.view=new Or(D,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new $o(D,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",Ne=>{Ne.stopImmediatePropagation(),Ne.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const ie=new kc(this.view.element);ie.emitter.on("down",this.onPointerDown_),ie.emitter.on("move",this.onPointerMove_),ie.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(D,j,ie){const Ne=this.sel_.rawValue,xt=this.value.rawValue.toObject(),$t=this.view.positionToValue(D.x,D.y),In=j?i1(Ne,Ne,$t.x,$t.y):$t;xt[Ne*2]=In.x,xt[Ne*2+1]=In.y,this.value.setRawValue(new sl(...xt),ie)}onPointerDown_(D){const j=D.data;if(!j.point)return;const ie=this.value.rawValue,Ne=this.view.valueToPosition(ie.x1,ie.y1),xt=ff(j.point.x,j.point.y,Ne.x,Ne.y),$t=this.view.valueToPosition(ie.x2,ie.y2),In=ff(j.point.x,j.point.y,$t.x,$t.y);this.sel_.rawValue=xt<=In?0:1,this.updateValue_(j.point,D.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(D){const j=D.data;!j.point||this.updateValue_(j.point,D.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(D){const j=D.data;!j.point||this.updateValue_(j.point,D.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(D){_s(D.key)&&D.preventDefault();const j=this.sel_.rawValue,ie=this.value.rawValue.toObject();ie[j*2]+=ca(this.baseStep_,ua(D)),ie[j*2+1]+=ca(this.baseStep_,Nr(D)),this.value.setRawValue(new sl(...ie),{forceEmit:!1,last:!1})}onKeyUp_(D){_s(D.key)&&D.preventDefault();const j=ca(this.baseStep_,ua(D)),ie=ca(this.baseStep_,Nr(D));j===0&&ie===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class _u{constructor(D,j){this.value=j.value,this.viewProps=j.viewProps,this.view=new dn(D,{viewProps:this.viewProps}),this.gc_=new r1(D,{baseStep:j.axis.baseStep,value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const ie=Object.assign(Object.assign({},j.axis),{constraint:new fn({max:1,min:0})}),Ne=Object.assign(Object.assign({},j.axis),{constraint:void 0});this.tc_=new Pl(D,{assembly:dm,axes:[ie,Ne,ie,Ne],parser:Mo,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(D=>D.inputElement)]}refresh(){this.gc_.refresh()}}class Ys{constructor(D,j){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=j.value,this.viewProps=j.viewProps,this.foldable_=We(j.expanded),this.view=new yu(D,{foldable:this.foldable_,pickerLayout:j.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new An(D,{parser:df,props:ee.fromObject({formatter:n1}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=j.pickerLayout==="popup"?new nn(D,{viewProps:this.viewProps}):null;const ie=new _u(D,{axis:j.axis,value:this.value,viewProps:this.viewProps});ie.allFocusableElements.forEach(Ne=>{Ne.addEventListener("blur",this.onPopupChildBlur_),Ne.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=ie,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),A(this.popC_.shows,Ne=>{Ne&&ie.refresh()}),La({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:Ne=>Ne.rawValue,backward:(Ne,xt)=>xt.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),It(this.foldable_,this.view.pickerElement))}onButtonBlur_(D){if(!this.popC_)return;const j=D.relatedTarget;(!j||!this.popC_.view.element.contains(j))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(D){if(!this.popC_)return;const j=this.popC_.view.element,ie=pt(D);ie&&j.contains(ie)||ie&&ie===this.view.buttonElement&&!He(j.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(D){!this.popC_||D.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function bu(){return new Hg({assembly:dm,components:[0,1,2,3].map(J=>J%2===0?new fn({min:0,max:1}):void 0)})}const Ra={id:"cubic-bezier",type:"blade",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept(J){const D=it,j=tt(J,{value:D.required.array(D.required.number),view:D.required.constant("cubicbezier"),expanded:D.optional.boolean,label:D.optional.string,picker:D.optional.custom(ie=>ie==="inline"||ie==="popup"?ie:void 0)});return j?{params:j}:null},controller(J){var D,j;const ie=new sl(...J.params.value),Ne=$(ie,{constraint:bu(),equals:sl.equals}),xt=new Ys(J.document,{axis:{baseStep:.1,textProps:ee.fromObject({draggingScale:.01,formatter:Cr(2)})},expanded:(D=J.params.expanded)!==null&&D!==void 0?D:!1,pickerLayout:(j=J.params.picker)!==null&&j!==void 0?j:"popup",value:Ne,viewProps:J.viewProps});return new Tt(J.document,{blade:J.blade,props:ee.fromObject({label:J.params.label}),valueController:xt})},api(J){return!(J.controller instanceof Tt)||!(J.controller.valueController instanceof Ys)?null:new Qg(J.controller)}};class fm extends s{begin(){this.controller_.valueController.begin()}end(){this.controller_.valueController.end()}}const Wh=20;class pf{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(D){this.start_=D.getTime()}calculateFps_(D){if(this.timestamps_.length===0)return null;const j=this.timestamps_[0];return 1e3*(this.frameCount_-j.frameCount)/(D-j.time)}compactTimestamps_(){if(this.timestamps_.length<=Wh)return;const D=this.timestamps_.length-Wh;this.timestamps_.splice(0,D);const j=this.timestamps_[0].frameCount;this.timestamps_.forEach(ie=>{ie.frameCount-=j}),this.frameCount_-=j}end(D){if(this.start_===null)return;const j=D.getTime();this.duration_=j-this.start_,this.start_=null,this.fps_=this.calculateFps_(j),this.timestamps_.push({frameCount:this.frameCount_,time:j}),++this.frameCount_,this.compactTimestamps_()}}const qo=w("fps");class Sr{constructor(D,j){this.element=D.createElement("div"),this.element.classList.add(qo()),j.viewProps.bindClassModifiers(this.element),this.graphElement=D.createElement("div"),this.graphElement.classList.add(qo("g")),this.element.appendChild(this.graphElement);const ie=D.createElement("div");ie.classList.add(qo("l")),this.element.appendChild(ie);const Ne=D.createElement("span");Ne.classList.add(qo("v")),Ne.textContent="--",ie.appendChild(Ne),this.valueElement=Ne;const xt=D.createElement("span");xt.classList.add(qo("u")),xt.textContent="FPS",ie.appendChild(xt)}}class Pa{constructor(D,j){this.stopwatch_=new pf,this.onTick_=this.onTick_.bind(this),this.ticker_=j.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=j.value,this.viewProps=j.viewProps,this.view=new Sr(D,{viewProps:this.viewProps}),this.graphC_=new qg(D,{formatter:Cr(0),lineCount:j.lineCount,props:ee.fromObject({maxValue:j.maxValue,minValue:j.minValue}),value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const D=this.stopwatch_.fps;if(D!==null){const j=this.value_.rawValue;this.value_.rawValue=Yo(j,D),this.view.valueElement.textContent=D.toFixed(0)}}}function ns(J,D){return D===0?new fe:new lt(J,D!=null?D:$g.monitor.defaultInterval)}const xu={id:"fpsgraph",type:"blade",accept(J){const D=it,j=tt(J,{view:D.required.constant("fpsgraph"),interval:D.optional.number,label:D.optional.string,lineCount:D.optional.number,max:D.optional.number,min:D.optional.number});return j?{params:j}:null},controller(J){var D,j,ie,Ne;const xt=(D=J.params.interval)!==null&&D!==void 0?D:500;return new Ot(J.document,{blade:J.blade,props:ee.fromObject({label:J.params.label}),valueController:new Pa(J.document,{lineCount:(j=J.params.lineCount)!==null&&j!==void 0?j:2,maxValue:(ie=J.params.max)!==null&&ie!==void 0?ie:90,minValue:(Ne=J.params.min)!==null&&Ne!==void 0?Ne:0,ticker:ns(J.document,xt),value:Dr(80),viewProps:J.viewProps})})},api(J){return!(J.controller instanceof Ot)||!(J.controller.valueController instanceof Pa)?null:new fm(J.controller)}};class Pr{constructor(D,j){this.min=D,this.max=j}static isObject(D){if(typeof D!="object"||D===null)return!1;const j=D.min,ie=D.max;return!(typeof j!="number"||typeof ie!="number")}static equals(D,j){return D.min===j.min&&D.max===j.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const zh={fromComponents:J=>new Pr(J[0],J[1]),toComponents:J=>[J.min,J.max]};class Xr{constructor(D){this.edge=D}constrain(D){var j,ie,Ne,xt,$t,In,gr,is;if(D.min<=D.max)return new Pr((ie=(j=this.edge)===null||j===void 0?void 0:j.constrain(D.min))!==null&&ie!==void 0?ie:D.min,(xt=(Ne=this.edge)===null||Ne===void 0?void 0:Ne.constrain(D.max))!==null&&xt!==void 0?xt:D.max);const yo=(D.min+D.max)/2;return new Pr((In=($t=this.edge)===null||$t===void 0?void 0:$t.constrain(yo))!==null&&In!==void 0?In:yo,(is=(gr=this.edge)===null||gr===void 0?void 0:gr.constrain(yo))!==null&&is!==void 0?is:yo)}}const Mc=w("rsltxt");class s1{constructor(D,j){this.sliderView_=j.sliderView,this.textView_=j.textView,this.element=D.createElement("div"),this.element.classList.add(Mc());const ie=D.createElement("div");ie.classList.add(Mc("s")),ie.appendChild(this.sliderView_.element),this.element.appendChild(ie);const Ne=D.createElement("div");Ne.classList.add(Mc("t")),Ne.appendChild(this.textView_.element),this.element.appendChild(Ne)}}const ll=w("rsl");class Ac{constructor(D,j){this.maxValue_=j.maxValue,this.minValue_=j.minValue,this.element=D.createElement("div"),this.element.classList.add(ll()),j.viewProps.bindClassModifiers(this.element),this.value_=j.value,this.value_.emitter.on("change",this.onValueChange_.bind(this));const ie=D.createElement("div");ie.classList.add(ll("t")),this.element.appendChild(ie),this.trackElement=ie;const Ne=D.createElement("div");Ne.classList.add(ll("b")),ie.appendChild(Ne),this.barElement=Ne;const xt=["min","max"].map($t=>{const In=D.createElement("div");return In.classList.add(ll("k"),ll("k",$t)),ie.appendChild(In),In});this.knobElements=[xt[0],xt[1]],this.update()}valueToX_(D){return so(Ur(D,this.minValue_,this.maxValue_,0,1),0,1)*100}update(){const D=this.value_.rawValue;D.length===0?this.element.classList.add(ll(void 0,"zero")):this.element.classList.remove(ll(void 0,"zero"));const j=[this.valueToX_(D.min),this.valueToX_(D.max)];this.barElement.style.left=`${j[0]}%`,this.barElement.style.right=`${100-j[1]}%`,this.knobElements.forEach((ie,Ne)=>{ie.style.left=`${j[Ne]}%`})}onValueChange_(){this.update()}}class Il{constructor(D,j){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.maxValue_=j.maxValue,this.minValue_=j.minValue,this.viewProps=j.viewProps,this.value=j.value,this.view=new Ac(D,{maxValue:j.maxValue,minValue:j.minValue,value:this.value,viewProps:j.viewProps});const ie=new kc(this.view.trackElement);ie.emitter.on("down",this.onPointerDown_),ie.emitter.on("move",this.onPointerMove_),ie.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(D){if(!D.point)return null;const j=(D.point.x+this.ofs_())/D.bounds.width;return Ur(j,0,1,this.minValue_,this.maxValue_)}onPointerDown_(D){if(!D.data.point)return;const j=D.data.point.x/D.data.bounds.width,ie=this.value.rawValue,Ne=Ur(ie.min,this.minValue_,this.maxValue_,0,1),xt=Ur(ie.max,this.minValue_,this.maxValue_,0,1);Math.abs(xt-j)<=.025?this.grabbing_="max":Math.abs(Ne-j)<=.025?this.grabbing_="min":j>=Ne&&j<=xt?(this.grabbing_="length",this.grabOffset_=Ur(j-Ne,0,1,0,this.maxValue_-this.minValue_)):j<Ne?(this.grabbing_="min",this.onPointerMove_(D)):j>xt&&(this.grabbing_="max",this.onPointerMove_(D))}applyPointToValue_(D,j){const ie=this.valueFromData_(D);if(ie!==null){if(this.grabbing_==="min")this.value.setRawValue(new Pr(ie,this.value.rawValue.max),j);else if(this.grabbing_==="max")this.value.setRawValue(new Pr(this.value.rawValue.min,ie),j);else if(this.grabbing_==="length"){const Ne=this.value.rawValue.length;let xt=ie-this.grabOffset_,$t=xt+Ne;xt<this.minValue_?(xt=this.minValue_,$t=this.minValue_+Ne):$t>this.maxValue_&&(xt=this.maxValue_-Ne,$t=this.maxValue_),this.value.setRawValue(new Pr(xt,$t),j)}}}onPointerMove_(D){this.applyPointToValue_(D.data,{forceEmit:!1,last:!1})}onPointerUp_(D){this.applyPointToValue_(D.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class Ia{constructor(D,j){this.value=j.value,this.viewProps=j.viewProps,this.sc_=new Il(D,j);const ie={baseStep:j.baseStep,constraint:j.constraint,textProps:ee.fromObject({draggingScale:j.draggingScale,formatter:j.formatter})};this.tc_=new Pl(D,{assembly:zh,axes:[ie,ie],parser:j.parser,value:this.value,viewProps:j.viewProps}),this.view=new s1(D,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function Lc(J){return Pr.isObject(J)?new Pr(J.min,J.max):new Pr(0,0)}function wu(J,D){J.writeProperty("max",D.max),J.writeProperty("min",D.min)}function pm(J){const D=[],j=vu(J);j&&D.push(j);const ie=jg(J);return ie&&D.push(ie),new Xr(new Nt(D))}const fs={id:"input-interval",type:"input",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept:(J,D)=>{if(!Pr.isObject(J))return null;const j=it,ie=tt(D,{format:j.optional.function,max:j.optional.number,min:j.optional.number,step:j.optional.number});return ie?{initialValue:new Pr(J.min,J.max),params:ie}:null},binding:{reader:J=>Lc,constraint:J=>pm(J.params),equals:Pr.equals,writer:J=>wu},controller(J){var D;const j=J.value,ie=J.constraint;if(!(ie instanceof Xr))throw g.shouldNeverHappen();const Ne=(j.rawValue.min+j.rawValue.max)/2,xt=(D=J.params.format)!==null&&D!==void 0?D:Cr(Ec(ie.edge,Ne)),$t=ie.edge&&Gt(ie.edge,fn);if(($t==null?void 0:$t.minValue)!==void 0&&($t==null?void 0:$t.maxValue)!==void 0)return new Ia(J.document,{baseStep:Oh(ie.edge),constraint:ie.edge,draggingScale:rm($t,Ne),formatter:xt,maxValue:$t.maxValue,minValue:$t.minValue,parser:Mo,value:j,viewProps:J.viewProps});const In={baseStep:Oh(ie.edge),constraint:ie.edge,textProps:ee.fromObject({draggingScale:Ne,formatter:xt})};return new Pl(J.document,{assembly:zh,axes:[In,In],parser:Mo,value:j,viewProps:J.viewProps})}};class mf{constructor(D){this.controller_=D}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(D){this.controller_.viewProps.set("disabled",D)}get title(){var D;return(D=this.controller_.props.get("title"))!==null&&D!==void 0?D:""}set title(D){this.controller_.props.set("title",D)}}class Rc extends u{constructor(D,j,ie,Ne,xt){super(D,Ne,xt),this.cell=j,this.index=ie}}class ku extends s{constructor(D){super(D),this.cellToApiMap_=new Map,this.controller_.valueController.cellControllers.forEach(j=>{const ie=new mf(j);this.cellToApiMap_.set(j,ie)})}get value(){return this.controller_.value}cell(D,j){const ie=this.controller_.valueController,Ne=ie.cellControllers[j*ie.size[0]+D];return this.cellToApiMap_.get(Ne)}on(D,j){const ie=j.bind(this);this.controller_.value.emitter.on(D,Ne=>{const xt=this.controller_.valueController,$t=xt.findCellByValue(Ne.rawValue);if(!$t)return;const In=this.cellToApiMap_.get($t);if(!In)return;const gr=xt.cellControllers.indexOf($t);ie(new Rc(this,In,[gr%xt.size[0],Math.floor(gr/xt.size[0])],Ne.rawValue,void 0))})}}const Cu=w("rad");class Uh{constructor(D,j){this.element=D.createElement("div"),this.element.classList.add(Cu()),j.viewProps.bindClassModifiers(this.element);const ie=D.createElement("label");ie.classList.add(Cu("l")),this.element.appendChild(ie);const Ne=D.createElement("input");Ne.classList.add(Cu("i")),Ne.name=j.name,Ne.type="radio",j.viewProps.bindDisabled(Ne),ie.appendChild(Ne),this.inputElement=Ne;const xt=D.createElement("div");xt.classList.add(Cu("b")),ie.appendChild(xt);const $t=D.createElement("div");$t.classList.add(Cu("t")),xt.appendChild($t),P(j.props,"title",In=>{$t.textContent=In})}}class Da{constructor(D,j){this.props=j.props,this.viewProps=j.viewProps,this.view=new Uh(D,{name:j.name,props:this.props,viewProps:this.viewProps})}}class Na{constructor(D,j){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=j.size;const[ie,Ne]=this.size;for(let xt=0;xt<Ne;xt++)for(let $t=0;$t<ie;$t++){const In=new Da(D,{name:j.groupName,props:ee.fromObject(Object.assign({},j.cellConfig($t,xt))),viewProps:we.create()});this.cellCs_.push(In),this.cellValues_.push(j.cellConfig($t,xt).value)}this.value=j.value,A(this.value,xt=>{const $t=this.findCellByValue(xt);!$t||($t.view.inputElement.checked=!0)}),this.viewProps=we.create(),this.view=new At(D,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${ie}, 1fr)`,this.cellCs_.forEach(xt=>{xt.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(xt.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(D){const j=this.cellValues_.findIndex(ie=>ie===D);return j<0?null:this.cellCs_[j]}onCellInputChange_(D){const j=D.currentTarget,ie=this.cellCs_.findIndex(Ne=>Ne.view.inputElement===j);ie<0||(this.value.rawValue=this.cellValues_[ie])}}const Su=function(){return{id:"radiogrid",type:"blade",accept(J){const D=it,j=tt(J,{cells:D.required.function,groupName:D.required.string,size:D.required.array(D.required.number),value:D.required.raw,view:D.required.constant("radiogrid"),label:D.optional.string});return j?{params:j}:null},controller(J){return new Tt(J.document,{blade:J.blade,props:ee.fromObject({label:J.params.label}),valueController:new Na(J.document,{groupName:J.params.groupName,cellConfig:J.params.cells,size:J.params.size,value:$(J.params.value)})})},api(J){return!(J.controller instanceof Tt)||!(J.controller.valueController instanceof Na)?null:new ku(J.controller)}}}();function Gh(J){return{id:"input-radiogrid",type:"input",accept(D,j){if(!J.isType(D))return null;const ie=it,Ne=tt(j,{cells:ie.required.function,groupName:ie.required.string,size:ie.required.array(ie.required.number),view:ie.required.constant("radiogrid")});return Ne?{initialValue:D,params:Ne}:null},binding:J.binding,controller:D=>new Na(D.document,{cellConfig:D.params.cells,groupName:D.params.groupName,size:D.params.size,value:D.value})}}const mm=Gh({isType:J=>typeof J=="number",binding:{reader:J=>Gs,writer:J=>Sc}}),Pc=Gh({isType:J=>typeof J=="string",binding:{reader:J=>or,writer:J=>Sc}}),gm=Gh({isType:J=>typeof J=="boolean",binding:{reader:J=>kn,writer:J=>Sc}}),Dl=[Jg,Ra,xu,fs,Su,gm,mm,Pc];n.CubicBezier=sl,n.plugins=Dl,Object.defineProperty(n,"__esModule",{value:!0})})})(E3,E3.exports);const h8e=u8e(E3.exports);E3.exports;let os,JO;function d8e(r,e){const{width:n,height:s}=ZM(),{logMessage:a}=eA(),u=Ht(()=>n.value/s.value),{scene:d}=d5(),{activeCamera:f}=Q6(),{setState:g}=zz();g("scene",d),g("camera",f);function _(){os&&(os.shadowMap.enabled=!0,os.shadowMap.type=g6)}function y(){os&&(os.setSize(n.value,s.value),os.setPixelRatio(Math.min(window.devicePixelRatio,2)))}function w(){os&&(os.dispose(),os=null),a("disposeRenderer",os),JO()}Ni(u,y);function k(){if(a("Render init",{renderer:os,canvas:r,scene:d}),!os&&r.value&&d){const A={canvas:r.value,...e};e!=null&&e.context&&(A.context=e.context),os=new A6(A),e!=null&&e.shadows&&_(),os.physicallyCorrectLights=(e==null?void 0:e.physicallyCorrectLights)||!1,e!=null&&e.outputEncoding&&(os.outputEncoding=e.outputEncoding),e!=null&&e.toneMapping&&(os.toneMapping=e.toneMapping,os.toneMappingExposure=1),y(),os.render(d,f.value),g("renderer",os),JO=ZO(()=>{d&&os&&os.render(d,f.value)}).disposeLoop}g("loop",ZO)}function S(A){os&&os.setClearColor(a8e(A))}return k(),{renderer:os,setClearColor:S,updateRenderer:y,disposeRenderer:w}}const f8e=yi({__name:"TresCanvas",props:{camera:null,ortographic:{type:Boolean},gl:null,shadows:{type:Boolean,default:!1},physicallyCorrectLights:{type:Boolean,default:!1},outputEncoding:{default:as},alpha:{type:Boolean,default:!1},background:null,async:{type:Boolean,default:!1}},setup(r){const e=r;let n,s=()=>{};const a=Tn(),u=Tn(!0),{scene:d,clearScene:f}=d5(),g=TB(),_=MB(),{createCamera:y}=Q6();let w;const k=zz();wa("UseTresState",k.state);const S=g.default?g==null?void 0:g.default().some(P=>P.type.name==="PerspectiveCamera"||P.type.name==="OrtographicCamera"):!1;if(d&&!S)if(e.camera){const{position:P,...R}=e.camera;if(w=y(e.ortographic===!0?py.Orthographic:py.Perspective,R||{}),P){const O=Wz(P);w.position.set(O[0],O[1],O[2])}d.add(w)}else w=y(e.ortographic===!0?py.Orthographic:py.Perspective,{}),w.position.set(5,5,5),d.add(w);Ni(e,()=>{n&&(s(),f(),A())});function A(){const P=d8e(a,{antialias:!0,physicallyCorrectLights:e.physicallyCorrectLights,shadows:e.shadows,context:e.gl||null,alpha:e.alpha});n=P.renderer,s=P.disposeRenderer,e.background&&P.setClearColor(e.background)}return Jd(()=>{A()}),Ag(()=>{f(),s()}),(P,R)=>{var O,B,N,V;return Ge(),Ct("div",{id:"tres-container",style:Qs({position:"relative",top:0,left:0,right:0,bottom:0,overflow:"hidden",width:((B=(O=ft(_))==null?void 0:O.style)==null?void 0:B.width)||"100%",height:"100%"})},[G("canvas",{ref_key:"canvasRef",ref:a,style:Qs({width:((V=(N=ft(_))==null?void 0:N.style)==null?void 0:V.width)||"100%",height:"100%",overflow:"hidden"})},null,4),r.async?(Ge(),Jn(zhe,{key:0},{default:Xn(()=>[u.value?yr(P.$slots,"default",{key:0}):pi("",!0)]),_:3})):(Ge(),Ct(ai,{key:1},[u.value?yr(P.$slots,"default",{key:0}):pi("",!0)],64))],4)}}}),p8e={install(r){r.component("TresCanvas",f8e);const{createComponentInstances:e}=c8e();e().forEach(([n,s])=>{r.component(n,s)})}},m8e=({app:r,router:e})=>{r.use(p8e)};function PE(r){return r!==null&&typeof r=="object"}function lM(r,e,n=".",s){if(!PE(e))return lM(r,{},n,s);const a=Object.assign({},e);for(const u in r){if(u==="__proto__"||u==="constructor")continue;const d=r[u];d!=null&&(s&&s(a,u,d,n)||(Array.isArray(d)&&Array.isArray(a[u])?a[u]=[...d,...a[u]]:PE(d)&&PE(a[u])?a[u]=lM(d,a[u],(n?`${n}.`:"")+u.toString(),s):a[u]=d))}return a}function g8e(r){return(...e)=>e.reduce((n,s)=>lM(n,s,"",r),{})}const v8e=g8e(),Gz=1/60*1e3,y8e=typeof performance<"u"?()=>performance.now():()=>Date.now(),Hz=typeof window<"u"?r=>window.requestAnimationFrame(r):r=>setTimeout(()=>r(y8e()),Gz);function _8e(r){let e=[],n=[],s=0,a=!1,u=!1;const d=new WeakSet,f={schedule:(g,_=!1,y=!1)=>{const w=y&&a,k=w?e:n;return _&&d.add(g),k.indexOf(g)===-1&&(k.push(g),w&&a&&(s=e.length)),g},cancel:g=>{const _=n.indexOf(g);_!==-1&&n.splice(_,1),d.delete(g)},process:g=>{if(a){u=!0;return}if(a=!0,[e,n]=[n,e],n.length=0,s=e.length,s)for(let _=0;_<s;_++){const y=e[_];y(g),d.has(y)&&(f.schedule(y),r())}a=!1,u&&(u=!1,f.process(g))}};return f}const b8e=40;let cM=!0,h_=!1,uM=!1;const vg={delta:0,timestamp:0},N_=["read","update","preRender","render","postRender"],f5=N_.reduce((r,e)=>(r[e]=_8e(()=>h_=!0),r),{}),hM=N_.reduce((r,e)=>{const n=f5[e];return r[e]=(s,a=!1,u=!1)=>(h_||k8e(),n.schedule(s,a,u)),r},{}),x8e=N_.reduce((r,e)=>(r[e]=f5[e].cancel,r),{});N_.reduce((r,e)=>(r[e]=()=>f5[e].process(vg),r),{});const w8e=r=>f5[r].process(vg),Yz=r=>{h_=!1,vg.delta=cM?Gz:Math.max(Math.min(r-vg.timestamp,b8e),1),vg.timestamp=r,uM=!0,N_.forEach(w8e),uM=!1,h_&&(cM=!1,Hz(Yz))},k8e=()=>{h_=!0,cM=!0,uM||Hz(Yz)},jz=()=>vg;function $z(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(n[s[a]]=r[s[a]]);return n}var C8e=function(){},QO=function(){};const dM=(r,e,n)=>Math.min(Math.max(n,r),e),IE=.001,S8e=.01,eF=10,E8e=.05,T8e=1;function M8e({duration:r=800,bounce:e=.25,velocity:n=0,mass:s=1}){let a,u;C8e(r<=eF*1e3);let d=1-e;d=dM(E8e,T8e,d),r=dM(S8e,eF,r/1e3),d<1?(a=_=>{const y=_*d,w=y*r,k=y-n,S=fM(_,d),A=Math.exp(-w);return IE-k/S*A},u=_=>{const w=_*d*r,k=w*n+n,S=Math.pow(d,2)*Math.pow(_,2)*r,A=Math.exp(-w),P=fM(Math.pow(_,2),d);return(-a(_)+IE>0?-1:1)*((k-S)*A)/P}):(a=_=>{const y=Math.exp(-_*r),w=(_-n)*r+1;return-IE+y*w},u=_=>{const y=Math.exp(-_*r),w=(n-_)*(r*r);return y*w});const f=5/r,g=L8e(a,u,f);if(r=r*1e3,isNaN(g))return{stiffness:100,damping:10,duration:r};{const _=Math.pow(g,2)*s;return{stiffness:_,damping:d*2*Math.sqrt(s*_),duration:r}}}const A8e=12;function L8e(r,e,n){let s=n;for(let a=1;a<A8e;a++)s=s-r(s)/e(s);return s}function fM(r,e){return r*Math.sqrt(1-e*e)}const R8e=["duration","bounce"],P8e=["stiffness","damping","mass"];function tF(r,e){return e.some(n=>r[n]!==void 0)}function I8e(r){let e=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},r);if(!tF(r,P8e)&&tF(r,R8e)){const n=M8e(r);e=Object.assign(Object.assign(Object.assign({},e),n),{velocity:0,mass:1}),e.isResolvedFromDuration=!0}return e}function tA(r){var{from:e=0,to:n=1,restSpeed:s=2,restDelta:a}=r,u=$z(r,["from","to","restSpeed","restDelta"]);const d={done:!1,value:e};let{stiffness:f,damping:g,mass:_,velocity:y,duration:w,isResolvedFromDuration:k}=I8e(u),S=nF,A=nF;function P(){const R=y?-(y/1e3):0,O=n-e,B=g/(2*Math.sqrt(f*_)),N=Math.sqrt(f/_)/1e3;if(a===void 0&&(a=Math.min(Math.abs(n-e)/100,.4)),B<1){const V=fM(N,B);S=U=>{const Y=Math.exp(-B*N*U);return n-Y*((R+B*N*O)/V*Math.sin(V*U)+O*Math.cos(V*U))},A=U=>{const Y=Math.exp(-B*N*U);return B*N*Y*(Math.sin(V*U)*(R+B*N*O)/V+O*Math.cos(V*U))-Y*(Math.cos(V*U)*(R+B*N*O)-V*O*Math.sin(V*U))}}else if(B===1)S=V=>n-Math.exp(-N*V)*(O+(R+N*O)*V);else{const V=N*Math.sqrt(B*B-1);S=U=>{const Y=Math.exp(-B*N*U),X=Math.min(V*U,300);return n-Y*((R+B*N*O)*Math.sinh(X)+V*O*Math.cosh(X))/V}}}return P(),{next:R=>{const O=S(R);if(k)d.done=R>=w;else{const B=A(R)*1e3,N=Math.abs(B)<=s,V=Math.abs(n-O)<=a;d.done=N&&V}return d.value=d.done?n:O,d},flipTarget:()=>{y=-y,[e,n]=[n,e],P()}}}tA.needsInterpolation=(r,e)=>typeof r=="string"||typeof e=="string";const nF=r=>0,qz=(r,e,n)=>{const s=e-r;return s===0?1:(n-r)/s},nA=(r,e,n)=>-n*r+n*e+r,Xz=(r,e)=>n=>Math.max(Math.min(n,e),r),Ay=r=>r%1?Number(r.toFixed(5)):r,d_=/(-)?([\d]*\.?[\d])+/g,pM=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,D8e=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function O_(r){return typeof r=="string"}const F_={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Ly=Object.assign(Object.assign({},F_),{transform:Xz(0,1)}),Ww=Object.assign(Object.assign({},F_),{default:1}),iA=r=>({test:e=>O_(e)&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),pp=iA("deg"),Ry=iA("%"),qi=iA("px"),iF=Object.assign(Object.assign({},Ry),{parse:r=>Ry.parse(r)/100,transform:r=>Ry.transform(r*100)}),rA=(r,e)=>n=>Boolean(O_(n)&&D8e.test(n)&&n.startsWith(r)||e&&Object.prototype.hasOwnProperty.call(n,e)),Zz=(r,e,n)=>s=>{if(!O_(s))return s;const[a,u,d,f]=s.match(d_);return{[r]:parseFloat(a),[e]:parseFloat(u),[n]:parseFloat(d),alpha:f!==void 0?parseFloat(f):1}},Dp={test:rA("hsl","hue"),parse:Zz("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(r)+", "+Ry.transform(Ay(e))+", "+Ry.transform(Ay(n))+", "+Ay(Ly.transform(s))+")"},N8e=Xz(0,255),DE=Object.assign(Object.assign({},F_),{transform:r=>Math.round(N8e(r))}),Nd={test:rA("rgb","red"),parse:Zz("red","green","blue"),transform:({red:r,green:e,blue:n,alpha:s=1})=>"rgba("+DE.transform(r)+", "+DE.transform(e)+", "+DE.transform(n)+", "+Ay(Ly.transform(s))+")"};function O8e(r){let e="",n="",s="",a="";return r.length>5?(e=r.substr(1,2),n=r.substr(3,2),s=r.substr(5,2),a=r.substr(7,2)):(e=r.substr(1,1),n=r.substr(2,1),s=r.substr(3,1),a=r.substr(4,1),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const mM={test:rA("#"),parse:O8e,transform:Nd.transform},xa={test:r=>Nd.test(r)||mM.test(r)||Dp.test(r),parse:r=>Nd.test(r)?Nd.parse(r):Dp.test(r)?Dp.parse(r):mM.parse(r),transform:r=>O_(r)?r:r.hasOwnProperty("red")?Nd.transform(r):Dp.transform(r)},Kz="${c}",Jz="${n}";function F8e(r){var e,n,s,a;return isNaN(r)&&O_(r)&&((n=(e=r.match(d_))===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0)+((a=(s=r.match(pM))===null||s===void 0?void 0:s.length)!==null&&a!==void 0?a:0)>0}function Qz(r){typeof r=="number"&&(r=`${r}`);const e=[];let n=0;const s=r.match(pM);s&&(n=s.length,r=r.replace(pM,Kz),e.push(...s.map(xa.parse)));const a=r.match(d_);return a&&(r=r.replace(d_,Jz),e.push(...a.map(F_.parse))),{values:e,numColors:n,tokenised:r}}function eU(r){return Qz(r).values}function tU(r){const{values:e,numColors:n,tokenised:s}=Qz(r),a=e.length;return u=>{let d=s;for(let f=0;f<a;f++)d=d.replace(f<n?Kz:Jz,f<n?xa.transform(u[f]):Ay(u[f]));return d}}const B8e=r=>typeof r=="number"?0:r;function V8e(r){const e=eU(r);return tU(r)(e.map(B8e))}const B_={test:F8e,parse:eU,createTransformer:tU,getAnimatableNone:V8e},W8e=new Set(["brightness","contrast","saturate","opacity"]);function z8e(r){let[e,n]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[s]=n.match(d_)||[];if(!s)return r;const a=n.replace(s,"");let u=W8e.has(e)?1:0;return s!==n&&(u*=100),e+"("+u+a+")"}const U8e=/([a-z-]*)\(.*?\)/g,gM=Object.assign(Object.assign({},B_),{getAnimatableNone:r=>{const e=r.match(U8e);return e?e.map(z8e).join(" "):r}});function NE(r,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(e-r)*6*n:n<1/2?e:n<2/3?r+(e-r)*(2/3-n)*6:r}function rF({hue:r,saturation:e,lightness:n,alpha:s}){r/=360,e/=100,n/=100;let a=0,u=0,d=0;if(!e)a=u=d=n;else{const f=n<.5?n*(1+e):n+e-n*e,g=2*n-f;a=NE(g,f,r+1/3),u=NE(g,f,r),d=NE(g,f,r-1/3)}return{red:Math.round(a*255),green:Math.round(u*255),blue:Math.round(d*255),alpha:s}}const G8e=(r,e,n)=>{const s=r*r,a=e*e;return Math.sqrt(Math.max(0,n*(a-s)+s))},H8e=[mM,Nd,Dp],sF=r=>H8e.find(e=>e.test(r)),nU=(r,e)=>{let n=sF(r),s=sF(e),a=n.parse(r),u=s.parse(e);n===Dp&&(a=rF(a),n=Nd),s===Dp&&(u=rF(u),s=Nd);const d=Object.assign({},a);return f=>{for(const g in d)g!=="alpha"&&(d[g]=G8e(a[g],u[g],f));return d.alpha=nA(a.alpha,u.alpha,f),n.transform(d)}},Y8e=r=>typeof r=="number",j8e=(r,e)=>n=>e(r(n)),iU=(...r)=>r.reduce(j8e);function rU(r,e){return Y8e(r)?n=>nA(r,e,n):xa.test(r)?nU(r,e):oU(r,e)}const sU=(r,e)=>{const n=[...r],s=n.length,a=r.map((u,d)=>rU(u,e[d]));return u=>{for(let d=0;d<s;d++)n[d]=a[d](u);return n}},$8e=(r,e)=>{const n=Object.assign(Object.assign({},r),e),s={};for(const a in n)r[a]!==void 0&&e[a]!==void 0&&(s[a]=rU(r[a],e[a]));return a=>{for(const u in s)n[u]=s[u](a);return n}};function oF(r){const e=B_.parse(r),n=e.length;let s=0,a=0,u=0;for(let d=0;d<n;d++)s||typeof e[d]=="number"?s++:e[d].hue!==void 0?u++:a++;return{parsed:e,numNumbers:s,numRGB:a,numHSL:u}}const oU=(r,e)=>{const n=B_.createTransformer(e),s=oF(r),a=oF(e);return s.numHSL===a.numHSL&&s.numRGB===a.numRGB&&s.numNumbers>=a.numNumbers?iU(sU(s.parsed,a.parsed),n):d=>`${d>0?e:r}`},q8e=(r,e)=>n=>nA(r,e,n);function X8e(r){if(typeof r=="number")return q8e;if(typeof r=="string")return xa.test(r)?nU:oU;if(Array.isArray(r))return sU;if(typeof r=="object")return $8e}function Z8e(r,e,n){const s=[],a=n||X8e(r[0]),u=r.length-1;for(let d=0;d<u;d++){let f=a(r[d],r[d+1]);if(e){const g=Array.isArray(e)?e[d]:e;f=iU(g,f)}s.push(f)}return s}function K8e([r,e],[n]){return s=>n(qz(r,e,s))}function J8e(r,e){const n=r.length,s=n-1;return a=>{let u=0,d=!1;if(a<=r[0]?d=!0:a>=r[s]&&(u=s-1,d=!0),!d){let g=1;for(;g<n&&!(r[g]>a||g===s);g++);u=g-1}const f=qz(r[u],r[u+1],a);return e[u](f)}}function aU(r,e,{clamp:n=!0,ease:s,mixer:a}={}){const u=r.length;QO(u===e.length),QO(!s||!Array.isArray(s)||s.length===u-1),r[0]>r[u-1]&&(r=[].concat(r),e=[].concat(e),r.reverse(),e.reverse());const d=Z8e(e,s,a),f=u===2?K8e(r,d):J8e(r,d);return n?g=>f(dM(r[0],r[u-1],g)):f}const p5=r=>e=>1-r(1-e),sA=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,Q8e=r=>e=>Math.pow(e,r),lU=r=>e=>e*e*((r+1)*e-r),eLe=r=>{const e=lU(r);return n=>(n*=2)<1?.5*e(n):.5*(2-Math.pow(2,-10*(n-1)))},cU=1.525,tLe=4/11,nLe=8/11,iLe=9/10,uU=r=>r,oA=Q8e(2),rLe=p5(oA),hU=sA(oA),dU=r=>1-Math.sin(Math.acos(r)),fU=p5(dU),sLe=sA(fU),aA=lU(cU),oLe=p5(aA),aLe=sA(aA),lLe=eLe(cU),cLe=4356/361,uLe=35442/1805,hLe=16061/1805,T3=r=>{if(r===1||r===0)return r;const e=r*r;return r<tLe?7.5625*e:r<nLe?9.075*e-9.9*r+3.4:r<iLe?cLe*e-uLe*r+hLe:10.8*r*r-20.52*r+10.72},dLe=p5(T3),fLe=r=>r<.5?.5*(1-T3(1-r*2)):.5*T3(r*2-1)+.5;function pLe(r,e){return r.map(()=>e||hU).splice(0,r.length-1)}function mLe(r){const e=r.length;return r.map((n,s)=>s!==0?s/(e-1):0)}function gLe(r,e){return r.map(n=>n*e)}function r3({from:r=0,to:e=1,ease:n,offset:s,duration:a=300}){const u={done:!1,value:r},d=Array.isArray(e)?e:[r,e],f=gLe(s&&s.length===d.length?s:mLe(d),a);function g(){return aU(f,d,{ease:Array.isArray(n)?n:pLe(d,n)})}let _=g();return{next:y=>(u.value=_(y),u.done=y>=a,u),flipTarget:()=>{d.reverse(),_=g()}}}function vLe({velocity:r=0,from:e=0,power:n=.8,timeConstant:s=350,restDelta:a=.5,modifyTarget:u}){const d={done:!1,value:e};let f=n*r;const g=e+f,_=u===void 0?g:u(g);return _!==g&&(f=_-e),{next:y=>{const w=-f*Math.exp(-y/s);return d.done=!(w>a||w<-a),d.value=d.done?_:_+w,d},flipTarget:()=>{}}}const aF={keyframes:r3,spring:tA,decay:vLe};function yLe(r){if(Array.isArray(r.to))return r3;if(aF[r.type])return aF[r.type];const e=new Set(Object.keys(r));return e.has("ease")||e.has("duration")&&!e.has("dampingRatio")?r3:e.has("dampingRatio")||e.has("stiffness")||e.has("mass")||e.has("damping")||e.has("restSpeed")||e.has("restDelta")?tA:r3}function pU(r,e,n=0){return r-e-n}function _Le(r,e,n=0,s=!0){return s?pU(e+-r,e,n):e-(r-e)+n}function bLe(r,e,n,s){return s?r>=e+n:r<=-n}const xLe=r=>{const e=({delta:n})=>r(n);return{start:()=>hM.update(e,!0),stop:()=>x8e.update(e)}};function mU(r){var e,n,{from:s,autoplay:a=!0,driver:u=xLe,elapsed:d=0,repeat:f=0,repeatType:g="loop",repeatDelay:_=0,onPlay:y,onStop:w,onComplete:k,onRepeat:S,onUpdate:A}=r,P=$z(r,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:R}=P,O,B=0,N=P.duration,V,U=!1,Y=!0,X;const $=yLe(P);!((n=(e=$).needsInterpolation)===null||n===void 0)&&n.call(e,s,R)&&(X=aU([0,100],[s,R],{clamp:!1}),s=0,R=100);const ee=$(Object.assign(Object.assign({},P),{from:s,to:R}));function ue(){B++,g==="reverse"?(Y=B%2===0,d=_Le(d,N,_,Y)):(d=pU(d,N,_),g==="mirror"&&ee.flipTarget()),U=!1,S&&S()}function Te(){O.stop(),k&&k()}function De(Ue){if(Y||(Ue=-Ue),d+=Ue,!U){const it=ee.next(Math.max(0,d));V=it.value,X&&(V=X(V)),U=Y?it.done:d<=0}A==null||A(V),U&&(B===0&&(N!=null||(N=d)),B<f?bLe(d,N,_,Y)&&ue():Te())}function $e(){y==null||y(),O=u(De),O.start()}return a&&$e(),{stop:()=>{w==null||w(),O.stop()}}}function gU(r,e){return e?r*(1e3/e):0}function wLe({from:r=0,velocity:e=0,min:n,max:s,power:a=.8,timeConstant:u=750,bounceStiffness:d=500,bounceDamping:f=10,restDelta:g=1,modifyTarget:_,driver:y,onUpdate:w,onComplete:k,onStop:S}){let A;function P(N){return n!==void 0&&N<n||s!==void 0&&N>s}function R(N){return n===void 0?s:s===void 0||Math.abs(n-N)<Math.abs(s-N)?n:s}function O(N){A==null||A.stop(),A=mU(Object.assign(Object.assign({},N),{driver:y,onUpdate:V=>{var U;w==null||w(V),(U=N.onUpdate)===null||U===void 0||U.call(N,V)},onComplete:k,onStop:S}))}function B(N){O(Object.assign({type:"spring",stiffness:d,damping:f,restDelta:g},N))}if(P(r))B({from:r,velocity:e,to:R(r)});else{let N=a*e+r;typeof _<"u"&&(N=_(N));const V=R(N),U=V===n?-1:1;let Y,X;const $=ee=>{Y=X,X=ee,e=gU(ee-Y,jz().delta),(U===1&&ee>V||U===-1&&ee<V)&&B({from:ee,to:V,velocity:e})};O({type:"decay",from:r,velocity:e,timeConstant:u,power:a,restDelta:g,modifyTarget:_,onUpdate:P(N)?$:void 0})}return{stop:()=>A==null?void 0:A.stop()}}const vU=(r,e)=>1-3*e+3*r,yU=(r,e)=>3*e-6*r,_U=r=>3*r,M3=(r,e,n)=>((vU(e,n)*r+yU(e,n))*r+_U(e))*r,bU=(r,e,n)=>3*vU(e,n)*r*r+2*yU(e,n)*r+_U(e),kLe=1e-7,CLe=10;function SLe(r,e,n,s,a){let u,d,f=0;do d=e+(n-e)/2,u=M3(d,s,a)-r,u>0?n=d:e=d;while(Math.abs(u)>kLe&&++f<CLe);return d}const ELe=8,TLe=.001;function MLe(r,e,n,s){for(let a=0;a<ELe;++a){const u=bU(e,n,s);if(u===0)return e;const d=M3(e,n,s)-r;e-=d/u}return e}const s3=11,zw=1/(s3-1);function ALe(r,e,n,s){if(r===e&&n===s)return uU;const a=new Float32Array(s3);for(let d=0;d<s3;++d)a[d]=M3(d*zw,r,n);function u(d){let f=0,g=1;const _=s3-1;for(;g!==_&&a[g]<=d;++g)f+=zw;--g;const y=(d-a[g])/(a[g+1]-a[g]),w=f+y*zw,k=bU(w,r,n);return k>=TLe?MLe(d,w,r,n):k===0?w:SLe(d,f,f+zw,r,n)}return d=>d===0||d===1?d:M3(u(d),e,s)}const OE={};class LLe{constructor(){this.subscriptions=new Set}add(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}notify(e,n,s){if(!!this.subscriptions.size)for(const a of this.subscriptions)a(e,n,s)}clear(){this.subscriptions.clear()}}const lF=r=>!isNaN(parseFloat(r));class RLe{constructor(e){this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new LLe,this.canTrackVelocity=!1,this.updateAndNotify=n=>{this.prev=this.current,this.current=n;const{delta:s,timestamp:a}=jz();this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a),hM.postRender(this.scheduleVelocityCheck),this.updateSubscribers.notify(this.current)},this.scheduleVelocityCheck=()=>hM.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{this.canTrackVelocity||(this.canTrackVelocity=lF(this.current)),n!==this.lastUpdated&&(this.prev=this.current)},this.prev=this.current=e,this.canTrackVelocity=lF(this.current)}onChange(e){return this.updateSubscribers.add(e)}clearListeners(){this.updateSubscribers.clear()}set(e){this.updateAndNotify(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?gU(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{const{stop:s}=e(n);this.stopAnimation=s}).then(()=>this.clearAnimation())}stop(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()}isAnimating(){return!!this.stopAnimation}clearAnimation(){this.stopAnimation=null}destroy(){this.updateSubscribers.clear(),this.stop()}}function PLe(r){return new RLe(r)}const{isArray:ILe}=Array;function DLe(){const r=Tn({}),e=s=>{const a=u=>{!r.value[u]||(r.value[u].stop(),r.value[u].destroy(),delete r.value[u])};s?ILe(s)?s.forEach(a):a(s):Object.keys(r.value).forEach(a)},n=(s,a,u)=>{if(r.value[s])return r.value[s];const d=PLe(a);return d.onChange(f=>u[s]=f),r.value[s]=d,d};return Afe(e),{motionValues:r,get:n,stop:e}}const NLe=r=>Array.isArray(r),mp=()=>({type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}),FE=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restDelta:.01,restSpeed:10}),OLe=r=>({type:"spring",stiffness:550,damping:r===0?100:30,restDelta:.01,restSpeed:10}),BE=()=>({type:"keyframes",ease:"linear",duration:300}),FLe=r=>({type:"keyframes",duration:800,values:r}),cF={default:OLe,x:mp,y:mp,z:mp,rotate:mp,rotateX:mp,rotateY:mp,rotateZ:mp,scaleX:FE,scaleY:FE,scale:FE,backgroundColor:BE,color:BE,opacity:BE},xU=(r,e)=>{let n;return NLe(e)?n=FLe:n=cF[r]||cF.default,{to:e,...n(e)}},uF={...F_,transform:Math.round},wU={color:xa,backgroundColor:xa,outlineColor:xa,fill:xa,stroke:xa,borderColor:xa,borderTopColor:xa,borderRightColor:xa,borderBottomColor:xa,borderLeftColor:xa,borderWidth:qi,borderTopWidth:qi,borderRightWidth:qi,borderBottomWidth:qi,borderLeftWidth:qi,borderRadius:qi,radius:qi,borderTopLeftRadius:qi,borderTopRightRadius:qi,borderBottomRightRadius:qi,borderBottomLeftRadius:qi,width:qi,maxWidth:qi,height:qi,maxHeight:qi,size:qi,top:qi,right:qi,bottom:qi,left:qi,padding:qi,paddingTop:qi,paddingRight:qi,paddingBottom:qi,paddingLeft:qi,margin:qi,marginTop:qi,marginRight:qi,marginBottom:qi,marginLeft:qi,rotate:pp,rotateX:pp,rotateY:pp,rotateZ:pp,scale:Ww,scaleX:Ww,scaleY:Ww,scaleZ:Ww,skew:pp,skewX:pp,skewY:pp,distance:qi,translateX:qi,translateY:qi,translateZ:qi,x:qi,y:qi,z:qi,perspective:qi,transformPerspective:qi,opacity:Ly,originX:iF,originY:iF,originZ:qi,zIndex:uF,filter:gM,WebkitFilter:gM,fillOpacity:Ly,strokeOpacity:Ly,numOctaves:uF},lA=r=>wU[r],kU=(r,e)=>e&&typeof r=="number"&&e.transform?e.transform(r):r;function BLe(r,e){let n=lA(r);return n!==gM&&(n=B_),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const VLe={linear:uU,easeIn:oA,easeInOut:hU,easeOut:rLe,circIn:dU,circInOut:sLe,circOut:fU,backIn:aA,backInOut:aLe,backOut:oLe,anticipate:lLe,bounceIn:dLe,bounceInOut:fLe,bounceOut:T3},hF=r=>{if(Array.isArray(r)){const[e,n,s,a]=r;return ALe(e,n,s,a)}else if(typeof r=="string")return VLe[r];return r},WLe=r=>Array.isArray(r)&&typeof r[0]!="number",dF=(r,e)=>r==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&B_.test(e)&&!e.startsWith("url("));function zLe(r){return Array.isArray(r.to)&&r.to[0]===null&&(r.to=[...r.to],r.to[0]=r.from),r}function ULe({ease:r,times:e,delay:n,...s}){const a={...s};return e&&(a.offset=e),r&&(a.ease=WLe(r)?r.map(hF):hF(r)),n&&(a.elapsed=-n),a}function GLe(r,e,n){return Array.isArray(e.to)&&(r.duration||(r.duration=800)),zLe(e),HLe(r)||(r={...r,...xU(n,e.to)}),{...e,...ULe(r)}}function HLe({delay:r,repeat:e,repeatType:n,repeatDelay:s,from:a,...u}){return!!Object.keys(u).length}function YLe(r,e){return r[e]||r.default||r}function jLe(r,e,n,s,a){const u=YLe(s,r);let d=u.from===null||u.from===void 0?e.get():u.from;const f=dF(r,n);d==="none"&&f&&typeof n=="string"&&(d=BLe(r,n));const g=dF(r,d);function _(w){const k={from:d,to:n,velocity:s.velocity?s.velocity:e.getVelocity(),onUpdate:S=>e.set(S)};return u.type==="inertia"||u.type==="decay"?wLe({...k,...u}):mU({...GLe(u,k,r),onUpdate:S=>{k.onUpdate(S),u.onUpdate&&u.onUpdate(S)},onComplete:()=>{s.onComplete&&s.onComplete(),a&&a(),w&&w()}})}function y(w){return e.set(n),s.onComplete&&s.onComplete(),a&&a(),w&&w(),{stop:()=>{}}}return!g||!f||u.type===!1?y:_}function $Le(){const{motionValues:r,stop:e,get:n}=DLe();return{motionValues:r,stop:e,push:(a,u,d,f={},g)=>{const _=d[a],y=n(a,_,d);if(f&&f.immediate){y.set(u);return}const w=jLe(a,y,u,f,g);y.start(w)}}}function qLe(r,e={},{motionValues:n,push:s,stop:a}=$Le()){const u=ft(e),d=Tn(!1);Ni(n,w=>{d.value=Object.values(w).filter(k=>k.isAnimating()).length>0},{immediate:!0,deep:!0});const f=w=>{if(!u||!u[w])throw new Error(`The variant ${w} does not exist.`);return u[w]},g=w=>(typeof w=="string"&&(w=f(w)),Promise.all(Object.entries(w).map(([k,S])=>{if(k!=="transition")return new Promise(A=>s(k,S,r,w.transition||xU(k,w[k]),A))}).filter(Boolean)));return{isAnimating:d,apply:g,set:w=>{const k=iT(w)?w:f(w);Object.entries(k).forEach(([S,A])=>{S!=="transition"&&s(S,A,r,{immediate:!0})})},leave:async w=>{let k;if(u&&(u.leave&&(k=u.leave),!u.leave&&u.initial&&(k=u.initial)),!k){w();return}await g(k),w()},stop:a}}const cA=typeof window<"u",XLe=()=>cA&&window.onpointerdown===null,ZLe=()=>cA&&window.ontouchstart===null,KLe=()=>cA&&window.onmousedown===null;function JLe({target:r,state:e,variants:n,apply:s}){const a=ft(n),u=Tn(!1),d=Tn(!1),f=Tn(!1),g=Ht(()=>{let y=[];return a&&(a.hovered&&(y=[...y,...Object.keys(a.hovered)]),a.tapped&&(y=[...y,...Object.keys(a.tapped)]),a.focused&&(y=[...y,...Object.keys(a.focused)])),y}),_=Ht(()=>{const y={};Object.assign(y,e.value),u.value&&a.hovered&&Object.assign(y,a.hovered),d.value&&a.tapped&&Object.assign(y,a.tapped),f.value&&a.focused&&Object.assign(y,a.focused);for(const w in y)g.value.includes(w)||delete y[w];return y});a.hovered&&(Qi(r,"mouseenter",()=>u.value=!0),Qi(r,"mouseleave",()=>{u.value=!1,d.value=!1}),Qi(r,"mouseout",()=>{u.value=!1,d.value=!1})),a.tapped&&(KLe()&&(Qi(r,"mousedown",()=>d.value=!0),Qi(r,"mouseup",()=>d.value=!1)),XLe()&&(Qi(r,"pointerdown",()=>d.value=!0),Qi(r,"pointerup",()=>d.value=!1)),ZLe()&&(Qi(r,"touchstart",()=>d.value=!0),Qi(r,"touchend",()=>d.value=!1))),a.focused&&(Qi(r,"focus",()=>f.value=!0),Qi(r,"blur",()=>f.value=!1)),Ni(_,s)}function QLe({set:r,target:e,apply:n,variants:s,variant:a}){const u=ft(s);Ni(()=>e,()=>{!u||(u.initial&&r("initial"),u.enter&&(a.value="enter"))},{immediate:!0,flush:"pre"})}function e7e({state:r,apply:e}){Ni(r,n=>{n&&e(n)},{immediate:!0})}function t7e({target:r,variants:e,variant:n}){const s=ft(e);s&&(s.visible||s.visibleOnce)&&ume(r,([{isIntersecting:a}])=>{s.visible?a?n.value="visible":n.value="initial":s.visibleOnce&&(a&&n.value!=="visibleOnce"?n.value="visibleOnce":n.value||(n.value="initial"))})}function n7e(r,e={syncVariants:!0,lifeCycleHooks:!0,visibilityHooks:!0,eventListeners:!0}){e.lifeCycleHooks&&QLe(r),e.syncVariants&&e7e(r),e.visibilityHooks&&t7e(r),e.eventListeners&&JLe(r)}function CU(r={}){const e=Yr({...r}),n=Tn({});return Ni(e,()=>{const s={};for(const[a,u]of Object.entries(e)){const d=lA(a),f=kU(u,d);s[a]=f}n.value=s},{immediate:!0,deep:!0}),{state:e,style:n}}function uA(r,e){Ni(()=>ka(r),n=>{!n||e(n)},{immediate:!0})}const i7e={x:"translateX",y:"translateY",z:"translateZ"};function SU(r={},e=!0){const n=Yr({...r}),s=Tn("");return Ni(n,a=>{let u="",d=!1;if(e&&(a.x||a.y||a.z)){const f=[a.x||0,a.y||0,a.z||0].map(qi.transform).join(",");u+=`translate3d(${f}) `,d=!0}for(const[f,g]of Object.entries(a)){if(e&&(f==="x"||f==="y"||f==="z"))continue;const _=lA(f),y=kU(g,_);u+=`${i7e[f]||f}(${y}) `}e&&!d&&(u+="translateZ(0px) "),s.value=u.trim()},{immediate:!0,deep:!0}),{state:n,transform:s}}const r7e=["","X","Y","Z"],s7e=["perspective","translate","scale","rotate","skew"],EU=["transformPerspective","x","y","z"];s7e.forEach(r=>{r7e.forEach(e=>{const n=r+e;EU.push(n)})});const o7e=new Set(EU);function hA(r){return o7e.has(r)}const a7e=new Set(["originX","originY","originZ"]);function TU(r){return a7e.has(r)}function l7e(r){const e={},n={};return Object.entries(r).forEach(([s,a])=>{hA(s)||TU(s)?e[s]=a:n[s]=a}),{transform:e,style:n}}function MU(r){const{transform:e,style:n}=l7e(r),{transform:s}=SU(e),{style:a}=CU(n);return s.value&&(a.value.transform=s.value),a.value}function c7e(r,e){let n,s;const{state:a,style:u}=CU();return uA(r,d=>{s=d;for(const f of Object.keys(wU))d.style[f]===null||d.style[f]===""||hA(f)||TU(f)||(a[f]=d.style[f]);n&&Object.entries(n).forEach(([f,g])=>d.style[f]=g),e&&e(a)}),Ni(u,d=>{if(!s){n=d;return}for(const f in d)s.style[f]=d[f]},{immediate:!0}),{style:a}}function u7e(r){const e=r.trim().split(/\) |\)/);if(e.length===1)return{};const n=s=>s.endsWith("px")||s.endsWith("deg")?parseFloat(s):isNaN(Number(s))?Number(s):s;return e.reduce((s,a)=>{if(!a)return s;const[u,d]=a.split("("),g=d.split(",").map(y=>n(y.endsWith(")")?y.replace(")",""):y.trim())),_=g.length===1?g[0]:g;return{...s,[u]:_}},{})}function h7e(r,e){Object.entries(u7e(e)).forEach(([n,s])=>{const a=["x","y","z"];if(n==="translate3d"){if(s===0){a.forEach(u=>r[u]=0);return}s.forEach((u,d)=>r[a[d]]=u);return}if(s=parseFloat(s),n==="translateX"){r.x=s;return}if(n==="translateY"){r.y=s;return}if(n==="translateZ"){r.z=s;return}r[n]=s})}function d7e(r,e){let n,s;const{state:a,transform:u}=SU();return uA(r,d=>{s=d,d.style.transform&&h7e(a,d.style.transform),n&&(d.style.transform=n),e&&e(a)}),Ni(u,d=>{if(!s){n=d;return}s.style.transform=d},{immediate:!0}),{transform:a}}function f7e(r,e){const n=Yr({}),s=d=>Object.entries(d).forEach(([f,g])=>n[f]=g),{style:a}=c7e(r,s),{transform:u}=d7e(r,s);return Ni(n,d=>{Object.entries(d).forEach(([f,g])=>{const _=hA(f)?u:a;_[f]&&_[f]===g||(_[f]=g)})},{immediate:!0,deep:!0}),uA(r,()=>e&&s(e)),{motionProperties:n,style:a,transform:u}}function p7e(r={}){const e=ft(r),n=Tn();return{state:Ht(()=>{if(!!n.value)return e[n.value]}),variant:n}}function AU(r,e={},n){const{motionProperties:s}=f7e(r),{variant:a,state:u}=p7e(e),d=qLe(s,e),f={target:r,variant:a,variants:e,state:u,motionProperties:s,...d};return n7e(f,n),f}const m7e=["initial","enter","leave","visible","visible-once","hovered","tapped","focused","delay"],g7e=(r,e)=>{const n=r.props?r.props:r.data&&r.data.attrs?r.data.attrs:{};n&&(n.variants&&iT(n.variants)&&(e.value={...e.value,...n.variants}),m7e.forEach(s=>{if(s==="delay"){if(n&&n[s]&&pfe(n[s])){const a=n[s];e&&e.value&&(e.value.enter&&(e.value.enter.transition||(e.value.enter.transition={}),e.value.enter.transition={delay:a,...e.value.enter.transition}),e.value.visible&&(e.value.visible.transition||(e.value.visible.transition={}),e.value.visible.transition={delay:a,...e.value.visible.transition}),e.value.visibleOnce&&(e.value.visibleOnce.transition||(e.value.visibleOnce.transition={}),e.value.visibleOnce.transition={delay:a,...e.value.visibleOnce.transition}))}return}s==="visible-once"&&(s="visibleOnce"),n&&n[s]&&iT(n[s])&&(e.value[s]=n[s])}))},VE=r=>({created:(n,s,a)=>{const u=s.value&&typeof s.value=="string"?s.value:a.key;u&&OE[u]&&OE[u].stop();const d=Tn(r||{});typeof s.value=="object"&&(d.value=s.value),g7e(a,d);const f=AU(n,d);n.motionInstance=f,u&&(OE[u]=f)},getSSRProps(n,s){let{initial:a}=n.value||s&&(s==null?void 0:s.props)||{};a=ft(a);const u=v8e((r==null?void 0:r.initial)||{},a||{});return!u||Object.keys(u).length===0?void 0:{style:MU(u)}}}),v7e={initial:{opacity:0},enter:{opacity:1}},y7e={initial:{opacity:0},visible:{opacity:1}},_7e={initial:{opacity:0},visibleOnce:{opacity:1}},b7e={initial:{scale:0,opacity:0},enter:{scale:1,opacity:1}},x7e={initial:{scale:0,opacity:0},visible:{scale:1,opacity:1}},w7e={initial:{scale:0,opacity:0},visibleOnce:{scale:1,opacity:1}},k7e={initial:{x:-100,rotate:90,opacity:0},enter:{x:0,rotate:0,opacity:1}},C7e={initial:{x:-100,rotate:90,opacity:0},visible:{x:0,rotate:0,opacity:1}},S7e={initial:{x:-100,rotate:90,opacity:0},visibleOnce:{x:0,rotate:0,opacity:1}},E7e={initial:{x:100,rotate:-90,opacity:0},enter:{x:0,rotate:0,opacity:1}},T7e={initial:{x:100,rotate:-90,opacity:0},visible:{x:0,rotate:0,opacity:1}},M7e={initial:{x:100,rotate:-90,opacity:0},visibleOnce:{x:0,rotate:0,opacity:1}},A7e={initial:{y:-100,rotate:-90,opacity:0},enter:{y:0,rotate:0,opacity:1}},L7e={initial:{y:-100,rotate:-90,opacity:0},visible:{y:0,rotate:0,opacity:1}},R7e={initial:{y:-100,rotate:-90,opacity:0},visibleOnce:{y:0,rotate:0,opacity:1}},P7e={initial:{y:100,rotate:90,opacity:0},enter:{y:0,rotate:0,opacity:1}},I7e={initial:{y:100,rotate:90,opacity:0},visible:{y:0,rotate:0,opacity:1}},D7e={initial:{y:100,rotate:90,opacity:0},visibleOnce:{y:0,rotate:0,opacity:1}},N7e={initial:{x:-100,opacity:0},enter:{x:0,opacity:1}},O7e={initial:{x:-100,opacity:0},visible:{x:0,opacity:1}},F7e={initial:{x:-100,opacity:0},visibleOnce:{x:0,opacity:1}},B7e={initial:{x:100,opacity:0},enter:{x:0,opacity:1}},V7e={initial:{x:100,opacity:0},visible:{x:0,opacity:1}},W7e={initial:{x:100,opacity:0},visibleOnce:{x:0,opacity:1}},z7e={initial:{y:-100,opacity:0},enter:{y:0,opacity:1}},U7e={initial:{y:-100,opacity:0},visible:{y:0,opacity:1}},G7e={initial:{y:-100,opacity:0},visibleOnce:{y:0,opacity:1}},H7e={initial:{y:100,opacity:0},enter:{y:0,opacity:1}},Y7e={initial:{y:100,opacity:0},visible:{y:0,opacity:1}},j7e={initial:{y:100,opacity:0},visibleOnce:{y:0,opacity:1}},vM={__proto__:null,fade:v7e,fadeVisible:y7e,fadeVisibleOnce:_7e,pop:b7e,popVisible:x7e,popVisibleOnce:w7e,rollBottom:P7e,rollLeft:k7e,rollRight:E7e,rollTop:A7e,rollVisibleBottom:I7e,rollVisibleLeft:C7e,rollVisibleOnceBottom:D7e,rollVisibleOnceLeft:S7e,rollVisibleOnceRight:M7e,rollVisibleOnceTop:R7e,rollVisibleRight:T7e,rollVisibleTop:L7e,slideBottom:H7e,slideLeft:N7e,slideRight:B7e,slideTop:z7e,slideVisibleBottom:Y7e,slideVisibleLeft:O7e,slideVisibleOnceBottom:j7e,slideVisibleOnceLeft:F7e,slideVisibleOnceRight:W7e,slideVisibleOnceTop:G7e,slideVisibleRight:V7e,slideVisibleTop:U7e},$7e=yi({props:{is:{type:[String,Object],required:!1},preset:{type:String,required:!1},instance:{type:Object,required:!1},variants:{type:Object,required:!1},initial:{type:Object,required:!1},enter:{type:Object,required:!1},leave:{type:Object,required:!1},visible:{type:Object,required:!1},visibleOnce:{type:Object,required:!1},hovered:{type:Object,required:!1},tapped:{type:Object,required:!1},focused:{type:Object,required:!1},delay:{type:[Number,String],required:!1}},setup(r){var f;const e=TB(),n=Yr({});if(!r.is&&!e.default)return()=>po("div",{});const s=Ht(()=>{let g;return r.preset&&(g=vM[r.preset]),g}),a=Ht(()=>({initial:r.initial,enter:r.enter,leave:r.leave,visible:r.visible,visibleOnce:r.visibleOnce,hovered:r.hovered,tapped:r.tapped,focused:r.focused})),u=Ht(()=>{const g={...a.value,...s.value||{},...r.variants||{}};return r.delay&&(g.enter.transition={...g.enter.transition},g.enter.transition.delay=parseInt(r.delay)),g}),d=Ht(()=>{if(!r.is)return;let g=r.is;return typeof d.value=="string"&&!Fue(g)&&(g=Ch(g)),g});if(((f=process==null?void 0:process.env)==null?void 0:f.NODE_ENV)==="development"||(process==null?void 0:process.dev)){const g=_=>{var y;(y=_.variants)!=null&&y.initial&&_.set("initial"),setTimeout(()=>{var w,k,S;(w=_.variants)!=null&&w.enter&&_.apply("enter"),(k=_.variants)!=null&&k.visible&&_.apply("visible"),(S=_.variants)!=null&&S.visibleOnce&&_.apply("visibleOnce")},10)};WM(()=>Object.entries(n).forEach(([_,y])=>g(y)))}return{slots:e,component:d,motionConfig:u,instances:n}},render({slots:r,motionConfig:e,instances:n,component:s}){var f;const a=MU(e.initial||{}),u=(g,_)=>(g.props||(g.props={}),g.props.style=a,g.props.onVnodeMounted=({el:y})=>{const w=AU(y,e);n[_]=w},g);if(s){const g=po(s,void 0,r);return u(g,0),g}return(((f=r.default)==null?void 0:f.call(r))||[]).map((g,_)=>u(g,_))}});function q7e(r){const e="\xE0\xE1\xE2\xE4\xE6\xE3\xE5\u0101\u0103\u0105\xE7\u0107\u010D\u0111\u010F\xE8\xE9\xEA\xEB\u0113\u0117\u0119\u011B\u011F\u01F5\u1E27\xEE\xEF\xED\u012B\u012F\xEC\u0142\u1E3F\xF1\u0144\u01F9\u0148\xF4\xF6\xF2\xF3\u0153\xF8\u014D\xF5\u0151\u1E55\u0155\u0159\xDF\u015B\u0161\u015F\u0219\u0165\u021B\xFB\xFC\xF9\xFA\u016B\u01D8\u016F\u0171\u0173\u1E83\u1E8D\xFF\xFD\u017E\u017A\u017C\xB7/_,:;",n="aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",s=new RegExp(e.split("").join("|"),"g");return r.toString().replace(/[A-Z]/g,a=>`-${a}`).toLowerCase().replace(/\s+/g,"-").replace(s,a=>n.charAt(e.indexOf(a))).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}const X7e={install(r,e){if(r.directive("motion",VE()),r.component("Motion",$7e),!e||e&&!e.excludePresets)for(const n in vM){const s=vM[n];r.directive(`motion-${q7e(n)}`,VE(s))}if(e&&e.directives)for(const n in e.directives){const s=e.directives[n];s.initial,r.directive(`motion-${n}`,VE(s))}}};var fF;const Py=typeof window<"u",Z7e=Object.prototype.toString,K7e=r=>Z7e.call(r)==="[object Object]";Py&&((fF=window==null?void 0:window.navigator)==null?void 0:fF.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function J7e(r){return SM()?(DF(r),!0):!1}function Q7e(r){var e;const n=ft(r);return(e=n==null?void 0:n.$el)!=null?e:n}const eRe=Py?window:void 0,yM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_M="__vueuse_ssr_handlers__";yM[_M]=yM[_M]||{};yM[_M];function tRe(r,e={}){const{immediate:n=!0,window:s=eRe}=e,a=Tn(!1);let u=null;function d(){!a.value||!s||(r(),u=s.requestAnimationFrame(d))}function f(){!a.value&&s&&(a.value=!0,d())}function g(){a.value=!1,u!=null&&s&&(s.cancelAnimationFrame(u),u=null)}return n&&f(),J7e(g),{isActive:a,pause:g,resume:f}}var pF;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(pF||(pF={}));const dA="vue-starport-injection",LU="vue-starport-options",nRe={duration:800,easing:"cubic-bezier(0.45, 0, 0.55, 1)",keepAlive:!1},RU={port:{type:String,required:!0},duration:{type:Number,required:!1},easing:{type:String,required:!1},keepAlive:{type:Boolean,required:!1,default:void 0},mountedProps:{type:Object,required:!1},initialProps:{type:Object,required:!1}};var iRe=Object.defineProperty,A3=Object.getOwnPropertySymbols,PU=Object.prototype.hasOwnProperty,IU=Object.prototype.propertyIsEnumerable,mF=(r,e,n)=>e in r?iRe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,rRe=(r,e)=>{for(var n in e||(e={}))PU.call(e,n)&&mF(r,n,e[n]);if(A3)for(var n of A3(e))IU.call(e,n)&&mF(r,n,e[n]);return r},gF=(r,e)=>{var n={};for(var s in r)PU.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&A3)for(var s of A3(r))e.indexOf(s)<0&&IU.call(r,s)&&(n[s]=r[s]);return n};const sRe=yi({name:"StarportProxy",props:rRe({props:{type:Object,default:()=>({})},component:{type:Object,required:!0}},RU),setup(r,e){const n=Dn(dA),s=Ht(()=>n.getInstance(r.port,r.component)),a=Tn(),u=s.value.generateId(),d=Tn(!1);return s.value.isVisible||(s.value.land(),d.value=!0),Jd(async()=>{s.value.el||(s.value.el=a.value,await ko(),d.value=!0,s.value.rect.update())}),Ag(async()=>{s.value.rect.update(),s.value.liftOff(),s.value.el=void 0,d.value=!1,!s.value.options.keepAlive&&(await ko(),await ko(),!s.value.el&&n.dispose(s.value.port))}),Ni(()=>r,async()=>{s.value.props&&await ko();const f=r,{props:g}=f,_=gF(f,["props"]);s.value.props=g||{},s.value.setLocalOptions(_)},{deep:!0,immediate:!0}),()=>{const f=r,{initialProps:g,mountedProps:_}=f,y=gF(f,["initialProps","mountedProps"]),w=pr(y,(d.value?_:g)||{});return po("div",pr(w,{id:u,ref:a,"data-starport-proxy":s.value.componentId,"data-starport-landed":s.value.isLanded?"true":void 0,"data-starport-floating":s.value.isLanded?void 0:"true"}),e.slots.default?po(e.slots.default):void 0)}}});var oRe=Object.defineProperty,aRe=Object.defineProperties,lRe=Object.getOwnPropertyDescriptors,vF=Object.getOwnPropertySymbols,cRe=Object.prototype.hasOwnProperty,uRe=Object.prototype.propertyIsEnumerable,yF=(r,e,n)=>e in r?oRe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,hRe=(r,e)=>{for(var n in e||(e={}))cRe.call(e,n)&&yF(r,n,e[n]);if(vF)for(var n of vF(e))uRe.call(e,n)&&yF(r,n,e[n]);return r},dRe=(r,e)=>aRe(r,lRe(e));const fRe=yi({name:"Starport",inheritAttrs:!0,props:RU,setup(r,e){const n=Tn(!1);return Jd(()=>{n.value=!0}),()=>{var d,f;const s=(f=(d=e.slots).default)==null?void 0:f.call(d);if(!s)throw new Error("[Vue Starport] Slot is required to use <Starport>");if(s.length!==1)throw new Error(`[Vue Starport] <Starport> requires exactly one slot, but got ${s.length}`);const a=s[0];let u=a.type;return(!K7e(u)||Yd(u))&&(u={render(){return s}}),po(sRe,dRe(hRe({},r),{key:r.port,component:N3(u),props:a.props}))}}});function pRe(r){const e=Yr({height:0,width:0,left:0,top:0,update:s,listen:u,pause:d,margin:"0px",padding:"0px"}),n=Py?document.documentElement||document.body:void 0;function s(){if(!Py)return;const f=Q7e(r);if(!f)return;const{height:g,width:_,left:y,top:w}=f.getBoundingClientRect(),k=window.getComputedStyle(f),S=k.margin,A=k.padding;Object.assign(e,{height:g,width:_,left:y,top:n.scrollTop+w,margin:S,padding:A})}const a=tRe(s,{immediate:!1});function u(){!Py||(s(),a.resume())}function d(){a.pause()}return e}let mRe=(r,e=21)=>(n=e)=>{let s="",a=n;for(;a--;)s+=r[Math.random()*r.length|0];return s};const _F=mRe("abcdefghijklmnopqrstuvwxyz",5);function bF(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().replace(/[^\w\d_-]/g,"")}function gRe(r){var e;return r.name||((e=r.__file)==null?void 0:e.split(/[\/\\.]/).slice(-2)[0])||""}var vRe=Object.defineProperty,xF=Object.getOwnPropertySymbols,yRe=Object.prototype.hasOwnProperty,_Re=Object.prototype.propertyIsEnumerable,wF=(r,e,n)=>e in r?vRe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,WE=(r,e)=>{for(var n in e||(e={}))yRe.call(e,n)&&wF(r,n,e[n]);if(xF)for(var n of xF(e))_Re.call(e,n)&&wF(r,n,e[n]);return r};function bRe(r,e,n={}){const s=gRe(e),a=bF(s)||_F(),u=Tn(),d=Tn(null),f=Tn(!1),g=Tn(!1),_=que(!0),y=Tn({}),w=Ht(()=>WE(WE(WE({},nRe),n),y.value)),k=Tn(0);let S;_.run(()=>{S=pRe(u),Ni(u,async O=>{O&&(g.value=!0),await ko(),u.value||(g.value=!1)})});const A=bF(r);function P(){return`starport-${a}-${A}-${_F()}`}const R=P();return Yr({el:u,id:R,port:r,props:d,rect:S,scope:_,isLanded:f,isVisible:g,options:w,liftOffTime:k,component:e,componentName:s,componentId:a,generateId:P,setLocalOptions(O={}){y.value=JSON.parse(JSON.stringify(O))},elRef(){return u},liftOff(){!f.value||(f.value=!1,k.value=Date.now(),S.listen())},land(){f.value||(f.value=!0,S.pause())}})}function xRe(r){const e=Yr(new Map);function n(a,u){let d=e.get(a);return d||(d=bRe(a,u,r),e.set(a,d)),d.component=u,d}function s(a){var u;(u=e.get(a))==null||u.scope.stop(),e.delete(a)}return{portMap:e,dispose:s,getInstance:n}}var wRe=Object.defineProperty,kRe=Object.defineProperties,CRe=Object.getOwnPropertyDescriptors,kF=Object.getOwnPropertySymbols,SRe=Object.prototype.hasOwnProperty,ERe=Object.prototype.propertyIsEnumerable,CF=(r,e,n)=>e in r?wRe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,TRe=(r,e)=>{for(var n in e||(e={}))SRe.call(e,n)&&CF(r,n,e[n]);if(kF)for(var n of kF(e))ERe.call(e,n)&&CF(r,n,e[n]);return r},MRe=(r,e)=>kRe(r,CRe(e));const ARe=yi({name:"StarportCraft",props:{port:{type:String,required:!0},component:{type:Object,required:!0}},setup(r){const e=Dn(dA);if(!e)throw new Error("[Vue Starport] Failed to find the carrier, all Starport components must be wrapped in a <StarportCarrier> component.");const n=Ht(()=>e.getInstance(r.port,r.component)),s=Ht(()=>{var d;return((d=n.value.el)==null?void 0:d.id)||n.value.id}),a=Ht(()=>{const d=Date.now()-n.value.liftOffTime,f=Math.max(0,n.value.options.duration-d),g=n.value.rect,_={position:"absolute",left:0,top:0,width:`${g.width}px`,height:`${g.height}px`,margin:g.margin,padding:g.padding,transform:`translate3d(${g.left}px,${g.top}px,0px)`};return!n.value.isVisible||!n.value.el?MRe(TRe({},_),{zIndex:-1,display:"none"}):(n.value.isLanded?_.display="none":Object.assign(_,{transitionProperty:"all",transitionDuration:`${f}ms`,transitionTimingFunction:n.value.options.easing}),_)}),u={};return()=>{const d=!!(n.value.isLanded&&n.value.el);return po("div",{style:a.value,"data-starport-craft":n.value.componentId,"data-starport-landed":n.value.isLanded?"true":void 0,"data-starport-floating":n.value.isLanded?void 0:"true",onTransitionend:n.value.land},po(Ede,{to:d?`#${s.value}`:"body",disabled:!d},po(n.value.component,pr(u,n.value.props))))}}}),LRe=yi({name:"StarportCarrier",setup(r,{slots:e}){const n=xRe(Dn(LU,{}));return pu().appContext.app.provide(dA,n),()=>{var a;return[(a=e.default)==null?void 0:a.call(e),Array.from(n.portMap.entries()).map(([u,{component:d}])=>po(ARe,{key:u,port:u,component:d}))]}}});function RRe(r={}){return{install(e){e.provide(LU,r),e.component("Starport",fRe),e.component("StarportCarrier",LRe)}}}function PRe(r){function e(){document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`)}e(),window.addEventListener("resize",e),r.app.use(X7e),r.app.use(RRe({keepAlive:!0}));const n=r;Gke(n),m8e(n)}function qa(r,e,n){var s,a;return(a=((s=r.instance)==null?void 0:s.$).provides[e])!=null?a:n}function IRe(){return{install(r){r.directive("click",{name:"v-click",mounted(e,n){var y,w,k,S;if(Cy.value||((y=qa(n,by))==null?void 0:y.value))return;const s=qa(n,kp),a=qa(n,_y),u=qa(n,oT),d=n.modifiers.hide!==!1&&n.modifiers.hide!=null,f=n.modifiers.fade!==!1&&n.modifiers.fade!=null,g=((w=s==null?void 0:s.value)==null?void 0:w.length)||0,_=f?spe:NS;if(s&&!((k=s==null?void 0:s.value)!=null&&k.includes(e))&&s.value.push(e),n.value==null&&(n.value=s==null?void 0:s.value.length),!(u!=null&&u.value.has(n.value)))u==null||u.value.set(n.value,[e]);else if(!((S=u==null?void 0:u.value.get(n.value))!=null&&S.includes(e))){const A=(u==null?void 0:u.value.get(n.value))||[];u==null||u.value.set(n.value,[e].concat(A))}e==null||e.classList.toggle(vp,!0),a&&Ni(a,()=>{var O;const A=(O=a==null?void 0:a.value)!=null?O:0,P=n.value!=null?A>=n.value:A>g;e.classList.contains(OS)||e.classList.toggle(_,!P),d!==!1&&d!==void 0&&e.classList.toggle(_,P),e.classList.toggle(jv,!1);const R=u==null?void 0:u.value.get(A);R==null||R.forEach((B,N)=>{B.classList.toggle($x,!1),N===R.length-1?B.classList.toggle(jv,!0):B.classList.toggle($x,!0)}),e.classList.contains(jv)||e.classList.toggle($x,P)},{immediate:!0})},unmounted(e,n){e==null||e.classList.toggle(vp,!1);const s=qa(n,kp);s!=null&&s.value&&aT(s.value,e)}}),r.directive("after",{name:"v-after",mounted(e,n){var f,g;if(Cy.value||((f=qa(n,by))==null?void 0:f.value))return;const s=qa(n,kp),a=qa(n,_y),u=qa(n,oT),d=s==null?void 0:s.value.length;n.value==null&&(n.value=s==null?void 0:s.value.length),u!=null&&u.value.has(n.value)?(g=u==null?void 0:u.value.get(n.value))==null||g.push(e):u==null||u.value.set(n.value,[e]),e==null||e.classList.toggle(vp,!0),a&&Ni(a,()=>{var y,w,k;const _=((y=a.value)!=null?y:0)>=((k=(w=n.value)!=null?w:d)!=null?k:0);e.classList.contains(OS)||e.classList.toggle(NS,!_),e.classList.toggle(jv,!1),e.classList.contains(jv)||e.classList.toggle($x,_)},{immediate:!0})},unmounted(e){e==null||e.classList.toggle(vp,!0)}}),r.directive("click-hide",{name:"v-click-hide",mounted(e,n){var d,f,g;if(Cy.value||((d=qa(n,by))==null?void 0:d.value))return;const s=qa(n,kp),a=qa(n,_y),u=((f=s==null?void 0:s.value)==null?void 0:f.length)||0;s&&!((g=s==null?void 0:s.value)!=null&&g.includes(e))&&s.value.push(e),e==null||e.classList.toggle(vp,!0),a&&Ni(a,()=>{var w;const _=(w=a==null?void 0:a.value)!=null?w:0,y=n.value!=null?_>=n.value:_>u;e.classList.toggle(NS,y),e.classList.toggle(OS,y)},{immediate:!0})},unmounted(e,n){e==null||e.classList.toggle(vp,!1);const s=qa(n,kp);s!=null&&s.value&&aT(s.value,e)}})}}}function DRe(r,e){const n=_V(r),s=bV(e,n.currentRoute,n.currentPage);return{nav:{...n,...s,downloadPDF:xT,next:zd,nextSlide:Yy,openInEditor:qwe,prev:Ud,prevSlide:jy},configs:wr,themeConfigs:Ht(()=>wr.themeConfig)}}function NRe(){return{install(r){const e=DRe(Lh,yc);r.provide(Zn,Yr(e))}}}const Vg=hfe(Zwe);Vg.use(tl);Vg.use(Qfe());Vg.use(IRe());Vg.use(NRe());PRe({app:Vg,router:tl});Vg.mount("#app");export{US as $,yge as A,$we as B,Jd as C,Yr as D,fDe as E,ai as F,gDe as G,Ni as H,Xn as I,pV as J,e6 as K,Lve as L,Us as M,Fge as N,oa as O,Lr as P,Mge as Q,uDe as R,t6 as S,hDe as T,yc as U,y3 as V,Gwe as W,HS as X,FS as Y,Uy as Z,Hve as _,Zn as a,gV as a0,Al as a1,dDe as a2,yr as a3,Kv as a4,qx as a5,gT as a6,sge as a7,oge as a8,age as a9,cge as aa,cr as ab,Vy as ac,vDe as ad,au as ae,aa as af,v1e as ag,Mp as ah,sp as ai,BB as aj,uge as ak,Ag as al,Sge as am,npe as b,wr as c,yi as d,Lhe as e,Ct as f,G as g,ft as h,Dn as i,WB as j,Ks as k,AV as l,Yt as m,Qs as n,Ge as o,Bt as p,pi as q,Xp as r,er as s,Js as t,pDe as u,Tn as v,mDe as w,Ht as x,Ja as y,Jn as z};
